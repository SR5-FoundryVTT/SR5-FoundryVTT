<form class="chummer-import {{cssClass}}" autocomplete="off" onsubmit="event.preventDefault()">
    <header class="flexcol">
        <h1>Chummer XML Data Import</h1>
    </header>
  
    <section>
        <!-- Quick Import Section -->
        <div class="quickImportTab {{#if showAdvanced}}hidden{{/if}}">
            <p>
                Automatically downloads the latest supported Chummer5a XML files from <a href="{{info.versionLink}}" target="_blank">source</a>.<br />
                Approximate download size: <b>7‚ÄØMB</b>.
            </p>
            <p>
                Includes weapons, armor, vehicles, spells, and more.<br />
                Optional translation adds <b>~2‚ÄØMB</b>.
            </p>
    
            <div class="section-divider"></div>
            <h2>Quick Mode Import</h2>
    
            <div style="display: flex; align-items: center; gap: 1em;">
                <label for="languageSelect" style="white-space: nowrap;">Translation Language:</label>
                <select id="languageSelect">
                    <option value="">English (default)</option>
                    <option value="de-de_data.xml">Deutsch</option>
                    <option value="fr-fr_data.xml">Fran√ßais</option>
                    <option value="ja-jp_data.xml">Êó•Êú¨Ë™û</option>
                    <option value="pt-br_data.xml">Portugu√™s</option>
                    <option value="zh-cn_data.xml">‰∏≠Êñá</option>
                </select>
            </div>
    
            <label><input type="checkbox" class="setIcons" {{#if icons}}checked{{/if}} /> Enable automatic icon assignment</label>
    
            <div class="button-row">
                <button type="button" class="toggleAdvancedBtn">üîÅ Change to Advanced Mode</button>
                <button name="quick-import" type="submit" class="quickImportBtn">‚¨áÔ∏è Quick Import Data</button>
            </div>
        </div>
    
        <!-- Advanced Import Section -->
        <div class="advancedImport {{#unless showAdvanced}}hidden{{/unless}}">
            <p>
                <b>Only <a href="{{info.versionLink}}" target="_blank">{{info.version}}</a></b> of Chummer5a is fully supported.<br />
                Other versions may result in broken or missing data.
            </p>
            <p>
                Upload XML files manually if using a different version.
            </p>
    
            <div class="section-divider"></div>
            <h2>Advanced Mode Import</h2>
    
            <h3>Translation (optional)</h3>
            <div style="display: flex; align-items: center; gap: 10px;">
                <input type="file" class="langDataFileDrop" accept="text/*"  style="min-width: 200px; width: 200px;" />
                <div><small>Selected file:</small> {{#if langDataFile}}<b>{{langDataFile}}</b>{{else}}None{{/if}}</div>
            </div>

            <h3>Data Files [data/*.xml]</h3>
            <div style="display: flex; align-items: center; gap: 10px;">
                <input type="file" class="filedatadrop" accept="text/*" multiple style="min-width: 200px; width: 200px;" />
                <div><small>(You may select multiple files)</small></div>
            </div>
    
            <div class="fileStatusGrid">
                {{#each dataFiles}}
                    <div>{{this.name}}:</div>
                    <div style="flex-grow: 1; text-align: right;">
                        {{#if this.parsed}}
                            <b style="color: green;">‚úÖ Imported</b>
                        {{else if this.parsing}}
                            <span style="color: #ff9800;">‚è≥ Importing...</span>
                        {{else if this.missing}}
                            <span style="color: red;">‚ùå Missing</span>
                        {{else}}
                            <span style="color: #4caf50;">üìÇ Selected</span>
                        {{/if}}
                    </div>
                {{/each}}
                {{#if finishedOverallParsing}}
                    <div><b>üéâ All files:</b></div>
                    <div style="flex-grow: 1; text-align: right;"><b>Imported, enjoy.</b></div>
                {{/if}}
            </div>
    
            <label><input type="checkbox" class="setIcons" {{#if icons}}checked{{/if}} /> Enable automatic icon assignment</label>
    
            <div class="button-row">
                <button type="button" class="toggleAdvancedBtn">üîÅ Change to Quick Mode</button>
                <button name="import" type="submit" {{#if disableImportButton}}disabled{{/if}}>üìÇ Import Files</button>
            </div>
        </div>
    </section>
</form>

<style>
    .chummer-import {
        font-family: sans-serif;
        line-height: 1.5;
        color: #222;
    }

    .chummer-import h1{
        margin: 0;
    }

    .chummer-import h2,
    .chummer-import h3 {
        margin: 0.5em 0 0.2em;
        font-weight: bold;
    }

    .chummer-import section {
        padding: 0.5em 0;
    }

    .chummer-import .quickImportTab,
    .chummer-import .advancedImport {
        padding: 0em 1em;
        border-radius: 6px;
    }

    .chummer-import p {
        margin: 0.5em 0;
    }

    .chummer-import label {
        display: block;
        margin: 0.5em 0;
        font-weight: 500;
    }

    .chummer-import select,
    .chummer-import input[type="file"] {
        border-radius: 4px;
        min-width: 150px;
        text-align: center;
    }

    .chummer-import input[type="checkbox"] {
        margin-right: 0.5em;
    }

    .chummer-import button {
        margin-top: 0.5em;
        font-size: 1em;
        border: 1px solid #aaa;
        border-radius: 5px;
        background-color: #eaeaea;
        cursor: pointer;
    }

    .chummer-import button:hover {
        background-color: #ddd;
    }

    .chummer-import .fileStatusGrid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 0.2em 1em;
        padding: 0em 1em;
    }

    .chummer-import .hidden {
        display: none !important;
    }

    .chummer-import .button-row {
        display: flex;
        gap: 0.5em;
        justify-content: flex-start;
    }

    .chummer-import .button-row button {
        flex: 0 1 auto;
        min-width: max-content;
    }
</style>
