<div class="flexcol flex0">
    <div class="technology">
        {{#hasprop system 'grade'}}
        <div class="flexrow nowrap">
            <label>{{localize "SR5.CyberwareGrade"}}</label>
            <select name="system.grade" class="display">
                {{#select system.grade}} {{#each config.cyberwareGrades as |name type|}}
                <option value="{{type}}">{{localize name}}</option>
                {{/each}} {{/select}}
            </select>
        </div>
        {{/hasprop}} {{#hasprop system 'essence'}}
        <div class="flexrow nowrap">
            <label>{{localize "SR5.EssenceCost"}}</label>
            <input
                class="display attribute-input"
                type="text"
                size="4"
                {{! Input is used for both .base and .value. Hiding name will stop it from saving .value into .base }}
                {{#ife system.grade 'standard'}}name="system.essence.base"{{/ife}}
                value="{{#ife system.grade 'standard'}}{{system.essence.base}}{{else}}{{system.essence.value}}{{/ife}}"
                data-dtype="Number"
                placeholder="0"
                {{#ifne system.grade 'standard'}}readonly{{/ifne}}
            />
        </div>
        {{/hasprop}} {{#hasprop system 'capacity'}}
        <div class="flexrow nowrap">
            <label>{{localize "SR5.Capacity"}}</label>
            <input
                class="display attribute-input"
                type="text"
                size="4"
                name="system.capacity"
                value="{{system.capacity}}"
                data-dtype="Number"
                placeholder="0"
            />
        </div>
        {{/hasprop}}
        <div class="flexrow nowrap">
            <label>{{localize "SR5.Rating"}}</label>
            <input
                class="display"
                type="text"
                size="2"
                maxlength="2"
                name="system.technology.rating"
                value="{{system.technology.rating}}"
                data-dtype="Number"
                placeholder="0"
                {{#if system.technology.cost.adjusted}}readonly{{/if}}
                {{#if system.technology.availability.adjusted}}readonly{{/if}}
                {{#hasprop system 'grade'}}
                    {{#ifne system.grade 'standard'}}readonly{{/ifne}}
                {{/hasprop}}
            />
        </div>
        <div class="flexrow nowrap">
            <label>{{localize "SR5.Qty"}}</label>
            <input
                class="display"
                type="text"
                size="3"
                maxlength="3"
                name="system.technology.quantity"
                value="{{system.technology.quantity}}"
                data-dtype="Number"
                placeholder="1"
            />
        </div>
        {{#unless hideConceal}}
        <div class="flexrow nowrap">
            <label>{{localize "SR5.Conceal"}}</label>            
            <input
                class="display"
                type="text"
                size="3"
                name="system.technology.conceal.base"
                value="{{system.technology.conceal.base}}"
                data-dtype="Number"
                placeholder="0"
            />
        </div>
        {{/unless}}
        <div class="flexrow nowrap">
            <label>{{localize "SR5.Cost"}}</label>
            <div class="input">
                <input
                    class="display"
                    type="text"
                    {{! Input is used for both .base and .value. Hiding name will stop it from saving .value into .base }}
                    {{#if (not system.technology.cost.adjusted)}}name="system.technology.cost.base"{{/if}}
                    value="{{#if system.technology.cost.adjusted}}{{system.technology.cost.value}}{{else}}{{#hasprop system 'grade'}}{{#ifne system.grade 'standard'}}{{system.technology.cost.value}}{{else}}{{system.technology.cost.base}}{{/ifne}}{{else}}{{system.technology.cost.base}}{{/hasprop}}{{/if}}"
                    data-dtype="Number"
                    placeholder="100"
                    {{#if system.technology.cost.adjusted}}readonly{{/if}}
                    {{#hasprop system 'grade'}}
                        {{#ifne system.grade 'standard'}}readonly{{/ifne}}
                    {{/hasprop}}
                />
                <span class="unit">
                    <i class="fas fa-yen-sign"></i>
                </span>
            </div>
            <input
                class="checkbox"
                type="checkbox"
                name="system.technology.cost.adjusted"
                {{checked system.technology.cost.adjusted}}
                data-tooltip="Toggle Cost Adjustment"                    
                {{#hasprop system 'grade'}}
                {{#ifne system.grade 'standard'}}disabled{{/ifne}}
                {{/hasprop}}
            />
        </div>
        <div class="flexrow nowrap">
            <label>{{localize "SR5.Availability"}}</label>
            <input
                class="display"
                type="text"
                {{! Input is used for both .base and .value. Hiding name will stop it from saving .value into .base }}
                {{#if (not system.technology.availability.adjusted)}}name="system.technology.availability.base"{{/if}}
                value="{{#if system.technology.availability.adjusted}}{{system.technology.availability.value}}{{else}}{{#hasprop system 'grade'}}{{#ifne system.grade 'standard'}}{{system.technology.availability.value}}{{else}}{{system.technology.availability.base}}{{/ifne}}{{else}}{{system.technology.availability.base}}{{/hasprop}}{{/if}}"
                placeholder="2R"
                {{#if system.technology.availability.adjusted}}readonly{{/if}}
                {{#hasprop system 'grade'}}
                    {{#ifne system.grade 'standard'}}readonly{{/ifne}}
                {{/hasprop}}
            />
            <div class="input">
                <input
                    class="checkbox"
                    type="checkbox"
                    name="system.technology.availability.adjusted"
                    {{checked system.technology.availability.adjusted}}
                    data-tooltip="{{localize 'SR5.Tooltips.Item.AvailabilityAdjustment'}}"
                    {{#hasprop system 'grade'}}
                        {{#ifne system.grade 'standard'}}disabled{{/ifne}}
                    {{/hasprop}}
                />
            </div>
        </div>
        {{#unless hideConditionMonitor}}
        <div class="flexrow nowrap">
            <label>{{localize "SR5.ConditionMonitor"}}</label>
            <div class="flexrow">
                <input
                    class="display"
                    type="text"
                    size="2"
                    maxlength="2"
                    name="system.technology.condition_monitor.value"
                    value="{{system.technology.condition_monitor.value}}"
                    placeholder="0"
                    data-dtype="Number"
                />
                <input
                    class="display"
                    type="text"
                    size="3"
                    maxlength="3"
                    value="/{{system.technology.condition_monitor.max}}"
                    disabled
                />
            </div>
        </div>
        {{/unless}}
        <div class="flexrow nowrap">
            <label>{{localize "SR5.Equipped"}}</label>
                <input
                class="checkbox"
                type="checkbox"
                name="system.technology.equipped"
                {{checked
                system.technology.equipped}}/>
        </div>
        <div class="flexrow nowrap">
            <label>{{localize "SR5.Wireless"}}</label>
            <input
                class="checkbox"
                type="checkbox"
                name="system.technology.wireless"
                {{checked
                system.technology.wireless}}
            />
        </div>
        <div class="flexrow nowrap">
            <label>PAN</label>
            {{#if networkController}}
            <span>
                <a class="origin-link" draggable="false" data-origin-link="{{networkController.uuid}}">{{networkController.name}}</a>
                <a class="close controller-remove"><i class="fas fa-times"></i></a>
            </span>
            {{/if}}
        </div>
    </div>
</div>
