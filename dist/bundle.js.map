{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/@babel/runtime/helpers/assertThisInitialized.js","node_modules/@babel/runtime/helpers/asyncToGenerator.js","node_modules/@babel/runtime/helpers/classCallCheck.js","node_modules/@babel/runtime/helpers/createClass.js","node_modules/@babel/runtime/helpers/defineProperty.js","node_modules/@babel/runtime/helpers/get.js","node_modules/@babel/runtime/helpers/getPrototypeOf.js","node_modules/@babel/runtime/helpers/inherits.js","node_modules/@babel/runtime/helpers/interopRequireDefault.js","node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","node_modules/@babel/runtime/helpers/setPrototypeOf.js","node_modules/@babel/runtime/helpers/superPropBase.js","node_modules/@babel/runtime/helpers/typeof.js","node_modules/@babel/runtime/regenerator/index.js","node_modules/base64-js/index.js","node_modules/browser-resolve/empty.js","node_modules/buffer/index.js","node_modules/core-util-is/lib/util.js","node_modules/events/events.js","node_modules/ieee754/index.js","node_modules/inherits/inherits_browser.js","node_modules/is-buffer/index.js","node_modules/isarray/index.js","node_modules/process-nextick-args/index.js","node_modules/process/browser.js","node_modules/readable-stream/duplex-browser.js","node_modules/readable-stream/lib/_stream_duplex.js","node_modules/readable-stream/lib/_stream_passthrough.js","node_modules/readable-stream/lib/_stream_readable.js","node_modules/readable-stream/lib/_stream_transform.js","node_modules/readable-stream/lib/_stream_writable.js","node_modules/readable-stream/lib/internal/streams/BufferList.js","node_modules/readable-stream/lib/internal/streams/destroy.js","node_modules/readable-stream/lib/internal/streams/stream-browser.js","node_modules/readable-stream/passthrough.js","node_modules/readable-stream/readable-browser.js","node_modules/readable-stream/transform.js","node_modules/readable-stream/writable-browser.js","node_modules/regenerator-runtime/runtime.js","node_modules/safe-buffer/index.js","node_modules/sax/lib/sax.js","node_modules/stream-browserify/index.js","node_modules/string_decoder/lib/string_decoder.js","node_modules/timers-browserify/main.js","node_modules/util-deprecate/browser.js","node_modules/xml2js/lib/bom.js","node_modules/xml2js/lib/builder.js","node_modules/xml2js/lib/defaults.js","node_modules/xml2js/lib/parser.js","node_modules/xml2js/lib/processors.js","node_modules/xml2js/lib/xml2js.js","node_modules/xmlbuilder/lib/DocumentPosition.js","node_modules/xmlbuilder/lib/NodeType.js","node_modules/xmlbuilder/lib/Utility.js","node_modules/xmlbuilder/lib/WriterState.js","node_modules/xmlbuilder/lib/XMLAttribute.js","node_modules/xmlbuilder/lib/XMLCData.js","node_modules/xmlbuilder/lib/XMLCharacterData.js","node_modules/xmlbuilder/lib/XMLComment.js","node_modules/xmlbuilder/lib/XMLDOMConfiguration.js","node_modules/xmlbuilder/lib/XMLDOMErrorHandler.js","node_modules/xmlbuilder/lib/XMLDOMImplementation.js","node_modules/xmlbuilder/lib/XMLDOMStringList.js","node_modules/xmlbuilder/lib/XMLDTDAttList.js","node_modules/xmlbuilder/lib/XMLDTDElement.js","node_modules/xmlbuilder/lib/XMLDTDEntity.js","node_modules/xmlbuilder/lib/XMLDTDNotation.js","node_modules/xmlbuilder/lib/XMLDeclaration.js","node_modules/xmlbuilder/lib/XMLDocType.js","node_modules/xmlbuilder/lib/XMLDocument.js","node_modules/xmlbuilder/lib/XMLDocumentCB.js","node_modules/xmlbuilder/lib/XMLDummy.js","node_modules/xmlbuilder/lib/XMLElement.js","node_modules/xmlbuilder/lib/XMLNamedNodeMap.js","node_modules/xmlbuilder/lib/XMLNode.js","node_modules/xmlbuilder/lib/XMLNodeList.js","node_modules/xmlbuilder/lib/XMLProcessingInstruction.js","node_modules/xmlbuilder/lib/XMLRaw.js","node_modules/xmlbuilder/lib/XMLStreamWriter.js","node_modules/xmlbuilder/lib/XMLStringWriter.js","node_modules/xmlbuilder/lib/XMLStringifier.js","node_modules/xmlbuilder/lib/XMLText.js","node_modules/xmlbuilder/lib/XMLWriterBase.js","node_modules/xmlbuilder/lib/index.js","src/module/actor/DamageApplicationFlow.ts","src/module/actor/SR5Actor.ts","src/module/actor/SR5ActorSheet.ts","src/module/actor/SkillFlow.ts","src/module/actor/SkillRules.ts","src/module/actor/SoakFlow.ts","src/module/actor/SoakRules.ts","src/module/actor/prep/ActorPrepFactory.ts","src/module/actor/prep/BaseActorPrep.ts","src/module/actor/prep/CharacterPrep.ts","src/module/actor/prep/CritterPrep.ts","src/module/actor/prep/SpiritPrep.ts","src/module/actor/prep/SpritePrep.ts","src/module/actor/prep/VehiclePrep.ts","src/module/actor/prep/functions/AttributesPrep.ts","src/module/actor/prep/functions/ConditionMonitorsPrep.ts","src/module/actor/prep/functions/InitiativePrep.ts","src/module/actor/prep/functions/ItemPrep.ts","src/module/actor/prep/functions/LimitsPrep.ts","src/module/actor/prep/functions/MatrixPrep.ts","src/module/actor/prep/functions/ModifiersPrep.ts","src/module/actor/prep/functions/MovementPrep.ts","src/module/actor/prep/functions/NPCPrep.ts","src/module/actor/prep/functions/SkillsPrep.ts","src/module/actor/prep/functions/WoundsPrep.ts","src/module/apps/ChangelogApplication.ts","src/module/apps/EnvModifiersApplication.ts","src/module/apps/characterImport/ArmorParser.js","src/module/apps/characterImport/BaseParserFunctions.js","src/module/apps/characterImport/CharacterImporter.js","src/module/apps/characterImport/CharacterInfoUpdater.js","src/module/apps/characterImport/ContactParser.js","src/module/apps/characterImport/CyberwareParser.js","src/module/apps/characterImport/ItemsParser.js","src/module/apps/characterImport/LifestyleParser.js","src/module/apps/characterImport/PowerParser.js","src/module/apps/characterImport/QualityParser.js","src/module/apps/characterImport/SpellParser.js","src/module/apps/characterImport/WeaponParser.js","src/module/apps/characterImport/gearImport/AmmoParser.ts","src/module/apps/characterImport/gearImport/BaseGearParser.ts","src/module/apps/characterImport/gearImport/DeviceParser.ts","src/module/apps/characterImport/gearImport/GearsParser.ts","src/module/apps/characterImport/gearImport/ParserSelector.ts","src/module/apps/characterImport/gearImport/ProgramParser.ts","src/module/apps/characterImport/gearImport/SinParser.ts","src/module/apps/chummer-import-form.js","src/module/apps/dialogs/DamageApplicationDialog.ts","src/module/apps/dialogs/DeleteConfirmationDialog.ts","src/module/apps/dialogs/FormDialog.ts","src/module/apps/dialogs/ShadowrunActorDialogs.ts","src/module/apps/dialogs/ShadowrunItemDialog.ts","src/module/apps/dialogs/ShadowrunTestDialog.ts","src/module/apps/gmtools/OverwatchScoreTracker.js","src/module/apps/skills/KnowledgeSkillEditForm.ts","src/module/apps/skills/LanguageSkillEditForm.ts","src/module/apps/skills/SkillEditForm.ts","src/module/canvas.ts","src/module/chat.ts","src/module/combat/SR5Combat.ts","src/module/config.ts","src/module/constants.ts","src/module/dataTemplates.ts","src/module/dataWrappers/DataWrapper.ts","src/module/handlebars/AppHelpers.ts","src/module/handlebars/BasicHelpers.ts","src/module/handlebars/HandlebarManager.ts","src/module/handlebars/HandlebarTemplates.ts","src/module/handlebars/ItemLineHelpers.ts","src/module/handlebars/RollAndLabelHelpers.ts","src/module/handlebars/SkillLineHelpers.ts","src/module/helpers.ts","src/module/hooks.ts","src/module/importer/apps/import-form.ts","src/module/importer/helper/ImportHelper.ts","src/module/importer/helper/ImportStrategy.ts","src/module/importer/helper/JSONStrategy.ts","src/module/importer/helper/XMLStrategy.ts","src/module/importer/importer/AmmoImporter.ts","src/module/importer/importer/ArmorImporter.ts","src/module/importer/importer/ComplexFormImporter.ts","src/module/importer/importer/Constants.ts","src/module/importer/importer/CritterPowerImporter.ts","src/module/importer/importer/DataImporter.ts","src/module/importer/importer/DeviceImporter.ts","src/module/importer/importer/EquipmentImporter.ts","src/module/importer/importer/ModImporter.ts","src/module/importer/importer/QualityImporter.ts","src/module/importer/importer/SpellImporter.ts","src/module/importer/importer/WareImporter.ts","src/module/importer/importer/WeaponImporter.ts","src/module/importer/parser/Parser.ts","src/module/importer/parser/ParserMap.ts","src/module/importer/parser/armor/ArmorParserBase.ts","src/module/importer/parser/complex-form/ComplexFormParserBase.ts","src/module/importer/parser/critter-power/CritterPowerParserBase.ts","src/module/importer/parser/item/ItemParserBase.ts","src/module/importer/parser/item/TechnologyItemParserBase.ts","src/module/importer/parser/mod/ModParserBase.ts","src/module/importer/parser/quality/QualityParserBase.ts","src/module/importer/parser/spell/CombatSpellParser.ts","src/module/importer/parser/spell/DetectionSpellImporter.ts","src/module/importer/parser/spell/IllusionSpellParser.ts","src/module/importer/parser/spell/ManipulationSpellParser.ts","src/module/importer/parser/spell/SpellParserBase.ts","src/module/importer/parser/ware/CyberwareParser.ts","src/module/importer/parser/weapon/MeleeParser.ts","src/module/importer/parser/weapon/RangedParser.ts","src/module/importer/parser/weapon/ThrownParser.ts","src/module/importer/parser/weapon/WeaponParserBase.ts","src/module/item/ChatData.ts","src/module/item/ItemAction.ts","src/module/item/SR5Item.ts","src/module/item/SR5ItemDataWrapper.ts","src/module/item/SR5ItemSheet.ts","src/module/macros.ts","src/module/main.ts","src/module/migrator/Migrator.ts","src/module/migrator/VersionMigration.ts","src/module/migrator/versions/LegacyMigration.ts","src/module/migrator/versions/Version0_6_10.ts","src/module/migrator/versions/Version0_6_5.ts","src/module/migrator/versions/Version0_7_2.ts","src/module/parts/PartsList.ts","src/module/rolls/ShadowrunRoller.ts","src/module/settings.ts","src/module/sr5/Combat.ts","src/module/sr5/Modifiers.ts","src/module/template.ts"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxJA;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACjvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3gBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxLA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC1/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACrNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC9qBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzEA;AACA;;ACDA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;;ACDA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5uBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC7hDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACvSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7XA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChhBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5aA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjEA,qFAAuG;AACvG,sCAAgC;AAKhC,MAAa,qBAAqB;IAE9B;;;;;OAKG;IACG,cAAc,CAAC,MAAkB,EAAE,MAAmB;;YAExD,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;YAChC,MAAM,WAAW,GACb,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,wBAAwB,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC,CAAC;YAEtE,sDAAsD;YACtD,MAAM,uBAAuB,GAAG,MAAM,IAAI,iDAAuB,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC;YACvF,MAAM,uBAAuB,CAAC,MAAM,EAAE,CAAC;YAEvC,IAAI,uBAAuB,CAAC,QAAQ,EAAE;gBAClC,OAAO;aACV;YAED,IAAI,uBAAuB,CAAC,cAAc,KAAK,QAAQ,EAAE;gBACrD,WAAW,CAAC,OAAO,CAAC,CAAC,EAAC,KAAK,EAAE,QAAQ,EAAE,EAAE,EAAE;oBACvC,IAAI,CAAC,kBAAkB,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;gBAC7C,CAAC,CAAC,CAAC;aACN;iBACI,IAAI,uBAAuB,CAAC,cAAc,KAAK,kBAAkB,EAAE;gBACpE,WAAW,CAAC,OAAO,CAAC,CAAC,EAAC,KAAK,EAAC,EAAE,EAAE;oBAC5B,IAAI,CAAC,kBAAkB,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;gBAC3C,CAAC,CAAC,CAAC;aACN;iBAEI;gBACD,OAAO,CAAC,KAAK,CAAC,gEAAgE,CAAC,CAAC;aACnF;QACL,CAAC;KAAA;IAED;;;OAGG;IACG,kBAAkB,CAAC,KAAgB,EAAE,MAAkB;;YACzD,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC,EAAE;gBACnB,OAAO;aACV;YAED,gHAAgH;YAChH,MAAM,GAAG,IAAI,CAAC,6BAA6B,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;YAE3D,8DAA8D;YAC9D,uDAAuD;YACvD,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,KAAK,QAAQ,EAAE;gBAChC,MAAM,GAAG,MAAM,KAAK,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;aAChD;YAED,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,KAAK,MAAM,EAAE;gBAC9B,MAAM,GAAG,MAAM,KAAK,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;aAC9C;YAED,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,KAAK,UAAU,EAAE;gBAClC,MAAM,KAAK,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;aACzC;YAED,uGAAuG;YACvG,iEAAiE;YACjE,2DAA2D;YAC3D,wDAAwD;QAC5D,CAAC;KAAA;IAIO,wBAAwB,CAAC,KAAgB,EAAE,MAAmB;QAClE,MAAM,SAAS,GAAG,KAAK,CAAC,IAAI,CAAC,IAA0B,CAAC;QACxD,MAAM,UAAU,GAAG,SAAS,CAAC,UAAU,CAAC,UAAU,CAAC;QACnD,MAAM,YAAY,GAAI,YAAG,CAAC,oBAAoB,CAAC,UAAU,CAAC,CAAC;QAC3D,IAAI,MAAM,GAAG,KAAK,CAAC;QAEnB,2DAA2D;QAC3D,IAAI,SAAS,CAAC,MAAM,EAAE;YAClB,MAAM,GAAG,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC;SACrC;QAED,OAAO;YACH,KAAK;YACL,QAAQ,EAAE,MAAM;YAChB,KAAK,EAAE,KAAK,CAAC,gBAAgB,CAAC,MAAM,CAAC;YACrC,UAAU,EAAE,YAAY;YACxB,MAAM,EAAE,MAAM;SACjB,CAAA;IACL,CAAC;IAEO,6BAA6B,CAAC,KAAgB,EAAE,MAAkB;QACtE,MAAM,aAAa,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;QACxC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,EAAE;YAClB,OAAO,aAAa,CAAC;SACxB;QAED,2EAA2E;QAC3E,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,KAAK,MAAM,EAAE;YAC9B,aAAa,CAAC,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC;SACzC;QAED,OAAO,aAAa,CAAC;IACzB,CAAC;CACJ;AAzGD,sDAyGC;;;;;;;;;;;;;;AC/GD,8DAAwE;AACxE,wCAAmC;AAEnC,4CAAwE;AACxE,kDAA6C;AAC7C,8DAAyD;AACzD,iFAA4E;AAC5E,kCAA8C;AAE9C,gDAA2C;AAC3C,yCAAoC;AACpC,oDAA+C;AAC/C,2CAAsC;AA+BtC,6CAAwC;AAGxC,MAAa,QAAS,SAAQ,KAAmB;IAK7C,iBAAiB;QACb,MAAM,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,uBAAW,EAAE,gBAAgB,CAAC,CAAC;QACvD,OAAO,EAAE,KAAK,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACrC,CAAC;IAEK,iBAAiB,CAAC,KAAK;;YACzB,MAAM,GAAG,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;YAC5B,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;gBACb,OAAO,IAAI,CAAC,OAAO,CAAC,uBAAW,EAAE,gBAAgB,EAAE,GAAG,CAAC,CAAC;aAC3D;QACL,CAAC;KAAA;IAED,WAAW;QACP,KAAK,CAAC,WAAW,EAAE,CAAC;QAEpB,MAAM,SAAS,GAAG,IAAI,CAAC,IAAoB,CAAC;QAC5C,MAAM,OAAO,GAAG,mCAAgB,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;QACnD,IAAI,OAAO,EAAE;YACT,OAAO,CAAC,OAAO,EAAE,CAAC;SACrB;IACL,CAAC;IAED,WAAW,CAAC,YAAoB;QAC5B,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;IAClD,CAAC;IAED,eAAe,CAAC,SAAkB;QAC9B,IAAI,SAAS,KAAK,SAAS;YAAE,OAAO,SAAS,CAAC;QAC9C,kDAAkD;QAClD,MAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;QACtD,IAAI,KAAK;YAAE,OAAO,KAAK,CAAC;QACxB,6CAA6C;QAC7C,OAAO,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC;IAC/F,CAAC;IAED,aAAa,CAAC,aAAsB;QAChC,IAAI,aAAa,KAAK,SAAS;YAAE,OAAO,SAAS,CAAC;QAClD,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;IACpD,CAAC;IAED,eAAe,CAAC,QAAiB;QAC7B,IAAI,QAAQ,KAAK,SAAS;YAAE,OAAO;QAEnC,MAAM,YAAY,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QAC5C,IAAI,YAAY;YACZ,OAAO,YAAY,CAAC,QAAQ,CAAC,CAAC;IACtC,CAAC;IAED,sBAAsB,CAAC,aAAsB;QACzC,IAAI,aAAa,KAAK,SAAS;YAAE,OAAO,SAAS,CAAC;QAClD,MAAM,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;QACpD,IAAI,CAAC,CAAA,SAAS,aAAT,SAAS,uBAAT,SAAS,CAAE,KAAK,CAAA;YAAE,OAAO,SAAS,CAAC;QACxC,OAAO,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;IAC3C,CAAC;IAED,SAAS,CAAC,SAAkB;QACxB,IAAI,CAAC,SAAS;YAAE,OAAO,SAAS,CAAC;QACjC,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;IAC5C,CAAC;IAED,gBAAgB;QACZ,IAAI,CAAC,CAAC,QAAQ,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;YAAE,OAAO,CAAC,CAAC;QAC5C,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,CAAC,CAAC;IACjD,CAAC;IAED;;;OAGG;IACG,OAAO,CAAC,KAAa,CAAC,CAAC;;YACzB,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;YAC5B,IAAI,IAAI,IAAI,IAAI,CAAC,KAAK,KAAK,CAAC;gBAAE,OAAO;YACrC,2GAA2G;YAC3G,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/C,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,QAAQ,GAAG,EAAE,CAAC,CAAC;YAEjD,MAAM,IAAI,CAAC,MAAM,CAAC,EAAC,2BAA2B,EAAE,IAAI,EAAC,CAAC,CAAC;QAC3D,CAAC;KAAA;IAED,OAAO;QACH,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC;IAC1C,CAAC;IAED,QAAQ;QACJ,OAAO,OAAO,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;IACrC,CAAC;IAED,QAAQ;QACJ,IAAI,OAAO,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI;YACzB,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;QAEhC,OAAO,6BAAa,CAAC,cAAc,EAAE,CAAC;IAC1C,CAAC;IAED,eAAe,CAAC,MAAc;QAC1B,OAAQ,KAAK,CAAC,YAAY,CAAC,MAAM,CAAwB,CAAC;IAC9D,CAAC;IAED,eAAe;QACX,IAAI,CAAC,CAAC,QAAQ,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;YAAE,OAAO;QAC1C,MAAM,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;QACrC,IAAI,MAAM,CAAC,MAAM;YAAE,OAAO,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IAClE,CAAC;IAED,uBAAuB;QACnB,IAAI,IAAI,CAAC,SAAS,EAAE,EAAE;YAClB,OAAO,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;SACxC;aAAM,IAAI,IAAI,CAAC,WAAW,EAAE,EAAE;YAC3B,MAAM,SAAS,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;YACzC,IAAI,SAAS,EAAE;gBACX,IAAI,GAAG,GAAG,SAAS,CAAC,IAAI,CAAC,sBAAsB,CAAC;gBAChD,IAAI,CAAC,GAAG;oBAAE,GAAG,GAAG,WAAW,CAAC;gBAC5B,OAAO,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;aAClC;SACJ;IACL,CAAC;IAED,kBAAkB;QACd,iEAAiE;QACjE,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,IAAa,EAAE,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;IACtF,CAAC;IAED,qBAAqB;QACjB,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC,eAAe;QAC9B,MAAM,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;QAChD,IAAI,QAAQ,EAAE;YACV,KAAK,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;SAC1C;QACD,OAAO,KAAK,CAAC;IACjB,CAAC;IAED,eAAe;QACX,IAAI,CAAC,CAAC,QAAQ,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;YAAE,OAAO,CAAC,CAAC;QAC5C,yDAAyD;QACzD,OAAO,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IAClD,CAAC;IAED,aAAa;QACT,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;IACrC,CAAC;IAED,YAAY,CAAC,IAAY;QACrB,MAAM,UAAU,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QACxC,OAAO,UAAU,CAAC,IAAI,CAAC,CAAC;IAC5B,CAAC;IAED,SAAS;QACL,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;IACjC,CAAC;IAED,QAAQ,CAAC,IAAY;QACjB,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QAChC,OAAO,MAAM,CAAC,IAAI,CAAC,CAAC;IACxB,CAAC;IAED;;OAEG;IACH,OAAO;QACH,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;IAC1B,CAAC;IAED,WAAW;QACP,OAAO,IAAI,CAAC,OAAO,EAAE,KAAK,WAAW,CAAC;IAC1C,CAAC;IAED,QAAQ;QACJ,OAAO,IAAI,CAAC,OAAO,EAAE,KAAK,QAAQ,CAAC;IACvC,CAAC;IAED,QAAQ;QACJ,OAAO,IAAI,CAAC,OAAO,EAAE,KAAK,QAAQ,CAAC;IACvC,CAAC;IAED,SAAS;QACL,OAAO,IAAI,CAAC,OAAO,EAAE,KAAK,SAAS,CAAC;IACxC,CAAC;IAED,OAAO;QACH,IAAI,CAAC,CAAC,QAAQ,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,KAAK,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;YAAE,OAAO,KAAK,CAAC;QAE9E,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC;IAChE,CAAC;IAED,SAAS;QACL,OAAO,IAAI,CAAC,OAAO,EAAE,KAAK,SAAS,CAAC;IACxC,CAAC;IAED,uBAAuB;QACnB,IAAI,CAAC,CAAC,aAAa,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;YAAE,OAAO;QAE/C,QAAQ,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YAChC,KAAK,KAAK;gBACN,OAAO,gBAAgB,CAAC;YAC5B,KAAK,QAAQ;gBACT,OAAO,oBAAoB,CAAC;YAChC,KAAK,OAAO;gBACR,OAAO,mBAAmB,CAAC;YAC/B,KAAK,WAAW;gBACZ,OAAO,iBAAiB,CAAC;YAC7B,KAAK,QAAQ;gBACT,OAAO,cAAc,CAAC;YAC1B,KAAK,QAAQ;gBACT,OAAM,sBAAsB,CAAC;YACjC;gBACI,OAAO;SACd;IACL,CAAC;IAED,mBAAmB;QACf,IAAI,IAAI,CAAC,SAAS,EAAE;YAAE,OAAO;QAE7B,MAAM,IAAI,GAAG,IAAI,CAAC,uBAAuB,EAAE,CAAC;QAC5C,OAAO,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;IACtC,CAAC;IAED,eAAe;QACX,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;IACxC,CAAC;IAED;;;;;;;OAOG;IACH,OAAO,CAAC,OAAe,EAAE,OAAO,GAAE,EAAC,cAAc,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,EAAC;QACrE,MAAM,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QACvF,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,SAAS;YAAE,OAAO,CAAC,CAAC;QACzC,IAAI,CAAC,qBAAS,CAAC,SAAS,CAAC,KAAK,CAAC;YAAE,OAAO,CAAC,CAAC;QAE1C,MAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;QAErD,IAAI,uBAAU,CAAC,iBAAiB,CAAC,KAAK,CAAC,IAAI,uBAAU,CAAC,mBAAmB,CAAC,KAAK,CAAC,EAAE;YAC9E,OAAO,uBAAU,CAAC,qBAAqB,EAAE,GAAG,SAAS,CAAC,KAAK,CAAC;SAC/D;QAED,MAAM,mBAAmB,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,cAAE,CAAC,KAAK,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,CAAC;QAC1F,OAAO,KAAK,CAAC,KAAK,GAAG,SAAS,CAAC,KAAK,GAAG,mBAAmB,CAAC;IAC/D,CAAC;IAED,QAAQ,CAAC,OAAe,EAAE,OAAO,GAAE,EAAC,OAAO,EAAE,KAAK,EAAC;QAC/C,IAAI,OAAO,CAAC,OAAO;YACf,OAAO,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;QAEzC,MAAM,EAAE,MAAM,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;QAClC,IAAI,MAAM,CAAC,MAAM,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;YACvC,OAAO,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;SACjC;QACD,IAAI,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;YAC/C,OAAO,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;SACzC;QACD,0EAA0E;QAC1E,KAAK,MAAM,WAAW,IAAI,MAAM,CAAC,SAAS,EAAE;YACxC,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,WAAW,CAAC,EAAE;gBAC9C,MAAM,QAAQ,GAAG,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;gBAC/C,IAAI,QAAQ,CAAC,KAAK,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;oBACxC,OAAO,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;iBAClC;aACJ;SACJ;IACL,CAAC;IAED;;;;;;OAMG;IACH,eAAe,CAAC,WAAmB;QAC/B,IAAI,CAAC,WAAW;YAAE,OAAO;QAEzB,MAAM,aAAa,GAAG,CAAC,KAAiB,EAAU,EAAE,CAAE,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC;QAEjH,MAAM,EAAC,MAAM,EAAC,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;QAEhC,KAAK,MAAM,KAAK,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE;YAC9C,IAAI,WAAW,KAAK,aAAa,CAAC,KAAK,CAAC;gBACpC,OAAO,KAAK,CAAC;SACpB;QAED,KAAK,MAAM,KAAK,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;YACtD,IAAI,WAAW,KAAK,aAAa,CAAC,KAAK,CAAC;gBACpC,OAAO,KAAK,CAAC;SACpB;QAED,wDAAwD;QACxD,KAAK,MAAM,WAAW,IAAI,MAAM,CAAC,SAAS,EAAE;YACxC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,WAAW,CAAC;gBAAE,SAAS;YAC5D,2CAA2C;YAC3C,MAAM,cAAc,GAAG,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,KAAqB,CAAC;YAC3E,KAAK,MAAM,KAAK,IAAI,MAAM,CAAC,MAAM,CAAC,cAAc,CAAC,EAAG;gBAChD,IAAI,WAAW,KAAK,aAAa,CAAC,KAAK,CAAC;oBACpC,OAAO,KAAK,CAAC;aACpB;SACJ;IACL,CAAC;IAED,aAAa,CAAC,OAAe;QACzB,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QACrC,IAAI,CAAC,KAAK,EAAE;YACR,OAAO,EAAE,CAAC;SACb;QAED,OAAO,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;IACpE,CAAC;IAEK,iBAAiB,CAAC,QAAQ,EAAE,KAAM;;YACpC,MAAM,YAAY,GAAG;gBACjB,IAAI,EAAE,EAAE;gBACR,KAAK,EAAE,EAAE;gBACT,IAAI,EAAE,CAAC;gBACP,KAAK,EAAE,CAAC;gBACR,GAAG,EAAE,CAAC;aACT,CAAC;YACF,KAAK,mCACE,YAAY,GACZ,KAAK,CACX,CAAC;YAEF,MAAM,EAAE,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC;YACxB,MAAM,KAAK,GAAG,EAAE,CAAC;YACjB,KAAK,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC;YAClB,MAAM,SAAS,GAAG,yBAAyB,QAAQ,QAAQ,CAAC;YAC5D,MAAM,UAAU,GAAG,EAAE,CAAC;YACtB,UAAU,CAAC,SAAS,CAAC,GAAG,KAAK,CAAC;YAE9B,MAAM,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;YAE9B,OAAO,EAAE,CAAC;QACd,CAAC;KAAA;IAEK,cAAc,CAAC,YAAiC,EAAC,IAAI,EAAE,8BAAkB,EAAC;;YAC5E,MAAM,KAAK,GAAG,6BAAa,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;YAEjD,MAAM,gBAAgB,GAAG,oBAAoB,CAAC;YAC9C,MAAM,qBAAqB,GAAG,iBAAO,CAAC,8BAA8B,CAAC,gBAAgB,EAAE,KAAK,CAAC,CAAC;YAE9F,IAAI,CAAC,qBAAqB;gBAAE,OAAO;YAEnC,MAAM,EAAC,eAAe,EAAE,EAAE,EAAC,GAAG,qBAAqB,CAAC;YAEpD,MAAM,IAAI,CAAC,MAAM,CAAC,eAAyB,CAAC,CAAC;YAE7C,OAAO,EAAE,CAAC;QACd,CAAC;KAAA;IAEK,mBAAmB,CAAC,OAAO;;YAC7B,MAAM,UAAU,GAAG,iBAAO,CAAC,kBAAkB,CAAC,4BAA4B,EAAE,OAAO,CAAC,CAAC;YACrF,MAAM,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;QAClC,CAAC;KAAA;IAEK,gBAAgB,CAAC,KAAK;;YACxB,MAAM,YAAY,GAAG;gBACjB,IAAI,EAAE,EAAE;gBACR,KAAK,EAAE,EAAE;gBACT,IAAI,EAAE,CAAC;gBACP,KAAK,EAAE,CAAC;gBACR,gEAAgE;gBAChE,GAAG,EAAE,CAAC;aACT,CAAC;YACF,KAAK,mCACE,YAAY,GACZ,KAAK,CACX,CAAC;YAEF,MAAM,EAAE,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC;YACxB,MAAM,KAAK,GAAG,EAAE,CAAC;YACjB,KAAK,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC;YAClB,MAAM,SAAS,GAAG,4BAA4B,CAAC;YAC/C,MAAM,UAAU,GAAG,EAAE,CAAC;YACtB,UAAU,CAAC,SAAS,CAAC,GAAG,KAAK,CAAC;YAE9B,MAAM,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;YAE9B,OAAO,EAAE,CAAC;QACd,CAAC;KAAA;IAEK,oBAAoB,CAAC,OAAO,EAAE,QAAQ;;YACxC,MAAM,UAAU,GAAG,iBAAO,CAAC,kBAAkB,CAAC,yBAAyB,QAAQ,QAAQ,EAAE,OAAO,CAAC,CAAC;YAClG,MAAM,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;QAClC,CAAC;KAAA;IAED;;;OAGG;IACG,iBAAiB,CAAC,OAAe;;YACnC,MAAM,YAAY,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;YAC5C,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,OAAO,CAAC;gBAAE,OAAO;YAElD,MAAM,UAAU,GAAG,iBAAO,CAAC,kBAAkB,CAAC,oBAAoB,EAAE,OAAO,CAAC,CAAC;YAC7E,MAAM,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;QAClC,CAAC;KAAA;IAEK,QAAQ,CAAC,UAA4B,EAAE,EAAE,QAAQ,GAAG,CAAC,CAAC;;YACxD,MAAM,GAAG,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;YAC3D,MAAM,GAAG,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;YAC3D,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;YAE5B,MAAM,KAAK,GAAG,IAAI,qBAAS,EAAU,CAAC;YACtC,KAAK,CAAC,aAAa,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;YAC1C,KAAK,CAAC,aAAa,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;YAC1C,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI;gBAAE,KAAK,CAAC,aAAa,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YAE/E,IAAI,KAAK,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAE,CAAC;YAEpF,MAAM,KAAK,GAAG,IAAI,CAAC;YACnB,MAAM,IAAI,GAAG,MAAM,iCAAe,CAAC,YAAY,CAAC;gBAC5C,KAAK,EAAE,KAAK,CAAC,IAAI;gBACjB,KAAK;gBACL,KAAK,EAAE,KAAK;gBACZ,MAAM,EAAE,KAAK;gBACb,eAAe,EAAE,IAAI;aACxB,CAAC,CAAC;YAEH,IAAI,CAAC,IAAI;gBAAE,OAAO;YAElB,8CAA8C;YAC9C,MAAM,cAAc,GAAG,iBAAO,CAAC,gBAAgB,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;YAClE,MAAM,MAAM,GAAG,iBAAO,CAAC,kBAAkB,CAAC,cAAc,EAAE,IAAI,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;YAEjF,MAAM,4BAAqB,CAAC,EAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAC,CAAC,CAAC;YAE1D,OAAO,IAAI,CAAC;QAChB,CAAC;KAAA;IAEK,SAAS,CAAC,UAA4B,EAAE,EAAE,QAAQ,GAAG,CAAC,CAAC;;YACzD,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;gBAAE,OAAO;YAEhC,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAA0B,CAAC;YAElD,MAAM,GAAG,GAAG,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;YACjD,MAAM,QAAQ,GAAG,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC;YAElE,MAAM,KAAK,GAAG,IAAI,qBAAS,EAAU,CAAC;YACtC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;YACpC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC;YAC9C,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK;gBAAE,KAAK,CAAC,aAAa,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YAEjF,IAAI,KAAK,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE,CAAC;YACrF,MAAM,KAAK,GAAG,IAAI,CAAC;YACnB,MAAM,IAAI,GAAG,MAAM,iCAAe,CAAC,YAAY,CAAC;gBAC5C,KAAK,EAAE,KAAK,CAAC,IAAI;gBACjB,KAAK;gBACL,KAAK;gBACL,MAAM,EAAE,KAAK;gBACb,eAAe,EAAE,IAAI;aACxB,CAAC,CAAC;YAEH,IAAI,CAAC,IAAI;gBAAE,OAAO;YAElB,8CAA8C;YAC9C,MAAM,cAAc,GAAG,iBAAO,CAAC,gBAAgB,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;YAClE,MAAM,MAAM,GAAG,iBAAO,CAAC,kBAAkB,CAAC,cAAc,EAAE,IAAI,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;YAElF,MAAM,4BAAqB,CAAC,EAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAC,CAAC,CAAC;YAE1D,OAAO,IAAI,CAAC;QAChB,CAAC;KAAA;IAED,SAAS,CAAC,UAA4B,EAAE,EAAE,aAA8B,EAAE;QACtE,MAAM,KAAK,GAAG,IAAI,qBAAS,CAAC,UAAU,CAAC,CAAC;QACxC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;QAC3B,OAAO,iCAAe,CAAC,YAAY,CAAC;YAChC,KAAK,EAAE,OAAO,CAAC,KAAK;YACpB,KAAK,EAAE,IAAI;YACX,KAAK,EAAE,KAAK,CAAC,IAAI;YACjB,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC;YACtC,MAAM,EAAE,KAAK;SAChB,CAAC,CAAC;IACP,CAAC;IAED;OACG;IACG,iBAAiB,CAAC,UAA8B,EAAE,EAAE,aAA8B,EAAE;;YACtF,MAAM,EAAC,MAAM,EAAC,GAAG,OAAO,CAAC;YAEzB,MAAM,aAAa,GAAG,MAAM,6CAAqB,CAAC,mBAAmB,CAAC,IAAI,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC;YACjG,MAAM,iBAAiB,GAAG,MAAM,aAAa,CAAC,MAAM,EAAE,CAAC;YAEvD,IAAI,aAAa,CAAC,QAAQ;gBAAE,OAAO;YAEnC,MAAM,IAAI,GAAG,MAAM,iCAAe,CAAC,YAAY,CAAC;gBAC5C,KAAK,EAAE,OAAO,CAAC,KAAK;gBACpB,KAAK,EAAE,IAAI;gBACX,KAAK,EAAE,iBAAiB,CAAC,KAAK,CAAC,IAAI;gBACnC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC;gBAC5C,cAAc,EAAE,MAAM;gBACtB,MAAM,EAAE,iBAAiB,CAAC,MAAM;aACnC,CAAC,CAAC;YAEH,IAAI,CAAC,IAAI;gBAAE,OAAO;YAElB,2GAA2G;YAC3G,iDAAiD;YACjD,IAAI,iBAAiB,CAAC,MAAM,CAAC,UAAU,EAAE;gBACrC,MAAM,IAAI,CAAC,sBAAsB,CAAC,iBAAiB,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;aAC1E;YAED,IAAI,CAAC,MAAM;gBAAE,OAAO;YAEpB,+BAA+B;YAC/B,IAAI,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC;YAC9B,IAAI,YAAY,GAAG,MAAM,CAAC,IAAI,IAAI,CAAC,CAAC;YACpC,IAAI,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,GAAG,YAAY,EAAE,CAAC,CAAC,CAAC;YAEvD,sBAAsB;YACtB,IAAI,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;YAE3B,oCAAoC;YACpC,IAAI,OAAO,GAAG,CAAC,EAAE;gBACb,MAAM,EAAC,QAAQ,EAAC,GAAG,iBAAO,CAAC,kBAAkB,CAAC,MAAM,EAAE,OAAO,EAAE,aAAa,CAAC,CAAC;gBAC9E,MAAM,GAAG,QAAQ,CAAC;aACrB;YAED,MAAM,eAAe,GAAG;gBACpB,KAAK,EAAE,OAAO,CAAC,KAAK;gBACpB,MAAM;aACT,CAAC;YAEF,MAAM,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;QACzC,CAAC;KAAA;IAEK,sBAAsB,CAAC,KAAc,EAAE,OAA4B;;;YACrE,IAAI,CAAC,KAAK,CAAC,mBAAmB,EAAE;gBAAE,OAAO;YAEzC,2BAA2B;YAC3B,OAAO,CAAC,eAAe,GAAG,MAAA,OAAO,CAAC,eAAe,mCAAI,IAAI,CAAC;YAC1D,MAAM,SAAS,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC;gBACnC,cAAE,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;gBAC9B,cAAE,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC;YAErC,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;YAEhE,IAAI,CAAC,IAAI;gBAAE,OAAO;YAElB,wCAAwC;YACxC,MAAM,KAAK,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC;gBAC/B,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,4BAA4B,CAAC,CAAC,CAAC;gBAClD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,gCAAgC,CAAC,CAAC;YACzD,MAAM,iBAAiB,GAAG,kBAAkB,CAAC;YAC7C,MAAM,KAAK,GAAG,IAAI,CAAC;YACnB,MAAM,MAAM,GAAG,iBAAO,CAAC,kBAAkB,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,EAAE,iBAAiB,CAAC,CAAC;YAE/F,MAAM,4BAAqB,CAAC,EAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAC,CAAC,CAAC;YAE1D,OAAO,IAAI,CAAC;;KACf;IAEK,wBAAwB,CAAC,KAAc,EAAE,OAA4B;;YACvE,IAAI,CAAC,KAAK,CAAC,qBAAqB,EAAE;gBAAE,OAAO;YAE3C,MAAM,YAAY,GAAG,KAAK,CAAC,iBAAiB,EAAE,CAAC;YAE/C,yGAAyG;YACzG,uGAAuG;YACvG,iDAAiD;YACjD,OAAO,MAAM,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC;QACpE,CAAC;KAAA;IAED,+DAA+D;IACzD,QAAQ,CAAC,OAAwB,EAAE,aAA8B,EAAE;;YACrE,OAAO,IAAI,mBAAQ,EAAE,CAAC,WAAW,CAAC,IAAI,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC;QACjE,CAAC;KAAA;IAED,mBAAmB,CAAC,KAAK,EAAE,OAAyB;;QAChD,MAAM,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;QACzD,MAAM,KAAK,GAAG,IAAI,qBAAS,EAAU,CAAC;QACtC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAC5C,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;QAClC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;QAE5B,OAAO,iCAAe,CAAC,YAAY,CAAC;YAChC,KAAK,EAAE,IAAI;YACX,KAAK,EAAE,KAAK,CAAC,IAAI;YACjB,KAAK,EAAE,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,KAAK;YACrB,KAAK,EAAE,MAAA,OAAO,CAAC,KAAK,mCAAI,iBAAO,CAAC,KAAK,CAAC,KAAK,CAAC;YAC5C,eAAe,EAAE,OAAO,CAAC,eAAe;SAC3C,CAAC,CAAC;IACP,CAAC;IAED,iBAAiB,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,OAAyB;;QACnD,MAAM,KAAK,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC;QACxD,MAAM,KAAK,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC;QACxD,MAAM,MAAM,GAAG,iBAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAClC,MAAM,MAAM,GAAG,iBAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAClC,MAAM,KAAK,GAAG,IAAI,qBAAS,EAAU,CAAC;QACtC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC;QACxC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC;QACxC,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;QAC5C,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;QAE5B,OAAO,iCAAe,CAAC,YAAY,CAAC;YAChC,KAAK,EAAE,IAAI;YACX,KAAK,EAAE,KAAK,CAAC,IAAI;YACjB,KAAK,EAAE,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,KAAK;YACrB,KAAK,EAAE,MAAA,OAAO,CAAC,KAAK,mCAAI,GAAG,MAAM,MAAM,MAAM,EAAE;YAC/C,eAAe,EAAE,OAAO,CAAC,eAAe;SAC3C,CAAC,CAAC;IACP,CAAC;IAED,mBAAmB,CAAC,KAAK,EAAE,OAA0B;QACjD,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YAAE,OAAO;QAEhC,IAAI,GAAG,GAAG,MAAM,CAAC;QACjB,IAAI,GAAG,GAAG,WAAW,CAAC;QACtB,IAAI,KAAK,GAAG,iBAAiB,CAAC;QAC9B,IAAI,KAAK,KAAK,UAAU,EAAE;YACtB,GAAG,GAAG,MAAM,CAAC;YACb,KAAK,IAAI,qBAAqB,CAAC;SAClC;aAAM;YACH,KAAK,IAAI,kBAAkB,CAAC;SAC/B;QACD,IAAI,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC;QACrD,IAAI,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC;QACrD,MAAM,KAAK,GAAG,IAAI,qBAAS,EAAU,CAAC;QACtC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QACtC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAEtC,OAAO,iCAAe,CAAC,YAAY,CAAC;YAChC,KAAK,EAAE,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,KAAK;YACrB,KAAK,EAAE,IAAI;YACX,KAAK,EAAE,KAAK,CAAC,IAAI;YACjB,KAAK,EAAE,KAAK;YACZ,QAAQ,EAAE,IAAI;YACd,KAAK,EAAE,CAAO,IAAsB,EAAE,EAAE;gBACpC,IAAI,CAAC,IAAI;oBAAE,OAAO;gBAClB,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;gBACtB,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAA0B,CAAC;gBAClD,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC;gBAEtC,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,GAAG,IAAI,EAAE,CAAC,CAAC,CAAC;gBAEtC,IAAI,GAAG,GAAG,cAAc,KAAK,QAAQ,CAAC;gBAEtC,IAAI,CAAC,GAAG,EAAE,CAAC;gBACX,CAAC,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC;gBACjB,MAAM,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YACzB,CAAC,CAAA;SACJ,CAAC,CAAC;IACP,CAAC;IAEK,mBAAmB,CAAC,IAAI,EAAE,OAA0B;;YACtD,IAAI,CAAC,CAAC,QAAQ,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;gBAAE,OAAO;YAE1C,IAAI,UAAU,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;YACxD,IAAI,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC;YAClE,MAAM,KAAK,GAAG,IAAI,qBAAS,EAAU,CAAC;YACtC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,IAAI,CAAC,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC;YAEnE,IAAI,OAAO,IAAI,OAAO,CAAC,KAAK,IAAI,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC;gBAAE,KAAK,CAAC,aAAa,CAAC,oBAAoB,EAAE,CAAC,CAAC,CAAC;YACnH,IAAI,iBAAO,CAAC,YAAY,CAAC,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,KAAK,CAAC,EAAE;gBACtC,OAAO,iCAAe,CAAC,YAAY,CAAC;oBAChC,KAAK,EAAE,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,KAAK;oBACrB,KAAK,EAAE,IAAI;oBACX,KAAK,EAAE,KAAK,CAAC,IAAI;oBACjB,KAAK,EAAE,KAAK;iBACf,CAAC,CAAC;aACN;YACD,MAAM,UAAU,GAAG,iBAAO,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE,EAAE,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;YAC7F,MAAM,SAAS,GAAG,WAAW,CAAC;YAE9B,IAAI,UAAU,GAAG;gBACb,SAAS,EAAE,SAAS;gBACpB,UAAU,EAAE,UAAU;aACzB,CAAC;YACF,MAAM,OAAO,GAAG;gBACZ,IAAI,EAAE;oBACF,KAAK,EAAE,UAAU;oBACjB,QAAQ,EAAE,GAAG,EAAE,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;iBACnC;aACJ,CAAC;YAEF,IAAI,MAAM,GAAG,IAAI,CAAC;YAClB,cAAc,CAAC,2DAA2D,EAAE,UAAU,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;gBACjG,IAAI,MAAM,CAAC;oBACP,KAAK,EAAE,GAAG,KAAK,OAAO;oBACtB,OAAO,EAAE,GAAG;oBACZ,OAAO,EAAE,OAAO;oBAChB,KAAK,EAAE,CAAO,IAAI,EAAE,EAAE;wBAClB,IAAI,MAAM;4BAAE,OAAO;wBACnB,MAAM,MAAM,GAAG,iBAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;wBAClF,IAAI,GAAG,GAA+B,SAAS,CAAC;wBAChD,IAAI,MAAM,EAAE;4BACR,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;4BACxC,KAAK,IAAI,MAAM,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC;yBACtE;wBACD,IAAI,GAAG,KAAK,SAAS,EAAE;4BACnB,IAAI,GAAG,CAAC,KAAK,IAAI,GAAG,CAAC,KAAK;gCAAE,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;4BAChE,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;4BAClC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;4BAC5B,OAAO,iCAAe,CAAC,YAAY,CAAC;gCAChC,KAAK,EAAE,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,KAAK;gCACrB,KAAK,EAAE,IAAI;gCACX,KAAK,EAAE,KAAK,CAAC,IAAI;gCACjB,KAAK,EAAE,KAAK;6BACf,CAAC,CAAC;yBACN;oBACL,CAAC,CAAA;iBACJ,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YACpB,CAAC,CAAC,CAAC;QACP,CAAC;KAAA;IAED,UAAU,CAAC,OAA0B;QACjC,MAAM,SAAS,GAAG;YACd,KAAK,EAAE,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,KAAK;YACrB,KAAK,EAAE,MAAM;YACb,KAAK,EAAE,EAAE;YACT,KAAK,EAAE,IAAI;SACd,CAAC;QACF,MAAM,aAAa,GAAG;YAClB,IAAI,EAAE,IAAI;SACb,CAAA;QACD,OAAO,iCAAe,CAAC,YAAY,CAAC,SAAS,EAAE,aAAa,CAAC,CAAC;IAClE,CAAC;IAED,gBAAgB,CAAC,OAA0B;QACvC,MAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,oCAAoC,CAAC,CAAC;QACvE,MAAM,KAAK,GAAG,IAAI,qBAAS,EAAU,CAAC;QACtC,MAAM,MAAM,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QACtC,0DAA0D;QAC1D,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;QAC7B,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;QAC7B,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;QAC5B,OAAO,iCAAe,CAAC,YAAY,CAAC;YAChC,KAAK,EAAE,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,KAAK;YACrB,KAAK;YACL,KAAK,EAAE,KAAK,CAAC,IAAI;YACjB,KAAK,EAAE,IAAI;SACd,CAAC,CAAC;IACP,CAAC;IAED,kBAAkB,CAAC,MAAM,EAAE,OAA0B;QACjD,MAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC;QACpE,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;QACvC,MAAM,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;QAC3C,MAAM,KAAK,GAAG,IAAI,qBAAS,EAAU,CAAC;QACtC,IAAI,MAAM,KAAK,WAAW,EAAE;YACxB,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YAC9D,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YAChE,IAAI,SAAS,CAAC,SAAS;gBAAE,KAAK,CAAC,aAAa,CAAC,WAAW,EAAE,SAAS,CAAC,SAAS,CAAC,CAAC;SAClF;aAAM,IAAI,MAAM,KAAK,kBAAkB,EAAE;YACtC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YAC9D,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YAChE,IAAI,SAAS,CAAC,gBAAgB;gBAAE,KAAK,CAAC,aAAa,CAAC,WAAW,EAAE,SAAS,CAAC,gBAAgB,CAAC,CAAC;SAChG;aAAM,IAAI,MAAM,KAAK,YAAY,EAAE;YAChC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YAC9D,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACtD,IAAI,SAAS,CAAC,UAAU;gBAAE,KAAK,CAAC,aAAa,CAAC,WAAW,EAAE,SAAS,CAAC,UAAU,CAAC,CAAC;SACpF;aAAM,IAAI,MAAM,KAAK,QAAQ,EAAE;YAC5B,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YAChE,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YACxD,IAAI,SAAS,CAAC,MAAM;gBAAE,KAAK,CAAC,aAAa,CAAC,WAAW,EAAE,SAAS,CAAC,MAAM,CAAC,CAAC;SAC5E;QAED,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;QAC5B,OAAO,iCAAe,CAAC,YAAY,CAAC;YAChC,KAAK,EAAE,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,KAAK;YACrB,KAAK,EAAE,IAAI;YACX,KAAK,EAAE,KAAK,CAAC,IAAI;YACjB,KAAK,EAAE,GAAG,KAAK,OAAO;SACzB,CAAC,CAAC;IACP,CAAC;IAEK,SAAS,CAAC,KAAiB,EAAE,OAA0B;;YACzD,4GAA4G;YAC5G,+GAA+G;YAC/G,IAAI,CAAC,qBAAS,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE;gBAC7B,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,iCAAiC,CAAC,CAAC,CAAC;gBAC7E,OAAO;aACV;YAED,mFAAmF;YACnF,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC;YACzE,MAAM,KAAK,GAAG,KAAK,CAAC;YAEpB,0FAA0F;YAC1F,MAAM,aAAa,GAAG,CAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,SAAS,EAAC,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC;YAC/E,MAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC;YACnD,IAAI,CAAC,SAAS,EAAE;gBACZ,EAAE,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,kCAAkC,CAAC,CAAC,CAAC;gBAC/E,OAAO;aACV;YACD,IAAI,KAAK,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;YAEzE,kDAAkD;YAClD,MAAM,KAAK,GAAG,IAAI,qBAAS,EAAU,CAAC;YACtC,KAAK,CAAC,aAAa,CAAC,KAAK,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC;YACxC,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC,CAAC;YAChD,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;YAE5B,+CAA+C;YAC/C,IAAI,CAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,KAAK,KAAI,iBAAO,CAAC,YAAY,CAAC,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,KAAK,CAAC,EAAE;gBACxD,KAAK,CAAC,aAAa,CAAC,SAAS,CAAC,KAAK,EAAE,SAAS,CAAC,KAAK,CAAC,CAAC;gBACtD,IAAI,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC;oBAAE,KAAK,CAAC,aAAa,CAAC,oBAAoB,EAAE,CAAC,CAAC,CAAC;gBAEvF,OAAO,MAAM,iCAAe,CAAC,YAAY,CAAC;oBACtC,KAAK,EAAE,OAAO,CAAC,KAAK;oBACpB,KAAK,EAAE,IAAI;oBACX,KAAK,EAAE,KAAK,CAAC,IAAI;oBACjB,KAAK;oBACL,KAAK,EAAE,GAAG,KAAK,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAE;iBACtD,CAAC,CAAC;aACN;YAED,sCAAsC;YACtC,MAAM,sBAAsB,GAAG;gBAC3B,KAAK;gBACL,SAAS,EAAE,aAAa;aAC3B,CAAA;YAED,MAAM,WAAW,GAAG,MAAM,6CAAqB,CAAC,iBAAiB,CAAC,IAAI,EAAE,sBAAsB,EAAE,KAAK,CAAC,CAAC;YACvG,MAAM,eAAe,GAAG,MAAM,WAAW,CAAC,MAAM,EAAE,CAAC;YAEnD,IAAI,WAAW,CAAC,QAAQ;gBAAE,OAAO;YAEjC,OAAO,MAAM,iCAAe,CAAC,YAAY,CAAC;gBACtC,KAAK,EAAE,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,KAAK;gBACrB,KAAK,EAAE,IAAI;gBACX,KAAK,EAAE,eAAe,CAAC,KAAK,CAAC,IAAI;gBACjC,KAAK,EAAE,eAAe,CAAC,KAAK;gBAC5B,KAAK,EAAE,eAAe,CAAC,KAAK;aAC/B,CAAC,CAAC;QACP,CAAC;KAAA;IAEK,mBAAmB,CAAC,OAA0B;;YAChD,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;gBACjB,OAAO;YAEX,MAAM,SAAS,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAqB,CAAC;YAChE,IAAI,SAAS,CAAC,WAAW,KAAK,WAAW,EAAE;gBACvC,MAAM,KAAK,GAAG,IAAI,qBAAS,EAAU,CAAC;gBAEtC,MAAM,KAAK,GAAG,iBAAO,CAAC,SAAS,CAAC,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;gBAC/D,8CAA8C;gBAC9C,MAAM,UAAU,GAAG,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;gBACtD,MAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;gBAEvC,IAAI,UAAU,IAAI,KAAK,EAAE;oBACrB,KAAK,CAAC,OAAO,CAAC,wBAAwB,EAAE,iBAAO,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC;oBACvE,KAAK,CAAC,OAAO,CAAC,yBAAyB,EAAE,KAAK,CAAC,CAAC;oBAEhD,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;oBAE5B,OAAO,iCAAe,CAAC,YAAY,CAAC;wBAChC,KAAK,EAAE,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,KAAK;wBACrB,KAAK,EAAE,IAAI;wBACX,KAAK,EAAE,KAAK,CAAC,IAAI;wBACjB,KAAK;wBACL,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,2CAA2C,CAAC;qBACzE,CAAC,CAAC;iBACN;aACJ;iBAAM;gBACH,MAAM,IAAI,CAAC,eAAe,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;aACrD;QACL,CAAC;KAAA;IAEK,gBAAgB,CAAC,OAA0B;;YAC7C,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE;gBACnB,OAAO,SAAS,CAAC;aACpB;YACD,MAAM,SAAS,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAqB,CAAC;YAChE,IAAI,SAAS,CAAC,WAAW,KAAK,WAAW,EAAE;gBACvC,MAAM,KAAK,GAAG,IAAI,qBAAS,EAAU,CAAC;gBAEtC,MAAM,KAAK,GAAG,iBAAO,CAAC,SAAS,CAAC,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;gBAC/D,IAAI,KAAK,GAA2B,IAAI,CAAC,mBAAmB,EAAE,CAAC;gBAC/D,MAAM,WAAW,GAAG,SAAS,CAAC,WAAW,CAAC;gBAC1C,MAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;gBAE1C,IAAI,KAAK,IAAI,KAAK,EAAE;oBAChB,KAAK,CAAC,OAAO,CAAC,yBAAyB,EAAE,KAAK,CAAC,CAAC;oBAChD,8CAA8C;oBAC9C,KAAK,CAAC,OAAO,CAAC,yBAAyB,EAAE,iBAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;oBAEnE,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;oBAE5B,OAAO,MAAM,iCAAe,CAAC,YAAY,CAAC;wBACtC,KAAK,EAAE,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,KAAK;wBACrB,KAAK,EAAE,IAAI;wBACX,KAAK,EAAE,KAAK,CAAC,IAAI;wBACjB,KAAK;wBACL,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,4CAA4C,CAAC;qBAC1E,CAAC,CAAC;iBACN;aACJ;iBAAM;gBACH,MAAM,SAAS,GAAG,IAAI,CAAC,uBAAuB,EAAE,CAAC;gBACjD,IAAI,CAAC,SAAS;oBAAE,OAAO;gBACvB,OAAO,MAAM,IAAI,CAAC,eAAe,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;aACzD;QACL,CAAC;KAAA;IAEK,qBAAqB,CAAC,OAA0B;;YAClD,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE;gBACnB,OAAO,SAAS,CAAC;aACpB;YACD,MAAM,SAAS,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAqB,CAAC;YAChE,IAAI,SAAS,CAAC,WAAW,KAAK,WAAW,EAAE;gBACvC,MAAM,KAAK,GAAG,IAAI,qBAAS,EAAU,CAAC;gBAEtC,MAAM,KAAK,GAAG,iBAAO,CAAC,SAAS,CAAC,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;gBAC/D,8CAA8C;gBAC9C,MAAM,QAAQ,GAAG,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;gBAClD,MAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;gBAEvC,IAAI,QAAQ,IAAI,KAAK,EAAE;oBACnB,KAAK,CAAC,OAAO,CAAC,qBAAqB,EAAE,iBAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC;oBAClE,KAAK,CAAC,OAAO,CAAC,yBAAyB,EAAE,KAAK,CAAC,CAAC;oBAEhD,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;oBAE5B,OAAO,iCAAe,CAAC,YAAY,CAAC;wBAChC,KAAK,EAAE,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,KAAK;wBACrB,KAAK,EAAE,IAAI;wBACX,KAAK,EAAE,KAAK,CAAC,IAAI;wBACjB,KAAK;wBACL,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,6CAA6C,CAAC;qBAC3E,CAAC,CAAC;iBACN;aACJ;iBAAM;gBACH,MAAM,IAAI,CAAC,eAAe,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;aACnD;QACL,CAAC;KAAA;IAED,kBAAkB,CAAC,KAAa,EAAE,OAAe,EAAE,OAA0B;QACzE,MAAM,QAAQ,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;QACnE,MAAM,KAAK,GAAG,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;QACjD,KAAK,CAAC,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC;QACrC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC;QACzB,OAAO,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;IAC1C,CAAC;IAED,iBAAiB,CAAC,OAAe,EAAE,OAA0B;QACzD,MAAM,KAAK,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;QACvE,KAAK,CAAC,SAAS,GAAG,WAAW,CAAC;QAC9B,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC;QACzB,OAAO,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;IAC1C,CAAC;IAED,eAAe,CAAC,OAAe,EAAE,OAA0B;QACvD,MAAM,KAAK,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;QAC/D,OAAO,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;IAC1C,CAAC;IAED,aAAa,CAAC,KAAK,EAAE,OAA0B;QAC3C,IAAI,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;QAC7D,MAAM,GAAG,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;QACxD,MAAM,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAClD,MAAM,KAAK,GAAG,IAAI,qBAAS,EAAU,CAAC;QACtC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;QACpC,IAAI,UAAU,GAAG;YACb,SAAS,EAAE,GAAG;YACd,UAAU,EAAE,IAAI;SACnB,CAAC;QACF,IAAI,MAAM,GAAG,IAAI,CAAC;QAClB,cAAc,CAAC,gEAAgE,EAAE,UAAU,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;YACtG,IAAI,MAAM,CAAC;gBACP,KAAK,EAAE,GAAG,KAAK,iBAAiB;gBAChC,OAAO,EAAE,GAAG;gBACZ,OAAO,EAAE;oBACL,IAAI,EAAE;wBACF,KAAK,EAAE,UAAU;wBACjB,QAAQ,EAAE,GAAG,EAAE,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;qBACnC;iBACJ;gBACD,OAAO,EAAE,MAAM;gBACf,KAAK,EAAE,CAAO,IAAI,EAAE,EAAE;oBAClB,IAAI,MAAM;wBAAE,OAAO;oBAEnB,MAAM,MAAM,GAAW,iBAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;oBAC3F,IAAI,IAAI,GAA+B,SAAS,CAAC;oBACjD,IAAI,MAAM,KAAK,MAAM,EAAE;wBACnB,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC;wBACpB,IAAI,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,KAAK,EAAE;4BACb,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;4BACtC,MAAM,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;4BACtE,KAAK,IAAI,MAAM,WAAW,EAAE,CAAC;yBAChC;qBACJ;oBACD,IAAI,MAAM,KAAK,SAAS,EAAE;wBACtB,KAAK,CAAC,aAAa,CAAC,gBAAgB,EAAE,CAAC,CAAC,CAAC,CAAC;qBAC7C;oBACD,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC;oBACzC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;oBAC5B,OAAO,iCAAe,CAAC,YAAY,CAAC;wBAChC,KAAK,EAAE,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,KAAK;wBACrB,KAAK,EAAE,GAAG,KAAK,OAAO;wBACtB,KAAK,EAAE,IAAI;wBACX,KAAK,EAAE,KAAK,CAAC,IAAI;qBACpB,CAAC,CAAC;gBACP,CAAC,CAAA;aACJ,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACpB,CAAC,CAAC,CAAC;IACP,CAAC;IAED,eAAe,CAAC,KAAwB,EAAE,IAAI;QAC1C,IAAI,iBAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;YACxB,IAAI,CAAC,CAAC,QAAQ,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;gBAAE,OAAO;YAE1C,MAAM,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;YACrC,IAAI,MAAM,CAAC,OAAO;gBAAE,KAAK,CAAC,aAAa,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;YACzD,IAAI,MAAM,CAAC,cAAc;gBAAE,KAAK,CAAC,aAAa,CAAC,mBAAmB,EAAE,CAAC,CAAC,CAAC,CAAC;SAC3E;IACL,CAAC;IACD,eAAe,CAAC,KAAwB;QACpC,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE;YACjC,KAAK,CAAC,aAAa,CAAC,YAAY,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;SACtE;IACL,CAAC;IAED,gBAAgB,CAAC,KAAwB;QACrC,IAAI,IAAI,CAAC,SAAS,EAAE,EAAE;YAClB,MAAM,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;YAC5C,IAAI,KAAK,EAAE;gBACP,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC,KAAK,EAAE,iBAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;aAC9D;YACD,MAAM,KAAK,GAAG,IAAI,CAAC,mBAAmB,EAAE,CAAC;YACzC,IAAI,KAAK,EAAE;gBACP,KAAK,CAAC,aAAa,CAAC,yBAAyB,EAAE,iBAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;aAC5E;SACJ;aAAM;YACH,MAAM,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;YAChD,MAAM,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;YAElD,IAAI,QAAQ,EAAE;gBACV,KAAK,CAAC,aAAa,CAAC,QAAQ,CAAC,KAAK,IAAI,cAAc,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC;aACzE;YACD,IAAI,SAAS,EAAE;gBACX,KAAK,CAAC,aAAa,CAAC,SAAS,CAAC,KAAK,IAAI,eAAe,EAAE,SAAS,CAAC,KAAK,CAAC,CAAC;aAC5E;SACJ;QAED,MAAM,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;QACxC,IAAI,GAAG,EAAE;YACL,KAAK,CAAC,aAAa,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC;SACzC;IACL,CAAC;IAED,cAAc,CAAC,KAAwB;QACnC,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;QAC9B,IAAI,KAAK,EAAE;YACP,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC,KAAK,IAAI,WAAW,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC;YAC5D,KAAK,IAAI,IAAI,IAAI,KAAK,CAAC,GAAG,EAAE;gBACxB,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;aAC9C;SACJ;IACL,CAAC;IAED,MAAM,CAAO,YAAY,CAAC,EAAE;;YACxB,IAAI,GAAG,GAAgB,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,SAAS,CAAC,CAAC;YAE9D,IAAI,GAAG,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,iBAAiB,CAAC,EAAE;gBACnD,IAAI,KAAK,GAAI,GAAG,CAAC,IAAI,CAAC,SAAiC,CAAC;gBACxD,IAAI,CAAC,KAAK,EAAE;oBACR,MAAM,MAAM,GAAG,iBAAO,CAAC,mBAAmB,EAAE,CAAC;oBAC7C,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;wBACnB,KAAK,IAAI,KAAK,IAAI,MAAM,EAAE;4BACtB,IAAI,KAAK,CAAC,KAAK,CAAC,KAAK,EAAE;gCACnB,KAAK,GAAG,KAAK,CAAC,KAAiB,CAAC;gCAChC,MAAM;6BACT;yBACJ;qBACJ;iBACJ;gBACD,IAAI,KAAK,EAAE;oBACP,MAAM,KAAK,GAAG,IAAI,qBAAS,EAAU,CAAC;oBACtC,KAAK,CAAC,aAAa,CAAC,kBAAkB,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,KAAK,CAAC,CAAC;oBAC/D,iCAAe,CAAC,SAAS,CAAC;wBACtB,KAAK,EAAE,MAAM,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,EAAE;wBACrD,KAAK,EAAE,KAAK,CAAC,IAAI;wBACjB,KAAK,EAAE,KAAK;qBACf,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;wBACT,KAAK,CAAC,MAAM,CAAC;4BACT,2BAA2B,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,IAAI,GAAG,CAAC;yBACxD,CAAC,CAAC;oBACP,CAAC,CAAC,CAAC;iBACN;qBAAM;oBACH,aAAa;oBACb,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAAC,CAAC,CAAC;iBACvE;aACJ;QACL,CAAC;KAAA;IAED,MAAM,CAAO,YAAY,CAAC,EAAE;;;YACxB,IAAI,GAAG,GAAgB,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,SAAS,CAAC,CAAC;YAC9D,aAAa;YACb,IAAI,IAAI,GAAS,IAAI,CAAC,KAAK,CAAC,MAAA,GAAG,CAAC,IAAI,0CAAE,IAAI,CAAC,CAAC;YAC5C,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;YAC3B,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;YACtB,IAAI,EAAE,GAAG,SAAS,CAAC;YACnB,IAAI,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;YAChC,IAAI,OAAO,IAAI,OAAO,CAAC,CAAC,CAAC,EAAE;gBACvB,IAAI,KAAK,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;gBACvB,IAAI,IAAI,GAAG,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC;gBAC7C,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;oBAC9B,IAAI,KAAK,GAAI,GAAG,CAAC,IAAI,CAAC,SAAiC,CAAC;oBACxD,IAAI,CAAC,KAAK,EAAE;wBACR,MAAM,MAAM,GAAG,iBAAO,CAAC,mBAAmB,EAAE,CAAC;wBAC7C,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;4BACnB,KAAK,IAAI,KAAK,IAAI,MAAM,EAAE;gCACtB,IAAI,KAAK,CAAC,KAAK,CAAC,KAAK,EAAE;oCACnB,KAAK,GAAG,KAAK,CAAC,KAAiB,CAAC;oCAChC,MAAM;iCACT;6BACJ;yBACJ;qBACJ;oBACD,IAAI,KAAK,EAAE;wBACP,MAAM,KAAK,GAAG,IAAI,qBAAS,EAAU,CAAC;wBACtC,KAAK,CAAC,aAAa,CAAC,sBAAsB,EAAE,IAAI,CAAC,CAAC;wBAClD,KAAK,CAAC,aAAa,CAAC,eAAe,EAAE,CAAC,IAAI,CAAC,CAAC;wBAE5C,OAAO,iCAAe,CAAC,SAAS,CAAC;4BAC7B,KAAK,EAAE,kBAAkB;4BACzB,KAAK,EAAE,KAAK,CAAC,IAAI;4BACjB,KAAK,EAAE,KAAK;yBACf,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;4BACT,KAAK,CAAC,OAAO,EAAE,CAAC;wBACpB,CAAC,CAAC,CAAC;qBACN;yBAAM;wBACH,aAAa;wBACb,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAAC,CAAC,CAAC;qBACvE;iBACJ;aACJ;;KACJ;IAED;;;;;OAKG;IACH,OAAO,CAAC,KAAa,EAAE,GAAW,EAAE,KAAU;QAC1C,MAAM,QAAQ,GAAG,iBAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QAC1C,OAAO,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAC;IAC/C,CAAC;IAED;;;;OAIG;IACH,OAAO,CAAC,KAAa,EAAE,GAAW;QAC9B,MAAM,IAAI,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;QACvC,OAAO,iBAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;IACnC,CAAC;IAED;;;OAGG;IACH,QAAQ;QACJ,iFAAiF;QACjF,IAAI,IAAI,CAAC,gBAAgB,EAAE,IAAI,IAAI,CAAC,QAAQ,EAAE,EAAE;YAC5C,MAAM,MAAM,GAAG,IAAI,CAAC;YACpB,MAAM,MAAM,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;YAC5C,4DAA4D;YAC5D,OAAO,MAAM,CAAC,CAAC,CAAC,CAAC;SACpB;QAED,2FAA2F;QAC3F,OAAO,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED;;OAEG;IACH,gBAAgB;QACZ,YAAY;QACZ,+FAA+F;QAC/F,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;IACpD,CAAC;IAED,QAAQ;QACJ,OAAO,IAAI,CAAC,eAAe,EAAE,CAAC,MAAM,GAAG,CAAC,CAAC;IAC7C,CAAC;IAED,oBAAoB;QAChB,MAAM,OAAO,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC7C,OAAO,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;IAC9B,CAAC;IAED,eAAe;QACX,YAAY;QACZ,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;YACtB,OAAO,IAAI,CAAC;SACf;QAED,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;YACpC,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI,EAAE;gBAC3B,SAAS;aACZ;YACD,IAAI,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE;gBAC/B,OAAO,IAAI,CAAC;aACf;SACJ;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,qBAAqB;QACjB,YAAY;QACZ,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QACrC,OAAO,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAC7C,CAAC;IAED,uBAAuB,CAAC,MAAkB,EAAE,KAAgD;QACxF,IAAI,MAAM,CAAC,KAAK,KAAK,CAAC;YAAE,OAAO,KAAK,CAAC;QACrC,IAAI,KAAK,CAAC,KAAK,KAAK,KAAK,CAAC,GAAG;YAAE,OAAO,KAAK,CAAC;QAE5C,4BAA4B;QAC5B,KAAK,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC;QAEzB,KAAK,CAAC,KAAK,IAAI,MAAM,CAAC,KAAK,CAAC;QAC5B,IAAI,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,GAAG,EAAE;YACzB,mFAAmF;YACnF,OAAO,CAAC,KAAK,CAAC,0HAA0H,CAAC,CAAA;YACzI,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC;SAC3B;QAED,OAAO,KAAK,CAAC;IACjB,CAAC;IAEK,uBAAuB,CAAC,MAAkB,EAAE,MAAe;;YAC7D,IAAI,CAAC,MAAM;gBAAE,OAAO;YAEpB,IAAI,SAAS,GAAG,MAAM,CAAC,YAAY,EAAE,CAAC;YACtC,IAAI,CAAC,SAAS;gBAAE,OAAO,MAAM,CAAC;YAE9B,IAAI,MAAM,CAAC,KAAK,KAAK,CAAC;gBAAE,OAAO;YAC/B,IAAI,SAAS,CAAC,KAAK,KAAK,SAAS,CAAC,GAAG;gBAAE,OAAO;YAE9C,SAAS,GAAG,IAAI,CAAC,uBAAuB,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;YAE5D,MAAM,IAAI,GAAG,EAAC,CAAC,mCAAmC,CAAC,EAAE,SAAS,EAAC,CAAC;YAChE,MAAM,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAC9B,CAAC;KAAA;IAEK,iBAAiB,CAAC,MAAkB,EAAE,KAAgD;;YACxF,IAAI,MAAM,CAAC,KAAK,KAAK,CAAC;gBAAE,OAAO;YAC/B,IAAI,KAAK,CAAC,KAAK,KAAK,KAAK,CAAC,GAAG;gBAAE,OAAO;YAEtC,KAAK,GAAG,IAAI,CAAC,uBAAuB,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YACpD,+BAA+B;YAC/B,4BAA4B;YAC5B,EAAE;YACF,+BAA+B;YAC/B,iCAAiC;YACjC,0FAA0F;YAC1F,gJAAgJ;YAChJ,+BAA+B;YAC/B,IAAI;YAEJ,MAAM,IAAI,GAAG,EAAC,CAAC,cAAc,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,EAAE,KAAK,EAAC,CAAC;YAC1D,MAAM,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAC5B,CAAC;KAAA;IAEK,oBAAoB,CAAC,MAAkB,EAAE,KAAwB;;YACnE,IAAI,MAAM,CAAC,KAAK,KAAK,CAAC;gBAAE,OAAO;YAC/B,IAAI,KAAK,CAAC,QAAQ,CAAC,KAAK,KAAK,KAAK,CAAC,QAAQ,CAAC,GAAG;gBAAE,OAAO;YAExD,4BAA4B;YAC5B,MAAM,QAAQ,GAAG,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;YAE3C,iDAAiD;YACjD,QAAQ,CAAC,KAAK,IAAI,MAAM,CAAC,KAAK,CAAC;YAC/B,QAAQ,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,CAAC,CAAC;YAExD,MAAM,IAAI,GAAG,EAAC,CAAC,cAAc,MAAM,CAAC,IAAI,CAAC,KAAK,WAAW,CAAC,EAAE,QAAQ,EAAC,CAAC;YACtE,MAAM,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAC5B,CAAC;KAAA;IAED;OACG;IACG,aAAa,CAAC,MAAkB;;YAClC,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,KAAK,MAAM;gBAAE,OAAO,MAAM,CAAC;YAEhD,MAAM,KAAK,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;YAClC,IAAI,CAAC,KAAK;gBACN,OAAO,MAAM,CAAC;YAElB,MAAM,EAAC,QAAQ,EAAE,IAAI,EAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YAEjE,+EAA+E;YAC/E,IAAI,QAAQ,CAAC,KAAK,GAAG,CAAC,EAAE;gBACpB,sEAAsE;gBACtE,QAAQ,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;gBAChD,QAAQ,CAAC,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC;aACpC;YAED,MAAM,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;YAC1C,OAAO,QAAQ,CAAC;QACpB,CAAC;KAAA;IAEK,iBAAiB,CAAC,MAAkB;;YACtC,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,KAAK,UAAU;gBAAE,OAAO,MAAM,CAAC;YAEpD,MAAM,KAAK,GAAG,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACtC,IAAI,CAAC,KAAK;gBACN,OAAO,MAAM,CAAC;YAElB,MAAM,EAAC,QAAQ,EAAE,IAAI,EAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YAEjE,MAAM,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;YAC1C,MAAM,IAAI,CAAC,oBAAoB,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;QACrD,CAAC;KAAA;IAED;OACG;IACG,eAAe,CAAC,MAAkB;;YACpC,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,KAAK,QAAQ;gBAAE,OAAO,MAAM,CAAC;YAElD,MAAM,MAAM,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;YACtC,IAAI,CAAC,MAAM;gBAAE,OAAO,MAAM,CAAC;YAE3B,MAAM,KAAK,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;YACpC,sDAAsD;YACtD,IAAI,CAAC,KAAK;gBAAE,OAAO,MAAM,CAAC;YAE1B,MAAM,EAAC,QAAQ,EAAE,IAAI,EAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YAEjE,MAAM,IAAI,CAAC,uBAAuB,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;YAEjD,oFAAoF;YACpF,OAAO,QAAQ,CAAC;QACpB,CAAC;KAAA;IAED;OACG;IACH,mBAAmB,CAAC,MAAkB,EAAE,KAA8B;QAClE,MAAM,eAAe,GAAG,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,KAAK,CAAC;QAChD,MAAM,cAAc,GAAG,MAAM,CAAC,KAAK,GAAG,eAAe,CAAC,CAAC;YACnD,MAAM,CAAC,KAAK,GAAG,eAAe,CAAC,CAAC;YAChC,CAAC,CAAC;QACN,MAAM,UAAU,GAAG,MAAM,CAAC,KAAK,GAAG,cAAc,CAAC;QAEjD,4BAA4B;QAC5B,MAAM,QAAQ,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;QACnC,MAAM,IAAI,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;QAE/B,QAAQ,CAAC,KAAK,GAAG,cAAc,CAAC;QAChC,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC;QAExB,OAAO,EAAC,QAAQ,EAAE,IAAI,EAAC,CAAC;IAC5B,CAAC;IAED,YAAY;QACR,IAAI,OAAO,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,MAAM,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK;YAC3D,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;IACzC,CAAC;IAED,gBAAgB;QACZ,IAAI,OAAO,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI;YACzB,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;IAC7C,CAAC;IAED,cAAc;QACV,MAAM,MAAM,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QACtC,IAAI,CAAC,MAAM;YAAE,OAAO,SAAS,CAAC;QAE9B,OAAO,MAAM,CAAC,YAAY,EAAE,CAAC;IACjC,CAAC;IAED,gBAAgB,CAAC,MAAkB;;QAC/B,IAAI,CAAC,CAAA,MAAA,MAAM,CAAC,EAAE,0CAAE,KAAK,CAAA,EAAE;YACnB,OAAO,IAAI,CAAC,QAAQ,EAAE,CAAC;SAC3B;QAEA,MAAM,QAAQ,GAAG,SAAS,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;QAC5C,IAAI,QAAQ,EAAE;YACV,QAAQ,CAAC,GAAG,GAAG,qBAAS,CAAC,aAAa,CAAC,QAAQ,CAAC,GAAG,EAAE,QAAQ,EAAE,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;YAChF,QAAQ,CAAC,KAAK,GAAG,iBAAO,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAC,GAAG,EAAE,CAAC,EAAC,CAAC,CAAC;SAC1D;QAED,OAAO,QAAQ,CAAC;IACpB,CAAC;IAED;;;;;;;OAOG;IACG,sBAAsB,CAAC,QAAgB;;YACzC,0CAA0C;YAC1C,IAAI,QAAQ,KAAK,CAAC;gBAAE,OAAO;YAE3B,MAAM,MAAM,GAAc,IAAI,CAAC,MAAmB,CAAC;YACnD,MAAM,SAAS,GAAG,MAAM,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAEjD,4CAA4C;YAC5C,IAAI,CAAC,SAAS;gBAAE,OAAO;YAEvB,MAAM,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;QACvD,CAAC;KAAA;IAED,eAAe;QACX,OAAO,OAAO,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;IACrC,CAAC;IAED,aAAa;QACT,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,OAAO,IAAI,CAAC,IAAsB,CAAC;IAC3C,CAAC;IAED,eAAe;QACX,IAAI,IAAI,CAAC,WAAW,EAAE;YAClB,OAAO,IAAI,CAAC,IAAwB,CAAC;IAC7C,CAAC;IAED,YAAY;QACR,IAAI,IAAI,CAAC,QAAQ,EAAE,EAAE;YACjB,OAAO,IAAI,CAAC,IAAqB,CAAC;SACrC;IACL,CAAC;IAED,YAAY;QACR,IAAI,IAAI,CAAC,QAAQ,EAAE,EAAE;YACjB,OAAO,IAAI,CAAC,IAAqB,CAAC;SACrC;IACL,CAAC;IAED,aAAa;QACT,IAAI,IAAI,CAAC,SAAS,EAAE,EAAC;YACjB,OAAO,IAAI,CAAC,IAAsB,CAAC;SACtC;IACL,CAAC;IAED,eAAe;QACX,IAAI,IAAI,CAAC,SAAS,EAAE,IAAI,eAAe,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;YACvD,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC;SACvC;IACL,CAAC;IAED;;;OAGG;IACG,gBAAgB,CAAC,EAAU;;YAC7B,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;gBAAE,OAAO;YAE9B,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAa,CAAC;YAC/C,IAAI,CAAC,MAAM;gBAAE,OAAO;YAEpB,8DAA8D;YAC9D,kEAAkE;YAElE,MAAM,IAAI,CAAC,MAAM,CAAC,EAAC,aAAa,EAAE,MAAM,CAAC,EAAE,EAAC,CAAC,CAAC;QAClD,CAAC;KAAA;IAEK,mBAAmB;;YACrB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;gBAAE,OAAO;YAE9B,MAAM,IAAI,CAAC,MAAM,CAAC,EAAC,aAAa,EAAE,EAAE,EAAC,CAAC,CAAC;QAC3C,CAAC;KAAA;IAED,SAAS;QACL,MAAM,IAAI,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QAElC,IAAI,CAAC,IAAI;YAAE,OAAO,KAAK,CAAC;QACxB,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;IACvC,CAAC;IAED,gBAAgB;QACZ,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YAAE,OAAO;QAC9B,MAAM,IAAI,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QAClC,IAAI,CAAC,IAAI;YAAE,OAAO;QAElB,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAa,CAAC;QAC7D,wFAAwF;QACxF,IAAI,CAAC,MAAM;YAAE,OAAO;QACpB,OAAO,MAAM,CAAC;IAClB,CAAC;IAED;;;OAGG;IACH,iBAAiB,CAAC,KAAe;QAC7B,OAAO,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC1C,CAAC;IAED;;;;OAIG;IACG,YAAY,CAAC,cAAqB,KAAK,EAAE,QAAa,MAAM,CAAC,KAAK;;YACpE,MAAM,OAAO,GAAG,MAAM,qBAAS,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;YAE7D,IAAI,OAAO,CAAC,sBAAsB,EAAE;gBAChC,OAAO,OAAO,CAAC;aAClB;iBAAM,IAAI,WAAW,EAAE;gBACpB,OAAO,IAAI,qBAAS,CAAC,qBAAS,CAAC,mBAAmB,EAAE,CAAC,CAAC;aACzD;iBAAM;gBACH,OAAO,MAAM,qBAAS,CAAC,sBAAsB,CAAC,KAAK,CAAC,CAAC;aACxD;QACL,CAAC;KAAA;IAEK,YAAY,CAAC,SAAoB;;YACnC,MAAM,qBAAS,CAAC,oBAAoB,CAAC,IAAI,EAAE,SAAS,CAAC,SAAS,CAAC,CAAC;QACpE,CAAC;KAAA;CACJ;AA1+CD,4BA0+CC;;;;;;;;;;;;;;ACxhDD,wCAAmC;AACnC,qEAA8D;AAC9D,gEAA2D;AAC3D,kFAA6E;AAC7E,gFAA2E;AAE3E,sCAA8B;AAS9B,uFAAuF;AACvF,8FAA8F;AAC9F,2FAA2F;AAC3F,IAAI,gBAAgB,GAAW,CAAC,CAAC,CAAC;AAElC;;;;;GAKG;AACH,MAAa,aAAc,SAAQ,UAAwB;IAKvD,YAAY,GAAG,IAAI;QACf,KAAK,CAAC,GAAG,IAAI,CAAC,CAAC;QAEf;;;WAGG;QACH,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,IAAI,CAAC,QAAQ,GAAG;YACZ,MAAM,EAAE,EAAE;YACV,mBAAmB,EAAE,IAAI;SAC5B,CAAC;IACN,CAAC;IAED,kDAAkD;IAElD;;;OAGG;IACH,MAAM,KAAK,cAAc;QACrB,OAAO,WAAW,CAAC,KAAK,CAAC,cAAc,EAAE;YACrC,OAAO,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,OAAO,CAAC;YAClC,KAAK,EAAE,GAAG;YACV,MAAM,EAAE,GAAG;YACX,IAAI,EAAE;gBACF;oBACI,WAAW,EAAE,OAAO;oBACpB,eAAe,EAAE,YAAY;oBAC7B,OAAO,EAAE,QAAQ;iBACpB;aACJ;SACJ,CAAC,CAAC;IACP,CAAC;IAED,IAAI,QAAQ;QACR,MAAM,IAAI,GAAG,oCAAoC,CAAC;QAElD,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,SAAS,EAAE,IAAI,CAAC,EAAE;YAChD,OAAO,GAAG,IAAI,kBAAkB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,OAAO,CAAC;SAC/D;QAED,OAAO,GAAG,IAAI,UAAU,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,OAAO,CAAC;IACxD,CAAC;IAED,kDAAkD;IAElD;;;OAGG;IACH,OAAO;QACH,MAAM,IAAI,GAAuB,KAAK,CAAC,OAAO,EAAmC,CAAC;QAElF,4BAA4B;QAC5B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC;QACzB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC;QAE7B,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,CAAC;QACpC,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,CAAC;QAEnC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;QACzB,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,CAAC;QACrC,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,CAAC;QACnC,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,CAAC;QACnC,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;QAEjC,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,aAAa,CAAC,EAAE,EAAE,KAAK;QACnB,OAAO,KAAK,CAAC,SAAS,KAAK,OAAO,IAAI,EAAE,KAAK,eAAe,IAAI,EAAE,KAAK,WAAW,CAAC;IACvF,CAAC;IAED,iBAAiB,CAAC,KAAK;QACnB,OAAO,KAAK,CAAC,SAAS,KAAK,WAAW,CAAC;IAC3C,CAAC;IAED,oBAAoB,CAAC,KAAK;QACtB,2DAA2D;QAC3D,OAAO,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC;IACtE,CAAC;IAED,qBAAqB,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI;QAClC,IAAI,CAAC,IAAI,EAAE;YACP,OAAO,IAAI,CAAC;SACf;QAED,sEAAsE;QACtE,MAAM,IAAI,GAAG,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;QAC9C,MAAM,SAAS,GAAG,KAAK,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC;QACtD,mDAAmD;QACnD,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,KAAK,SAAS,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QACnG,IAAI,YAAY,GAAG,GAAG,SAAS,IAAI,IAAI,IAAI,KAAK,EAAE,CAAC;QAEnD,OAAO,YAAY,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;IACtE,CAAC;IAED,uBAAuB,CAAC,IAAuB;QAC3C,mDAAmD;QACnD,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC;QACtC,KAAK,IAAI,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;YAC3C,IAAI,KAAK,KAAK,CAAC;gBAAE,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;SACnC;QAED,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,KAAK,OAAO,CAAC;QAC9C,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,KAAK,WAAW,CAAC;QACjD,IAAI,CAAC,cAAc,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;IACrE,CAAC;IAED,qBAAqB,CAAC,IAAuB;QACzC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE;YAAE,OAAO;QAEpC,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,gBAAgB,EAAE,CAAC;QAE7C,IAAI,CAAC,OAAO,GAAG;YACX,MAAM;SACT,CAAC;IACN,CAAC;IAED,uBAAuB,CAAC,IAAuB;QAC3C,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;QAC5C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;QACtC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC;IAC5C,CAAC;IAED,wBAAwB,CAAC,IAAI;QACzB,MAAM,EAAE,MAAM,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC;QAC7B,IAAI,MAAM,EAAE;YACR,MAAM,gBAAgB,GAAG,CAAC,SAA0B,EAAE,EAAE;gBACpD,MAAM,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC;gBAC9B,IAAI,GAAG,EAAE;oBACL,IAAI,CAAC,GAAG,CAAC,GAAG;wBAAE,GAAG,CAAC,GAAG,GAAG,EAAE,CAAC;oBAC3B,IAAI,GAAG,CAAC,IAAI,KAAK,CAAC;wBAAE,OAAO,GAAG,CAAC,IAAI,CAAC;iBACvC;YACL,CAAC,CAAC;YAEF,CAAC,UAAU,EAAE,iBAAiB,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,GAAoB,EAAE,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC;SAChH;IACL,CAAC;IAED,uBAAuB,CAAC,IAAuB;QAC3C,iFAAiF;QACjF,MAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;QACnC,KAAK,IAAI,CAAC,EAAE,GAAG,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;YACvC,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE;gBACb,IAAI,GAAG,CAAC,IAAI,KAAK,CAAC;oBAAE,OAAO,GAAG,CAAC,IAAI,CAAC;aACvC;SACJ;IACL,CAAC;IAED,yBAAyB,CAAC,IAAuB;QAC7C,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC;QAC/B,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;QAClC,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;IACrC,CAAC;IAED,mBAAmB,CAAC,IAAuB;QACvC,mEAAmE;QACnE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IAChF,CAAC;IAED,sBAAsB,CAAC,IAAuB;QAC1C,gDAAgD;QAChD,MAAM,CAAC,IAAI,CAAC,YAAG,CAAC,wBAAwB,CAAC,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE,EAAE;YAC3D,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE;gBACtD,OAAO,CAAC,IAAI,CAAC,uDAAuD,QAAQ,EAAE,CAAC,CAAC;gBAChF,OAAO;aACV;YACD,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,CAAC;QACtH,CAAC,CAAC,CAAC;IACP,CAAC;IAED,qBAAqB,CAAC,IAAuB;QACzC,0CAA0C;QAC1C,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;IAChG,CAAC;IAED,aAAa,CAAC,IAAuB,EAAE,MAAc;QACjD,MAAM,cAAc,GAAG,EAAE,CAAC;QAC1B,KAAK,IAAI,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;YAC7C,IAAI,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,EAAE;gBACnC,cAAc,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;aAC/B;SACJ;QAED,OAAO,iBAAO,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC;IAC9C,CAAC;IAED,UAAU,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI;QACvB,IAAI,IAAI,CAAC,gBAAgB,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,EAAE;YACzC,OAAO,IAAI,CAAC;SACf;QACD,IAAI,IAAI,CAAC,oBAAoB,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,EAAE;YAC7C,OAAO,IAAI,CAAC;SACf;QAED,OAAO,IAAI,CAAC,iBAAiB,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;IAC9C,CAAC;IAED,gBAAgB,CAAC,OAAO,EAAE,KAAK;QAC3B,+DAA+D;QAC/D,qFAAqF;QACrF,MAAM,YAAY,GAAG,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;QACjE,MAAM,eAAe,GAAG,CAAC,IAAI,CAAC,qBAAqB,CAAC,OAAO,EAAE,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QAC1F,MAAM,oBAAoB,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,mBAAmB,IAAI,KAAK,CAAC,KAAK,KAAK,CAAC,CAAC;QAErF,OAAO,CAAC,CAAC,YAAY,IAAI,CAAC,oBAAoB,IAAI,eAAe,CAAC,CAAC,CAAC;IACxE,CAAC;IAED,iBAAiB,CAAC,OAAO,EAAE,KAAiB;QACxC,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;IAC1H,CAAC;IAED,gBAAgB,CAAC,OAAO,EAAE,KAAiB,EAAE,IAAuB;QAChE,OAAO,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,KAAK,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,KAAK,OAAO,IAAI,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;IACxH,CAAC;IAED,oBAAoB,CAAC,OAAO,EAAE,KAAiB,EAAE,IAAuB;QACpE,OAAO,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,KAAK,WAAW,IAAI,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;IACvH,CAAC;IAED,aAAa,CAAC,IAAI;QACd,MAAM,SAAS,GAAG,EAAE,CAAC;QAErB,kEAAkE;QAClE,SAAS,CAAC,QAAQ,CAAC,GAAG;YAClB,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,sBAAsB,CAAC;YACjD,KAAK,EAAE,EAAE;YACT,OAAO,EAAE;gBACL,IAAI,EAAE,QAAQ;aACjB;SACJ,CAAC;QAEF,qEAAqE;QACrE,IAAI,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC,WAAW,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC,EAAE;YACnE,SAAS,CAAC,OAAO,CAAC,GAAG;gBACjB,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,qBAAqB,CAAC;gBAChD,KAAK,EAAE,EAAE;gBACT,OAAO,EAAE;oBACL,IAAI,EAAE,OAAO;iBAChB;aACJ,CAAC;YACF,SAAS,CAAC,QAAQ,CAAC,GAAG;gBAClB,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,sBAAsB,CAAC;gBACjD,KAAK,EAAE,EAAE;gBACT,OAAO,EAAE;oBACL,IAAI,EAAE,QAAQ;iBACjB;aACJ,CAAC;YACF,SAAS,CAAC,WAAW,CAAC,GAAG;gBACrB,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,yBAAyB,CAAC;gBACpD,KAAK,EAAE,EAAE;gBACT,OAAO,EAAE;oBACL,IAAI,EAAE,WAAW;iBACpB;aACJ,CAAC;YACF,SAAS,CAAC,MAAM,CAAC,GAAG;gBAChB,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,oBAAoB,CAAC;gBAC/C,KAAK,EAAE,EAAE;gBACT,OAAO,EAAE;oBACL,IAAI,EAAE,MAAM;iBACf;aACJ,CAAC;YACF,SAAS,CAAC,WAAW,CAAC,GAAG;gBACrB,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,yBAAyB,CAAC;gBACpD,KAAK,EAAE,EAAE;gBACT,OAAO,EAAE;oBACL,IAAI,EAAE,WAAW;iBACpB;aACJ,CAAC;YACF,SAAS,CAAC,SAAS,CAAC,GAAG;gBACnB,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,uBAAuB,CAAC;gBAClD,KAAK,EAAE,EAAE;gBACT,OAAO,EAAE;oBACL,IAAI,EAAE,SAAS;iBAClB;aACJ,CAAC;SACL;QAED,IAAI,CACA,KAAK,EACL,MAAM,EACN,SAAS,EACT,YAAY,EACZ,OAAO,EACP,aAAa,EACb,UAAU,EACV,QAAQ,EACR,IAAI,EACJ,QAAQ,EACR,cAAc,EACd,aAAa,EAChB,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CACjB,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE;YACV,kEAAkE;YAClE,2FAA2F;YAC3F,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;YACvB,mEAAmE;YACnE,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAY,CAAC;YAC5D,MAAM,QAAQ,GAAG,SAAS,CAAC,WAAW,EAAE,CAAC;YACzC,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,CAAC;YACxC,0GAA0G;YAC1G,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,UAAU,CAAC;YAEtC,sEAAsE;YACtE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;YACnE,IAAI,IAAI,CAAC,IAAI,KAAK,OAAO;gBAAE,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACxC,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS;gBAAE,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAC/C,IAAI,IAAI,CAAC,IAAI,KAAK,aAAa;gBAAE,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACnD,IAAI,IAAI,CAAC,IAAI,KAAK,QAAQ;gBAAE,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAC9C,IAAI,IAAI,CAAC,IAAI,KAAK,cAAc;gBAAE,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACpD,IAAI,IAAI,CAAC,IAAI,KAAK,WAAW;gBAAE,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACjD,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS;gBAAE,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAC/C,IAAI,IAAI,CAAC,IAAI,KAAK,KAAK;gBAAE,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAC3C,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS;gBAAE,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAC/C,IAAI,IAAI,CAAC,IAAI,KAAK,eAAe;gBAAE,GAAG,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACtD,IAAI,IAAI,CAAC,IAAI,KAAK,cAAc;gBAAE,GAAG,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACrD,IAAI,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC;gBAAE,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACvE,OAAO,GAAG,CAAC;QACf,CAAC,EACD,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CACnD,CAAC;QAEF,MAAM,UAAU,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE;YAC1B,IAAI,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,IAAI;gBAAE,OAAO,CAAC,CAAC;YAChC,IAAI,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,IAAI;gBAAE,OAAO,CAAC,CAAC,CAAC;YACjC,OAAO,CAAC,CAAC;QACb,CAAC,CAAC;QACF,MAAM,cAAc,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;;YACnC,MAAM,YAAY,GAAG,MAAA,MAAA,IAAI,CAAC,IAAI,0CAAE,UAAU,0CAAE,QAAQ,CAAC;YACrD,MAAM,aAAa,GAAG,MAAA,MAAA,KAAK,CAAC,IAAI,0CAAE,UAAU,0CAAE,QAAQ,CAAC;YACvD,IAAI,YAAY,IAAI,CAAC,aAAa;gBAAE,OAAO,CAAC,CAAC,CAAC;YAC9C,IAAI,aAAa,IAAI,CAAC,YAAY;gBAAE,OAAO,CAAC,CAAC;YAC7C,IAAI,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI;gBAAE,OAAO,CAAC,CAAC;YACrC,IAAI,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI;gBAAE,OAAO,CAAC,CAAC,CAAC;YACtC,OAAO,CAAC,CAAC;QACb,CAAC,CAAC;QACF,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACzB,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC9B,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC/B,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAC3B,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACxB,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC1B,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC5B,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACtB,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAC9B,cAAc,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAChC,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAE/B,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,EAAE;YACnB,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;QAC1C,IAAI,CAAC,KAAK,GAAG;YACT,SAAS,EAAE,MAAM;YACjB,MAAM,EAAE,YAAY;SACvB,CAAC;QACF,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;QACnC,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,cAAc,GAAG,cAAc,CAAC;QACrC,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;QAEnC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;YACpB,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,UAAU,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,UAAU;gBAAE,OAAO,CAAC,CAAC,CAAC;YACxE,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,UAAU,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,UAAU;gBAAE,OAAO,CAAC,CAAC;YACvE,OAAO,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACpC,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;IAC/B,CAAC;IAED,kDAAkD;IAElD;;;OAGG;IACH,iBAAiB,CAAC,IAAI;QAClB,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;QAE9B,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,CAAC;QAE5B,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,EAAE;YACnC,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;YAC1D,MAAM,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC;YAChC,MAAM,KAAK,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC;YAC1B,KAAK,CAAC,MAAM,EAAE,CAAC;YACf,IAAI,GAAG,EAAE;gBACL,IAAI,KAAK,CAAC,EAAE,CAAC,UAAU,CAAC;oBAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;;oBAC/C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,KAAK,GAAG,CAAC,CAAC;aACvE;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC9F,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACpG,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAExF,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACtE,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACrE,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAEnE,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAEzE,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACjE,IAAI,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACpF,IAAI,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAClF,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACxE,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACtE,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAClE,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC9E,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC5E,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACxE,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC3E,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAEzE,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC3D,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACpE,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC5D,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC5D,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC/D,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC/D,IAAI,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAErF,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAE7E;;WAEG;QACH,CAAC,CAAC,IAAI,CAAC;aACF,IAAI,CAAC,kBAAkB,CAAC;aACxB,EAAE,CAAC,OAAO,EAAE,CAAO,KAAK,EAAE,EAAE;YACzB,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;YAC3D,MAAM,GAAG,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,EAAE,CAAC,MAAM,CAAC;YACnC,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;YAC7C,IAAI,IAAI,EAAE;gBACN,MAAM,IAAI,CAAC,aAAa,EAAE,CAAC;aAC9B;QACL,CAAC,CAAA,CAAC,CAAC;QAEP,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,8BAA8B,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC1F,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,8BAA8B,CAAC,CAAC,EAAE,CAAC,aAAa,EAAE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAElG;;;;WAIG;QACH,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAEpE,uEAAuE;QACvE,CAAC,CAAC,IAAI,CAAC;aACF,IAAI,CAAC,8CAA8C,CAAC;aACpD,EAAE,CAAC,QAAQ,EAAE,CAAO,KAAU,EAAE,EAAE;YAC/B,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,KAAK,GAAG,iBAAO,CAAC,kBAAkB,CAAC,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YACpE,MAAM,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC;YAClD,IAAI,YAAY,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;gBAC/B,MAAM,UAAU,GAAG,EAAE,CAAC;gBACtB,UAAU,CAAC,yCAAyC,CAAC,GAAG,KAAK,CAAC;gBAC9D,MAAM,YAAY,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;aACzC;QACL,CAAC,CAAA,CAAC,CAAC;QAEP,wBAAwB;QACxB,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,EAAE;YACpC,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,GAAG,GAAG,iBAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YACtC,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;YAC7C,IAAI,IAAI;gBAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACtC,CAAC,CAAC,CAAC;QACH,wBAAwB;QACxB,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC;QACtE,sBAAsB;QACtB,IAAI,OAAO,GAAG,CAAC,EAAE,EAAE,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;QAC5C,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,EAAE;YACrC,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;gBACrC,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;gBACrC,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;aACtD;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACjF,CAAC;IAED;;;OAGG;IACG,OAAO,CAAC,KAAgB;;;;;YAC1B,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,KAAK,CAAC,eAAe,EAAE,CAAC;YAExB,IAAI,CAAC,KAAK,CAAC,YAAY;gBAAE,OAAO;YAEhC,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC;YAEtE,sCAAsC;YACtC,QAAQ,QAAQ,CAAC,IAAI,EAAE;gBACnB,KAAK,OAAO;oBACR,MAAM,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAA;oBAC9C,MAAM;aACb;YAED,oCAAoC;YACpC,MAAM,OAAM,OAAO,YAAC,KAAK,CAAC,CAAC;QAC/B,CAAC;KAAA;IAIK,eAAe,CAAC,KAAK;;YACvB,KAAK,CAAC,cAAc,EAAE,CAAC;YAEvB,MAAM,aAAa,GAAG,MAAM,iBAAO,CAAC,eAAe,EAAE,CAAC;YACtD,IAAI,CAAC,aAAa;gBAAE,OAAO;YAE3B,MAAM,GAAG,GAAG,iBAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YACtC,MAAM,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;QAC1C,CAAC;KAAA;IAEK,gBAAgB,CAAC,KAAK;;;YACxB,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,4CAA4C;YAC5C,IAAI,MAAM,GAAG,MAAA,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,IAAI,EAAE,0CAAE,MAAM,CAAC;YACnD,2DAA2D;YAC3D,MAAM,GAAG,MAAM,aAAN,MAAM,cAAN,MAAM,GAAI,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,CAAC,MAAM,CAAC;YAE1E,MAAM,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAChC,MAAM,OAAO,GAAG,EAAE,KAAK,EAAE,CAAC;YAC1B,QAAQ,KAAK,CAAC,CAAC,CAAC,EAAE;gBACd,KAAK,aAAa;oBACd,MAAM,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;oBACrC,MAAM;gBACV,KAAK,OAAO;oBACR,MAAM,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;oBACpC,MAAM;gBACV,KAAK,MAAM;oBACP,MAAM,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;oBACnC,MAAM;gBACV,KAAK,OAAO;oBACR,MAAM,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;oBACpC,MAAM;gBACV,KAAK,SAAS;oBACV,MAAM,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;oBAC5C,MAAM;gBACV,KAAK,eAAe;oBAChB,MAAM,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;oBACnC,MAAM;gBAEV,uBAAuB;gBACvB,KAAK,WAAW;oBACZ,MAAM,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,WAAW,CAAC,CAAC;oBACjD,MAAM;gBACV,KAAK,kBAAkB;oBACnB,MAAM,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,kBAAkB,CAAC,CAAC;oBACxD,MAAM;gBACV,KAAK,YAAY;oBACb,MAAM,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC;oBAClD,MAAM;gBACV,KAAK,QAAQ;oBACT,MAAM,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC;oBAC9C,MAAM;gBAEV,KAAK,cAAc;oBACf,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAE,MAAM,CAAC,CAAC;oBACzC,MAAM;gBAEV,KAAK,OAAO;oBACR,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,yCAAyC;oBAChE,QAAQ,IAAI,EAAE;wBACV,KAAK,YAAY;4BACb,MAAM,IAAI,CAAC,KAAK,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC;4BAC9C,MAAM;wBACV,KAAK,cAAc;4BACf,MAAM,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC;4BAChD,MAAM;wBACV,KAAK,eAAe;4BAChB,MAAM,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC;4BAC3C,MAAM;qBACb;oBACD,MAAM;gBACV,YAAY;gBAEZ,KAAK,WAAW;oBACZ,MAAM,SAAS,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;oBAC3B,IAAI,SAAS,EAAE;wBACX,MAAM,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;qBACtD;oBACD,MAAM;gBACV,gBAAgB;gBAEhB,KAAK,OAAO;oBACR,MAAM,SAAS,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;oBAC3B,QAAQ,SAAS,EAAE;wBACf,KAAK,QAAQ,CAAC,CAAC;4BACX,MAAM,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;4BACzB,MAAM,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;4BACnD,MAAM;yBACT;wBACD,KAAK,UAAU,CAAC,CAAC;4BACb,MAAM,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;4BACzB,MAAM,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;4BACrD,MAAM;yBACT;wBACD,KAAK,WAAW,CAAC,CAAC;4BACd,MAAM,QAAQ,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;4BAC1B,MAAM,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;4BACzB,MAAM,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,QAAQ,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;4BAChE,MAAM;yBACT;qBACJ;oBACD,MAAM;gBACV,YAAY;gBAEZ,KAAK,QAAQ;oBACT,MAAM,MAAM,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;oBACxB,QAAQ,MAAM,EAAE;wBACZ,KAAK,WAAW;4BACZ,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;4BACtB,MAAM,IAAI,CAAC,KAAK,CAAC,mBAAmB,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;4BACpD,MAAM;wBACV,KAAK,eAAe;4BAChB,MAAM,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC;4BAC3C,MAAM;qBACb;oBAED,MAAM;gBACV,aAAa;aAChB;;KACJ;IAED,yCAAyC;IACnC,eAAe,CAAC,KAAK;;YACvB,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC;YACjD,MAAM,IAAI,CAAC,MAAM,EAAE,CAAC;QACxB,CAAC;KAAA;IAED,8CAA8C;IACxC,wBAAwB,CAAC,KAAK;;YAChC,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,IAAI,CAAC,QAAQ,CAAC,mBAAmB,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC;YACvE,MAAM,IAAI,CAAC,MAAM,EAAE,CAAC;QACxB,CAAC;KAAA;IAEK,aAAa,CAAC,KAAK;;YACrB,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,GAAG,GAAG,iBAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YACtC,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;YAC7C,IAAI,IAAI;gBAAE,OAAO,IAAI,CAAC,UAAU,EAAE,CAAC;QACvC,CAAC;KAAA;IAEK,0BAA0B,CAAC,KAAK;;YAClC,IAAI,CAAC,CAAC,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;gBAAE,OAAO;YAEhD,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;YAC7C,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;YAC3C,IAAI,CAAC,IAAI,EAAE;gBACP,OAAO,CAAC,KAAK,CAAC,qBAAqB,CAAC,CAAC;gBACrC,OAAO;aACV;YACD,+CAA+C;YAC/C,IAAI,GAAG,GAAG,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,GAAG,CAAC;YAC1C,0CAA0C;YAC1C,IAAI,SAAS,GAAG,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC;YAE1C,6CAA6C;YAC7C,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,IAAkB,CAAC;YAChD,IAAI,MAAM,GAAG,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC;YAC5C,IAAI,IAAI,GAAG;gBACP,GAAG,EAAE,GAAG;aACX,CAAC;YAEF,2DAA2D;YAC3D,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;gBACzB,IAAI,GAAG,GAAG,MAAM,CAAC,EAAE,CAAC;gBACpB,IAAI,GAAG,GAAG,gBAAgB,CAAC,MAAM,CAAC;gBAClC,IAAI,GAAG,KAAK,SAAS,EAAE;oBACnB,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;iBACnB;qBAAM,IAAI,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,GAAG,KAAK,GAAG,EAAE;oBAC/C,IAAI,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC;iBACtB;aACJ;YACD,MAAM,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;QAC3C,CAAC;KAAA;IAED,aAAa,CAAC,KAAK;QACf,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,MAAM,IAAI,GAAG,iBAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QACvC,MAAM,QAAQ,GAAG;YACb,IAAI,EAAE,OAAO,IAAI,EAAE;YACnB,IAAI,EAAE,IAAI;SACb,CAAC;QACF,OAAO,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,QAAQ,EAAE,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC,CAAC;IACvE,CAAC;IAEK,mBAAmB,CAAC,KAAK;;YAC3B,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC;YAChE,IAAI,CAAC,OAAO;gBAAE,OAAO;YAErB,wEAAwE;YACxE,sFAAsF;QAC1F,CAAC;KAAA;IAEK,sBAAsB,CAAC,KAAK;;YAC9B,KAAK,CAAC,cAAc,EAAE,CAAC;YAEvB,MAAM,aAAa,GAAG,MAAM,iBAAO,CAAC,eAAe,EAAE,CAAC;YACtD,IAAI,CAAC,aAAa;gBAAE,OAAO;YAE3B,MAAM,OAAO,GAAG,iBAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YAC1C,MAAM,IAAI,CAAC,KAAK,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC;QAClD,CAAC;KAAA;IAEK,oBAAoB,CAAC,KAAK;;YAC5B,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,QAAQ,GAAG,iBAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YAC3C,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAC;YAC7D,IAAI,CAAC,OAAO;gBAAE,OAAO;YAErB,wEAAwE;YACxE,uFAAuF;QAC3F,CAAC;KAAA;IAEK,uBAAuB,CAAC,KAAK;;YAC/B,KAAK,CAAC,cAAc,EAAE,CAAC;YAEvB,MAAM,aAAa,GAAG,MAAM,iBAAO,CAAC,eAAe,EAAE,CAAC;YACtD,IAAI,CAAC,aAAa;gBAAE,OAAO;YAE3B,MAAM,CAAC,OAAO,EAAE,QAAQ,CAAC,GAAG,iBAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACjE,MAAM,IAAI,CAAC,KAAK,CAAC,oBAAoB,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;QAC7D,CAAC;KAAA;IAED;;;OAGG;IACI,iBAAiB,CAAC,KAAY;;YACjC,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC;YAClD,IAAI,CAAC,OAAO;gBAAE,OAAO;YAErB,MAAM,IAAI,CAAC,kBAAkB,CAAC,6BAAa,EAAE,IAAI,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,EAAE,OAAO,CAAC,CAAC;QACxF,CAAC;KAAA;IAEK,oBAAoB,CAAC,KAAY;;YAClC,KAAK,CAAC,cAAc,EAAE,CAAC;YAExB,MAAM,aAAa,GAAG,MAAM,iBAAO,CAAC,eAAe,EAAE,CAAC;YACtD,IAAI,CAAC,aAAa;gBAAE,OAAO;YAE3B,MAAM,OAAO,GAAG,iBAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YAC1C,MAAM,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;QAChD,CAAC;KAAA;IAEK,YAAY,CAAC,KAAK;;YACpB,MAAM,GAAG,GAAG,iBAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YACtC,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;YAC7C,MAAM,GAAG,GAAG,QAAQ,CAAC,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAChD,IAAI,IAAI,IAAI,GAAG,EAAE;gBACb,MAAM,IAAI,CAAC,MAAM,CAAC,EAAE,wBAAwB,EAAE,GAAG,EAAE,CAAC,CAAC;aACxD;QACL,CAAC;KAAA;IAEK,YAAY,CAAC,KAAK;;YACpB,MAAM,GAAG,GAAG,iBAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YACtC,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;YAC7C,MAAM,GAAG,GAAG,QAAQ,CAAC,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAChD,IAAI,IAAI,IAAI,GAAG,IAAI,YAAY,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;gBAC/C,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,GAAG,CAAC;gBACzC,MAAM,IAAI,CAAC,MAAM,CAAC,EAAE,0BAA0B,EAAE,GAAG,EAAE,CAAC,CAAC;aAC1D;QACL,CAAC;KAAA;IAEK,YAAY,CAAC,KAAK;;YACpB,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,GAAG,GAAG,iBAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YACtC,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;YAC7C,IAAI,IAAI,EAAE;gBACN,MAAM,QAAQ,GAAG,EAAW,CAAC;gBAC7B,IAAI,IAAI,CAAC,QAAQ,EAAE,EAAE;oBACjB,0DAA0D;oBAC1D,KAAK,IAAI,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,SAAkB,EAAE,EAAE,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC,EAAE;wBACnF,QAAQ,CAAC,IAAI,CAAC;4BACV,KAAK,EAAE,GAAG,CAAC,GAAG;4BACd,0BAA0B,EAAE,GAAG,CAAC,GAAG,KAAK,GAAG;yBAC9C,CAAC,CAAC;qBACN;iBAEJ;qBAAM;oBACH,uBAAuB;oBACvB,QAAQ,CAAC,IAAI,CAAC;wBACV,KAAK,EAAE,GAAG;wBACV,0BAA0B,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE;qBACjD,CAAC,CAAC;iBACN;gBACD,kGAAkG;gBAClG,MAAM,IAAI,CAAC,KAAK,CAAC,oBAAoB,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;gBAE7D,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;aAC5B;QACL,CAAC;KAAA;IAEK,eAAe,CAAC,KAAK;;YACvB,MAAM,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;YACxD,MAAM,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,wBAAwB,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC;YAChF,MAAM,IAAI,GAAG,EAAE,CAAC;YAChB,IAAI,IAAI,KAAK,MAAM,IAAI,IAAI,KAAK,UAAU,EAAE;gBACxC,MAAM,QAAQ,GAAG,cAAc,IAAI,QAAQ,CAAC;gBAC5C,IAAI,CAAC,QAAQ,CAAC,GAAG,KAAK,CAAC;aAC1B;iBAAM,IAAI,IAAI,KAAK,MAAM,EAAE;gBACxB,MAAM,QAAQ,GAAG,2BAA2B,CAAC;gBAC7C,IAAI,CAAC,QAAQ,CAAC,GAAG,KAAK,CAAC;aAC1B;iBAAM,IAAI,IAAI,KAAK,UAAU,EAAE;gBAC5B,MAAM,QAAQ,GAAG,oCAAoC,CAAC;gBACtD,IAAI,CAAC,QAAQ,CAAC,GAAG,KAAK,CAAC;aAC1B;iBAAM,IAAI,IAAI,KAAK,QAAQ,EAAE;gBAC1B,MAAM,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC;gBAClD,IAAI,YAAY,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;oBAC/B,MAAM,UAAU,GAAG,EAAE,CAAC;oBACtB,UAAU,CAAC,yCAAyC,CAAC,GAAG,KAAK,CAAC;oBAC9D,MAAM,YAAY,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;iBACzC;qBAAM;oBACH,IAAI,CAAC,qCAAqC,CAAC,GAAG,KAAK,CAAC;iBACvD;aACJ;YACD,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAClC,CAAC;KAAA;IAEK,iBAAiB,CAAC,KAAK;;YACzB,MAAM,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,wBAAwB,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC;YAChF,MAAM,IAAI,GAAG,EAAE,CAAC;YAChB,IAAI,IAAI,KAAK,MAAM,EAAE;gBACjB,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,CAAC;aACrC;YACD,gEAAgE;iBAC3D,IAAI,IAAI,KAAK,UAAU,EAAE;gBAC1B,IAAI,CAAC,2BAA2B,CAAC,GAAG,CAAC,CAAC;gBACtC,IAAI,CAAC,oCAAoC,CAAC,GAAG,CAAC,CAAC;aAElD;iBAAM,IAAI,IAAI,KAAK,MAAM,EAAE;gBACxB,IAAI,CAAC,2BAA2B,CAAC,GAAG,CAAC,CAAC;aAEzC;iBAAM,IAAI,IAAI,KAAK,UAAU,EAAE;gBAC5B,IAAI,CAAC,oCAAoC,CAAC,GAAG,CAAC,CAAC;aAElD;iBAAM,IAAI,IAAI,KAAK,QAAQ,EAAE;gBAC1B,MAAM,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC;gBAElD,IAAI,YAAY,EAAE;oBACd,MAAM,UAAU,GAAG,EAAE,CAAC;oBACtB,UAAU,CAAC,yCAAyC,CAAC,GAAG,CAAC,CAAC;oBAC1D,MAAM,YAAY,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;iBAEzC;qBAAM;oBACH,IAAI,CAAC,qCAAqC,CAAC,GAAG,CAAC,CAAC;iBACnD;aACJ;YAED,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAClC,CAAC;KAAA;IAEK,gBAAgB,CAAC,KAAK;;YACxB,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,IAAI,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,wBAAwB,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC;YAC/E,IAAI,KAAK,KAAK,MAAM,IAAI,KAAK,KAAK,UAAU,EAAE;gBAC1C,MAAM,IAAI,CAAC,KAAK,CAAC,mBAAmB,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;aACtD;iBAAM,IAAI,KAAK,KAAK,MAAM,EAAE;gBACzB,MAAM,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;aAC1C;QACL,CAAC;KAAA;IAEK,WAAW,CAAC,KAAK;;YACnB,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,GAAG,GAAG,iBAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YACtC,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;YAC7C,IAAI,IAAI,EAAE;gBACN,MAAM,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;aAChC;QACL,CAAC;KAAA;IAEK,qBAAqB,CAAC,KAAK;;YAC7B,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,EAAE,GAAG,iBAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YACrC,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACxC,OAAO,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,QAAQ,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;QAC5E,CAAC;KAAA;IAEK,oBAAoB,CAAC,KAAK;;YAC5B,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,KAAK,GAAG,iBAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YACxC,OAAO,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;QACjE,CAAC;KAAA;IAEK,kBAAkB,CAAC,KAAK;;YAC1B,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,KAAK,GAAG,iBAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YACxC,OAAO,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;QAC/D,CAAC;KAAA;IAEK,gBAAgB,CAAC,KAAK;;YACxB,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,IAAI,GAAG,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC;YACzE,OAAO,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;QAC5D,CAAC;KAAA;IAED;;OAEG;IACH,eAAe;QACX,OAAO,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC;IAC5D,CAAC;IAED;;OAEG;IACG,OAAO,CAAC,GAAG,IAAI;;;;;YACjB,MAAM,SAAS,GAAG,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACjD,MAAM,KAAK,GAAQ,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAE1D,IAAI,CAAC,oBAAoB,EAAE,CAAC;YAC5B,MAAM,OAAM,OAAO,YAAC,GAAG,IAAI,CAAC,CAAC;YAC7B,IAAI,CAAC,uBAAuB,EAAE,CAAC;YAE/B,IAAI,KAAK,IAAI,KAAK,CAAC,IAAI,EAAE;gBACrB,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;gBACtC,IAAI,OAAO,EAAE;oBACT,OAAO,CAAC,KAAK,EAAE,CAAC;oBAChB,2FAA2F;oBAC3F,OAAO,CAAC,iBAAiB,IAAI,OAAO,CAAC,iBAAiB,CAAC,KAAK,CAAC,cAAc,EAAE,KAAK,CAAC,YAAY,CAAC,CAAC;iBACpG;aACJ;QACL,CAAC;KAAA;IAED;;OAEG;IACH,uBAAuB;QACnB,MAAM,UAAU,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QAC1C,IAAI,UAAU,CAAC,MAAM,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,EAAE;YAC3C,UAAU,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;SAC9C;IACL,CAAC;IAED;;OAEG;IACH,oBAAoB;QAChB,MAAM,UAAU,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QAC1C,IAAI,UAAU,CAAC,MAAM,EAAE;YACnB,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;SAC/C;IACL,CAAC;IAEK,kBAAkB;;YACpB,IAAI,gBAAgB,KAAK,CAAC,CAAC,EAAE;gBACzB,IAAI,EAAE,CAAC,OAAO,CAAC,gBAAgB,CAAC,EAAE;oBAC9B,MAAM,EAAE,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,KAAK,EAAE,CAAC;iBAC9C;gBACD,gBAAgB,GAAG,CAAC,CAAC,CAAC;aACzB;QACL,CAAC;KAAA;IAED;;;;;;OAMG;IACG,kBAAkB,CAAC,2BAA2B,EAAE,KAAe,EAAE,OAAe,EAAE,GAAG,IAAI;;YAC3F,MAAM,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAEhC,MAAM,aAAa,GAAG,IAAI,2BAA2B,CAAC,KAAK,EAAE,OAAO,EAAE,GAAG,IAAI,CAAC,CAAC;YAC/E,gBAAgB,GAAG,aAAa,CAAC,KAAK,CAAC;YACvC,MAAM,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACrC,CAAC;KAAA;IAED,yBAAyB,CAAC,KAAK;QAC3B,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,iBAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAE/D,IAAI,CAAC,kBAAkB,CACnB,+CAAsB,EACtB,IAAI,CAAC,KAAK,EACV;YACI,KAAK,EAAE,KAAK;SACf,EACD,KAAK,EACL,QAAQ,CACX,CAAC;IACN,CAAC;IAEK,wBAAwB,CAAC,KAAK;;YAChC,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,KAAK,GAAG,iBAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YACxC,+EAA+E;YAC/E,MAAM,IAAI,CAAC,kBAAkB,CAAC,6CAAqB,EAAE,IAAI,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,EAAE,KAAK,CAAC,CAAC;QAC9F,CAAC;KAAA;IAEK,gBAAgB,CAAC,KAAK;;YACxB,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,KAAK,GAAG,iBAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YACxC,uEAAuE;YACvE,MAAM,IAAI,CAAC,kBAAkB,CAAC,6BAAa,EAAE,IAAI,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,EAAE,KAAK,CAAC,CAAC;QACtF,CAAC;KAAA;IAED,sBAAsB,CAAC,KAAK;QACxB,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,MAAM,OAAO,GAAG;YACZ,IAAI,EAAE,gBAAgB;YACtB,KAAK,EAAE,gBAAgB;SAC1B,CAAC;QACF,IAAI,uCAAiB,CAAC,IAAI,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IAC5D,CAAC;IAEK,yBAAyB,CAAC,KAAK;;YACjC,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,IAAI,CAAC,KAAK,CAAC,mBAAmB,EAAE,CAAC;QAC3C,CAAC;KAAA;CACJ;AAxgCD,sCAwgCC;;;;;ACjiCD,6CAAwC;AAExC,4CAAgD;AAEhD,MAAa,SAAS;IAClB;;;;OAIG;IACH,MAAM,CAAC,gBAAgB,CAAC,KAAiB,EAAE,KAAwB;QAC/D,IAAI,CAAC,uBAAU,CAAC,iBAAiB,CAAC,KAAK,CAAC;YAAE,OAAO;QAEjD,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC,KAAK,CAAC,EAAE;YACvC,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,iCAAiC,CAAC,CAAC,CAAC;YAC7E,OAAO;SACV;QAED,uBAAU,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;IACxC,CAAC;IAED;;;;OAIG;IACH,MAAM,CAAC,mBAAmB,CAAC,KAAiB;QACxC,qFAAqF;QACrF,MAAM,oBAAoB,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,uBAAW,EAAE,iBAAK,CAAC,gCAAgC,CAAC,KAAK,KAAK,CAAC;QAC9G,IAAI,oBAAoB;YACpB,OAAO,IAAI,CAAC;QAEhB,OAAO,uBAAU,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC;IACjD,CAAC;IAED,MAAM,CAAC,SAAS,CAAC,KAAiB;QAC9B,IAAI,uBAAU,CAAC,iBAAiB,CAAC,KAAK,CAAC,IAAI,SAAS,CAAC,mBAAmB,CAAC,KAAK,CAAC,EAAE;YAC7E,OAAO,IAAI,CAAC;SACf;QACD,OAAO,uBAAU,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;IACvC,CAAC;CACJ;AArCD,8BAqCC;;;;;ACvCD,4CAAgC;AAEhC,MAAa,UAAU;IAEnB,MAAM,CAAC,iBAAiB,CAAC,KAAiB;QACtC,OAAO,KAAK,CAAC,IAAI,KAAK,CAAC,CAAC;IAC5B,CAAC;IACD;;;;;OAKG;IACH,MAAM,CAAC,mBAAmB,CAAC,KAAiB;QACxC,oGAAoG;QACpG,oBAAoB;QACpB,OAAO,KAAK,CAAC,UAAU,CAAC;IAC5B,CAAC;IAED;;;;;OAKG;IACH,MAAM,CAAC,SAAS,CAAC,KAAiB;QAC9B,OAAO,CAAC,UAAU,CAAC,iBAAiB,CAAC,KAAK,CAAC,IAAI,UAAU,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC;IACzF,CAAC;IAED;;;OAGG;IACH,MAAM,CAAC,iBAAiB,CAAC,KAAwB;QAC7C,KAAK,CAAC,aAAa,CAAC,gBAAgB,EAAE,UAAU,CAAC,qBAAqB,EAAE,CAAC,CAAC;IAC9E,CAAC;IAED,MAAM,CAAC,qBAAqB;QACxB,OAAO,cAAE,CAAC,KAAK,CAAC,mBAAmB,CAAC;IACxC,CAAC;CACJ;AAtCD,gCAsCC;;;;;;;;;;;;;;AC3CD,8DAAwE;AAExE,2CAAsC;AACtC,wCAAqC;AAGrC,kCAA8C;AAI9C,kDAA6C;AAC7C,oDAA+C;AAC/C,iFAA8E;AAE9E,MAAa,QAAQ;IAEjB;;;;;OAKG;IACG,WAAW,CAAC,KAAe,EAAE,eAAgC,EAAE,aAA8B,EAAE;;YACjG,MAAM,iBAAiB,GAAG,eAAe,CAAC,MAAM,CAAC,CAAC,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,CAAC,6BAAa,CAAC,UAAU,EAAE,CAAC;YACvG,MAAM,uBAAuB,GAAG,IAAI,qBAAS,CAAS,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC;YAC7E,qBAAS,CAAC,iBAAiB,CAAC,uBAAuB,EAAE,KAAK,EAAE,iBAAiB,CAAC,CAAC;YAE/E,sEAAsE;YACtE,MAAM,iBAAiB,GAAG,MAAM,IAAI,CAAC,gBAAgB,CAAC,eAAe,EAAE,uBAAuB,CAAC,CAAC;YAChG,IAAI,CAAC,iBAAiB,EAAE;gBACpB,OAAO;aACV;YAED,MAAM,UAAU,GAAG,iBAAiB,CAAC;YACrC,MAAM,qBAAqB,GAAG,IAAI,qBAAS,CAAS,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC;YAC3E,qBAAS,CAAC,iBAAiB,CAAC,qBAAqB,EAAE,KAAK,EAAE,UAAU,CAAC,CAAC;YAEtE,2DAA2D;YAC3D,MAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;YACjD,MAAM,IAAI,GAAG,MAAM,iCAAe,CAAC,YAAY,CAAC;gBAC5C,KAAK,EAAE,eAAe,aAAf,eAAe,uBAAf,eAAe,CAAE,KAAK;gBAC7B,QAAQ,EAAE,KAAK;gBACf,KAAK;gBACL,KAAK,EAAE,qBAAqB,CAAC,IAAI;gBACjC,KAAK;gBACL,MAAM,EAAE,KAAK;gBACb,eAAe,EAAE,IAAI;aACxB,CAAC,CAAC;YAEH,IAAI,CAAC,IAAI;gBAAE,OAAO;YAElB,8DAA8D;YAC9D,MAAM,QAAQ,GAAG,SAAS,CAAC,UAAU,CAAC,CAAC;YACvC,IAAI,QAAQ,GAAG,qBAAS,CAAC,gBAAgB,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;YAC3D,QAAQ,GAAG,qBAAS,CAAC,YAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC;YAChE,MAAM,eAAe,GAAG,EAAC,QAAQ,EAAE,QAAQ,EAAC,CAAC;YAE7C,MAAM,4BAAqB,CAAC,EAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,eAAe,EAAC,CAAC,CAAC;YAE3E,OAAO,IAAI,CAAC;QAChB,CAAC;KAAA;IAEa,gBAAgB,CAAC,eAAgC,EAAE,gBAAmC;;YAGhG,+CAA+C;YAC/C,MAAM,gBAAgB,GAAG,MAAM,6CAAqB,CAAC,gBAAgB,CAAC,eAAe,EAAE,gBAAgB,CAAC,CAAC;YACzG,MAAM,QAAQ,GAAG,MAAM,gBAAgB,CAAC,MAAM,EAAE,CAAC;YACjD,IAAI,gBAAgB,CAAC,QAAQ;gBAAE,OAAO;YAEtC,oCAAoC;YACpC,MAAM,iBAAiB,GAAe,CAAA,eAAe,aAAf,eAAe,uBAAf,eAAe,CAAE,MAAM;gBACrD,CAAC,CAAC,eAAe,CAAC,MAAM;gBACxB,CAAC,CAAC,6BAAa,CAAC,UAAU,EAAE,CAAC;YAErC,OAAO,IAAI,CAAC,wBAAwB,CAAC,iBAAiB,EAAE,QAAQ,CAAC,cAAc,EAAE,QAAQ,CAAC,UAAU,EAAE,QAAQ,CAAC,EAAE,EAAE,QAAQ,CAAC,OAAO,CAAC,CAAC;QACzI,CAAC;KAAA;IAGO,wBAAwB,CAAC,iBAA6B,EAAE,cAAuB,EAAE,UAAuB,EAAE,EAAU,EAAE,OAAe;QACzI,MAAM,UAAU,GAAe,SAAS,CAAC,iBAAiB,CAAC,CAAC;QAE5D,+DAA+D;QAC/D,MAAM,WAAW,GAAG,iBAAO,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;QAClD,IAAI,WAAW,KAAK,cAAc,EAAE;YAChC,MAAM,IAAI,GAAG,cAAc,GAAG,WAAW,CAAC;YAC1C,UAAU,CAAC,GAAG,GAAG,qBAAS,CAAC,aAAa,CAAC,UAAU,CAAC,GAAG,EAAE,eAAe,EAAE,IAAI,CAAC,CAAC;YAChF,UAAU,CAAC,KAAK,GAAG,iBAAO,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;SACpD;QAED,IAAI,iBAAiB,CAAC,IAAI,CAAC,IAAI,KAAK,UAAU,EAAE;YAC5C,UAAU,CAAC,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC;YAClC,UAAU,CAAC,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC;SACtC;QAED,sDAAsD;QACtD,MAAM,OAAO,GAAG,iBAAO,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;QACjD,IAAI,OAAO,KAAK,EAAE,EAAE;YAChB,MAAM,IAAI,GAAG,EAAE,GAAG,OAAO,CAAC;YAC1B,UAAU,CAAC,EAAE,CAAC,GAAG,GAAG,qBAAS,CAAC,aAAa,CAAC,UAAU,CAAC,EAAE,CAAC,GAAG,EAAE,eAAe,EAAE,IAAI,CAAC,CAAC;YACtF,UAAU,CAAC,EAAE,CAAC,KAAK,GAAG,iBAAO,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;SAC1D;QAED,IAAI,OAAO,EAAE;YACT,UAAU,CAAC,OAAO,CAAC,KAAK,GAAG,OAAwB,CAAC;SACvD;QAED,OAAO,UAAU,CAAC;IACtB,CAAC;CACJ;AA/FD,4BA+FC;;;;;AC5GD,sCAAgC;AAChC,wCAAqC;AAQrC;;GAEG;AACH,MAAa,SAAS;IAElB;;;;;OAKG;IACH,MAAM,CAAC,iBAAiB,CAAC,SAA4B,EAAE,KAAe,EAAE,UAAsB;QAC1F,IAAI,UAAU,CAAC,IAAI,CAAC,IAAI,KAAK,QAAQ,EAAE;YACnC,SAAS,CAAC,2BAA2B,CAAC,SAAS,EAAE,KAAK,EAAE,UAAU,CAAC,CAAC;SACvE;aAAM;YACH,SAAS,CAAC,oBAAoB,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;SACpD;IACL,CAAC;IAEO,MAAM,CAAC,2BAA2B,CAAC,SAA4B,EAAE,KAAe,EAAE,UAAsB;QAC5G,SAAS,CAAC,sBAAsB,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;QAEnD,MAAM,KAAK,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;QAC/B,SAAS,CAAC,qBAAqB,CAAC,SAAS,EAAE,KAAK,EAAE,UAAU,CAAC,CAAC;QAC9D,SAAS,CAAC,mBAAmB,CAAC,SAAS,EAAE,KAAK,EAAE,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IAC7E,CAAC;IAEO,MAAM,CAAC,sBAAsB,CAAC,SAA4B,EAAE,KAAe;QAC/E,MAAM,IAAI,GAAG,KAAK,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QACzC,IAAI,IAAI,EAAE;YACN,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,IAAI,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;SACjE;QAED,MAAM,GAAG,GAAG,KAAK,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QACtC,IAAI,GAAG,EAAE;YACL,SAAS,CAAC,aAAa,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC;SAC7C;QAED,KAAK,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;IACpC,CAAC;IAEO,MAAM,CAAC,qBAAqB,CAAC,SAA4B,EAAE,KAAqB,EAAE,UAAsB;;QAC5G,MAAM,UAAU,GAAG,MAAA,KAAK,CAAC,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,mCAAI,CAAC,CAAC;QACxD,MAAM,UAAU,GAAG,KAAK,CAAC,KAAK,GAAG,UAAU,CAAC;QAC5C,MAAM,EAAE,GAAG,iBAAO,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;QAE5C,SAAS,CAAC,aAAa,CAAC,QAAQ,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC;IACjE,CAAC;IAEO,MAAM,CAAC,mBAAmB,CAAC,SAA4B,EAAE,KAAqB,EAAE,OAAe;;QACnG,MAAM,UAAU,GAAG,MAAA,KAAK,CAAC,OAAO,CAAC,mCAAI,CAAC,CAAC;QACvC,IAAI,UAAU,EAAE;YACZ,SAAS,CAAC,aAAa,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,EAAE,UAAU,CAAC,CAAC;SACzE;IACL,CAAC;IAEO,MAAM,CAAC,oBAAoB,CAAC,SAA4B,EAAE,KAAe;QAC7E,MAAM,SAAS,GAAG,KAAK,CAAC,IAAI,CAAC,IAA0B,CAAC;QAExD,6EAA6E;QAC7E,+CAA+C;QAC/C,IAAI,SAAS,CAAC,UAAU,CAAC,UAAU,KAAK,QAAQ,EAAE;YAC9C,IAAI,KAAK,CAAC,SAAS,EAAE,EAAC;gBAClB,oEAAoE;gBACpE,SAAS,CAAC,2BAA2B,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;aAC/D;iBACI;gBACD,SAAS,CAAC,qBAAqB,CAAC,SAAS,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC;aAChE;SACJ;aAEI;YACD,SAAS,CAAC,2BAA2B,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;SAC/D;IACL,CAAC;IAEO,MAAM,CAAC,qBAAqB,CAAC,SAA4B,EAAE,KAAe,EAAE,SAA6B;QAC7G,SAAS,CAAC,aAAa,CAAC,SAAS,EAAE,KAAK,CAAC,YAAY,CAAC,WAAW,CAAC,EAAE,YAAG,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QAE9F,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE;YACnB,OAAO;SACV;QAED,SAAS,CAAC,aAAa,CAAC,SAAS,EAAE,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,YAAG,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;IACjG,CAAC;IAEO,MAAM,CAAC,2BAA2B,CAAC,SAA6B,EAAE,SAA4B;QAClG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE;YACnB,OAAO;SACV;QAED,MAAM,YAAY,GAAG,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC;QAC7C,IAAI,YAAY,EAAE;YACd,SAAS,CAAC,aAAa,CAAC,oCAAoC,EAAE,YAAY,CAAC,CAAC;SAC/E;QAED,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,YAAG,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;IAC5F,CAAC;IAEO,MAAM,CAAC,aAAa,CAAC,SAA4B,EAAE,eAAiC,EAAE,KAAc;QACxG,MAAM,UAAU,GAAG,iBAAO,CAAC,SAAS,CAAC,eAAe,CAAC,CAAC;QACtD,SAAS,CAAC,aAAa,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC;IAC/C,CAAC;IAED;;;;;;OAMG;IACH,MAAM,CAAC,YAAY,CAAC,UAAsB,EAAE,IAAY;QACpD,OAAO,iBAAO,CAAC,kBAAkB,CAAC,UAAU,EAAE,IAAI,EAAE,cAAc,CAAC,CAAC;IACxE,CAAC;IAED;;;;;OAKG;IACH,MAAM,CAAC,gBAAgB,CAAC,MAAkB,EAAE,KAAgB;QACxD,mCAAmC;QACnC,MAAM,aAAa,GAAG,SAAS,CAAC,4BAA4B,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;QAC5E,OAAO,SAAS,CAAC,gCAAgC,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;IAC5E,CAAC;IAED;;;;;OAKG;IACF,MAAM,CAAC,4BAA4B,CAAC,MAAkB,EAAE,KAAgB;QACrE,MAAM,aAAa,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;QAExC,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,KAAK,UAAU,EAAE;YAClC,2EAA2E;YAC3E,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,EAAE;gBACjE,OAAO,aAAa,CAAC;aACxB;YAED,MAAM,aAAa,GAAG,KAAK,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;YACrD,IAAI,aAAa,EAAE;gBACf,MAAM,yBAAyB,GAAG,aAAa,CAAC,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC;gBAErE,IAAI,yBAAyB,EAAE;oBAC3B,aAAa,CAAC,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC;iBACrC;aACJ;SACJ;QAED,OAAO,aAAa,CAAC;IACzB,CAAC;IAED;;;;;OAKG;IACH,MAAM,CAAC,gCAAgC,CAAC,MAAkB,EAAE,KAAgB;QACxE,MAAM,aAAa,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;QAExC,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,KAAK,QAAQ,EAAE;YAChC,MAAM,SAAS,GAAG,KAAK,CAAC,IAAI,CAAC,IAA0B,CAAC;YAExD,iEAAiE;YACjE,+CAA+C;YAC/C,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE;gBACtB,OAAO,aAAa,CAAC;aACxB;YAED,IAAI,SAAS,CAAC,UAAU,CAAC,UAAU,KAAK,QAAQ,EAAE;gBAC9C,IAAI,SAAS,CAAC,MAAM,CAAC,OAAO,EAAE;oBAC1B,aAAa,CAAC,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC;iBACzC;qBACI;oBACD,aAAa,CAAC,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC;iBACrC;aACJ;SACJ;QAED,OAAO,aAAa,CAAC;IACzB,CAAC;CACJ;AAtLD,8BAsLC;;;;;AClMD,mDAAgD;AAChD,6CAA0C;AAC1C,6CAA0C;AAC1C,+CAA4C;AAC5C,+CAA4C;AAE5C,MAAa,gBAAgB;IACzB,MAAM,CAAC,MAAM,CAAC,IAAkB;QAC5B,IAAI,IAAI,CAAC,IAAI,KAAK,WAAW,EAAE;YAC3B,OAAO,IAAI,6BAAa,CAAC,IAAI,CAAC,CAAC;SAClC;aAAM,IAAI,IAAI,CAAC,IAAI,KAAK,QAAQ,EAAE;YAC/B,OAAO,IAAI,uBAAU,CAAC,IAAI,CAAC,CAAC;SAC/B;aAAM,IAAI,IAAI,CAAC,IAAI,KAAK,QAAQ,EAAE;YAC/B,OAAO,IAAI,uBAAU,CAAC,IAAI,CAAC,CAAC;SAC/B;aAAM,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,EAAE;YAChC,OAAO,IAAI,yBAAW,CAAC,IAAI,CAAC,CAAC;SAChC;aAAM,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,EAAE;YAC9B,OAAO,IAAI,yBAAW,CAAC,IAAI,CAAC,CAAC;SAClC;IACL,CAAC;CACJ;AAdD,4CAcC;;;;;ACpBD,sEAAmE;AAGnE,MAAsB,aAAa;IAI/B,YAAY,IAAe;QACvB,aAAa;QACb,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QACtB,aAAa;QACb,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,uCAAkB,CAAC,IAAI,CAAC,CAAC,CAAC;IACxE,CAAC;CAIJ;AAbD,sCAaC;;;;;ACjBD,mDAAgD;AAChD,+DAA4D;AAC5D,6DAA0D;AAC1D,uDAAoD;AACpD,mDAAgD;AAChD,uDAAoD;AACpD,uDAAoD;AACpD,6EAA0E;AAC1E,2DAAwD;AACxD,uDAAoD;AACpD,+DAA4D;AAC5D,iDAA8C;AAI9C,MAAa,aAAc,SAAQ,6BAAmD;IAClF,OAAO;QACH,6BAAa,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1C,6BAAa,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE5C,mBAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAC7C,mBAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAEhD,uBAAU,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACpC,+BAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE5C,wDAAwD;QACxD,iBAAO,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAElC,uBAAU,CAAC,8BAA8B,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACrD,uBAAU,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEpC,uBAAU,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAChD,uBAAU,CAAC,kCAAkC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEzD,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE;YAC5C,6CAAqB,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACjD;aAAM;YACH,6CAAqB,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACjD,6CAAqB,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAChD;QAED,2BAAY,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACxC,uBAAU,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEpC,+BAAc,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/C,+BAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5C,+BAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5C,+BAAc,CAAC,wBAAwB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACvD,CAAC;CACJ;AAnCD,sCAmCC;;;;;AClDD,mDAAgD;AAChD,+DAA4D;AAC5D,6DAA0D;AAC1D,uDAAoD;AACpD,mDAAgD;AAChD,uDAAoD;AACpD,uDAAoD;AACpD,6EAA0E;AAC1E,2DAAwD;AACxD,uDAAoD;AACpD,+DAA4D;AAO5D,MAAa,WAAY,SAAQ,6BAA+C;IAC5E,OAAO;QACH,6BAAa,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1C,6BAAa,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE5C,mBAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAC7C,mBAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAEhD,uBAAU,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACpC,+BAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5C,uBAAU,CAAC,8BAA8B,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACrD,uBAAU,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEpC,uBAAU,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAChD,uBAAU,CAAC,kCAAkC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEzD,6CAAqB,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACjD,6CAAqB,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE7C,2BAAY,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACxC,uBAAU,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEpC,+BAAc,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/C,+BAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5C,+BAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5C,+BAAc,CAAC,wBAAwB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACvD,CAAC;CACJ;AA3BD,kCA2BC;;;;;AC5CD,mDAAgD;AAGhD,uDAAoD;AACpD,+DAA4D;AAC5D,uDAAoD;AACpD,6EAA0E;AAC1E,2DAAwD;AACxD,uDAAoD;AACpD,6DAA0D;AAC1D,+DAA4D;AAE5D,2CAAwC;AACxC,qDAAgD;AAEhD,MAAa,UAAW,SAAQ,6BAA6C;IACzE,OAAO;QACH,6BAAa,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1C,6BAAa,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE5C,UAAU,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE5C,uBAAU,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACpC,+BAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5C,uBAAU,CAAC,8BAA8B,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACrD,uBAAU,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEpC,UAAU,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEzC,6CAAqB,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7C,6CAAqB,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEjD,2BAAY,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACxC,uBAAU,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEpC,+BAAc,CAAC,wBAAwB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEnD,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;IAChC,CAAC;IAED,MAAM,CAAC,qBAAqB,CAAC,IAAqB;QAC9C,MAAM,SAAS,GAAG,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAE/D,IAAI,SAAS,EAAE;YACX,MAAM,EAAE,UAAU,EAAE,MAAM,EAAE,UAAU,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC;YAElE,mDAAmD;YACnD,KAAK,MAAM,CAAC,KAAK,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE;gBAC/D,IAAI,UAAU,CAAC,KAAK,CAAC,KAAK,SAAS,EAAE;oBACjC,UAAU,CAAC,KAAK,CAAC,CAAC,IAAI,GAAG,KAAK,GAAG,KAAK,CAAC;iBAC1C;aACJ;YAED,KAAK,MAAM,CAAC,OAAO,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE;gBAC1D,KAAK,CAAC,IAAI,GAAG,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;aACxE;YAED,0BAA0B;YAC1B,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,GAAG,KAAK,GAAG,CAAC,GAAG,SAAS,CAAC,IAAI,GAAG,MAAM,CAAC,SAAS,CAAC,mBAAmB,CAAC,CAAC,CAAC;YACrG,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,GAAG,qBAAS,CAAC,aAAa,CAAC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAE,WAAW,EAAE,MAAM,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;YAC1I,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;YACnC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,GAAG,qBAAS,CAAC,aAAa,CAAC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAE,WAAW,EAAE,MAAM,CAAC,SAAS,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC;YAE/I,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,GAAG,KAAK,GAAG,CAAC,GAAG,SAAS,CAAC,WAAW,GAAG,MAAM,CAAC,SAAS,CAAC,wBAAwB,CAAC,CAAC,CAAC;YAC9G,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,GAAG,qBAAS,CAAC,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,WAAW,EAAE,MAAM,CAAC,SAAS,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;YACtI,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;YAChC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,GAAG,qBAAS,CAAC,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,WAAW,EAAE,MAAM,CAAC,SAAS,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC;SAC9I;IACL,CAAC;IAED,MAAM,CAAC,kBAAkB,CAAC,IAAqB;;QAC3C,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC;QACnC,KAAK,CAAC,IAAI,GAAG,CAAC,MAAA,UAAU,CAAC,OAAO,CAAC,KAAK,mCAAI,CAAC,CAAC,GAAG,CAAC,CAAC;QACjD,KAAK,CAAC,KAAK,GAAG,iBAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;IAC3C,CAAC;IAED;;OAEG;IACH,MAAM,CAAC,sBAAsB,CAAC,UAAsB;QAChD,MAAM,SAAS,GAAG;YACd,uDAAuD;YACvD,UAAU,EAAE;gBACR,IAAI,EAAE,CAAC;gBACP,OAAO,EAAE,CAAC;gBACV,QAAQ,EAAE,CAAC;gBACX,QAAQ,EAAE,CAAC;gBACX,SAAS,EAAE,CAAC;gBACZ,KAAK,EAAE,CAAC;gBACR,SAAS,EAAE,CAAC;gBACZ,QAAQ,EAAE,CAAC;gBACX,KAAK,EAAE,CAAC;gBACR,OAAO,EAAE,CAAC;aACb;YACD,gDAAgD;YAChD,IAAI,EAAE,CAAC;YACP,WAAW,EAAE,CAAC;YACd,8BAA8B;YAC9B,MAAM,EAAE,EAAc;SACzB,CAAC;QACF,QAAQ,UAAU,EAAE;YAChB,KAAK,KAAK;gBACN,SAAS,CAAC,UAAU,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;gBAC/B,SAAS,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC;gBACjC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;gBACnC,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,cAAc,EAAE,YAAY,EAAE,gBAAgB,CAAC,CAAC;gBACpG,MAAM;YACV,KAAK,QAAQ;gBACT,SAAS,CAAC,UAAU,CAAC,IAAI,GAAG,CAAC,CAAC;gBAC9B,SAAS,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC;gBACjC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,YAAY,EAAE,gBAAgB,CAAC,CAAC;gBACpF,MAAM;YACV,KAAK,OAAO;gBACR,SAAS,CAAC,UAAU,CAAC,IAAI,GAAG,CAAC,CAAC;gBAC9B,SAAS,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;gBACnC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;gBAChC,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;gBACpB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,cAAc,EAAE,YAAY,EAAE,gBAAgB,CAAC,CAAC;gBACpG,MAAM;YACV,KAAK,MAAM;gBACP,SAAS,CAAC,UAAU,CAAC,IAAI,GAAG,CAAC,CAAC;gBAC9B,SAAS,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC;gBACjC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;gBACnC,SAAS,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,CAAC;gBACnC,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,cAAc,EAAE,QAAQ,EAAE,YAAY,EAAE,gBAAgB,CAAC,CAAC;gBAC9G,MAAM;YACV,KAAK,UAAU;gBACX,SAAS,CAAC,UAAU,CAAC,IAAI,GAAG,CAAC,CAAC;gBAC9B,SAAS,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC;gBACjC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,QAAQ,EAAE,OAAO,EAAE,kBAAkB,EAAE,cAAc,EAAE,YAAY,EAAE,gBAAgB,CAAC,CAAC;gBAC3I,MAAM;YACV,KAAK,UAAU;gBACX,SAAS,CAAC,UAAU,CAAC,IAAI,GAAG,CAAC,CAAC;gBAC9B,SAAS,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,WAAW,EAAE,eAAe,EAAE,kBAAkB,EAAE,YAAY,EAAE,gBAAgB,CAAC,CAAC;gBAClH,MAAM;YACV,KAAK,KAAK;gBACN,SAAS,CAAC,UAAU,CAAC,IAAI,GAAG,CAAC,CAAC;gBAC9B,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;gBACnC,SAAS,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,CAAC;gBACnC,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,YAAY,EAAE,cAAc,EAAE,gBAAgB,CAAC,CAAC;gBACpG,MAAM;YACV,KAAK,OAAO;gBACR,SAAS,CAAC,UAAU,CAAC,IAAI,GAAG,CAAC,CAAC;gBAC9B,SAAS,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;gBAChC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,YAAY,EAAE,cAAc,EAAE,gBAAgB,CAAC,CAAC;gBACpG,MAAM;YACV,KAAK,MAAM;gBACP,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,WAAW,EAAE,eAAe,EAAE,YAAY,EAAE,gBAAgB,CAAC,CAAC;gBAC/F,MAAM;YACV,KAAK,OAAO;gBACR,SAAS,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC;gBACjC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,cAAc,EAAE,YAAY,EAAE,gBAAgB,CAAC,CAAC;gBACpG,MAAM;YAEV,KAAK,WAAW;gBACZ,SAAS,CAAC,UAAU,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;gBAC/B,SAAS,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC;gBACjC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;gBACnC,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,cAAc,EAAE,YAAY,EAAE,SAAS,EAAE,gBAAgB,CAAC,CAAC;gBAC/G,MAAM;YACV,KAAK,cAAc;gBACf,SAAS,CAAC,UAAU,CAAC,IAAI,GAAG,CAAC,CAAC;gBAC9B,SAAS,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC;gBACjC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,cAAc,EAAE,YAAY,EAAE,YAAY,EAAE,SAAS,EAAE,gBAAgB,CAAC,CAAC;gBAC7H,MAAM;YACV,KAAK,aAAa;gBACd,SAAS,CAAC,UAAU,CAAC,IAAI,GAAG,CAAC,CAAC;gBAC9B,SAAS,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;gBACnC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;gBAChC,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;gBACpB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,cAAc,EAAE,YAAY,EAAE,gBAAgB,CAAC,CAAC;gBACpG,MAAM;YACV,KAAK,YAAY;gBACb,SAAS,CAAC,UAAU,CAAC,IAAI,GAAG,CAAC,CAAC;gBAC9B,SAAS,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC;gBACjC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;gBACnC,SAAS,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,CAAC;gBACnC,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,cAAc,EAAE,YAAY,EAAE,QAAQ,EAAE,gBAAgB,CAAC,CAAC;gBAC9G,MAAM;YACV,KAAK,WAAW;gBACZ,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;gBACnC,SAAS,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,CAAC;gBACnC,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,YAAY,EAAE,eAAe,EAAE,gBAAgB,CAAC,CAAC;gBACrG,MAAM;YACV,KAAK,aAAa;gBACd,SAAS,CAAC,UAAU,CAAC,IAAI,GAAG,CAAC,CAAC;gBAC9B,SAAS,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC;gBACjC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,cAAc,EAAE,YAAY,EAAE,gBAAgB,CAAC,CAAC;gBACpG,MAAM;YAEV,KAAK,OAAO;gBACR,SAAS,CAAC,UAAU,CAAC,IAAI,GAAG,CAAC,CAAC;gBAC9B,SAAS,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC;gBACjC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;gBAChC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,YAAY,EAAE,SAAS,EAAE,gBAAgB,CAAC,CAAC;gBAC/F,MAAM;YAEV,KAAK,MAAM;gBACP,SAAS,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC;gBACjC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,CAAC;gBACnC,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,KAAK,EAAE,YAAY,EAAE,cAAc,EAAE,YAAY,EAAE,gBAAgB,CAAC,CAAC;gBACzH,MAAM;YACV,KAAK,WAAW;gBACZ,SAAS,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC;gBACjC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,CAAC;gBACnC,SAAS,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,CAAC;gBACnC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,KAAK,EAAE,YAAY,EAAE,cAAc,EAAE,YAAY,EAAE,gBAAgB,CAAC,CAAC;gBACzH,MAAM;YACV,KAAK,OAAO;gBACR,SAAS,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC;gBACjC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,CAAC;gBACnC,SAAS,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,CAAC;gBACnC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,KAAK,EAAE,YAAY,EAAE,cAAc,EAAE,YAAY,EAAE,gBAAgB,CAAC,CAAC;gBACzH,MAAM;YACV,KAAK,UAAU;gBACX,SAAS,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC;gBACjC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,CAAC;gBACnC,SAAS,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,CAAC;gBACnC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,KAAK,EAAE,YAAY,EAAE,cAAc,EAAE,YAAY,EAAE,gBAAgB,CAAC,CAAC;gBACzH,MAAM;YACV,KAAK,QAAQ;gBACT,SAAS,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC;gBACjC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,CAAC;gBACnC,SAAS,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,CAAC;gBACnC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,KAAK,EAAE,YAAY,EAAE,cAAc,EAAE,YAAY,EAAE,gBAAgB,CAAC,CAAC;gBACzH,MAAM;YAEV,KAAK,QAAQ;gBACT,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,YAAY,EAAE,gBAAgB,CAAC,CAAC;gBACpF,MAAM;YACV,KAAK,eAAe;gBAChB,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC;gBAC/B,SAAS,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,CAAC;gBACnC,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,iBAAiB,EAAE,YAAY,EAAE,cAAc,EAAE,gBAAgB,CAAC,CAAC;gBACvH,MAAM;YAEV,SAAS;YACT,KAAK,WAAW;gBACZ,SAAS,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC;gBACjC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,YAAY,EAAE,YAAY,EAAE,gBAAgB,CAAC,CAAC;gBAClG,MAAM;YACV,KAAK,OAAO;gBACR,SAAS,CAAC,UAAU,CAAC,IAAI,GAAG,CAAC,CAAC;gBAC9B,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,YAAY,EAAE,YAAY,EAAE,cAAc,EAAE,gBAAgB,CAAC,CAAC;gBAClH,MAAM;YACV,KAAK,OAAO;gBACR,SAAS,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC;gBACjC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,YAAY,EAAE,YAAY,EAAE,UAAU,EAAE,gBAAgB,CAAC,CAAC;gBAC9G,MAAM;YACV,KAAK,SAAS;gBACV,SAAS,CAAC,UAAU,CAAC,IAAI,GAAG,CAAC,CAAC;gBAC9B,SAAS,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC;gBACjC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,iBAAiB,EAAE,cAAc,EAAE,YAAY,EAAE,YAAY,EAAE,gBAAgB,CAAC,CAAC;gBACrI,MAAM;YACV,KAAK,QAAQ;gBACT,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,eAAe,EAAE,YAAY,EAAE,gBAAgB,CAAC,CAAC;gBACpF,MAAM;YACV,KAAK,OAAO;gBACR,SAAS,CAAC,UAAU,CAAC,IAAI,GAAG,CAAC,CAAC;gBAC9B,SAAS,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC;gBACjC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC;gBAClC,SAAS,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,CAAC;gBACnC,SAAS,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC;gBAC/B,SAAS,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,CAAC;gBACnC,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CACjB,WAAW,EACX,eAAe,EACf,KAAK,EACL,iBAAiB,EACjB,YAAY,EACZ,YAAY,EACZ,aAAa,EACb,YAAY,EACZ,cAAc,EACd,gBAAgB,CACnB,CAAC;gBACF,MAAM;SACb;QACD,OAAO,SAAS,CAAC;IACrB,CAAC;CACJ;AA5UD,gCA4UC;;;;;AC3VD,mDAAgD;AAGhD,uDAAoD;AACpD,6DAA0D;AAC1D,+DAA4D;AAC5D,+DAA4D;AAC5D,uDAAoD;AACpD,uDAAoD;AAEpD,2CAAwC;AACxC,qDAAkD;AAElD;;GAEG;AACH,MAAa,UAAW,SAAQ,6BAA6C;IACzE,OAAO;QACH,6BAAa,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1C,6BAAa,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE5C,UAAU,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACxC,uBAAU,CAAC,0BAA0B,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEjD,uBAAU,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACpC,+BAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5C,uBAAU,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEpC,uBAAU,CAAC,kCAAkC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEzD,+BAAc,CAAC,wBAAwB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEnD,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,WAAW,CAAC;IACpC,CAAC;IAED;;;;;;;;OAQG;IACH,MAAM,CAAC,iBAAiB,CAAC,IAAqB;QAC1C,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC;QAEtF,MAAM,UAAU,GAAG,CAAC,QAAQ,EAAE,QAAQ,EAAE,iBAAiB,EAAE,UAAU,CAAC,CAAC;QAEvE,MAAM,SAAS,GAAG,IAAI,CAAC,sBAAsB,CAAC,UAAU,CAAC,CAAC;QAE1D,6BAA6B;QAC7B,UAAU,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE;YACvB,IAAI,MAAM,CAAC,GAAG,CAAC,KAAK,SAAS,EAAE;gBAC3B,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,GAAG,KAAK,GAAG,SAAS,CAAC,GAAG,CAAC,CAAC;gBAC1C,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,iBAAO,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;aACtD;QACL,CAAC,CAAC,CAAC;QAEH,kCAAkC;QAClC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,GAAG,KAAK,GAAG,CAAC,GAAG,SAAS,CAAC,IAAI,CAAC;QACzD,qBAAS,CAAC,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,WAAW,EAAE,SAAS,CAAC,mBAAmB,CAAC,CAAC,CAAC;QACjG,iBAAO,CAAC,SAAS,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAE1C,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;QAChC,qBAAS,CAAC,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,WAAW,EAAE,SAAS,CAAC,wBAAwB,CAAC,CAAC,CAAC;QACtG,iBAAO,CAAC,SAAS,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAE1C,8BAA8B;QAC9B,UAAU,CAAC,UAAU,GAAG,QAAQ,CAAC;QAEjC,4BAA4B;QAC5B,UAAU,CAAC,SAAS,CAAC,IAAI,GAAG,KAAK,GAAG,SAAS,CAAC,SAAS,CAAC;QACxD,iBAAO,CAAC,SAAS,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QAExC,qBAAqB;QACrB,kCAAkC;QAClC,KAAK,MAAM,CAAC,OAAO,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE;YAC1D,KAAK,CAAC,IAAI,GAAG,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;SACxE;QAED,MAAM,CAAC,MAAM,GAAG,KAAK,CAAC;QACtB,MAAM,CAAC,iBAAiB,CAAC,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;IAC5D,CAAC;IAED;;;OAGG;IACH,MAAM,CAAC,sBAAsB,CAAC,UAAsB;QAChD,MAAM,SAAS,GAAG;YACd,MAAM,EAAE,CAAC;YACT,MAAM,EAAE,CAAC;YACT,eAAe,EAAE,CAAC;YAClB,QAAQ,EAAE,CAAC;YACX,SAAS,EAAE,CAAC;YACZ,IAAI,EAAE,CAAC;YACP,4BAA4B;YAC5B,MAAM,EAAE,CAAC,UAAU,CAAC;SACvB,CAAC;QACF,QAAQ,UAAU,EAAE;YAChB,KAAK,SAAS;gBACV,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;gBACrB,SAAS,CAAC,eAAe,GAAG,CAAC,CAAC;gBAC9B,SAAS,CAAC,QAAQ,GAAG,CAAC,CAAC;gBACvB,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;gBACjC,MAAM;YACV,KAAK,OAAO;gBACR,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;gBACrB,SAAS,CAAC,eAAe,GAAG,CAAC,CAAC;gBAC9B,SAAS,CAAC,QAAQ,GAAG,CAAC,CAAC;gBACvB,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,oBAAoB,CAAC,CAAC;gBACvD,MAAM;YACV,KAAK,MAAM;gBACP,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;gBACtB,SAAS,CAAC,eAAe,GAAG,CAAC,CAAC;gBAC9B,SAAS,CAAC,QAAQ,GAAG,CAAC,CAAC;gBACvB,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;gBAC5C,MAAM;YACV,KAAK,OAAO;gBACR,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;gBACrB,SAAS,CAAC,eAAe,GAAG,CAAC,CAAC;gBAC9B,SAAS,CAAC,QAAQ,GAAG,CAAC,CAAC;gBACvB,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,EAAE,SAAS,CAAC,CAAC;gBAChD,MAAM;YACV,KAAK,SAAS;gBACV,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;gBACrB,SAAS,CAAC,eAAe,GAAG,CAAC,CAAC;gBAC9B,SAAS,CAAC,QAAQ,GAAG,CAAC,CAAC;gBACvB,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC;gBACnB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,oBAAoB,EAAE,UAAU,CAAC,CAAC;gBACxD,MAAM;SACb;QACD,OAAO,SAAS,CAAC;IACrB,CAAC;CACJ;AA3HD,gCA2HC;;;;;AC3ID,mDAAgD;AAGhD,uDAAoD;AACpD,6DAA0D;AAC1D,+DAA4D;AAC5D,+DAA4D;AAC5D,uDAAoD;AACpD,uDAAoD;AACpD,2CAAwC;AACxC,qDAAkD;AAElD,MAAa,WAAY,SAAQ,6BAA+C;IAC5E,OAAO;QACH,6BAAa,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1C,6BAAa,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE5C,WAAW,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC3C,WAAW,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACzC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAErC,uBAAU,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACpC,+BAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5C,uBAAU,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEpC,WAAW,CAAC,uBAAuB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE/C,uBAAU,CAAC,kCAAkC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACzD,uBAAU,CAAC,0BAA0B,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEjD,WAAW,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEvC,WAAW,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5C,+BAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5C,+BAAc,CAAC,wBAAwB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEnD,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACxC,CAAC;IAED,MAAM,CAAC,mBAAmB,CAAC,IAAsB;;QAC7C,MAAM,EAAE,aAAa,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC;QAC1C,8BAA8B;QAC9B,KAAK,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,EAAE;YACnD,gDAAgD;YAChD,IAAI,OAAO,IAAI,CAAC,GAAG,KAAK,QAAQ,EAAE;gBAC9B,IAAI,CAAC,GAAG,GAAG,IAAI,qBAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;aAC3C;YACD,MAAM,KAAK,GAAG,IAAI,qBAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAEtC,KAAK,CAAC,aAAa,CAAC,eAAe,EAAE,MAAA,IAAI,CAAC,IAAI,mCAAI,CAAC,CAAC,CAAC;YAErD,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC;YACtB,iBAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YACxB,aAAa;YACb,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;SAC9C;QAED,mDAAmD;QACnD,IAAI,SAAS,EAAE;YACX,aAAa,CAAC,cAAc,CAAC,MAAM,GAAG,KAAK,CAAC;YAC5C,aAAa,CAAC,iBAAiB,CAAC,MAAM,GAAG,KAAK,CAAC;YAC/C,aAAa,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;YAClC,aAAa,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC;SACxC;aAAM;YACH,aAAa,CAAC,cAAc,CAAC,MAAM,GAAG,IAAI,CAAC;YAC3C,aAAa,CAAC,iBAAiB,CAAC,MAAM,GAAG,IAAI,CAAC;YAC9C,aAAa,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;YACnC,aAAa,CAAC,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC;SACzC;IACL,CAAC;IAED,MAAM,CAAC,iBAAiB,CAAC,IAAsB;QAC3C,MAAM,EAAE,UAAU,EAAE,aAAa,EAAE,GAAG,IAAI,CAAC;QAE3C,MAAM,YAAY,GAAG,CAAC,SAAS,EAAE,UAAU,EAAE,UAAU,EAAE,WAAW,EAAE,OAAO,EAAE,WAAW,EAAE,UAAU,CAAC,CAAC;QAExG,MAAM,UAAU,GAAG,iBAAO,CAAC,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAE1D,YAAY,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,EAAE;YAC3B,IAAI,UAAU,CAAC,KAAK,CAAC,KAAK,SAAS,EAAE;gBACjC,UAAU,CAAC,KAAK,CAAC,CAAC,IAAI,GAAG,UAAU,CAAC;aACvC;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAED,MAAM,CAAC,aAAa,CAAC,IAAsB;QACvC,MAAM,EAAE,MAAM,EAAE,aAAa,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC;QAElD,MAAM,CAAC,MAAM,CAAC,IAAI,GAAG,iBAAO,CAAC,SAAS,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QAE7D,4CAA4C;QAC5C,MAAM,CAAC,MAAM,mCAAQ,aAAa,CAAC,MAAM,KAAE,MAAM,EAAE,IAAI,GAAE,CAAC;QAC1D,MAAM,CAAC,QAAQ,mCAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,aAAa,CAAC,iBAAiB,CAAC,CAAC,CAAC,aAAa,CAAC,QAAQ,CAAC,KAAE,MAAM,EAAE,IAAI,GAAE,CAAC;QAC9G,MAAM,CAAC,KAAK,mCAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,KAAE,MAAM,EAAE,IAAI,GAAE,CAAC;IACzG,CAAC;IAED,MAAM,CAAC,uBAAuB,CAAC,IAAsB;QACjD,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC;QAE/D,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAO,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;QACnE,+DAA+D;QAC/D,IAAI,OAAO,EAAE;YACT,KAAK,CAAC,QAAQ,CAAC,IAAI,GAAG,CAAC,GAAG,QAAQ,CAAC;YACnC,KAAK,CAAC,QAAQ,CAAC,GAAG,GAAG,KAAK,CAAC,QAAQ,CAAC,IAAI,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;SACzF;aAAM;YACH,KAAK,CAAC,QAAQ,CAAC,IAAI,GAAG,EAAE,GAAG,QAAQ,CAAC;YACpC,KAAK,CAAC,QAAQ,CAAC,GAAG,GAAI,KAAK,CAAC,QAAQ,CAAC,IAAI,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;SAC1F;QACD,KAAK,CAAC,QAAQ,CAAC,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,WAAW,CAAC,QAAQ,CAAC;QAEvD,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,IAAI,CAAC,CAAC;QAClC,MAAM,CAAC,iBAAiB,CAAC,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IAC7D,CAAC;IAED,MAAM,CAAC,eAAe,CAAC,IAAsB;QACzC,MAAM,EAAE,aAAa,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC;QAEpD,IAAI,UAAU,GAAG,iBAAO,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAEnG,iDAAiD;QACjD,QAAQ,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,UAAU,GAAG,CAAC,CAAC,CAAC;QACrD,QAAQ,CAAC,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC;QAEzC,QAAQ,CAAC,GAAG,CAAC,IAAI,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,UAAU,GAAG,CAAC,CAAC,CAAC;QACrD,QAAQ,CAAC,GAAG,CAAC,KAAK,GAAG,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC;IAC3C,CAAC;IAED,MAAM,CAAC,oBAAoB,CAAC,IAAsB;QAC9C,MAAM,EAAE,aAAa,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC;QAE3C,MAAM,KAAK,GAAG,iBAAO,CAAC,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAErD,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,GAAG,KAAK,GAAG,CAAC,CAAC;QAC3C,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;QACnC,iBAAO,CAAC,SAAS,CAAC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAC7C,iBAAO,CAAC,SAAS,CAAC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;IACjD,CAAC;IAED,MAAM,CAAC,YAAY,CAAC,IAAsB;QACtC,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC;QACvB,KAAK,CAAC,GAAG,GAAG,qBAAS,CAAC,aAAa,CAAC,KAAK,CAAC,GAAG,EAAE,eAAe,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;QAC/E,iBAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;IAC7B,CAAC;CACJ;AAnID,kCAmIC;;;;;AC9ID,wDAAqD;AACrD,8CAA2C;AAC3C,kDAAsC;AAEtC,MAAa,cAAc;IACvB;;OAEG;IACH,MAAM,CAAC,iBAAiB,CAAC,IAAkB;QACvC,MAAM,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC;QAE5B,+CAA+C;QAC/C,UAAU,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;QAC/B,UAAU,CAAC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC;QACnC,UAAU,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QAC9B,UAAU,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC;QAEjC,mCAAmC;QACnC,KAAK,IAAI,CAAC,GAAG,EAAE,SAAS,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;YACrD,4EAA4E;YAC5E,gDAAgD;YAChD,IAAI,GAAG,KAAK,MAAM,IAAI,SAAS,CAAC,MAAM,CAAC,KAAK,SAAS;gBAAE,OAAO;YAC9D,MAAM,KAAK,GAAG,IAAI,qBAAS,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YAE3C,SAAS,CAAC,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC;YAE3B,gDAAgD;YAChD,yEAAyE;YACzE,MAAM,KAAK,GAAG,cAAE,CAAC,UAAU,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YACxC,iBAAO,CAAC,SAAS,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;YAEpC,mBAAmB;YACnB,SAAS,CAAC,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;SAChD;IACL,CAAC;CACJ;AA/BD,wCA+BC;;;;;AC/BD,MAAa,qBAAqB;IAC9B,MAAM,CAAC,WAAW,CAAC,IAAuC;QACtD,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC;QAE9C,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;QAChE,KAAK,CAAC,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,CAAC;QACnE,KAAK,CAAC,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC;QAC/C,KAAK,CAAC,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;IAChC,CAAC;IAED,MAAM,CAAC,eAAe,CAAC,IAA2C;QAC9D,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC;QAE9C,KAAK,CAAC,QAAQ,CAAC,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;QAC/D,KAAK,CAAC,QAAQ,CAAC,GAAG,GAAG,KAAK,CAAC,QAAQ,CAAC,IAAI,GAAG,MAAM,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC,CAAC;QAC/E,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,GAAG,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC;QACpD,KAAK,CAAC,QAAQ,CAAC,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,WAAW,CAAC,QAAQ,CAAC;QACvD,KAAK,CAAC,QAAQ,CAAC,QAAQ,GAAG,KAAK,CAAC;IACpC,CAAC;IAED,MAAM,CAAC,YAAY,CAAC,IAAsC;QACtD,2EAA2E;QAC3E,qBAAqB,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QAExC,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC;QAC9C,6DAA6D;QAC7D,KAAK,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QACrB,KAAK,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QAE3B,kEAAkE;QAClE,MAAM,SAAS,GAAG,UAAU,CAAC,SAAS,CAAC,KAAK,GAAG,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAClE,UAAU,CAAC,SAAS,CAAA,CAAC;YACrB,UAAU,CAAC,IAAI,CAAC;QAEpB,KAAK,CAAC,QAAQ,CAAC,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;QACzD,KAAK,CAAC,QAAQ,CAAC,GAAG,GAAG,KAAK,CAAC,QAAQ,CAAC,IAAI,GAAG,MAAM,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC,CAAC;QAC/E,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,GAAG,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC;QACpD,KAAK,CAAC,QAAQ,CAAC,KAAK,GAAG,sBAAsB,CAAC;QAC9C,KAAK,CAAC,QAAQ,CAAC,QAAQ,GAAG,KAAK,CAAC;IACpC,CAAC;CACJ;AAxCD,sDAwCC;;;;;AC1CD,8CAA2C;AAC3C,wDAAqD;AAErD,MAAa,cAAc;IACvB,MAAM,CAAC,wBAAwB,CAAC,IAAkB;QAC9C,MAAM,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC;QAE5B,IAAI,UAAU,CAAC,UAAU,KAAK,QAAQ;YAAE,UAAU,CAAC,OAAO,GAAG,UAAU,CAAC,MAAM,CAAC;aAC1E,IAAI,UAAU,CAAC,UAAU,KAAK,QAAQ;YAAE,UAAU,CAAC,OAAO,GAAG,UAAU,CAAC,MAAM,CAAC;aAC/E;YACD,UAAU,CAAC,OAAO,GAAG,UAAU,CAAC,SAAS,CAAC;YAC1C,UAAU,CAAC,UAAU,GAAG,WAAW,CAAC;SACvC;QAED,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,GAAG,iBAAO,CAAC,SAAS,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAC3E,IAAI,UAAU,CAAC,IAAI;YAAE,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QACvD,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,gCAAgC;QAC5G,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,GAAG,GAAG,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC;QAEpE,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,GAAG,iBAAO,CAAC,SAAS,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IAC/E,CAAC;IAED,MAAM,CAAC,oBAAoB,CAAC,IAAkB;QAC1C,MAAM,EAAE,UAAU,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC;QAEnD,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC,SAAS,CAAC,KAAK,GAAG,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC;QACxF,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,GAAG,qBAAS,CAAC,aAAa,CAAC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAE,WAAW,EAAE,MAAM,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;QAE1I,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;QACnC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,GAAG,qBAAS,CAAC,aAAa,CAAC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAE,WAAW,EAAE,MAAM,CAAC,SAAS,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC;IACnJ,CAAC;IAED,MAAM,CAAC,iBAAiB,CAAC,IAAmC;QACxD,MAAM,EAAE,UAAU,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC;QAEnD,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC,SAAS,CAAC,KAAK,GAAG,CAAC,CAAC;QAC7D,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,GAAG,qBAAS,CAAC,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,WAAW,EAAE,MAAM,CAAC,SAAS,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;QAEtI,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;QAChC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,GAAG,qBAAS,CAAC,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,WAAW,EAAE,MAAM,CAAC,SAAS,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC;IAC/I,CAAC;IAED,MAAM,CAAC,iBAAiB,CAAC,IAAoC;QACzD,MAAM,EAAE,UAAU,EAAE,UAAU,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,IAAI,CAAC;QAC3D,IAAI,MAAM,EAAE;YAER,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC,SAAS,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,KAAK,CAAC;YAC7F,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,GAAG,qBAAS,CAAC,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,WAAW,EAAE,MAAM,CAAC,SAAS,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;YAEtI,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACvD,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,GAAG,qBAAS,CAAC,aAAa,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,WAAW,EAAE,MAAM,CAAC,SAAS,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC;SAC9I;IACL,CAAC;CACJ;AAlDD,wCAkDC;;;;;ACtDD,8CAA2C;AAC3C,wDAAqD;AAGrD,MAAa,QAAQ;IACjB;;;;OAIG;IACH,MAAM,CAAC,YAAY,CAAC,IAAmC,EAAE,KAA2B;QAChF,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC;QACvB,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC;QACf,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC;QAChB,KAAK,CAAC,GAAG,GAAG,EAAE,CAAC;QACf,KAAK,MAAM,OAAO,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,EAAE;YACxD,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;SACtB;QAED,MAAM,aAAa,GAAG,IAAI,qBAAS,CAAS,KAAK,CAAC,GAAG,CAAC,CAAC;QACvD,MAAM,aAAa,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,cAAc,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;QACzF,aAAa,aAAb,aAAa,uBAAb,aAAa,CAAE,OAAO,CAAC,CAAC,IAAI,EAAE,EAAE;YAC5B,sFAAsF;YACtF,IAAI,IAAI,CAAC,QAAQ,EAAE,EAAE;gBACjB,yCAAyC;gBACzC,IAAI,IAAI,CAAC,iBAAiB,EAAE,EAAE;oBAC1B,aAAa,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC;iBACrE;qBACI;oBACD,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;oBAClC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;iBAChC;aACJ;YAED,oEAAoE;YACpE,KAAK,MAAM,OAAO,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,EAAE;gBACxD,KAAK,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC,OAAO,CAAC,CAAC;aACtD;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC;YAAE,aAAa,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;QACnH,YAAY;QACZ,KAAK,CAAC,KAAK,GAAG,iBAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;IAC3C,CAAC;IACD;;;OAGG;IACH,MAAM,CAAC,eAAe,CAAC,IAAkB,EAAE,KAA2B;QAClE,MAAM,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC;QAC5B,MAAM,KAAK,GAAG,IAAI,qBAAS,EAAU,CAAC;QACtC,0DAA0D;QAC1D,KAAK;aACA,MAAM,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC;aACxD,OAAO,CAAC,CAAC,IAAI,EAAE,EAAE;YACd,IAAI,IAAI,CAAC,cAAc,EAAE,EAAE;gBACvB,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC;aACvE;QACL,CAAC,CAAC,CAAC;QACP,6CAA6C;QAC7C,MAAM,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;QAC7C,IAAI,UAAU,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,EAAE;YACzC,KAAK,CAAC,aAAa,CAAC,WAAW,EAAE,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC;SACxD;QAED,UAAU,CAAC,OAAO,CAAC,IAAI,GAAG,CAAC,CAAC;QAC5B,UAAU,CAAC,OAAO,CAAC,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC;QACpC,UAAU,CAAC,OAAO,CAAC,KAAK,GAAG,iBAAO,CAAC,SAAS,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;IACrE,CAAC;CACJ;AAjED,4BAiEC;;;;;ACtED,wDAAqD;AACrD,8CAA2C;AAE3C,MAAa,UAAU;IACnB,MAAM,CAAC,aAAa,CAAC,IAAkB;QACnC,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC;QAEnC,eAAe;QACf,MAAM,CAAC,QAAQ,CAAC,GAAG,GAAG,qBAAS,CAAC,aAAa,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,EAAE,WAAW,EAAE,MAAM,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;QACrH,MAAM,CAAC,MAAM,CAAC,GAAG,GAAG,qBAAS,CAAC,aAAa,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,WAAW,EAAE,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;QAC/G,MAAM,CAAC,MAAM,CAAC,GAAG,GAAG,qBAAS,CAAC,aAAa,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,WAAW,EAAE,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;QAE/G,eAAe;QACf,KAAK,IAAI,CAAC,QAAQ,EAAE,UAAU,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;YACvD,iBAAO,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;YAC9B,UAAU,CAAC,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;SAClD;IACL,CAAC;IAED,MAAM,CAAC,8BAA8B,CAAC,IAAkB;QAEpD,MAAM,EAAE,MAAM,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC;QAEpC,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,UAAU,CAAC,QAAQ,CAAC,KAAK,GAAG,UAAU,CAAC,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;QAC1H,MAAM,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,UAAU,CAAC,KAAK,CAAC,KAAK,GAAG,UAAU,CAAC,SAAS,CAAC,KAAK,GAAG,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;QAC3H,MAAM,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,UAAU,CAAC,QAAQ,CAAC,KAAK,GAAG,UAAU,CAAC,SAAS,CAAC,KAAK,GAAG,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;IAEhI,CAAC;CACJ;AAzBD,gCAyBC;;;;;AC3BD,8CAA2C;AAE3C,wDAAqD;AAErD,MAAa,UAAU;IACnB;;;;OAIG;IACH,MAAM,CAAC,aAAa,CAAC,SAAyC,EAAE,KAA2B;QACvF,MAAM,EAAE,MAAM,EAAE,UAAU,EAAE,GAAG,SAAS,CAAC;QAEzC,MAAM,UAAU,GAAG,CAAC,UAAU,EAAE,QAAQ,EAAE,iBAAiB,EAAE,QAAQ,CAAC,CAAC;QAEvE,gCAAgC;QAChC,UAAU,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE;YACvB,MAAM,KAAK,GAAG,IAAI,qBAAS,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YAC7C,KAAK,CAAC,aAAa,CAAC,eAAe,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC;YACvD,uDAAuD;YACvD,KAAK,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;YAC9B,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC;YAC7B,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;QACpC,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,iBAAiB,CAAC,GAAG,GAAG,CAAC,CAAC;QACjC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;QAClB,MAAM,CAAC,IAAI,GAAG,EAAE,CAAC;QACjB,MAAM,CAAC,MAAM,GAAG,EAAE,CAAC;QACnB,MAAM,CAAC,iBAAiB,CAAC,KAAK,GAAG,sBAAsB,CAAC;QAExD,iGAAiG;QACjG,MAAM,MAAM,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;QAE1E,IAAI,MAAM,EAAE;YACR,MAAM,gBAAgB,GAAG,MAAM,CAAC,mBAAmB,EAAE,CAAC;YACtD,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,KAAK,EAAE,CAAC;YAC/B,MAAM,CAAC,iBAAiB,CAAC,GAAG,GAAG,gBAAgB,CAAC,GAAG,CAAC;YACpD,MAAM,CAAC,iBAAiB,CAAC,KAAK,GAAG,gBAAgB,CAAC,KAAK,CAAC;YACxD,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,SAAS,EAAE,CAAC;YACnC,MAAM,CAAC,YAAY,GAAG,MAAM,CAAC,WAAW,EAAE,CAAC;YAC3C,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC,OAAO,EAAE,CAAC;YAC/B,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC,OAAO,EAAE,CAAC;YAC/B,MAAM,UAAU,GAAG,MAAM,CAAC,OAAO,EAAE,CAAC;YACpC,IAAI,UAAU,EAAE;gBACZ,mDAAmD;gBACnD,KAAK,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;oBACnD,IAAI,KAAK,IAAI,MAAM,CAAC,GAAG,CAAC,EAAE;wBACtB,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC;wBAC/B,MAAM,CAAC,GAAG,CAAC,CAAC,UAAU,GAAG,KAAK,CAAC,UAAU,CAAC;qBAC7C;iBACJ;aACJ;SACJ,CAAC,gDAAgD;aAC7C,IAAI,SAAS,CAAC,OAAO,KAAK,WAAW,EAAE;YACxC,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,iBAAO,CAAC,SAAS,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;YAC/D,MAAM,CAAC,eAAe,CAAC,IAAI,GAAG,iBAAO,CAAC,SAAS,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YAClE,MAAM,CAAC,MAAM,GAAG,iBAAO,CAAC,SAAS,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;YACxD,MAAM,CAAC,MAAM,CAAC,IAAI,GAAG,iBAAO,CAAC,SAAS,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;YAC5D,MAAM,CAAC,MAAM,CAAC,IAAI,GAAG,iBAAO,CAAC,SAAS,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;YAC7D,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC;SACzD;QAED,sDAAsD;QACtD,IAAI,MAAM,CAAC,iBAAiB,CAAC,KAAK,GAAG,MAAM,CAAC,iBAAiB,CAAC,GAAG,EAAE;YAC/D,MAAM,CAAC,iBAAiB,CAAC,KAAK,GAAG,MAAM,CAAC,iBAAiB,CAAC,GAAG,CAAC;SACjE;IACL,CAAC;IAED;;;OAGG;IACH,MAAM,CAAC,kCAAkC,CAAC,IAAoC;QAC1E,MAAM,EAAE,MAAM,EAAE,UAAU,EAAE,MAAM,EAAE,GAAG,IAAI,CAAC;QAC5C,MAAM,UAAU,GAAG,CAAC,UAAU,EAAE,QAAQ,EAAE,iBAAiB,EAAE,QAAQ,CAAC,CAAC;QAEvE,wEAAwE;QACxE,UAAU,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE;YACvB,iBAAO,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;YAC/B,IAAI,MAAM,CAAC,GAAG,CAAC,EAAE;gBACb,MAAM,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;gBAC/C,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;gBACzC,MAAM,MAAM,GAAG,IAAI,CAAC;gBAEpB,MAAM,CAAC,GAAG,CAAC,GAAG;oBACV,KAAK;oBACL,IAAI;oBACJ,GAAG;oBACH,KAAK;oBACL,MAAM;iBACT,CAAC;gBACF,UAAU,CAAC,GAAG,CAAC,GAAG;oBACd,KAAK;oBACL,IAAI;oBACJ,GAAG;oBACH,KAAK;oBACL,MAAM;iBACT,CAAC;aACL;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAED;;;OAGG;IACH,MAAM,CAAC,0BAA0B,CAAC,IAAoC;QAClE,MAAM,EAAE,MAAM,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC;QACpC,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,IAAI,CAAC,CAAC;QAClC,MAAM,gBAAgB,GAAG,CAAC,WAAW,EAAE,OAAO,EAAE,UAAU,EAAE,WAAW,CAAC,CAAC;QAEzE,gBAAgB,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE,EAAE;YAClC,IAAI,UAAU,CAAC,QAAQ,CAAC,KAAK,SAAS,EAAE;gBACpC,UAAU,CAAC,QAAQ,CAAC,CAAC,IAAI,GAAG,MAAM,CAAC;gBACnC,iBAAO,CAAC,SAAS,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC;aAC3C;QACL,CAAC,CAAC,CAAC;QACH,MAAM,KAAK,GAAG,CAAC,UAAU,EAAE,iBAAiB,CAAC,CAAC;QAC9C,KAAK,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,EAAE;YACpB,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,GAAG,MAAM,CAAC;QAChC,CAAC,CAAC,CAAC;QACH,CAAC,GAAG,KAAK,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,EAAE;YAC7C,iBAAO,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;IACP,CAAC;CACJ;AAzHD,gCAyHC;;;;;AC7HD,MAAa,aAAa;IACtB;;OAEG;IACH,MAAM,CAAC,gBAAgB,CAAC,IAAkB;QACtC,IAAI,CAAC,IAAI,CAAC,SAAS;YAAE,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACzC,MAAM,SAAS,GAAG,EAAE,CAAC;QACrB,IAAI,gBAAgB,GAAG;YACnB,MAAM;YACN,OAAO;YACP,OAAO;YACP,gBAAgB;YAChB,cAAc;YACd,cAAc;YACd,YAAY;YACZ,gBAAgB;YAChB,iBAAiB;YACjB,sBAAsB;YACtB,mBAAmB;YACnB,wBAAwB;YACxB,mBAAmB;YACnB,wBAAwB;YACxB,WAAW;YACX,YAAY;YACZ,kBAAkB;YAClB,QAAQ;YACR,MAAM;YACN,KAAK;YACL,SAAS;YACT,iBAAiB;YACjB,SAAS;YACT,MAAM;SACT,CAAC;QACF,gBAAgB,CAAC,IAAI,EAAE,CAAC;QACxB,0BAA0B;QAC1B,gBAAgB,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QAEnC,KAAK,IAAI,IAAI,IAAI,gBAAgB,EAAE;YAC/B,SAAS,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC;SACvD;QAED,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;IAC/B,CAAC;IAED,MAAM,CAAC,kBAAkB,CAAC,IAAkB;QACxC,MAAM,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC;QAC5B,KAAK,MAAM,CAAC,EAAE,SAAS,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;YACpD,SAAS,CAAC,GAAG,GAAG,EAAE,CAAC;SACtB;IACL,CAAC;CACJ;AAlDD,sCAkDC;;;;;ACjDD,MAAa,YAAY;IACrB,MAAM,CAAC,eAAe,CAAC,IAAsC;QACzD,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC;QACvC,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC/B,kDAAkD;QAClD,QAAQ,CAAC,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QACjF,QAAQ,CAAC,GAAG,CAAC,KAAK,GAAG,UAAU,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IACnF,CAAC;CACJ;AARD,oCAQC;;;;;ACVD,0DAAqD;AACrD,8CAAyC;AACzC,kDAAoD;AACpD,wDAAmD;AAEnD,MAAa,OAAO;IAChB,MAAM,CAAC,cAAc,CAAC,IAAwB;QAC1C,wGAAwG;QACxG,OAAO,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;IACzC,CAAC;IAED;;OAEG;IACH,MAAM,CAAC,sBAAsB,CAAC,IAAwB;;QAClD,MAAM,EAAC,QAAQ,EAAC,GAAG,IAAI,CAAC;QACxB,IAAI,SAAS,GAAG,6BAAa,CAAC,KAAK,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC;QACjE,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC;QAEvC,MAAM,EAAC,UAAU,EAAC,GAAG,IAAI,CAAC;QAE1B,KAAK,MAAM,CAAC,KAAK,EAAE,SAAS,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;YACzD,4GAA4G;YAC5G,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE;gBAC3B,OAAO,CAAC,KAAK,CAAC,uDAAuD,EAAE,SAAS,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;aACxH;iBAAM;gBACH,MAAM,QAAQ,GAAG,MAAA,SAAS,aAAT,SAAS,uBAAT,SAAS,CAAE,UAAU,0CAAG,KAAK,CAAC,CAAC;gBAChD,MAAM,KAAK,GAAG,IAAI,qBAAS,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;gBAC3C,KAAK,CAAC,UAAU,CAAC,4BAAgB,CAAC,CAAC;gBAEnC,IAAI,IAAI,CAAC,MAAM,IAAI,QAAQ,EAAE;oBACzB,KAAK,CAAC,OAAO,CAAC,4BAAgB,EAAE,QAAQ,CAAC,CAAC;iBAC7C;gBAED,SAAS,CAAC,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC;gBAE3B,oCAAoC;gBACpC,qEAAqE;gBACrE,iBAAO,CAAC,SAAS,CAAC,SAAS,EAAE,EAAC,GAAG,EAAE,CAAC,EAAC,CAAC,CAAC;aAC1C;SACJ;IACL,CAAC;IAED,MAAM,CAAC,+BAA+B,CAAC,KAAK;QACxC,OAAO;YACH,IAAI,EAAE,4BAAgB;YACtB,KAAK,EAAE,KAAe;SACzB,CAAA;IACL,CAAC;CACJ;AA5CD,0BA4CC;;;;;ACjDD,8CAA2C;AAC3C,wDAAqD;AAGrD,MAAa,UAAU;IACnB;;OAEG;IACH,MAAM,CAAC,aAAa,CAAC,IAAkB;QACnC,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC;QACpD,IAAI,QAAQ,EAAE;YACV,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE;gBACjB,QAAQ,CAAC,KAAK,GAAG,EAAE,CAAC;aACvB;YAED,0DAA0D;YAC1D,yEAAyE;YACzE,gFAAgF;YAChF,IAAI,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,QAAQ,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,EAAE;gBAC7D,QAAQ,CAAC,KAAK,GAAG,EAAE,CAAC;aACvB;YAED,QAAQ,CAAC,SAAS,GAAG,WAAW,CAAC;SACpC;QAED,wDAAwD;QACxD,MAAM,YAAY,GAAG,CAAC,KAAK,EAAE,EAAE;;YAC3B,KAAK,CAAC,GAAG,GAAG,EAAE,CAAC;YACf,IAAI,CAAC,KAAK,CAAC,IAAI;gBAAE,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC;YAChC,IAAI,MAAA,KAAK,CAAC,KAAK,0CAAE,MAAM,EAAE;gBACrB,KAAK,IAAI,KAAK,IAAI,KAAK,CAAC,KAAK,EAAE;oBAC3B,KAAK,CAAC,GAAG,GAAG,qBAAS,CAAC,aAAa,CAAC,KAAK,CAAC,GAAG,EAAE,KAAK,CAAC,GAAG,EAAE,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;iBAClF;aACJ;YACD,KAAK,CAAC,KAAK,GAAG,iBAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YAEvC,0CAA0C;YAC1C,oCAA4B,CAAC,KAAK,CAAC,CAAC;QACxC,CAAC,CAAC;QAEF,sBAAsB;QACtB,KAAK,MAAM,KAAK,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE;YACvC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;gBACf,YAAY,CAAC,KAAK,CAAC,CAAC;aACvB;SACJ;QAED,MAAM,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QAC3D,qFAAqF;QACrF,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,CAAkC,EAAE,EAAE,CAAC,GAAG,CAAC,OAAO,IAAI,OAAO,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;QAExH,KAAK,IAAI,KAAK,IAAI,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;YAC7C,YAAY,CAAC,KAAK,CAAC,CAAC;YACpB,KAAK,CAAC,SAAS,GAAG,WAAW,CAAC;SACjC;QAED,yBAAyB;QACzB,KAAK,IAAI,CAAC,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;YAC7C,MAAM,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YAC5C,qFAAqF;YACrF,KAAK,CAAC,KAAK,GAAG,OAAO;iBAChB,MAAM,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC;iBACjC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE,EAAE;gBACzB,YAAY,CAAC,KAAK,CAAC,CAAC;gBAEpB,iCAAiC;gBACjC,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC,SAAS,CAAC;gBAClC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC;gBAChB,OAAO,GAAG,CAAC;YACf,CAAC,EAAE,EAAE,CAAC,CAAC;SACd;QAED,eAAe;QACf,KAAK,IAAI,CAAC,QAAQ,EAAE,UAAU,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;YACvD,UAAU,CAAC,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;SACxD;IACL,CAAC;CACJ;AAzED,gCAyEC;AAED;;;;;GAKG;AACI,MAAM,4BAA4B,GAAG,CAAC,UAAU,EAAE,EAAE;IACvD,+EAA+E;IAC/E,MAAM,QAAQ,GAAG;QACb,IAAI,EAAE,EAAE;QACR,IAAI,EAAE,EAAE;QACR,KAAK,EAAE,CAAC;QACR,SAAS,EAAE,EAAE;QACb,GAAG,EAAE,EAAE;QACP,KAAK,EAAE,EAAE;QACT,MAAM,EAAE,KAAK;KAChB,CAAC;IAEF,2EAA2E;IAC3E,4EAA4E;IAC5E,kBAAkB;IAClB,mFAAmF;IACnF,WAAW,CAAC,UAAU,EAAE,QAAQ,EAAE,EAAC,SAAS,EAAE,KAAK,EAAC,CAAC,CAAC;AAC1D,CAAC,CAAA;AAjBY,QAAA,4BAA4B,gCAiBxC;;;;;ACnGD,MAAa,UAAU;IACnB,MAAM,CAAC,aAAa,CAAC,IAAwD;QACzE,MAAM,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC;QAClC,MAAM,KAAK,GAAG,CAAC,GAAG,MAAM,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC,CAAC;QACvD,MAAM,UAAU,GAAG,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC;QAClF,MAAM,cAAc,GAAG,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC;QAE9F,KAAK,CAAC,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC;QAC/B,KAAK,CAAC,QAAQ,CAAC,MAAM,GAAG,cAAc,CAAC;QAEvC,IAAI,CAAC,MAAM,GAAG;YACV,KAAK,EAAE,UAAU,GAAG,cAAc;SACrC,CAAC;IACN,CAAC;CACJ;AAdD,gCAcC;;;;;AClBD,4CAAgD;AAEhD,MAAa,oBAAqB,SAAQ,WAAW;IACjD,IAAI,QAAQ;QACR,OAAO,wDAAwD,CAAC;IACpE,CAAC;IAED,MAAM,KAAK,cAAc;QACrB,MAAM,OAAO,GAAG,KAAK,CAAC,cAAc,CAAC;QACrC,OAAO,CAAC,OAAO,GAAG,CAAC,aAAa,CAAC,CAAC;QAClC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,gCAAgC,CAAC,CAAC;QACrE,OAAO,CAAC,KAAK,GAAG,GAAG,CAAC;QACpB,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC;QACxB,OAAO,OAAO,CAAC;IACnB,CAAC;IAED,MAAM,CAAC,KAAe,EAAE,OAAmC;QACvD,oBAAoB,CAAC,0BAA0B,EAAE,CAAC;QAClD,OAAO,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;IACxC,CAAC;IAED,gDAAgD;IACxC,MAAM,CAAC,0BAA0B;QACrC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,wBAAwB,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IAC7F,CAAC;IAED,MAAM,KAAK,eAAe;QACtB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS;YAAE,OAAO,KAAK,CAAC;QAE1D,MAAM,eAAe,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,wBAAwB,CAAC,CAAC;QACvF,OAAO,eAAe,KAAK,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;IACxD,CAAC;CACJ;AA9BD,oDA8BC;;;;;;;;;;;;;;AChCD,4CAAyC;AACzC,wCAAmC;AACnC,gDAA2C;AAC3C,gDAA2C;AAK3C;;GAEG;AACH,MAAa,uBAAwB,SAAQ,WAAW;IAIpD,YAAY,MAA0B;QAClC,KAAK,EAAE,CAAC;QAER,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACzB,CAAC;IAED,IAAI,QAAQ;QACR,OAAO,4DAA4D,CAAC;IACxE,CAAC;IAED,MAAM,KAAK,cAAc;QACrB,MAAM,OAAO,GAAG,KAAK,CAAC,cAAc,CAAC;QACrC,OAAO,CAAC,OAAO,GAAG,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC;QACzC,OAAO,CAAC,EAAE,GAAG,2BAA2B,CAAC;QACzC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,mCAAmC,CAAC,CAAC;QACxE,OAAO,CAAC,KAAK,GAAG,MAAM,CAAC,CAAC,oDAAoD;QAC5E,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC;QACxB,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;QACzB,OAAO,OAAO,CAAC;IACnB,CAAC;IAEK,OAAO,CAAC,OAAgB;;;;;YAC1B,MAAM,IAAI,GAAG,OAAM,OAAO,YAAC,OAAO,CAAC,CAAC;YAEpC,IAAI,CAAC,SAAS,GAAG,MAAM,IAAI,CAAC,aAAa,EAAE,CAAC;YAE5C,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,MAAM,CAAC;YAClD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC;YAEhD,IAAI,CAAC,MAAM,GAAG,qBAAS,CAAC,8BAA8B,EAAE,CAAC;YAEzD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAC7C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;YACnC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAEhD,OAAO,IAAI,CAAC;QAChB,CAAC;KAAA;IAES,iBAAiB,CAAC,IAA0B;QAClD,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACvF,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,qCAAqC,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,gCAAgC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACtH,CAAC;IAEK,qBAAqB,CAAC,KAAY;;YACpC,KAAK,CAAC,cAAc,EAAE,CAAC;YAEvB,4CAA4C;YAC5C,MAAM,OAAO,GAAG,KAAK,CAAC,aAA4B,CAAC;YAEnD,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK;gBAAE,OAAO;YAEhE,MAAM,QAAQ,GAAG,OAAO,CAAC,OAAO,CAAC,QAAiD,CAAC;YACnF,MAAM,KAAK,GAAG,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;YAE5C,8BAA8B;YAC9B,IAAI,CAAC,6BAA6B,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;YAEpD,MAAM,IAAI,CAAC,qCAAqC,EAAE,CAAC;YACnD,MAAM,IAAI,CAAC,uBAAuB,EAAE,CAAC;YAErC,IAAI,CAAC,2BAA2B,EAAE,CAAC;YAEnC,MAAM,IAAI,CAAC,MAAM,EAAE,CAAC;QACxB,CAAC;KAAA;IAED;;;OAGG;IACH,2BAA2B;QACvB,IAAI,IAAI,CAAC,MAAM,YAAY,mBAAQ,EAAE;YACjC,CAAC,CAAC,+BAA+B,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE;gBACvD,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YACnE,CAAC,CAAC,CAAC;SACN;IACL,CAAC;IAEK,gCAAgC,CAAC,KAAY;;YAC/C,KAAK,CAAC,cAAc,EAAE,CAAC;YAEvB,MAAM,IAAI,CAAC,sBAAsB,EAAE,CAAC;YAEpC,IAAI,CAAC,2BAA2B,EAAE,CAAC;YAEnC,MAAM,IAAI,CAAC,MAAM,EAAE,CAAC;QACxB,CAAC;KAAA;IAED;OACG;IACH,6BAA6B,CAAC,QAA+C,EAAE,KAAa;QACxF,IAAI,CAAC,SAAS,CAAC,2BAA2B,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;IAChE,CAAC;IAED;OACG;IACG,aAAa;;YACf,wGAAwG;YACxG,2CAA2C;YAC3C,IAAI,IAAI,CAAC,MAAM,YAAY,mBAAQ,EAAE;gBACjC,OAAO,MAAM,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC;aAC3C;YACD,qDAAqD;YACrD,OAAO,MAAM,qBAAS,CAAC,sBAAsB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC/D,CAAC;KAAA;IAEK,uBAAuB;;YACzB,MAAM,qBAAS,CAAC,oBAAoB,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAC3E,CAAC;KAAA;IAED;OACG;IACG,qCAAqC;;YACvC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,sBAAsB,EAAE;gBACxC,IAAI,CAAC,SAAS,GAAG,MAAM,qBAAS,CAAC,0BAA0B,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aAC5E;QACL,CAAC;KAAA;IAEK,gCAAgC;;YAClC,MAAM,SAAS,GAAG,MAAM,qBAAS,CAAC,sBAAsB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACtE,OAAO,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC;QACrC,CAAC;KAAA;IAEK,sBAAsB;;YACxB,MAAM,qBAAS,CAAC,0BAA0B,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACxD,iHAAiH;YACjH,IAAI,CAAC,SAAS,GAAG,MAAM,IAAI,CAAC,aAAa,EAAE,CAAC;QAChD,CAAC;KAAA;IAED,mBAAmB;QACf,IAAI,IAAI,CAAC,MAAM,YAAY,KAAK,EAAE;YAC9B,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;SAC7C;QACD,IAAI,IAAI,CAAC,MAAM,YAAY,mBAAQ,EAAE;YACjC,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;SAC7C;QAED,OAAO,EAAE,CAAC;IACd,CAAC;IAED;;OAEG;IACH,qBAAqB;QACjB,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,YAAY,mBAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;QAC3E,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,MAAM,CAAC,KAAK,CAAC,CAAC;IAC7C,CAAC;IAED,MAAM,CAAO,mBAAmB;;YAC5B,IAAI,CAAC,MAAM,CAAC,KAAK;gBAAE,OAAO;YAC1B,MAAM,IAAI,uBAAuB,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACjE,CAAC;KAAA;IAED;;;OAGG;IACH,MAAM,CAAC,eAAe,CAAC,OAAe;QAClC,MAAM,KAAK,GAAG,iBAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QAExC,uFAAuF;QACvF,OAAO,CAAO,KAAK,EAAE,EAAE;YACnB,KAAK,CAAC,cAAc,EAAE,CAAC;YAEvB,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,KAAK;gBAAE,OAAO;YAEnC,MAAM,IAAI,uBAAuB,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAChE,CAAC,CAAA,CAAA;IACL,CAAC;IAED;OACG;IACH,MAAM,CAAC,UAAU;QACb,OAAO;YACH,IAAI,EAAE,qCAAqC;YAC3C,KAAK,EAAE,qCAAqC;YAC5C,IAAI,EAAE,aAAa;YACnB,OAAO,EAAE,uBAAuB,CAAC,mBAAmB;YACpD,MAAM,EAAE,IAAI;SACf,CAAA;IACL,CAAC;IAED,sDAAsD;IACtD,MAAM,CAAO,iBAAiB,CAAC,GAAa,EAAE,IAAY,EAAE,IAAI;;YAC5D,IAAI,CAAC,IAAI,CAAC,GAAG;gBAAE,OAAO;YAEtB,OAAO,CAAC,GAAG,CAAC,GAAG,uBAAW,iDAAiD,CAAC,CAAC;YAE7E,MAAM,KAAK,GAAG,iBAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YACzC,IAAI,CAAC,KAAK;gBAAE,OAAO;YAEnB,MAAM,KAAK,GAAG,KAAK,CAAC,KAAiB,CAAC;YACtC,MAAM,SAAS,GAAG,MAAM,KAAK,CAAC,YAAY,EAAE,CAAC;YAE7C,uCAAuC;YACvC,MAAM,SAAS,GAAG,CAAC,CAAC,yDAAyD,CAAC,CAAC;YAC/E,MAAM,MAAM,GAAG,CAAC,CAAC,yCAAyC,CAAC,CAAC;YAC5D,MAAM,QAAQ,GAAG,CAAC,CAAC,kCAAkC,CAAC,CAAC;YACvD,MAAM,aAAa,GAAG,CAAC,CAAC,4DAA4D,SAAS,CAAC,aAAa,CAAC,KAAK,QAAQ,CAAC,CAAC;YAC3H,MAAM,mBAAmB,GAAG,CAAC,CAAC,iEAAiE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,yBAAyB,CAAC,QAAQ,CAAC,CAAC;YACtJ,mBAAmB,CAAC,EAAE,CAAC,OAAO,EAAE,uBAAuB,CAAC,eAAe,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;YAEnF,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YACzB,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;YACxB,QAAQ,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;YAC/B,QAAQ,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC;YAErC,mFAAmF;YACnF,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;QAC7C,CAAC;KAAA;CACJ;AArND,0DAqNC;;;;;;;;;;;;;;;AChOD;;IAEa,W;;;;;;;gCAEG,W,EAAa;AAAA;;AACrB,UAAM,MAAM,GAAG,mCAAS,WAAW,CAAC,MAAZ,CAAmB,KAA5B,CAAf;AACA,UAAM,YAAY,GAAG,EAArB;AACA,MAAA,MAAM,CAAC,OAAP,CAAe,UAAC,YAAD,EAAkB;AAC7B,YAAI;AACA,cAAM,QAAQ,GAAG,KAAI,CAAC,UAAL,CAAgB,YAAhB,CAAjB;;AACA,UAAA,YAAY,CAAC,IAAb,CAAkB,QAAlB;AACH,SAHD,CAGE,OAAO,CAAP,EAAU;AACR,UAAA,OAAO,CAAC,KAAR,CAAc,CAAd;AACH;AACJ,OAPD;AASA,aAAO,YAAP;AACH;;;+BAEU,Y,EAAc;AACrB,UAAM,IAAI,GAAG,EAAb;AACA,UAAM,KAAK,GAAG,EAAd;AACA,MAAA,IAAI,CAAC,KAAL,GAAa,KAAb;AAEA,UAAI,IAAI,GAAG,EAAX;AACA,MAAA,KAAK,CAAC,GAAN,GAAY,YAAY,CAAC,KAAb,CAAmB,QAAnB,CAA4B,GAA5B,CAAZ;AACA,MAAA,KAAK,CAAC,KAAN,GAAc,QAAQ,CAAC,YAAY,CAAC,KAAb,CAAmB,OAAnB,CAA2B,GAA3B,EAAgC,EAAhC,CAAD,CAAtB;AACA,UAAI,YAAY,CAAC,WAAjB,EACI,IAAI,GAAG,YAAY,CAAC,WAApB;AAEJ,MAAA,OAAO,CAAC,GAAR,CAAY,YAAZ;;AACA,UAAI,YAAY,CAAC,SAAb,IAA0B,YAAY,CAAC,SAAb,CAAuB,QAArD,EAA+D;AAC3D,QAAA,KAAK,CAAC,IAAN,GAAa,CAAb;AACA,QAAA,KAAK,CAAC,WAAN,GAAoB,CAApB;AACA,QAAA,KAAK,CAAC,IAAN,GAAa,CAAb;AACA,QAAA,KAAK,CAAC,IAAN,GAAa,CAAb;AACA,QAAA,KAAK,CAAC,SAAN,GAAkB,CAAlB;AAEA,YAAM,OAAO,GAAG,EAAhB;AACA,YAAM,IAAI,GAAG,mCAAS,YAAY,CAAC,SAAb,CAAuB,QAAhC,CAAb;AACA,QAAA,IAAI,CAAC,OAAL,CAAa,UAAC,GAAD,EAAS;AAClB,cAAI,GAAG,CAAC,IAAJ,CAAS,WAAT,GAAuB,QAAvB,CAAgC,iBAAhC,CAAJ,EAAwD;AACpD,YAAA,KAAK,CAAC,IAAN,IAAc,QAAQ,CAAC,GAAG,CAAC,MAAL,CAAtB;AACH,WAFD,MAEO,IAAI,GAAG,CAAC,IAAJ,CAAS,WAAT,GAAuB,QAAvB,CAAgC,iBAAhC,CAAJ,EAAwD;AAC3D,YAAA,KAAK,CAAC,WAAN,IAAqB,QAAQ,CAAC,GAAG,CAAC,MAAL,CAA7B;AACH,WAFM,MAEA,IAAI,GAAG,CAAC,IAAJ,CAAS,WAAT,GAAuB,QAAvB,CAAgC,YAAhC,CAAJ,EAAmD;AACtD,YAAA,KAAK,CAAC,IAAN,IAAc,QAAQ,CAAC,GAAG,CAAC,MAAL,CAAtB;AACH,WAFM,MAEA,IAAI,GAAG,CAAC,IAAJ,CAAS,WAAT,GAAuB,QAAvB,CAAgC,qBAAhC,CAAJ,EAA4D;AAC/D,YAAA,KAAK,CAAC,SAAN,IAAmB,QAAQ,CAAC,GAAG,CAAC,MAAL,CAA3B;AACH;;AACD,cAAI,GAAG,CAAC,MAAJ,KAAe,EAAnB,EAAuB;AACnB,YAAA,OAAO,CAAC,IAAR,WAAgB,GAAG,CAAC,IAApB,eAA6B,GAAG,CAAC,MAAjC;AACH,WAFD,MAEO;AACH,YAAA,OAAO,CAAC,IAAR,CAAa,GAAG,CAAC,IAAjB;AACH;AACJ,SAfD;;AAgBA,YAAI,OAAO,CAAC,MAAR,GAAiB,CAArB,EAAwB;AACpB;AACA,UAAA,IAAI,aAAM,OAAO,CAAC,IAAR,CAAa,GAAb,CAAN,iBAA8B,IAA9B,CAAJ;AACH;AACJ;;AAED,MAAA,IAAI,CAAC,UAAL,GAAkB,0CAAgB,YAAhB,CAAlB;AACA,MAAA,IAAI,CAAC,WAAL,GAAmB,2CAAiB,YAAjB,CAAnB;AAEA,aAAO,yCAAe,YAAY,CAAC,IAA5B,EAAkC,OAAlC,EAA2C,IAA3C,CAAP;AACH;;;;;;;;;;;;;;;AClEL;;AAEO,IAAM,SAAS,GAAG,SAAZ,SAAY,CAAC,GAAD,EAAS;AAC9B,MAAM,KAAK,GAAG,0BAAd;AACA,MAAM,CAAC,GAAG,GAAG,CAAC,KAAJ,CAAU,KAAV,CAAV;AACA,SAAO,CAAC,IAAI,CAAC,GAAD,CAAZ;AACH,CAJM;;;;AAMA,IAAM,QAAQ,GAAG,SAAX,QAAW,CAAC,KAAD,EAAW;AAC/B,SAAO,KAAK,CAAC,OAAN,CAAc,KAAd,IAAuB,KAAvB,GAA+B,CAAC,KAAD,CAAtC;AACH,CAFM;AAIP;;;;;;;;AAIO,IAAM,gBAAgB,GAAG,SAAnB,gBAAmB,CAAC,YAAD,EAAkB;AAC9C,MAAM,iBAAiB,GAAG,6BAAc,eAAd,EAA1B;;AAEA,MAAI,YAAY,CAAC,MAAb,IAAuB,YAAY,CAAC,IAAxC,EAA8C;AAC1C,IAAA,iBAAiB,CAAC,MAAlB,aAA8B,YAAY,CAAC,MAA3C,cAAqD,YAAY,CAAC,IAAlE;AACH;;AAED,MAAI,YAAY,CAAC,WAAjB,EAA8B;AAC1B,IAAA,iBAAiB,CAAC,KAAlB,GAA0B,UAAU,CAAC,UAAX,CAAsB,YAAY,CAAC,WAAnC,CAA1B;AACH;;AAED,SAAO,iBAAP;AACH,CAZM;AAcP;;;;;;;;AAIO,IAAM,eAAe,GAAG,SAAlB,eAAkB,CAAC,YAAD,EAAkB;AAC7C,MAAM,gBAAgB,GAAG,6BAAc,cAAd,EAAzB;;AAEA,MAAI,YAAY,CAAC,MAAjB,EAAyB;AACrB,IAAA,gBAAgB,CAAC,MAAjB,GAA0B,YAAY,CAAC,MAAvC;AACH;;AAED,MAAI,YAAY,CAAC,KAAjB,EAAwB;AACpB,IAAA,gBAAgB,CAAC,YAAjB,GAAgC,YAAY,CAAC,KAA7C;AACH;;AAED,MAAI,YAAY,CAAC,GAAjB,EAAsB;AAClB,IAAA,gBAAgB,CAAC,QAAjB,GAA4B,YAAY,CAAC,GAAzC;AACH;;AAED,MAAI,YAAY,CAAC,IAAjB,EAAuB;AACnB,IAAA,gBAAgB,CAAC,IAAjB,GAAwB,UAAU,CAAC,YAAY,CAAC,IAAb,CAAkB,OAAlB,CAA0B,YAA1B,EAAwC,EAAxC,CAAD,CAAlC;AACH;;AAED,MAAI,YAAY,CAAC,QAAb,IAAyB,YAAY,CAAC,QAAb,CAAsB,WAAtB,OAAwC,MAArE,EAA6E;AACzE,IAAA,gBAAgB,CAAC,QAAjB,GAA4B,IAA5B;AACH;;AAED,MAAI,YAAY,CAAC,gBAAjB,EAAmC;AAC/B,IAAA,gBAAgB,CAAC,iBAAjB,CAAmC,GAAnC,GAAyC,MAAM,CAAC,YAAY,CAAC,gBAAd,CAA/C;AACH;;AAED,MAAI,YAAY,CAAC,OAAjB,EAA0B;AACtB,IAAA,gBAAgB,CAAC,OAAjB,CAAyB,IAAzB,GAAgC,MAAM,CAAC,YAAY,CAAC,OAAd,CAAtC;AACH;;AAED,SAAO,gBAAP;AACH,CAhCM;;;;AAkCA,IAAM,cAAc,GAAG,SAAjB,cAAiB,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAsB;AAChD,SAAO;AACH,IAAA,IAAI,EAAE,IADH;AAEH,IAAA,GAAG,EAAE,EAFF;AAGH,IAAA,MAAM,EAAE,EAHL;AAIH,IAAA,KAAK,EAAE,EAJJ;AAKH,IAAA,GAAG,EAAE,2BALF;AAMH,IAAA,IAAI,EAAE,IANH;AAOH,IAAA,IAAI,EAAJ,IAPG;AAQH,IAAA,UAAU,EAAE;AACR,iBAAS;AADD;AART,GAAP;AAYH,CAbM;;;;;;;;;;;;;;;;;;;;;;ACpEP;;AACA;;AAEA;;;IAGa,iB;;;;;;;;AAET;;;;;;;mIAM6B,K,EAAO,W,EAAa,a;;;;;;AAC7C,gBAAA,OAAO,CAAC,GAAR,CAAY,iDAAZ;AACA,gBAAA,OAAO,CAAC,GAAR,CAAY,WAAZ;AAEA,gBAAA,OAAO,CAAC,GAAR,CAAY,qCAAZ;AACA,gBAAA,OAAO,CAAC,GAAR,CAAY,aAAZ;;sBAEI,CAAC,WAAW,CAAC,UAAb,IAA2B,CAAC,WAAW,CAAC,UAAZ,CAAuB,S;;;;;AACnD,gBAAA,OAAO,CAAC,GAAR,CAAY,6DAAZ;;;;AAIE,gBAAA,gB,GAAmB,WAAW,CAAC,UAAZ,CAAuB,S;AAC1C,gBAAA,gB,GAAmB,IAAI,0CAAJ,GAA2B,MAA3B,CAAkC,KAAK,CAAC,IAAxC,EAA8C,gBAA9C,C;AACnB,gBAAA,K,GAAQ,IAAI,wBAAJ,GAAkB,KAAlB,CAAwB,gBAAxB,EAA0C,aAA1C,C;;uBAER,KAAK,CAAC,MAAN,CAAa,gBAAb,C;;;;uBACA,KAAK,CAAC,oBAAN,CAA2B,WAA3B,EAAwC,KAAxC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/Bd;;AAEA;;;IAGa,oB;;;2DAMM,UAAC,OAAD,EAAc;AACzB,UAAI,OAAO,CAAC,WAAR,OAA0B,KAA9B,EAAqC;AACjC,eAAO,MAAP;AACH;;AACD,UAAI,OAAO,CAAC,WAAR,OAA0B,KAA9B,EAAqC;AACjC,eAAO,SAAP;AACH;;AACD,UAAI,OAAO,CAAC,WAAR,OAA0B,KAA9B,EAAqC;AACjC,eAAO,UAAP;AACH;;AACD,UAAI,OAAO,CAAC,WAAR,OAA0B,KAA9B,EAAqC;AACjC,eAAO,UAAP;AACH;;AACD,UAAI,OAAO,CAAC,WAAR,OAA0B,KAA9B,EAAqC;AACjC,eAAO,UAAP;AACH;;AACD,UAAI,OAAO,CAAC,WAAR,OAA0B,KAA9B,EAAqC;AACjC,eAAO,WAAP;AACH;;AACD,UAAI,OAAO,CAAC,WAAR,OAA0B,KAA9B,EAAqC;AACjC,eAAO,OAAP;AACH;;AACD,UAAI,OAAO,CAAC,WAAR,OAA0B,KAA9B,EAAqC;AACjC,eAAO,WAAP;AACH;;AACD,UAAI,OAAO,CAAC,WAAR,OAA0B,KAA9B,EAAqC;AACjC,eAAO,MAAP;AACH;;AACD,UAAI,OAAO,CAAC,WAAR,OAA0B,KAA9B,EAAqC;AACjC,eAAO,OAAP;AACH;;AACD,UAAI,OAAO,CAAC,WAAR,OAA0B,KAA9B,EAAqC;AACjC,eAAO,WAAP;AACH;AACJ,K;uDAEU,UAAC,KAAD,EAAW;AAClB,aAAO,KAAK,CAAC,OAAN,CAAc,KAAd,IAAuB,KAAvB,GAA+B,CAAC,KAAD,CAAtC;AACH,K;gEAOmB,UAAC,GAAD,EAAS;AACzB,UAAI,GAAG,CAAC,IAAJ,CAAS,WAAT,OAA2B,KAA/B,EAAsC;AAClC;AACA;AACA,eAAO,QAAQ,CAAC,GAAG,CAAC,IAAL,CAAf;AACH,OAJD,MAKK;AACD,eAAO,QAAQ,CAAC,GAAG,CAAC,KAAL,CAAf;AACH;AACJ,K;;;;;;AAED;;;;;2BAKO,S,EAAW,W,EAAa;AAE3B,UAAM,eAAe,GAAG,SAAS,CAAC,SAAD,CAAjC,CAF2B,CAI3B;;AACA,MAAA,eAAe,CAAC,IAAhB,GAAuB,WAAW,CAAC,KAAZ,GAAoB,WAAW,CAAC,KAAhC,GAAwC,kBAA/D;AAEA,WAAK,eAAL,CAAqB,eAAe,CAAC,IAArC,EAA2C,WAA3C;AACA,WAAK,SAAL,CAAe,eAAe,CAAC,IAA/B,EAAqC,WAArC;AACA,WAAK,gBAAL,CAAsB,eAAe,CAAC,IAAtC,EAA4C,WAA5C;AACA,WAAK,gBAAL,CAAsB,eAAe,CAAC,IAAtC,EAA4C,WAA5C;AACA,WAAK,YAAL,CAAkB,eAAe,CAAC,IAAlC,EAAwC,WAAxC;AAEA,aAAO,eAAP;AACH;;;oCAEe,a,EAAe,W,EAAa;AAAA;;AAExC,UAAI;AACA,YAAI,WAAW,CAAC,UAAhB,EAA4B;AACxB,UAAA,aAAa,CAAC,WAAd,GAA4B,WAAW,CAAC,UAAxC;AACH;;AACD,YAAI,WAAW,CAAC,KAAhB,EAAuB;AACnB,UAAA,aAAa,CAAC,IAAd,GAAqB,WAAW,CAAC,KAAjC;AACH;;AACD,YAAI,WAAW,CAAC,QAAhB,EAA0B;AACtB,UAAA,aAAa,CAAC,QAAd,GAAyB,WAAW,CAAC,QAArC;AACH;;AACD,YAAI,WAAW,CAAC,GAAhB,EAAqB;AACjB,UAAA,aAAa,CAAC,GAAd,GAAoB,WAAW,CAAC,GAAhC;AACH;;AACD,YAAI,WAAW,CAAC,GAAhB,EAAqB;AACjB,UAAA,aAAa,CAAC,GAAd,GAAoB,WAAW,CAAC,GAAhC;AACH;;AACD,YAAI,WAAW,CAAC,MAAhB,EAAwB;AACpB,UAAA,aAAa,CAAC,MAAd,GAAuB,WAAW,CAAC,MAAnC;AACH;;AACD,YAAI,WAAW,CAAC,MAAhB,EAAwB;AACpB,UAAA,aAAa,CAAC,MAAd,GAAuB,WAAW,CAAC,MAAnC;AACH;;AACD,YAAI,WAAW,CAAC,oBAAhB,EAAsC;AAClC,UAAA,aAAa,CAAC,WAAd,GAA4B,WAAW,CAAC,oBAAxC;AACH;;AACD,YAAI,WAAW,CAAC,mBAAhB,EAAqC;AACjC,UAAA,aAAa,CAAC,SAAd,GAA0B,WAAW,CAAC,mBAAtC;AACH;;AACD,YAAI,WAAW,CAAC,yBAAhB,EAA2C;AACvC,UAAA,aAAa,CAAC,gBAAd,GAAiC,WAAW,CAAC,yBAA7C;AACH;;AACD,YAAI,WAAW,CAAC,KAAhB,EAAuB;AACnB,UAAA,aAAa,CAAC,KAAd,CAAoB,KAApB,GAA4B,WAAW,CAAC,KAAxC;AACH;;AACD,YAAI,WAAW,CAAC,UAAhB,EAA4B;AACxB,UAAA,aAAa,CAAC,KAAd,CAAoB,GAApB,GAA0B,WAAW,CAAC,UAAtC;AACH;;AACD,YAAI,WAAW,CAAC,YAAZ,IAA4B,WAAW,CAAC,YAAZ,CAAyB,WAAzB,OAA2C,MAA3E,EAAmF;AAC/E,UAAA,aAAa,CAAC,OAAd,GAAwB,WAAxB;AACH;;AACD,YACK,WAAW,CAAC,QAAZ,IAAwB,WAAW,CAAC,QAAZ,CAAqB,WAArB,OAAuC,MAAhE,IACC,WAAW,CAAC,KAAZ,IAAqB,WAAW,CAAC,KAAZ,CAAkB,WAAlB,OAAoC,MAF9D,EAGE;AACE,UAAA,aAAa,CAAC,OAAd,GAAwB,OAAxB;AACA,cAAI,IAAI,GAAG,EAAX;;AACA,cACI,WAAW,CAAC,SAAZ,IACA,WAAW,CAAC,SAAZ,CAAsB,cADtB,IAEA,WAAW,CAAC,SAAZ,CAAsB,cAAtB,CAAqC,IAHzC,EAIE;AACE,YAAA,IAAI,GAAG,WAAW,CAAC,SAAZ,CAAsB,cAAtB,CAAqC,IAA5C;AACH,WAND,MAMO,IAAI,WAAW,CAAC,SAAZ,IAAyB,WAAW,CAAC,SAAZ,CAAsB,eAAnD,EAAoE;AACvE,YAAA,IAAI,GAAG,WAAW,CAAC,SAAZ,CAAsB,eAAtB,CACF,KADE,CACI,GADJ,EAEF,GAFE,CAEE,UAAC,IAAD;AAAA,qBAAU,IAAI,CAAC,IAAL,EAAV;AAAA,aAFF,CAAP;AAGH;;AACD,UAAA,IAAI,CAAC,OAAL,CAAa,UAAC,GAAD,EAAS;AAClB,gBAAM,OAAO,GAAG,KAAI,CAAC,YAAL,CAAkB,GAAlB,CAAhB;;AACA,gBAAI,OAAO,KAAK,WAAhB,EAA6B,aAAa,CAAC,KAAd,CAAoB,SAApB,GAAgC,GAAhC;AAChC,WAHD;AAIH;;AACD,YAAI,WAAW,CAAC,QAAhB,EAA0B;AACtB,UAAA,aAAa,CAAC,UAAd,CAAyB,OAAzB,CAAiC,KAAjC,GAAyC,WAAW,CAAC,QAArD;AACH;;AACD,YAAI,WAAW,CAAC,KAAhB,EAAuB;AACnB,UAAA,aAAa,CAAC,KAAd,GAAsB,QAAQ,CAAC,WAAW,CAAC,KAAZ,CAAkB,OAAlB,CAA0B,GAA1B,EAA+B,EAA/B,CAAD,CAA9B;AACH;AACJ,OApED,CAoEE,OAAO,CAAP,EAAU;AACR,QAAA,OAAO,CAAC,KAAR,qDAA2D,CAA3D;AACH;AACJ;;;8BAES,a,EAAe,W,EAAa;AAClC,MAAA,aAAa,CAAC,WAAd,CAA0B,KAA1B,GAAkC,EAAlC,CADkC,CAGlC;AACA;;AACA,UAAI,WAAW,CAAC,WAAhB,EAA6B;AACzB,QAAA,aAAa,CAAC,WAAd,CAA0B,KAA1B,IAAmC,UAAU,CAAC,UAAX,CAAsB,WAAW,CAAC,WAAZ,GAA0B,OAAhD,CAAnC;AACH;;AAED,UAAI,WAAW,CAAC,UAAhB,EAA4B;AACxB,QAAA,aAAa,CAAC,WAAd,CAA0B,KAA1B,IAAmC,UAAU,CAAC,UAAX,CAAsB,WAAW,CAAC,UAAZ,GAAyB,OAA/C,CAAnC;AACH;;AAED,UAAI,WAAW,CAAC,OAAhB,EAAyB;AACrB,QAAA,aAAa,CAAC,WAAd,CAA0B,KAA1B,IAAmC,UAAU,CAAC,UAAX,CAAsB,WAAW,CAAC,OAAZ,GAAsB,OAA5C,CAAnC;AACH;;AAED,UAAI,WAAW,CAAC,KAAhB,EAAuB;AACnB,QAAA,aAAa,CAAC,WAAd,CAA0B,KAA1B,IAAmC,UAAU,CAAC,UAAX,CAAsB,WAAW,CAAC,KAAZ,GAAoB,OAA1C,CAAnC;AACH;AACJ;;;qCAEgB,a,EAAe,W,EAAa;AAAA;;AACzC,UAAM,IAAI,GAAG,WAAW,CAAC,UAAZ,CAAuB,CAAvB,EAA0B,SAAvC;AACA,MAAA,IAAI,CAAC,OAAL,CAAa,UAAC,GAAD,EAAS;AAClB,YAAI;AACA,cAAM,OAAO,GAAG,MAAI,CAAC,YAAL,CAAkB,GAAG,CAAC,IAAtB,CAAhB;;AACA,cAAI,OAAJ,EAAa;AACT,YAAA,aAAa,CAAC,UAAd,CAAyB,OAAzB,EAAkC,IAAlC,GAAyC,MAAI,CAAC,iBAAL,CAAuB,GAAvB,CAAzC;AACH;AAEJ,SAND,CAME,OAAO,CAAP,EAAU;AACR,UAAA,OAAO,CAAC,KAAR,0CAAgD,CAAhD;AACH;AACJ,OAVD;AAWH;;;qCAEgB,a,EAAe,W,EAAa;AACzC,UAAI;AACA,QAAA,aAAa,CAAC,SAAd,CAAwB,eAAxB,GAA0C,WAAW,CAAC,SAAtD,CADA,CAGA;;AACA,QAAA,aAAa,CAAC,SAAd,CAAwB,oBAAxB,GAA+C,WAAW,CAAC,QAAZ,GAAuB,CAAtE;AACH,OALD,CAKE,OAAO,CAAP,EAAU;AACR,QAAA,OAAO,CAAC,KAAR,0CAAgD,CAAhD;AACH;AACJ;;;iCAEY,a,EAAe,W,EAAa;AACrC,UAAM,aAAa,GAAG,WAAW,CAAC,MAAZ,CAAmB,KAAzC;;AACA,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,aAAa,CAAC,MAAlC,EAA0C,CAAC,EAA3C,EAA+C;AAC3C,YAAI;AACA,cAAM,YAAY,GAAG,aAAa,CAAC,CAAD,CAAlC;;AACA,cAAI,YAAY,CAAC,MAAb,GAAsB,CAAtB,IAA2B,YAAY,CAAC,UAA5C,EAAwD;AACpD,gBAAI,eAAe,GAAG,QAAtB;AACA,gBAAI,WAAW,GAAG,IAAlB;AACA,gBAAM,EAAE,GAAG,QAAQ,CAAC,EAAD,CAAnB;;AACA,gBAAI,YAAY,CAAC,UAAb,IAA2B,YAAY,CAAC,UAAb,CAAwB,WAAxB,OAA0C,MAAzE,EAAiF;AAC7E,cAAA,WAAW,GAAG,EAAd;AACA,cAAA,aAAa,CAAC,MAAd,CAAqB,QAArB,CAA8B,KAA9B,CAAoC,EAApC,IAA0C,WAA1C;AACA,cAAA,eAAe,GAAG,UAAlB;AACH,aAJD,MAKK,IAAI,YAAY,CAAC,SAAb,IAA0B,YAAY,CAAC,SAAb,CAAuB,WAAvB,OAAyC,MAAvE,EAA+E;AAChF,kBAAM,QAAQ,GAAG,YAAY,CAAC,qBAA9B;AACA,cAAA,WAAW,GAAG,EAAd,CAFgF,CAIhF;;AACA,kBAAI,aAAa,SAAjB;;AACA,kBAAI,QAAJ,EAAc;AACV,oBAAM,GAAG,GAAG,QAAQ,CAAC,WAAT,EAAZ;AACA,oBAAI,GAAG,KAAK,QAAZ,EACI,aAAa,GAAG,aAAa,CAAC,MAAd,CAAqB,SAArB,CAA+B,MAA/B,CAAsC,KAAtD;AACJ,oBAAI,GAAG,KAAK,UAAZ,EACI,aAAa,GAAG,aAAa,CAAC,MAAd,CAAqB,SAArB,CAA+B,QAA/B,CAAwC,KAAxD;AACJ,oBAAI,GAAG,KAAK,cAAZ,EACI,aAAa,GAAG,aAAa,CAAC,MAAd,CAAqB,SAArB,CAA+B,YAA/B,CAA4C,KAA5D;AACJ,oBAAI,GAAG,KAAK,UAAZ,EACI,aAAa,GAAG,aAAa,CAAC,MAAd,CAAqB,SAArB,CAA+B,SAA/B,CAAyC,KAAzD;AACJ,oBAAI,aAAJ,EACI,aAAa,CAAC,EAAD,CAAb,GAAoB,WAApB;AACP,eAZD,MAaK;AACD,oBAAI,YAAY,CAAC,SAAb,CAAuB,WAAvB,OAAyC,KAA7C,EAAoD;AAChD,kBAAA,aAAa,CAAC,MAAd,CAAqB,SAArB,CAA+B,MAA/B,CAAsC,KAAtC,CAA4C,EAA5C,IAAkD,WAAlD;AACH;;AACD,oBAAI,YAAY,CAAC,SAAb,CAAuB,WAAvB,OAAyC,KAA7C,EAAoD;AAChD,kBAAA,aAAa,CAAC,MAAd,CAAqB,SAArB,CAA+B,YAA/B,CAA4C,KAA5C,CAAkD,EAAlD,IAAwD,WAAxD;AACH;AACJ;;AACD,cAAA,eAAe,GAAG,WAAlB;AACH,aA5BI,MA6BA;AACD,kBAAI,IAAI,GAAG,YAAY,CAAC,IAAb,CACN,WADM,GAEN,IAFM,GAGN,OAHM,CAGE,KAHF,EAGS,GAHT,EAIN,OAJM,CAIE,IAJF,EAIQ,GAJR,CAAX;AAKA,kBAAI,IAAI,CAAC,QAAL,CAAc,QAAd,KAA2B,IAAI,CAAC,QAAL,CAAc,SAAd,CAA/B,EACI,IAAI,GAAG,IAAI,CAAC,OAAL,CAAa,SAAb,EAAwB,EAAxB,CAAP;AACJ,kBAAI,IAAI,KAAK,kBAAb,EACI,IAAI,GAAG,mBAAP;AACJ,cAAA,WAAW,GAAG,aAAa,CAAC,MAAd,CAAqB,MAArB,CAA4B,IAA5B,CAAd;AACH;;AACD,gBAAI,CAAC,WAAL,EACI,OAAO,CAAC,KAAR,gCAAsC,YAAY,CAAC,IAAnD;;AACJ,gBAAI,WAAJ,EAAiB;AACb,kBAAI,eAAe,KAAK,QAAxB,EACI,WAAW,CAAC,IAAZ,GAAmB,YAAY,CAAC,IAAhC;AACJ,cAAA,WAAW,CAAC,IAAZ,GAAmB,QAAQ,CAAC,YAAY,CAAC,MAAd,CAA3B;;AAEA,kBAAI,YAAY,CAAC,oBAAjB,EAAuC;AACnC,gBAAA,WAAW,CAAC,KAAZ,GAAoB,KAAK,QAAL,CAChB,YAAY,CAAC,oBAAb,CAAkC,mBAAlC,CAAsD,IADtC,CAApB;AAGH;;AAED,cAAA,WAAW,GAAG,8CAA6B,WAA7B,CAAd;AACH;AACJ;AACJ,SApED,CAoEE,OAAO,CAAP,EAAU;AACR,UAAA,OAAO,CAAC,KAAR,CAAc,CAAd;AACH;AACJ;AACJ;;;;;;;;;;;;;;;;;;;;;AC9RL;;IAEa,a;;;;;;;kCACK,W,EAAa;AAAA;;AAEvB,UAAM,eAAe,GAAG,mCAAS,WAAW,CAAC,QAAZ,CAAqB,OAA9B,CAAxB;AACA,UAAM,cAAc,GAAG,EAAvB;AAEA,MAAA,eAAe,CAAC,OAAhB,CAAwB,UAAC,cAAD,EAAoB;AACxC,YAAI;AACA,cAAM,QAAQ,GAAG,KAAI,CAAC,YAAL,CAAkB,cAAlB,CAAjB;;AACA,UAAA,cAAc,CAAC,IAAf,CAAoB,QAApB;AACH,SAHD,CAGE,OAAO,CAAP,EAAU;AACR,UAAA,OAAO,CAAC,KAAR,CAAc,CAAd;AACH;AACJ,OAPD;AASA,aAAO,cAAP;AACH;;;iCAEY,c,EAAgB;AACzB,UAAM,IAAI,GAAG,EAAb;AACA,MAAA,IAAI,CAAC,IAAL,GAAY,cAAc,CAAC,IAA3B,CAFyB,CAIzB;AACA;;AACA,UAAI,cAAc,CAAC,UAAf,CAA0B,WAA1B,GAAwC,QAAxC,CAAiD,OAAjD,CAAJ,EAA+D;AAC3D,QAAA,IAAI,CAAC,UAAL,GAAkB,cAAc,CAAC,UAAf,CACb,WADa,GAEb,OAFa,CAEL,QAFK,EAEK,EAFL,EAGb,OAHa,CAGL,GAHK,EAGA,EAHA,CAAlB;AAIH,OALD,MAMK;AACD,QAAA,IAAI,CAAC,UAAL,GAAkB,cAAc,CAAC,UAAjC;AACH;;AAED,MAAA,IAAI,CAAC,OAAL,GAAe,cAAc,CAAC,OAA9B;AACA,MAAA,IAAI,CAAC,MAAL,GAAe,cAAc,CAAC,MAAf,CAAsB,WAAtB,OAAwC,MAAvD;AACA,MAAA,IAAI,CAAC,SAAL,GAAkB,cAAc,CAAC,SAAf,CAAyB,WAAzB,OAA2C,MAA7D;AACA,MAAA,IAAI,CAAC,WAAL,GAAmB,2CAAiB,cAAjB,CAAnB;AAEA,UAAM,QAAQ,GAAG,cAAc,CAAC,IAAf,GAAsB,cAAc,CAAC,IAArC,GAA4C,sBAA7D;AACA,UAAM,QAAQ,GAAG,yCAAe,QAAf,EAAyB,SAAzB,EAAoC,IAApC,CAAjB;AACA,aAAO,QAAP;AACH;;;;;;;;;;;;;;;;;;;;;AC5CL;;IAEa,e;;;;;;;oCAEO,W,EAAa;AAAA;;AACzB,UAAM,iBAAiB,GAAG,mCAAS,WAAW,CAAC,UAAZ,CAAuB,SAAhC,CAA1B;AACA,UAAM,eAAe,GAAG,EAAxB;AACA,MAAA,iBAAiB,CAAC,OAAlB,CAA0B,UAAC,YAAD,EAAkB;AACxC,YAAI;AACA,cAAM,QAAQ,GAAG,KAAI,CAAC,cAAL,CAAoB,YAApB,CAAjB;;AACA,UAAA,eAAe,CAAC,IAAhB,CAAqB,QAArB;AACH,SAHD,CAGE,OAAO,CAAP,EAAU;AACR,UAAA,OAAO,CAAC,KAAR,CAAc,CAAd;AACH;AACJ,OAPD;AASA,aAAO,eAAP;AACH;;;mCAEc,Y,EAAc;AACzB,UAAM,IAAI,GAAG,EAAb;AACA,MAAA,IAAI,CAAC,WAAL,GAAmB,2CAAiB,YAAjB,CAAnB;AACA,MAAA,IAAI,CAAC,UAAL,GAAkB,0CAAgB,YAAhB,CAAlB,CAHyB,CAKzB;;AACA,MAAA,IAAI,CAAC,UAAL,CAAgB,QAAhB,GAA2B,IAA3B;AACA,MAAA,IAAI,CAAC,OAAL,GAAe,YAAY,CAAC,GAA5B;AACA,MAAA,IAAI,CAAC,KAAL,GAAa,YAAY,CAAC,KAA1B;AAEA,aAAO,yCAAe,YAAY,CAAC,IAA5B,EAAkC,WAAlC,EAA+C,IAA/C,CAAP;AACH;;;;;;;;;;;;;;;;;;;;;AC9BL;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;;IAGa,W;;;;;;;;AAET;;;;;0BAKM,W,EAAa,a,EAAe;AAC9B,UAAM,WAAW,GAAG,EAApB;;AAEA,UAAI,aAAa,CAAC,SAAd,IAA2B,WAAW,CAAC,SAAvC,IAAoD,WAAW,CAAC,SAAZ,CAAsB,OAA9E,EAAuF;AACnF,YAAM,eAAe,GAAG,IAAI,4BAAJ,GAAoB,cAApB,CAAmC,WAAnC,CAAxB;AACA,QAAA,KAAK,CAAC,SAAN,CAAgB,IAAhB,CAAqB,KAArB,CAA2B,WAA3B,EAAwC,eAAxC;AACH;;AAED,UAAI,aAAa,CAAC,OAAd,IAAyB,WAAW,CAAC,OAAZ,IAAuB,IAAhD,IAAwD,WAAW,CAAC,OAAZ,CAAoB,MAApB,IAA8B,IAA1F,EAAgG;AAC5F,YAAM,aAAa,GAAG,IAAI,0BAAJ,GAAmB,YAAnB,CAAgC,WAAhC,CAAtB;AACA,QAAA,KAAK,CAAC,SAAN,CAAgB,IAAhB,CAAqB,KAArB,CAA2B,WAA3B,EAAwC,aAAxC;AACH;;AAED,UAAI,aAAa,CAAC,KAAd,IAAuB,WAAW,CAAC,MAAnC,IAA6C,WAAW,CAAC,MAAZ,CAAmB,KAApE,EAA2E;AACvE,YAAM,YAAY,GAAG,IAAI,wBAAJ,GAAkB,WAAlB,CAA8B,WAA9B,CAArB;AACA,QAAA,KAAK,CAAC,SAAN,CAAgB,IAAhB,CAAqB,KAArB,CAA2B,WAA3B,EAAwC,YAAxC;AACH;;AAED,UAAI,aAAa,CAAC,SAAd,IAA2B,WAAW,CAAC,UAAvC,IAAqD,WAAW,CAAC,UAAZ,CAAuB,SAAhF,EAA2F;AACvF,YAAM,eAAe,GAAG,IAAI,gCAAJ,GAAsB,eAAtB,CAAsC,WAAtC,CAAxB;AACA,QAAA,KAAK,CAAC,SAAN,CAAgB,IAAhB,CAAqB,KAArB,CAA2B,WAA3B,EAAwC,eAAxC;AACH;;AAED,UAAI,aAAa,CAAC,MAAd,IAAwB,WAAW,CAAC,MAApC,IAA8C,WAAW,CAAC,MAAZ,CAAmB,KAArE,EAA4E;AACxE,YAAM,YAAY,GAAG,IAAI,wBAAJ,GAAkB,WAAlB,CAA8B,WAA9B,CAArB;AACA,QAAA,KAAK,CAAC,SAAN,CAAgB,IAAhB,CAAqB,KAArB,CAA2B,WAA3B,EAAwC,YAAxC;AACH;;AAED,UAAI,aAAa,CAAC,SAAd,IAA2B,WAAW,CAAC,KAAvC,IAAgD,WAAW,CAAC,KAAZ,CAAkB,IAAtE,EAA4E;AACxE,YAAM,KAAK,GAAG,mCAAS,WAAW,CAAC,KAAZ,CAAkB,IAA3B,CAAd;AACA,YAAM,WAAW,GAAG,IAAI,wBAAJ,GAAkB,UAAlB,CAA6B,KAA7B,CAApB;AACA,QAAA,KAAK,CAAC,SAAN,CAAgB,IAAhB,CAAqB,KAArB,CAA2B,WAA3B,EAAwC,WAAxC;AACH;;AAED,UAAI,aAAa,CAAC,MAAd,IAAwB,WAAW,CAAC,MAApC,IAA8C,WAAW,CAAC,MAAZ,CAAmB,KAArE,EAA4E;AACxE,YAAM,YAAY,GAAG,IAAI,wBAAJ,GAAkB,WAAlB,CAA8B,WAA9B,CAArB;AACA,QAAA,KAAK,CAAC,SAAN,CAAgB,IAAhB,CAAqB,KAArB,CAA2B,WAA3B,EAAwC,YAAxC;AACH;;AAED,UAAI,aAAa,CAAC,QAAd,IAA0B,WAAW,CAAC,QAAtC,IAAkD,WAAW,CAAC,QAAZ,CAAqB,OAA3E,EAAoF;AAChF,YAAM,cAAc,GAAG,IAAI,4BAAJ,GAAoB,aAApB,CAAkC,WAAlC,CAAvB;AACA,QAAA,KAAK,CAAC,SAAN,CAAgB,IAAhB,CAAqB,KAArB,CAA2B,WAA3B,EAAwC,cAAxC;AACH;;AAED,UAAI,aAAa,CAAC,UAAd,IAA4B,WAAW,CAAC,UAAxC,IAAsD,WAAW,CAAC,UAAZ,CAAuB,SAAjF,EAA4F;AACxF,YAAM,gBAAgB,GAAG,IAAI,gCAAJ,GAAsB,eAAtB,CAAsC,WAAtC,CAAzB;AACA,QAAA,KAAK,CAAC,SAAN,CAAgB,IAAhB,CAAqB,KAArB,CAA2B,WAA3B,EAAwC,gBAAxC;AACH;;AAED,aAAO,WAAP;AACH;;;;;;;;;;;;;;;;;;;;;ACvEL;;AACA;;IAEa,e;;;;;;;oCACO,W,EAAa;AAAA;;AAEzB,UAAM,gBAAgB,GAAG,mCAAS,WAAW,CAAC,UAAZ,CAAuB,SAAhC,CAAzB;AACA,UAAM,eAAe,GAAG,EAAxB;AAEA,MAAA,gBAAgB,CAAC,OAAjB,CAAyB,UAAC,gBAAD,EAAsB;AAC3C,YAAI;AACA,cAAM,QAAQ,GAAG,KAAI,CAAC,cAAL,CAAoB,gBAApB,CAAjB;;AACA,UAAA,eAAe,CAAC,IAAhB,CAAqB,QAArB;AACH,SAHD,CAIC,OAAO,CAAP,EAAU;AACP,UAAA,OAAO,CAAC,KAAR,CAAc,CAAd;AACH;AACJ,OARD;AAUA,aAAO,eAAP;AACH;;;mCAEc,gB,EAAkB;AAC7B,UAAM,IAAI,GAAG,EAAb,CAD6B,CAG7B;AACA;;AACA,UAAM,oBAAoB,GAAG,gBAAgB,CAAC,aAAjB,CAA+B,WAA/B,EAA7B;;AACA,UAAK,oBAAoB,IAAI,YAAI,cAAjC,EAAkD;AAC9C,QAAA,IAAI,CAAC,IAAL,GAAY,oBAAZ;AACH,OAFD,MAGK;AACD;AACA,YAAI,oBAAoB,KAAK,QAA7B,EAAuC;AACnC,UAAA,IAAI,CAAC,IAAL,GAAY,QAAZ;AACH,SAFD,MAGK;AACD,UAAA,IAAI,CAAC,IAAL,GAAY,OAAZ;AACH;AACJ;;AAED,MAAA,IAAI,CAAC,IAAL,GAAY,gBAAgB,CAAC,gBAA7B;AACA,MAAA,IAAI,CAAC,SAAL,GAAiB,gBAAgB,CAAC,SAAlC;AACA,MAAA,IAAI,CAAC,WAAL,GAAmB,2CAAiB,gBAAjB,CAAnB,CArB6B,CAuB7B;;AACA,UAAM,QAAQ,GAAG,gBAAgB,CAAC,IAAjB,GAAwB,gBAAgB,CAAC,IAAzC,GAAgD,gBAAgB,CAAC,aAAlF;AACA,UAAM,QAAQ,GAAG,yCAAe,QAAf,EAAyB,WAAzB,EAAsC,IAAtC,CAAjB;AACA,aAAO,QAAP;AACH;;;;;;;;;;;;;;;;;;;;;ACjDL;;IAEa,W;;;;;;;gCAEG,W,EAAa;AAAA;;AACrB,UAAM,MAAM,GAAG,mCAAS,WAAW,CAAC,MAAZ,CAAmB,KAA5B,CAAf;AACA,UAAM,YAAY,GAAG,EAArB;AAEA,MAAA,MAAM,CAAC,OAAP,CAAe,UAAC,YAAD,EAAkB;AAC7B,YAAM,QAAQ,GAAG,KAAI,CAAC,UAAL,CAAgB,YAAhB,CAAjB;;AACA,QAAA,YAAY,CAAC,IAAb,CAAkB,QAAlB;AACH,OAHD;AAKA,aAAO,YAAP;AACH;;;+BAEU,Y,EAAc;AACrB,UAAM,IAAI,GAAG,EAAb;AACA,MAAA,IAAI,CAAC,WAAL,GAAmB,2CAAiB,YAAjB,CAAnB;AAEA,MAAA,IAAI,CAAC,KAAL,GAAa,QAAQ,CAAC,YAAY,CAAC,MAAd,CAArB;AACA,MAAA,IAAI,CAAC,EAAL,GAAU,UAAU,CAAC,YAAY,CAAC,WAAd,CAApB;AACA,UAAM,QAAQ,GAAG,yCAAe,YAAY,CAAC,QAA5B,EAAsC,aAAtC,EAAqD,IAArD,CAAjB;AACA,aAAO,QAAP;AACH;;;;;;;;;;;;;;;;;;;;;ACxBL;;AACA;;IAEa,a;;;;;;;mCAEM,W,EAAa;AAAA;;AACxB,UAAM,SAAS,GAAG,mCAAS,WAAW,CAAC,SAAZ,CAAsB,OAA/B,CAAlB;AACA,UAAM,eAAe,GAAG,EAAxB;AAEA,MAAA,SAAS,CAAC,OAAV,CAAkB,UAAC,cAAD,EAAoB;AAClC,YAAI;AACA,cAAM,QAAQ,GAAG,KAAI,CAAC,YAAL,CAAkB,cAAlB,CAAjB;;AACA,UAAA,eAAe,CAAC,IAAhB,CAAqB,QAArB;AACH,SAHD,CAGE,OAAO,CAAP,EAAU;AACR,UAAA,OAAO,CAAC,KAAR,CAAc,CAAd;AACH;AACJ,OAPD;AASA,aAAO,eAAP;AACH;;;iCAEY,c,EAAgB;AACzB,UAAM,IAAI,GAAG,6BAAc,WAAd,EAAb;;AACA,MAAA,IAAI,CAAC,IAAL,GAAY,cAAc,CAAC,WAAf,CAA2B,WAA3B,EAAZ;AACA,MAAA,IAAI,CAAC,WAAL,GAAmB,2CAAiB,cAAjB,CAAnB;AAEA,UAAM,QAAQ,GAAG,yCAAe,cAAc,CAAC,IAA9B,EAAoC,SAApC,EAA+C,IAA/C,CAAjB;AACA,aAAO,QAAP;AACH;;;;;;;;;;;;;;;;;;;;;AC5BL;;IAEa,W;;;;;;;gCACG,W,EAAa;AAAA;;AACrB,UAAM,MAAM,GAAG,mCAAS,WAAW,CAAC,MAAZ,CAAmB,KAA5B,CAAf;AACA,UAAM,YAAY,GAAG,EAArB;AACA,MAAA,MAAM,CAAC,OAAP,CAAe,UAAC,YAAD,EAAkB;AAC7B,YAAI;AACA,cAAI,YAAY,CAAC,OAAb,CAAqB,WAArB,OAAuC,MAA3C,EAAmD;AAC/C,gBAAM,QAAQ,GAAG,KAAI,CAAC,UAAL,CAAgB,YAAhB,CAAjB;;AACA,YAAA,YAAY,CAAC,IAAb,CAAkB,QAAlB;AACH;AACJ,SALD,CAKE,OAAO,CAAP,EAAU;AACR,UAAA,OAAO,CAAC,KAAR,CAAc,CAAd;AACH;AACJ,OATD;AAWA,aAAO,YAAP;AACH;;;+BAEU,Y,EAAc;AACrB,UAAM,MAAM,GAAG,EAAf;AACA,UAAM,IAAI,GAAG,EAAb;AACA,MAAA,IAAI,CAAC,MAAL,GAAc,MAAd;AACA,MAAA,IAAI,CAAC,QAAL,GAAgB,YAAY,CAAC,QAAb,CAAsB,WAAtB,GAAoC,OAApC,CAA4C,KAA5C,EAAmD,GAAnD,CAAhB;AACA,MAAA,IAAI,CAAC,IAAL,GAAY,YAAY,CAAC,IAAzB;AACA,MAAA,IAAI,CAAC,IAAL,GAAY,YAAY,CAAC,IAAb,KAAsB,GAAtB,GAA4B,MAA5B,GAAqC,UAAjD;AACA,MAAA,IAAI,CAAC,KAAL,GACI,YAAY,CAAC,KAAb,KAAuB,GAAvB,GACM,OADN,GAEM,YAAY,CAAC,KAAb,CACO,WADP,GAEO,OAFP,CAEe,KAFf,EAEsB,GAFtB,EAGO,OAHP,CAGe,GAHf,EAGoB,EAHpB,EAIO,OAJP,CAIe,GAJf,EAIoB,EAJpB,CAHV;AAQA,MAAA,IAAI,CAAC,KAAL,GAAa,QAAQ,CAAC,YAAY,CAAC,EAAb,CAAgB,OAAhB,CAAwB,GAAxB,EAA6B,EAA7B,CAAD,CAArB;AACA,MAAA,IAAI,CAAC,WAAL,GAAmB,2CAAiB,YAAjB,CAAnB;AAEA,UAAI,WAAW,GAAG,EAAlB;AACA,UAAI,YAAY,CAAC,WAAjB,EAA8B,WAAW,GAAG,YAAY,CAAC,WAA3B;AAC9B,UAAI,YAAY,CAAC,WAAjB,EAA8B,WAAW,gBAAS,YAAY,CAAC,WAAtB,CAAX;AAC9B,MAAA,IAAI,CAAC,WAAL,CAAiB,KAAjB,GAAyB,UAAU,CAAC,UAAX,CAAsB,WAAtB,CAAzB;AAEA,UAAI,YAAY,CAAC,QAAb,CAAsB,WAAtB,OAAwC,GAA5C,EAAiD,IAAI,CAAC,QAAL,GAAgB,WAAhB,CAAjD,KACK,IAAI,YAAY,CAAC,QAAb,CAAsB,WAAtB,OAAwC,GAA5C,EACD,IAAI,CAAC,QAAL,GAAgB,SAAhB,CADC,KAEA,IAAI,YAAY,CAAC,QAAb,CAAsB,WAAtB,OAAwC,GAA5C,EACD,IAAI,CAAC,QAAL,GAAgB,WAAhB;AAEJ,MAAA,MAAM,CAAC,IAAP,GAAc,QAAd;AACA,MAAA,MAAM,CAAC,KAAP,GAAe,cAAf;AACA,MAAA,MAAM,CAAC,SAAP,GAAmB,OAAnB;;AAEA,UAAI,YAAY,CAAC,WAAjB,EAA8B;AAC1B,YAAM,IAAI,GAAG,YAAY,CAAC,WAAb,CAAyB,WAAzB,EAAb;;AACA,YAAI,YAAY,CAAC,QAAb,CAAsB,WAAtB,OAAwC,QAA5C,EAAsD;AAClD,UAAA,IAAI,CAAC,MAAL,GAAc,EAAd;;AACA,cAAI,IAAI,CAAC,QAAL,CAAc,QAAd,CAAJ,EAA6B;AACzB,YAAA,IAAI,CAAC,MAAL,CAAY,IAAZ,GAAmB,UAAnB;AACA,YAAA,MAAM,CAAC,OAAP,GAAiB;AACb,cAAA,IAAI,EAAE;AADO,aAAjB;AAGH,WALD,MAKO;AACH,YAAA,IAAI,CAAC,MAAL,CAAY,IAAZ,GAAmB,QAAnB;;AACA,gBAAI,IAAI,CAAC,IAAL,KAAc,MAAlB,EAA0B;AACtB,cAAA,MAAM,CAAC,OAAP,GAAiB;AACb,gBAAA,IAAI,EAAE,QADO;AAEb,gBAAA,SAAS,EAAE;AAFE,eAAjB;AAIH,aALD,MAKO,IAAI,IAAI,CAAC,IAAL,KAAc,UAAlB,EAA8B;AACjC,cAAA,MAAM,CAAC,OAAP,GAAiB;AACb,gBAAA,IAAI,EAAE,QADO;AAEb,gBAAA,SAAS,EAAE;AAFE,eAAjB;AAIH;AACJ;AACJ;;AACD,YAAI,YAAY,CAAC,QAAb,CAAsB,WAAtB,OAAwC,WAA5C,EAAyD;AACrD,UAAA,IAAI,CAAC,SAAL,GAAiB,EAAjB;AACA,cAAM,KAAK,GAAG,IAAI,CAAC,KAAL,CAAW,GAAX,CAAd;AACA,UAAA,KAAK,CAAC,OAAN,CAAc,UAAC,KAAD,EAAW;AACrB,YAAA,KAAK,GAAG,KAAK,IAAI,EAAjB;AACA,YAAA,KAAK,GAAG,KAAK,CAAC,OAAN,CAAc,kBAAd,EAAkC,EAAlC,CAAR;AACA,gBAAI,CAAC,KAAL,EAAY;AACZ,gBAAI,KAAK,CAAC,QAAN,CAAe,MAAf,CAAJ,EAA4B;AAE5B,gBAAI,KAAK,CAAC,QAAN,CAAe,SAAf,CAAJ,EACI,IAAI,CAAC,SAAL,CAAe,OAAf,GAAyB,IAAzB,CADJ,KAEK,IAAI,KAAK,CAAC,QAAN,CAAe,QAAf,CAAJ,EACD,IAAI,CAAC,SAAL,CAAe,OAAf,GAAyB,KAAzB,CADC,KAEA,IAAI,KAAJ,EACD,IAAI,CAAC,SAAL,CAAe,IAAf,GAAsB,KAAK,CAAC,WAAN,EAAtB;AACP,WAZD;;AAaA,cAAI,CAAC,IAAI,CAAC,SAAL,CAAe,OAApB,EAA6B;AACzB,YAAA,MAAM,CAAC,OAAP,GAAiB;AACb,cAAA,IAAI,EAAE,QADO;AAEb,cAAA,SAAS,EAAE,WAFE;AAGb,cAAA,UAAU,EAAE;AAHC,aAAjB;AAKH;AACJ;;AACD,YAAI,YAAY,CAAC,QAAb,CAAsB,WAAtB,OAAwC,UAA5C,EAAwD;AACpD,UAAA,IAAI,CAAC,QAAL,GAAgB,EAAhB;;AACA,cAAM,MAAK,GAAG,IAAI,CAAC,KAAL,CAAW,GAAX,CAAd;;AACA,UAAA,MAAK,CAAC,OAAN,CAAc,UAAC,KAAD,EAAW;AACrB,YAAA,KAAK,GAAG,KAAK,IAAI,EAAjB;AACA,YAAA,KAAK,GAAG,KAAK,CAAC,OAAN,CAAc,iBAAd,EAAiC,EAAjC,CAAR;AACA,gBAAI,CAAC,KAAL,EAAY;AACZ,gBAAI,KAAK,CAAC,QAAN,CAAe,MAAf,CAAJ,EAA4B;AAE5B,gBAAI,KAAK,CAAC,QAAN,CAAe,OAAf,CAAJ,EACI,IAAI,CAAC,QAAL,CAAc,KAAd,GAAsB,KAAK,CAAC,WAAN,EAAtB,CADJ,KAEK,IAAI,KAAJ,EACD,IAAI,CAAC,QAAL,CAAc,IAAd,GAAqB,KAAK,CAAC,WAAN,EAArB;AACP,WAVD;;AAWA,cAAI,IAAI,CAAC,IAAL,KAAc,MAAlB,EAA0B;AACtB,YAAA,MAAM,CAAC,OAAP,GAAiB;AACb,cAAA,IAAI,EAAE,QADO;AAEb,cAAA,SAAS,EAAE,WAFE;AAGb,cAAA,UAAU,EAAE;AAHC,aAAjB;AAKH,WAND,MAMO;AACH,YAAA,MAAM,CAAC,OAAP,GAAiB;AACb,cAAA,IAAI,EAAE,QADO;AAEb,cAAA,SAAS,EAAE,WAFE;AAGb,cAAA,UAAU,EAAE;AAHC,aAAjB;AAKH;AACJ;;AACD,YAAI,YAAY,CAAC,QAAb,CAAsB,WAAtB,OAAwC,cAA5C,EAA4D;AACxD,UAAA,IAAI,CAAC,YAAL,GAAoB,EAApB;AACA,cAAI,IAAI,CAAC,QAAL,CAAc,eAAd,CAAJ,EACI,IAAI,CAAC,YAAL,CAAkB,aAAlB,GAAkC,IAAlC;AACJ,cAAI,IAAI,CAAC,QAAL,CAAc,UAAd,CAAJ,EACI,IAAI,CAAC,YAAL,CAAkB,QAAlB,GAA6B,IAA7B;AACJ,cAAI,IAAI,CAAC,QAAL,CAAc,QAAd,CAAJ,EACI,IAAI,CAAC,YAAL,CAAkB,MAAlB,GAA2B,IAA3B,CAPoD,CAQxD;;AAEA,cAAI,IAAI,CAAC,YAAL,CAAkB,MAAtB,EAA8B;AAC1B,YAAA,MAAM,CAAC,OAAP,GAAiB;AACb,cAAA,IAAI,EAAE,QADO;AAEb,cAAA,SAAS,EAAE,WAFE;AAGb,cAAA,UAAU,EAAE;AAHC,aAAjB;AAKH;;AACD,cAAI,IAAI,CAAC,YAAL,CAAkB,QAAtB,EAAgC;AAC5B,YAAA,MAAM,CAAC,OAAP,GAAiB;AACb,cAAA,IAAI,EAAE,QADO;AAEb,cAAA,SAAS,EAAE,MAFE;AAGb,cAAA,UAAU,EAAE;AAHC,aAAjB;AAKH;AACJ;AACJ;;AAED,aAAO,yCAAe,YAAY,CAAC,IAA5B,EAAkC,OAAlC,EAA2C,IAA3C,CAAP;AACH;;;;;;;;;;;;;;;;;;;;;;;AC7JL;;IAEa,Y;;;0DACK,UAAC,GAAD,EAAS;AACnB,UAAM,MAAM,GAAG;AACX,QAAA,MAAM,EAAE,CADG;AAEX,QAAA,IAAI,EAAE,UAFK;AAGX,QAAA,MAAM,EAAE,CAHG;AAIX,QAAA,OAAO,EAAE;AAJE,OAAf;AAMA,UAAM,KAAK,GAAG,GAAG,CAAC,KAAJ,CAAU,GAAV,CAAd;;AACA,UAAI,KAAK,CAAC,MAAN,GAAe,CAAnB,EAAsB;AAClB,YAAM,CAAC,GAAG,KAAK,CAAC,CAAD,CAAL,CAAS,KAAT,CAAe,YAAf,CAAV;AACA,YAAI,CAAC,IAAI,CAAC,CAAC,CAAD,CAAV,EAAe,MAAM,CAAC,MAAP,GAAgB,QAAQ,CAAC,CAAC,CAAC,CAAD,CAAF,CAAxB;AACf,YAAI,CAAC,IAAI,CAAC,CAAC,CAAD,CAAV,EAAe,MAAM,CAAC,IAAP,GAAc,CAAC,CAAC,CAAD,CAAD,KAAS,GAAT,GAAe,UAAf,GAA4B,MAA1C;AAClB;;AACD,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,CAAC,MAA1B,EAAkC,CAAC,EAAnC,EAAuC;AACnC,YAAM,EAAC,GAAG,KAAK,CAAC,CAAD,CAAL,CAAS,KAAT,CAAe,aAAf,CAAV;;AACA,YAAI,EAAC,IAAI,EAAC,CAAC,CAAD,CAAV,EAAe;AACX,cAAI,EAAC,CAAC,CAAD,CAAD,CAAK,WAAL,GAAmB,QAAnB,CAA4B,IAA5B,CAAJ,EAAuC,MAAM,CAAC,OAAP,GAAiB,QAAQ,CAAC,EAAC,CAAC,CAAD,CAAF,CAAzB,CAAvC,KACK,MAAM,CAAC,MAAP,GAAgB,QAAQ,CAAC,EAAC,CAAC,CAAD,CAAF,CAAxB;AACR;AACJ;;AACD,aAAO,MAAP;AACH,K;;;;;iCAEY,W,EAAa;AAAA;;AACtB,UAAM,OAAO,GAAG,mCAAS,WAAW,CAAC,OAAZ,CAAoB,MAA7B,CAAhB;AACA,UAAM,aAAa,GAAG,EAAtB;AAEA,MAAA,OAAO,CAAC,OAAR,CAAgB,UAAC,aAAD,EAAmB;AAC/B,YAAI;AACA,cAAM,QAAQ,GAAG,KAAI,CAAC,WAAL,CAAiB,aAAjB,CAAjB;;AACA,UAAA,aAAa,CAAC,IAAd,CAAmB,QAAnB;AACH,SAHD,CAGE,OAAO,CAAP,EAAU;AACR,UAAA,OAAO,CAAC,KAAR,CAAc,CAAd;AACH;AACJ,OAPD;AASA,aAAO,aAAP;AACH;;;gCAEW,a,EAAe;AACvB,UAAM,IAAI,GAAG,EAAb;AACA,UAAM,MAAM,GAAG,EAAf;AACA,UAAM,MAAM,GAAG,EAAf;AACA,MAAA,MAAM,CAAC,MAAP,GAAgB,MAAhB;AACA,MAAA,IAAI,CAAC,MAAL,GAAc,MAAd;AAEA,MAAA,IAAI,CAAC,WAAL,GAAmB,2CAAiB,aAAjB,CAAnB;AACA,MAAA,IAAI,CAAC,UAAL,GAAkB,0CAAgB,aAAhB,CAAlB;AAEA,MAAA,MAAM,CAAC,EAAP,GAAY;AACR,QAAA,IAAI,EAAE,QAAQ,CAAC,oCAAU,aAAa,CAAC,EAAxB,EAA4B,CAA5B,CAAD;AADN,OAAZ;AAGA,MAAA,MAAM,CAAC,IAAP,GAAc,QAAd;AACA,UAAI,aAAa,CAAC,KAAlB,EACI,MAAM,CAAC,KAAP,GAAe,aAAa,CAAC,KAAd,CAAoB,WAApB,GAAkC,OAAlC,CAA0C,KAA1C,EAAiD,GAAjD,CAAf,CADJ,KAEK,IAAI,aAAa,CAAC,QAAd,IAA0B,aAAa,CAAC,QAAd,CAAuB,WAAvB,GAAqC,QAArC,CAA8C,QAA9C,CAA9B,EACD,MAAM,CAAC,KAAP,GAAe,aAAa,CAAC,QAAd,CACV,WADU,GAEV,OAFU,CAEF,UAFE,EAEU,EAFV,EAGV,OAHU,CAGF,KAHE,EAGK,GAHL,CAAf;AAIJ,UAAI,MAAM,CAAC,KAAP,CAAa,QAAb,CAAsB,QAAtB,CAAJ,EACI,MAAM,CAAC,KAAP,GAAe,MAAM,CAAC,KAAP,CAAa,OAAb,CAAqB,SAArB,EAAgC,EAAhC,CAAf;AACJ,MAAA,MAAM,CAAC,SAAP,GAAmB,SAAnB;AACA,MAAA,MAAM,CAAC,KAAP,GAAe;AACX,QAAA,IAAI,EAAE,QAAQ,CAAC,oCAAU,aAAa,CAAC,QAAxB,EAAkC,CAAlC,CAAD;AADH,OAAf;AAGA,MAAA,MAAM,CAAC,OAAP,GAAiB;AACb,QAAA,IAAI,EAAE;AADO,OAAjB;;AAIA,UAAI,aAAa,CAAC,IAAd,CAAmB,WAAnB,OAAqC,OAAzC,EAAkD;AAC9C,QAAA,MAAM,CAAC,IAAP,GAAc,SAAd;AACA,QAAA,IAAI,CAAC,QAAL,GAAgB,OAAhB;AACA,YAAM,KAAK,GAAG,EAAd;AACA,QAAA,IAAI,CAAC,KAAL,GAAa,KAAb;AACA,QAAA,KAAK,CAAC,KAAN,GAAc,QAAQ,CAAC,aAAa,CAAC,KAAf,CAAtB;AACH,OAND,MAMO,IAAI,aAAa,CAAC,IAAd,CAAmB,WAAnB,OAAqC,QAAzC,EAAmD;AACtD,QAAA,IAAI,CAAC,QAAL,GAAgB,OAAhB;;AACA,YAAI,aAAa,CAAC,KAAd,CAAoB,WAApB,GAAkC,QAAlC,CAA2C,OAA3C,CAAJ,EAAyD;AACrD,UAAA,IAAI,CAAC,QAAL,GAAgB,QAAhB,CADqD,CAC3B;AAC7B;;AACD,YAAM,KAAK,GAAG,EAAd;AACA,QAAA,IAAI,CAAC,KAAL,GAAa,KAAb;AACA,QAAA,KAAK,CAAC,EAAN,GAAW;AACP,UAAA,IAAI,EAAE,QAAQ,CAAC,oCAAU,aAAa,CAAC,EAAxB,EAA4B,CAA5B,CAAD;AADP,SAAX;;AAGA,YAAI,aAAa,CAAC,IAAlB,EAAwB;AACpB;AACA,cAAM,KAAK,GAAG,aAAa,CAAC,IAAd,CAAmB,WAAnB,EAAd;AACA,UAAA,KAAK,CAAC,KAAN,GAAc;AACV,YAAA,WAAW,EAAE,KAAK,CAAC,QAAN,CAAe,IAAf,CADH;AAEV,YAAA,SAAS,EAAE,KAAK,CAAC,QAAN,CAAe,IAAf,CAFD;AAGV,YAAA,UAAU,EAAE,KAAK,CAAC,QAAN,CAAe,IAAf,CAHF;AAIV,YAAA,SAAS,EAAE,KAAK,CAAC,QAAN,CAAe,IAAf;AAJD,WAAd;AAMH;;AACD,YAAI,aAAa,CAAC,KAAd,IAAuB,IAAvB,IAA+B,aAAa,CAAC,KAAd,CAAoB,IAApB,IAA4B,IAA/D,EAAqE;AACjE;AACA,cAAM,KAAK,GAAG,KAAK,CAAC,OAAN,CAAc,aAAa,CAAC,KAAd,CAAoB,IAAlC,IACR,aAAa,CAAC,KAAd,CAAoB,IADZ,GAER,CAAC,aAAa,CAAC,KAAd,CAAoB,IAArB,CAFN;AAGA,UAAA,KAAK,CAAC,OAAN,CAAc,UAAC,IAAD,EAAU;AACpB,YAAA,OAAO,CAAC,GAAR,CAAY,IAAZ;AACH,WAFD;AAGH;;AACD,YAAI,aAAa,CAAC,MAAd,IACA,aAAa,CAAC,MAAd,SADA,IAEA,aAAa,CAAC,MAAd,CAAqB,MAFrB,IAGA,aAAa,CAAC,MAAd,QAHA,IAIA,aAAa,CAAC,MAAd,CAAqB,OAJzB,EAIkC;AAC9B,UAAA,OAAO,CAAC,GAAR,CAAY,aAAa,CAAC,MAA1B;AACA,UAAA,KAAK,CAAC,MAAN,GAAe;AACX,qBAAO,QAAQ,CAAC,aAAa,CAAC,MAAd,UAA2B,KAA3B,CAAiC,GAAjC,EAAsC,CAAtC,CAAD,CADJ;AAEX,YAAA,MAAM,EAAE,QAAQ,CAAC,aAAa,CAAC,MAAd,CAAqB,MAArB,CAA4B,KAA5B,CAAkC,GAAlC,EAAuC,CAAvC,CAAD,CAFL;AAGX,oBAAM,QAAQ,CAAC,aAAa,CAAC,MAAd,SAA0B,KAA1B,CAAgC,GAAhC,EAAqC,CAArC,CAAD,CAHH;AAIX,YAAA,OAAO,EAAE,QAAQ,CAAC,aAAa,CAAC,MAAd,CAAqB,OAArB,CAA6B,KAA7B,CAAmC,GAAnC,EAAwC,CAAxC,CAAD;AAJN,WAAf;AAMH,SAzCqD,CA0CtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACH,OAtDM,MAsDA,IAAI,aAAa,CAAC,IAAd,CAAmB,WAAnB,OAAqC,QAAzC,EAAmD;AACtD,QAAA,IAAI,CAAC,QAAL,GAAgB,QAAhB;AACH;;AACD;AACI;AACA,YAAM,CAAC,GAAG,KAAK,WAAL,CAAiB,aAAa,CAAC,cAA/B,CAAV;AACA,QAAA,MAAM,CAAC,IAAP,GAAc,CAAC,CAAC,MAAhB;AACA,QAAA,MAAM,CAAC,IAAP,GAAc,EAAd;AACA,QAAA,MAAM,CAAC,IAAP,CAAY,IAAZ,GAAmB,CAAC,CAAC,IAArB;;AACA,YAAI,CAAC,CAAC,OAAF,IAAa,CAAC,CAAC,MAAnB,EAA2B;AACvB,cAAM,MAAM,GAAG,EAAf;AACA,UAAA,IAAI,CAAC,MAAL,GAAc,MAAd;AACA,UAAA,MAAM,CAAC,KAAP,GAAe;AACX,YAAA,MAAM,EAAE,CAAC,CAAC,MADC;AAEX,YAAA,OAAO,EAAE,CAAC,CAAC;AAFA,WAAf;AAIH;AACJ;AAED,UAAM,QAAQ,GAAG,yCAAe,aAAa,CAAC,IAA7B,EAAmC,QAAnC,EAA6C,IAA7C,CAAjB;AACA,aAAO,QAAP;AACH;;;;;;;;;;;AC1JL,qDAAiD;AAEjD;;GAEG;AACH,MAAa,UAAW,SAAQ,+BAAc;IAE1C,KAAK,CAAC,WAAiB;QACnB,MAAM,UAAU,GAAI,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;QAC7C,UAAU,CAAC,IAAI,GAAG,MAAM,CAAC;QAEzB,IAAI,WAAW,CAAC,aAAa,EAAE;YAC3B,UAAU,CAAC,IAAI,CAAC,EAAE,GAAG,QAAQ,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;SAC5D;QAED,IAAI,WAAW,CAAC,iBAAiB,EAAE;YAC/B,UAAU,CAAC,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC;YAEjE,IAAI,WAAW,CAAC,iBAAiB,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;gBAC7C,UAAU,CAAC,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;aAC3C;iBAAM,IAAI,WAAW,CAAC,iBAAiB,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;gBACpD,UAAU,CAAC,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;aACvC;iBAAM,IAAI,WAAW,CAAC,iBAAiB,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;gBACpD,UAAU,CAAC,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC;aACzC;iBACI;gBACD,UAAU,CAAC,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;aAC3C;SACJ;QAED,OAAO,UAAU,CAAC;IACtB,CAAC;CACJ;AA3BD,gCA2BC;;;;;AChCD,0DAAuD;AACvD,sEAAkH;AAelH;;GAEG;AACH,MAAa,cAAc;IACvB,KAAK,CAAC,WAAiB;QACnB,MAAM,UAAU,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;QACzC,UAAU,CAAC,IAAI,GAAG,WAAW,CAAC,IAAI,CAAC;QACnC,IAAI,WAAW,CAAC,KAAK,EACrB;YACI,UAAU,CAAC,IAAI,IAAI,KAAK,WAAW,CAAC,KAAK,GAAG,CAAC;SAChD;QAED,UAAU,CAAC,IAAI,CAAC,UAAU,GAAG,wCAAe,CAAC,WAAW,CAAC,CAAC;QAC1D,UAAU,CAAC,IAAI,CAAC,WAAW,GAAG,yCAAgB,CAAC,WAAW,CAAC,CAAC;QAE5D,OAAO,UAAU,CAAC;IACtB,CAAC;IAEO,cAAc;QAClB,OAAO;YACH,IAAI,EAAE,EAAE;YACR,GAAG,EAAE,EAAE;YACP,MAAM,EAAE,EAAE;YACV,KAAK,EAAE,EAAE;YACT,GAAG,EAAE,2BAA2B;YAChC,IAAI,EAAE,WAAW;YACjB,IAAI,EAAE,6BAAa,CAAC,aAAa,EAAE;YACnC,UAAU,EAAE;gBACR,OAAO,EAAE,CAAC;aACb;SACJ,CAAC;IACN,CAAC;CACJ;AA7BD,wCA6BC;;;;;AChDD,qDAAiD;AAEjD;;GAEG;AACH,MAAa,YAAa,SAAQ,+BAAc;IAE5C,KAAK,CAAC,WAAiB;QACnB,MAAM,UAAU,GAAI,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;QAC7C,UAAU,CAAC,IAAI,GAAG,QAAQ,CAAC;QAC3B,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,WAAW,CAAC,YAAY,CAAC;QAE7D,UAAU,CAAC,IAAI,CAAC,IAAI,GAAG;YACnB,IAAI,EACJ;gBACI,KAAK,EAAE,WAAW,CAAC,MAAM;gBACzB,GAAG,EAAE,QAAQ;aAChB;YAED,IAAI,EACJ;gBACI,KAAK,EAAE,WAAW,CAAC,MAAM;gBACzB,GAAG,EAAE,QAAQ;aAChB;YAED,IAAI,EACJ;gBACI,KAAK,EAAE,WAAW,CAAC,cAAc;gBACjC,GAAG,EAAE,iBAAiB;aACzB;YAED,IAAI,EACJ;gBACI,KAAK,EAAE,WAAW,CAAC,QAAQ;gBAC3B,GAAG,EAAE,UAAU;aAClB;SACJ,CAAC;QAEF,IAAI,WAAW,CAAC,QAAQ,KAAK,YAAY,EACzC;YACI,UAAU,CAAC,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC;SAC1C;QAED,IAAI,WAAW,CAAC,QAAQ,KAAK,WAAW,EACxC;YACI,UAAU,CAAC,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC;SACzC;QAED,IAAI,WAAW,CAAC,QAAQ,KAAK,yBAAyB,EACtD;YACI,6GAA6G;YAC7G,UAAU,CAAC,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC;SACzC;QAED,OAAO,UAAU,CAAC;IACtB,CAAC;CACJ;AAnDD,oCAmDC;;;;;ACxDD,qDAAkD;AAElD;;GAEG;AACH,MAAa,WAAW;IAEpB;;;OAGG;IACH,UAAU,CAAC,YAAkB;QACzB,IAAI,KAAK,GAAW,EAAE,CAAC;QAEvB,YAAY,CAAC,OAAO,CAAC,CAAC,WAAW,EAAE,EAAE;YACjC,IAAI;gBACA,gEAAgE;gBAChE,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,EAAE;oBACvC,OAAO;iBACV;gBAED,MAAM,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;gBACnD,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aACzB;YAED,OAAO,CAAC,EAAE;gBACN,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;aACpB;QACL,CAAC,CAAC,CAAC;QAEH,OAAO,KAAK,CAAC;IACjB,CAAC;IAEO,cAAc,CAAC,WAAiB;QACpC,MAAM,cAAc,GAAG,IAAI,+BAAc,EAAE,CAAC;QAC5C,MAAM,MAAM,GAAG,cAAc,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;QAClD,OAAO,MAAM,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;IACrC,CAAC;IAEO,kBAAkB,CAAC,WAAiB;QACxC,wGAAwG;QACxG,MAAM,eAAe,GAAI,WAAW,CAAC,YAAuB,CAAC,WAAW,EAAE,CAAC;QAC3E,IAAI,eAAe,CAAC,UAAU,CAAC,SAAS,CAAC;YACrC,eAAe,CAAC,UAAU,CAAC,aAAa,CAAC;YACzC,eAAe,CAAC,UAAU,CAAC,QAAQ,CAAC,EACxC;YACI,OAAO,KAAK,CAAC;SAChB;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AA9CD,kCA8CC;;;;;ACnDD,qDAA8D;AAC9D,2CAAwC;AACxC,iDAA8C;AAC9C,mDAAgD;AAChD,6CAA0C;AAE1C;;GAEG;AACH,MAAa,cAAc;IAEvB;;;;OAIG;IACH,MAAM,CAAC,WAAiB;QACpB,IAAI,WAAW,CAAC,KAAK,KAAK,MAAM,EAChC;YACI,OAAO,IAAI,qBAAS,EAAE,CAAC;SAC1B;QAED,IAAI,WAAW,CAAC,UAAU,KAAK,MAAM,EACrC;YACI,OAAO,IAAI,2BAAY,EAAE,CAAC;SAC7B;QAED,IAAI,WAAW,CAAC,MAAM,KAAK,MAAM,EACjC;YACI,OAAO,IAAI,uBAAU,EAAE,CAAC;SAC3B;QAED,IAAI,WAAW,CAAC,QAAQ,KAAK,iBAAiB;YAC1C,WAAW,CAAC,QAAQ,KAAK,kBAAkB;YAC3C,WAAW,CAAC,QAAQ,KAAK,UAAU,EACvC;YACI,OAAO,IAAI,6BAAa,EAAE,CAAC;SAC9B;QAED,OAAO,IAAI,+BAAc,EAAE,CAAC;IAChC,CAAC;CACJ;AAhCD,wCAgCC;;;;;ACzCD,qDAAiD;AAEjD;;GAEG;AACH,MAAa,aAAc,SAAQ,+BAAc;IAC7C,KAAK,CAAC,WAAiB;QACnB,MAAM,UAAU,GAAI,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;QAC7C,UAAU,CAAC,IAAI,GAAG,SAAS,CAAC;QAE5B,IAAI,WAAW,CAAC,QAAQ,KAAK,iBAAiB,EAC9C;YACI,UAAU,CAAC,IAAI,CAAC,IAAI,GAAG,gBAAgB,CAAA;SAC1C;aACI,IAAI,WAAW,CAAC,QAAQ,KAAK,kBAAkB,EACpD;YACI,UAAU,CAAC,IAAI,CAAC,IAAI,GAAG,iBAAiB,CAAA;SAC3C;aACI,IAAI,WAAW,CAAC,QAAQ,KAAK,UAAU,EAC5C;YACI,UAAU,CAAC,IAAI,CAAC,IAAI,GAAG,OAAO,CAAA;SACjC;QAED,OAAO,UAAU,CAAC;IACtB,CAAC;CACJ;AApBD,sCAoBC;;;;;ACzBD,qDAAiD;AAEjD;;;GAGG;AACH,MAAa,SAAU,SAAQ,+BAAc;IACzC,KAAK,CAAC,WAAiB;QACnB,MAAM,UAAU,GAAI,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;QAC7C,UAAU,CAAC,IAAI,GAAG,KAAK,CAAC;QAExB,mCAAmC;QACnC,IAAI,WAAW,CAAC,QAAQ,EAAE;YAEtB,wGAAwG;YACxG,MAAM,eAAe,GAAW,EAAE,CAAC;YACnC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;gBAC3C,eAAe,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAA;aAClD;iBACI;gBACD,eAAe,CAAC,IAAI,CAAC,GAAG,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;aACtD;YAED,UAAU,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC;SAClE;QACD,OAAO,UAAU,CAAC;IACtB,CAAC;IAEO,aAAa,CAAC,eAAqB;QACvC,MAAM,cAAc,GAAW,EAAE,CAAC;QAElC,eAAe,CAAC,OAAO,CAAC,cAAc,CAAC,EAAE;YACrC,IAAI,cAAc,CAAC,QAAQ,KAAK,eAAe,EAC/C;gBACI,cAAc,CAAC,IAAI,CACf;oBACI,IAAI,EAAE,cAAc,CAAC,KAAK;oBAC1B,GAAG,EAAE,cAAc,CAAC,MAAM;oBAC1B,WAAW,EAAE,EAAE;iBAClB,CACJ,CAAC;aACL;QACL,CAAC,CAAC,CAAC;QAEH,OAAO,cAAc,CAAC;IAC1B,CAAC;CACJ;AAxCD,8BAwCC;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9CD;;AACA;;;;;;IAEa,iB;;;;;;;;;;;;8BAYC;AACN,aAAO,EAAP;AACH;;;sCAEiB,I,EAAM;AAAA;;AACpB,MAAA,IAAI,CAAC,IAAL,CAAU,wBAAV,EAAoC,KAApC;AAAA,iGAA0C,iBAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACtC,kBAAA,KAAK,CAAC,cAAN;AAEM,kBAAA,WAHgC,GAGlB,IAAI,CAAC,KAAL,CAAW,CAAC,CAAC,eAAD,CAAD,CAAmB,GAAnB,EAAX,CAHkB;AAIhC,kBAAA,aAJgC,GAIhB;AAClB,oBAAA,OAAO,EAAE,CAAC,CAAC,UAAD,CAAD,CAAc,EAAd,CAAiB,UAAjB,CADS;AAElB,oBAAA,KAAK,EAAE,CAAC,CAAC,QAAD,CAAD,CAAY,EAAZ,CAAe,UAAf,CAFW;AAGlB,oBAAA,SAAS,EAAE,CAAC,CAAC,YAAD,CAAD,CAAgB,EAAhB,CAAmB,UAAnB,CAHO;AAIlB,oBAAA,SAAS,EAAE,CAAC,CAAC,OAAD,CAAD,CAAW,EAAX,CAAc,UAAd,CAJO;AAKlB,oBAAA,SAAS,EAAE,CAAC,CAAC,YAAD,CAAD,CAAgB,EAAhB,CAAmB,UAAnB,CALO;AAMlB,oBAAA,MAAM,EAAE,CAAC,CAAC,SAAD,CAAD,CAAa,EAAb,CAAgB,UAAhB,CANU;AAOlB,oBAAA,MAAM,EAAE,CAAC,CAAC,SAAD,CAAD,CAAa,EAAb,CAAgB,UAAhB,CAPU;AAQlB,oBAAA,QAAQ,EAAE,CAAC,CAAC,WAAD,CAAD,CAAe,EAAf,CAAkB,UAAlB,CARQ;AASlB,oBAAA,UAAU,EAAE,CAAC,CAAC,aAAD,CAAD,CAAiB,EAAjB,CAAoB,UAApB;AATM,mBAJgB;AAgBhC,kBAAA,QAhBgC,GAgBrB,IAAI,oCAAJ,EAhBqB;AAAA;AAAA,yBAiBhC,QAAQ,CAAC,sBAAT,CAAgC,KAAI,CAAC,MAArC,EAA6C,WAA7C,EAA0D,aAA1D,CAjBgC;;AAAA;AAmBtC,kBAAA,EAAE,CAAC,aAAH,CAAiB,IAAjB,CACI,qJADJ;;AAGA,kBAAA,KAAI,CAAC,KAAL;;AAtBsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA1C;;AAAA;AAAA;AAAA;AAAA;AAwBH;;;wBAxC2B;AACxB,UAAM,OAAO,qGAAb;AACA,MAAA,OAAO,CAAC,EAAR,GAAa,gBAAb;AACA,MAAA,OAAO,CAAC,OAAR,GAAkB,CAAC,aAAD,CAAlB;AACA,MAAA,OAAO,CAAC,KAAR,GAAgB,yBAAhB;AACA,MAAA,OAAO,CAAC,QAAR,GAAmB,qDAAnB;AACA,MAAA,OAAO,CAAC,KAAR,GAAgB,GAAhB;AACA,MAAA,OAAO,CAAC,MAAR,GAAiB,MAAjB;AACA,aAAO,OAAP;AACH;;;EAVkC,e;;;;;;;;ACHvC,6CAAwD;AAaxD,MAAa,uBAAwB,SAAQ,uBAAU;IAEnD,YAAY,cAAwC,EAAE,MAAkB,EAAE,OAA6B;QAEnG,MAAM,UAAU,GAAG,uBAAuB,CAAC,aAAa,CAAC,cAAc,EAAE,MAAM,CAAC,CAAC;QACjF,KAAK,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;IAC/B,CAAC;IAED,MAAM,KAAK,cAAc;QACrB,MAAM,OAAO,GAAG,KAAK,CAAC,cAAc,CAAC;QACrC,OAAO,CAAC,EAAE,GAAG,oBAAoB,CAAC;QAClC,+DAA+D;QAC/D,OAAO,CAAC,OAAO,GAAG,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC;QACzC,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;QACzB,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC;QACxB,OAAO,OAAO,CAAC;IACnB,CAAC;IAED,MAAM,CAAC,aAAa,CAAC,cAAwC,EAAE,MAAkB;QAC7E,MAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,6BAA6B,CAAC,CAAC;QAChE,MAAM,YAAY,GAAG,yEAAyE,CAAC;QAE/F,MAAM,WAAW,GAAS,cAAc,CAAC;QAEzC,MAAM,YAAY,GAAG;YACjB,MAAM;YACN,WAAW;SACd,CAAC;QAEF,MAAM,OAAO,GAAG;YACZ,MAAM,EAAE;gBACJ,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,mCAAmC,CAAC;aACjE;SACJ,CAAA;QAED,MAAM,YAAY,GAAG,GAAG,EAAE,CAAC,WAAW,CAAC;QAEvC,OAAO;YACH,KAAK;YACL,YAAY;YACZ,YAAY;YACZ,YAAY;YACZ,OAAO;YACP,OAAO,EAAE,QAAQ;SACpB,CAAA;IACL,CAAC;CACJ;AA9CD,0DA8CC;;;;;AC3DD,6CAAwC;AAExC,MAAa,wBAAyB,SAAQ,uBAAU;IACpD,YAAY,OAA6B;QACrC,MAAM,UAAU,GAAG,wBAAwB,CAAC,aAAa,EAAE,CAAC;QAE5D,KAAK,CAAC,UAAU,EAAE,OAAO,CAAC,CAAA;IAC9B,CAAC;IAED,MAAM,CAAC,aAAa;QAChB,OAAO;YACH,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,yCAAyC,CAAC;YACpE,OAAO,EAAE;gBACL,MAAM,EAAE;oBACJ,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,0CAA0C,CAAC;iBACxE;gBACD,MAAM,EAAE;oBACJ,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,0CAA0C,CAAC;iBACxE;aACJ;YACD,OAAO,EAAE,QAAQ;YACjB,YAAY,EAAE,EAAE;YAChB,YAAY,EAAE,iFAAiF;SAClG,CAAA;IACL,CAAC;IAED,MAAM,KAAK,cAAc;QACrB,MAAM,OAAO,GAAG,KAAK,CAAC,cAAc,CAAC;QACrC,OAAO,CAAC,EAAE,GAAG,iCAAiC,CAAC;QAC/C,yDAAyD;QACzD,OAAO,CAAC,OAAO,GAAG,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC;QACzC,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;QACzB,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC;QACxB,OAAO,OAAO,CAAC;IACnB,CAAC;CACJ;AAjCD,4DAiCC;;;;;;;;;;;;;;AC1BD;;;;;;GAMG;AACH,MAAa,UAAW,SAAQ,MAAM;IAWlC,YAAY,UAA0B,EAAE,OAA6B;QACjE,KAAK,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;QAE3B,MAAM,EAAC,YAAY,EAAE,YAAY,EAAC,GAAG,UAAU,CAAC;QAChD,IAAI,CAAC,aAAa,GAAG,YAAY,CAAC;QAClC,IAAI,CAAC,aAAa,GAAG,YAAY,CAAC;QAElC,IAAI,CAAC,aAAa,GAAG,UAAU,CAAC,YAAY,CAAC,CAAC,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,CAAC,GAAG,EAAE,GAAE,CAAC,CAAC;QAElF,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QAExC,IAAI,CAAC,iBAAiB,GAAG,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;YACrD,IAAI,CAAC,iBAAiB,GAAG,OAAO,CAAC;YACjC,mEAAmE;YACnE,IAAI,CAAC,gBAAgB,GAAG,MAAM,CAAC;QACnC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,EAAE,CAAC;IACjC,CAAC;IAEK,KAAK;;;;;YACP,MAAM,OAAM,KAAK,WAAE,CAAC;YAEpB,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACf,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aAC1C;QACL,CAAC;KAAA;IAEK,MAAM,CAAC,MAAM;;;;;;YACf,IAAI,CAAC,cAAc,GAAG,MAAA,MAAM,CAAC,IAAI,mCAAI,MAAM,CAAC,KAAK,CAAC;YAElD,YAAY;YACZ,OAAM,MAAM,YAAC,MAAM,EAAE;YACrB,MAAM,IAAI,CAAC,WAAW,CAAC,QAAQ,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAE,CAAC,CAAC,CAAC,CAAC;;KACtF;IAEK,WAAW,CAAC,IAAY;;YAC1B,6CAA6C;YAC7C,IAAI,CAAC,SAAS,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;YACrE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAC3C,CAAC;KAAA;IAEK,OAAO,CAAC,OAAO;;;;;YACjB,MAAM,OAAO,GAAG,MAAM,cAAc,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;YAC7E,OAAO,WAAW,CAAC,OAAM,OAAO,aAAI;gBAChC,OAAO;aACV,CAAC,CAAC;QACP,CAAC;KAAA;IAEK,MAAM;;YACR,MAAM,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YAExB,IAAI,IAAI,CAAC,iBAAiB,KAAK,SAAS,IAAI,IAAI,CAAC,SAAS,KAAK,SAAS,EAAE;gBACtE,OAAO,IAAI,CAAC,eAAe,EAAE,CAAC;aACjC;YACD,OAAO,MAAM,IAAI,CAAC,iBAAiB,CAAC;QACxC,CAAC;KAAA;IAED,eAAe;QACX,OAAO,EAAE,CAAC;IACd,CAAC;IAED;OACG;IACH,IAAI,QAAQ;QACR,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC;IAC1B,CAAC;IAED;OACG;IACH,IAAI,QAAQ;QACR,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC;IAChC,CAAC;IAED,gBAAgB;IAChB,MAAM,CAAC,UAAU;QACb,OAAO,EAAE,CAAC;IACd,CAAC;IAED;OACG;IACH,qBAAqB;QACjB,YAAY;QACZ,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC;IACxF,CAAC;CACJ;AAhGD,gCAgGC;;;;;;;;;;;;;;AChHD,6CAAwD;AAExD,qDAAgD;AAChD,2CAAsC;AACtC,qDAAgD;AAQhD,MAAa,qBAAqB;IAC9B,MAAM,CAAO,mBAAmB,CAAC,KAAe,EAAE,OAA2B,EAAE,UAA2B;;YACtG,MAAM,iBAAiB,GAAG,qBAAqB,CAAC,oBAAoB,CAAC,KAAK,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC;YAEjG,OAAO,IAAI,uBAAU,CAAC,iBAAiB,CAAC,CAAC;QAC7C,CAAC;KAAA;IAED,MAAM,CAAO,gBAAgB,CAAC,OAAwB,EAAE,SAA4B;;YAChF,MAAM,cAAc,GAAG,qBAAqB,CAAC,iBAAiB,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;YACnF,OAAO,IAAI,uBAAU,CAAC,cAAc,CAAC,CAAC;QAC1C,CAAC;KAAA;IAED,MAAM,CAAO,iBAAiB,CAAC,KAAe,EAAE,OAA2B,EAAE,UAA6B;;YACtG,MAAM,eAAe,GAAG,qBAAqB,CAAC,kBAAkB,CAAC,KAAK,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC;YAE7F,OAAO,IAAI,uBAAU,CAAC,eAAe,CAAC,CAAC;QAC3C,CAAC;KAAA;IAED,MAAM,CAAC,oBAAoB,CAAC,KAAe,EAAG,OAA2B,EAAE,UAA2B;;QAClG,MAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;QAEhD,MAAM,cAAc,GAAG;YACnB,YAAY,EAAE;gBACV,KAAK,EAAE,iBAAiB;gBACxB,KAAK,EAAE,MAAA,KAAK,CAAC,uBAAuB,EAAE,0CAAE,KAAK;gBAC7C,OAAO,EAAE,CAAC,EAAE;aACf;YACD,KAAK,EAAE;gBACH,KAAK,EAAE,WAAW;gBAClB,KAAK,EAAE,MAAA,KAAK,CAAC,eAAe,CAAC,YAAY,CAAC,0CAAE,KAAK;gBACjD,OAAO,EAAE,CAAC,CAAC;aACd;YACD,KAAK,EAAE;gBACH,KAAK,EAAE,WAAW;gBAClB,KAAK,EAAE,MAAA,KAAK,CAAC,eAAe,CAAC,gBAAgB,CAAC,0CAAE,KAAK;gBACrD,OAAO,EAAE,CAAC,CAAC;aACd;SACJ,CAAC;QAEF,MAAM,oBAAoB,GAAG,KAAK,CAAC,kBAAkB,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,aAAa,EAAE,CAAC,CAAC;QACzF,IAAI,YAAY,GAAG,CAAC,CAAC;QACrB,oBAAoB,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,EAAE;;YACpC,cAAc,CAAC,SAAS,MAAM,CAAC,IAAI,EAAE,CAAC,GAAG;gBACrC,KAAK,EAAE,WAAW;gBAClB,MAAM,EAAE,MAAM,CAAC,IAAI;gBACnB,KAAK,EAAE,MAAA,KAAK,CAAC,eAAe,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC,0CAAE,KAAK;gBAC5D,IAAI,EAAE,CAAC,CAAC;aACX,CAAC;YACF,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC;QAC7D,CAAC,CAAC,CAAC;QAEH,MAAM,KAAK,GAAG,IAAI,qBAAS,CAAC,UAAU,CAAC,CAAC;QACxC,KAAK,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;QAE9B,qCAAqC;QACrC,IAAI,MAAA,OAAO,CAAC,MAAM,0CAAE,KAAK,EAAE;YACvB,MAAM,aAAa,GAAG,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;YAC3C,MAAM,QAAQ,GAAG,YAAY,GAAG,aAAa,CAAC;YAC9C,IAAI,QAAQ,KAAK,CAAC,EAAE;gBAChB,KAAK,CAAC,aAAa,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;aAC9C;SACJ;QAED,MAAM,OAAO,GAAG;YACZ,QAAQ,EAAE;gBACN,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC;gBACzC,QAAQ,EAAE,GAAG,EAAE,GAAE,CAAC;aACrB;SACJ,CAAC;QAEF,MAAM,YAAY,GAAG,CAAC,IAAI,EAAE,EAAE;YAC1B,MAAM,KAAK,GAAG,iBAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;YAC7E,MAAM,OAAO,GAAG,iBAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;YACvF,gDAAgD;YAChD,MAAM,MAAM,GAAe,EAAE,CAAC;YAE9B,IAAI,KAAK,EAAE;gBACP,KAAK,CAAC,aAAa,CAAC,WAAW,EAAE,KAAK,CAAC,CAAA;aAC1C;YACD,IAAI,OAAO,EAAE;gBACT,wBAAwB;gBACxB,MAAM,OAAO,GAAG,cAAc,CAAC,OAAO,CAAC,CAAC;gBACxC,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC;gBAElD,6BAA6B;gBAC7B,MAAM,CAAC,UAAU,GAAG,OAAO,CAAC,OAAO,CAAC;aACvC;YAED,OAAO,EAAC,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,EAAC,CAAC;QAC3C,CAAC,CAAA;QAED,MAAM,YAAY,GAAG,4DAA4D,CAAC;QAClF,MAAM,YAAY,GAAG;YACjB,KAAK,EAAE,KAAK,CAAC,gBAAgB,EAAE;YAC/B,KAAK,EAAE,OAAO,CAAC,KAAK;YACpB,cAAc;SACjB,CAAC;QAEF,OAAO;YACH,KAAK;YACL,YAAY;YACZ,YAAY;YACZ,OAAO;YACP,YAAY;SACf,CAAA;IACL,CAAC;IAGD,MAAM,CAAC,iBAAiB,CAAC,eAAgC,EAAE,SAA6B;QACpF,MAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,0BAA0B,CAAC,CAAC;QAE7D,MAAM,YAAY,GAAG,yDAAyD,CAAC;QAC/E,MAAM,YAAY,GAAG;YACjB,MAAM,EAAE,eAAe,aAAf,eAAe,uBAAf,eAAe,CAAE,MAAM;YAC/B,KAAK,EAAE,SAAS,CAAC,gBAAgB,EAAE;YACnC,YAAY,EAAE,MAAM,CAAC,GAAG,CAAC,YAAY;YACrC,WAAW,EAAE,MAAM,CAAC,GAAG,CAAC,WAAW;SACtC,CAAC;QAEF,MAAM,OAAO,GAAI;YACb,QAAQ,EAAE;gBACN,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC;gBACzC,QAAQ,EAAE,GAAG,EAAE,GAAE,CAAC;aACrB;SACJ,CAAC;QAEF,MAAM,YAAY,GAAG,CAAC,IAAY,EAAE,EAAE;YAClC,MAAM,cAAc,GAAG,iBAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;YAC/F,MAAM,EAAE,GAAG,iBAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;YACvE,MAAM,OAAO,GAAG,iBAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;YACjF,MAAM,UAAU,GAAG,iBAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,GAAG,EAAE,CAAe,CAAC;YAErG,OAAO,EAAC,cAAc,EAAE,UAAU,EAAE,EAAE,EAAE,OAAO,EAAC,CAAC;QACrD,CAAC,CAAA;QAED,OAAO;YACH,KAAK;YACL,YAAY;YACZ,YAAY;YACZ,OAAO;YACP,YAAY;SACf,CAAA;IACL,CAAC;IAED,MAAM,CAAC,kBAAkB,CAAC,KAAe,EAAE,OAA2B,EAAE,UAA6B;;QACjG,MAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,IAAI,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAC5E,MAAM,YAAY,GAAG,0DAA0D,CAAC;QAEhF,MAAM,UAAU,GAAG,KAAK,CAAC,aAAa,EAAE,CAAC;QACzC,MAAM,SAAS,GAAG,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;QACtG,MAAM,MAAM,GAAG,KAAK,CAAC,SAAS,EAAE,CAAC;QAEjC,MAAM,YAAY,GAAG;YACjB,SAAS,EAAE,OAAO,CAAC,KAAK,CAAC,SAAS;YAClC,UAAU,EAAE,iBAAO,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE,EAAE,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC;YACtE,KAAK,EAAE,SAAS,CAAC,KAAK;YACtB,MAAM;SACT,CAAA;QAGD,MAAM,OAAO,GAAG;YACZ,IAAI,EAAE;gBACF,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,uBAAuB,CAAC;gBAClD,QAAQ,EAAE,GAAG,EAAE,GAAE,CAAC;aACrB;SACJ,CAAC;QACF,2CAA2C;QAC3C,IAAI,MAAA,OAAO,CAAC,KAAK,CAAC,KAAK,0CAAE,MAAM,EAAE;YAC7B,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CACvB,CAAC,IAAI,EAAE,EAAE,CACL,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG;gBACb,KAAK,EAAE,IAAI;gBACX,QAAQ,EAAE,GAAG,EAAE,GAAE,CAAC;aACrB,CAAC,CACT,CAAC;SACL;QAED,MAAM,YAAY,GAAG,CAAC,IAAY,EAAE,cAAc,EAAE,EAAE;YAClD,MAAM,MAAM,GAAG,iBAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;YACpF,MAAM,QAAQ,GAAG,iBAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;YAC5F,MAAM,SAAS,GAAG,KAAK,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;YAC7C,MAAM,KAAK,GAAG,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;YACvC,mFAAmF;YACnF,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,IAAI,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;YACjF,MAAM,cAAc,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;YACzE,MAAM,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAA;YAEhD,MAAM,cAAc,GAAG,GAAG,UAAU,MAAM,cAAc,IAAI,SAAS,EAAE,CAAC;YAExE,UAAU,CAAC,aAAa,CAAC,SAAS,CAAC,KAAK,EAAE,SAAS,CAAC,KAAK,CAAC,CAAC;YAE3D,qBAAS,CAAC,gBAAgB,CAAC,OAAO,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC;YAEtD,iDAAiD;YACjD,MAAM,gBAAgB,GAAG,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;YACtE,IAAI,gBAAgB,EAAE;gBAClB,UAAU,CAAC,aAAa,CAAC,oBAAoB,EAAE,CAAC,CAAC,CAAC;aACrD;YAED,OAAO;gBACH,KAAK,EAAE,cAAc;gBACrB,SAAS;gBACT,KAAK;gBACL,KAAK,EAAE,OAAO,CAAC,KAAK;gBACpB,KAAK,EAAE,UAAU;aACpB,CAAA;QACL,CAAC,CAAA;QAED,OAAO;YACH,KAAK;YACL,YAAY;YACZ,YAAY;YACZ,OAAO;YACP,YAAY;SACf,CAAA;IACL,CAAC;CACJ;AAxND,sDAwNC;;;;;;;;;;;;;;ACnOD,2CAAsC;AACtC,+CAAgD;AAKhD,6CAAwC;AAkCxC,MAAa,mBAAmB;IAC5B,MAAM,CAAO,MAAM,CAAC,IAAa,EAAE,KAAkB;;YAEjD,IAAI,IAAI,CAAC,cAAc,EAAE,EAAE;gBACvB,OAAO,mBAAmB,CAAC,wBAAwB,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;aACpE;YAED,IAAI,IAAI,CAAC,OAAO,EAAE,EAAE;gBAChB,OAAO,mBAAmB,CAAC,iBAAiB,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;aAC7D;YAED,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE;gBACtB,OAAO,mBAAmB,CAAC,uBAAuB,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;aACnE;QACL,CAAC;KAAA;IAED,MAAM,CAAO,wBAAwB,CAAC,IAAa,EAAE,KAAkB;;YACnE,MAAM,UAAU,GAAG,EAAC,KAAK,EAAE,IAAI,CAAC,IAAI;gBAChB,KAAK;aACxB,CAAC;YAEF,MAAM,YAAY,GAAG,iEAAiE,CAAC;YAEvF,qCAAqC;YACrC,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC;YAElD,0DAA0D;YAC1D,MAAM,WAAW,GAAG,SAAS,CAAC,aAAa,CAAC,MAAM,CAAC,KAAK,CAAC;YACzD,MAAM,kBAAkB,GAAG,SAAS,CAAC,+BAA+B,CAAC;YAErE,OAAO,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YAEzB,MAAM,YAAY,GAAG;gBACjB,WAAW;gBACX,kBAAkB;aACrB,CAAC;YACF,MAAM,YAAY,GAAG,mBAAmB,CAAC,mBAAmB,CAAC,YAAY,EAAE,UAAU,EAAE,IAAI,CAAC,CAAC;YAE7F,UAAU,CAAC,cAAc,CAAC,GAAG,YAAY,CAAC;YAC1C,UAAU,CAAC,cAAc,CAAC,GAAG,YAAY,CAAC;YAC1C,UAAU,CAAC,cAAc,CAAC,GAAG,YAAY,CAAC;YAE1C,YAAY;YACZ,OAAO,IAAI,uBAAU,CAAC,UAAU,CAAC,CAAC;QACtC,CAAC;KAAA;IAED,MAAM,CAAO,iBAAiB,CAAC,IAAa,EAAE,KAAkB;;YAC5D,MAAM,UAAU,GAAG,EAAC,KAAK,EAAE,IAAI,CAAC,IAAI;gBAChB,KAAK;aACxB,CAAC;YAEF,MAAM,YAAY,GAAG,0DAA0D,CAAC;YAChF,MAAM,YAAY,GAAG,EAAE,CAAC;YACxB,MAAM,YAAY,GAAG,mBAAmB,CAAC,YAAY,CAAC,YAAY,EAAE,UAAU,EAAE,IAAI,CAAC,CAAC;YAEtF,UAAU,CAAC,cAAc,CAAC,GAAG,YAAY,CAAC;YAC1C,UAAU,CAAC,cAAc,CAAC,GAAG,YAAY,CAAC;YAC1C,UAAU,CAAC,cAAc,CAAC,GAAG,YAAY,CAAC;YAE1C,YAAY;YACZ,OAAO,IAAI,uBAAU,CAAC,UAAU,CAAC,CAAC;QACtC,CAAC;KAAA;IAED,MAAM,CAAO,uBAAuB,CAAC,IAAa,EAAE,KAAkB;;YAClE,MAAM,UAAU,GAAG,EAAC,KAAK,EAAE,IAAI,CAAC,IAAI;gBAChB,KAAK;aACxB,CAAC;YAEF,MAAM,YAAY,GAAG,iEAAiE,CAAC;YACvF,MAAM,YAAY,GAAG,EAAE,CAAC;YACxB,MAAM,YAAY,GAAG,mBAAmB,CAAC,kBAAkB,CAAC,YAAY,EAAE,UAAU,EAAE,IAAI,CAAC,CAAC;YAE5F,UAAU,CAAC,cAAc,CAAC,GAAG,YAAY,CAAC;YAC1C,UAAU,CAAC,cAAc,CAAC,GAAG,YAAY,CAAC;YAC1C,UAAU,CAAC,cAAc,CAAC,GAAG,YAAY,CAAC;YAE1C,YAAY;YACZ,OAAO,IAAI,uBAAU,CAAC,UAAU,CAAC,CAAC;QACtC,CAAC;KAAA;IAED,MAAM,CAAC,kBAAkB,CAAC,YAAoB,EAAE,UAAsB,EAAE,IAAa;;QACjF,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;QAC5B,MAAM,KAAK,GAAG,GAAG,iBAAO,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;QAElD,MAAM,KAAK,GAAG,CAAA,MAAA,IAAI,CAAC,uBAAuB,EAAE,0CAAE,KAAK,KAAI,CAAC,GAAG,IAAI,CAAC;QAEhE,YAAY,CAAC,MAAM,CAAC,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;QACrD,YAAY,CAAC,OAAO,CAAC,GAAG,KAAK,CAAC;QAC9B,YAAY,CAAC,OAAO,CAAC,GAAG,KAAK,CAAC;QAE9B,IAAI,MAAM,GAAG,IAAI,CAAC;QAClB,UAAU,CAAC,OAAO,GAAG;YACjB,IAAI,EAAE;gBACF,KAAK,EAAE,UAAU;gBACjB,IAAI,EAAE,iCAAiC;gBACvC,QAAQ,EAAE,GAAG,EAAE,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;aACnC;SACJ,CAAC;QAEF,OAAO,CAAO,IAAY,EAAqC,EAAE;YAC7D,IAAI,MAAM;gBAAE,OAAO;YAEnB,MAAM,cAAc,GAAG,EAAyB,CAAC;YAEjD,WAAW,CAAC,cAAc,EAAE,mBAAmB,CAAC,4BAA4B,CAAC,IAAI,CAAC,CAAC,CAAA;YAEnF,iFAAiF;YACjF,MAAM,IAAI,CAAC,uBAAuB,CAAC,EAAC,KAAK,EAAE,cAAc,CAAC,KAAK,EAAC,CAAC,CAAC;YAElE,OAAO,EAAC,WAAW,EAAE,cAAc,EAAC,CAAC;QACzC,CAAC,CAAA,CAAC;IACN,CAAC;IAED,MAAM,CAAC,4BAA4B,CAAC,IAAY;QAC5C,MAAM,KAAK,GAAG,iBAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QAC7E,OAAO,EAAC,KAAK,EAAC,CAAC;IACnB,CAAC;IAED,MAAM,CAAC,YAAY,CAAC,YAAoB,EAAE,UAAsB,EAAE,IAAa;;QAC3E,MAAM,KAAK,GAAG,GAAG,iBAAO,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;QAClD,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;QAE9B,MAAM,KAAK,GAAG,CAAA,MAAA,IAAI,CAAC,iBAAiB,EAAE,0CAAE,KAAK,KAAI,CAAC,GAAG,KAAK,CAAC;QAE3D,YAAY,CAAC,OAAO,CAAC,GAAG,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,EAAE,CAAC;QAC9D,YAAY,CAAC,OAAO,CAAC,GAAG,KAAK,CAAC;QAC9B,YAAY,CAAC,OAAO,CAAC,GAAG,KAAK,CAAC;QAE9B,UAAU,CAAC,KAAK,GAAG,KAAK,CAAC;QACzB,IAAI,MAAM,GAAG,IAAI,CAAC;QAClB,IAAI,QAAQ,GAAG,KAAK,CAAC;QACrB,UAAU,CAAC,OAAO,GAAG;YACjB,MAAM,EAAE;gBACJ,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,uBAAuB,CAAC;gBAClD,QAAQ,EAAE,GAAG,EAAE,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;aACnC;YACD,QAAQ,EAAE;gBACN,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,yBAAyB,CAAC;gBACpD,QAAQ,EAAE,GAAG,EAAE;oBACX,QAAQ,GAAG,IAAI,CAAC;oBAChB,MAAM,GAAG,KAAK,CAAC;gBACnB,CAAC;aACJ;SACJ,CAAC;QACF,UAAU,CAAC,OAAO,GAAG,QAAQ,CAAC;QAE9B,OAAO,CAAO,IAAY,EAAqC,EAAE;YAC7D,IAAI,MAAM;gBAAE,OAAO;YAEnB,MAAM,cAAc,GAAG,EAAyB,CAAC;YAEjD,WAAW,CAAC,cAAc,EAAE,mBAAmB,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC,CAAC;YAC9E,WAAW,CAAC,cAAc,EAAE,mBAAmB,CAAC,yBAAyB,CAAC,QAAQ,CAAC,CAAC,CAAC;YAErF,MAAM,IAAI,CAAC,iBAAiB,CAAC,EAAC,KAAK,EAAE,cAAc,CAAC,KAAK,EAAE,QAAQ,EAAE,cAAc,CAAC,QAAQ,EAAC,CAAC,CAAC;YAE/F,OAAO,EAAC,KAAK,EAAE,cAAc,EAAC,CAAC;QACnC,CAAC,CAAA,CAAC;IACN,CAAC;IAED,MAAM,CAAC,sBAAsB,CAAC,IAAY;QACtC,MAAM,KAAK,GAAG,iBAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QAC7E,OAAO,EAAC,KAAK,EAAC,CAAA;IAClB,CAAC;IAED,MAAM,CAAC,yBAAyB,CAAC,QAAiB;QAC9C,OAAO,EAAC,QAAQ,EAAC,CAAA;IACrB,CAAC;IAED,MAAM,CAAC,mBAAmB,CAAC,YAAoB,EAAE,UAAsB,EAAE,IAAa;QAClF,IAAI,KAAK,GAAG,UAAU,CAAC,KAAK,IAAI,IAAI,CAAC,IAAI,CAAC;QAE1C,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,IAAkB,CAAC;QAC9C,MAAM,SAAS,GAAG,EAAE,CAAC;QAErB,MAAM,EAAC,KAAK,EAAE,MAAM,EAAC,GAAG,QAAQ,CAAC,KAAK,CAAC;QACvC,MAAM,EAAC,IAAI,EAAC,GAAG,QAAQ,CAAC;QACxB,wEAAwE;QACxE,IAAI,KAAK,CAAC,WAAW,EAAE;YACnB,SAAS,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,+BAA+B,CAAC,CAAC;SACxE;QACD,IAAI,KAAK,CAAC,SAAS,EAAE;YACjB,SAAS,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,6BAA6B,CAAC,CAAC;YACnE,SAAS,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,6BAA6B,CAAC,CAAC;SACtE;QACD,IAAI,KAAK,CAAC,UAAU,EAAE;YAClB,SAAS,CAAC,GAAG,CAAC,GAAG,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,6BAA6B,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,8BAA8B,CAAC,EAAE,CAAC;YAC1J,SAAS,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,6BAA6B,CAAC,CAAC;SACtE;QACD,IAAI,KAAK,CAAC,SAAS,EAAE;YACjB,SAAS,CAAC,GAAG,CAAC,GAAG,GAAG,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,6BAA6B,CAAC,KAAK,CAAC;YAC3G,SAAS,CAAC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,6BAA6B,CAAC,KAAK,CAAC;YAC5E,SAAS,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;SAC3D;QAED,MAAM,cAAc,GAAG,IAAI,CAAC,2BAA2B,CAAC,MAAM,CAAC,CAAC;QAChE,MAAM,QAAQ,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QACxC,MAAM,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;QAC5C,YAAY,CAAC,WAAW,CAAC,GAAG,SAAS,CAAC;QACtC,YAAY,CAAC,UAAU,CAAC,GAAG,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,KAAK,CAAC;QAC3C,YAAY,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;QACxB,YAAY,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC;QAC5B,YAAY,CAAC,OAAO,CAAC,GAAG,KAAK,CAAC;QAC9B,YAAY,CAAC,QAAQ,CAAC,GAAG,cAAc,CAAC;QAExC,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,iBAAO,CAAC,cAAc,EAAE,EAAE;YACnD,YAAY,CAAC,iBAAiB,CAAC,GAAG,iBAAO,CAAC,cAAc,EAAE,CAAC;YAC3D,YAAY,CAAC,SAAS,CAAC,GAAG,mBAAmB,CAAC,2BAA2B,CAAC,IAAI,CAAC,KAAK,EAAE,cAAc,CAAC,CAAC;SACzG;aAAM,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,iBAAO,CAAC,cAAc,EAAE,EAAE;YAC3D,oDAAoD;YACpD,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,kCAAkC,CAAC,CAAC,CAAC;SACjF;QAED,IAAI,MAAM,GAAG,IAAI,CAAC;QAClB,UAAU,CAAC,OAAO,GAAG;YACjB,QAAQ,EAAE;gBACN,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC;gBACzC,QAAQ,EAAE,GAAG,EAAE,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;aACnC;SACJ,CAAC;QAEF,8GAA8G;QAC9G,OAAO,CAAO,IAAI,EAAqC,EAAE;YACrD,IAAI,MAAM,EAAE;gBACR,OAAO;aACV;YAED,MAAM,cAAc,GAAG,EAAgC,CAAC;YAExD,IAAI,iBAAO,CAAC,cAAc,EAAE,EAAE;gBAC1B,WAAW,CAAC,cAAc,EAAE,mBAAmB,CAAC,+BAA+B,CAAC,IAAI,CAAC,CAAC,CAAC;aAC1F;iBAAM;gBACH,WAAW,CAAC,cAAc,EAAE,mBAAmB,CAAC,yBAAyB,CAAC,IAAI,CAAC,CAAC,CAAC;gBACjF,mDAAmD;aACtD;YAED,WAAW,CAAC,cAAc,EAAE,mBAAmB,CAAC,oBAAoB,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC,CAAA;YAEtF,MAAM,EAAC,QAAQ,EAAC,GAAG,mBAAmB,CAAC,yBAAyB,CAAC,IAAI,CAAC,CAAC;YAEvE,oCAAoC;YAEpC,IAAI,cAAc,CAAC,aAAa,CAAC,KAAK,KAAK,SAAS,EAAE;gBAClD,gDAAgD;gBAChD,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC;gBAClD,IAAI,CAAC,SAAS,CAAC,+BAA+B,EAAE;oBAC5C,SAAS,CAAC,6BAA6B,CAAC,OAAO,EAAE,cAAc,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;oBACrF,MAAM,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;iBAC5C;qBAAM;oBACH,OAAO,CAAC,KAAK,CAAC,6FAA6F,CAAC,CAAC;iBAChH;gBAED,MAAM,IAAI,CAAC,mBAAmB,CAAC,EAAC,KAAK,EAAE,cAAc,CAAC,aAAa,CAAC,KAAK,EAAC,CAAC,CAAC;aAC/E;YACD,IAAI,cAAc,CAAC,QAAQ,EAAE;gBACzB,MAAM,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;aACvD;YAED,OAAO,EAAC,YAAY,EAAE,cAAc,EAAE,QAAQ,EAAC,CAAC;QACpD,CAAC,CAAA,CAAC;IACN,CAAC;IAED,MAAM,CAAC,2BAA2B,CAAC,MAAiB;QAChD,MAAM,EAAC,eAAe,EAAC,GAAG,cAAE,CAAC,MAAM,CAAC,aAAa,CAAC;QAClD,MAAM,SAAS,GAAG,EAAwB,CAAC;QAC3C,KAAK,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;YAC/C,MAAM,QAAQ,GAAG,KAAe,CAAC;YACjC,SAAS,CAAC,GAAG,CAAC,GAAG,iBAAO,CAAC,sBAAsB,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,EAAE,QAAQ,EAAE,eAAe,CAAC,GAAG,CAAC,CAAC,CAAC;SACjH;QACD,OAAO,SAAS,CAAC;IACrB,CAAC;IAED;;;;;OAKG;IACH,MAAM,CAAC,2BAA2B,CAAC,KAAe,EAAE,MAAM;QACtD,MAAM,QAAQ,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;QAElC,IAAI,CAAC,QAAQ,IAAI,CAAC,iBAAO,CAAC,cAAc,EAAE,EAAE;YACxC,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,kCAAkC,CAAC,CAAC,CAAC;YAC9E,OAAO,EAAE,CAAC;SACb;QAED,MAAM,OAAO,GAAG,iBAAO,CAAC,cAAc,EAAE,CAAC;QAEzC,MAAM,mBAAmB,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;YAC7C,uCAAuC;YACvC,MAAM,QAAQ,GAAG,iBAAO,CAAC,oBAAoB,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;YAChE,MAAM,KAAK,GAAG,iBAAO,CAAC,cAAc,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;YACvD,OAAO;gBACH,EAAE,EAAE,MAAM,CAAC,EAAE;gBACb,IAAI,EAAE,MAAM,CAAC,IAAI;gBACjB,KAAK,EAAE,KAAK;gBACZ,IAAI,EAAE,uBAAW;gBACjB,QAAQ;aACX,CAAC;QACN,CAAC,CAAC,CAAC;QAEH,YAAY;QACZ,OAAO,mBAAmB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;YACrC,IAAI,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC,QAAQ;gBAAE,OAAO,CAAC,CAAC,CAAC;YACvC,IAAI,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC,QAAQ;gBAAE,OAAO,CAAC,CAAC;YACtC,OAAO,CAAC,CAAC;QACb,CAAC,CAAC,CAAC;IACP,CAAC;IAED,MAAM,CAAC,+BAA+B,CAAC,IAAY;QAC/C,MAAM,aAAa,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC;QAC/D,MAAM,KAAK,GAAG,iBAAO,CAAC,kBAAkB,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC;QAEjG,OAAO;YACH,aAAa,EAAE,EAAC,KAAK,EAAC;SACzB,CAAC;IACN,CAAC;IAED,MAAM,CAAC,yBAAyB,CAAC,IAAY;QACzC,MAAM,aAAa,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC;QAC/D,MAAM,QAAQ,GAAG,aAAa,CAAC,GAAG,EAAY,CAAC;QAC/C,OAAO,EAAC,QAAQ,EAAC,CAAC;IACtB,CAAC;IAED,MAAM,CAAC,yBAAyB,CAAC,IAAY;QACzC,MAAM,KAAK,GAAG,iBAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QAE/E,OAAO,EAAC,aAAa,EAAE,EAAC,KAAK,EAAC,EAAC,CAAA;IACnC,CAAC;IAED,MAAM,CAAC,oBAAoB,CAAC,IAAY,EAAE,SAAS;QAC/C,MAAM,aAAa,GAAG,iBAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QAC1F,IAAI,aAAa,EAAE;YACf,MAAM,cAAc,GAAG,SAAS,CAAC,aAAa,CAAC,CAAC;YAChD,MAAM,eAAe,GAAG,iBAAO,CAAC,sBAAsB,CAAC,aAAa,CAAC,CAAC;YAEtE,MAAM,QAAQ,GAAiB;gBAC3B,KAAK,EAAE,cAAc;gBACrB,KAAK,EAAE,aAAa;gBACpB,OAAO,EAAE,eAAe;aAC3B,CAAC;YAEF,OAAO,EAAC,QAAQ,EAAC,CAAC;SACrB;QAED,OAAO,EAAE,CAAC;IACd,CAAC;CACJ;AA3VD,kDA2VC;;;;;;;;;;;;;;ACpYD,6CAAwD;AAExD,qDAAgD;AAEhD,+CAA0E;AAC1E,2CAAsC;AAatC,MAAa,mBAAmB;IAC5B,MAAM,CAAO,MAAM,CAAC,KAAyB,EAAE,OAAgC,EAAE,UAA2B;;YACxG,MAAM,cAAc,GAAG,mBAAmB,CAAC,mBAAmB,CAAC,KAAK,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC;YAE3F,OAAO,IAAI,uBAAU,CAAC,cAAc,CAAC,CAAC;QAC1C,CAAC;KAAA;IAED,MAAM,CAAC,mBAAmB,CAAC,KAAK,EAAE,OAAgC,EAAE,UAA2B;;QAC3F,MAAM,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;QAC5B,MAAM,KAAK,GAAG,IAAI,qBAAS,CAAC,UAAU,CAAC,CAAC;QAExC,MAAM,YAAY,GAAG;YACjB,OAAO,EAAE,OAAO,CAAC,aAAa;YAC9B,QAAQ,EAAE,OAAO,CAAC,QAAQ;YAC1B,IAAI,EAAE,KAAK,CAAC,KAAK;YACjB,KAAK,EAAE,KAAK,CAAC,gBAAgB,EAAE;YAC/B,UAAU,EAAE,MAAA,OAAO,CAAC,KAAK,0CAAE,KAAK;YAChC,MAAM,EAAE,OAAO,CAAC,MAAM;YACtB,UAAU,EAAE,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,gBAAgB,EAAE;YACrC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,qBAAS,EAAE,sBAAU,CAAC,QAAQ,CAAC;YAC3D,SAAS,EAAE,MAAM,CAAC,IAAI,CAAC,SAAS;SACnC,CAAA;QAED,IAAI,YAAY,GAAG,2DAA2D,CAAC;QAE/E,MAAM,cAAc,GAAG,MAAM,CAAA;QAC7B,MAAM,OAAO,GAAG;YACZ,CAAC,cAAc,CAAC,EAAE;gBACd,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC;gBACrC,IAAI,EAAE,iCAAiC;gBACvC,QAAQ,EAAE,GAAG,EAAE;gBACf,CAAC;aACJ;SACJ,CAAC;QACF,IAAI,KAAK,EAAE;YACP,OAAO,CAAC,MAAM,CAAC,GAAG;gBACd,KAAK,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC,KAAK,GAAG;gBAC9E,IAAI,EAAE,6BAA6B;gBACnC,QAAQ,EAAE,GAAG,EAAE;gBACf,CAAC;aACJ,CAAC;SACL;QAED,MAAM,YAAY,GAAG,CAAO,IAAY,EAAE,EAAE;;YACxC,MAAM,aAAa,GAAG,iBAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;YAEtF,IAAI,MAAA,OAAO,CAAC,aAAa,0CAAE,IAAI,EAAE;gBAC7B,KAAK,CAAC,KAAK,EAAE,CAAC;gBACd,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,mBAAmB,EAAE,aAAa,CAAC,CAAC;gBAC/E,KAAK,CAAC,aAAa,CAAC,UAAU,EAAE,aAAa,CAAC,CAAC;aAClD;YAED,MAAM,UAAU,GAAG,iBAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;YAEzF,MAAM,EAAC,KAAK,EAAC,GAAG,OAAO,CAAC;YACxB,IAAI,KAAK,IAAI,KAAK,CAAC,KAAK,KAAK,UAAU,EAAE;gBACrC,KAAK,CAAC,KAAK,GAAG,UAAU,CAAC;gBACzB,KAAK,CAAC,IAAI,GAAG,UAAU,CAAC;gBACxB,KAAK,CAAC,KAAK,GAAG,cAAc,CAAC;aAChC;YAED,MAAM,UAAU,GAAG,iBAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;YACrF,MAAM,YAAY,GAAG,iBAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;YACvF,MAAM,cAAc,GAAG,iBAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,gCAAgC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;YAExG,IAAI,EAAC,MAAM,EAAC,GAAG,OAAO,CAAC;YACvB,IAAI,MAAM,IAAI,UAAU,KAAK,CAAC,EAAE;gBAC5B,KAAK,CAAC,aAAa,CAAC,YAAY,EAAE,UAAU,CAAC,CAAC;gBAC9C,MAAM,GAAG,IAAI,CAAC;aACjB;YACD,IAAI,YAAY,EAAE;gBACd,KAAK,CAAC,aAAa,CAAC,yBAAyB,EAAE,YAAY,CAAC,CAAC;aAChE;YACD,IAAI,cAAc,EAAE;gBAChB,KAAK,CAAC,aAAa,CAAC,yBAAyB,EAAE,cAAc,CAAC,CAAC;aAClE;YAED,MAAM,cAAc,GAAG,iBAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;YAC3F,MAAM,QAAQ,GAAG,cAAc,KAAK,MAAM,CAAC;YAE3C,MAAM,QAAQ,GAAG,iBAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;YAEnF,OAAO;gBACH,KAAK;gBACL,MAAM;gBACN,KAAK;gBACL,QAAQ;gBACR,QAAQ;aACX,CAAA;QACL,CAAC,CAAA,CAAC;QAEF,OAAO;YACH,KAAK;YACL,YAAY;YACZ,YAAY;YACZ,OAAO;YACP,OAAO,EAAE,cAAc;YACvB,YAAY;SACf,CAAA;IACL,CAAC;CACJ;AApGD,kDAoGC;;;;;;;;;;;;;;;;;;;;;;;;;ACnHD;;;;;;IAEa,qB;;;;;;;;;;;;8BAgBC;AACN;AACA,UAAM,MAAM,GAAG,IAAI,CAAC,KAAL,CAAW,MAAX,CAAkB,UAAC,GAAD,EAAM,IAAN,EAAe;AAC5C,YAAI,CAAC,IAAI,CAAC,IAAN,IAAc,IAAI,CAAC,SAAvB,EAAkC;AAC9B,UAAA,GAAG,CAAC,IAAJ,CAAS,IAAI,CAAC,SAAL,CAAe,IAAxB;AACH;;AACD,eAAO,GAAP;AACH,OALc,EAKZ,EALY,CAAf;AAOA,MAAA,qBAAqB,CAAC,WAAtB,CAAkC,OAAlC,CAA0C,UAAC,EAAD,EAAQ;AAC9C,YAAM,KAAK,GAAG,IAAI,CAAC,MAAL,CAAY,IAAZ,CAAiB,UAAC,CAAD;AAAA,iBAAO,CAAC,CAAC,GAAF,KAAU,EAAjB;AAAA,SAAjB,CAAd;;AACA,YAAI,KAAJ,EAAW;AACP,UAAA,MAAM,CAAC,IAAP,CAAY,KAAK,CAAC,IAAlB;AACH;AACJ,OALD;AAOA,aAAO;AACH,QAAA,MAAM,EAAN;AADG,OAAP;AAGH;;;sCAEiB,I,EAAM;AACpB,MAAA,IAAI,CAAC,IAAL,CAAU,wBAAV,EAAoC,EAApC,CAAuC,OAAvC,EAAgD,KAAK,oBAAL,CAA0B,IAA1B,CAA+B,IAA/B,CAAhD;AACA,MAAA,IAAI,CAAC,IAAL,CAAU,sBAAV,EAAkC,EAAlC,CAAqC,OAArC,EAA8C,KAAK,kBAAL,CAAwB,IAAxB,CAA6B,IAA7B,CAA9C;AACA,MAAA,IAAI,CAAC,IAAL,CAAU,wBAAV,EAAoC,EAApC,CAAuC,QAAvC,EAAiD,KAAK,kBAAL,CAAwB,IAAxB,CAA6B,IAA7B,CAAjD;AACA,MAAA,IAAI,CAAC,IAAL,CAAU,kCAAV,EAA8C,EAA9C,CAAiD,OAAjD,EAA0D,KAAK,iBAAL,CAAuB,IAAvB,CAA4B,IAA5B,CAA1D;AACA,MAAA,IAAI,CAAC,IAAL,CAAU,4BAAV,EAAwC,EAAxC,CAA2C,OAA3C,EAAoD,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAApD;AACH,K,CAED;;;;uCACmB,K,EAAO;AACtB,UAAM,EAAE,GAAG,KAAK,CAAC,aAAN,CAAoB,OAApB,CAA4B,YAA5B,EAA0C,OAA1C,CAAkD,OAA7D;AACA,UAAI,EAAJ,EAAQ,OAAO,IAAI,CAAC,MAAL,CAAY,IAAZ,CAAiB,UAAC,CAAD;AAAA,eAAO,CAAC,CAAC,GAAF,KAAU,EAAjB;AAAA,OAAjB,CAAP;AACX;;;gCAEW,K,EAAO;AAAA;;AACf,MAAA,KAAK,CAAC,cAAN;;AACA,UAAM,MAAM,GAAG,iBAAQ,mBAAR,EAAf;;AACA,UAAI,MAAM,CAAC,MAAP,KAAkB,CAAtB,EAAyB;AACrB,QAAA,EAAE,CAAC,aAAH,CAAiB,IAAjB,CAAsB,IAAI,CAAC,IAAL,CAAU,QAAV,CAAmB,kDAAnB,CAAtB;AACA;AACH;;AACD,MAAA,MAAM,CAAC,OAAP,CAAe,UAAC,KAAD,EAAW;AACtB,YAAM,OAAO,GAAG,KAAK,CAAC,IAAN,CAAW,OAA3B;AACA,QAAA,qBAAqB,CAAC,WAAtB,CAAkC,IAAlC,CAAuC,OAAvC;;AACA,QAAA,KAAI,CAAC,MAAL;AACH,OAJD;AAKH;;;uCAEkB,K,EAAO;AAAA;;AACtB,UAAM,KAAK,GAAG,KAAK,kBAAL,CAAwB,KAAxB,CAAd;;AACA,UAAM,MAAM,GAAG,KAAK,CAAC,aAAN,CAAoB,KAAnC;;AACA,UAAI,MAAM,IAAI,KAAd,EAAqB;AACjB,QAAA,KAAK,CAAC,iBAAN,CAAwB,MAAxB,EAAgC,IAAhC,CAAqC;AAAA,iBAAM,MAAI,CAAC,MAAL,EAAN;AAAA,SAArC;AACH;AACJ;;;uCAEkB,K,EAAO;AAAA;;AACtB,UAAM,KAAK,GAAG,KAAK,kBAAL,CAAwB,KAAxB,CAAd;;AACA,UAAM,MAAM,GAAG,QAAQ,CAAC,KAAK,CAAC,aAAN,CAAoB,OAApB,CAA4B,MAA7B,CAAvB;;AACA,UAAI,MAAM,IAAI,KAAd,EAAqB;AACjB,YAAM,EAAE,GAAG,KAAK,CAAC,iBAAN,EAAX;AACA,QAAA,KAAK,CAAC,iBAAN,CAAwB,EAAE,GAAG,MAA7B,EAAqC,IAArC,CAA0C;AAAA,iBAAM,MAAI,CAAC,MAAL,EAAN;AAAA,SAA1C;AACH;AACJ;;;yCAEoB,K,EAAO;AAAA;;AACxB,MAAA,KAAK,CAAC,cAAN;;AACA,UAAM,KAAK,GAAG,KAAK,kBAAL,CAAwB,KAAxB,CAAd;;AACA,UAAI,KAAJ,EAAW;AACP,QAAA,KAAK,CAAC,iBAAN,CAAwB,CAAxB,EAA2B,IAA3B,CAAgC;AAAA,iBAAM,MAAI,CAAC,MAAL,EAAN;AAAA,SAAhC;AACH;AACJ;;;sCAEiB,K,EAAO;AAAA;;AACrB,MAAA,KAAK,CAAC,cAAN;;AACA,UAAM,KAAK,GAAG,KAAK,kBAAL,CAAwB,KAAxB,CAAd;;AACA,UAAI,KAAJ,EAAW;AACP;AACA,YAAM,IAAI,GAAG,IAAI,IAAJ,CAAS,qBAAqB,CAAC,wBAA/B,CAAb;AACA,QAAA,IAAI,CAAC,IAAL,GAHO,CAKP;AACA;AACA;;AAEA,YAAI,IAAI,CAAC,KAAT,EAAgB;AACZ,cAAM,EAAE,GAAG,KAAK,CAAC,iBAAN,EAAX;AACA,UAAA,KAAK,CAAC,iBAAN,CAAwB,EAAE,GAAG,IAAI,CAAC,KAAlC,EAAyC,IAAzC,CAA8C;AAAA,mBAAM,MAAI,CAAC,MAAL,EAAN;AAAA,WAA9C;AACH;AACJ;AACJ;;;wBAzG2B;AACxB,UAAM,OAAO,yGAAb;AACA,MAAA,OAAO,CAAC,EAAR,GAAa,yBAAb;AACA,MAAA,OAAO,CAAC,OAAR,GAAkB,CAAC,KAAD,CAAlB;AACA,MAAA,OAAO,CAAC,KAAR,GAAgB,IAAI,CAAC,IAAL,CAAU,QAAV,CAAmB,gCAAnB,CAAhB;AACA,MAAA,OAAO,CAAC,QAAR,GAAmB,8EAAnB;AACA,MAAA,OAAO,CAAC,KAAR,GAAgB,GAAhB;AACA,MAAA,OAAO,CAAC,MAAR,GAAiB,MAAjB;AACA,MAAA,OAAO,CAAC,SAAR,GAAoB,IAApB;AACA,aAAO,OAAP;AACH;;;EAZsC,W;;;iCAA9B,qB,8BACyB,K;iCADzB,qB,iBAcY,E;;;;;;ACnBzB,mEAAgE;AAGhE,MAAa,sBAAuB,SAAQ,6CAAqB;IAE7D,YAAY,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ;QACzC,KAAK,CAAC,KAAK,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;QAC/B,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAC7B,CAAC;IACD,aAAa;QACT,OAAO,yBAAyB,IAAI,CAAC,QAAQ,UAAU,IAAI,CAAC,OAAO,EAAE,CAAC;IAC1E,CAAC;CACJ;AATD,wDASC;;;;;ACZD,mDAAgD;AAGhD,MAAa,qBAAsB,SAAQ,6BAAa;IACpD,aAAa;QACT,OAAO,8BAA8B,IAAI,CAAC,OAAO,EAAE,CAAC;IACxD,CAAC;IAED,OAAO;QACH,OAAO,WAAW,CAAC,KAAK,CAAC,OAAO,EAAE,EAAE;YAChC,aAAa,EAAE,IAAI;YACnB,mBAAmB,EAAE,KAAK;YAC1B,kBAAkB,EAAE,KAAK;SACP,CAAC,CAAC;IAC5B,CAAC;IAED,gBAAgB;IAChB,eAAe,CAAC,KAAK,EAAE,QAAQ,EAAE,UAAU;QACvC,KAAK,CAAC,eAAe,CAAC,KAAK,EAAE,QAAQ,EAAE,UAAU,CAAC,CAAC;QACnD,MAAM,IAAI,GAAG,QAAQ,CAAC,WAAW,CAAC,CAAC;QACnC,MAAM,WAAW,GAAG,UAAU,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,IAAI,EAAE,CAAC;QAC3D,UAAU,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,mCACzB,WAAW,KACd,IAAI,GACP,CAAC;IACN,CAAC;CACJ;AAvBD,sDAuBC;;;;;;;;;;;;;;ACrBD,MAAa,aAAc,SAAQ,eAAe;IAQ9C,YAAY,KAAK,EAAE,OAAO,EAAE,OAAO;QAC/B,KAAK,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;QACtB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;IAC3B,CAAC;IARD,IAAI,MAAM;QACN,YAAY;QACZ,OAAO,KAAK,CAAC,MAAM,CAAC;IACxB,CAAC;IAOD,aAAa;QACT,OAAO,sBAAsB,IAAI,CAAC,OAAO,EAAE,CAAC;IAChD,CAAC;IAED,MAAM,KAAK,cAAc;QACrB,MAAM,OAAO,GAAG,KAAK,CAAC,cAAc,CAAC;QACrC,OAAO,WAAW,CAAC,OAAO,EAAE;YACxB,EAAE,EAAE,cAAc;YAClB,OAAO,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,mBAAmB,CAAC;YAC9C,QAAQ,EAAE,yDAAyD;YACnE,KAAK,EAAE,GAAG;YACV,aAAa,EAAE,IAAI;YACnB,cAAc,EAAE,IAAI;YACpB,aAAa,EAAE,KAAK;YACpB,SAAS,EAAE,IAAI;SAClB,CAAC,CAAC;IACP,CAAC;IAED,IAAI,KAAK;QACL,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACtD,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC;IACnF,CAAC;IAED,eAAe,CAAC,KAAK,EAAE,QAAQ,EAAE,UAAU;QACvC,kBAAkB;QAClB,wFAAwF;QACxF,MAAM,IAAI,GAAG,QAAQ,CAAC,WAAW,CAAC,CAAC;QAEnC,qBAAqB;QACrB,MAAM,SAAS,GAAG,QAAQ,CAAC,gBAAgB,CAAC,CAAC;QAE7C,iBAAiB;QACjB,MAAM,IAAI,GAAG,QAAQ,CAAC,WAAW,CAAC,CAAC;QAEnC,kBAAkB;QAClB,MAAM,UAAU,GAAG,QAAQ,CAAC,iBAAiB,CAAC,CAAC;QAE/C,0BAA0B;QAC1B,MAAM,UAAU,GAAG,oBAAoB,CAAC;QACxC,MAAM,KAAK,GAAG,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,CAAC,GAAG,EAAE,GAAG,CAAgB,EAAE,EAAE;YACjF,MAAM,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;YACpC,IAAI,KAAK,IAAI,KAAK,CAAC,CAAC,CAAC,EAAE;gBACnB,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;aACrB;YACD,OAAO,OAAO,CAAC;QACnB,CAAC,EAAE,EAAW,CAAC,CAAC;QAEhB,kBAAkB;QAClB,MAAM,aAAa,GAAG,wBAAwB,CAAC;QAC/C,MAAM,eAAe,GAAG,0BAA0B,CAAC;QACnD,MAAM,KAAK,GAAG,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,CAAC,GAAG,EAAE,KAAK,CAAgB,EAAE,EAAE;YACnF,MAAM,QAAQ,GAAG,GAAG,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;YAC1C,MAAM,QAAQ,GAAG,GAAG,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC;YAC5C,IAAI,QAAQ,IAAI,QAAQ,CAAC,CAAC,CAAC,IAAI,QAAQ,CAAC,CAAC,CAAC,EAAE;gBACxC,MAAM,KAAK,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;gBAC1B,IAAI,OAAO,CAAC,KAAK,CAAC,KAAK,SAAS;oBAAE,OAAO,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;gBACtD,OAAO,CAAC,KAAK,CAAC,CAAC,GAAG,GAAG,KAAK,CAAC;aAC9B;iBAAM,IAAI,QAAQ,IAAI,QAAQ,CAAC,CAAC,CAAC,IAAI,QAAQ,CAAC,CAAC,CAAC,EAAE;gBAC/C,MAAM,KAAK,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;gBAC1B,IAAI,OAAO,CAAC,KAAK,CAAC,KAAK,SAAS;oBAAE,OAAO,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;gBACtD,OAAO,CAAC,KAAK,CAAC,CAAC,KAAK,GAAG,KAAK,CAAC;aAChC;YAED,OAAO,OAAO,CAAC;QACnB,CAAC,EAAE,EAAW,CAAC,CAAC;QAEhB,MAAM,WAAW,GAAG,UAAU,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,IAAI,EAAE,CAAC;QAC3D,UAAU,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,mCACzB,WAAW,KACd,IAAI;YACJ,KAAK;YACL,KAAK;YACL,IAAI;YACJ,SAAS;YACT,UAAU,GACb,CAAC;IACN,CAAC;IAED,gBAAgB;IACV,aAAa,CAAC,KAAK,EAAE,QAAQ;;YAC/B,MAAM,UAAU,GAAG,EAAE,CAAC;YACtB,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,QAAQ,EAAE,UAAU,CAAC,CAAC;YAClD,MAAM,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;QACzC,CAAC;KAAA;IAED,iBAAiB,CAAC,IAAI;QAClB,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;QAC9B,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACnE,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACtE,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACrE,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IAC5E,CAAC;IAEK,YAAY,CAAC,KAAK;;YACpB,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,UAAU,GAAG,EAAE,CAAC;YACtB,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;YACjC,IAAI,CAAC,IAAI;gBAAE,OAAO;YAClB,MAAM,EAAE,KAAK,GAAG,EAAE,EAAE,GAAG,IAAI,CAAC;YAC5B,+BAA+B;YAC/B,UAAU,CAAC,GAAG,IAAI,CAAC,aAAa,EAAE,QAAQ,CAAC,GAAG,CAAC,GAAG,KAAK,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;YAChF,MAAM,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;QACzC,CAAC;KAAA;IAEK,YAAY,CAAC,KAAK;;YACpB,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,UAAU,GAAG,EAAE,CAAC;YACtB,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;YACjC,IAAI,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,KAAK,EAAE;gBACb,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC;gBACvB,MAAM,KAAK,GAAG,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC;gBAC/C,IAAI,KAAK,IAAI,CAAC,EAAE;oBACZ,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;oBACvB,UAAU,CAAC,GAAG,IAAI,CAAC,aAAa,EAAE,QAAQ,CAAC,GAAG,KAAK,CAAC;oBACpD,MAAM,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;iBACxC;aACJ;QACL,CAAC;KAAA;IAEK,WAAW,CAAC,KAAK;;YACnB,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,UAAU,GAAG,EAAE,CAAC;YACtB,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;YACjC,IAAI,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,KAAK,EAAE;gBACb,4BAA4B;gBAC5B,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC;gBACvB,UAAU,CAAC,GAAG,IAAI,CAAC,aAAa,EAAE,QAAQ,CAAC,GAAG,CAAC,GAAG,KAAK,EAAE,EAAE,CAAC,CAAC;aAChE;YACD,MAAM,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;QACzC,CAAC;KAAA;IAEK,WAAW,CAAC,KAAK;;YACnB,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,UAAU,GAAG,EAAE,CAAC;YACtB,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;YACjC,IAAI,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,KAAK,EAAE;gBACb,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC;gBACvB,MAAM,KAAK,GAAG,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC;gBAC/C,IAAI,KAAK,IAAI,CAAC,EAAE;oBACZ,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;oBACvB,UAAU,CAAC,GAAG,IAAI,CAAC,aAAa,EAAE,QAAQ,CAAC,GAAG,KAAK,CAAC;oBACpD,MAAM,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;iBACxC;aACJ;QACL,CAAC;KAAA;IAED;OACG;IACH,4BAA4B;QACxB,uCAAW,MAAM,CAAC,GAAG,CAAC,UAAU,KAAE,EAAE,EAAE,EAAE,IAAE;IAC9C,CAAC;IAED,sBAAsB;QAClB,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACjD,sEAAsE;QACtE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,IAAI,CAAA,IAAI,CAAC,CAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,KAAK,CAAA,CAAC,IAAI,CAAC,CAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,IAAI,KAAI,CAAC,CAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,KAAK,CAAA,CAAC,CAAC,CAAC;IACjF,CAAC;IAED,OAAO;QACH,MAAM,IAAI,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;QAC7B,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QAE1B,IAAI,CAAC,MAAM,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,WAAW,CAAC,KAAK,EAAE,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QACrE,IAAI,CAAC,eAAe,CAAC,GAAG,IAAI,CAAC,sBAAsB,EAAE,CAAC;QACtD,IAAI,CAAC,qBAAqB,CAAC,GAAG,IAAI,CAAC;QACnC,IAAI,CAAC,oBAAoB,CAAC,GAAG,IAAI,CAAC;QAClC,IAAI,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC,4BAA4B,EAAE,CAAC;QACzD,OAAO,IAAyB,CAAC;IACrC,CAAC;CACJ;AAtLD,sCAsLC;;;;;AC3LD,+CAA+C;AACxC,MAAM,eAAe,GAAG,UAAU,QAAQ,EAAE,OAAO,GAAG,EAAE;IAC3D,YAAY;IACZ,wDAAwD;IACxD,IAAI,CAAC,OAAO,CAAC,UAAU;QAAE,OAAO,QAAQ,CAAC,SAAS,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;IAElG,sCAAsC;IACtC,IAAI,SAAS,GAAG,CAAC,CAAC;IAClB,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC;IACtC,MAAM,CAAC,GAAG,MAAM,CAAC,UAAU,CAAC;IAE5B,iCAAiC;IACjC,OAAO,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE;QACtB,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC;QAEd,wCAAwC;QACxC,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;QAC5C,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;QAE5C,sDAAsD;QACtD,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;QAC1B,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC;QAC3B,SAAS,IAAI,EAAE,CAAC;QAEhB,2BAA2B;QAC3B,IAAI,IAAI,KAAK,OAAO,EAAE;YAClB,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,SAAS,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;YACxE,IAAI,MAAM,GAAG,IAAI,GAAG,CAAC,GAAG,CAAC,EAAE,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;YACzC,OAAO,MAAM,GAAG,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC;SAC9C;QAED,wBAAwB;aACnB,IAAI,IAAI,KAAK,MAAM,EAAE;YACtB,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,EAAE,EAAE,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;SAC1E;QAED,yCAAyC;;YACpC,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC;IAC3D,CAAC,CAAC,CAAC;AACP,CAAC,CAAC;AAtCW,QAAA,eAAe,mBAsC1B;;;;;;;;;;;;;;ACvCF,+CAA4C;AAC5C,4CAAyC;AACzC,yCAAkC;AAElC,2CAAsE;AAGtE,uCAAkC;AAKlC,yEAAsE;AA+DtE,SAAe,iBAAiB,CAAC,YAAY,EAAE,OAAyB;;QACpE,MAAM,QAAQ,GAAG,MAAM,cAAc,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QAC7D,MAAM,OAAO,GAAG,MAAM,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QAEnD,2DAA2D;QAC3D,IAAI,YAAY,CAAC,IAAI;YAAE,MAAM,OAAO,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,IAAI,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC;QACzF,IAAI,YAAY,CAAC,MAAM;YAAE,MAAM,OAAO,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,MAAM,EAAE,YAAY,CAAC,MAAM,CAAC,CAAC;QAC/F,wCAAwC;QACxC,IAAI,YAAY,CAAC,OAAO;YAAE,MAAM,OAAO,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,oBAAoB,EAAE,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QAEtJ,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC;QAC/C,OAAO,OAAO,CAAC;IACnB,CAAC;CAAA;AAMD,oEAAoE;AACpE,6DAA6D;AAC7D,MAAM,cAAc,GAAG,CAAO,YAAY,EAAE,OAAyB,EAAE,EAAE;;IACrE,MAAM,QAAQ,GAAG,yDAAyD,CAAC;IAC3E,MAAM,KAAK,GAAG,YAAY,CAAC,KAAK,CAAC;IACjC,MAAM,KAAK,GAAG,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,QAAQ,EAAE,CAAC;IAEhC,YAAY;IACZ,MAAM,oBAAoB,mCACnB,YAAY,KACf,OAAO,EAAE;YACL,KAAK,EAAE,KAAK;SACf,EACD,mBAAmB,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,uBAAW,EAAE,iBAAK,CAAC,mBAAmB,CAAC,GACjF,CAAC;IACF,MAAM,IAAI,GAAG,MAAM,cAAc,CAAC,QAAQ,EAAE,oBAAoB,CAAC,CAAC;IAElE,MAAM,QAAQ,GAAG;QACb,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG;QACnB,IAAI,EAAE,CAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,IAAI,EAAC,CAAC,CAAC,KAAK,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,kBAAkB,CAAC,KAAK;QACpF,KAAK,EAAE,CAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,IAAI,EAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,SAAS;QACrD,OAAO,EAAE,IAAI;QACb,IAAI,EAAE,CAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,IAAI,EAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS;QAC/D,OAAO,EAAE;YACL,KAAK,EAAE,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,GAAG;YACjB,KAAK,EAAE,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,QAAQ,EAAE;YACxB,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI;SACxB;QACD,KAAK,EAAE;YACH,WAAW,EAAE;gBACT,UAAU,EAAE,IAAI;aACnB;SACJ;KACJ,CAAC;IAEF,MAAM,QAAQ,GAAG,MAAA,YAAY,CAAC,QAAQ,mCAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,qBAAS,EAAE,sBAAU,CAAC,QAAQ,CAAC,CAAC;IAE5F,IAAI,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC,QAAQ,CAAC,QAAkB,CAAC;QAAE,QAAQ,CAAC,SAAS,CAAC,GAAG,WAAW,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;IACvH,IAAI,QAAQ,KAAK,WAAW;QAAE,QAAQ,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC;IAEvD,IAAI,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,SAAS,EAAE;QACpB,QAAQ,CAAC,SAAS,CAAC,GAAG,WAAW,CAAC,oBAAoB,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;KAClF;IAED,OAAO,QAAQ,CAAC;AACpB,CAAC,CAAA,CAAC;AAGF,SAAsB,oCAAoC,CAAC,EAAC,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAkC;;QACtH,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,uBAAW,EAAE,iBAAK,CAAC,sBAAsB,CAAC,IAAI,IAAI,EAAE;YACtE,MAAM,IAAI,CAAC,SAAS,CAAC;gBACjB,OAAO,EAAE,WAAW,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC;gBACjD,MAAM,EAAE,KAAK;gBACb,QAAQ,EAAE,QAAQ;aACrB,CAAC,CAAC;SACN;IACL,CAAC;CAAA;AARD,oFAQC;AAED,SAAsB,uBAAuB,CAAC,OAAiC;;QAC3E,MAAM,eAAe,qBAAO,OAAO,CAAC,CAAC;QACrC,MAAM,cAAc,GAAG,EAAC,SAAS,EAAE,OAAO,CAAC,SAAS,EAAC,CAAC;QACtD,YAAY;QACZ,MAAM,YAAY,GAAG,uBAAuB,CAAC,eAAe,CAAC,CAAC;QAC9D,OAAO,MAAM,iBAAiB,CAAC,YAAY,EAAE,cAAc,CAAC,CAAC;IACjE,CAAC;CAAA;AAND,0DAMC;AAED,SAAsB,qBAAqB,CAAC,OAA+B;;QACvE,MAAM,YAAY,GAAG,sBAAsB,CAAC,OAAO,CAAC,CAAC;QACrD,OAAO,MAAM,iBAAiB,CAAC,YAAY,CAAC,CAAC;IACjD,CAAC;CAAA;AAHD,sDAGC;AAED,SAAS,sBAAsB,CAAC,OAA+B;IAC3D,kFAAkF;IAClF,qHAAqH;IACrH,IAAI,EAAC,KAAK,EAAE,IAAI,EAAE,WAAW,EAAE,KAAK,EAAC,GAAG,OAAO,CAAC;IAEhD,MAAM,KAAK,GAAG,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,QAAQ,EAAE,CAAC;IAChC,MAAM,OAAO,GAAG,eAAe,CAAC,KAAK,CAAC,CAAC;IACvC,MAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;IAEpD,OAAO;QACH,KAAK;QACL,KAAK;QACL,OAAO;QACP,IAAI;QACJ,WAAW;QACX,KAAK;KACR,CAAA;AACL,CAAC;AAED,SAAsB,qBAAqB,CAAC,OAA+B;;QACvE,MAAM,oCAAoC,CAAC,OAAO,CAAC,CAAC;QAEpD,MAAM,YAAY,GAAG,uBAAuB,CAAC,OAAO,CAAC,CAAC;QACtD,MAAM,WAAW,GAAG,EAAC,IAAI,EAAE,OAAO,CAAC,IAAI,EAAC,CAAC;QACzC,MAAM,OAAO,GAAG,MAAM,iBAAiB,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC;QAEnE,OAAO,OAAO,CAAC;IACnB,CAAC;CAAA;AARD,sDAQC;AAGD,SAAS,uBAAuB,CAAC,OAA+B;;IAC5D,MAAM,KAAK,GAAG,MAAA,OAAO,CAAC,KAAK,0CAAE,QAAQ,EAAE,CAAC;IAExC,MAAM,QAAQ,GAAG,MAAA,OAAO,CAAC,QAAQ,mCAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,qBAAS,EAAE,sBAAU,CAAC,QAAQ,CAAC,CAAC;IACvF,MAAM,OAAO,GAAG,eAAe,CAAC,KAAK,CAAC,CAAC;IAEvC,MAAM,aAAa,GAAG,eAAe,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;IAEtD,uCACM,OAAO,KACT,OAAO;QACP,aAAa;QACb,QAAQ,IACX;AACL,CAAC;AAED,SAAS,eAAe,CAAC,KAAsB;IAC3C,OAAO,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC;AAChE,CAAC;AAEM,MAAM,4BAA4B,GAAG,CAAC,IAAI,EAAE,OAAO,EAAE,EAAE;IAC1D,MAAM,OAAO,GAAG,CAAC,EAAE,EAAE,EAAE;QACnB,MAAM,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,SAAS,CAAC,CAAC;QAEnD,OAAO,GAAG,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,iBAAiB,CAAC,CAAC;IAC7D,CAAC,CAAC;IAEF,OAAO,CAAC,IAAI,CACR;QACI,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC;QAC5C,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,mBAAQ,CAAC,YAAY,CAAC,EAAE,CAAC;QAC3C,SAAS,EAAE,OAAO;QAClB,IAAI,EAAE,+BAA+B;KACxC,EACD;QACI,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC;QAC5C,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,mBAAQ,CAAC,YAAY,CAAC,EAAE,CAAC;QAC3C,SAAS,EAAE,OAAO;QAClB,IAAI,EAAE,gCAAgC;KACzC,CACJ,CAAC;IACF,OAAO,OAAO,CAAC;AACnB,CAAC,CAAC;AAtBW,QAAA,4BAA4B,gCAsBvC;AAEK,MAAM,gBAAgB,GAAG,CAAC,GAAgB,EAAE,IAAI,EAAE,EAAE;IACvD,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,iBAAiB,CAAC,EAAE;QACpD,OAAM;KACT;IAED,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAO,KAAK,EAAE,EAAE;QACtC,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,MAAM,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACzC,MAAM,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAC7C,MAAM,MAAM,GAAG,OAAO,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,MAAM,CAAC,CAAC;QAC1D,MAAM,IAAI,GAAG,iBAAO,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;QAE9C,MAAM,IAAI,GAAG,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,MAAM,CAAC;QAChD,IAAI,CAAC,IAAI,EAAE;YACP,EAAE,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,+BAA+B,CAAC,CAAC,CAAC;YAC5E,OAAO;SACV;QAED,mDAAmD;QACnD,MAAM,MAAM,GAAG,iBAAO,CAAC,4BAA4B,EAAE,CAAC;QAEtD,wCAAwC;QACxC,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;YACrB,MAAM,cAAc,GAAG,OAAO,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,oBAAoB,CAAC,CAAC;YAEhF,KAAK,MAAM,aAAa,IAAI,cAAc,EAAE;gBACxC,MAAM,KAAK,GAAG,iBAAO,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;gBACnD,IAAI,CAAC,KAAK;oBAAE,SAAS;gBAErB,MAAM,KAAK,GAAG,KAAK,CAAC,KAAiB,CAAC;gBACtC,IAAI,CAAC,KAAK;oBAAE,SAAS;gBAErB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aACtB;SACJ;QAED,IAAI,CAAC,MAAM;YAAE,OAAO;QAEpB,KAAK,MAAM,KAAK,IAAI,MAAM,EAAE;YACxB,MAAM,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;SACvD;IACL,CAAC,CAAA,CAAC,CAAC;IACH,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,iBAAiB,EAAE,CAAC,KAAK,EAAE,EAAE;QAC1C,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,MAAM,IAAI,GAAG,iBAAO,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;QAE9C,IAAI,IAAI,EAAE;YACN,MAAM,QAAQ,GAAG,kBAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;YACzC,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,WAAW,EAAE,CAAC;SAC3B;IACL,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,oBAAoB,EAAE,KAAK,CAAC,EAAE;QAC3C,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,gEAAgE;QAChE,MAAM,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;QAC1D,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,MAAM,EAAE,CAAC;QACtC,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC,MAAM,EAAE,CAAC;IAChD,CAAC,CAAC,CAAC;IAGH;OACG;IACH,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,mBAAmB,EAAE,KAAK,CAAC,EAAE;QAC1C,KAAK,CAAC,cAAc,EAAE,CAAC;QAEvB,MAAM,UAAU,GAAG,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;QAC1C,MAAM,EAAE,GAAG,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACjC,MAAM,IAAI,GAAG,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAEvC,IAAI,CAAC,EAAE;YAAE,OAAO;QAEjB,IAAI,IAAI,KAAK,OAAO,EAAE;YAClB,MAAM,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YACpC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,EAAE,EAAC,KAAK,EAAC,CAAC,CAAC;SAC3C;aACI,IAAI,IAAI,KAAK,OAAO,EAAE;YACvB,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YAClC,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;SAC5B;aACI,IAAI,IAAI,KAAK,MAAM,EAAE;YACtB,MAAM,IAAI,GAAG,UAAU,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;YAC9C,MAAM,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAE1C,MAAM,KAAK,GAAG,iBAAO,CAAC,aAAa,CAAC,YAAY,CAAC,CAAA;YAEjD,IAAI,CAAC,KAAK;gBAAE,OAAO;YAEnB,MAAM,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;YAC1C,IAAI,IAAI;gBAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;SACrC;IACJ,CAAC,CAAC,CAAC;IAEH;OACG;IACH,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,mBAAmB,EAAE,KAAK,CAAC,EAAE;QAC1C,KAAK,CAAC,cAAc,EAAE,CAAC;QAEvB,MAAM,UAAU,GAAG,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;QAC1C,MAAM,OAAO,GAAG,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAC3C,MAAM,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAEzC,IAAI,KAAK,EAAE;YACP,KAAK,CAAC,OAAO,EAAE,CAAC;SACnB;aAAM;YACH,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,uBAAuB,CAAC,CAAC,CAAA;SACrE;IACL,CAAC,CAAC,CAAC;IAEH;OACG;IACH,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,eAAe,EAAE,CAAM,KAAK,EAAC,EAAE;QAC5C,KAAK,CAAC,eAAe,EAAE,CAAC;QACxB,MAAM,WAAW,GAAG,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;QAE3C,MAAM,KAAK,GAAG,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;QACtD,MAAM,IAAI,GAAG,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAe,CAAC;QAClE,MAAM,EAAE,GAAG,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;QAChD,MAAM,OAAO,GAAG,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,CAAkB,CAAC;QAC3E,IAAI,MAAM,GAAG,iBAAO,CAAC,gBAAgB,CAAC,KAAK,EAAE,IAAI,EAAE,EAAE,EAAE,OAAO,CAAC,CAAC;QAEhE,IAAI,MAAM,GAAG,iBAAO,CAAC,4BAA4B,EAAE,CAAC;QAEpD,iDAAiD;QACjD,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;YACrB,MAAM,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YACzC,MAAM,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;YAC7C,MAAM,SAAS,GAAG,OAAO,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,oBAAoB,CAAC,CAAC;YAE3E,uCAAuC;YACvC,IAAI,SAAS,EAAE;gBACX,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;oBACzB,MAAM,KAAK,GAAG,iBAAO,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;oBAC9C,MAAM,KAAK,GAAG,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,KAAiB,CAAC;oBACvC,IAAI,CAAC,KAAK;wBAAE,OAAO;oBACnB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBACvB,CAAC,CAAC,CAAC;gBAEP,mDAAmD;aAClD;iBAAM;gBACH,MAAM,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;gBAC7D,MAAM,KAAK,GAAG,iBAAO,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;gBAClD,MAAM,KAAK,GAAG,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,KAAiB,CAAC;gBACvC,IAAI,KAAK,EAAE;oBACP,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;iBACtB;aACJ;YAED,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;gBACrB,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,mCAAmC,CAAC,CAAC,CAAC;gBAC/E,OAAO;aACV;SACJ;QAED,IAAI,6CAAqB,EAAE,CAAC,cAAc,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;IAC/D,CAAC,CAAA,CAAC,CAAC;AACP,CAAC,CAAC;AA5JW,QAAA,gBAAgB,oBA4J3B;;;;;;;;;;;;;;ACzYF,0CAA0C;AAC1C,4CAAmE;AAEnE;;;;;;;GAOG;AACH,MAAa,SAAU,SAAQ,MAAM;IACjC,IAAI,cAAc;QACd,OAAO,IAAI,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,oBAAoB,CAAC,IAAI,cAAE,CAAC,MAAM,CAAC,gBAAgB,CAAC;IAC/F,CAAC;IAED,MAAM,CAAO,iBAAiB,CAAC,MAAiB,EAAE,IAAY;;YAC1D,MAAM,MAAM,CAAC,SAAS,CAAC,uBAAW,EAAE,iBAAK,CAAC,oBAAoB,CAAC,CAAC;YAChE,MAAM,MAAM,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;QACxE,CAAC;KAAA;IAED,YAAY,GAAG,IAAI;QACf,aAAa;QACb,KAAK,CAAC,GAAG,IAAI,CAAC,CAAC;QAEf,IAAI,CAAC,wBAAwB,EAAE,CAAC;IACpC,CAAC;IAED;;;OAGG;IACH,iBAAiB,CAAC,KAAe;QAC7B,MAAM,KAAK,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;QAC/B,IAAI,CAAC,KAAK;YAAE,OAAO;QACnB,OAAO,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;IAC9C,CAAC;IAED;;;;OAIG;IACH,MAAM,CAAC,8BAA8B,CAAC,IAAI,EAAE,OAAc;QACtD,OAAO,CAAC,IAAI,CACR;YACI,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,4BAA4B,CAAC;YACtD,IAAI,EAAE,mCAAmC;YACzC,QAAQ,EAAE,CAAO,EAAE,EAAE,EAAE;gBACnB,aAAa;gBACb,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;gBAC1E,IAAI,SAAS,EAAE;oBACX,MAAM,MAAM,GAAc,IAAI,CAAC,MAAmB,CAAC;oBACnD,MAAM,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC;iBAChD;YACL,CAAC,CAAA;SACJ,EACD;YACI,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,6BAA6B,CAAC;YACvD,IAAI,EAAE,mCAAmC;YACzC,QAAQ,EAAE,CAAO,EAAE,EAAE,EAAE;gBACnB,aAAa;gBACb,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;gBAC1E,IAAI,SAAS,EAAE;oBACX,MAAM,MAAM,GAAc,IAAI,CAAC,MAAmB,CAAC;oBACnD,MAAM,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC;iBAChD;YACL,CAAC,CAAA;SACJ,EACD;YACI,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,4BAA4B,CAAC;YACtD,IAAI,EAAE,0CAA0C;YAChD,QAAQ,EAAE,CAAO,EAAE,EAAE,EAAE;gBACnB,aAAa;gBACb,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;gBAC1E,IAAI,SAAS,EAAE;oBACX,MAAM,MAAM,GAAc,IAAI,CAAC,MAAmB,CAAC;oBACnD,MAAM,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,EAAE,CAAC,CAAC;iBACjD;YACL,CAAC,CAAA;SACJ,CACJ,CAAC;QACF,OAAO,OAAO,CAAC;IACnB,CAAC;IAED;;;;OAIG;IACG,gBAAgB,CAAC,SAAuB,EAAE,UAAkB;;YAC9D,SAAS,GAAG,OAAO,SAAS,KAAK,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;YACzG,IAAI,CAAC,SAAS,IAAI,OAAO,SAAS,KAAK,QAAQ,EAAE;gBAC7C,OAAO,CAAC,KAAK,CAAC,mCAAmC,EAAE,SAAS,CAAC,CAAC;gBAC9D,OAAO;aACV;YACD,MAAM,YAAY,GAAG;gBACjB,GAAG,EAAE,SAAS,CAAC,GAAG;gBAClB,UAAU,EAAE,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,GAAG,UAAU;aACxD,CAAC;YACF,aAAa;YACb,MAAM,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;QAC7C,CAAC;KAAA;IAED;;;OAGG;IACH,MAAM,CAAO,aAAa,CAAC,QAAgB;;YACvC,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAc,CAAC;YACvD,IAAI,CAAC,MAAM;gBAAE,OAAO;YAEpB,MAAM,cAAc,GAAG,MAAM,CAAC,cAAc,GAAG,CAAC,CAAC;YACjD,oBAAoB;YACpB,MAAM,IAAI,GAAG,CAAC,CAAC;YAEf,MAAM,UAAU,GAAU,EAAE,CAAC;YAC7B,KAAK,MAAM,SAAS,IAAI,MAAM,CAAC,UAAU,EAAE;gBACvC,MAAM,UAAU,GAAG,oBAAW,CAAC,wBAAwB,CAAC,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC;gBACtF,UAAU,CAAC,IAAI,CAAC,EAAC,GAAG,EAAE,SAAS,CAAC,GAAG,EAAE,UAAU,EAAC,CAAC,CAAC;aACrD;YACD,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC;gBACrB,aAAa;gBACb,MAAM,MAAM,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;YAE7C,MAAM,SAAS,CAAC,iBAAiB,CAAC,MAAM,EAAE,cAAc,CAAC,CAAC;YAC1D,MAAM,MAAM,CAAC,MAAM,CAAC,EAAC,IAAI,EAAC,CAAC,CAAC;YAC5B,OAAO;QACX,CAAC;KAAA;IAED;;;OAGG;IACH,MAAM,CAAO,eAAe,CAAC,QAAgB;;YACzC,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAc,CAAC;YACvD,IAAI,CAAC,MAAM;gBAAE,OAAO;YACpB,MAAM,MAAM,CAAC,QAAQ,EAAE,CAAC;YAExB,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,uBAAW,EAAE,iBAAK,CAAC,uBAAuB,CAAC,EAAE;gBAC/D,MAAM,MAAM,CAAC,OAAO,EAAE,CAAC;aAC1B;iBAAM;gBACH,MAAM,MAAM,CAAC,OAAO,EAAE,CAAC;aAC1B;YAED,MAAM,IAAI,GAAG,CAAC,CAAA;YACd,MAAM,MAAM,CAAC,MAAM,CAAC,EAAC,IAAI,EAAC,CAAC,CAAC;QAChC,CAAC;KAAA;IAED;;OAEG;IACH,UAAU;QACN,MAAM,KAAK,GAAG,KAAK,CAAC,UAAU,EAAE,CAAC;QACjC,OAAO,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;IAC7C,CAAC;IAED,MAAM,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK;QAC1B,8CAA8C;QAC9C,MAAM,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACzC,MAAM,SAAS,GAAG,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;QAC3C,IAAI,KAAK,CAAC,QAAQ,CAAC;YAAE,OAAO,CAAC,CAAC;QAC9B,IAAI,KAAK,CAAC,SAAS,CAAC;YAAE,OAAO,CAAC,CAAC,CAAC;QAChC,IAAI,QAAQ,GAAG,SAAS;YAAE,OAAO,CAAC,CAAC,CAAC;QACpC,IAAI,QAAQ,GAAG,SAAS;YAAE,OAAO,CAAC,CAAC;QAEnC,sBAAsB;QACtB,MAAM,OAAO,GAAG,CAAC,KAAK,EAAE,EAAE;;YACtB,uCAAuC;YACvC,OAAO;gBACH,MAAM,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,KAAK,CAAC;gBAC7B,MAAM,CAAC,MAAA,KAAK,CAAC,aAAa,CAAC,UAAU,CAAC,0CAAE,KAAK,CAAC;gBAC9C,MAAM,CAAC,MAAA,KAAK,CAAC,aAAa,CAAC,WAAW,CAAC,0CAAE,KAAK,CAAC;gBAC/C,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,EAAE,CAAC,KAAK;aAC/B,CAAC;QACN,CAAC,CAAC;QAEF,MAAM,QAAQ,GAAG,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACrC,MAAM,SAAS,GAAG,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QACvC,kDAAkD;QAClD,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,QAAQ,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;YAClD,MAAM,IAAI,GAAG,SAAS,CAAC,KAAK,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;YAChD,IAAI,IAAI,KAAK,CAAC;gBAAE,OAAO,IAAI,CAAC;SAC/B;QAED,OAAO,CAAC,CAAC;IACb,CAAC;IAED;;OAEG;IACH,IAAI,0BAA0B;QAC1B,KAAK,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,EAAE;YACtD,oDAAoD;YACpD,IAAI,UAAU,IAAI,IAAI,CAAC,IAAI;gBAAE,SAAS;YACtC,aAAa;YACb,IAAI,CAAC,SAAS,CAAC,QAAQ,IAAI,SAAS,CAAC,UAAU,GAAG,CAAC,EAAE;gBACjD,OAAO,UAAU,CAAC;aACrB;SACJ;QACD,uFAAuF;QACvF,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;IAC7B,CAAC;IAED;;OAEG;IACH,IAAI,sBAAsB;QACtB,oDAAoD;QACpD,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE;YACzD,MAAM,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YACrC,IAAI,SAAS,CAAC,UAAU,GAAG,CAAC;gBACxB,OAAO,CAAC,CAAC;SAChB;QACD,yCAAyC;QACzC,OAAO,CAAC,CAAA;IACZ,CAAC;IAED;;;OAGG;IACH,SAAS,CAAC,QAAgB;QACtB,6DAA6D;QAC7D,IAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM;YAAE,OAAO,KAAK,CAAC;QAC/C,6CAA6C;QAC7C,MAAM,aAAa,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC;QAErF,OAAO,oBAAW,CAAC,wBAAwB,CAAC,aAAa,CAAC,CAAC;IAC/D,CAAC;IAED;;;;;;;;;;;;;OAaG;IACG,QAAQ;;YACV,4CAA4C;YAC5C,IAAI,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC;YAC3B,IAAI,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC;YACzC,qCAAqC;YACrC,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;gBACvC,IAAI,CAAC,0BAA0B,CAAC,CAAC;gBACjC,IAAI,CAAC,sBAAsB,CAAC;YAEhC,+BAA+B;YAC/B,IAAI,SAAS,KAAK,CAAC,IAAI,cAAc,KAAK,CAAC,EAAE;gBACzC,MAAM,IAAI,CAAC,WAAW,EAAE,CAAC;gBACzB,OAAO;aACV;YAED,4CAA4C;YAC5C,IAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;gBAC9B,MAAM,IAAI,CAAC,MAAM,CAAC,EAAC,IAAI,EAAE,QAAQ,EAAC,CAAC,CAAC;gBACpC,OAAO;aACV;YAED,wFAAwF;YACxF,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,EAAE;gBAC7C,MAAM,IAAI,CAAC,6BAA6B,EAAE,CAAC;gBAC3C,OAAO;aACV;YAED,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,EAAE;gBAC5C,MAAM,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;gBACtC,OAAO;aACV;YAED,6BAA6B;YAC7B,mHAAmH;YACnH,0EAA0E;YAC1E,OAAO,IAAI,CAAC,SAAS,EAAE,CAAC;QAC5B,CAAC;KAAA;IAEK,WAAW;;YACb,MAAM,SAAS,GAAG,cAAE,CAAC,MAAM,CAAC,iBAAiB,CAAC;YAC9C,MAAM,cAAc,GAAG,cAAE,CAAC,MAAM,CAAC,gBAAgB,CAAC;YAClD,oBAAoB;YACpB,MAAM,QAAQ,GAAG,CAAC,CAAC;YAEnB,MAAM,SAAS,CAAC,iBAAiB,CAAC,IAAI,EAAE,cAAc,CAAC,CAAC;YACxD,OAAO,MAAM,IAAI,CAAC,MAAM,CAAC,EAAC,KAAK,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAC,CAAC,CAAC;YAE7D,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,uBAAW,EAAE,iBAAK,CAAC,uBAAuB,CAAC,EAAE;gBAC/D,MAAM,IAAI,CAAC,OAAO,EAAE,CAAC;aACxB;iBAAM;gBACH,MAAM,IAAI,CAAC,OAAO,EAAE,CAAC;aACxB;QACL,CAAC;KAAA;IAEK,SAAS;;;;;YACX,iDAAiD;YACjD,MAAM,OAAM,SAAS,WAAE,CAAC;YACxB,MAAM,SAAS,CAAC,iBAAiB,CAAC,IAAI,EAAE,cAAE,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC;YAEpE,yEAAyE;YACzE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;gBACjB,MAAM,IAAI,CAAC,+BAA+B,EAAE,CAAC;aAChD;iBAAM;gBACH,MAAM,SAAS,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;aAC5C;QACL,CAAC;KAAA;IAED;;OAEG;IACG,OAAO;;;;;YACT,MAAM,MAAM,GAAG,MAAM,OAAM,OAAO,WAAe,CAAC;YAClD,IAAI,MAAM,CAAC,IAAI,KAAK,CAAC;gBACjB,MAAM,MAAM,CAAC,MAAM,CAAC,EAAC,IAAI,EAAE,CAAC,EAAC,CAAC,CAAC;YACnC,OAAO,MAAM,CAAC;QAClB,CAAC;KAAA;IAEK,mBAAmB,CAAC,GAAa;;YACnC,MAAM,aAAa,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;YACvF,IAAI,CAAC,aAAa;gBAAE,OAAO;YAE3B,yDAAyD;YACzD,MAAM,UAAU,GAAG,aAAa,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE;gBAC7C,MAAM,UAAU,GAAG,oBAAW,CAAC,oBAAoB,CAAC,SAAS,CAAC,UAAU,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;gBAC/F,OAAO;oBACH,GAAG,EAAE,SAAS,CAAC,GAAG;oBAClB,UAAU;iBACb,CAAA;YACL,CAAC,CAAC,CAAA;YAEF,aAAa;YACb,MAAM,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;QAC3C,CAAC;KAAA;IAGD;;OAEG;IACG,cAAc,CAAC,GAAG,EAAE,OAAO;;;;;YAC7B,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;YAChD,YAAY;YACZ,MAAM,MAAM,GAAG,MAAM,OAAM,cAAc,YAAC,GAAG,EAAE,OAAO,CAAc,CAAC;YAErE,wDAAwD;YACxD,8CAA8C;YAE9C,IAAI,IAAI,CAAC,cAAc,KAAK,cAAE,CAAC,MAAM,CAAC,gBAAgB;gBAClD,MAAM,MAAM,CAAC,MAAM,CAAC,EAAC,IAAI,EAAE,CAAC,EAAC,CAAC,CAAC;YAEnC,OAAO,MAAM,CAAC;QAClB,CAAC;KAAA;IAED;;;;;OAKG;IACH,qBAAqB,CAAC,SAAiB;QACnC,IAAI,IAAI,CAAC,cAAc,KAAK,cAAE,CAAC,MAAM,CAAC,gBAAgB,EAAE,EAAE,aAAa;YACnE,OAAO,KAAK,CAAC,qBAAqB,CAAC,SAAS,CAAC,CAAC;SACjD;QAED,2CAA2C;QAC3C,OAAO,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,KAAK,CAAC,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,GAAG,CAAC,cAAE,CAAC,MAAM,CAAC,6BAA6B,MAAM,CAAC;IAC7H,CAAC;IAED,wBAAwB;QACpB,aAAa;QACb,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,yBAAa,EAAE,CAAO,OAAO,EAAE,EAAE;YAC5C,QAAQ,OAAO,CAAC,IAAI,EAAE;gBAClB,KAAK,CAAC,iBAAK,CAAC,WAAW,CAAC;oBACpB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,OAAO,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,QAAQ,EAAE;wBAC3E,OAAO,CAAC,KAAK,CAAC,4BAA4B,iBAAK,CAAC,WAAW,gDAAgD,OAAO,OAAO,CAAC,IAAI,KAAK,OAAO,CAAC,IAAI,IAAI,CAAC,CAAC;wBACrJ,OAAO;qBACV;oBAED,OAAO,MAAM,SAAS,CAAC,eAAe,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBAC5D,KAAK,CAAC,iBAAK,CAAC,UAAU,CAAC;oBACnB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,OAAO,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,QAAQ,EAAE;wBAC3E,OAAO,CAAC,KAAK,CAAC,4BAA4B,iBAAK,CAAC,UAAU,gDAAgD,OAAO,OAAO,CAAC,IAAI,KAAK,OAAO,CAAC,IAAI,IAAI,CAAC,CAAC;wBACpJ,OAAO;qBACV;oBAED,OAAO,MAAM,SAAS,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;aAC7D;QACL,CAAC,CAAA,CAAC,CAAA;IACN,CAAC;IAEK,+BAA+B;;YACjC,YAAY;YACZ,MAAM,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,yBAAa,EAAE,EAAE,EAAC,IAAI,EAAE,iBAAK,CAAC,WAAW,EAAE,IAAI,EAAE,EAAC,EAAE,EAAE,IAAI,CAAC,EAAE,EAAC,EAAC,CAAC,CAAC;QAC/F,CAAC;KAAA;IAEK,6BAA6B;;YAC/B,YAAY;YACZ,MAAM,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,yBAAa,EAAE,EAAE,EAAC,IAAI,EAAE,iBAAK,CAAC,UAAU,EAAE,IAAI,EAAE,EAAC,EAAE,EAAE,IAAI,CAAC,EAAE,EAAC,EAAC,CAAC,CAAC;QAC9F,CAAC;KAAA;CACJ;AAxYD,8BAwYC;;;;;ACpZY,QAAA,GAAG,GAAG;IACf,SAAS,EAAE;QACP,MAAM,EAAE,sBAAsB;QAC9B,WAAW,EAAE,0BAA0B;QACvC,IAAI,EAAE,oBAAoB;QAC1B,KAAK,EAAE,qBAAqB;QAC5B,YAAY,EAAE,2BAA2B;QACzC,OAAO,EAAE,uBAAuB;QAChC,aAAa,EAAE,4BAA4B;QAC3C,SAAS,EAAE,yBAAyB;QACpC,OAAO,EAAE,uBAAuB;QAChC,MAAM,EAAE,sBAAsB;QAC9B,SAAS,EAAE,yBAAyB;QACpC,SAAS,EAAE,yBAAyB;QACpC,YAAY,EAAE,4BAA4B;QAC1C,OAAO,EAAE,uBAAuB;QAChC,GAAG,EAAE,mBAAmB;QACxB,KAAK,EAAE,qBAAqB;QAC5B,MAAM,EAAE,sBAAsB;KACjC;IAED,UAAU,EAAE;QACR,IAAI,EAAE,cAAc;QACpB,OAAO,EAAE,iBAAiB;QAC1B,QAAQ,EAAE,kBAAkB;QAC5B,QAAQ,EAAE,kBAAkB;QAC5B,SAAS,EAAE,mBAAmB;QAC9B,KAAK,EAAE,eAAe;QACtB,SAAS,EAAE,mBAAmB;QAC9B,QAAQ,EAAE,kBAAkB;QAC5B,KAAK,EAAE,eAAe;QACtB,SAAS,EAAE,mBAAmB;QAC9B,IAAI,EAAE,cAAc;QACpB,OAAO,EAAE,iBAAiB;QAC1B,MAAM,EAAE,sBAAsB;QAC9B,MAAM,EAAE,sBAAsB;QAC9B,eAAe,EAAE,wBAAwB;QACzC,QAAQ,EAAE,wBAAwB;KACrC;IAED,MAAM,EAAE;QACJ,QAAQ,EAAE,mBAAmB;QAC7B,MAAM,EAAE,iBAAiB;QACzB,MAAM,EAAE,iBAAiB;QACzB,MAAM,EAAE,sBAAsB;QAC9B,MAAM,EAAE,sBAAsB;QAC9B,eAAe,EAAE,wBAAwB;QACzC,QAAQ,EAAE,wBAAwB;KACrC;IAED,YAAY,EAAE;QACV,OAAO,EAAE,aAAa;QACtB,KAAK,EAAE,cAAc;QACrB,SAAS,EAAE,aAAa;KAC3B;IAED,WAAW,EAAE;QACT,QAAQ,EAAE,qBAAqB;QAC/B,IAAI,EAAE,iBAAiB;QACvB,MAAM,EAAE,mBAAmB;KAC9B;IAED,YAAY,EAAE;QACV,IAAI,EAAE,iBAAiB;QACvB,IAAI,EAAE,iBAAiB;QACvB,IAAI,EAAE,iBAAiB;QACvB,WAAW,EAAE,wBAAwB;QACrC,SAAS,EAAE,sBAAsB;KACpC;IAED,eAAe,EAAE;QACb,MAAM,EAAE,oBAAoB;QAC5B,SAAS,EAAE,uBAAuB;QAClC,MAAM,EAAE,oBAAoB;QAC5B,QAAQ,EAAE,sBAAsB;QAChC,YAAY,EAAE,0BAA0B;KAC3C;IAED,UAAU,EAAE;QACR,QAAQ,EAAE,uBAAuB;QACjC,IAAI,EAAE,mBAAmB;KAC5B;IAED,WAAW,EAAE;QACT,KAAK,EAAE,qBAAqB;QAC5B,GAAG,EAAE,mBAAmB;QACxB,KAAK,EAAE,oBAAoB;KAC9B;IAED,gBAAgB,EAAE;QACd,MAAM,EAAE,uBAAuB;QAC/B,QAAQ,EAAE,yBAAyB;KACtC;IAED,mBAAmB,EAAE;QACjB,WAAW,EAAE,+BAA+B;QAC5C,OAAO,EAAE,2BAA2B;QACpC,IAAI,EAAE,wBAAwB;KACjC;IAED,kBAAkB,EAAE;QAChB,OAAO,EAAE,0BAA0B;QACnC,SAAS,EAAE,4BAA4B;KAC1C;IAED,mBAAmB,EAAE;QACjB,cAAc,EAAE,8BAA8B;QAC9C,aAAa,EAAE,6BAA6B;KAC/C;IAED,cAAc,EAAE;QACZ,SAAS,EAAE,mBAAmB;QAC9B,UAAU,EAAE,mBAAmB;QAC/B,gBAAgB,EAAE,yBAAyB;QAC3C,MAAM,EAAE,gBAAgB;KAC3B;IAED,aAAa,EAAE;QACX,OAAO,EAAE,mBAAmB;QAC5B,MAAM,EAAE,kBAAkB;QAC1B,IAAI,EAAE,gBAAgB;QACtB,IAAI,EAAE,gBAAgB;QACtB,MAAM,EAAE,kBAAkB;QAC1B,KAAK,EAAE,iBAAiB;KAC3B;IAED,SAAS,EAAE;QACP,OAAO,EAAE,qBAAqB;QAC9B,SAAS,EAAE,uBAAuB;QAClC,SAAS,EAAE,uBAAuB;KACrC;IAED,gBAAgB,EAAE;QACd,KAAK,EAAE,oBAAoB;QAC3B,KAAK,EAAE,oBAAoB;QAC3B,MAAM,EAAE,qBAAqB;KAChC;IAED,YAAY,EAAE;QACV,KAAK,EAAE,sBAAsB;QAC7B,MAAM,EAAE,uBAAuB;QAC/B,IAAI,EAAE,qBAAqB;QAC3B,OAAO,EAAE,wBAAwB;KACpC;IAED,YAAY,EAAE;QACV,QAAQ,EAAE,yBAAyB;QACnC,QAAQ,EAAE,yBAAyB;KACtC;IAED,UAAU,EAAE;QACR,KAAK,EAAE;YACH,MAAM,EAAE,6BAA6B;YACrC,OAAO,EAAE,8BAA8B;SAC1C;KACJ;IAED,gBAAgB,EAAE;QACd,QAAQ,EAAE,uBAAuB;QACjC,SAAS,EAAE,wBAAwB;KACtC;IAED,eAAe,EAAE;QACb,QAAQ,EAAE,4BAA4B;QACtC,KAAK,EAAE,yBAAyB;QAChC,IAAI,EAAE,wBAAwB;QAC9B,KAAK,EAAE,yBAAyB;QAChC,IAAI,EAAE,wBAAwB;KACjC;IAED,wBAAwB,EAAE;QACtB,MAAM,EAAE,0BAA0B;QAClC,QAAQ,EAAE,4BAA4B;QACtC,YAAY,EAAE,gCAAgC;QAC9C,SAAS,EAAE,6BAA6B;KAC3C;IAED,YAAY,EAAE;QACV,OAAO,EAAE,kBAAkB;QAC3B,UAAU,EAAE,qBAAqB;QACjC,MAAM,EAAE,iBAAiB;QACzB,KAAK,EAAE,gBAAgB;QACvB,YAAY,EAAE,sBAAsB;QACpC,YAAY,EAAE,sBAAsB;QACpC,aAAa,EAAE,uBAAuB;QACtC,QAAQ,EAAE,mBAAmB;QAC7B,OAAO,EAAE,kBAAkB;QAC3B,gBAAgB,EAAE,0BAA0B;QAC5C,cAAc,EAAE,wBAAwB;QACxC,QAAQ,EAAE,mBAAmB;QAC7B,MAAM,EAAE,iBAAiB;QACzB,aAAa,EAAE,uBAAuB;QACtC,SAAS,EAAE,mBAAmB;QAC9B,UAAU,EAAE,qBAAqB;QACjC,OAAO,EAAE,kBAAkB;QAC3B,UAAU,EAAE,qBAAqB;QACjC,OAAO,EAAE,kBAAkB;QAC3B,QAAQ,EAAE,mBAAmB;QAC7B,QAAQ,EAAE,mBAAmB;QAC7B,QAAQ,EAAE,mBAAmB;QAC7B,QAAQ,EAAE,mBAAmB;QAC7B,GAAG,EAAE,cAAc;QACnB,SAAS,EAAE,oBAAoB;QAC/B,aAAa,EAAE,wBAAwB;QACvC,WAAW,EAAE,sBAAsB;QACnC,YAAY,EAAE,uBAAuB;QACrC,UAAU,EAAE,qBAAqB;QACjC,WAAW,EAAE,sBAAsB;QACnC,WAAW,EAAE,sBAAsB;QACnC,OAAO,EAAE,kBAAkB;QAC3B,MAAM,EAAE,iBAAiB;QACzB,UAAU,EAAE,qBAAqB;QACjC,SAAS,EAAE,oBAAoB;QAC/B,aAAa,EAAE,uBAAuB;QACtC,SAAS,EAAE,oBAAoB;QAC/B,OAAO,EAAE,kBAAkB;QAC3B,eAAe,EAAE,0BAA0B;QAC3C,aAAa,EAAE,wBAAwB;QACvC,mBAAmB,EAAE,6BAA6B;QAClD,YAAY,EAAE,uBAAuB;QACrC,SAAS,EAAE,oBAAoB;QAC/B,SAAS,EAAE,oBAAoB;QAC/B,WAAW,EAAE,sBAAsB;QACnC,WAAW,EAAE,sBAAsB;QACnC,oBAAoB,EAAE,8BAA8B;QACpD,mBAAmB,EAAE,6BAA6B;QAClD,mBAAmB,EAAE,6BAA6B;QAClD,iBAAiB,EAAE,2BAA2B;QAC9C,eAAe,EAAE,yBAAyB;QAC1C,OAAO,EAAE,kBAAkB;QAC3B,OAAO,EAAE,kBAAkB;QAC3B,aAAa,EAAE,wBAAwB;QACvC,SAAS,EAAE,oBAAoB;QAC/B,QAAQ,EAAE,mBAAmB;QAC7B,WAAW,EAAE,sBAAsB;QACnC,eAAe,EAAE,0BAA0B;QAC3C,WAAW,EAAE,sBAAsB;QACnC,kBAAkB,EAAE,4BAA4B;QAChD,SAAS,EAAE,mBAAmB;QAC9B,OAAO,EAAE,kBAAkB;QAC3B,OAAO,EAAE,kBAAkB;QAC3B,QAAQ,EAAE,mBAAmB;QAC7B,SAAS,EAAE,oBAAoB;QAC/B,QAAQ,EAAE,mBAAmB;QAC7B,UAAU,EAAE,qBAAqB;QACjC,QAAQ,EAAE,mBAAmB;QAC7B,OAAO,EAAE,kBAAkB;QAC3B,eAAe,EAAE,yBAAyB;QAC1C,cAAc,EAAE,wBAAwB;QACxC,YAAY,EAAE,sBAAsB;QACpC,kBAAkB,EAAE,2BAA2B;QAC/C,iBAAiB,EAAE,0BAA0B;QAC7C,oBAAoB,EAAE,6BAA6B;KACtD;IAED,WAAW,EAAE;QACT,IAAI,EAAE,oBAAoB;QAC1B,IAAI,EAAE,oBAAoB;QAC1B,MAAM,EAAE,sBAAsB;QAC9B,OAAO,EAAE,uBAAuB;QAChC,MAAM,EAAE,sBAAsB;KACjC;IAED,4EAA4E;IAC5E,4BAA4B,EAAE;QAC1B,GAAG,EAAE,GAAG;QACR,QAAQ,EAAE,GAAG;QACb,QAAQ,EAAE,GAAG;QACb,MAAM,EAAE,GAAG;KACd;IAED,gBAAgB,EAAE;QACd,MAAM,EAAE,sBAAsB;QAC9B,MAAM,EAAE,sBAAsB;QAC9B,eAAe,EAAE,wBAAwB;QACzC,QAAQ,EAAE,wBAAwB;KACrC;IAED,oBAAoB,EAAE;QAClB,SAAS,EAAE,sBAAsB;QACjC,MAAM,EAAE,mBAAmB;QAC3B,MAAM,EAAE,mBAAmB;KAC9B;IAED,iBAAiB,EAAE;QACf,MAAM,EAAE,YAAY;QACpB,KAAK,EAAE,WAAW;KACrB;IAED,WAAW,EAAE;QACT,MAAM,EAAE,YAAY;QACpB,YAAY,EAAE,iBAAiB;QAC/B,KAAK,EAAE,WAAW;QAClB,GAAG,EAAE,SAAS;QACd,IAAI,EAAE,UAAU;QAChB,QAAQ,EAAE,cAAc;KAC3B;IAED,cAAc,EAAE;QACZ,MAAM,EAAE,qBAAqB;QAC7B,QAAQ,EAAE,uBAAuB;QACjC,GAAG,EAAE,kBAAkB;QACvB,MAAM,EAAE,qBAAqB;QAC7B,IAAI,EAAE,mBAAmB;QACzB,MAAM,EAAE,qBAAqB;QAC7B,KAAK,EAAE,oBAAoB;KAC9B;IAED,KAAK,EAAE;QACH,QAAQ,EAAE,UAAU;QACpB,IAAI,EAAE,QAAQ;QACd,IAAI,EAAE,SAAS;KAClB;IAED,cAAc,EAAE;QACZ,IAAI,EAAE,cAAc;QACpB,KAAK,EAAE,WAAW;QAClB,KAAK,EAAE,WAAW;QAClB,cAAc,EAAE,mBAAmB;QACnC,YAAY,EAAE,iBAAiB;QAC/B,YAAY,EAAE,iBAAiB;QAC/B,UAAU,EAAE,eAAe;QAC3B,cAAc,EAAE,mBAAmB;QACnC,eAAe,EAAE,mBAAmB;QACpC,oBAAoB,EAAE,mBAAmB;QACzC,iBAAiB,EAAE,gBAAgB;QACnC,sBAAsB,EAAE,gBAAgB;QACxC,iBAAiB,EAAE,gBAAgB;QACnC,sBAAsB,EAAE,gBAAgB;QACxC,SAAS,EAAE,mBAAmB;QAC9B,UAAU,EAAE,mBAAmB;QAC/B,gBAAgB,EAAE,yBAAyB;QAC3C,MAAM,EAAE,gBAAgB;QACxB,IAAI,EAAE,UAAU;QAChB,GAAG,EAAE,SAAS;QACd,OAAO,EAAE,iBAAiB;QAC1B,eAAe,EAAE,oBAAoB;QACrC,OAAO,EAAE,iBAAiB;QAC1B,IAAI,EAAE,cAAc;QACpB,MAAM,EAAE,YAAY;KACvB;IAED,YAAY,EAAE;QACV,cAAc,EAAE,mBAAmB;QACnC,eAAe,EAAE,oBAAoB;QACrC,KAAK,EAAE,WAAW;KACrB;IAED,WAAW,EAAE;QACT,aAAa;QACb,GAAG,EAAE,sBAAsB;QAC3B,MAAM,EAAE,yBAAyB;QACjC,KAAK,EAAE,wBAAwB;QAC/B,IAAI,EAAE,uBAAuB;QAC7B,QAAQ,EAAE,2BAA2B;QACrC,QAAQ,EAAE,2BAA2B;QACrC,GAAG,EAAE,sBAAsB;QAC3B,KAAK,EAAE,wBAAwB;QAC/B,IAAI,EAAE,uBAAuB;QAC7B,KAAK,EAAE,wBAAwB;QAE/B,cAAc;QACd,SAAS,EAAE,2BAA2B;QACtC,YAAY,EAAE,8BAA8B;QAC5C,WAAW,EAAE,6BAA6B;QAC1C,UAAU,EAAE,4BAA4B;QACxC,SAAS,EAAE,2BAA2B;QACtC,WAAW,EAAE,6BAA6B;QAE1C,cAAc;QACd,KAAK,EAAE,wBAAwB;QAE/B,eAAe;QACf,IAAI,EAAE,uBAAuB;QAC7B,SAAS,EAAE,4BAA4B;QACvC,KAAK,EAAE,wBAAwB;QAC/B,QAAQ,EAAE,2BAA2B;QACrC,MAAM,EAAE,yBAAyB;QAEjC,eAAe;QACf,MAAM,EAAE,yBAAyB;QACjC,aAAa,EAAE,+BAA+B;QAE9C,eAAe;QACf,SAAS,EAAE,4BAA4B;QACvC,KAAK,EAAE,wBAAwB;QAC/B,KAAK,EAAE,wBAAwB;QAC/B,OAAO,EAAE,0BAA0B;QACnC,MAAM,EAAE,yBAAyB;QACjC,KAAK,EAAE,wBAAwB;KAClC;IAED,YAAY,EAAE;QACV,UAAU,EAAE;YACV,OAAO,EAAE,qCAAqC;YAC9C,UAAU,EAAE,wCAAwC;YACpD,WAAW,EAAE,wCAAwC;YACrD,QAAQ,EAAE,sCAAsC;YAChD,YAAY,EAAE,0CAA0C;YACxD,KAAK,EAAE,mCAAmC;YAC1C,MAAM,EAAE,oCAAoC;YAC5C,QAAQ,EAAE,sCAAsC;YAChD,mBAAmB,EAAE,gDAAgD;SACtE;QACD,KAAK,EAAE;YACH,IAAI,EAAE,6BAA6B;YACnC,QAAQ,EAAE,iCAAiC;SAC9C;QACD,MAAM,EAAE;YACJ,GAAG,EAAE,qCAAqC;YAC1C,IAAI,EAAE,8BAA8B;YACpC,KAAK,EAAE,+BAA+B;YACtC,KAAK,EAAE,yCAAyC;YAChD,OAAO,EAAE,iCAAiC;SAC7C;QACD,SAAS,EAAE;YACP,MAAM,EAAE,mCAAmC;YAC3C,OAAO,EAAE,oCAAoC;YAC7C,SAAS,EAAE,sCAAsC;YACjD,SAAS,EAAE,sCAAsC;YACjD,OAAO,EAAE,oCAAoC;SAChD;KACJ;IAED,WAAW,EAAE;QACT,OAAO,EAAE,0BAA0B;QACnC,KAAK,EAAE,wBAAwB;QAC/B,IAAI,EAAE,uBAAuB;QAC7B,KAAK,EAAE,wBAAwB;QAC/B,OAAO,EAAE,0BAA0B;KACtC;IAED,OAAO,EAAE;QACL,KAAK,EAAE;YACH,GAAG,EAAE,uBAAuB;YAC5B,SAAS,EAAE,6BAA6B;YACxC,MAAM,EAAE,0BAA0B;YAClC,KAAK,EAAE,yBAAyB;YAChC,MAAM,EAAE,0BAA0B;YAClC,MAAM,EAAE,0BAA0B;SACrC;QACD,KAAK,EAAE;YACH,QAAQ,EAAE,4BAA4B;YACtC,iBAAiB,EAAE,mCAAmC;YACtD,KAAK,EAAE,yBAAyB;YAChC,cAAc,EAAE,gCAAgC;YAChD,YAAY,EAAE,gCAAgC;YAC9C,KAAK,EAAE,yBAAyB;YAChC,MAAM,EAAE,0BAA0B;SACrC;QACD,aAAa,EAAE;YACX,MAAM,EAAE,iCAAiC;YACzC,MAAM,EAAE,iCAAiC;YACzC,MAAM,EAAE,iCAAiC;YACzC,SAAS,EAAE,oCAAoC;SAClD;QACD,YAAY,EAAE;YACV,KAAK,EAAE,gCAAgC;YACvC,QAAQ,EAAE,mCAAmC;SAChD;KACJ;IAED,SAAS,EAAE;QACP,KAAK,EAAE;YACH,KAAK,EAAE,2BAA2B;YAClC,GAAG,EAAE,yBAAyB;YAC9B,GAAG,EAAE,yBAAyB;YAC9B,KAAK,EAAE,2BAA2B;YAClC,KAAK,EAAE,2BAA2B;SACrC;KACJ;CACJ,CAAC;;;;;ACvdF;;;;;;;;;;;GAWG;AACU,QAAA,WAAW,GAAG,aAAa,CAAC;AAC5B,QAAA,aAAa,GAAG,UAAU,mBAAW,EAAE,CAAC;AACxC,QAAA,KAAK,GAAG;IACjB,mBAAmB,EAAE,qBAAqB;IAC1C,0BAA0B,EAAE,6BAA6B;IACzD,oCAAoC,EAAE,sCAAsC;IAC5E,gCAAgC,EAAE,kCAAkC;IACpE,qBAAqB,EAAE,uBAAuB;IAC9C,uBAAuB,EAAE,yBAAyB;IAClD,iBAAiB,EAAE,YAAY;IAC/B,WAAW,EAAE,aAAa;IAC1B,mBAAmB,EAAE,qBAAqB;IAC1C,sBAAsB,EAAE,wBAAwB;IAChD,oBAAoB,EAAE,sBAAsB;IAC5C,aAAa,EAAE,eAAe;IAC9B,YAAY,EAAE,cAAc;IAC5B,cAAc,EAAE,gBAAgB;IAChC,oBAAoB,EAAE,sBAAsB;IAC5C,aAAa,EAAE,eAAe;IAC9B,MAAM,EAAE,QAAQ;IAChB,IAAI,EAAE,MAAM;IACZ,oBAAoB,EAAE,sBAAsB;IAC5C,wBAAwB,EAAE,0BAA0B;IACpD,QAAQ,EAAE,UAAU;IACpB,UAAU,EAAE,YAAY;IACxB,WAAW,EAAE,aAAa;CAC7B,CAAC;AACW,QAAA,SAAS,GAAG,MAAM,CAAC;AACnB,QAAA,UAAU,GAAG;IACtB,QAAQ,EAAE,UAAU;CACvB,CAAA;AACY,QAAA,gBAAgB,GAAG,8CAA8C,CAAC;AAElE,QAAA,iCAAiC,GAAG;IAC7C,GAAG,EAAE,CAAC;IACN,OAAO,EAAE,CAAC;IACV,QAAQ,EAAE,CAAC;IACX,IAAI,EAAE,IAAI;IACV,YAAY,EAAE,IAAI;IAClB,WAAW,EAAE,IAAI;CACpB,CAAC;AAEW,QAAA,iBAAiB,GAAG,MAAM,CAAC;AAC3B,QAAA,WAAW,GAAG,GAAG,CAAC;AAClB,QAAA,kBAAkB,GAAG,EAAE,CAAC;AACxB,QAAA,iBAAiB,GAAG,EAAE,CAAC;AAEpC,mHAAmH;AACtG,QAAA,EAAE,GAAG;IACd,MAAM,EAAE;QACJ,aAAa,EAAE;YACX,eAAe,EAAE;gBACb,KAAK,EAAE,CAAC;gBACR,MAAM,EAAE,CAAC,CAAC;gBACV,IAAI,EAAE,CAAC,CAAC;gBACR,OAAO,EAAE,CAAC,CAAC;gBACX,iGAAiG;gBACjG,YAAY,EAAE,CAAC;aAClB;YACD,MAAM,EAAE;gBACJ,IAAI,EAAE,CAAC;gBACP,KAAK,EAAE,CAAC,CAAC;gBACT,QAAQ,EAAE,CAAC,CAAC;gBACZ,KAAK,EAAE,CAAC,CAAC;gBACT,OAAO,EAAE,CAAC,EAAE;aACf;SACJ;QAED,6BAA6B,EAAE,CAAC,EAAE;QAClC,gBAAgB,EAAE,CAAC;QACnB,iBAAiB,EAAE,CAAC;KACvB;IACD,GAAG,EAAE;QACD,MAAM,EAAE,CAAC,CAAC,CAAC;QACX,OAAO,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;KAClB;IACD,OAAO,EAAE;QACL,KAAK,EAAE;YACH,MAAM,EAAE;gBACJ,IAAI,EAAE,WAAW;gBACjB,QAAQ,EAAE,MAAM;aACnB;SACJ;KACJ;IACD,UAAU,EAAE;QACR,MAAM,EAAE;YACJ,KAAK,EAAE,EAAC,GAAG,EAAE,CAAC,EAAC;YACf,IAAI,EAAE,EAAC,GAAG,EAAE,CAAC,EAAC;YACd,SAAS,EAAE,EAAC,GAAG,EAAE,CAAC,EAAC;YACnB,OAAO,EAAE,EAAC,GAAG,EAAE,CAAC,EAAC;YACjB,IAAI,EAAE,EAAC,GAAG,EAAE,CAAC,EAAC;YACd,OAAO,EAAE,EAAC,GAAG,EAAE,CAAC,EAAC;YACjB,QAAQ,EAAE,EAAC,GAAG,EAAE,CAAC,EAAC;YAClB,QAAQ,EAAE,EAAC,GAAG,EAAE,CAAC,EAAC;YAClB,SAAS,EAAE,EAAC,GAAG,EAAE,CAAC,EAAC;YACnB,KAAK,EAAE,EAAC,GAAG,EAAE,CAAC,EAAC;YACf,SAAS,EAAE,EAAC,GAAG,EAAE,CAAC,EAAC;YACnB,QAAQ,EAAE,EAAC,GAAG,EAAE,CAAC,EAAC;YAClB,MAAM,EAAE,EAAC,GAAG,EAAE,CAAC,EAAC;YAChB,MAAM,EAAE,EAAC,GAAG,EAAE,CAAC,EAAC;YAChB,eAAe,EAAE,EAAC,GAAG,EAAE,CAAC,EAAC;YACzB,QAAQ,EAAE,EAAC,GAAG,EAAE,CAAC,EAAC;SACrB;QACD,iBAAiB,EAAE,CAAC;KACvB;IACD,KAAK,EAAE;QACH,eAAe;QACf,mBAAmB,EAAE,CAAC,CAAC;QACvB,uBAAuB,EAAE,CAAC;KAC7B;CACJ,CAAA;;;;;AChHD,2CAA+C;AAE/C;;GAEG;AACH,MAAa,aAAa;IACtB;;;OAGG;IACH,MAAM,CAAC,UAAU,CAAC,oBAAyC,EAAE;QACzD,OAAO,WAAW,CAAC;YACf,IAAI,EAAE;gBACF,IAAI,EAAE,UAAU;gBAChB,KAAK,EAAE,UAAU;aACpB;YACD,OAAO,EAAE;gBACL,IAAI,EAAE,EAAE;gBACR,KAAK,EAAE,EAAE;aACZ;YACD,IAAI,EAAE,CAAC;YACP,KAAK,EAAE,CAAC;YACR,EAAE,EAAE;gBACA,IAAI,EAAE,CAAC;gBACP,KAAK,EAAE,CAAC;gBACR,GAAG,EAAE,EAAE;aACV;YACD,SAAS,EAAE,EAAE;YACb,GAAG,EAAE,EAAE;YACP,qBAAqB,EAAE,KAAK;SAC/B,EAAE,iBAAiB,CAAe,CAAC;IACxC,CAAC;IAED,MAAM,CAAC,cAAc,CAAC,wBAAiD,EAAE;QACrE,OAAO,WAAW,CAAC;YACf,KAAK,EAAE,CAAC;YACR,GAAG,EAAE,EAAE;YACP,IAAI,EAAE,CAAC;YACP,KAAK,EAAE,EAAE;SACZ,EAAE,qBAAqB,CAAmB,CAAC;IAChD,CAAC;IAED,MAAM,CAAC,aAAa,CAAC,uBAA+C,EAAE;QAClE,OAAO,WAAW,CAAC;YACf,WAAW,EAAE,IAAI,CAAC,eAAe,EAAE;YACnC,UAAU,EAAE,IAAI,CAAC,cAAc,EAAE;SACpC,EAAE,oBAAoB,CAAkB,CAAC;IAC9C,CAAC;IAED,MAAM,CAAC,WAAW,CAAC,qBAA2C,EAAE;QAC5D,OAAO,WAAW,CAAC;YACf,IAAI,EAAE,EAAE;YACR,WAAW,EAAE,IAAI,CAAC,eAAe,EAAE;YACnC,MAAM,EAAE,IAAI,CAAC,cAAc,EAAE;SAChC,EAAE,kBAAkB,CAAgB,CAAC;IAC1C,CAAC;IAED,MAAM,CAAC,cAAc,CAAC,wBAAiD,EAAE;QACrE,OAAO,WAAW,CAAC;YACf,MAAM,EAAE,EAAE;YACV,YAAY,EAAE,EAAE;YAChB,QAAQ,EAAE,CAAC;YACX,IAAI,EAAE,CAAC;YACP,QAAQ,EAAE,KAAK;YACf,OAAO,EAAE;gBACL,IAAI,EAAE,CAAC;gBACP,KAAK,EAAE,CAAC;gBACR,GAAG,EAAE,EAAE;aACV;YACD,iBAAiB,EAAE;gBACf,KAAK,EAAE,EAAE;gBACT,KAAK,EAAE,CAAC;gBACR,GAAG,EAAE,CAAC;aACT;SACJ,EAAE,qBAAqB,CAAmB,CAAC;IAChD,CAAC;IAED,MAAM,CAAC,eAAe,CAAC,yBAAmD,EAAE;QACxE,OAAO,WAAW,CAAC;YACf,KAAK,EAAE,EAAE;YACT,IAAI,EAAE,EAAE;YACR,MAAM,EAAE,EAAE;SACb,EAAE,sBAAsB,CAAoB,CAAC;IAClD,CAAC;IAED,MAAM,CAAC,cAAc,CAAC,wBAAiD,EAAE;QACrE,OAAO,WAAW,CAAC;YACf,IAAI,EAAE,EAAE;YACR,QAAQ,EAAE,EAAE;YACZ,SAAS,EAAE,EAAE;YACb,UAAU,EAAE,EAAE;YACd,KAAK,EAAE,EAAE;YACT,IAAI,EAAE,KAAK;YACX,GAAG,EAAE,CAAC;YACN,eAAe,EAAE,EAAE;YACnB,KAAK,EAAE,IAAI,CAAC,SAAS,EAAE;YACvB,QAAQ,EAAE,KAAK;YACf,MAAM,EAAE,IAAI,CAAC,UAAU,EAAE;YACzB,OAAO,EAAE,IAAI,CAAC,eAAe,EAAE;YAC/B,OAAO,EAAE,CAAC;YACV,aAAa,EAAE,EAAE;SACpB,EAAE,qBAAqB,CAAmB,CAAC;IAChD,CAAC;IAED,MAAM,CAAC,SAAS,CAAC,mBAAuC,EAAE;QACtD,OAAO,WAAW,CAAC;YACf,KAAK,EAAE,CAAC;YACR,IAAI,EAAE,CAAC;YACP,SAAS,EAAE,EAAE;YACb,GAAG,EAAE,EAAE;SACV,EAAE,gBAAgB,CAAc,CAAC;IACtC,CAAC;IAED,MAAM,CAAC,eAAe,CAAC,yBAAmD,EAAE;QACxE,OAAO,WAAW,CAAC;YACf,IAAI,EAAE,EAAE;YACR,SAAS,EAAE,EAAE;YACb,UAAU,EAAE,EAAE;YACd,KAAK,EAAE,EAAE;YACT,GAAG,EAAE,CAAC;YACN,WAAW,EAAE,EAAE;SAClB,EAAE,sBAAsB,CAAoB,CAAC;IAClD,CAAC;IAED,MAAM,CAAC,SAAS,CAAC,mBAAwC,EAAE;QACvD,OAAO,WAAW,CAAC;YACf,IAAI,EAAE,8BAAkB;YACxB,IAAI,EAAE,CAAC;YACP,KAAK,EAAE,CAAC;YACR,MAAM,EAAE,KAAK;YACb,UAAU,EAAE,KAAK;YACjB,KAAK,EAAE,EAAE;YACT,KAAK,EAAE,EAAE;YACT,KAAK,EAAE,EAAE;YACT,GAAG,EAAE,EAAE;YACP,SAAS,EAAE,EAAE;SAChB,EAAE,gBAAgB,CAAe,CAAC;IACvC,CAAC;CACJ;AArID,sCAqIC;AAED,uDAAuD;AAC1C,QAAA,aAAa,GAAG;IACzB,KAAK,EAAE;QACH,kBAAkB,EAAE;YAChB,GAAG,EAAE;gBACD,UAAU,EAAE;oBACR,OAAO,EAAE,CAAC,CAAC;oBACX,QAAQ,EAAE,CAAC,CAAC;oBACZ,IAAI,EAAE,CAAC,CAAC;iBACX;aACJ;YACD,GAAG,EAAE;gBACD,UAAU,EAAE;oBACR,IAAI,EAAE,CAAC,CAAC;oBACR,QAAQ,EAAE,CAAC,CAAC;oBACZ,KAAK,EAAE,CAAC,CAAC;oBACT,QAAQ,EAAE,CAAC,CAAC;oBACZ,IAAI,EAAE,CAAC,CAAC;iBACX;aACJ;YACD,KAAK,EAAE;gBACH,UAAU,EAAE;oBACR,IAAI,EAAE,CAAC,CAAC;oBACR,OAAO,EAAE,CAAC,CAAC;oBACX,QAAQ,EAAE,CAAC,CAAC;oBACZ,KAAK,EAAE,CAAC,CAAC;oBACT,SAAS,EAAE,CAAC,CAAC;oBACb,QAAQ,EAAE,CAAC,CAAC;oBACZ,IAAI,EAAE,CAAC,CAAC;iBACX;gBACD,OAAO,EAAE;oBACL,KAAK,EAAE,CAAC,CAAC;iBACZ;aACJ;YACD,KAAK,EAAE;gBACH,UAAU,EAAE;oBACR,IAAI,EAAE,CAAC,CAAC;oBACR,QAAQ,EAAE,CAAC,CAAC;oBACZ,QAAQ,EAAE,CAAC,CAAC;oBACZ,SAAS,EAAE,CAAC,CAAC;oBACb,IAAI,EAAE,CAAC,CAAC;iBACX;aACJ;SACJ;KACJ;IACD,MAAM,EAAE,aAAa,CAAC,UAAU,CAAC,EAAC,IAAI,EAAE,EAAC,IAAI,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAC,EAAC,CAAC;CAClE,CAAA;;;;;ACpMD,MAAsB,WAAW;IAC7B,YAAsB,IAAc;QAAd,SAAI,GAAJ,IAAI,CAAU;IAAG,CAAC;CAC3C;AAFD,kCAEC;;;;;ACFM,MAAM,kBAAkB,GAAG,GAAG,EAAE;IACnC,sDAAsD;IACtD;;;;;OAKG;IACH,UAAU,CAAC,cAAc,CAAC,qBAAqB,EAAE,CAAC,MAAM,EAAE,QAAgB,EAAE,QAAgB,EAAE,EAAE;QAC5F,OAAO,MAAM,CAAC,QAAQ,CAAC,KAAK,QAAQ,CAAC;IACzC,CAAC,CAAC,CAAA;AACN,CAAC,CAAA;AAXY,QAAA,kBAAkB,sBAW9B;;;;;ACXD,wCAAqC;AAGrC,sCAA8B;AAC9B,4CAAoD;AAE7C,MAAM,oBAAoB,GAAG,GAAG,EAAE;IACrC,UAAU,CAAC,cAAc,CAAC,YAAY,EAAE,UAAU,KAAK,EAAE,GAAG;QACxD,IAAI,GAAG;YAAE,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC;QAC5B,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;IACrC,CAAC,CAAC,CAAC;IAEH,UAAU,CAAC,cAAc,CAAC,eAAe,EAAE,UAAU,KAAiB;QAClE,MAAM,eAAe,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC;QACnF,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,uBAAW,EAAE,iBAAK,CAAC,qBAAqB,CAAC,IAAI,CAAC,eAAe,IAAI,CAAC,KAAK,CAAC,SAAS;YACpG,OAAO,eAAe,CAAC;QAE3B,gDAAgD;QAChD,MAAM,mBAAmB,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAG,CAAC,UAAU,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC;QAChF,IAAI,CAAC,mBAAmB;YAAE,OAAO,eAAe,CAAC;QAEjD,MAAM,UAAU,GAAG,mBAAmB,CAAC,MAAM,GAAG,cAAE,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC;YAC7E,mBAAmB,CAAC,MAAM,GAAE,CAAC,CAAC,CAAC;YAC/B,cAAE,CAAC,UAAU,CAAC,iBAAiB,CAAC;QACpC,MAAM,4BAA4B,GAAG,mBAAmB,CAAC,SAAS,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC,WAAW,EAAE,CAAC;QAChG,OAAO,GAAG,eAAe,KAAK,4BAA4B,GAAG,CAAC;IAClE,CAAC,CAAC,CAAC;IAEH,UAAU,CAAC,cAAc,CAAC,cAAc,EAAE,UAAU,GAAG;QACnD,IAAI,GAAG;YAAE,OAAO,iBAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACnC,OAAO,EAAE,CAAC;IACd,CAAC,CAAC,CAAC;IAEH,UAAU,CAAC,cAAc,CAAC,eAAe,EAAE,UAAU,GAAG,IAAI;QACxD,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,QAAQ,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAC5D,CAAC,CAAC,CAAC;IAEH,UAAU,CAAC,cAAc,CAAC,QAAQ,EAAE,UAAU,IAAI,EAAE,CAAC,GAAG,GAAG;QACvD,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;YACrB,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;SACvB;QACD,OAAO,IAAI,CAAC;IAChB,CAAC,CAAC,CAAC;IAEH,UAAU,CAAC,cAAc,CAAC,KAAK,EAAE,UAAU,IAAY,EAAE,EAAU,EAAE,OAAO;QACxE,IAAI,KAAK,GAAG,EAAE,CAAC;QACf,KAAK,IAAI,CAAC,GAAG,IAAI,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,IAAI,CAAC,EAAE;YAC/B,KAAK,IAAI,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;SAC1B;QAED,OAAO,KAAK,CAAC;IACjB,CAAC,CAAC,CAAC;IACH,UAAU,CAAC,cAAc,CAAC,QAAQ,EAAE,UAAU,EAAU,EAAE,EAAU;QAChE,OAAO,EAAE,GAAG,EAAE,CAAC;IACnB,CAAC,CAAC,CAAC;IACH,UAAU,CAAC,cAAc,CAAC,QAAQ,EAAE,UAAU,EAAU,EAAE,EAAU;QAChE,IAAI,EAAE,KAAK,CAAC;YAAE,OAAO,CAAC,CAAC;QACvB,OAAO,EAAE,GAAG,EAAE,CAAC;IACnB,CAAC,CAAC,CAAC;IACH,UAAU,CAAC,cAAc,CAAC,SAAS,EAAE,UAAU,GAAG,EAAE,IAAI,EAAE,OAAO;QAC7D,IAAI,GAAG,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;YAC1B,OAAO,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;SAC3B;;YAAM,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IACxC,CAAC,CAAC,CAAC;IACH,UAAU,CAAC,cAAc,CAAC,MAAM,EAAE,UAAU,GAAG,EAAE,GAAG,EAAE,OAAO;QACzD,IAAI,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC;YAAE,OAAO,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;;YAC1C,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IACtC,CAAC,CAAC,CAAC;IACH,kBAAkB;IAClB,UAAU,CAAC,cAAc,CAAC,MAAM,EAAE,UAAU,EAAE,EAAE,EAAE,EAAE,OAAO;QACvD,IAAI,EAAE,GAAG,EAAE;YAAE,OAAO,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;;YAChC,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IACtC,CAAC,CAAC,CAAC;IACH,eAAe;IACf,UAAU,CAAC,cAAc,CAAC,MAAM,EAAE,UAAU,EAAE,EAAE,EAAE,EAAE,OAAO;QACvD,IAAI,EAAE,GAAG,EAAE;YAAE,OAAO,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;;YAChC,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IACtC,CAAC,CAAC,CAAC;IACH,wBAAwB;IACxB,UAAU,CAAC,cAAc,CAAC,OAAO,EAAE,UAAU,EAAE,EAAE,EAAE,EAAE,OAAO;QACxD,IAAI,EAAE,IAAI,EAAE;YAAE,OAAO,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;;YACjC,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IACtC,CAAC,CAAC,CAAC;IACH,eAAe;IACf,UAAU,CAAC,cAAc,CAAC,MAAM,EAAE,UAAU,EAAE,EAAE,EAAE,EAAE,OAAO;QACvD,IAAI,EAAE,KAAK,EAAE;YAAE,OAAO,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;;YAClC,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IACtC,CAAC,CAAC,CAAC;IACH,WAAW;IACX,UAAU,CAAC,cAAc,CAAC,KAAK,EAAE,UAAU,EAAE,EAAE,EAAE,EAAE,OAAO;QACtD,IAAI,EAAE,KAAK,EAAE;YAAE,OAAO,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;;YAClC,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IACtC,CAAC,CAAC,CAAC;IACH,UAAU,CAAC,cAAc,CAAC,KAAK,EAAE,UAAU,EAAE;QACzC,OAAO,CAAC,EAAE,CAAC;IACf,CAAC,CAAC,CAAC;IACH,UAAU,CAAC,cAAc,CAAC,KAAK,EAAE,UAAU,EAAE,EAAE,EAAE;QAC7C,OAAO,EAAE,GAAG,EAAE,CAAC;IACnB,CAAC,CAAC,CAAC;IAEH,UAAU,CAAC,cAAc,CAAC,WAAW,EAAE,UAAU,KAAK;QAClD,OAAO,KAAK,KAAK,SAAS,IAAI,KAAK,KAAK,IAAI,CAAC;IACjD,CAAC,CAAC,CAAC;IACH;;OAEG;IACH,UAAU,CAAC,cAAc,CAAC,SAAS,EAAE,UAAU,KAAa,EAAE,YAAoB;QAC9E,OAAO,IAAI,UAAU,CAAC,UAAU,CAAC,KAAK,aAAL,KAAK,cAAL,KAAK,GAAI,YAAY,CAAC,CAAC;IAC5D,CAAC,CAAC,CAAC;IAEH,UAAU,CAAC,cAAc,CAAC,KAAK,EAAE,UAAU,KAAa;QACpD,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;IACvB,CAAC,CAAC,CAAC;IACH,UAAU,CAAC,cAAc,CAAC,WAAW,EAAE,UAAU,OAAO;QACpD,MAAM,IAAI,GAAa,iBAAO,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACvD,MAAM,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,EAAE;YAC/D,IAAI,KAAK,GAAG,CAAC;gBAAE,MAAM,IAAI,GAAG,CAAC;YAC7B,OAAO,MAAM,GAAG,OAAO,CAAC;QAC5B,CAAC,EAAE,EAAE,CAAC,CAAC;QACP,OAAO,IAAI,UAAU,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;IAC3C,CAAC,CAAC,CAAC;IACH,UAAU,CAAC,cAAc,CAAC,gBAAgB,EAAE,UAAU,KAAK;QACvD,MAAM,GAAG,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;QAC3B,OAAO,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC;IACjC,CAAC,CAAC,CAAC;IACH,+DAA+D;IAC/D,UAAU,CAAC,cAAc,CAAC,mBAAmB,EAAE,UAAU,KAAa,EAAE,MAAc,EAAE,OAAY;QAChG,OAAO,IAAI,UAAU,CAAC,UAAU,CAAC,iBAAO,CAAC,4BAA4B,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC,CAAC;IAC1F,CAAC,CAAC,CAAC;AACP,CAAC,CAAC;AA3HW,QAAA,oBAAoB,wBA2H/B;;;;;;;;;;;;;;ACjIF,6DAAkE;AAClE,iDAAsD;AACtD,+DAAoE;AACpE,uDAA4D;AAC5D,yDAA8D;AAC9D,6CAAgD;AAEhD,MAAa,gBAAgB;IACzB,MAAM,CAAO,aAAa;;YACtB,MAAM,+CAA0B,EAAE,CAAC;QACvC,CAAC;KAAA;IACD,MAAM,CAAC,eAAe;QAClB,mCAAoB,EAAE,CAAC;QACvB,iDAA2B,EAAE,CAAC;QAC9B,yCAAuB,EAAE,CAAC;QAC1B,2CAAwB,EAAE,CAAC;QAC3B,+BAAkB,EAAE,CAAC;IACzB,CAAC;CACJ;AAXD,4CAWC;;;;;;;;;;;;;;AClBM,MAAM,0BAA0B,GAAG,GAAS,EAAE;IACjD,MAAM,aAAa,GAAG;QAClB,aAAa;QACb,+DAA+D;QAC/D,2DAA2D;QAC3D,4DAA4D;QAC5D,6DAA6D;QAC7D,8DAA8D;QAC9D,4DAA4D;QAC5D,8DAA8D;QAC9D,8DAA8D;QAC9D,8DAA8D;QAC9D,qEAAqE;QAErE,2EAA2E;QAE3E,2EAA2E;QAE3E,6EAA6E;QAC7E,6EAA6E;QAE7E,sBAAsB;QACtB,gEAAgE;QAChE,8DAA8D;QAC9D,kEAAkE;QAClE,+DAA+D;QAC/D,gEAAgE;QAChE,iEAAiE;QACjE,yEAAyE;QAEzE,QAAQ;QACR,0EAA0E;QAC1E,qEAAqE;QACrE,kFAAkF;QAClF,yEAAyE;QAEzE,SAAS;QACT,wEAAwE;QACxE,4EAA4E;QAC5E,4EAA4E;QAC5E,4EAA4E;QAC5E,yEAAyE;QAEzE,aAAa;QACb,0EAA0E;QAC1E,8EAA8E;QAC9E,qFAAqF;QACrF,uEAAuE;QAEvE,SAAS;QACT,4EAA4E;QAC5E,0FAA0F;QAE1F,UAAU;QACV,8EAA8E;QAC9E,oFAAoF;QACpF,6EAA6E;QAE7E,gBAAgB;QAChB,iEAAiE;QACjE,8DAA8D;QAC9D,8DAA8D;QAC9D,+DAA+D;QAC/D,+DAA+D;QAC/D,oEAAoE;QACpE,2EAA2E;QAC3E,wEAAwE;QACxE,wEAAwE;QACxE,yEAAyE;QACzE,yEAAyE;QAGzE,gEAAgE;QAChE,+DAA+D;QAC/D,2DAA2D;QAC3D,qEAAqE;QACrE,qEAAqE;QACrE,2DAA2D;QAC3D,2DAA2D;QAC3D,4DAA4D;QAC5D,0DAA0D;QAC1D,iEAAiE;QACjE,2DAA2D;QAC3D,0DAA0D;QAC1D,2DAA2D;QAC3D,wDAAwD;QACxD,4DAA4D;QAC5D,8DAA8D;QAC9D,yDAAyD;QACzD,iEAAiE;QACjE,4DAA4D;QAC5D,kEAAkE;QAClE,gEAAgE;QAChE,4DAA4D;QAE5D,6BAA6B;QAC7B,2DAA2D;QAC3D,2DAA2D;QAE3D,4CAA4C;QAC5C,kEAAkE;QAClE,0DAA0D;QAC1D,+DAA+D;QAE/D,gDAAgD;QAChD,uDAAuD;QAEvD,oDAAoD;QACpD,oEAAoE;QAEpE,0BAA0B;QAC1B,4DAA4D;QAE5D,8DAA8D;QAE9D,kBAAkB;QAClB,8DAA8D;QAC9D,gEAAgE;QAEhE,UAAU;QACV,yEAAyE;KAC5E,CAAC;IAEF,OAAO,aAAa,CAAC,aAAa,CAAC,CAAC;AACxC,CAAC,CAAA,CAAC;AA5HW,QAAA,0BAA0B,8BA4HrC;;;;;AC3HF,mEAAgE;AAEzD,MAAM,uBAAuB,GAAG,GAAG,EAAE;IACxC,UAAU,CAAC,cAAc,CAAC,iBAAiB,EAAE,UAAU,EAAE;QACrD,MAAM,QAAQ,GAAG,aAAa,CAAC;QAC/B,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;QAC9C,MAAM,OAAO,GAAG;YACZ,IAAI,EAAE,QAAQ;YACd,IAAI,EAAE,OAAO;YACb,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC;YAC3C,QAAQ,EAAE,aAAa;SAC1B,CAAC;QACF,QAAQ,EAAE,EAAE;YACR,KAAK,WAAW;gBACZ,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,yBAAyB,CAAC,CAAC;gBAC9D,OAAO,CAAC,OAAO,CAAC,CAAC;YACrB,KAAK,SAAS;gBACV,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,uBAAuB,CAAC,CAAC;gBAC5D,OAAO,CAAC,OAAO,CAAC,CAAC;YACrB,KAAK,KAAK;gBACN,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC;gBACxD,OAAO,CAAC,OAAO,CAAC,CAAC;YACrB,KAAK,SAAS;gBACV,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,uBAAuB,CAAC,CAAC;gBAC5D,OAAO,CAAC,OAAO,CAAC,CAAC;YACrB,KAAK,SAAS;gBACV,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,uBAAuB,CAAC,CAAC;gBAC5D,OAAO,CAAC,OAAO,CAAC,CAAC;YACrB,KAAK,aAAa;gBACd,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,0BAA0B,CAAC,CAAC;gBAC/D,OAAO,CAAC,OAAO,CAAC,CAAC;YACrB,KAAK,QAAQ;gBACT,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,sBAAsB,CAAC,CAAC;gBAC3D,OAAO,CAAC,OAAO,CAAC,CAAC;YACrB,KAAK,OAAO;gBACR,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,qBAAqB,CAAC,CAAC;gBAC1D,OAAO,CAAC,OAAO,CAAC,CAAC;YACrB,KAAK,MAAM;gBACP,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,oBAAoB,CAAC,CAAC;gBACzD,OAAO,CAAC,OAAO,CAAC,CAAC;YACrB,KAAK,cAAc;gBACf,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,2BAA2B,CAAC,CAAC;gBAChE,OAAO,CAAC,OAAO,CAAC,CAAC;YACrB,KAAK,SAAS;gBACV,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,uBAAuB,CAAC,CAAC;gBAC5D,OAAO,CAAC,OAAO,CAAC,CAAC;YACrB,KAAK,QAAQ;gBACT,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,sBAAsB,CAAC,CAAC;gBAC3D,OAAO,CAAC,OAAO,CAAC,CAAC;YACrB,KAAK,OAAO;gBACR,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,qBAAqB,CAAC,CAAC;gBAC1D,OAAO,CAAC,OAAO,CAAC,CAAC;YACrB,KAAK,MAAM;gBACP,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,oBAAoB,CAAC,CAAC;gBACzD,OAAO,CAAC,OAAO,CAAC,CAAC;YACrB,KAAK,QAAQ;gBACT,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,sBAAsB,CAAC,CAAC;gBAC3D,OAAO,CAAC,OAAO,CAAC,CAAC;YACrB,KAAK,WAAW;gBACZ,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,yBAAyB,CAAC,CAAC;gBAC9D,OAAO,CAAC,OAAO,CAAC,CAAC;YACrB,KAAK,WAAW;gBACZ,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,yBAAyB,CAAC,CAAC;gBAC9D,OAAO,CAAC,OAAO,CAAC,CAAC;YACrB,KAAK,SAAS;gBACV,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,uBAAuB,CAAC,CAAC;gBAC5D,OAAO,CAAC,OAAO,CAAC,CAAC;YACrB,KAAK,eAAe;gBAChB,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,4BAA4B,CAAC,CAAC;gBACjE,OAAO,CAAC,OAAO,CAAC,CAAC;YACrB,KAAK,cAAc;gBACf,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,2BAA2B,CAAC,CAAC;gBAChE,OAAO,CAAC,OAAO,CAAC,CAAC;YACrB;gBACI,OAAO,EAAE,CAAC;SACjB;IACL,CAAC,CAAC,CAAC;IAEH,UAAU,CAAC,cAAc,CAAC,qBAAqB,EAAE,UAAU,EAAE;QACzD,QAAQ,EAAE,EAAE;YACR,KAAK,QAAQ;gBACT,OAAO;oBACH;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC;4BACrC,QAAQ,EAAE,KAAK;yBAClB;qBACJ;oBACD;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC;4BACzC,QAAQ,EAAE,KAAK;yBAClB;qBACJ;oBACD;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC;4BACzC,QAAQ,EAAE,KAAK;yBAClB;qBACJ;oBACD;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC;4BACrC,QAAQ,EAAE,KAAK;yBAClB;qBACJ;oBACD;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC;4BACxC,QAAQ,EAAE,KAAK;yBAClB;qBACJ;iBACJ,CAAC;YACN,KAAK,QAAQ,CAAC;YACd,KAAK,OAAO,CAAC;YACb,KAAK,QAAQ,CAAC;YACd,KAAK,WAAW,CAAC;YACjB,KAAK,WAAW,CAAC;YACjB,KAAK,SAAS,CAAC;YACf,KAAK,MAAM;gBACP,OAAO;oBACH;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC;yBACtC;qBACJ;iBACJ,CAAC;YACN,KAAK,cAAc;gBACf,OAAO;oBACH;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC;yBACzC;qBACJ;oBACD;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC;yBAC3C;qBACJ;oBACD;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC;yBACvC;qBACJ;iBACJ,CAAC;YACN,KAAK,aAAa;gBACd,OAAO;oBACH;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC;yBAC5C;qBACJ;iBACJ,CAAC;YACN,KAAK,OAAO;gBACR,OAAO;oBACH;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC;yBAC5C;qBACJ;oBACD;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC;yBAC7C;qBACJ;oBACD;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC;yBAC3C;qBACJ;oBACD;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC;yBACxC;qBACJ;iBACJ,CAAC;YACN,KAAK,eAAe;gBAChB,OAAO;oBACH;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,uBAAuB,CAAC;yBACpD;qBACJ;oBACD;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAAC;yBACrD;qBACJ;oBACD;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,2BAA2B,CAAC;yBACxD;qBACJ;iBACJ,CAAC;YACN,KAAK,SAAS;gBACV,OAAO;oBACH;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC;yBAC9C;qBACJ;iBACJ,CAAC;YACN;gBACI,OAAO,EAAE,CAAC;SACjB;IACL,CAAC,CAAC,CAAC;IAEH,UAAU,CAAC,cAAc,CAAC,eAAe,EAAE,UAAU,IAAiB;;QAClE,MAAM,OAAO,GAAG,IAAI,uCAAkB,CAAC,IAAI,CAAC,CAAC;QAC7C,MAAM,QAAQ,GAAG;YACb,KAAK,EAAE;gBACH,IAAI,EAAE,QAAQ;gBACd,KAAK,EAAE,OAAO,CAAC,WAAW,EAAE;gBAC5B,QAAQ,EAAE,UAAU;aACvB;SACJ,CAAC;QACF,QAAQ,IAAI,CAAC,IAAI,EAAE;YACf,KAAK,QAAQ;gBACT,OAAO;oBACH;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,MAAA,OAAO,CAAC,cAAc,EAAE,mCAAI,EAAE,CAAC,CAAC;4BACjF,QAAQ,EAAE,KAAK;yBAClB;qBACJ;oBACD;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,CAAC,MAAA,OAAO,CAAC,kBAAkB,EAAE,mCAAI,EAAE,CAAC,CAAC;4BACnF,QAAQ,EAAE,KAAK;yBAClB;qBACJ;oBACD;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,CAAC,MAAA,OAAO,CAAC,mBAAmB,EAAE,mCAAI,EAAE,CAAC,CAAC;4BACpF,QAAQ,EAAE,KAAK;yBAClB;qBACJ;oBACD;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,OAAO,CAAC,iBAAiB,EAAE;gCAC7B,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,CAAC,MAAA,OAAO,CAAC,iBAAiB,EAAE,mCAAI,EAAE,CAAC,CAAC;gCAC9E,CAAC,CAAC,OAAO,CAAC,cAAc,EAAE;4BAC9B,QAAQ,EAAE,KAAK;yBAClB;qBACJ;oBACD;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,OAAO,CAAC,oBAAoB,EAAE;4BACpC,QAAQ,EAAE,KAAK;yBAClB;qBACJ;iBACJ,CAAC;YACN,KAAK,OAAO,CAAC;YACb,KAAK,MAAM,CAAC;YACZ,KAAK,QAAQ,CAAC;YACd,KAAK,WAAW,CAAC;YACjB,KAAK,WAAW,CAAC;YACjB,KAAK,SAAS;gBACV,OAAO,CAAC,QAAQ,CAAC,CAAC;YACtB,KAAK,QAAQ;gBACT,IAAI,OAAO,CAAC,cAAc,EAAE,EAAE;oBAC1B,MAAM,KAAK,GAAG,MAAA,MAAA,OAAO,CAAC,OAAO,EAAE,0CAAE,OAAO,CAAC,KAAK,mCAAI,CAAC,CAAC;oBACpD,MAAM,GAAG,GAAG,MAAA,MAAA,OAAO,CAAC,OAAO,EAAE,0CAAE,OAAO,CAAC,GAAG,mCAAI,CAAC,CAAC;oBAChD,MAAM,IAAI,GAAG,KAAK,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,KAAK,KAAK,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;oBAC9H,MAAM,QAAQ,GAAG,UAAU,GAAG,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;oBAC5E,OAAO;wBACH;4BACI,IAAI,EAAE;gCACF,KAAK,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,qBAAqB,CAAC,KAAK,KAAK,EAAE;gCAC/D,IAAI;gCACJ,QAAQ;6BACX;yBACJ;wBACD;4BACI,IAAI,EAAE;gCACF,IAAI,EAAE,EAAE;6BACX;yBACJ;wBACD,QAAQ;qBACX,CAAC;iBACL;qBAAM;oBACH,OAAO,CAAC,QAAQ,CAAC,CAAC;iBACrB;YAEL,KAAK,SAAS;gBACV,OAAO;oBACH;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,MAAA,IAAI,CAAC,IAAI,CAAC,IAAI,mCAAI,EAAE,CAAC,CAAC;yBAC1E;qBACJ;iBACJ,CAAC;YAEN,KAAK,aAAa;gBACd,OAAO;oBACH;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,CAAC,KAAK,CAAC,MAAA,IAAI,CAAC,IAAI,CAAC,IAAI,mCAAI,EAAE,CAAC,CAAC;yBAC9E;qBACJ;iBACJ,CAAC;YACN,KAAK,OAAO;gBACR,OAAO;oBACH;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,CAAC,MAAA,IAAI,CAAC,IAAI,CAAC,IAAI,mCAAI,EAAE,CAAC,CAAC;yBACxE;qBACJ;oBACD;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,WAAW,CAAC,MAAA,IAAI,CAAC,IAAI,CAAC,KAAK,mCAAI,EAAE,CAAC,CAAC;yBAC1E;qBACJ;oBACD;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,MAAA,IAAI,CAAC,IAAI,CAAC,QAAQ,mCAAI,EAAE,CAAC,CAAC;yBAC3E;qBACJ;oBACD;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,OAAO,CAAC,QAAQ,EAAE;yBAC3B;qBACJ;iBACJ,CAAC;YACN,KAAK,eAAe;gBAChB,OAAO;oBACH;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,KAAK,CAAC,MAAA,IAAI,CAAC,IAAI,CAAC,SAAS,mCAAI,EAAE,CAAC,CAAC;yBACrF;qBACJ;oBACD;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC,MAAA,IAAI,CAAC,IAAI,CAAC,KAAK,mCAAI,EAAE,CAAC,CAAC;yBAClF;qBACJ;oBACD;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,SAAS,CAAC,MAAA,IAAI,CAAC,IAAI,CAAC,QAAQ,mCAAI,EAAE,CAAC,CAAC;yBACxF;qBACJ;iBACJ,CAAC;YAEN,KAAK,cAAc;gBACf,OAAO;oBACH;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,MAAA,IAAI,CAAC,IAAI,CAAC,MAAM,mCAAI,EAAE,CAAC,CAAC;yBAC7E;qBACJ;oBACD;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,MAAA,IAAI,CAAC,IAAI,CAAC,QAAQ,mCAAI,EAAE,CAAC,CAAC;yBAC3E;qBACJ;oBACD;wBACI,IAAI,EAAE;4BACF,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;yBAC/B;qBACJ;iBACJ,CAAC;YACN,KAAK,SAAS;gBACV,OAAO;oBACH;wBACI,MAAM,EAAE;4BACJ,QAAQ,EAAE,qBAAqB,OAAO,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE;4BACpE,KAAK,EAAE,IAAI;4BACX,IAAI,EAAE,OAAO,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,GAAG,KAAK;yBACzG;qBACJ;iBACJ,CAAC;YACN;gBACI,OAAO,EAAE,CAAC;SACjB;IACL,CAAC,CAAC,CAAC;IAEH,UAAU,CAAC,cAAc,CAAC,WAAW,EAAE,UAAU,IAAiB;QAC9D,MAAM,OAAO,GAAG,IAAI,uCAAkB,CAAC,IAAI,CAAC,CAAC;QAC7C,MAAM,QAAQ,GAAG;YACb,IAAI,EAAE,uBAAuB;YAC7B,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC;SAC5C,CAAC;QACF,MAAM,UAAU,GAAG;YACf,IAAI,EAAE,0BAA0B;YAChC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC;SAC9C,CAAC;QACF,MAAM,SAAS,GAAG;YACd,IAAI,EAAE,GAAG,OAAO,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,eAAe,oBAAoB;YAC3F,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC;SAC/C,CAAC;QACF,MAAM,OAAO,GAAG;YACZ,IAAI,EAAE,6BAA6B;YACnC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC;SACjD,CAAC;QAEF,MAAM,KAAK,GAAG,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;QAErC,IAAI,EAAE,CAAC,WAAW,CAAC,EAAE;YACjB,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;SAC1B;QAED,QAAQ,OAAO,CAAC,OAAO,EAAE,EAAE;YACvB,KAAK,SAAS,CAAC;YACf,KAAK,OAAO,CAAC;YACb,KAAK,QAAQ,CAAC;YACd,KAAK,WAAW,CAAC;YACjB,KAAK,WAAW,CAAC;YACjB,KAAK,SAAS,CAAC;YACf,KAAK,QAAQ;gBACT,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;SAChC;QAED,OAAO,KAAK,CAAC;IACjB,CAAC,CAAC,CAAC;AACP,CAAC,CAAC;AA5ZW,QAAA,uBAAuB,2BA4ZlC;;;;;AC/ZF,kDAA+C;AAI/C,wCAAmC;AAI5B,MAAM,2BAA2B,GAAG,GAAG,EAAE;IAC5C,UAAU,CAAC,cAAc,CAAC,oBAAoB,EAAE,UAAU,MAAM;QAC5D,IAAI,MAAM,KAAK,UAAU;YAAE,OAAO,GAAG,CAAC;QACtC,IAAI,MAAM,KAAK,MAAM;YAAE,OAAO,GAAG,CAAC;QAClC,IAAI,MAAM,KAAK,QAAQ;YAAE,OAAO,GAAG,CAAC;QACpC,OAAO,EAAE,CAAC;IACd,CAAC,CAAC,CAAC;IAEH,UAAU,CAAC,cAAc,CAAC,YAAY,EAAE,UAAS,MAAkB;QAC/D,MAAM,QAAQ,GAAG,UAAU,CAAC,OAAO,CAAC,kBAAkB,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC1E,IAAI,IAAI,GAAG,GAAG,MAAM,CAAC,KAAK,GAAG,QAAQ,EAAE,CAAC;QACxC,OAAO,IAAI,UAAU,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;IAC3C,CAAC,CAAC,CAAC;IAEH,UAAU,CAAC,cAAc,CAAC,UAAU,EAAE,UAAU,IAAI;QAChD,IAAI,IAAI,EAAE;YACN,QAAQ,IAAI,EAAE;gBACV,KAAK,CAAC;oBACF,OAAO,KAAK,CAAC;gBACjB,KAAK,CAAC;oBACF,OAAO,MAAM,CAAC;gBAClB,KAAK,CAAC;oBACF,OAAO,MAAM,CAAC;gBAClB,KAAK,CAAC;oBACF,OAAO,MAAM,CAAC;gBAClB,KAAK,CAAC;oBACF,OAAO,OAAO,CAAC;gBACnB,KAAK,CAAC;oBACF,OAAO,OAAO,CAAC;aACtB;SACJ;IACL,CAAC,CAAC,CAAC;IAEH,UAAU,CAAC,cAAc,CAAC,aAAa,EAAE,UAAU,OAAO;QACtD,IAAI,IAAI,GAAG,EAAE,CAAC;QACd,IAAI,OAAO,KAAK,aAAa,EAAE;YAC3B,IAAI,GAAG,aAAa,CAAC;SACxB;aAAM,IAAI,OAAO,KAAK,WAAW,EAAE;YAChC,IAAI,GAAG,sBAAsB,CAAC;SACjC;aAAM,IAAI,OAAO,KAAK,MAAM,EAAE;YAC3B,IAAI,GAAG,aAAa,CAAC;SACxB;aAAM,IAAI,OAAO,KAAK,MAAM,EAAE;YAC3B,IAAI,GAAG,cAAc,CAAC;SACzB;aAAM,IAAI,OAAO,KAAK,MAAM,EAAE;YAC3B,IAAI,GAAG,kBAAkB,CAAC;SAC7B;QACD,OAAO,IAAI,CAAC;IAChB,CAAC,CAAC,CAAC;IAEH,UAAU,CAAC,cAAc,CAAC,YAAY,EAAE,UAAU,SAA0B;QACxE,MAAM,KAAK,GAAG,IAAI,qBAAS,CAAC,SAAS,CAAC,CAAC;QACvC,OAAO,KAAK,CAAC,KAAK,CAAC;IACvB,CAAC,CAAC,CAAC;IAEH,UAAU,CAAC,cAAc,CAAC,aAAa,EAAE,UAAU,KAAa;QAC5D,IAAI,KAAK,GAAG,CAAC,EAAE;YACX,OAAO,IAAI,KAAK,EAAE,CAAC;SACtB;aAAM;YACH,OAAO,GAAG,KAAK,EAAE,CAAC;SACrB;IACL,CAAC,CAAC,CAAC;IAEH,UAAU,CAAC,cAAc,CAAC,aAAa,EAAE,iBAAO,CAAC,kBAAkB,CAAC,CAAC;AACzE,CAAC,CAAC;AA/DW,QAAA,2BAA2B,+BA+DtC;;;;;ACtEF,wCAAqC;AAGrC,oDAA+C;AAC/C,4CAAgD;AAEzC,MAAM,wBAAwB,GAAG,GAAG,EAAE;IACzC,UAAU,CAAC,cAAc,CAAC,kBAAkB,EAAE,UAAU,QAAyB;QAC7E,MAAM,OAAO,GAAG;YACZ,IAAI,EAAE,aAAa;YACnB,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC;YACzC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC;YACnC,QAAQ,EAAE,EAAE;SACf,CAAC;QACF,QAAQ,QAAQ,EAAE;YACd,KAAK,QAAQ;gBACT,OAAO,CAAC,QAAQ,GAAG,YAAY,CAAC;gBAChC,OAAO,CAAC,OAAO,CAAC,CAAC;YACrB,KAAK,UAAU;gBACX,OAAO,CAAC,QAAQ,GAAG,cAAc,CAAC;gBAClC,OAAO,CAAC,OAAO,CAAC,CAAC;YACrB,KAAK,WAAW;gBACZ,OAAO,CAAC,QAAQ,GAAG,eAAe,CAAC;gBACnC,OAAO,CAAC,OAAO,CAAC,CAAC;YACrB;gBACI,OAAO,EAAE,CAAC;SACjB;IACL,CAAC,CAAC,CAAC;IAEH,UAAU,CAAC,cAAc,CAAC,sBAAsB,EAAE,UAAU,EAAE,EAAE,OAAwB;QACpF,MAAM,KAAK,GAAG;YACV,IAAI,EAAE;gBACF,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,oBAAoB,CAAC;gBAC9C,QAAQ,EAAE,iBAAiB;aAC9B;SACJ,CAAC;QAEF,MAAM,GAAG,GAAG;YACR,iDAAiD;YACjD,IAAI,EAAE;gBACF,IAAI,EAAE,CAAC,OAAO,IAAI,OAAO,CAAC,mBAAmB,CAAC,CAAC;oBAC3C,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC;oBAC/B,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC;gBAC1C,QAAQ,EAAE,KAAK;aAClB;SACJ,CAAC;QAEF,QAAQ,EAAE,EAAE;YACR,KAAK,QAAQ,CAAC;YACd,KAAK,WAAW,CAAC;YACjB,KAAK,UAAU;gBACX,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;YACxB;gBACI,OAAO,EAAE,CAAC;SACjB;IACL,CAAC,CAAC,CAAC;IACH,UAAU,CAAC,cAAc,CAAC,gBAAgB,EAAE,UAAU,SAAiB,EAAE,KAAiB;;QACtF,MAAM,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QACvE,OAAO;YACH;gBACI,IAAI,EAAE;oBACF,IAAI,EAAE,MAAA,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,mCAAI,EAAE;oBAC5B,QAAQ,EAAE,iBAAiB;iBAC9B;aACJ;YACD;gBACI,IAAI,EAAE;oBACF,IAAI,EAAE,iBAAO,CAAC,SAAS,CAAC,KAAK,CAAC;oBAC9B,QAAQ,EAAE,KAAK;iBAClB;aACJ;SACJ,CAAC;IACN,CAAC,CAAC,CAAC;IAEH,UAAU,CAAC,cAAc,CAAC,uBAAuB,EAAE,UAAS,KAAiB;QACzE,MAAM,OAAO,GAAa,EAAE,CAAC;QAE7B,iEAAiE;QACjE,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,uBAAW,EAAE,iBAAK,CAAC,qBAAqB,CAAC,IAAI,CAAC,uBAAU,CAAC,mBAAmB,CAAC,KAAK,CAAC,EAAE;YACvG,OAAO,CAAC,IAAI,CAAC,4BAA4B,CAAC,CAAC;SAC9C;QAED,OAAO,OAAO,CAAC;IACnB,CAAC,CAAC,CAAA;IAEF,UAAU,CAAC,cAAc,CAAC,YAAY,EAAE,UAAU,SAAiB,EAAE,KAAiB;QAClF,MAAM,QAAQ,GAAG;YACb,IAAI,EAAE,aAAa;YACnB,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC;YAC1C,QAAQ,EAAE,EAAE;SACf,CAAC;QACF,MAAM,UAAU,GAAG;YACf,IAAI,EAAE,cAAc;YACpB,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC;YAC5C,QAAQ,EAAE,EAAE;SACf,CAAC;QACF,QAAQ,SAAS,EAAE;YACf,KAAK,QAAQ;gBACT,QAAQ,CAAC,QAAQ,GAAG,YAAY,CAAC;gBACjC,UAAU,CAAC,QAAQ,GAAG,eAAe,CAAA;gBACrC,OAAO,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;YAClC,KAAK,UAAU;gBACX,QAAQ,CAAC,QAAQ,GAAG,qBAAqB,CAAC;gBAC1C,UAAU,CAAC,QAAQ,GAAG,iBAAiB,CAAC;gBACxC,OAAO,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;YAClC,KAAK,WAAW;gBACZ,QAAQ,CAAC,QAAQ,GAAG,sBAAsB,CAAC;gBAC3C,UAAU,CAAC,QAAQ,GAAG,kBAAkB,CAAC;gBACzC,OAAO,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;YAClC;gBACI,OAAO,CAAC,QAAQ,CAAC,CAAC;SACzB;IACL,CAAC,CAAC,CAAC;AAEP,CAAC,CAAC;AA5GW,QAAA,wBAAwB,4BA4GnC;;;;;;;;;;;;;;ACzGF,iDAA4C;AAC5C,2CAAsH;AAEtH,mDAA8C;AAC9C,sFAAiF;AAQjF,MAAa,OAAO;IAChB;;;;;OAKG;IACH,MAAM,CAAC,SAAS,CAAC,IAAqB,EAAE,OAA0B;QAC9D,IAAI,IAAI,CAAC,GAAG,KAAK,SAAS;YAAE,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC;QAC1C,MAAM,KAAK,GAAG,IAAI,qBAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACtC,oDAAoD;QACpD,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,SAAS,EAAE;YAC5B,KAAK,CAAC,aAAa,CAAC,eAAe,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;SACtD;QAED,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;QACzD,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC;QAEtB,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;QAE1D,OAAO,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED;;;;OAIG;IACH,MAAM,CAAC,OAAO,CAAC,KAAa,EAAE,QAAQ;QAClC,MAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,QAAQ,CAAC,CAAC;QAC1C,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,UAAU,CAAC,GAAG,UAAU,CAAC;IACvD,CAAC;IAED;;;;OAIG;IACH,MAAM,CAAC,eAAe,CAAC,KAAa,EAAE,OAA0B;QAC5D,IAAI,OAAO,CAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,GAAG,CAAA,KAAK,QAAQ,EAAE;YAClC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;SACxC;QACD,IAAI,OAAO,CAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,GAAG,CAAA,KAAK,QAAQ,EAAE;YAClC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;SACxC;QAED,OAAO,KAAK,CAAC;IACjB,CAAC;IAED,MAAM,CAAC,UAAU,CAAC,KAAK;QACnB,OAAO,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC;IACpE,CAAC;IAED,0CAA0C;IAC1C,MAAM,CAAC,SAAS,CAAC,IAAI;QACjB,IAAI,OAAO,IAAI,KAAK,QAAQ;YAAE,OAAO,IAAI,CAAC;QAC1C,IAAI,IAAI,KAAK,SAAS,IAAI,IAAI,KAAK,IAAI;YAAE,OAAO,IAAI,CAAC;QACrD,MAAM,OAAO,GAAG,EAAE,CAAC;QACnB,KAAK,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;YAC7C,MAAM,MAAM,GAAG,GAAG,CAAC,OAAO,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;YAC/C,OAAO,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;SAC3C;QACD,OAAO,OAAO,CAAC;IACnB,CAAC;IAED,yCAAyC;IACzC,MAAM,CAAC,SAAS,CAAC,IAAI;QACjB,IAAI,OAAO,IAAI,KAAK,QAAQ;YAAE,OAAO,IAAI,CAAC;QAC1C,IAAI,IAAI,KAAK,SAAS,IAAI,IAAI,KAAK,IAAI;YAAE,OAAO,IAAI,CAAC;QACrD,MAAM,OAAO,GAAG,EAAE,CAAC;QACnB,KAAK,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;YAC7C,MAAM,MAAM,GAAG,GAAG,CAAC,OAAO,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;YAC/C,OAAO,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;SAC3C;QACD,OAAO,OAAO,CAAC;IACnB,CAAC;IAED,MAAM,CAAC,QAAQ,CAAC,IAAgG;;QAC5G,IAAI,CAAC,IAAI;YAAE,OAAO,KAAK,CAAC;QACxB,IAAI,OAAO,IAAI,KAAK,SAAS;YAAE,OAAO,IAAI,CAAC;QAC3C,oDAAoD;QACpD,MAAM,YAAY,GAAG;YACjB,wBAAwB;YACxB,8BAA8B;YAC9B,sBAAsB;YACtB,sBAAsB;YACtB,mBAAmB;YACnB,kBAAkB;YAClB,sBAAsB;YACtB,4BAA4B;YAC5B,cAAc;SACjB,CAAC;QACF,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC;YAAE,IAAI,GAAG,CAAC,IAAI,CAAC,CAAC;QACxC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC;QACjC,sEAAsE;QACtE,KAAK,MAAM,GAAG,IAAI,IAAI,EAAE;YACpB,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;gBACzB,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;oBAChC,OAAO,IAAI,CAAC;iBACf;aACJ;iBAAM,IAAI,OAAO,GAAG,KAAK,QAAQ,IAAK,GAAkB,CAAC,KAAK,KAAK,SAAS,EAAE;gBAC3E,IAAI,YAAY,CAAC,OAAO,CAAC,MAAA,GAAG,CAAC,KAAK,mCAAI,EAAE,CAAC,IAAI,CAAC,EAAE;oBAC5C,OAAO,IAAI,CAAC;iBACf;aACJ;SACJ;QACD,yCAAyC;QACzC,OAAO,KAAK,CAAC;IACjB,CAAC;IAED,MAAM,CAAC,kBAAkB,CAAC,GAA2C;QACjE,IAAI,GAAG,KAAK,SAAS;YAAE,OAAO,EAAE,CAAC;QACjC,IAAI,OAAO,GAAG,KAAK,QAAQ;YAAE,OAAO,GAAG,CAAC,QAAQ,EAAE,CAAC;QACnD,IAAI,OAAO,GAAG,KAAK,QAAQ;YAAE,OAAO,GAAG,CAAC;QACxC,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;YACpB,OAAO,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;SACxB;QACD,OAAO,EAAE,CAAC;IACd,CAAC;IAED,MAAM,CAAC,kBAAkB,CAAC,GAA2C;QACjE,IAAI,OAAO,GAAG,KAAK,QAAQ;YAAE,OAAO,GAAG,CAAC;QACxC,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;YACzB,MAAM,GAAG,GAAG,CAAC,GAAG,CAAC;YACjB,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;gBAAE,OAAO,GAAG,CAAC;YAC5B,OAAO,CAAC,CAAC;SACZ;QACD,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;YACpB,MAAM,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YACzB,MAAM,GAAG,GAAG,CAAC,GAAG,CAAC;YACjB,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;gBAAE,OAAO,GAAG,CAAC;YAC5B,OAAO,CAAC,CAAC;SACZ;QACD,OAAO,CAAC,CAAC;IACb,CAAC;IAED,MAAM,CAAC,mBAAmB,CAAC,GAAG,EAAE,IAAI;QAChC,MAAM,UAAU,GAAG,CAAC,EAAE,EAAE,EAAE;YACtB,MAAM,QAAQ,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,sBAAsB,CAAC,CAAC;YACxD,MAAM,SAAS,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;YAC/C,IAAI,CAAC,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE;gBAC7B,CAAC,CAAC,SAAS,CAAC,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;gBACzC,CAAC,CAAC,SAAS,CAAC,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;aACzC;iBAAM;gBACH,CAAC,CAAC,SAAS,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;gBACnC,CAAC,CAAC,SAAS,CAAC,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC;aAC/C;QACL,CAAC,CAAC;QACF,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC;YAC7B,UAAU,CAAC,IAAI,CAAC,CAAC;QACrB,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,UAAU,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC;QAC9E,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,MAAM,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;IAC1E,CAAC;IAED,MAAM,CAAC,qBAAqB,CAAC,MAAM;QAC/B,IAAI,MAAM,KAAK,CAAC;YAAE,OAAO,CAAC,CAAC;QAC3B,IAAI,MAAM,KAAK,CAAC;YAAE,OAAO,CAAC,CAAC,CAAC;QAC5B,IAAI,MAAM,KAAK,CAAC;YAAE,OAAO,CAAC,CAAC,CAAC;QAC5B,IAAI,MAAM,KAAK,EAAE;YAAE,OAAO,CAAC,CAAC,CAAC;QAC7B,OAAO,CAAC,CAAC;IACb,CAAC;IAED,MAAM,CAAC,sBAAsB,CAAC,MAAM;QAChC,IAAI,MAAM,KAAK,CAAC;YAAE,OAAO,EAAE,CAAC;QAC5B,IAAI,MAAM,KAAK,CAAC;YAAE,OAAO,IAAI,CAAC;QAC9B,IAAI,MAAM,KAAK,CAAC;YAAE,OAAO,IAAI,CAAC;QAC9B,IAAI,MAAM,KAAK,EAAE;YAAE,OAAO,IAAI,CAAC;QAC/B,IAAI,MAAM,KAAK,EAAE;YAAE,OAAO,iBAAiB,CAAC;QAC5C,OAAO,EAAE,CAAC;IACd,CAAC;IAED,MAAM,CAAC,KAAK,CAAC,GAAG;QACZ,MAAM,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC7B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACnC,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;SACnE;QACD,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,GAAG,EAAE,EAAE;YACxB,IAAI,IAAI,KAAK,YAAY;gBAAE,KAAK,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC;YAChD,IAAI,IAAI,KAAK,UAAU;gBAAE,KAAK,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC;QAClD,CAAC,CAAC,CAAC;QACH,OAAO,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IAC3B,CAAC;IAED,MAAM,CAAC,SAAS,CAAC,GAAG;QAChB,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,SAAS,QAAQ,CAAC,EAAE,EAAE,EAAE;YACvD,IAAI,EAAE,GAAG,EAAE;gBAAE,OAAO,CAAC,CAAC,CAAC;YACvB,IAAI,EAAE,GAAG,EAAE;gBAAE,OAAO,CAAC,CAAC,CAAC;YACvB,OAAO,CAAC,CAAC;QACb,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,CAAC;QACN,MAAM,KAAK,GAAG,EAAE,CAAC;QACjB,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC9B,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YAC9B,OAAO,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;SACvB;QAED,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC9B,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;SACjC;QACD,OAAO,GAAG,CAAC;IACf,CAAC;IAED,MAAM,CAAC,YAAY,CAAC,KAAK;QACrB,OAAO,KAAK,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAI,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC;IACvF,CAAC;IAED,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,IAAI;QACnB,MAAM,MAAM,GAAG,EAAE,CAAC;QAClB,IAAI,OAAO,GAAG,KAAK,QAAQ,IAAI,GAAG,KAAK,IAAI,EAAE;YACzC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,KAAK,CAAC,EAAE,EAAE;gBACzC,IAAI,IAAI,CAAC,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;oBAAE,MAAM,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;YAChD,CAAC,CAAC,CAAC;SACN;QACD,OAAO,MAAM,CAAC;IAClB,CAAC;IAED,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE,KAAK;QACvB,IAAI,OAAO,GAAG,KAAK,QAAQ,IAAI,GAAG,KAAK,IAAI,EAAE;YACzC,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,OAAO,CAAC,IAAI,GAAG,CAAC,cAAc,CAAC,OAAO,CAAC,IAAI,KAAK,KAAK,EAAE,EAAE;gBAC7E,GAAG,CAAC,KAAK,GAAG,KAAK,CAAC;aACrB;YACD,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC;iBACd,MAAM,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE,EAAE,CAAC,OAAO,KAAK,KAAK,QAAQ,CAAC;iBAChD,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,KAAK,CAAC,EAAE,EAAE,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,CAAC;SACjE;IACL,CAAC;IAED,4FAA4F;IAC5F,MAAM,CAAC,4BAA4B,CAAC,KAAa,EAAE,SAAiB,CAAC;QACjE,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QAEvC,IAAI,MAAM,IAAI,CAAC,EAAE;YACb,OAAO,IAAI,CAAC;SACf;QAED,IAAI,IAAI,CAAC,MAAM,GAAG,MAAM,EAAE;YACtB,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;SACxB;QAED,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,WAAW,EAAE,CAAC;IAC/C,CAAC;IAED,MAAM,CAAC,QAAQ,CAAC,EAAW;QACvB,KAAK,MAAM,KAAK,IAAI,MAAM,CAAC,MAAM,CAAC,UAAU,EAAE;YAC1C,IAAI,KAAK,CAAC,EAAE,KAAK,EAAE,EAAE;gBACjB,OAAO,KAAK,CAAC;aAChB;SACJ;IACL,CAAC;IAED,MAAM,CAAC,aAAa,CAAC,YAAoB;QACrC,MAAM,CAAC,OAAO,EAAE,OAAO,CAAC,GAAG,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAEnD,MAAM,aAAa,GAAG,OAAO,MAAK,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,KAAK,CAAC,GAAG,CAAA,CAAC;QACpD,IAAI,aAAa,EAAE;YACf,OAAO,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;SACrC;QAED,sEAAsE;QACtE,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACvC,IAAI,CAAC,KAAK,EAAE;YACR,OAAO;SACV;QAED,YAAY;QACZ,MAAM,SAAS,GAAG,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;QAC1E,IAAI,CAAC,SAAS,EAAE;YACZ,OAAO;SACV;QAED,OAAO,IAAI,KAAK,CAAC,SAAS,CAAC,CAAC;IAChC,CAAC;IAED,MAAM,CAAC,cAAc,CAAC,IAAW;QAC7B,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;QAE/B,IAAI,IAAI,EAAE;YACN,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SACnC;aAAM;YACH,OAAO,EAAE,CAAC;SACb;IACL,CAAC;IAED,MAAM,CAAC,cAAc,CAAC,IAAW;QAC7B,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;QAE/B,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG,CAAC,CAAC;IACjC,CAAC;IAED,MAAM,CAAC,oBAAoB,CAAC,WAAkB,EAAE,SAAgB;QAC5D,IAAI,CAAC,WAAW,IAAI,CAAC,SAAS;YAAE,OAAO,CAAC,CAAC;QAEzC,MAAM,MAAM,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,EAAE,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;QAChG,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,EAAE,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;QAE1F,MAAM,mBAAmB,GAAG,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,IAAI,EAAE,EAAC,UAAU,EAAE,IAAI,EAAC,CAAC,CAAC;QAC1F,MAAM,SAAS,GAAG,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC;QAC9C,uDAAuD;QACvD,OAAO,OAAO,CAAC,iBAAiB,CAAC,mBAAmB,EAAE,SAAS,CAAC,CAAC;IACrE,CAAC;IAED,MAAM,CAAC,iBAAiB,CAAC,MAAc,EAAE,QAAgB;QACrD,YAAY;QACZ,QAAQ,GAAG,QAAQ,CAAC,WAAW,EAAE,CAAC;QAElC,IAAI,CAAC,6CAAiC,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE;YAC7D,OAAO,CAAC,KAAK,CAAC,oCAAoC,QAAQ,OAAO,uBAAW,EAAE,CAAC,CAAC;YAChF,OAAO,CAAC,CAAC;SACZ;QAED,+CAA+C;QAC/C,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,6CAAiC,CAAC,QAAQ,CAAC,CAAC,CAAC;IAC5E,CAAC;IAED,MAAM,CAAC,cAAc,CAAC,QAAgB,EAAE,MAA0B;QAC9D,kEAAkE;QAClE,gEAAgE;QAChE,MAAM,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,QAAQ,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,CAAC;QACtF,IAAI,QAAQ,EAAE;YACV,OAAO,MAAM,CAAC,QAAQ,CAAC,CAAC;SAC3B;aAAM;YACH,MAAM,EAAC,OAAO,EAAC,GAAG,MAAM,CAAC;YACzB,OAAO,OAAO,CAAC,sBAAsB,CAAC,gBAAgB,EAAE,OAAO,CAAC,QAAQ,EAAE,cAAE,CAAC,MAAM,CAAC,aAAa,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;SACnI;IACL,CAAC;IAED,MAAM,CAAC,mBAAmB;QACtB,OAAO,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC;IACpC,CAAC;IAED,MAAM,CAAC,4BAA4B;;QAC/B,MAAM,MAAM,GAAG,OAAO,CAAC,mBAAmB,EAAE,CAAC;QAC7C,MAAM,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,CAAe,CAAC;QAE9D,uCAAuC;QACvC,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,KAAI,MAAA,IAAI,CAAC,IAAI,0CAAE,SAAS,CAAA,EAAE;YAC7C,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,SAAqB,CAAC,CAAC;SAChD;QAED,OAAO,MAAM,CAAC;IAClB,CAAC;IAED,MAAM,CAAC,sBAAsB,CAAC,KAAa,EAAE,QAAgB,EAAE,QAAgB;QAC3E,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QAClC,OAAO,EAAC,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAC,CAAA;IACtC,CAAC;IAED,MAAM,CAAC,2BAA2B,CAAC,aAAqB;QACpD,OAAO,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE;YAC5C,IAAI,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;gBACrB,OAAO,CAAC,IAAI,CAAC,qEAAqE,EAAE,aAAa,CAAC,CAAC;aACtG;YACD,OAAO,aAAa,CAAC,KAAK,CAAC,CAAC;QAChC,CAAC,CAAC,CAAC;IACP,CAAC;IAED,MAAM,CAAC,kBAAkB,CAAC,KAAe;QACrC,IAAI,CAAC,KAAK;YAAE,OAAO,EAAE,CAAC;QAEtB,MAAM,yBAAyB,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,uBAAW,EAAE,iBAAK,CAAC,0BAA0B,CAAC,CAAC;QACnG,MAAM,KAAK,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;QAE/B,IAAI,yBAAyB,IAAI,KAAK;YAAE,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;QAE/D,OAAO,KAAK,CAAC,IAAI,CAAC;IACtB,CAAC;IAED,MAAM,CAAC,gBAAgB,CAAC,KAAa,EAAE,IAAgB,EAAE,KAAa,CAAC,EAAE,UAAyB,EAAE;QAChG,MAAM,MAAM,GAAG,SAAS,CAAC,6BAAa,CAAC,MAAM,CAAC,CAAC;QAC/C,MAAM,CAAC,IAAI,GAAG,KAAK,CAAC;QACpB,MAAM,CAAC,KAAK,GAAG,KAAK,CAAC;QACrB,MAAM,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACxB,MAAM,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QACzB,MAAM,CAAC,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC;QACpB,MAAM,CAAC,EAAE,CAAC,KAAK,GAAG,EAAE,CAAC;QACrB,MAAM,CAAC,OAAO,CAAC,IAAI,GAAG,OAAO,CAAC;QAC9B,MAAM,CAAC,OAAO,CAAC,KAAK,GAAG,OAAO,CAAC;QAE/B,OAAO,MAAM,CAAC;IAClB,CAAC;IAED;;;;;;;;;;;OAWG;IACH,MAAM,CAAC,kBAAkB,CAAC,QAAoB,EAAE,IAAY,EAAE,iBAAyB;QACnF,MAAM,QAAQ,GAAG,SAAS,CAAC,QAAQ,CAAC,CAAC;QACrC,QAAQ,CAAC,GAAG,GAAG,qBAAS,CAAC,aAAa,CAAC,QAAQ,CAAC,GAAG,EAAE,iBAAiB,EAAE,IAAI,CAAC,CAAC;QAC9E,QAAQ,CAAC,KAAK,GAAG,OAAO,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAC,GAAG,EAAE,CAAC,EAAC,CAAC,CAAC;QAEvD,OAAO,EAAC,QAAQ,EAAE,QAAQ,EAAC,CAAC;IAChC,CAAC;IAED;;;;;;;OAOG;IACH,MAAM,CAAC,kBAAkB,CAAC,QAAoB,EAAE,IAAY,EAAE,iBAAyB;QACnF,IAAI,IAAI,GAAG,CAAC,EAAE;YACV,OAAO,CAAC,IAAI,CAAC,+FAA+F,CAAC,CAAC;SACjH;QACD,OAAO,OAAO,CAAC,kBAAkB,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,iBAAiB,CAAC,CAAC;IAC1E,CAAC;IAED,MAAM,CAAO,eAAe;;YACxB,MAAM,MAAM,GAAG,IAAI,mDAAwB,EAAE,CAAC;YAC9C,MAAM,MAAM,CAAC,MAAM,EAAE,CAAC;YACtB,OAAO,CAAC,MAAM,CAAC,QAAQ,IAAI,MAAM,CAAC,cAAc,KAAK,QAAQ,CAAC;QAClE,CAAC;KAAA;IAED;;;;;;OAMG;IACH,MAAM,CAAC,8BAA8B,CAAC,aAAqB,EAAE,UAAsB,EAAE,WAAmB,6BAAiB;QACrH,IAAI,CAAC,aAAa,IAAI,aAAa,CAAC,MAAM,KAAK,CAAC;YAAE,OAAO;QAEzD,MAAM,EAAE,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC;QAC9B,MAAM,eAAe,GAAG;YACpB,CAAC,aAAa,CAAC,EAAE,EAAC,CAAC,EAAE,CAAC,EAAE,UAAU,EAAC;SACtC,CAAC;QAEF,OAAO;YACH,EAAE;YACF,eAAe;SAClB,CAAA;IACL,CAAC;IAED;;;;;;;OAOG;IACH,MAAM,CAAC,kBAAkB,CAAC,IAAY,EAAE,GAAW;QAC/C,kEAAkE;QAClE,iGAAiG;QACjG,OAAO,EAAC,CAAC,IAAI,CAAC,EAAE,EAAC,CAAC,KAAK,GAAG,EAAE,CAAC,EAAE,IAAI,EAAC,EAAC,CAAC;IAC1C,CAAC;IAED;;;;;;;;;OASG;IACH,MAAM,CAAC,UAAU,CAAC,MAAc,EAAE,MAAa,IAAI;QAC/C,4EAA4E;QAC5E,MAAM,aAAa,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,EAAE;YACrE,MAAM,WAAW,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YACnE,MAAM,WAAW,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YACnE,iFAAiF;YACjF,IAAI,GAAG;gBACH,OAAO,WAAW,CAAC,aAAa,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;gBAE7D,OAAO,WAAW,CAAC,aAAa,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACrE,CAAC,CAAC,CAAC;QAEH,qDAAqD;QACrD,MAAM,cAAc,GAAG,EAAE,CAAC;QAC1B,KAAK,MAAM,CAAC,EAAE,EAAE,KAAK,CAAC,IAAI,aAAa,EAAE;YACrC,cAAc,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC;SAC9B;QAED,OAAO,cAAc,CAAC;IAC1B,CAAC;CACJ;AAzeD,0BAyeC;;;;;;;;;;;;;;AC/fD,qCAA+B;AAC/B,kDAA+C;AAC/C,yCAAoD;AACpD,2CAA0C;AAC1C,+CAA4C;AAC5C,yDAAsD;AACtD,4CAAyC;AACzC,sDAAmD;AACnD,6DAA0D;AAC1D,uCAAoC;AACpC,oEAAiE;AACjE,qCAA2C;AAC3C,+BAA+B;AAC/B,qCAA0D;AAE1D,gFAA6E;AAC7E,kDAA+C;AAC/C,6DAAqD;AACrD,sEAAiE;AACjE,4EAAuE;AAEvE,MAAa,YAAY;IACrB,MAAM,CAAC,aAAa;QAChB,8FAA8F;QAE9F,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC;QAEtC,KAAK,CAAC,EAAE,CAAC,YAAY,EAAE,YAAY,CAAC,UAAU,CAAC,CAAC;QAChD,KAAK,CAAC,EAAE,CAAC,OAAO,EAAE,YAAY,CAAC,KAAK,CAAC,CAAC;QACtC,KAAK,CAAC,EAAE,CAAC,mBAAmB,EAAE,YAAY,CAAC,iBAAiB,CAAC,CAAC;QAC9D,KAAK,CAAC,EAAE,CAAC,wBAAwB,EAAE,IAAI,CAAC,4BAA4B,CAAC,CAAC;QACtE,KAAK,CAAC,EAAE,CAAC,YAAY,EAAE,YAAY,CAAC,UAAU,CAAC,CAAC;QAChD,KAAK,CAAC,EAAE,CAAC,qBAAqB,EAAE,YAAY,CAAC,mBAAmB,CAAC,CAAC;QAClE,KAAK,CAAC,EAAE,CAAC,wBAAwB,EAAE,YAAY,CAAC,sBAAsB,CAAC,CAAC;QACxE,KAAK,CAAC,EAAE,CAAC,8BAA8B,EAAE,qBAAS,CAAC,8BAA8B,CAAC,CAAC;QACnF,KAAK,CAAC,EAAE,CAAC,qBAAqB,EAAE,YAAY,CAAC,mBAAmB,CAAC,CAAC;QAClE,KAAK,CAAC,EAAE,CAAC,gBAAgB,EAAE,iDAAuB,CAAC,iBAAiB,CAAC,CAAC;IAC1E,CAAC;IAED,MAAM,CAAC,IAAI;QACP,OAAO,CAAC,GAAG,CAAC;;;;;;;;;CASnB,CAAC,CAAC;QAEK,wDAAwD;QACxD,IAAI,CAAC,aAAa,CAAC,GAAG;YAClB,QAAQ,EAAR,mBAAQ;YACR,eAAe,EAAf,iCAAe;YACf,OAAO,EAAP,iBAAO;YACP,aAAa,EAAb,sBAAa;SAChB,CAAC;QAEF,MAAM,CAAC,GAAG,GAAG,YAAG,CAAC;QACjB,aAAa;QACb,MAAM,CAAC,KAAK,CAAC,WAAW,GAAG,mBAAQ,CAAC;QACpC,aAAa;QACb,MAAM,CAAC,IAAI,CAAC,WAAW,GAAG,iBAAO,CAAC;QAClC,MAAM,CAAC,MAAM,CAAC,WAAW,GAAG,qBAAS,CAAC;QAEtC,iCAAsB,EAAE,CAAC;QAEzB,qCAAqC;QACrC,+GAA+G;QAC/G,MAAM,CAAC,eAAe,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;QAC3C,MAAM,CAAC,aAAa,CAAC,uBAAW,EAAE,6BAAa,EAAE;YAC7C,KAAK,EAAE,gBAAgB;YACvB,WAAW,EAAE,IAAI;SACpB,CAAC,CAAC;QACH,KAAK,CAAC,eAAe,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;QACzC,KAAK,CAAC,aAAa,CAAC,uBAAW,EAAE,2BAAY,EAAE;YAC3C,KAAK,EAAE,eAAe;YACtB,WAAW,EAAE,IAAI;SACpB,CAAC,CAAC;QAEH,CAAC,qBAAqB,EAAE,oBAAoB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE;YACxD,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE,CAAC,iBAAO,CAAC,mBAAmB,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC;QACvE,CAAC,CAAC,CAAC;QAEH,mCAAgB,CAAC,aAAa,EAAE,CAAC;IACrC,CAAC;IAED,MAAM,CAAO,KAAK;;YACd,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;gBAChB,MAAM,mBAAQ,CAAC,cAAc,EAAE,CAAC;gBAEhC,IAAI,2CAAoB,CAAC,eAAe,EAAE;oBACtC,MAAM,IAAI,2CAAoB,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;iBACjD;aAEJ;YAED,qCAAqC;YACrC,MAAM,gBAAgB,GAAG,+CAA+C,CAAC;YACzE,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,gBAAgB,EAAE,GAAG,EAAE,CAAC,iCAAe,CAAC,UAAU,EAAE,CAAC,CAAC;YAC9E,MAAM,mBAAmB,GAAG,gDAAgD,CAAC;YAC7E,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,mBAAmB,EAAE,GAAG,EAAE,CAAC,iCAAe,CAAC,UAAU,EAAE,CAAC,CAAC;YAEjF,yCAAyC;YACzC,kCAAkC;YAClC,0DAA0D;YAC1D,EAAE;YACF,6CAA6C;YAC7C,iCAAiC;YACjC,yDAAyD;QAC7D,CAAC;KAAA;IAED,MAAM,CAAC,UAAU;QACb,MAAM,CAAC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,uBAAW,EAAE,kBAAkB,CAAC,CAAC;QAC9E,YAAY;QACZ,0BAA0B;QAC1B,UAAU,CAAC,SAAS,CAAC,gBAAgB,GAAG,wBAAe,CAAC;IAC5D,CAAC;IAED,MAAM,CAAC,UAAU,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI;QAC7B,IAAI,IAAI,CAAC,IAAI,KAAK,MAAM;YAAE,OAAO;QAEjC,wBAAe,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QACjC,OAAO,KAAK,CAAC;IACjB,CAAC;IAED,MAAM,CAAC,mBAAmB,CAAC,QAAQ,EAAE,IAAI;QACrC,IAAI,CAAC,IAAI,CAAC,uCAAuC,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,KAAK,EAAE,EAAE;YACrE,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,IAAI,6CAAqB,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAC7C,CAAC,CAAC,CAAC;IACP,CAAC;IAED,MAAM,CAAC,sBAAsB,CAAC,QAAQ;QAClC,MAAM,aAAa,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,KAAK,OAAO,CAAC,CAAC;QAE/D,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;YAChB,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC;gBACrB,IAAI,EAAE,yBAAyB;gBAC/B,KAAK,EAAE,oCAAoC;gBAC3C,IAAI,EAAE,sBAAsB;gBAC5B,MAAM,EAAE,IAAI;aACf,CAAC,CAAC;SACN;QAED,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,iDAAuB,CAAC,UAAU,EAAE,CAAC,CAAC;IACnE,CAAC;IAED,MAAM,CAAC,iBAAiB,CAAC,GAAG,EAAE,IAAI;QAC9B,IAAI,CAAC,gBAAgB,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;IACrC,CAAC;IAED,MAAM,CAAC,mBAAmB,CAAC,GAAgB,EAAE,IAAY;QACrD,MAAM,MAAM,GAAG,CAAC,CAAC,sCAAsC,CAAC,CAAC;QACzD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACnC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,KAAK,EAAE,EAAE;YACzB,IAAI,oBAAM,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAC9B,CAAC,CAAC,CAAC;IACP,CAAC;CACJ;AA3ID,oCA2IC;;;;;;;;;;;;;;AChKD,+DAA4D;AAC5D,6DAA0D;AAC1D,2DAAwD;AACxD,2DAAwD;AACxD,yDAAsD;AACtD,6DAA0D;AAC1D,iEAA8D;AAC9D,yEAAsE;AACtE,2DAAwD;AACxD,2EAAwE;AACxE,yDAAkE;AAClE,+DAA0D;AAC1D,qEAAgE;AAGhE,MAAa,MAAO,SAAQ,WAAW;IAQnC;QACI,KAAK,EAAE,CAAC;QARJ,uBAAkB,GAAa,EAAE,CAAC;QAClC,cAAS,GAAW,EAAE,CAAC;QAEvB,gBAAW,GAAa,EAAE,CAAC;QAC3B,wBAAmB,GAAY,IAAI,CAAC;QA+F5C,eAAU,GAAG,CAAC,IAAU,EAAW,EAAE;YACjC,OAAO,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,SAAS,EAAE,EAAE,CAAC,SAAS,KAAK,IAAI,CAAC,IAAI,CAAC,CAAC;QAChF,CAAC,CAAC;QAEF,mBAAc,GAAG,CAAC,IAAU,EAAW,EAAE;YACrC,MAAM,OAAO,GAAG,mCAAmC,CAAC;YACpD,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,IAAI,CAAC;QAC7C,CAAC,CAAC;QAhGE,IAAI,CAAC,8BAA8B,EAAE,CAAC;IAC1C,CAAC;IAED,MAAM,KAAK,cAAc;QACrB,MAAM,OAAO,GAAG,KAAK,CAAC,cAAc,CAAC;QACrC,OAAO,CAAC,EAAE,GAAG,qBAAqB,CAAC;QACnC,OAAO,CAAC,OAAO,GAAG,CAAC,KAAK,EAAE,YAAY,EAAE,YAAY,CAAC,CAAC;QACtD,OAAO,CAAC,KAAK,GAAG,qBAAqB,CAAC;QACtC,OAAO,CAAC,QAAQ,GAAG,gEAAgE,CAAC;QACpF,OAAO,CAAC,KAAK,GAAG,GAAG,CAAC;QACpB,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC;QACxB,OAAO,OAAO,CAAC;IACnB,CAAC;IAED,OAAO,CAAC,OAAa;QACjB,MAAM,IAAI,GAAG,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QAEpC,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC,iBAAyB,EAAE,EAAE;YAC1D,MAAM,OAAO,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC,iBAAiB,KAAK,QAAQ,CAAC,IAAI,CAAC,CAAC;YACxF,MAAM,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,EAAE,CAAC,iBAAiB,KAAK,cAAc,CAAC,CAAC;YAC/F,MAAM,OAAO,GAAG,iBAAiB,KAAK,IAAI,CAAC,iBAAiB,CAAC;YAE7D,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC,GAAG;gBAChC,IAAI,EAAE,iBAAiB;gBACvB,OAAO;gBACP,MAAM;gBACN,OAAO;aACV,CAAC;QACN,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;QACpE,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,KAAK,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;QACzF,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,mBAAmB,CAAC;QAEpD,yBAAY,IAAI,EAAG;IACvB,CAAC;IAEO,8BAA8B;QAClC,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;QAC7B,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;YAChC,IAAI,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,EAAE;gBAC/E,OAAO;aACV;YACD,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QAC7E,CAAC,CAAC,CAAC;IACP,CAAC;IAEO,kBAAkB;QACtB,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;IAC1B,CAAC;IAiBK,QAAQ,CAAC,SAAS,EAAE,QAAQ;;YAC9B,IAAI,UAAU,GAAG,MAAM,2BAAY,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;YACxD,2BAAY,CAAC,OAAO,CAAC,yBAAU,CAAC,GAAG,CAAC,CAAC;YAErC,KAAK,MAAM,EAAE,IAAI,MAAM,CAAC,SAAS,EAAE;gBAC/B,IAAI,EAAE,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAE;oBACzB,EAAE,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC;oBAChC,MAAM,EAAE,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;iBAC9B;aACJ;QACL,CAAC;KAAA;IAEK,YAAY,CAAC,SAAS;;YACxB,IAAI,CAAC,SAAS,EAAE;gBACZ,OAAO;aACV;YACD,IAAI,UAAU,GAAG,MAAM,2BAAY,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;YAExD,IAAI,2BAAY,CAAC,YAAY,CAAC,UAAU,CAAC,EAAE;gBACvC,2BAAY,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC;aAC7C;QACL,CAAC;KAAA;IAWD,iBAAiB,CAAC,IAAI;QAClB,IAAI,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,CAAO,KAAK,EAAE,EAAE;YAC3D,KAAK,CAAC,cAAc,EAAE,CAAC;YAEvB,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC1B,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;YAEhC,MAAM,IAAI,CAAC,MAAM,EAAE,CAAC;YAEpB,IAAI,IAAI,CAAC,YAAY,EAAE;gBACnB,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;gBAC5C,MAAM,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;aACjC;YAED,sDAAsD;YACtD,4DAA4D;YAC5D,8DAA8D;YAC9D,KAAK,MAAM,aAAa,IAAI,IAAI,CAAC,kBAAkB,EAAE;gBACjD,4BAA4B;gBAC5B,MAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC,QAAQ,CAAC,IAAI,KAAK,aAAa,CAAC,CAAC;gBACpF,IAAI,QAAQ,EAAE;oBACV,MAAM,IAAI,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE,CAAC;oBAElC,+CAA+C;oBAChD,IAAI,CAAC,iBAAiB,GAAG,QAAQ,CAAC,IAAI,CAAC;oBACvC,MAAM,IAAI,CAAC,MAAM,EAAE,CAAC;oBAGpB,MAAM,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC;oBAEzC,4CAA4C;oBAC5C,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,EAAE,CAAC,cAAc,KAAK,QAAQ,CAAC,IAAI,CAAC,EAAE;wBAC9E,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;qBACxC;oBAED,MAAM,IAAI,CAAC,MAAM,EAAE,CAAC;iBACvB;aACJ;YAED,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;YAEjC,MAAM,IAAI,CAAC,MAAM,EAAE,CAAC;QACxB,CAAC,CAAA,CAAC,CAAC;QAEH,IAAI,CAAC,IAAI,CAAC,qCAAqC,CAAC,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAO,KAAK,EAAE,EAAE;YAC1E,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC,IAAU,EAAE,EAAE;gBAClD,IAAI,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;oBAC3B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;oBACzB,IAAI,CAAC,MAAM,EAAE,CAAC;iBACjB;YACL,CAAC,CAAC,CAAC;YACH,OAAO,IAAI,CAAC;QAChB,CAAC,CAAA,CAAC,CAAC;QAEH,IAAI,CAAC,IAAI,CAAC,iCAAiC,CAAC,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAO,KAAK,EAAE,EAAE;YACtE,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC,IAAU,EAAE,EAAE;gBAClD,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;oBACvB,0EAA0E;oBAC1E,MAAM,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC,QAAQ,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC,CAAC;oBACxF,IAAI,WAAW,KAAK,CAAC,CAAC,EAAE;wBACpB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBAC7B;yBAAM;wBACH,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC;qBACtC;iBACJ;YACL,CAAC,CAAC,CAAC;YAEH,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC3B,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;aACpC;YAED,IAAI,CAAC,MAAM,EAAE,CAAC;QAClB,CAAC,CAAA,CAAC,CAAC;IACP,CAAC;;AAtLL,wBAuLC;AAzHG,gEAAgE;AACzD,gBAAS,GAAmB;IAC/B,IAAI,yBAAW,EAAE;IACjB,IAAI,+BAAc,EAAE;IACpB,IAAI,6BAAa,EAAE;IACnB,IAAI,2BAAY,EAAE;IAClB,IAAI,6BAAa,EAAE;IACnB,IAAI,yCAAmB,EAAE;IACzB,IAAI,iCAAe,EAAE;IACrB,IAAI,2BAAY,EAAE;IAClB,IAAI,2CAAoB,EAAE;IAC1B,IAAI,+BAAc,EAAE;IACpB,IAAI,qCAAiB,EAAE;CAC1B,CAAC;;;;;;;;;;;;;;AC1FN,qDAAkD;AAClD,+CAA4C;AAC5C,iDAA8C;AAG9C,IAAY,UAGX;AAHD,WAAY,UAAU;IAClB,yCAAO,CAAA;IACP,2CAAQ,CAAA;AACZ,CAAC,EAHW,UAAU,GAAV,kBAAU,KAAV,kBAAU,QAGrB;AACD,IAAY,UAGX;AAHD,WAAY,UAAU;IAClB,qDAAa,CAAA;IACb,6CAAS,CAAA;AACb,CAAC,EAHW,UAAU,GAAV,kBAAU,KAAV,kBAAU,QAGrB;AAED;;;;GAIG;AACH,MAAa,YAAY;IAgBrB,gBAAuB,CAAC;IAXjB,MAAM,CAAC,OAAO,CAAC,IAAgB;QAClC,QAAQ,IAAI,EAAE;YACV,KAAK,UAAU,CAAC,GAAG;gBACf,YAAY,CAAC,UAAU,GAAG,IAAI,yBAAW,EAAE,CAAC;gBAC5C,MAAM;YACV,KAAK,UAAU,CAAC,IAAI;gBAChB,YAAY,CAAC,UAAU,GAAG,IAAI,2BAAY,EAAE,CAAC;gBAC7C,MAAM;SACb;IACL,CAAC;IAID;;;;;OAKG;IACI,MAAM,CAAO,SAAS,CAAC,IAAY,EAAE,SAAwB,IAAI;;YACpE,OAAO,MAAM,MAAM,CAAC,MAAM,CAAC;gBACvB,IAAI,EAAE,MAAM;gBACZ,MAAM,EAAE,MAAM,KAAK,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE;gBAC1C,IAAI,EAAE,IAAI;aACb,CAAC,CAAC;QACP,CAAC;KAAA;IAED;;;;;OAKG;IACI,MAAM,CAAO,eAAe,CAAC,IAAY,EAAE,SAAkB,KAAK;;YACrE,IAAI,GAAG,GAAG,CAAC,CAAC;YACZ,IAAI,IAAI,EACJ,IAAI,GAAG,IAAI,CAAC;YAChB,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAC3B,OAAO,GAAG,GAAG,IAAI,CAAC,MAAM,EAAE;gBACtB,iGAAiG;gBACjG,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,MAAM,KAAK,IAAI,IAAI,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;gBAC1F,IAAI,IAAI,KAAK,IAAI,EAAE;oBACf,IAAI,CAAC,MAAM,EAAE;wBACT,OAAO,OAAO,CAAC,MAAM,CAAC,0BAA0B,IAAI,EAAE,CAAC,CAAC;qBAC3D;oBAED,IAAI,GAAG,MAAM,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC;iBACxD;gBACD,IAAI,GAAG,IAAI,CAAC;gBACZ,GAAG,EAAE,CAAC;aACT;YACD,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACjC,CAAC;KAAA;IAED;;;;;;OAMG;IACI,MAAM,CAAC,QAAQ,CAAC,QAAgB,EAAE,GAAW,EAAE,WAA+B,SAAS;QAC1F,OAAO,YAAY,CAAC,UAAU,CAAC,QAAQ,CAAC,QAAQ,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAC;IACrE,CAAC;IAED;;;;;OAKG;IACI,MAAM,CAAC,WAAW,CAAC,QAAgB,EAAE,GAAoB,EAAE,WAA+B,SAAS;QACtG,OAAO,YAAY,CAAC,UAAU,CAAC,WAAW,CAAC,QAAQ,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAC;IACxE,CAAC;IAED;;;;;OAKG;IACI,MAAM,CAAC,WAAW,CAAC,QAAgB,EAAE,GAAoB,EAAE,WAAsC,SAAS;QAC7G,OAAO,YAAY,CAAC,UAAU,CAAC,WAAW,CAAC,QAAQ,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAC;IACxE,CAAC;IAED,MAAM;IACC,MAAM,CAAC,QAAQ,CAAC,SAAgC;QACnD,IAAI,MAAkB,CAAC;QACvB,IAAI,OAAO,SAAS,KAAK,QAAQ,EAAE;YAC/B,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,IAAI,IAAI,SAAS,CAAC,CAAC;SAC9D;aAAM;YACH,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACvC;QACD,OAAO,MAAM,CAAC;IAClB,CAAC;IAEM,MAAM,CAAC,iBAAiB,CAAC,IAAI,EAAE,wBAAyB;QAC3D,IAAI,wBAAwB,IAAI,wBAAwB,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;YAC3E,OAAO,wBAAwB,CAAC,IAAI,CAAC,CAAC;SACzC;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;IACD,MAAM;IACC,MAAM,CAAO,mBAAmB,CACnC,QAAgB,EAChB,IAAY,EACZ,wBAA6C;;YAE7C,IAAI,OAAO,GAAG,EAAE,CAAC;YACjB,IAAI,cAAc,GAAG,QAAQ,CAAC,YAAY,CAAC,CAAC,UAAU,CAAC,CAAC;YAExD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,cAAc,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAC5C,IAAI,YAAY,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;gBAC5D,+FAA+F;gBAC/F,IAAI,gBAAgB,GAAG,YAAY,CAAC;gBACpC,YAAY,GAAG,YAAY,CAAC,iBAAiB,CAAC,YAAY,EAAE,wBAAwB,CAAC,CAAC;gBACtF,OAAO,CAAC,gBAAgB,CAAC,WAAW,EAAE,CAAC,GAAG,MAAM,YAAY,CAAC,eAAe,CAAC,GAAG,qBAAS,CAAC,uBAAuB,IAAI,IAAI,IAAI,YAAY,EAAE,EAAE,IAAI,CAAC,CAAC;aACtJ;YAED,OAAO,OAAO,CAAC;QACnB,CAAC;KAAA;IAED;;;;OAIG;IACI,MAAM,CAAC,0BAA0B,CAAC,QAAQ,EAAE,YAAY;QAC3D,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACtC,MAAM,WAAW,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;YAChC,IAAI,WAAW,CAAC,CAAC,CAAC,IAAI,KAAK,YAAY,EAAE;gBACrC,OAAO,WAAW,CAAC;aACtB;SACJ;QACD,OAAO,EAAE,CAAC;IACd,CAAC;IAED;;;;;OAKG;IACI,MAAM,CAAC,4BAA4B,CAAC,eAAe;QACtD,MAAM,oBAAoB,GAAG,EAAE,CAAC;QAChC,IAAI,eAAe,IAAI,eAAe,CAAC,cAAc,CAAC,YAAY,CAAC,EAAE;YACjE,eAAe,CAAC,UAAU,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE,EAAE;gBACrD,MAAM,IAAI,GAAG,QAAQ,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;gBAC7C,MAAM,SAAS,GAAG,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC;gBACvC,oBAAoB,CAAC,IAAI,CAAC,GAAG,SAAS,CAAC;YAC3C,CAAC,CAAC,CAAC;SACN;QACD,OAAO,oBAAoB,CAAC;IAChC,CAAC;IAED;;;;;OAKG;IACI,MAAM,CAAC,sBAAsB,CAAC,aAAa,EAAE,OAAO,EAAE,OAAO;QAChE,MAAM,eAAe,GAAG,EAAE,CAAC;QAC3B,IAAI,aAAa,IAAI,aAAa,CAAC,OAAO,CAAC,IAAI,aAAa,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,IAAI,aAAa,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE;YAC1H,aAAa,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,EAAE;gBAC7C,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;gBAC9C,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;gBACxD,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;gBACpD,eAAe,CAAC,IAAI,CAAC,GAAG,EAAE,SAAS,EAAE,OAAO,EAAE,CAAC;YACnD,CAAC,CAAC,CAAC;SACN;QAED,OAAO,eAAe,CAAC;IAC3B,CAAC;IAED,MAAM,CAAC,uBAAuB,CAAC,cAAc,EAAE,IAAI,EAAE,GAAG,EAAE,aAAa,GAAG,EAAE;QACxE,IAAI,cAAc,IAAI,cAAc,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,cAAc,CAAC,IAAI,CAAC,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE;YACnG,OAAO,cAAc,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;SACpC;QAED,OAAO,aAAa,CAAC;IACzB,CAAC;IAEM,MAAM,CAAC,oBAAoB,CAAC,cAAc,EAAE,IAAI;QACnD,OAAO,YAAY,CAAC,uBAAuB,CAAC,cAAc,EAAE,IAAI,EAAE,WAAW,EAAE,IAAI,CAAC,CAAC;IACzF,CAAC;IAEM,MAAM,CAAC,mBAAmB,CAAC,cAAc,EAAE,IAAI,EAAE,QAAQ,GAAC,GAAG;QAChE,OAAO,YAAY,CAAC,uBAAuB,CAAC,cAAc,EAAE,IAAI,EAAE,SAAS,EAAE,QAAQ,CAAC,CAAC;IAC3F,CAAC;;AAnML,oCAoMC;AAnM0B,qBAAQ,GAAG,OAAO,CAAC;AAE3B,uBAAU,GAAmB,IAAI,yBAAW,EAAE,CAAC;;;;;ACtBlE,MAAsB,cAAc;CAInC;AAJD,wCAIC;;;;;ACJD,qDAAkD;AAElD,MAAa,YAAa,SAAQ,+BAAc;IACrC,QAAQ,CAAC,QAAgB,EAAE,GAAW,EAAE,WAA+B,SAAS;QACnF,MAAM,IAAI,KAAK,CAAC,eAAe,CAAC,CAAC;IACrC,CAAC;IAEM,WAAW,CAAC,QAAgB,EAAE,GAAoB,EAAE,WAA+B,SAAS;QAC/F,MAAM,IAAI,KAAK,CAAC,eAAe,CAAC,CAAC;IACrC,CAAC;IAEM,WAAW,CAAC,QAAgB,EAAE,GAAoB,EAAE,WAAsC,SAAS;QACtG,MAAM,IAAI,KAAK,CAAC,eAAe,CAAC,CAAC;IACrC,CAAC;CACJ;AAZD,oCAYC;;;;;ACdD,iDAA8C;AAC9C,qDAAkD;AAElD,MAAa,WAAY,SAAQ,+BAAc;IACpC,QAAQ,CAAC,QAAgB,EAAE,GAAW,EAAE,WAA+B,SAAS;QACnF,IAAI;YACA,OAAO,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,2BAAY,CAAC,QAAQ,CAAC,CAAC,CAAC;SACzD;QAAC,OAAO,CAAC,EAAE;YACR,IAAI,QAAQ,KAAK,SAAS,EAAE;gBACxB,OAAO,QAAQ,CAAC;aACnB;iBAAM;gBACH,MAAM,CAAC,CAAC;aACX;SACJ;IACL,CAAC;IAEM,WAAW,CAAC,QAAgB,EAAE,GAAoB,EAAE,WAA+B,SAAS;QAC/F,IAAI;YACA,OAAO,QAAQ,CAAC,GAAG,CAAC,CAAC,2BAAY,CAAC,QAAQ,CAAC,CAAC;SAC/C;QAAC,OAAO,CAAC,EAAE;YACR,IAAI,QAAQ,KAAK,SAAS,EAAE;gBACxB,OAAO,QAAQ,CAAC;aACnB;iBAAM;gBACH,MAAM,CAAC,CAAC;aACX;SACJ;IACL,CAAC;IAEM,WAAW,CAAC,QAAgB,EAAE,GAAoB,EAAE,WAAsC,SAAS;QACtG,IAAI;YACA,OAAO,QAAQ,CAAC,GAAG,CAAC,CAAC;SACxB;QAAC,OAAO,CAAC,EAAE;YACR,IAAI,QAAQ,KAAK,SAAS,EAAE;gBACxB,OAAO,QAAQ,CAAC;aACnB;iBAAM;gBACH,MAAM,CAAC,CAAC;aACX;SACJ;IACL,CAAC;CACJ;AApCD,kCAoCC;;;;;;;;;;;;;;ACvCD,iDAA8C;AAC9C,yDAAsD;AACtD,2CAAwC;AAIxC,MAAa,YAAa,SAAQ,2BAAY;IAA9C;;QACW,UAAK,GAAG,CAAC,UAAU,CAAC,CAAC;IAmJhC,CAAC;IAjJG,QAAQ,CAAC,UAAkB;QACvB,OAAO,UAAU,CAAC,cAAc,CAAC,OAAO,CAAC,IAAI,UAAU,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;IAC5F,CAAC;IAED,cAAc;QACV,OAAO;YACH,IAAI,EAAE,EAAE;YACR,GAAG,EAAE,EAAE;YACP,MAAM,EAAE,EAAE;YACV,GAAG,EAAE,2BAA2B;YAChC,KAAK,EAAE,EAAE;YACT,IAAI,EAAE,MAAM;YACZ,IAAI,EAAE;gBACF,WAAW,EAAE;oBACT,KAAK,EAAE,EAAE;oBACT,IAAI,EAAE,EAAE;oBACR,MAAM,EAAE,EAAE;iBACb;gBACD,UAAU,EAAE;oBACR,MAAM,EAAE,CAAC;oBACT,YAAY,EAAE,EAAE;oBAChB,QAAQ,EAAE,CAAC;oBACX,IAAI,EAAE,CAAC;oBACP,QAAQ,EAAE,IAAI;oBACd,OAAO,EAAE;wBACL,IAAI,EAAE,CAAC;wBACP,KAAK,EAAE,CAAC;wBACR,GAAG,EAAE,EAAE;qBACV;oBACD,iBAAiB,EAAE;wBACf,KAAK,EAAE,EAAE;wBACT,KAAK,EAAE,CAAC;wBACR,GAAG,EAAE,CAAC;qBACT;oBACD,QAAQ,EAAE,IAAI;iBACjB;gBAED,OAAO,EAAE,EAAE;gBACX,EAAE,EAAE,CAAC;gBACL,MAAM,EAAE,CAAC;gBACT,UAAU,EAAE,UAAU;gBACtB,KAAK,EAAE;oBACH,MAAM,EAAE,CAAC;oBACT,OAAO,EAAE,CAAC;iBACb;aACJ;YACD,UAAU,EAAE;gBACR,OAAO,EAAE,CAAC;aACb;SACJ,CAAC;IACN,CAAC;IAED,kBAAkB;QACd,IAAI,CAAC,2BAAY,CAAC,QAAQ,EAAE;YACxB,OAAO;SACV;QAED,IAAI,YAAY,GAAG,2BAAY,CAAC,0BAA0B,CAAC,2BAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QACjG,IAAI,CAAC,oBAAoB,GAAG,2BAAY,CAAC,4BAA4B,CAAC,YAAY,CAAC,CAAC;QACpF,IAAI,CAAC,iBAAiB,GAAG,2BAAY,CAAC,sBAAsB,CAAC,YAAY,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;IAChG,CAAC;IAEK,KAAK,CAAC,UAAkB;;YAC1B,IAAI,SAAS,GAAW,EAAE,CAAC;YAC3B,IAAI,SAAS,GAAG,UAAU,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,CAAC;YAC5C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACvC,IAAI,QAAQ,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;gBAC5B,IAAI,2BAAY,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAE;oBACzC,SAAS;iBACZ;gBAED,IAAI,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,UAAU,EAAE,EAAE,CAAC,KAAK,YAAY,EAAE;oBACrE,SAAS;iBACZ;gBAED,IAAI,IAAI,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;gBACjC,IAAI,CAAC,IAAI,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;gBACvD,IAAI,CAAC,IAAI,GAAG,2BAAY,CAAC,oBAAoB,CAAC,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;gBAEjF,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,QAAQ,CAAC,IAAI,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,EAAE,CAAC;gBAC/H,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;gBAChC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,YAAY,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;gBAChF,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,2BAAY,CAAC,QAAQ,CAAC,QAAQ,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC;gBAEvE,IAAI,SAAS,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,aAAa,EAAE,IAAI,CAAC,CAAC;gBACxE,IAAI,SAAS,KAAK,SAAS,IAAI,SAAS,KAAK,IAAI,EAAE;oBAC/C,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,2BAAY,CAAC,QAAQ,CAAC,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;oBACzD,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,2BAAY,CAAC,QAAQ,CAAC,SAAS,EAAE,QAAQ,EAAE,CAAC,CAAC,CAAC;oBAEjE,IAAI,UAAU,GAAG,2BAAY,CAAC,WAAW,CAAC,SAAS,EAAE,YAAY,EAAE,EAAE,CAAC,CAAC;oBACvE,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;wBACvB,IAAI,UAAU,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;4BAC1B,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;yBACrC;6BAAM,IAAI,UAAU,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;4BACjC,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;yBACjC;6BAAM,IAAI,UAAU,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;4BACjC,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC;yBACnC;qBACJ;iBACJ;gBAED,IAAI,oBAAoB,GAAG,KAAK,CAAC;gBACjC,IAAI,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;gBACxC,CAAC,SAAS,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE;oBACjD,oBAAoB,GAAG,oBAAoB,IAAI,SAAS,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;gBAC/E,CAAC,CAAC,CAAC;gBACH,+FAA+F;gBAC/F,IAAI,oBAAoB,EAAE;oBACtB,IAAI,WAAW,GAAG,2BAAY,CAAC,QAAQ,CAAC,CAAC,IAAI,EAAE,EAAE;wBAC7C,gFAAgF;wBAChF,OAAO,IAAI,CAAC,IAAI,KAAK,QAAQ,IAAI,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,SAAS,CAAC;oBAC3E,CAAC,CAAC,CAAC;oBAEH,IAAI,WAAW,KAAK,IAAI,IAAI,QAAQ,IAAI,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE;wBAC3D,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;wBAEzB,MAAM,UAAU,GAAG,WAAW,CAAC,IAAI,CAAC,IAAkB,CAAC;wBACvD,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC;wBAClD,IAAI,CAAC,IAAI,CAAC,EAAE,GAAE,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC;qBACnD;iBACJ;gBAED,4DAA4D;gBAC5D,kFAAkF;gBAClF,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,GAAG,CAAC,CAAC;gBAEtC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACxB;YAED,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACvC,IAAI,UAAU,GAAG,MAAM,CAAC;gBACxB,IAAI,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;gBAExB,IAAI,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBACrC,IAAI,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;oBACtB,UAAU,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;iBACpC;gBAED,IAAI,MAAM,GAAG,MAAM,2BAAY,CAAC,eAAe,CAAC,GAAG,qBAAS,CAAC,uBAAuB,SAAS,UAAU,EAAE,EAAE,IAAI,CAAC,CAAC;gBAEjH,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,EAAE,CAAC;aAC3B;YAED,OAAO,MAAM,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;QACxC,CAAC;KAAA;CACJ;AApJD,oCAoJC;;;;;;;;;;;;;;AC1JD,iDAA8C;AAC9C,yDAAsD;AAEtD,qEAAkE;AAElE,MAAa,aAAc,SAAQ,2BAAY;IAA/C;;QAGW,UAAK,GAAG,CAAC,WAAW,CAAC,CAAC;IAuFjC,CAAC;IArFG,QAAQ,CAAC,UAAkB;QACvB,OAAO,UAAU,CAAC,cAAc,CAAC,QAAQ,CAAC,IAAI,UAAU,CAAC,QAAQ,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;IAC/F,CAAC;IAED,cAAc;QACV,OAAO;YACH,IAAI,EAAE,eAAe;YACrB,GAAG,EAAE,EAAE;YACP,MAAM,EAAE,EAAE;YACV,GAAG,EAAE,2BAA2B;YAChC,KAAK,EAAE,EAAE;YACT,IAAI,EAAE,OAAO;YACb,IAAI,EAAE;gBACF,WAAW,EAAE;oBACT,KAAK,EAAE,EAAE;oBACT,IAAI,EAAE,EAAE;oBACR,MAAM,EAAE,EAAE;iBACb;gBACD,UAAU,EAAE;oBACR,MAAM,EAAE,CAAC;oBACT,YAAY,EAAE,EAAE;oBAChB,QAAQ,EAAE,CAAC;oBACX,IAAI,EAAE,CAAC;oBACP,QAAQ,EAAE,IAAI;oBACd,OAAO,EAAE;wBACL,IAAI,EAAE,CAAC;wBACP,KAAK,EAAE,CAAC;wBACR,GAAG,EAAE,EAAE;qBACV;oBACD,iBAAiB,EAAE;wBACf,KAAK,EAAE,EAAE;wBACT,KAAK,EAAE,CAAC;wBACR,GAAG,EAAE,CAAC;qBACT;oBACD,QAAQ,EAAE,IAAI;iBACjB;gBACD,KAAK,EAAE;oBACH,KAAK,EAAE,CAAC;oBACR,GAAG,EAAE,KAAK;oBACV,IAAI,EAAE,CAAC;oBACP,IAAI,EAAE,CAAC;oBACP,IAAI,EAAE,CAAC;oBACP,WAAW,EAAE,CAAC;oBACd,SAAS,EAAE,CAAC;iBACf;aACJ;YACD,UAAU,EAAE;gBACR,OAAO,EAAE,CAAC;aACb;SACJ,CAAC;IACN,CAAC;IAED,kBAAkB;QACd,IAAI,CAAC,2BAAY,CAAC,QAAQ,EAAE;YACxB,OAAO;SACV;QAED,IAAI,aAAa,GAAG,2BAAY,CAAC,0BAA0B,CAAC,2BAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QAClG,IAAI,CAAC,oBAAoB,GAAG,2BAAY,CAAC,4BAA4B,CAAC,aAAa,CAAC,CAAC;QACrF,IAAI,CAAC,iBAAiB,GAAG,2BAAY,CAAC,sBAAsB,CAAC,aAAa,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;IACnG,CAAC;IAEK,KAAK,CAAC,UAAkB;;YAC1B,MAAM,OAAO,GAAG,MAAM,2BAAY,CAAC,mBAAmB,CAAC,UAAU,EAAE,OAAO,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;YAEvG,MAAM,MAAM,GAAG,IAAI,iCAAe,EAAE,CAAC;YAErC,IAAI,KAAK,GAAY,EAAE,CAAC;YACxB,IAAI,SAAS,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;YAC9C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACvC,IAAI,QAAQ,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;gBAC5B,IAAI,2BAAY,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAE;oBACzC,SAAS;iBACZ;gBAED,IAAI,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC;gBACzD,MAAM,QAAQ,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC,WAAW,EAAE,CAAC;gBAC9E,IAAI,CAAC,IAAI,GAAG,2BAAY,CAAC,oBAAoB,CAAC,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;gBACjF,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC;gBAEnC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACpB;YAED,OAAO,MAAM,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACpC,CAAC;KAAA;CACJ;AA1FD,sCA0FC;;;;;;;;;;;;;;AC/FD,iDAA8C;AAC9C,yDAAsD;AACtD,2CAAwC;AACxC,wFAAqF;AAErF,uDAAkD;AAElD,MAAa,mBAAoB,SAAQ,2BAAY;IAArD;;QAGW,UAAK,GAAG,CAAC,kBAAkB,CAAC,CAAC;IA2FxC,CAAC;IAzFG,QAAQ,CAAC,UAAkB;QACvB,OAAO,UAAU,CAAC,cAAc,CAAC,cAAc,CAAC,IAAI,UAAU,CAAC,cAAc,CAAC,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;IACjH,CAAC;IAED,cAAc;QACV,OAAO;YACH,IAAI,EAAE,cAAc;YACpB,GAAG,EAAE,EAAE;YACP,MAAM,EAAE,EAAE;YACV,GAAG,EAAE,2BAA2B;YAChC,KAAK,EAAE,EAAE;YACT,IAAI,EAAE,cAAc;YACpB,IAAI,EAAE;gBACF,WAAW,EAAE;oBACT,KAAK,EAAE,EAAE;oBACT,IAAI,EAAE,EAAE;oBACR,MAAM,EAAE,EAAE;iBACb;gBACD,MAAM,EAAE;oBACJ,IAAI,EAAE,SAAS;oBACf,QAAQ,EAAE,EAAE;oBACZ,SAAS,EAAE,WAAW;oBACtB,UAAU,EAAE,EAAE;oBACd,KAAK,EAAE,WAAW;oBAClB,IAAI,EAAE,KAAK;oBACX,GAAG,EAAE,CAAC;oBACN,eAAe,EAAE,EAAE;oBACnB,MAAM,EAAE,6BAAa,CAAC,UAAU,EAAE;oBAClC,KAAK,EAAE;wBACH,KAAK,EAAE,CAAC;wBACR,SAAS,EAAE,EAAE;wBACb,GAAG,EAAE,EAAE;wBACP,IAAI,EAAE,CAAC;qBACV;oBACD,QAAQ,EAAE,KAAK;oBACf,OAAO,EAAE;wBACL,IAAI,EAAE,SAAS;wBACf,SAAS,EAAE,EAAE;wBACb,UAAU,EAAE,EAAE;wBACd,KAAK,EAAE,EAAE;wBACT,GAAG,EAAE,CAAC;wBACN,WAAW,EAAE,EAAE;qBAClB;oBACD,OAAO,EAAE,CAAC;oBACV,aAAa,EAAE,EAAE;iBACpB;gBACD,MAAM,EAAE,EAAE;gBACV,QAAQ,EAAE,EAAE;gBACZ,IAAI,EAAE,CAAC;aACV;YACD,UAAU,EAAE;gBACR,OAAO,EAAE,CAAC;aACb;SACJ,CAAC;IACN,CAAC;IAED,kBAAkB;QACd,IAAI,CAAC,2BAAY,CAAC,QAAQ,EAAE;YACxB,OAAO;SACV;QAED,qDAAqD;QACrD,IAAI,YAAY,GAAG,2BAAY,CAAC,0BAA0B,CAAC,2BAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QACjG,IAAI,CAAC,gBAAgB,GAAG,2BAAY,CAAC,sBAAsB,CAAC,YAAY,EAAE,cAAc,EAAE,aAAa,CAAC,CAAC;IAC7G,CAAC;IAEK,KAAK,CAAC,UAAkB;;YAC1B,MAAM,MAAM,GAAG,IAAI,6CAAqB,EAAE,CAAC;YAC3C,MAAM,MAAM,GAAG,MAAM,2BAAY,CAAC,eAAe,CAAC,GAAG,qBAAS,CAAC,uBAAuB,gBAAgB,EAAE,IAAI,CAAC,CAAC;YAE9G,IAAI,KAAK,GAAkB,EAAE,CAAC;YAC9B,IAAI,SAAS,GAAG,UAAU,CAAC,cAAc,CAAC,CAAC,aAAa,CAAC,CAAC;YAC1D,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACvC,IAAI,QAAQ,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;gBAC5B,IAAI,2BAAY,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAE;oBACzC,SAAS;iBACZ;gBAED,IAAI,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,cAAc,EAAE,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;gBAChF,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,EAAE,CAAC;gBAExB,+CAA+C;gBAC/C,IAAI,CAAC,IAAI,GAAG,2BAAY,CAAC,oBAAoB,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;gBAEhF,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACpB;YAED,OAAO,MAAM,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACpC,CAAC;KAAA;CACJ;AA9FD,kDA8FC;;;;;ACrGD,MAAa,SAAS;;AAAtB,8BAwNC;AAvN0B,+BAAqB,GAAG;IAC3C,iBAAiB,EAAE,eAAe;IAClC,gBAAgB,EAAE,YAAY;IAC9B,QAAQ,EAAE,QAAQ;IAClB,MAAM,EAAE,SAAS;IACjB,UAAU,EAAE,YAAY;IACxB,OAAO,EAAE,OAAO;IAChB,WAAW,EAAE,SAAS;IACtB,sBAAsB,EAAE,cAAc;IACtC,uBAAuB,EAAE,eAAe;IACxC,eAAe,EAAE,eAAe;IAChC,mBAAmB,EAAE,eAAe;IACpC,oBAAoB,EAAE,eAAe;IACrC,eAAe,EAAE,SAAS;IAC1B,UAAU,EAAE,SAAS;IACrB,eAAe,EAAE,eAAe;IAChC,oBAAoB,EAAE,eAAe;IACrC,eAAe,EAAE,SAAS;IAC1B,iBAAiB,EAAE,YAAY;IAC/B,qBAAqB,EAAE,YAAY;IACnC,mBAAmB,EAAE,eAAe;IACpC,UAAU,EAAE,UAAU;IACtB,eAAe,EAAE,UAAU;IAC3B,iBAAiB,EAAE,UAAU;IAC7B,iBAAiB,EAAE,YAAY;IAC/B,QAAQ,EAAE,SAAS;IACnB,SAAS,EAAE,gBAAgB;CAC9B,CAAC;AACqB,uBAAa,GAAG;IACnC,QAAQ,EAAE;QACN,KAAK,EAAE,CAAC;QACR,MAAM,EAAE,EAAE;QACV,IAAI,EAAE,EAAE;QACR,OAAO,EAAE,EAAE;KACd;IACD,UAAU,EAAE;QACR,KAAK,EAAE,CAAC;QACR,MAAM,EAAE,EAAE;QACV,IAAI,EAAE,EAAE;QACR,OAAO,EAAE,EAAE;KACd;IACD,eAAe,EAAE;QACb,KAAK,EAAE,CAAC;QACR,MAAM,EAAE,EAAE;QACV,IAAI,EAAE,EAAE;QACR,OAAO,EAAE,EAAE;KACd;IACD,eAAe,EAAE;QACb,KAAK,EAAE,CAAC;QACR,MAAM,EAAE,EAAE;QACV,IAAI,EAAE,EAAE;QACR,OAAO,EAAE,EAAE;KACd;IACD,iBAAiB,EAAE;QACf,KAAK,EAAE,CAAC;QACR,MAAM,EAAE,EAAE;QACV,IAAI,EAAE,EAAE;QACR,OAAO,EAAE,EAAE;KACd;IACD,iBAAiB,EAAE;QACf,KAAK,EAAE,EAAE;QACT,MAAM,EAAE,EAAE;QACV,IAAI,EAAE,EAAE;QACR,OAAO,EAAE,GAAG;KACf;IACD,gBAAgB,EAAE;QACd,KAAK,EAAE,EAAE;QACT,MAAM,EAAE,GAAG;QACX,IAAI,EAAE,GAAG;QACT,OAAO,EAAE,GAAG;KACf;IACD,UAAU,EAAE;QACR,KAAK,EAAE,EAAE;QACT,MAAM,EAAE,EAAE;QACV,IAAI,EAAE,EAAE;QACR,OAAO,EAAE,GAAG;KACf;IACD,iBAAiB,EAAE;QACf,KAAK,EAAE,EAAE;QACT,MAAM,EAAE,EAAE;QACV,IAAI,EAAE,EAAE;QACR,OAAO,EAAE,GAAG;KACf;IACD,sBAAsB,EAAE;QACpB,KAAK,EAAE,EAAE;QACT,MAAM,EAAE,EAAE;QACV,IAAI,EAAE,EAAE;QACR,OAAO,EAAE,EAAE;KACd;IACD,eAAe,EAAE;QACb,KAAK,EAAE,EAAE;QACT,MAAM,EAAE,GAAG;QACX,IAAI,EAAE,GAAG;QACT,OAAO,EAAE,IAAI;KAChB;IACD,iBAAiB,EAAE;QACf,KAAK,EAAE,EAAE;QACT,MAAM,EAAE,GAAG;QACX,IAAI,EAAE,GAAG;QACT,OAAO,EAAE,GAAG;KACf;IACD,oBAAoB,EAAE;QAClB,KAAK,EAAE,EAAE;QACT,MAAM,EAAE,GAAG;QACX,IAAI,EAAE,GAAG;QACT,OAAO,EAAE,GAAG;KACf;IACD,yBAAyB,EAAE;QACvB,KAAK,EAAE,EAAE;QACT,MAAM,EAAE,GAAG;QACX,IAAI,EAAE,GAAG;QACT,OAAO,EAAE,IAAI;KAChB;IACD,iBAAiB,EAAE;QACf,KAAK,EAAE,EAAE;QACT,MAAM,EAAE,GAAG;QACX,IAAI,EAAE,GAAG;QACT,OAAO,EAAE,IAAI;KAChB;IACD,mBAAmB,EAAE;QACjB,GAAG,EAAE,CAAC;QACN,KAAK,EAAE,EAAE;QACT,MAAM,EAAE,GAAG;QACX,IAAI,EAAE,GAAG;QACT,OAAO,EAAE,GAAG;KACf;IACD,mBAAmB,EAAE;QACjB,GAAG,EAAE,EAAE;QACP,KAAK,EAAE,EAAE;QACT,MAAM,EAAE,GAAG;QACX,IAAI,EAAE,GAAG;QACT,OAAO,EAAE,IAAI;KAChB;IACD,MAAM,EAAE;QACJ,KAAK,EAAE,CAAC;QACR,MAAM,EAAE,EAAE;QACV,IAAI,EAAE,EAAE;QACR,OAAO,EAAE,EAAE;QACX,SAAS,EAAE,UAAU;KACxB;IACD,iBAAiB,EAAE;QACf,KAAK,EAAE,CAAC;QACR,MAAM,EAAE,EAAE;QACV,IAAI,EAAE,EAAE;QACR,OAAO,EAAE,GAAG;KACf;IACD,kBAAkB,EAAE;QAChB,KAAK,EAAE,CAAC;QACR,MAAM,EAAE,EAAE;QACV,IAAI,EAAE,EAAE;QACR,OAAO,EAAE,GAAG;KACf;IACD,iBAAiB,EAAE;QACf,KAAK,EAAE,EAAE;QACT,MAAM,EAAE,EAAE;QACV,IAAI,EAAE,GAAG;QACT,OAAO,EAAE,GAAG;KACf;IACD,cAAc,EAAE;QACZ,KAAK,EAAE,CAAC;QACR,MAAM,EAAE,CAAC;QACT,IAAI,EAAE,CAAC;QACP,OAAO,EAAE,CAAC;QACV,SAAS,EAAE,UAAU;KACxB;IACD,KAAK,EAAE;QACH,KAAK,EAAE,GAAG;QACV,MAAM,EAAE,CAAC;QACT,IAAI,EAAE,GAAG;QACT,OAAO,EAAE,GAAG;QACZ,SAAS,EAAE,UAAU;KACxB;IACD,UAAU,EAAE;QACR,KAAK,EAAE,CAAC;QACR,MAAM,EAAE,CAAC;QACT,IAAI,EAAE,CAAC;QACP,OAAO,EAAE,CAAC;QACV,SAAS,EAAE,UAAU;KACxB;IACD,kBAAkB,EAAE;QAChB,KAAK,EAAE,CAAC;QACR,MAAM,EAAE,CAAC;QACT,IAAI,EAAE,CAAC;QACP,OAAO,EAAE,EAAE;QACX,SAAS,EAAE,UAAU;KACxB;IACD,qBAAqB,EAAE;QACnB,GAAG,EAAE,CAAC;QACN,KAAK,EAAE,CAAC;QACR,MAAM,EAAE,CAAC;QACT,IAAI,EAAE,CAAC;QACP,OAAO,EAAE,EAAE;QACX,SAAS,EAAE,UAAU;KACxB;IACD,aAAa,EAAE;QACX,KAAK,EAAE,CAAC;QACR,MAAM,EAAE,EAAE;QACV,IAAI,EAAE,EAAE;QACR,OAAO,EAAE,EAAE;KACd;IACD,0BAA0B,EAAE;QACxB,KAAK,EAAE,CAAC;QACR,MAAM,EAAE,EAAE;QACV,IAAI,EAAE,EAAE;QACR,OAAO,EAAE,GAAG;KACf;IACD,eAAe,EAAE;QACb,KAAK,EAAE,EAAE;QACT,MAAM,EAAE,EAAE;QACV,IAAI,EAAE,CAAC,CAAC;QACR,OAAO,EAAE,CAAC,CAAC;KACd;CACJ,CAAC;AAEqB,iCAAuB,GAAG,MAAM,CAAC;;;;;;;;;;;;;;ACvN5D,iDAA8C;AAC9C,yDAAsD;AAEtD,2FAAwF;AACxF,2CAAwC;AACxC,uDAAkD;AAElD,MAAa,oBAAqB,SAAQ,2BAAY;IAAtD;;QAGW,UAAK,GAAG,CAAC,mBAAmB,CAAC,CAAC;IAiGzC,CAAC;IA/FG,QAAQ,CAAC,UAAkB;QACvB,OAAO,UAAU,CAAC,cAAc,CAAC,QAAQ,CAAC,IAAI,UAAU,CAAC,QAAQ,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;IAC/F,CAAC;IAED,cAAc;QACV,OAAO;YACH,IAAI,EAAE,cAAc;YACpB,GAAG,EAAE,EAAE;YACP,MAAM,EAAE,EAAE;YACV,GAAG,EAAE,2BAA2B;YAChC,KAAK,EAAE,EAAE;YACT,IAAI,EAAE,eAAe;YACrB,IAAI,EAAE;gBACF,WAAW,EAAE;oBACT,KAAK,EAAE,EAAE;oBACT,IAAI,EAAE,EAAE;oBACR,MAAM,EAAE,EAAE;iBACb;gBACD,MAAM,EAAE;oBACJ,IAAI,EAAE,EAAE;oBACR,QAAQ,EAAE,EAAE;oBACZ,SAAS,EAAE,EAAE;oBACb,UAAU,EAAE,EAAE;oBACd,KAAK,EAAE,EAAE;oBACT,IAAI,EAAE,KAAK;oBACX,GAAG,EAAE,CAAC;oBACN,eAAe,EAAE,EAAE;oBACnB,MAAM,EAAE,6BAAa,CAAC,UAAU,CAAC,EAAC,IAAI,EAAE,EAAC,IAAI,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAC,EAAC,CAAC;oBAC/D,KAAK,EAAE;wBACH,KAAK,EAAE,CAAC;wBACR,SAAS,EAAE,EAAE;wBACb,GAAG,EAAE,EAAE;wBACP,IAAI,EAAE,CAAC;qBACV;oBACD,QAAQ,EAAE,KAAK;oBACf,OAAO,EAAE;wBACL,IAAI,EAAE,EAAE;wBACR,SAAS,EAAE,EAAE;wBACb,UAAU,EAAE,EAAE;wBACd,KAAK,EAAE,EAAE;wBACT,GAAG,EAAE,CAAC;wBACN,WAAW,EAAE,EAAE;qBAClB;oBACD,OAAO,EAAE,CAAC;oBACV,aAAa,EAAE,EAAE;iBACpB;gBACD,KAAK,EAAE;oBACH,KAAK,EAAE,CAAC;oBACR,GAAG,EAAE,KAAK;oBACV,IAAI,EAAE,CAAC;oBACP,IAAI,EAAE,CAAC;oBACP,IAAI,EAAE,CAAC;oBACP,WAAW,EAAE,CAAC;oBACd,SAAS,EAAE,CAAC;iBACf;gBACD,QAAQ,EAAE,EAAE;gBACZ,SAAS,EAAE,EAAE;gBACb,KAAK,EAAE,EAAE;gBACT,QAAQ,EAAE,EAAE;gBACZ,KAAK,EAAE,CAAC;aACX;YACD,UAAU,EAAE;gBACR,OAAO,EAAE,CAAC;aACb;SACJ,CAAC;IACN,CAAC;IAED,kBAAkB;QACd,IAAI,CAAC,2BAAY,CAAC,QAAQ,EAAE;YACxB,OAAO;SACV;QAED,IAAI,oBAAoB,GAAG,2BAAY,CAAC,0BAA0B,CAAC,2BAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QACzG,IAAI,CAAC,oBAAoB,GAAG,2BAAY,CAAC,4BAA4B,CAAC,oBAAoB,CAAC,CAAC;QAC5F,IAAI,CAAC,gBAAgB,GAAG,2BAAY,CAAC,sBAAsB,CAAC,oBAAoB,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;IACzG,CAAC;IAEK,KAAK,CAAC,UAAkB;;YAC5B,MAAM,MAAM,GAAG,IAAI,+CAAsB,EAAE,CAAC;YAC5C,MAAM,MAAM,GAAG,MAAM,2BAAY,CAAC,eAAe,CAAC,GAAG,qBAAS,CAAC,uBAAuB,iBAAiB,EAAE,IAAI,CAAC,CAAC;YAE/G,IAAI,KAAK,GAAmB,EAAE,CAAC;YAC/B,IAAI,SAAS,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;YAC9C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACvC,IAAI,QAAQ,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;gBAE5B,IAAI,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,cAAc,EAAE,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;gBAChF,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,EAAE,CAAC;gBACxB,IAAI,CAAC,IAAI,GAAG,2BAAY,CAAC,oBAAoB,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;gBAEhF,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACpB;YAED,OAAO,MAAM,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QAClC,CAAC;KAAA;CACJ;AApGD,oDAoGC;;;;;;;;;;;;;;AC3GD,yDAAsD;AAEtD,MAAM,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAEjC,MAAsB,YAAY;IAY9B;;;OAGG;IACI,MAAM,CAAC,YAAY,CAAC,UAAe;QACtC,OAAO,UAAU,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,UAAU,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,IAAI,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;IACnI,CAAC;IAED;;;OAGG;IACI,MAAM,CAAC,gBAAgB,CAAC,UAAkB;QAC7C,IAAI,UAAU,IAAI,UAAU,CAAC,cAAc,CAAC,SAAS,CAAC,EAAE;YACpD,YAAY,CAAC,QAAQ,GAAG,UAAU,CAAC,SAAS,CAAC,CAAC;SACjD;IACL,CAAC;IAoBD;;;;OAIG;IACI,MAAM,CAAO,QAAQ,CAAC,SAAiB;;YAC1C,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;gBACzB,aAAa,EAAE,KAAK;gBACpB,eAAe,EAAE,IAAI;gBACrB,OAAO,EAAE,2BAAY,CAAC,QAAQ;aACjC,CAAC,CAAC;YAEH,OAAO,CAAC,MAAM,MAAM,CAAC,kBAAkB,CAAC,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;QACnE,CAAC;KAAA;IAEM,MAAM,CAAC,qBAAqB,CAAC,UAAU;QAC1C,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,QAAQ,CAAC;YAAE,OAAO,KAAK,CAAC;QACvD,MAAM,MAAM,GAAG,2BAAY,CAAC,WAAW,CAAC,UAAU,EAAE,QAAQ,EAAE,EAAE,CAAC,CAAC;QAClE,OAAO,YAAY,CAAC,gBAAgB,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;IAC1D,CAAC;IAEM,MAAM,CAAC,gBAAgB,CAAC,UAAU;QACrC,IAAI,YAAY,CAAC,qBAAqB,CAAC,UAAU,CAAC,EAAE;YAChD,OAAO,IAAI,CAAC;SACf;QAED,OAAO,KAAK,CAAC;IACjB,CAAC;;AA3EL,oCA4EC;AAvEiB,6BAAgB,GAAa,CAAC,MAAM,CAAC,CAAC;;;;;;;;;;;;;;ACTxD,iDAA4C;AAC5C,yDAAoD;AACpD,2CAAsC;AAEtC,MAAa,cAAe,SAAQ,2BAAY;IAAhD;;QACW,UAAK,GAAG,CAAC,UAAU,CAAC,CAAC;IAgLhC,CAAC;IA9KG,QAAQ,CAAC,UAAkB;QACvB,OAAO,UAAU,CAAC,cAAc,CAAC,OAAO,CAAC,IAAI,UAAU,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;IAC5F,CAAC;IAED,cAAc;QACV,OAAO;YACH,IAAI,EAAE,EAAE;YACR,GAAG,EAAE,EAAE;YACP,MAAM,EAAE,EAAE;YACV,GAAG,EAAE,2BAA2B;YAChC,KAAK,EAAE,EAAE;YACT,IAAI,EAAE,QAAQ;YACd,IAAI,EAAE;gBACF,WAAW,EAAE;oBACT,KAAK,EAAE,EAAE;oBACT,IAAI,EAAE,EAAE;oBACR,MAAM,EAAE,EAAE;iBACb;gBACD,UAAU,EAAE;oBACR,MAAM,EAAE,CAAC;oBACT,YAAY,EAAE,EAAE;oBAChB,QAAQ,EAAE,CAAC;oBACX,IAAI,EAAE,CAAC;oBACP,QAAQ,EAAE,IAAI;oBACd,OAAO,EAAE;wBACL,IAAI,EAAE,CAAC;wBACP,KAAK,EAAE,CAAC;wBACR,GAAG,EAAE,EAAE;qBACV;oBACD,iBAAiB,EAAE;wBACf,KAAK,EAAE,EAAE;wBACT,KAAK,EAAE,CAAC;wBACR,GAAG,EAAE,CAAC;qBACT;iBACJ;gBACD,QAAQ,EAAE,UAAU;gBACpB,MAAM,EAAE;oBACJ,MAAM,EAAE;wBACJ,OAAO,EAAE,CAAC;wBACV,KAAK,EAAE,QAAQ;qBAClB;oBACD,MAAM,EAAE;wBACJ,OAAO,EAAE,CAAC;wBACV,KAAK,EAAE,QAAQ;qBAClB;oBACD,MAAM,EAAE;wBACJ,OAAO,EAAE,CAAC;wBACV,KAAK,EAAE,iBAAiB;qBAC3B;oBACD,MAAM,EAAE;wBACJ,OAAO,EAAE,CAAC;wBACV,KAAK,EAAE,UAAU;qBACpB;iBACJ;aACJ;YACD,UAAU,EAAE;gBACR,OAAO,EAAE,CAAC;aACb;SACJ,CAAC;IACN,CAAC;IAED,kBAAkB,CAAC,QAAiB;QAChC,IAAI,CAAC,2BAAY,CAAC,QAAQ,EAAE;YACxB,OAAO;SACV;QAED,IAAI,YAAY,GAAG,2BAAY,CAAC,0BAA0B,CAAC,2BAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QACjG,IAAI,CAAC,oBAAoB,GAAG,2BAAY,CAAC,4BAA4B,CAAC,YAAY,CAAC,CAAC;QACpF,IAAI,CAAC,iBAAiB,GAAG,2BAAY,CAAC,sBAAsB,CAAC,YAAY,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;IAChG,CAAC;IAED,oBAAoB,CAAC,SAAS,EAAE,MAAM;QAClC,MAAM,OAAO,GAAG,EAAE,CAAC;QAEnB,KAAK,MAAM,QAAQ,IAAI,SAAS,EAAE;YAC9B,IAAI,2BAAY,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAE;gBACzC,SAAS;aACZ;YACD,MAAM,IAAI,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;YAEnC,IAAI,CAAC,IAAI,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;YACvD,IAAI,CAAC,IAAI,GAAG,2BAAY,CAAC,oBAAoB,CAAC,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YAEjF,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,QAAQ,CAAC,IAAI,2BAAY,CAAC,mBAAmB,CAAC,IAAI,CAAC,iBAAiB,EAAE,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,EAAE,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC,EAAE,CAAC;YACrO,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,2BAAY,CAAC,QAAQ,CAAC,QAAQ,EAAE,cAAc,EAAE,CAAC,CAAC,CAAC;YACjF,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,YAAY,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;YAChF,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,2BAAY,CAAC,QAAQ,CAAC,QAAQ,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC;YACvE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,2BAAY,CAAC,QAAQ,CAAC,QAAQ,EAAE,gBAAgB,EAAE,CAAC,CAAC,CAAC;YACjF,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,2BAAY,CAAC,QAAQ,CAAC,QAAQ,EAAE,UAAU,EAAE,CAAC,CAAC,CAAC;YAE3E,YAAY;YACZ,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,EAAE,CAAC;YACxB,YAAY;YACZ,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACtB;QAED,OAAO,OAAO,CAAC;IACnB,CAAC;IAED,qBAAqB,CAAC,UAAU,EAAE,MAAM;QACpC,MAAM,OAAO,GAAG,EAAE,CAAC;QAEnB,KAAK,MAAM,SAAS,IAAI,UAAU,EAAE;YAChC,IAAI,2BAAY,CAAC,gBAAgB,CAAC,SAAS,CAAC,EAAE;gBAC1C,SAAS;aACZ;YAED,MAAM,IAAI,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;YAEnC,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC;YACjC,IAAI,CAAC,IAAI,GAAG,2BAAY,CAAC,WAAW,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;YACxD,IAAI,CAAC,IAAI,GAAG,2BAAY,CAAC,oBAAoB,CAAC,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YAEjF,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,GAAG,2BAAY,CAAC,WAAW,CAAC,SAAS,EAAE,QAAQ,CAAC,IAAI,2BAAY,CAAC,mBAAmB,CAAC,IAAI,CAAC,iBAAiB,EAAE,2BAAY,CAAC,WAAW,CAAC,SAAS,EAAE,MAAM,CAAC,EAAE,2BAAY,CAAC,WAAW,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC,EAAE,CAAC;YACxO,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,2BAAY,CAAC,QAAQ,CAAC,SAAS,EAAE,cAAc,EAAE,CAAC,CAAC,CAAC;YAClF,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,YAAY,GAAG,2BAAY,CAAC,WAAW,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;YACjF,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,2BAAY,CAAC,QAAQ,CAAC,SAAS,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC;YAExE,kDAAkD;YAClD,2FAA2F;YAC3F,IAAI,SAAS,CAAC,cAAc,CAAC,gBAAgB,CAAC,EAAE;gBAC5C,MAAM,cAAc,GAAG,2BAAY,CAAC,WAAW,CAAC,SAAS,EAAE,gBAAgB,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBACxF,MAAM,IAAI,GAAG,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;gBACvC,MAAM,IAAI,GAAG,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;gBACvC,MAAM,IAAI,GAAG,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;gBACvC,MAAM,IAAI,GAAG,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;gBACvC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;gBACjC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;gBACjC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;gBACjC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;gBAErC,+CAA+C;aAC9C;iBAAM,IAAI,SAAS,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE;gBAC3C,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,2BAAY,CAAC,QAAQ,CAAC,SAAS,EAAE,QAAQ,EAAE,CAAC,CAAC,CAAC;gBAC1E,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,2BAAY,CAAC,QAAQ,CAAC,SAAS,EAAE,QAAQ,EAAE,CAAC,CAAC,CAAC;gBAC1E,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,2BAAY,CAAC,QAAQ,CAAC,SAAS,EAAE,gBAAgB,EAAE,CAAC,CAAC,CAAC;gBAClF,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,2BAAY,CAAC,QAAQ,CAAC,SAAS,EAAE,UAAU,EAAE,CAAC,CAAC,CAAC;aAC/E;YAED,YAAY;YACZ,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,EAAE,CAAC;YACxB,YAAY;YACZ,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACtB;QAED,OAAO,OAAO,CAAC;IACnB,CAAC;IAEK,KAAK,CAAC,UAAkB;;YAC1B,IAAI,OAAO,GAAG,EAAE,CAAC;YACjB,MAAM,SAAS,GAAG,UAAU,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,2BAAY,CAAC,WAAW,CAAC,IAAI,EAAE,UAAU,EAAE,EAAE,CAAC,KAAK,WAAW,CAAC,CAAC;YAC7H,MAAM,UAAU,GAAG,UAAU,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,2BAAY,CAAC,WAAW,CAAC,IAAI,EAAE,UAAU,EAAE,EAAE,CAAC,KAAK,YAAY,CAAC,CAAC;YAE/H,IAAI,eAAe,GAAG,MAAM,2BAAY,CAAC,eAAe,CAAC,GAAG,qBAAS,CAAC,uBAAuB,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,uBAAuB,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;YACtJ,IAAI,gBAAgB,GAAG,MAAM,2BAAY,CAAC,eAAe,CAAC,GAAG,qBAAS,CAAC,uBAAuB,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;YAExJ,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,oBAAoB,CAAC,SAAS,EAAE,eAAe,CAAC,CAAC,CAAC;YAChF,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,qBAAqB,CAAC,UAAU,EAAE,gBAAgB,CAAC,CAAC,CAAC;YAEnF,OAAO,MAAM,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAA;QACrC,CAAC;KAAA;IAED;OACG;IACH,MAAM,CAAC,gBAAgB,CAAC,QAAQ;QAC5B,IAAI,2BAAY,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAE;YACzC,OAAO,IAAI,CAAC;SACf;QAED,MAAM,cAAc,GAAG;YACnB,sCAAsC,EAAG,wBAAwB;SACpE,CAAC;QACF,OAAO,cAAc,CAAC,QAAQ,CAAC,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC,CAAC;IAC7E,CAAC;CACJ;AAjLD,wCAiLC;;;;;;;;;;;;;;ACrLD,iDAA4C;AAC5C,yDAAoD;AACpD,2CAAsC;AAEtC,MAAa,iBAAkB,SAAQ,2BAAY;IAAnD;;QACW,UAAK,GAAG,CAAC,UAAU,CAAC,CAAC;IAwGhC,CAAC;IAtGG,QAAQ,CAAC,UAAkB;QACvB,OAAO,UAAU,CAAC,cAAc,CAAC,OAAO,CAAC,IAAI,UAAU,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;IAC5F,CAAC;IAED,cAAc;QACV,OAAO;YACH,IAAI,EAAE,EAAE;YACR,GAAG,EAAE,EAAE;YACP,MAAM,EAAE,EAAE;YACV,GAAG,EAAE,2BAA2B;YAChC,KAAK,EAAE,EAAE;YACT,IAAI,EAAE,WAAW;YACjB,IAAI,EAAE;gBACF,WAAW,EAAE;oBACT,KAAK,EAAE,EAAE;oBACT,IAAI,EAAE,EAAE;oBACR,MAAM,EAAE,EAAE;iBACb;gBACD,UAAU,EAAE;oBACR,MAAM,EAAE,CAAC;oBACT,YAAY,EAAE,EAAE;oBAChB,QAAQ,EAAE,CAAC;oBACX,IAAI,EAAE,CAAC;oBACP,QAAQ,EAAE,IAAI;oBACd,OAAO,EAAE;wBACL,IAAI,EAAE,CAAC;wBACP,KAAK,EAAE,CAAC;wBACR,GAAG,EAAE,EAAE;qBACV;oBACD,iBAAiB,EAAE;wBACf,KAAK,EAAE,EAAE;wBACT,KAAK,EAAE,CAAC;wBACR,GAAG,EAAE,CAAC;qBACT;iBACJ;aACJ;YACD,UAAU,EAAE;gBACR,OAAO,EAAE,CAAC;aACb;SACJ,CAAC;IACN,CAAC;IAED,kBAAkB,CAAC,QAAiB;QAChC,IAAI,CAAC,2BAAY,CAAC,QAAQ,EAAE;YACxB,OAAO;SACV;QAED,IAAI,YAAY,GAAG,2BAAY,CAAC,0BAA0B,CAAC,2BAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QACjG,IAAI,CAAC,oBAAoB,GAAG,2BAAY,CAAC,4BAA4B,CAAC,YAAY,CAAC,CAAC;QACpF,IAAI,CAAC,iBAAiB,GAAG,2BAAY,CAAC,sBAAsB,CAAC,YAAY,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;IAChG,CAAC;IAEK,eAAe,CAAC,UAAU;;YAC5B,MAAM,OAAO,GAAG,EAAE,CAAC;YAEnB,KAAK,MAAM,SAAS,IAAI,UAAU,EAAE;gBAChC,IAAI,2BAAY,CAAC,gBAAgB,CAAC,SAAS,CAAC,EAAE;oBAC1C,SAAS;iBACZ;gBAED,4DAA4D;gBAC5D,MAAM,QAAQ,GAAG,2BAAY,CAAC,iBAAiB,CAAC,2BAAY,CAAC,WAAW,CAAC,SAAS,EAAE,UAAU,CAAC,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;gBAC9I,IAAI,cAAc,GAAG,MAAM,2BAAY,CAAC,eAAe,CAAC,GAAG,qBAAS,CAAC,uBAAuB,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,IAAI,QAAQ,EAAE,EAAE,IAAI,CAAC,CAAC;gBAEpJ,MAAM,IAAI,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;gBACnC,IAAI,CAAC,IAAI,GAAG,2BAAY,CAAC,WAAW,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;gBACxD,IAAI,CAAC,IAAI,GAAG,2BAAY,CAAC,oBAAoB,CAAC,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;gBAEjF,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,GAAG,2BAAY,CAAC,WAAW,CAAC,SAAS,EAAE,QAAQ,CAAC,IAAI,2BAAY,CAAC,mBAAmB,CAAC,IAAI,CAAC,iBAAiB,EAAE,2BAAY,CAAC,WAAW,CAAC,SAAS,EAAE,MAAM,CAAC,EAAE,2BAAY,CAAC,WAAW,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC,EAAE,CAAC;gBACxO,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,2BAAY,CAAC,QAAQ,CAAC,SAAS,EAAE,QAAQ,EAAE,CAAC,CAAC,CAAC;gBAC5E,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,YAAY,GAAG,2BAAY,CAAC,WAAW,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;gBACjF,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,2BAAY,CAAC,QAAQ,CAAC,SAAS,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC;gBAExE,YAAY;gBACZ,IAAI,CAAC,MAAM,GAAG,cAAc,CAAC,EAAE,CAAC;gBAChC,YAAY;gBACZ,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACtB;YAED,OAAO,OAAO,CAAC;QACnB,CAAC;KAAA;IAED,iBAAiB,CAAC,UAAU;QACxB,MAAM,qBAAqB,GAAG;YAC1B,YAAY;YACZ,WAAW;YACX,YAAY;YACZ,kBAAkB;YAClB,yBAAyB;YACzB,QAAQ;SACX,CAAA;QAED,OAAO,UAAU,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,qBAAqB,CAAC,QAAQ,CAAC,2BAAY,CAAC,WAAW,CAAC,IAAI,EAAE,UAAU,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;IACvI,CAAC;IAEK,KAAK,CAAC,UAAkB;;YAC1B,MAAM,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;YAEtD,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;YAEvD,OAAO,MAAM,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QACtC,CAAC;KAAA;CACJ;AAzGD,8CAyGC;;;;;;;;;;;;;;AC7GD,iDAA8C;AAE9C,yDAAsD;AACtD,2CAAwC;AACxC,+DAA4D;AAE5D,MAAa,WAAY,SAAQ,2BAAY;IAA7C;;QAGW,UAAK,GAAG,CAAC,aAAa,CAAC,CAAC;IA2FnC,CAAC;IAzFG,QAAQ,CAAC,UAAkB;QACvB,OAAO,UAAU,CAAC,cAAc,CAAC,aAAa,CAAC,IAAI,UAAU,CAAC,aAAa,CAAC,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;IAC7G,CAAC;IAED,cAAc;QACV,OAAO;YACH,IAAI,EAAE,EAAE;YACR,GAAG,EAAE,EAAE;YACP,MAAM,EAAE,EAAE;YACV,GAAG,EAAE,2BAA2B;YAChC,KAAK,EAAE,EAAE;YACT,IAAI,EAAE,cAAc;YACpB,IAAI,EAAE;gBACF,WAAW,EAAE;oBACT,KAAK,EAAE,EAAE;oBACT,IAAI,EAAE,EAAE;oBACR,MAAM,EAAE,EAAE;iBACb;gBACD,UAAU,EAAE;oBACR,MAAM,EAAE,CAAC;oBACT,YAAY,EAAE,EAAE;oBAChB,QAAQ,EAAE,CAAC;oBACX,IAAI,EAAE,CAAC;oBACP,QAAQ,EAAE,IAAI;oBACd,OAAO,EAAE;wBACL,IAAI,EAAE,CAAC;wBACP,KAAK,EAAE,CAAC;wBACR,GAAG,EAAE,EAAE;qBACV;oBACD,iBAAiB,EAAE;wBACf,KAAK,EAAE,EAAE;wBACT,KAAK,EAAE,CAAC;wBACR,GAAG,EAAE,CAAC;qBACT;oBACD,QAAQ,EAAE,IAAI;iBACjB;gBACD,IAAI,EAAE,EAAE;gBACR,WAAW,EAAE,EAAE;gBACf,SAAS,EAAE,CAAC;gBACZ,QAAQ,EAAE,CAAC;gBACX,EAAE,EAAE,CAAC;aACR;YACD,UAAU,EAAE;gBACR,OAAO,EAAE,CAAC;aACb;SACJ,CAAC;IACN,CAAC;IAED,kBAAkB;QACd,IAAI,CAAC,2BAAY,CAAC,QAAQ,EAAE;YACxB,OAAO;SACV;QAED,IAAI,eAAe,GAAG,2BAAY,CAAC,0BAA0B,CAAC,2BAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QACpG,0HAA0H;QAC1H,IAAI,CAAC,qBAAqB,GAAG,2BAAY,CAAC,sBAAsB,CAAC,eAAe,EAAE,aAAa,EAAE,WAAW,CAAC,CAAC;IAClH,CAAC;IAEK,KAAK,CAAC,UAAkB;;YAC1B,MAAM,MAAM,GAAG,IAAI,6BAAa,EAAE,CAAC;YAEnC,IAAI,KAAK,GAAU,EAAE,CAAC;YACtB,IAAI,SAAS,GAAG,UAAU,CAAC,aAAa,CAAC,CAAC,WAAW,CAAC,CAAC;YACvD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACvC,IAAI,QAAQ,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;gBAE5B,IAAI,2BAAY,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAE;oBACzC,SAAS;iBACZ;gBAED,IAAI,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC;gBACzD,+CAA+C;gBAC/C,IAAI,CAAC,IAAI,GAAG,2BAAY,CAAC,oBAAoB,CAAC,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;gBACrF,iBAAiB;gBAEjB,IAAI,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,KAAK,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,OAAO,CAAC;gBACvF,IAAI,UAAU,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;oBAC1B,IAAI,SAAS,GAAG,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBACtC,UAAU,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;iBAC7B;gBAED,IAAI,MAAM,GAAG,MAAM,2BAAY,CAAC,eAAe,CAAC,GAAG,qBAAS,CAAC,uBAAuB,SAAS,UAAU,EAAE,EAAE,IAAI,CAAC,CAAC;gBACjH,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,EAAE,CAAC;gBAExB,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACpB;YAED,OAAO,MAAM,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACpC,CAAC;KAAA;CACJ;AA9FD,kCA8FC;;;;;;;;;;;;;;ACpGD,iDAA8C;AAC9C,yDAAsD;AACtD,2EAAwE;AAExE,uDAAkD;AAElD,MAAa,eAAgB,SAAQ,2BAAY;IAAjD;;QAGW,UAAK,GAAG,CAAC,eAAe,CAAC,CAAC;IA6FrC,CAAC;IA3FG,QAAQ,CAAC,UAAkB;QACvB,OAAO,UAAU,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,UAAU,CAAC,WAAW,CAAC,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;IACvG,CAAC;IAED,cAAc;QACV,OAAO;YACH,IAAI,EAAE,eAAe;YACrB,GAAG,EAAE,EAAE;YACP,MAAM,EAAE,EAAE;YACV,GAAG,EAAE,2BAA2B;YAChC,KAAK,EAAE,EAAE;YACT,IAAI,EAAE,SAAS;YACf,IAAI,EAAE;gBACF,WAAW,EAAE;oBACT,KAAK,EAAE,EAAE;oBACT,IAAI,EAAE,EAAE;oBACR,MAAM,EAAE,EAAE;iBACb;gBACD,MAAM,EAAE;oBACJ,IAAI,EAAE,EAAE;oBACR,QAAQ,EAAE,EAAE;oBACZ,SAAS,EAAE,EAAE;oBACb,UAAU,EAAE,EAAE;oBACd,KAAK,EAAE,EAAE;oBACT,IAAI,EAAE,KAAK;oBACX,GAAG,EAAE,CAAC;oBACN,eAAe,EAAE,EAAE;oBACnB,MAAM,EAAE,6BAAa,CAAC,UAAU,CAAC,EAAC,IAAI,EAAE,EAAC,IAAI,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAC,EAAC,CAAC;oBAC/D,KAAK,EAAE;wBACH,KAAK,EAAE,CAAC;wBACR,SAAS,EAAE,EAAE;wBACb,GAAG,EAAE,EAAE;wBACP,IAAI,EAAE,CAAC;qBACV;oBACD,QAAQ,EAAE,KAAK;oBACf,OAAO,EAAE;wBACL,IAAI,EAAE,EAAE;wBACR,SAAS,EAAE,EAAE;wBACb,UAAU,EAAE,EAAE;wBACd,KAAK,EAAE,EAAE;wBACT,GAAG,EAAE,CAAC;wBACN,WAAW,EAAE,EAAE;qBAClB;oBACD,OAAO,EAAE,CAAC;oBACV,aAAa,EAAE,EAAE;iBACpB;gBACD,IAAI,EAAE,EAAE;aACX;YACD,UAAU,EAAE;gBACR,OAAO,EAAE,CAAC;aACb;SACJ,CAAC;IACN,CAAC;IAED,kBAAkB;QACd,IAAI,CAAC,2BAAY,CAAC,QAAQ,EAAE;YACxB,OAAO;SACV;QAED,IAAI,eAAe,GAAG,2BAAY,CAAC,0BAA0B,CAAC,2BAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QACpG,IAAI,CAAC,oBAAoB,GAAG,2BAAY,CAAC,4BAA4B,CAAC,eAAe,CAAC,CAAC;QACvF,IAAI,CAAC,gBAAgB,GAAG,2BAAY,CAAC,sBAAsB,CAAC,eAAe,EAAE,WAAW,EAAE,SAAS,CAAC,CAAC;IACzG,CAAC;IAEK,KAAK,CAAC,UAAkB;;YAC1B,MAAM,oBAAoB,GAAG,EAAE,CAAC;YAChC,MAAM,OAAO,GAAG,MAAM,2BAAY,CAAC,mBAAmB,CAAC,UAAU,EAAE,WAAW,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;YAC3G,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YAErB,MAAM,MAAM,GAAG,IAAI,qCAAiB,EAAE,CAAC;YAEvC,IAAI,KAAK,GAAc,EAAE,CAAC;YAC1B,IAAI,SAAS,GAAG,UAAU,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,CAAC;YACnD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACvC,IAAI,QAAQ,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;gBAE5B,IAAI,2BAAY,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAE;oBACzC,SAAS;iBACZ;gBAED,IAAI,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,cAAc,EAAE,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;gBAEhF,IAAI,QAAQ,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;gBAC9D,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC;gBACjD,IAAI,CAAC,IAAI,GAAG,2BAAY,CAAC,oBAAoB,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;gBAEhF,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACpB;YAED,OAAO,MAAM,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACpC,CAAC;KAAA;CACJ;AAhGD,0CAgGC;;;;;;;;;;;;;;ACtGD,iDAA8C;AAC9C,yDAAsD;AAEtD,qEAAkE;AAClE,yEAAsE;AACtE,qFAAkF;AAClF,6EAA0E;AAC1E,mFAAgF;AAChF,mDAAgD;AAChD,uDAAkD;AAElD,MAAa,aAAc,SAAQ,2BAAY;IAA/C;;QAGW,UAAK,GAAG,CAAC,YAAY,CAAC,CAAC;IAoHlC,CAAC;IAlHG,QAAQ,CAAC,UAAkB;QACvB,OAAO,UAAU,CAAC,cAAc,CAAC,QAAQ,CAAC,IAAI,UAAU,CAAC,QAAQ,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;IAC/F,CAAC;IAED,cAAc;QACV,OAAO;YACH,IAAI,EAAE,cAAc;YACpB,GAAG,EAAE,EAAE;YACP,MAAM,EAAE,EAAE;YACV,GAAG,EAAE,2BAA2B;YAChC,KAAK,EAAE,EAAE;YACT,IAAI,EAAE,OAAO;YACb,IAAI,EAAE;gBACF,WAAW,EAAE;oBACT,KAAK,EAAE,EAAE;oBACT,IAAI,EAAE,EAAE;oBACR,MAAM,EAAE,EAAE;iBACb;gBACD,MAAM,EAAE;oBACJ,IAAI,EAAE,QAAQ;oBACd,QAAQ,EAAE,EAAE;oBACZ,SAAS,EAAE,OAAO;oBAClB,UAAU,EAAE,EAAE;oBACd,KAAK,EAAE,cAAc;oBACrB,IAAI,EAAE,KAAK;oBACX,GAAG,EAAE,CAAC;oBACN,eAAe,EAAE,EAAE;oBACnB,MAAM,EAAE,6BAAa,CAAC,UAAU,CAAC,EAAC,IAAI,EAAE,EAAC,IAAI,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAC,EAAC,CAAC;oBAC/D,KAAK,EAAE;wBACH,KAAK,EAAE,CAAC;wBACR,SAAS,EAAE,EAAE;wBACb,GAAG,EAAE,EAAE;wBACP,IAAI,EAAE,CAAC;qBACV;oBACD,QAAQ,EAAE,KAAK;oBACf,OAAO,EAAE;wBACL,IAAI,EAAE,EAAE;wBACR,SAAS,EAAE,EAAE;wBACb,UAAU,EAAE,EAAE;wBACd,KAAK,EAAE,EAAE;wBACT,GAAG,EAAE,CAAC;wBACN,WAAW,EAAE,EAAE;qBAClB;oBACD,OAAO,EAAE,CAAC;oBACV,aAAa,EAAE,EAAE;iBACpB;gBACD,KAAK,EAAE,CAAC;gBACR,QAAQ,EAAE,EAAE;gBACZ,IAAI,EAAE,EAAE;gBACR,KAAK,EAAE,EAAE;gBACT,QAAQ,EAAE,EAAE;gBACZ,MAAM,EAAE;oBACJ,IAAI,EAAE,EAAE;iBACX;gBACD,SAAS,EAAE;oBACP,OAAO,EAAE,KAAK;oBACd,IAAI,EAAE,EAAE;oBACR,QAAQ,EAAE,KAAK;iBAClB;gBACD,QAAQ,EAAE;oBACN,IAAI,EAAE,EAAE;oBACR,KAAK,EAAE,EAAE;iBACZ;gBACD,YAAY,EAAE;oBACV,QAAQ,EAAE,KAAK;oBACf,MAAM,EAAE,KAAK;oBACb,aAAa,EAAE,KAAK;oBACpB,QAAQ,EAAE,KAAK;iBAClB;aACJ;YACD,UAAU,EAAE;gBACR,OAAO,EAAE,CAAC;aACb;SACJ,CAAC;IACN,CAAC;IAED,kBAAkB;QACd,IAAI,CAAC,2BAAY,CAAC,QAAQ,EAAE;YACxB,OAAO;SACV;QAED,IAAI,aAAa,GAAG,2BAAY,CAAC,0BAA0B,CAAC,2BAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QAClG,IAAI,CAAC,oBAAoB,GAAG,2BAAY,CAAC,4BAA4B,CAAC,aAAa,CAAC,CAAC;QACrF,IAAI,CAAC,gBAAgB,GAAG,2BAAY,CAAC,sBAAsB,CAAC,aAAa,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;IAClG,CAAC;IAEK,KAAK,CAAC,UAAkB;;YAC1B,MAAM,OAAO,GAAG,MAAM,2BAAY,CAAC,mBAAmB,CAAC,UAAU,EAAE,QAAQ,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;YAExG,MAAM,MAAM,GAAG,IAAI,qBAAS,CAAQ,UAAU,EAAE;gBAC5C,EAAE,GAAG,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,qCAAiB,EAAE,EAAE;gBACjD,EAAE,GAAG,EAAE,cAAc,EAAE,KAAK,EAAE,IAAI,iDAAuB,EAAE,EAAE;gBAC7D,EAAE,GAAG,EAAE,UAAU,EAAE,KAAK,EAAE,IAAI,yCAAmB,EAAE,EAAE;gBACrD,EAAE,GAAG,EAAE,WAAW,EAAE,KAAK,EAAE,IAAI,+CAAsB,EAAE,EAAE;gBACzD,EAAE,GAAG,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,iCAAe,EAAE,EAAE;gBAC/C,EAAE,GAAG,EAAE,cAAc,EAAE,KAAK,EAAE,IAAI,iCAAe,EAAE,EAAE;gBACrD,EAAE,GAAG,EAAE,SAAS,EAAE,KAAK,EAAE,IAAI,iCAAe,EAAE,EAAE;aACnD,CAAC,CAAC;YAEH,IAAI,KAAK,GAAY,EAAE,CAAC;YACxB,IAAI,SAAS,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;YAC9C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACvC,IAAI,QAAQ,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;gBAC5B,IAAI,2BAAY,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAE;oBACzC,SAAS;iBACZ;gBAED,IAAI,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,cAAc,EAAE,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;gBAChF,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC;gBAC7C,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACpB;YAED,OAAO,MAAM,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACpC,CAAC;KAAA;CACJ;AAvHD,sCAuHC;;;;;;;;;;;;;;AClID,iDAA8C;AAC9C,yDAAsD;AACtD,oEAAiE;AAGjE,uDAAkD;AAElD,MAAa,YAAa,SAAQ,2BAAY;IAA9C;;QAGW,UAAK,GAAG,CAAC,eAAe,EAAE,aAAa,CAAC,CAAC;IAiJpD,CAAC;IA/IG,QAAQ,CAAC,UAAkB;QACvB,OAAO,UAAU,CAAC,cAAc,CAAC,YAAY,CAAC,IAAI,UAAU,CAAC,YAAY,CAAC,CAAC,cAAc,CAAC,WAAW,CAAC;YAC/F,UAAU,CAAC,cAAc,CAAC,UAAU,CAAC,IAAI,UAAU,CAAC,UAAU,CAAC,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;IACrG,CAAC;IAED,uBAAuB;QACnB,oDAAoD;QACpD,uCAAW,IAAI,CAAC,cAAc,EAAE,KAAE,IAAI,EAAE,WAAW,IAAE;IACzD,CAAC;IAED,qBAAqB;QACjB,oDAAoD;QACpD,uCAAW,IAAI,CAAC,cAAc,EAAE,KAAE,IAAI,EAAE,SAAS,IAAE;IACvD,CAAC;IAED,cAAc;QACV,OAAO;YACH,IAAI,EAAE,cAAc;YACpB,IAAI,EAAE,WAAW;YACjB,GAAG,EAAE,EAAE;YACP,MAAM,EAAE,EAAE;YACV,GAAG,EAAE,2BAA2B;YAChC,KAAK,EAAE,EAAE;YACT,IAAI,EAAE;gBACF,WAAW,EAAE;oBACT,KAAK,EAAE,EAAE;oBACT,IAAI,EAAE,EAAE;oBACR,MAAM,EAAE,EAAE;iBACb;gBACD,UAAU,EAAE;oBACR,MAAM,EAAE,CAAC;oBACT,YAAY,EAAE,EAAE;oBAChB,QAAQ,EAAE,CAAC;oBACX,IAAI,EAAE,CAAC;oBACP,QAAQ,EAAE,IAAI;oBACd,OAAO,EAAE;wBACL,IAAI,EAAE,CAAC;wBACP,KAAK,EAAE,CAAC;wBACR,GAAG,EAAE,EAAE;qBACV;oBACD,iBAAiB,EAAE;wBACf,KAAK,EAAE,EAAE;wBACT,KAAK,EAAE,CAAC;wBACR,GAAG,EAAE,CAAC;qBACT;oBACD,QAAQ,EAAE,IAAI;iBACjB;gBACD,KAAK,EAAE;oBACH,KAAK,EAAE,CAAC;oBACR,GAAG,EAAE,KAAK;oBACV,IAAI,EAAE,CAAC;oBACP,IAAI,EAAE,CAAC;oBACP,IAAI,EAAE,CAAC;oBACP,WAAW,EAAE,CAAC;oBACd,SAAS,EAAE,CAAC;iBACf;gBACD,MAAM,EAAE;oBACJ,IAAI,EAAE,EAAE;oBACR,QAAQ,EAAE,EAAE;oBACZ,SAAS,EAAE,EAAE;oBACb,UAAU,EAAE,EAAE;oBACd,KAAK,EAAE,EAAE;oBACT,IAAI,EAAE,KAAK;oBACX,GAAG,EAAE,CAAC;oBACN,eAAe,EAAE,EAAE;oBACnB,MAAM,EAAE,6BAAa,CAAC,UAAU,CAAC,EAAC,IAAI,EAAE,EAAC,IAAI,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAC,EAAC,CAAC;oBAC/D,KAAK,EAAE;wBACH,KAAK,EAAE,CAAC;wBACR,SAAS,EAAE,EAAE;wBACb,GAAG,EAAE,EAAE;wBACP,IAAI,EAAE,CAAC;qBACV;oBACD,QAAQ,EAAE,KAAK;oBACf,OAAO,EAAE;wBACL,IAAI,EAAE,EAAE;wBACR,SAAS,EAAE,EAAE;wBACb,UAAU,EAAE,EAAE;wBACd,KAAK,EAAE,EAAE;wBACT,GAAG,EAAE,CAAC;wBACN,WAAW,EAAE,EAAE;qBAClB;oBACD,OAAO,EAAE,CAAC;oBACV,aAAa,EAAE,EAAE;iBACpB;gBACD,KAAK,EAAE,UAAU;gBACjB,OAAO,EAAE,CAAC;gBACV,QAAQ,EAAE,CAAC;aACd;YACD,UAAU,EAAE;gBACR,OAAO,EAAE,CAAC;aACb;SACJ,CAAC;IACN,CAAC;IACD,kBAAkB,CAAC,QAAQ;QACvB,IAAI,CAAC,2BAAY,CAAC,QAAQ,EAAE;YACxB,OAAO;SACV;QAED,IAAI,YAAY,GAAG,2BAAY,CAAC,0BAA0B,CAAC,2BAAY,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;QAC3F,2GAA2G;QACxG,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC;YAAE,OAAO,CAAC,KAAK,CAAC,+DAA+D,CAAC,CAAC;QAEhH,IAAI,CAAC,oBAAoB,GAAG,2BAAY,CAAC,4BAA4B,CAAC,YAAY,CAAC,CAAC;QAEpF,MAAM,EAAC,OAAO,EAAE,OAAO,EAAC,GAAG,QAAQ,KAAK,eAAe,CAAC,CAAC;YACjD,EAAC,OAAO,EAAE,YAAY,EAAE,OAAO,EAAE,WAAW,EAAC,CAAC,CAAC;YAC/C,EAAC,OAAO,EAAE,UAAU,EAAE,OAAO,EAAE,SAAS,EAAC,CAAC;QAElD,IAAI,CAAC,gBAAgB,GAAG,2BAAY,CAAC,sBAAsB,CAAC,YAAY,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;IAChG,CAAC;IAEK,KAAK,CAAC,UAAkB;;YAC1B,MAAM,WAAW,GAAG,IAAI,iCAAe,EAAE,CAAC;YAE1C,IAAI,GAAG,GAAG,UAAU,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,SAAS,CAAC;YAC5E,MAAM,OAAO,GAAG,MAAM,2BAAY,CAAC,mBAAmB,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;YAExE,GAAG,GAAG,GAAG,CAAC,WAAW,EAAE,CAAC;YACxB,IAAI,KAAK,GAAW,EAAE,CAAC;YACvB,IAAI,SAAS,GAAG,UAAU,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YAC3C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACvC,IAAI,QAAQ,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;gBAE5B,IAAI,2BAAY,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAE;oBACzC,SAAS;iBACZ;gBAED,MAAM,WAAW,GAAG,GAAG,KAAK,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,uBAAuB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC;gBACxG,IAAI,IAAI,GAAG,WAAW,CAAC,KAAK,CAAC,QAAQ,EAAE,WAAW,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;gBAC3E,MAAM,QAAQ,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;gBAEhE,uEAAuE;gBACvE,YAAY;gBACZ,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC;gBAEjD,kDAAkD;gBAClD,mFAAmF;gBAEnF,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACpB;YAED,OAAO,MAAM,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACpC,CAAC;KAAA;CACJ;AApJD,oCAoJC;;;;;;;;;;;;;;AC3JD,iDAA8C;AAC9C,yDAAsD;AACtD,2CAAwC;AACxC,gEAA6D;AAC7D,8DAA2D;AAC3D,gEAA6D;AAC7D,mDAAgD;AAEhD,wEAAqE;AACrE,uDAAkD;AAElD,MAAa,cAAe,SAAQ,2BAAY;IAAhD;;QAGW,UAAK,GAAG,CAAC,aAAa,CAAC,CAAC;IAgKnC,CAAC;IA9JG,QAAQ,CAAC,UAAkB;QACvB,OAAO,UAAU,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,UAAU,CAAC,SAAS,CAAC,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;IAClG,CAAC;IAED,cAAc;QACV,OAAO;YACH,IAAI,EAAE,cAAc;YACpB,GAAG,EAAE,EAAE;YACP,MAAM,EAAE,EAAE;YACV,GAAG,EAAE,2BAA2B;YAChC,KAAK,EAAE,EAAE;YACT,IAAI,EAAE,QAAQ;YACd,IAAI,EAAE;gBACF,WAAW,EAAE;oBACT,KAAK,EAAE,EAAE;oBACT,IAAI,EAAE,EAAE;oBACR,MAAM,EAAE,EAAE;iBACb;gBACD,MAAM,EAAE;oBACJ,IAAI,EAAE,QAAQ;oBACd,QAAQ,EAAE,EAAE;oBACZ,SAAS,EAAE,SAAS;oBACpB,UAAU,EAAE,EAAE;oBACd,KAAK,EAAE,EAAE;oBACT,IAAI,EAAE,KAAK;oBACX,GAAG,EAAE,CAAC;oBACN,eAAe,EAAE,EAAE;oBACnB,MAAM,EAAE,6BAAa,CAAC,UAAU,EAAE;oBAClC,KAAK,EAAE;wBACH,KAAK,EAAE,CAAC;wBACR,SAAS,EAAE,EAAE;wBACb,GAAG,EAAE,EAAE;wBACP,IAAI,EAAE,CAAC;qBACV;oBACD,QAAQ,EAAE,KAAK;oBACf,OAAO,EAAE;wBACL,IAAI,EAAE,SAAS;wBACf,SAAS,EAAE,EAAE;wBACb,UAAU,EAAE,EAAE;wBACd,KAAK,EAAE,EAAE;wBACT,GAAG,EAAE,CAAC;wBACN,WAAW,EAAE,EAAE;qBAClB;oBACD,OAAO,EAAE,CAAC;oBACV,aAAa,EAAE,EAAE;iBACpB;gBACD,UAAU,EAAE;oBACR,MAAM,EAAE,CAAC;oBACT,YAAY,EAAE,EAAE;oBAChB,QAAQ,EAAE,CAAC;oBACX,IAAI,EAAE,CAAC;oBACP,QAAQ,EAAE,IAAI;oBACd,OAAO,EAAE;wBACL,IAAI,EAAE,CAAC;wBACP,KAAK,EAAE,CAAC;wBACR,GAAG,EAAE,EAAE;qBACV;oBACD,iBAAiB,EAAE;wBACf,KAAK,EAAE,EAAE;wBACT,KAAK,EAAE,CAAC;wBACR,GAAG,EAAE,CAAC;qBACT;oBACD,QAAQ,EAAE,IAAI;iBACjB;gBACD,IAAI,EAAE;oBACF,WAAW,EAAE;wBACT,KAAK,EAAE,CAAC;wBACR,GAAG,EAAE,CAAC;qBACT;oBACD,OAAO,EAAE;wBACL,KAAK,EAAE,CAAC;wBACR,GAAG,EAAE,CAAC;qBACT;iBACJ;gBACD,KAAK,EAAE;oBACH,QAAQ,EAAE,EAAE;oBACZ,MAAM,EAAE;wBACJ,KAAK,EAAE,CAAC;wBACR,MAAM,EAAE,CAAC;wBACT,IAAI,EAAE,CAAC;wBACP,OAAO,EAAE,CAAC;qBACb;oBACD,EAAE,EAAE;wBACA,KAAK,EAAE,CAAC;wBACR,IAAI,EAAE,CAAC;wBACP,GAAG,EAAE,EAAE;qBACV;oBACD,KAAK,EAAE;wBACH,WAAW,EAAE,KAAK;wBAClB,SAAS,EAAE,KAAK;wBAChB,UAAU,EAAE,KAAK;wBACjB,SAAS,EAAE,KAAK;qBACnB;iBACJ;gBACD,KAAK,EAAE;oBACH,KAAK,EAAE,CAAC;iBACX;gBACD,MAAM,EAAE;oBACJ,MAAM,EAAE;wBACJ,KAAK,EAAE,CAAC;wBACR,MAAM,EAAE,CAAC;wBACT,IAAI,EAAE,CAAC;wBACP,OAAO,EAAE,CAAC;wBACV,SAAS,EAAE,EAAE;qBAChB;oBACD,KAAK,EAAE;wBACH,MAAM,EAAE,CAAC;wBACT,OAAO,EAAE,CAAC;qBACb;iBACJ;gBACD,QAAQ,EAAE,OAAO;gBACjB,WAAW,EAAE,EAAE;aAClB;YACD,UAAU,EAAE;gBACR,OAAO,EAAE,CAAC;aACb;SACJ,CAAC;IACN,CAAC;IAED,kBAAkB;QACd,IAAI,CAAC,2BAAY,CAAC,QAAQ,EAAE;YACxB,OAAO;SACV;QAED,IAAI,cAAc,GAAG,2BAAY,CAAC,0BAA0B,CAAC,2BAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QACnG,IAAI,CAAC,oBAAoB,GAAG,2BAAY,CAAC,4BAA4B,CAAC,cAAc,CAAC,CAAC;QACtF,IAAI,CAAC,gBAAgB,GAAG,2BAAY,CAAC,sBAAsB,CAAC,cAAc,EAAE,SAAS,EAAE,QAAQ,CAAC,CAAC;IACrG,CAAC;IAEK,KAAK,CAAC,UAAkB;;YAC1B,MAAM,OAAO,GAAG,MAAM,2BAAY,CAAC,mBAAmB,CAAC,UAAU,EAAE,SAAS,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;YAEzG,OAAO,CAAC,MAAM,CAAC,GAAG,MAAM,2BAAY,CAAC,eAAe,CAAC,GAAG,qBAAS,CAAC,uBAAuB,eAAe,EAAE,IAAI,CAAC,CAAC;YAChH,OAAO,CAAC,SAAS,CAAC,GAAG,MAAM,2BAAY,CAAC,eAAe,CAAC,GAAG,qBAAS,CAAC,uBAAuB,kBAAkB,EAAE,IAAI,CAAC,CAAC;YAEtH,MAAM,MAAM,GAAG,IAAI,qBAAS,CAAS,mCAAgB,CAAC,aAAa,EAAE;gBACjE,EAAE,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,IAAI,2BAAY,EAAE,EAAE;gBAC3C,EAAE,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,IAAI,yBAAW,EAAE,EAAE;gBAC1C,EAAE,GAAG,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,2BAAY,EAAE,EAAE;aAC/C,CAAC,CAAC;YAEH,IAAI,KAAK,GAAa,EAAE,CAAC;YACzB,IAAI,SAAS,GAAG,UAAU,CAAC,SAAS,CAAC,CAAC,QAAQ,CAAC,CAAC;YAChD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACvC,IAAI,QAAQ,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;gBAE5B,IAAI,2BAAY,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAE;oBACzC,SAAS;iBACZ;gBAED,IAAI,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,cAAc,EAAE,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;gBAChF,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC;gBAEhD,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACpB;YAED,OAAO,MAAM,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACpC,CAAC;KAAA;CACJ;AAnKD,wCAmKC;;;;;AC9KD,MAAsB,MAAM;CAE3B;AAFD,wBAEC;;;;;ACFD,qCAAkC;AAClC,yDAAsD;AAEtD,MAAa,SAAmB,SAAQ,eAAe;IAInD,YAAmB,SAAuC,EAAE,QAAyB;QACjF,KAAK,EAAE,CAAC;QAER,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC;QAE7B,IAAI,CAAC,KAAK,GAAG,IAAI,GAAG,EAAE,CAAC;QACvB,KAAK,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,IAAI,QAAQ,EAAE;YACnC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;SAC9B;IACL,CAAC;IAEM,KAAK,CAAC,QAAgB,EAAE,IAAa,EAAE,eAAwB;QAClE,IAAI,GAAG,CAAC;QACR,IAAI,OAAO,IAAI,CAAC,WAAW,KAAK,UAAU,EAAE;YACxC,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;SACpC;aAAM;YACH,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC;YACvB,GAAG,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;SACjD;QAED,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACnC,IAAI,MAAM,KAAK,SAAS,EAAE;YACtB,OAAO,CAAC,IAAI,CAAC,6CAA6C,GAAG,GAAG,CAAC,CAAC;YAClE,OAAO,IAAI,CAAC;SACf;QACD,OAAO,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAE,eAAe,CAAC,CAAC;IACzD,CAAC;CACJ;AA/BD,8BA+BC;;;;;ACjCD,4DAAyD;AACzD,+EAA4E;AAE5E,MAAa,eAAgB,SAAQ,mDAA+B;IAChE,KAAK,CAAC,QAAgB,EAAE,IAAqB;QACzC,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QAEnC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,2BAAY,CAAC,QAAQ,CAAC,QAAQ,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC;QACpE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QAEhF,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AATD,0CASC;;;;;ACZD,4DAAyD;AACzD,2DAAwD;AAGxD,MAAa,qBAAsB,SAAQ,+BAA2B;IAClE,KAAK,CAAC,QAAgB,EAAE,IAA2B,EAAE,eAAwB;QACzE,IAAI,CAAC,IAAI,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;QAEvD,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,QAAQ,CAAC,IAAI,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,EAAE,CAAC;QAE/H,IAAI,IAAI,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QACpD,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;YAC1C,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;SAC7D;QAED,IAAI,QAAQ,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;QAC9D,IAAI,QAAQ,KAAK,GAAG,EAAE;YAClB,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC;SAClC;aAAM,IAAI,QAAQ,KAAK,GAAG,EAAE;YACzB,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC;SACpC;aAAM,IAAI,QAAQ,KAAK,GAAG,EAAE;YACzB,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC;SACpC;QAED,IAAI,MAAM,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;QAC1D,QAAQ,MAAM,EAAE;YACZ,KAAK,QAAQ,CAAC;YACd,KAAK,MAAM,CAAC;YACZ,KAAK,MAAM,CAAC;YACZ,KAAK,SAAS,CAAC;YACf,KAAK,MAAM,CAAC;YACZ,KAAK,QAAQ;gBACT,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,WAAW,EAAuB,CAAC;gBAC7D,MAAM;YACV;gBACI,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC;gBAC3B,MAAM;SACb;QAED,IAAI,eAAe,EAAE;YACjB,MAAM,QAAQ,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;YAC5D,IAAI,CAAC,IAAI,GAAG,2BAAY,CAAC,oBAAoB,CAAC,eAAe,EAAE,QAAQ,CAAC,CAAC;YACzE,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,QAAQ,CAAC,IAAI,2BAAY,CAAC,mBAAmB,CAAC,eAAe,EAAE,QAAQ,CAAC,EAAE,CAAC;SACnJ;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AA3CD,sDA2CC;;;;;AChDD,4DAAyD;AAGzD,2DAAwD;AAExD,MAAa,sBAAuB,SAAQ,+BAA4B;IAC7D,KAAK,CAAC,QAAgB,EAAE,IAAkB,EAAE,eAAwB;QAEvE,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAEtB,IAAI,CAAC,IAAI,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;QAEvD,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,QAAQ,CAAC,IAAI,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,EAAE,CAAC;QAC/H,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC,WAAW,EAA0B,CAAC;QAE1G,IAAI,QAAQ,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;QAC9D,IAAI,QAAQ,KAAK,QAAQ,EAAE;YACvB,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;SACjC;aAAM,IAAI,QAAQ,KAAK,SAAS,EAAE;YAC/B,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC;SAClC;aAAM,IAAI,QAAQ,KAAK,WAAW,EAAE;YACjC,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC;SACpC;aAAM,IAAI,QAAQ,KAAK,WAAW,EAAE;YACjC,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC;SACpC;aAAM;YACD,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC;SACpC;QAED,IAAI,KAAK,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;QACxD,IAAI,KAAK,KAAK,GAAG,EAAE;YACf,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC;SAC7B;aAAM,IAAI,KAAK,KAAK,KAAK,EAAE;YACxB,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;SAC3B;aAAM,IAAI,KAAK,KAAK,SAAS,EAAE;YAC5B,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC;SAC7B;aAAM,IAAI,KAAK,KAAK,MAAM,EAAE;YAC1B,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC;SAC3B;aAAM;YACL,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC;SAC7B;QAED,IAAI,IAAI,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;QACtD,IAAI,IAAI,KAAK,GAAG,EAAE;YACd,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,UAAU,CAAC;SACpC;aAAM,IAAI,IAAI,KAAK,GAAG,EAAE;YACrB,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC;SAChC;QAED,IAAI,eAAe,EAAE;YACjB,MAAM,QAAQ,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;YAC5D,IAAI,CAAC,IAAI,GAAG,2BAAY,CAAC,oBAAoB,CAAC,eAAe,EAAE,QAAQ,CAAC,CAAC;YACzE,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,QAAQ,CAAC,IAAI,2BAAY,CAAC,mBAAmB,CAAC,eAAe,EAAE,QAAQ,CAAC,EAAE,CAAC;SACnJ;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AAnDD,wDAmDC;;;;;ACxDD,sCAAmC;AACnC,4DAAyD;AAGzD,MAAsB,cAA4C,SAAQ,eAAe;IACrF,KAAK,CAAC,QAAgB,EAAE,IAAa,EAAE,eAAwB;QAC3D,IAAI,CAAC,IAAI,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;QAEvD,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,QAAQ,CAAC,IAAI,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,EAAE,CAAC;QAE/H,IAAI,eAAe,EAAE;YACjB,MAAM,QAAQ,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;YAC5D,IAAI,CAAC,IAAI,GAAG,2BAAY,CAAC,oBAAoB,CAAC,eAAe,EAAE,QAAQ,CAAC,CAAC;YACzE,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,QAAQ,CAAC,IAAI,2BAAY,CAAC,mBAAmB,CAAC,eAAe,EAAE,QAAQ,CAAC,EAAE,CAAC;SACnJ;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AAdD,wCAcC;;;;;ACjBD,qDAAkD;AAClD,4DAAyD;AAGzD,MAAsB,wBAAmE,SAAQ,+BAAuB;IACpH,KAAK,CAAC,QAAgB,EAAE,IAAa,EAAE,eAAwB;QAC3D,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAE,eAAe,CAAC,CAAC;QAEpD,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,YAAY,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,OAAO,EAAE,GAAG,CAAC,CAAC;QACrF,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,2BAAY,CAAC,QAAQ,CAAC,QAAQ,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC;QACvE,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,2BAAY,CAAC,QAAQ,CAAC,QAAQ,EAAE,QAAQ,EAAE,CAAC,CAAC,CAAC;QAE3E,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AAVD,4DAUC;;;;;ACdD,4DAAyD;AAEzD,+EAA4E;AAE5E,MAAa,aAAc,SAAQ,mDAA6B;IAC5D,KAAK,CAAC,QAAgB,EAAE,IAAS;QAC7B,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QAEnC,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC;QAE1B,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,OAAO,CAAc,CAAC;QAEjF,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,2BAAY,CAAC,QAAQ,CAAC,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;QACxD,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,2BAAY,CAAC,QAAQ,CAAC,QAAQ,EAAE,UAAU,EAAE,CAAC,CAAC,CAAC;QAEpE,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,GAAG,2BAAY,CAAC,QAAQ,CAAC,QAAQ,EAAE,SAAS,EAAE,CAAC,CAAC,CAAC;QAElF,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AAfD,sCAeC;;;;;ACpBD,4DAAyD;AAEzD,2DAAwD;AAExD,MAAa,iBAAkB,SAAQ,+BAAuB;IACnD,KAAK,CAAC,QAAgB,EAAE,IAAa,EAAE,eAAgB;QAC1D,IAAI,CAAC,IAAI,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;QAEvD,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,QAAQ,CAAC,IAAI,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,EAAE,CAAC;QAE/H,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,UAAU,CAAC,KAAK,UAAU,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,UAAU,CAAC;QAEzG,IAAI,eAAe,EAAE;YACjB,MAAM,QAAQ,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;YAC5D,IAAI,CAAC,IAAI,GAAG,2BAAY,CAAC,oBAAoB,CAAC,eAAe,EAAE,QAAQ,CAAC,CAAC;YACzE,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,QAAQ,CAAC,IAAI,2BAAY,CAAC,mBAAmB,CAAC,eAAe,EAAE,QAAQ,CAAC,EAAE,CAAC;SACnJ;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AAhBD,8CAgBC;;;;;ACpBD,uDAAoD;AACpD,4DAAyD;AAEzD,MAAa,iBAAkB,SAAQ,iCAAe;IAClD,KAAK,CAAC,QAAgB,EAAE,IAAqB,EAAE,eAAwB;QACnE,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAE,eAAe,CAAC,CAAC;QAEpD,IAAI,UAAU,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;QAClE,qEAAqE;QACrE,oEAAoE;QACpE,mEAAmE;QACnE,iEAAiE;QACjE,IAAI,UAAU,KAAK,SAAS,EAAE;YAC1B,UAAU,GAAG,EAAE,CAAC;SACnB;QAED,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,UAAU,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,QAAQ,CAAC;QAChF,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,QAAQ,EAAE;YACpC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,GAAG,SAAS,CAAC;YAC1C,QAAQ,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;gBACpB,KAAK,UAAU;oBACX,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,SAAS,GAAG,MAAM,CAAC;oBAC5C,MAAM;gBACV,KAAK,MAAM;oBACP,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,SAAS,GAAG,WAAW,CAAC;oBACjD,MAAM;gBACV;oBACI,MAAM;aACb;SACJ;aAAM,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,UAAU,EAAE;YAC7C,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,GAAG,SAAS,CAAC;SAC7C;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AAhCD,8CAgCC;;;;;ACnCD,uDAAoD;AACpD,4DAAyD;AAEzD,MAAa,sBAAuB,SAAQ,iCAAe;IACvD,KAAK,CAAC,QAAgB,EAAE,IAAqB,EAAE,eAAwB;QACnE,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAE,eAAe,CAAC,CAAC;QAEpD,IAAI,UAAU,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;QAClE,qEAAqE;QACrE,oEAAoE;QACpE,mEAAmE;QACnE,iEAAiE;QACjE,IAAI,UAAU,KAAK,SAAS,EAAE;YAC1B,UAAU,GAAG,EAAE,CAAC;SACnB;QAED,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,UAAU,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;QAC7D,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE;YAC9B,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,GAAG,QAAQ,CAAC;YACzC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,SAAS,GAAG,WAAW,CAAC;YACjD,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,GAAG,OAAO,CAAC;SACjD;QAED,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,GAAG,UAAU,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;QAE/D,IAAI,UAAU,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE;YAChC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC;SACxC;aAAM,IAAI,UAAU,CAAC,QAAQ,CAAC,aAAa,CAAC,EAAE;YAC3C,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,GAAG,aAAa,CAAC;SAC5C;aAAM,IAAI,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;YACpC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,GAAG,MAAM,CAAC;SACrC;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AAhCD,wDAgCC;;;;;ACnCD,uDAAoD;AACpD,4DAAyD;AAEzD,MAAa,mBAAoB,SAAQ,iCAAe;IACpD,KAAK,CAAC,QAAgB,EAAE,IAAqB,EAAE,eAAwB;QACnE,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAE,eAAe,CAAC,CAAC;QAEpD,IAAI,UAAU,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;QAClE,qEAAqE;QACrE,oEAAoE;QACpE,mEAAmE;QACnE,iEAAiE;QACjE,IAAI,UAAU,KAAK,SAAS,EAAE;YAC1B,UAAU,GAAG,EAAE,CAAC;SACnB;QAED,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,MAAM,EAAE;YAC3B,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,GAAG,QAAQ,CAAC;YACzC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,SAAS,GAAG,OAAO,CAAC;YAC7C,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,GAAG,WAAW,CAAC;SACrD;aAAM,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,UAAU,EAAE;YACtC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,GAAG,QAAQ,CAAC;YACzC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,SAAS,GAAG,WAAW,CAAC;YACjD,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,GAAG,OAAO,CAAC;SACjD;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AAzBD,kDAyBC;;;;;AC5BD,uDAAoD;AACpD,4DAAyD;AAGzD,MAAa,uBAAwB,SAAQ,iCAAe;IACxD,KAAK,CAAC,QAAgB,EAAE,IAAW,EAAE,eAAwB;QACzD,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAE,eAAe,CAAC,CAAC;QAEpD,IAAI,UAAU,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;QAClE,qEAAqE;QACrE,oEAAoE;QACpE,mEAAmE;QACnE,iEAAiE;QACjE,IAAI,UAAU,KAAK,SAAS,EAAE;YAC1B,UAAU,GAAG,EAAE,CAAC;SACnB;QAED,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,aAAa,GAAG,UAAU,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;QAC5E,gCAAgC;QAEhC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,UAAU,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QAC9D,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE;YAC/B,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,GAAG,QAAQ,CAAC;YACzC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,SAAS,GAAG,OAAO,CAAC;YAC7C,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,GAAG,WAAW,CAAC;SACrD;QAED,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,GAAG,UAAU,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;QAClE,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE;YACjC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,GAAG,QAAQ,CAAC;YACzC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,SAAS,GAAG,MAAM,CAAC;YAC5C,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,GAAG,UAAU,CAAC;SACpD;QACD,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,GAAG,UAAU,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;QAClE,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE;YACjC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,GAAG,MAAM,CAAC;SAC1C;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AApCD,0DAoCC;;;;;ACxCD,4DAAyD;AAGzD,2DAAwD;AAExD,MAAa,eAAgB,SAAQ,+BAAqB;IAC/C,KAAK,CAAC,QAAgB,EAAE,IAAW,EAAE,eAAwB;QAChE,IAAI,CAAC,IAAI,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;QAEvD,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,QAAQ,CAAC,IAAI,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,EAAE,CAAC;QAC/H,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC,WAAW,EAAmB,CAAC;QAEnG,IAAI,MAAM,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;QAC1D,IAAI,MAAM,KAAK,GAAG,EAAE;YAChB,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC;YAC/C,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC;SACnD;aAAM,IAAI,MAAM,KAAK,GAAG,EAAE;YACvB,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC;YAC3C,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC;SAC/C;QAED,IAAI,QAAQ,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;QAC9D,IAAI,QAAQ,KAAK,GAAG,EAAE;YAClB,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC;SAClC;aAAM,IAAI,QAAQ,KAAK,GAAG,EAAE;YACzB,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC;SACpC;aAAM,IAAI,QAAQ,KAAK,GAAG,EAAE;YACzB,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC;SACpC;QAED,IAAI,KAAK,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QACrD,IAAI,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;YAC5C,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;SAChE;QAED,IAAI,KAAK,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;QACxD,IAAI,KAAK,KAAK,GAAG,EAAE;YACf,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC;SAC7B;aAAM,IAAI,KAAK,KAAK,KAAK,EAAE;YACxB,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;SAC3B;aAAM,IAAI,KAAK,KAAK,SAAS,EAAE;YAC5B,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC;SAC7B;QAED,IAAI,IAAI,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;QACtD,IAAI,IAAI,KAAK,GAAG,EAAE;YACd,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC;SAC/B;aAAM,IAAI,IAAI,KAAK,GAAG,EAAE;YACrB,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC;SAC3B;QAED,IAAI,eAAe,EAAE;YACjB,MAAM,QAAQ,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;YAC5D,IAAI,CAAC,IAAI,GAAG,2BAAY,CAAC,oBAAoB,CAAC,eAAe,EAAE,QAAQ,CAAC,CAAC;YACzE,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,QAAQ,CAAC,IAAI,2BAAY,CAAC,mBAAmB,CAAC,eAAe,EAAE,QAAQ,CAAC,EAAE,CAAC;SACnJ;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AAtDD,0CAsDC;;;;;AC3DD,4DAAyD;AACzD,+EAA4E;AAI5E,MAAa,eAAgB,SAAQ,mDAA8B;IAC/D,KAAK,CAAC,QAAgB,EAAE,IAAU,EAAE,eAAwB;QACxD,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAE,eAAe,CAAC,CAAC;QAEpD,MAAM,OAAO,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,KAAK,EAAE,GAAG,CAAC,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC;QACxF,IAAI,OAAO,KAAK,IAAI,EAAE;YAClB,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;SAC9C;QAED,MAAM,QAAQ,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,UAAU,EAAE,GAAG,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;QACtF,IAAI,QAAQ,KAAK,IAAI,EAAE;YACnB,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;SAC9C;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AAhBD,0CAgBC;;;;;ACrBD,4DAAyD;AACzD,yDAAsD;AAKtD,0DAAqD;AAErD,MAAa,WAAY,SAAQ,mCAAgB;IAC7C,SAAS,CAAC,QAAgB;;QACtB,IAAI,UAAU,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;QAC9D,IAAI,UAAU,GAAQ,MAAA,UAAU,CAAC,KAAK,CAAC,+BAA+B,CAAC,0CAAG,CAAC,CAAC,CAAC;QAE7E,IAAI,UAAU,IAAI,IAAI,EAAE;YACpB,OAAO,6BAAa,CAAC,UAAU,EAAE,CAAC;SACrC;QAED,IAAI,UAAU,GAAG,CAAC,CAAC;QACnB,IAAI,QAAQ,GAAG,2BAAY,CAAC,QAAQ,CAAC,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;QAExD,IAAI,eAAe,GAAG,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC5C,IAAI,UAAU,GAAG,eAAe,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,MAAM,CAAC;QAExE,IAAI,aAAa,GAAG,UAAU,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC7G,IAAI,eAAe,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,eAAe,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;YACtE,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;SAC9C;QACD,IAAI,eAAe,GAAG,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC;QAEnE,MAAM,iBAAiB,GAAG;YACtB,IAAI,EAAE;gBACF,IAAI,EAAE,UAAwB;gBAC9B,KAAK,EAAE,UAAwB;aAClC;YACD,IAAI,EAAE,UAAU;YAChB,KAAK,EAAE,UAAU;YACjB,EAAE,EAAE;gBACA,IAAI,EAAE,QAAQ;gBACd,KAAK,EAAE,QAAQ;gBACf,GAAG,EAAE,EAAE;aACV;YACD,SAAS,EAAE,eAAiC;SAC/C,CAAA;QACD,OAAO,6BAAa,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC;IACvD,CAAC;IAED,KAAK,CAAC,QAAgB,EAAE,IAAY,EAAE,eAAwB;QAC1D,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAE,eAAe,CAAC,CAAC;QAEpD,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,2BAAY,CAAC,QAAQ,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;QAEjE,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AA7CD,kCA6CC;;;;;ACrDD,4DAAyD;AACzD,yDAAsD;AACtD,wDAAqD;AAIrD,0DAAqD;AAErD,MAAa,YAAa,SAAQ,mCAAgB;IACvC,SAAS,CAAC,QAAgB;;QAC7B,IAAI,UAAU,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;QAC9D,IAAI,UAAU,GAAG,MAAA,UAAU,CAAC,KAAK,CAAC,aAAa,CAAC,0CAAG,CAAC,CAAC,CAAC;QAEtD,IAAI,UAAU,IAAI,IAAI,EAAE;YACpB,OAAO,6BAAa,CAAC,UAAU,EAAE,CAAC;SACrC;QAED,IAAI,UAAU,GAAG,UAAU,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,MAAM,CAAC;QAChE,IAAI,YAAY,GAAG,QAAQ,CAAC,UAAU,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;QACjF,IAAI,QAAQ,GAAG,2BAAY,CAAC,QAAQ,CAAC,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;QAExD,MAAM,iBAAiB,GAAG;YACtB,IAAI,EAAE;gBACF,IAAI,EAAE,UAAwB;gBAC9B,KAAK,EAAE,UAAwB;aAClC;YACD,IAAI,EAAE,YAAY;YAClB,KAAK,EAAE,YAAY;YACnB,EAAE,EAAE;gBACA,IAAI,EAAE,QAAQ;gBACd,KAAK,EAAE,QAAQ;gBACf,GAAG,EAAE,EAAE;aACV;SACJ,CAAA;QACD,OAAO,6BAAa,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC;IACvD,CAAC;IAES,OAAO,CAAC,UAAkB;;QAChC,IAAI,QAAQ,GAAG,2BAAY,CAAC,WAAW,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;QAC5D,IAAI,KAAK,GAAG,MAAA,QAAQ,CAAC,KAAK,CAAC,WAAW,CAAC,0CAAG,CAAC,CAAC,CAAC;QAC7C,OAAO,KAAK,KAAK,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACrD,CAAC;IAED,KAAK,CAAC,QAAgB,EAAE,IAAY,EAAE,eAAwB;QAC1D,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAE,eAAe,CAAC,CAAC;QAEpD,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,GAAG,2BAAY,CAAC,QAAQ,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QAChE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,GAAG,2BAAY,CAAC,QAAQ,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QAEjE,IAAI,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;YAClC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,qBAAS,CAAC,aAAa,CAAC,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,CAAC;SACjG;aAAM;YACH,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,qBAAS,CAAC,aAAa,CAAC,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC,CAAC;SACpG;QAED,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QACtD,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QAEpD,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,WAAW,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QAC9F,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,SAAS,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QAC5F,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,UAAU,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QAC7F,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,SAAS,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QAE5F,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AAzDD,oCAyDC;;;;;ACjED,4DAAyD;AACzD,yDAAsD;AACtD,wDAAqD;AAMrD,0DAAqD;AAErD,MAAa,YAAa,SAAQ,mCAAgB;IACvC,SAAS,CAAC,QAAgB;;QAC7B,IAAI,UAAU,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;QAE9D,IAAI,YAAY,GAAG,CAAC,CAAC;QACrB,IAAI,UAAU,GAAG,UAAU,CAAC;QAC5B,IAAI,eAAe,GAAG,EAAE,CAAC;QAEzB,wCAAwC;QACxC,IAAI,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;YAC5B,eAAe,GAAG,UAAU,CAAC;YAE7B,IAAI,WAAW,GAAG,MAAA,UAAU,CAAC,KAAK,CAAC,2BAA2B,CAAC,0CAAG,CAAC,CAAC,CAAC;YACrE,IAAI,WAAW,KAAK,SAAS,EAAE;gBAC3B,IAAI,WAAW,GAAG,MAAA,WAAW,CAAC,KAAK,CAAC,WAAW,CAAC,0CAAG,CAAC,CAAC,CAAC;gBACtD,YAAY,GAAG,WAAW,KAAK,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aACxE;SACJ;aAAM;YACH,IAAI,WAAW,GAAG,MAAA,UAAU,CAAC,KAAK,CAAC,eAAe,CAAC,0CAAG,CAAC,CAAC,CAAC;YAEzD,IAAI,WAAW,KAAK,SAAS,EAAE;gBAC3B,IAAI,WAAW,GAAG,MAAA,WAAW,CAAC,KAAK,CAAC,SAAS,CAAC,0CAAG,CAAC,CAAC,CAAC;gBACpD,IAAI,WAAW,KAAK,SAAS,EAAE;oBAC3B,YAAY,GAAG,QAAQ,CAAC,WAAW,CAAC,CAAC;iBACxC;aACJ;iBAAM;gBACH,MAAM,iBAAiB,GAAG;oBACtB,IAAI,EAAE;wBACF,IAAI,EAAE,UAAwB;wBAC9B,KAAK,EAAE,UAAwB;qBAClC;iBACJ,CAAA;gBACD,OAAO,6BAAa,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC;aACtD;SACJ;QACD,UAAU,GAAG,UAAU,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,MAAM,CAAC;QAE5D,IAAI,QAAQ,GAAG,2BAAY,CAAC,QAAQ,CAAC,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;QAExD,MAAM,iBAAiB,GAAG;YACtB,IAAI,EAAE;gBACF,IAAI,EAAE,UAAwB;gBAC9B,KAAK,EAAE,UAAwB;aAClC;YACD,IAAI,EAAE,YAAY;YAClB,KAAK,EAAE,YAAY;YACnB,EAAE,EAAE;gBACA,IAAI,EAAE,QAAQ;gBACd,KAAK,EAAE,QAAQ;gBACf,GAAG,EAAE,EAAE;aACV;YACD,SAAS,EAAE,eAAiC;SAC/C,CAAA;QACD,OAAO,6BAAa,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC;IACvD,CAAC;IAEM,QAAQ,CAAC,QAAgB,EAAE,IAAY;;QAC1C,IAAI,SAAS,GAAc;YACvB,MAAM,EAAE,CAAC;YACT,OAAO,EAAE,CAAC;SACb,CAAC;QAEF,IAAI,SAAS,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;QAE7D,IAAI,WAAW,GAAG,MAAA,SAAS,CAAC,KAAK,CAAC,WAAW,CAAC,0CAAG,CAAC,CAAC,CAAC;QACpD,IAAI,WAAW,KAAK,SAAS,EAAE;YAC3B,WAAW,GAAG,MAAA,WAAW,CAAC,KAAK,CAAC,QAAQ,CAAC,0CAAG,CAAC,CAAC,CAAC;YAC/C,IAAI,WAAW,KAAK,SAAS,EAAE;gBAC3B,SAAS,CAAC,MAAM,GAAG,QAAQ,CAAC,WAAW,CAAC,CAAC;aAC5C;SACJ;QAED,IAAI,YAAY,GAAG,MAAA,SAAS,CAAC,KAAK,CAAC,cAAc,CAAC,0CAAG,CAAC,CAAC,CAAC;QACxD,IAAI,YAAY,KAAK,SAAS,EAAE;YAC5B,YAAY,GAAG,MAAA,YAAY,CAAC,KAAK,CAAC,SAAS,CAAC,0CAAG,CAAC,CAAC,CAAC;YAClD,IAAI,YAAY,KAAK,SAAS,EAAE;gBAC5B,SAAS,CAAC,OAAO,GAAG,QAAQ,CAAC,YAAY,CAAC,CAAC;aAC9C;SACJ;QAED,IAAI,SAAS,CAAC,OAAO,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE;YACxC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,GAAG,SAAS,CAAC,OAAO,CAAC,CAAC;SAC1E;QAED,OAAO,SAAS,CAAC;IACrB,CAAC;IAED,KAAK,CAAC,QAAgB,EAAE,IAAY,EAAE,eAAwB;QAC1D,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAE,eAAe,CAAC,CAAC;QAEpD,IAAI,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;YAClC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,qBAAS,CAAC,aAAa,CAAC,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,CAAC;SAClG;aAAM;YACH,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,qBAAS,CAAC,aAAa,CAAC,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC,CAAC;SACrG;QAED,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QAEvD,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AApGD,oCAoGC;;;;;AC9GD,4DAAyD;AACzD,wDAAqD;AAKrD,+EAA4E;AAE5E,MAAsB,gBAAiB,SAAQ,mDAAgC;IAGjE,QAAQ,CAAC,UAAkB;QACjC,IAAI,UAAU,CAAC,cAAc,CAAC,UAAU,CAAC,EAAE;YACvC,IAAI,SAAS,GAAG,2BAAY,CAAC,WAAW,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;YACjE,IAAI,qBAAS,CAAC,qBAAqB,CAAC,cAAc,CAAC,SAAS,CAAC,EAAE;gBAC3D,OAAO,qBAAS,CAAC,qBAAqB,CAAC,SAAS,CAAC,CAAC;aACrD;YACD,OAAO,SAAS,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC,WAAW,EAAE,CAAC;SAC1D;aAAM;YACH,IAAI,QAAQ,GAAG,2BAAY,CAAC,WAAW,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;YAChE,IAAI,qBAAS,CAAC,qBAAqB,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE;gBAC1D,OAAO,qBAAS,CAAC,qBAAqB,CAAC,QAAQ,CAAC,CAAC;aACpD;YAED,IAAI,IAAI,GAAG,2BAAY,CAAC,WAAW,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC,WAAW,EAAE,CAAC;YACtE,OAAO,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,cAAc,CAAC;SAC9D;IACL,CAAC;IAEM,MAAM,CAAC,aAAa,CAAC,UAAkB;QAC1C,IAAI,IAAI,GAAG,2BAAY,CAAC,WAAW,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;QACxD,6DAA6D;QAC7D,IAAI,IAAI,KAAK,OAAO,EAAE;YAClB,OAAO,OAAO,CAAC;SAClB;aAAM;YACH,uCAAuC;YACvC,IAAI,UAAU,CAAC,cAAc,CAAC,UAAU,CAAC,EAAE;gBACvC,IAAI,KAAK,GAAG,2BAAY,CAAC,WAAW,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;gBAC7D,IAAI,KAAK,KAAK,kBAAkB;oBAAE,OAAO,QAAQ,CAAC;aACrD;YAED,2BAA2B;YAC3B,IAAI,QAAQ,GAAG,2BAAY,CAAC,WAAW,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;YAChE,IAAI,QAAQ,KAAK,kBAAkB;gBAAE,OAAO,QAAQ,CAAC;YACrD,4BAA4B;YAC5B,OAAO,OAAO,CAAC;SAClB;IACL,CAAC;IAEM,KAAK,CAAC,QAAgB,EAAE,IAAY,EAAE,eAAwB;QACjE,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAE,eAAe,CAAC,CAAC;QAEpD,IAAI,QAAQ,GAAG,2BAAY,CAAC,WAAW,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;QAC9D,4DAA4D;QAC5D,oFAAoF;QACpF,IAAI,QAAQ,KAAK,WAAW,EAAE;YAC1B,QAAQ,GAAG,UAAU,CAAC;SACzB;QAED,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,gBAAgB,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QAC9D,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,EAAE,CAAC;QAE/C,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QACjD,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;QAEnD,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,GAAG,2BAAY,CAAC,QAAQ,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;QAC3E,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,GAAG,2BAAY,CAAC,QAAQ,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;QAE1E,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,GAAG,2BAAY,CAAC,QAAQ,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;QAE/E,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AAhED,4CAgEC;;;;;ACxED,wCAAqC;AAKxB,QAAA,QAAQ,GAAG;IACpB,MAAM,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE;QAC5B,IAAI,IAAI,CAAC,MAAM,EAAE;YACb,MAAM,eAAe,GAAa,EAAE,CAAC;YACrC,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE;gBACnB,eAAe,CAAC,IAAI,CAAC,iBAAO,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;gBACvD,eAAe,CAAC,IAAI,CAAC,iBAAO,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC;aAC9D;iBAAM,IAAI,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE;gBAC/B,eAAe,CAAC,IAAI,CAAC,iBAAO,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC;gBAC3D,eAAe,CAAC,IAAI,CAAC,iBAAO,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC;aAC/D;iBAAM,IAAI,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;gBAC9B,eAAe,CAAC,IAAI,CAAC,iBAAO,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC;aAC9D;YACD,IAAI,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE;gBACjB,eAAe,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,CAAC,CAAC;gBAClF,kCAAkC;gBAClC,4DAA4D;gBAC5D,oEAAoE;gBACpE,KAAK;aACR;YACD,IAAI,eAAe,CAAC,MAAM,EAAE;gBACxB,MAAM,CAAC,IAAI,GAAG,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aAC7C;YAED,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,EAAE;gBAC1B,MAAM,EAAE,OAAO,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC;gBAChC,IAAI,OAAO,CAAC,IAAI,KAAK,QAAQ;oBAAE,MAAM,CAAC,WAAW,GAAG,OAAO,iBAAO,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC;qBACpF,IAAI,OAAO,CAAC,KAAK;oBAAE,MAAM,CAAC,WAAW,GAAG,OAAO,iBAAO,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,iBAAO,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE,CAAC;qBAClH,IAAI,OAAO,CAAC,UAAU;oBAAE,MAAM,CAAC,WAAW,GAAG,OAAO,iBAAO,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,iBAAO,CAAC,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE,CAAC;qBAC5H,IAAI,OAAO,CAAC,SAAS;oBAAE,MAAM,CAAC,WAAW,GAAG,OAAO,iBAAO,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE,CAAC;aAC9F;YAED,qBAAqB;YACrB,gDAAgD;YAChD,wFAAwF;YACxF,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,EAAE,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,QAAQ,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,MAAM,EAAE;gBACzF,KAAK,CAAC,IAAI,CAAC,GAAG,iBAAO,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aAC3D;YACD,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE;gBACnB,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC;gBAC9B,MAAM,SAAS,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;gBACrG,MAAM,QAAQ,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC;gBAChD,IAAI,QAAQ,GAAG,EAAE,CAAC;gBAClB,IAAI,SAAS,EAAE;oBACX,QAAQ,IAAI,SAAS,CAAC;iBACzB;gBACD,IAAI,QAAQ,EAAE;oBACV,IAAI,SAAS,EAAE;wBACX,QAAQ,IAAI,KAAK,CAAC;qBACrB;oBACD,QAAQ,IAAI,QAAQ,CAAC;iBACxB;gBAED,IAAI,QAAQ,EAAE;oBACV,KAAK,CAAC,IAAI,CAAC,SAAS,QAAQ,EAAE,CAAC,CAAC;iBACnC;aACJ;YACD,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE;gBAC/B,MAAM,EAAE,MAAM,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC;gBAC/B,IAAI,YAAY,GAAG,EAAE,CAAC;gBACtB,IAAI,aAAa,GAAG,EAAE,CAAC;gBACvB,MAAM,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC9G,IAAI,MAAM,CAAC,KAAK,IAAI,SAAS,EAAE;oBAC3B,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;oBAChF,YAAY,GAAG,MAAM,SAAS,GAAG,MAAM,CAAC,KAAK,GAAG,IAAI,EAAE,CAAC;iBAC1D;gBACD,IAAI,MAAM,CAAC,OAAO,CAAC,KAAK,EAAE;oBACtB,iFAAiF;oBACjF,IAAI,MAAM,CAAC,KAAK,EAAE;wBACd,IAAI,MAAM,CAAC,OAAO,CAAC,KAAK,KAAK,aAAa,EAAE;4BACxC,YAAY,IAAI,MAAM,CAAC;yBAC1B;6BAAM;4BACH,aAAa,GAAG,iBAAO,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;yBACvD;qBACJ;yBAAM;wBACH,aAAa,GAAG,iBAAO,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;qBACvD;iBACJ;gBACD,IAAI,YAAY;oBAAE,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;gBAC3C,IAAI,aAAa;oBAAE,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;gBAC7C,IAAI,MAAM,CAAC,EAAE,IAAI,MAAM,CAAC,EAAE,CAAC,KAAK;oBAAE,KAAK,CAAC,IAAI,CAAC,MAAM,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC,CAAC;aACzE;SACJ;IACL,CAAC;IACD,GAAG,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE;QACzB,KAAK,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,CAAC;QAC/C,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE;YAC9B,KAAK,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,IAAI,KAAK,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;QAClD,CAAC,CAAC,CAAC;IACP,CAAC;IAED,OAAO,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE;QAC7B,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACtB,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;QACzE,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;QACnE,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC;SACxD;QACD,IAAI,IAAI,CAAC,MAAM,EAAE;YACb,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC;SAChD;IACL,CAAC;IAED,SAAS,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE;QAC/B,KAAK,CAAC,IAAI,CAAC,iBAAO,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACrC,IAAI,IAAI,CAAC,IAAI;YAAE,KAAK,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;QAC3C,IAAI,IAAI,CAAC,QAAQ;YAAE,KAAK,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;QAC3D,IAAI,IAAI,CAAC,QAAQ;YAAE,KAAK,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;QAC3D,IAAI,IAAI,CAAC,YAAY;YAAE,KAAK,CAAC,IAAI,CAAC,gBAAgB,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC;QACvE,IAAI,IAAI,CAAC,MAAM;YAAE,KAAK,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;IACzD,CAAC;IAED,WAAW,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE;QACjC,gBAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;QACrC,KAAK,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC;QAC5B,KAAK,CAAC,IAAI,CAAC,iBAAO,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACzC,CAAC;IAED,KAAK,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE;QAC3B,IAAI,IAAI,CAAC,KAAK,EAAE;YACZ,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK;gBAAE,KAAK,CAAC,IAAI,CAAC,SAAS,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC;YAC1F,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI;gBAAE,KAAK,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC;YAC3D,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI;gBAAE,KAAK,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC;YAC3D,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI;gBAAE,KAAK,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC;YAC3D,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW;gBAAE,KAAK,CAAC,IAAI,CAAC,eAAe,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC;YAChF,IAAI,IAAI,CAAC,KAAK,CAAC,SAAS;gBAAE,KAAK,CAAC,IAAI,CAAC,aAAa,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC;SAC7E;IACL,CAAC;IAED,IAAI,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE;QAC1B,IAAI,IAAI,CAAC,UAAU;YAAE,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;QAC9F,IAAI,IAAI,CAAC,MAAM;YAAE,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;QACvF,IAAI,IAAI,CAAC,OAAO;YAAE,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;QACrF,IAAI,IAAI,CAAC,EAAE;YAAE,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC;QACtE,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM;YAAE,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;QACpG,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO;YAAE,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,IAAI,CAAC,CAAC;IACvG,CAAC;IAED,OAAO,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE;QAC7B,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IACvE,CAAC;IAED,YAAY,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE;QAClC,gBAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;QACrC,KAAK,CAAC,IAAI,CAAC,iBAAO,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,iBAAO,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;QACrE,MAAM,EAAE,IAAI,EAAE,GAAG,IAAI,CAAC;QACtB,IAAI,IAAI,GAAG,CAAC;YAAE,KAAK,CAAC,IAAI,CAAC,UAAU,IAAI,EAAE,CAAC,CAAC;aACtC,IAAI,IAAI,GAAG,CAAC;YAAE,KAAK,CAAC,IAAI,CAAC,SAAS,IAAI,EAAE,CAAC,CAAC;;YAC1C,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC9B,CAAC;IAED,SAAS,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE;QAC/B,gBAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;QACrC,gBAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;QACpC,IAAI,IAAI,CAAC,OAAO;YAAE,KAAK,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;IACxD,CAAC;IAED,OAAO,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE;QAC7B,gBAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;QACrC,gBAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;QACpC,IAAI,IAAI,CAAC,OAAO;YAAE,KAAK,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;IACxD,CAAC;IAED,MAAM,EAAE,CAAC,IAAgB,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE;QACxC,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM;YAAE,KAAK,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,CAAC;QAC9F,IAAI,IAAI,CAAC,QAAQ,KAAK,WAAW,EAAE;YAC/B,KAAK,MAAM,IAAI,IAAI,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;gBACzC,KAAK,CAAC,IAAI,CAAC,GAAG,iBAAO,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;aAC1D;SACJ;IACL,CAAC;IAED,SAAS,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE;QAC/B,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM;YAAE,KAAK,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,CAAC;IAClG,CAAC;IAED,OAAO,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE;QAC7B,gBAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;QACrC,KAAK,CAAC,IAAI,CAAC,iBAAO,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACzC,CAAC;IAED,YAAY,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE;QAClC,kBAAkB;QAClB,gBAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;IACzC,CAAC;IAED,aAAa,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE;QACnC,aAAa;QACb,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;QAC9E,WAAW;QACX,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QACjF,QAAQ;QACR,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAE3E,kBAAkB;QAClB,gBAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;IACzC,CAAC;IAED,sDAAsD;IACtD,KAAK,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE;QAC3B,0BAA0B;QAC1B,KAAK,CAAC,IAAI,CAAC,iBAAO,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,iBAAO,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAEnE,mBAAmB;QACnB,IAAI,IAAI,CAAC,QAAQ,KAAK,QAAQ,EAAE;YAC5B,KAAK,CAAC,IAAI,CAAC,iBAAO,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;SAC/C;aAAM,IAAI,IAAI,CAAC,QAAQ,KAAK,QAAQ,EAAE;SACtC;aAAM,IAAI,IAAI,CAAC,QAAQ,KAAK,UAAU,EAAE;YACrC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;YAC/B,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;SACnC;aAAM,IAAI,IAAI,CAAC,QAAQ,KAAK,cAAc,EAAE;YACzC,IAAI,IAAI,CAAC,YAAY,CAAC,QAAQ;gBAAE,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YACvD,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM;gBAAE,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACnD,IAAI,IAAI,CAAC,YAAY,CAAC,aAAa;gBAAE,KAAK,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;YACjE,IAAI,IAAI,CAAC,YAAY,CAAC,QAAQ;gBAAE,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;SAC1D;aAAM,IAAI,IAAI,CAAC,QAAQ,KAAK,WAAW,EAAE;YACtC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;YAC/B,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;YACzD,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ;gBAAE,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;SACtD;QACD,YAAY;QACZ,KAAK,CAAC,IAAI,CAAC,iBAAO,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QAEtC,kBAAkB;QAClB,gBAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;QAErC,oBAAoB;QACpB,KAAK,CAAC,IAAI,CAAC,iBAAO,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;QAEzC,iBAAiB;QACjB,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC;QACvB,IAAI,KAAK,GAAG,CAAC;YAAE,KAAK,CAAC,IAAI,CAAC,WAAW,KAAK,EAAE,CAAC,CAAC;aACzC,IAAI,KAAK,GAAG,CAAC;YAAE,KAAK,CAAC,IAAI,CAAC,UAAU,KAAK,EAAE,CAAC,CAAC;;YAC7C,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAE3B,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC;IACzB,CAAC;IAED,MAAM,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,IAAa,EAAE,EAAE;;QAC3C,gBAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;QACrC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACnC,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YACtB,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE;gBACxB,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;aAChD;SACJ;QAED,MAAM,YAAY,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QAC5C,IAAI,YAAY,IAAI,IAAI,CAAC,IAAI,KAAI,MAAA,IAAI,CAAC,IAAI,CAAC,OAAO,0CAAE,GAAG,CAAA,EAAE;YACrD,IAAI,YAAY,EAAE;gBACd,MAAM,QAAQ,GAAG,YAAY,CAAC,IAAI,CAAC,IAAgB,CAAC;gBACpD,MAAM,EAAE,OAAO,EAAE,WAAW,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC;gBAC3C,IAAI,YAAY,CAAC,IAAI;oBAAE,KAAK,CAAC,IAAI,CAAC,GAAG,YAAY,CAAC,IAAI,KAAK,OAAO,CAAC,KAAK,IAAI,OAAO,CAAC,GAAG,GAAG,CAAC,CAAC;gBAC5F,IAAI,QAAQ,CAAC,KAAK,CAAC,MAAM;oBAAE,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,IAAI,QAAQ,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;gBAC5G,IAAI,QAAQ,CAAC,KAAK,CAAC,OAAO;oBAAE,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,6BAA6B,CAAC,CAAC;gBAC1G,IAAI,WAAW,IAAI,WAAW,CAAC,GAAG;oBAAE,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,KAAK,WAAW,CAAC,KAAK,IAAI,WAAW,CAAC,GAAG,GAAG,CAAC,CAAC;aACvI;SACJ;QAED,IAAI,MAAA,MAAA,IAAI,CAAC,UAAU,0CAAE,OAAO,0CAAE,KAAK,EAAE;YACjC,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC;SACvF;QAED,IAAI,IAAI,CAAC,QAAQ,KAAK,OAAO,EAAE;YAC3B,IAAI,IAAI,CAAC,KAAK,CAAC,EAAE,EAAE;gBACf,IAAI,QAAQ,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC;gBACxF,IAAI,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,KAAK,EAAE;oBACb,QAAQ,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,qBAAqB,EAAE,GAAG,CAAC;iBAC7F;gBACD,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aACxB;YACD,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE;gBAClB,MAAM,QAAQ,GAAa,EAAE,CAAC;gBAC9B,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;gBAC7B,IAAI,KAAK,CAAC,WAAW;oBAAE,QAAQ,CAAC,IAAI,CAAC,+BAA+B,CAAC,CAAC;gBACtE,IAAI,KAAK,CAAC,SAAS;oBAAE,QAAQ,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC;gBAClE,IAAI,KAAK,CAAC,UAAU;oBAAE,QAAQ,CAAC,IAAI,CAAC,8BAA8B,CAAC,CAAC;gBACpE,IAAI,KAAK,CAAC,SAAS;oBAAE,QAAQ,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC;gBAClE,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;aACpE;YACD,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM;gBAAE,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;SAC7F;aAAM,IAAI,IAAI,CAAC,QAAQ,KAAK,OAAO,EAAE;YAClC,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE;gBAClB,MAAM,WAAW,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;gBAC7E,uDAAuD;gBACvD,MAAM,QAAQ,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC;gBAChE,IAAI,QAAQ,GAAG,CAAC,CAAC,EAAE;oBACf,KAAK,CAAC,MAAM,CAAC,QAAQ,GAAG,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;iBAC9C;qBAAM;oBACH,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;iBAC3B;aACJ;SACJ;aAAM,IAAI,IAAI,CAAC,QAAQ,KAAK,QAAQ,EAAE;YACnC,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC;YAC9B,IAAI,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,MAAM;gBAAE,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;YAC3F,IAAI,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,OAAO;gBAAE,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,OAAO,IAAI,CAAC,CAAC;YAE1F,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;gBACpB,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,KAAI,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,KAAK,CAAA,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;gBACnI,MAAM,MAAM,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;gBAC1H,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;aACrD;SACJ;QAED,MAAM,YAAY,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QAC5C,IAAI,YAAY,EAAE;YACd,YAAY,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE;gBACzB,KAAK,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC;YAC9B,CAAC,CAAC,CAAC;SACN;IACL,CAAC;CACJ,CAAC;;;;;ACvTF,wCAAmC;AAGnC,MAAa,UAAU;IACnB,MAAM,CAAC,UAAU,CAAC,MAAkB,EAAE,KAAe;QACjD,8EAA8E;QAC9E,MAAM,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;QAE3B,MAAM,SAAS,GAAG,KAAK,CAAC,aAAa,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;QAExD,IAAI,CAAC,SAAS;YAAE,OAAO,MAAM,CAAC;QAE9B,MAAM,CAAC,IAAI,GAAG,UAAU,CAAC,6BAA6B,CAAC,MAAM,CAAC,IAAI,EAAE,SAAS,CAAC,KAAK,EAAE,MAAM,CAAC,qBAAqB,CAAC,CAAC;QAEnH,iDAAiD;QACjD,MAAM,CAAC,IAAI,GAAG,iBAAO,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,EAAC,GAAG,EAAE,CAAC,EAAC,CAAC,CAAC;QACzE,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC;QAE3B,OAAO,MAAM,CAAC;IAClB,CAAC;IAED;;;;;OAKG;IACH,MAAM,CAAC,6BAA6B,CAAC,IAAY,EAAE,KAAa,EAAE,QAAwB;QACtF,QAAQ,QAAQ,EAAE;YACd,KAAK,KAAK;gBACN,OAAO,IAAI,GAAG,KAAK,CAAC;YACxB,KAAK,UAAU;gBACX,OAAO,IAAI,GAAG,KAAK,CAAC;YACxB,KAAK,UAAU;gBACX,OAAO,IAAI,GAAG,KAAK,CAAC;YACxB,KAAK,QAAQ;gBACT,OAAO,IAAI,GAAG,KAAK,CAAC;YACxB;gBACI,OAAO,CAAC,KAAK,CAAC,8CAA8C,QAAQ,gCAAgC,CAAC,CAAC;gBACtG,OAAO,IAAI,GAAG,KAAK,CAAC;SAC3B;IACL,CAAC;CACJ;AAvCD,gCAuCC;;;;;;;;;;;;;;AC/CD,wCAAmC;AAEnC,6EAAwF;AACxF,yCAAoC;AACpC,8DAA8E;AAC9E,kCAA8C;AAC9C,4CAAmE;AACnE,6DAAwD;AACxD,kDAA6C;AA2C7C,6CAAwC;AACxC,kDAA6C;AAE7C,MAAa,OAAQ,SAAQ,IAAI;IAAjC;;QAOI,WAAM,GAAO,EAAE,CAAC;IAg3CpB,CAAC;IA72CG,IAAI,KAAK;QACL,OAAO,KAAK,CAAC,KAAiB,CAAC;IACnC,CAAC;IAED,IAAY,OAAO;QACf,yDAAyD;QACzD,OAAO,IAAI,uCAAkB,CAAE,IAAI,CAAC,IAA+B,CAAC,CAAC;IACzE,CAAC;IAED,iBAAiB;IACjB,eAAe;QACX,OAAO,IAAI,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,YAAY,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC;IACzE,CAAC;IACK,eAAe,CAAC,QAAsB;;YACxC,OAAO,IAAI,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAC;QACnE,CAAC;KAAA;IACD,iBAAiB;QACb,OAAO,IAAI,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,cAAc,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC;IAC3E,CAAC;IACK,iBAAiB,CAAC,KAAqB;;YACzC,OAAO,IAAI,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;QAClE,CAAC;KAAA;IACD,uBAAuB;QACnB,OAAO,IAAI,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,oBAAoB,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC;IACjF,CAAC;IACK,uBAAuB,CAAC,KAA2B;;YACrD,OAAO,IAAI,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,oBAAoB,EAAE,KAAK,CAAC,CAAC;QACxE,CAAC;KAAA;IACD,mBAAmB;QACf,OAAO,IAAI,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,aAAa,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC;IAC1E,CAAC;IACK,mBAAmB,CAAC,gBAA+B;;YACrD,OAAO,IAAI,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,aAAa,EAAE,gBAAgB,CAAC,CAAC;QAC5E,CAAC;KAAA;IAED;;;OAGG;IACH,gBAAgB;QACZ,IAAI,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,aAAa,CAAC,CAAC;QAE3D,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC;QAE3B,oGAAoG;QACpG,IAAI,KAAK,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;YAChC,KAAK,GAAG,iBAAO,CAAC,2BAA2B,CAAC,KAAK,CAAC,CAAC;SACtD;QAED,iDAAiD;QACjD,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;YACrB,IAAI,IAAI,CAAC,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE;gBAC9C,IAAI,CAAC,OAAO,GAAG,iBAAO,CAAC,2BAA2B,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aACpE;YACD,OAAO,IAAI,CAAC;QAChB,CAAC,CAAC,CAAC;QAEH,OAAO,KAAK,CAAC;IACjB,CAAC;IAED;;;OAGG;IACG,gBAAgB,CAAC,KAAY;;YAC/B,sHAAsH;YACtH,sDAAsD;YACtD,MAAM,IAAI,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;QAChE,CAAC;KAAA;IAEK,kBAAkB;;YACpB,MAAM,IAAI,CAAC,SAAS,CAAC,uBAAW,EAAE,iBAAK,CAAC,aAAa,CAAC,CAAC;QAC3D,CAAC;KAAA;IAED;OACG;IACG,MAAM,CAAC,IAAI,EAAE,OAAQ;;;;;YACvB,OAAO,OAAM,MAAM,YAAC,IAAI,EAAE,OAAO,EAAE;QACvC,CAAC;KAAA;IAED,IAAI,cAAc;QACd,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QAChC,IAAI,CAAC,MAAM;YAAE,OAAO,KAAK,CAAC;QAC1B,OAAO,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC;IACjC,CAAC;IAED,IAAI,OAAO;QACP,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QAChC,OAAO,CAAC,CAAC,CAAC,MAAM,IAAI,MAAM,CAAC,IAAI,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,MAAM,CAAC,SAAS,IAAI,MAAM,CAAC,UAAU,IAAI,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC;IAC/H,CAAC;IACD,IAAI,WAAW;QACX,OAAO,IAAI,CAAC,cAAc,EAAE,CAAC;IACjC,CAAC;IAED;;;;OAIG;IACH,WAAW;QACP,KAAK,CAAC,WAAW,EAAE,CAAC;QAEpB,8DAA8D;QAC9D,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QAEjB,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,KAAK,EAAE;YAC1B,IAAI,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,KAAK,QAAQ,EAAE;gBAC7C,uGAAuG;gBACvG,4EAA4E;gBAC5E,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aACpE;SACJ;QACD,MAAM,YAAY,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QAC5C,MAAM,YAAY,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QAE5C,MAAM,UAAU,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QACxC,IAAI,UAAU,EAAE;YACZ,0FAA0F;YAC1F,IAAI,UAAU,CAAC,iBAAiB,KAAK,SAAS,EAAE;gBAC5C,UAAU,CAAC,iBAAiB,GAAG,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC;aAClE;YACD,4BAA4B;YAC5B,MAAM,MAAM,GAAG,OAAO,UAAU,CAAC,MAAM,KAAK,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,MAAM,CAAC;YAC7E,UAAU,CAAC,iBAAiB,CAAC,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;YAE7D,0BAA0B;YAC1B,IAAI,CAAC,UAAU,CAAC,OAAO;gBAAE,UAAU,CAAC,OAAO,GAAG,EAAC,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAC,CAAC;YAE3E,MAAM,YAAY,GAAG,IAAI,qBAAS,EAAU,CAAC;YAC7C,YAAY,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE;gBACzB,MAAM,UAAU,GAAG,GAAG,CAAC,aAAa,EAAE,CAAC;gBAEvC,IAAI,UAAU,IAAI,UAAU,CAAC,OAAO,CAAC,KAAK,EAAE;oBACxC,YAAY,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,EAAE,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;iBAClE;YACL,CAAC,CAAC,CAAC;YAEH,UAAU,CAAC,OAAO,CAAC,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC;YAC3C,UAAU,CAAC,OAAO,CAAC,KAAK,GAAG,iBAAO,CAAC,SAAS,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;SACpE;QAED,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QAChC,IAAI,MAAM,EAAE;YACR,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC;YACnB,MAAM,CAAC,KAAK,CAAC,GAAG,GAAG,EAAE,CAAC;YACtB,MAAM,CAAC,MAAM,CAAC,GAAG,GAAG,EAAE,CAAC;YACvB,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC;YAC1B,MAAM,CAAC,aAAa,GAAG,EAAE,CAAC;YAE1B,aAAa;YACb,+GAA+G;YAC/G,IAAI,MAAM,CAAC,MAAM,CAAC,qBAAqB,KAAK,GAAG,EAAE;gBAC7C,MAAM,CAAC,MAAM,CAAC,qBAAqB,GAAG,KAAK,CAAC;aAC/C;YAED,6BAA6B;YAC7B,MAAM,UAAU,GAAG,IAAI,qBAAS,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACnD,MAAM,OAAO,GAAG,IAAI,qBAAS,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;YACpD,YAAY,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE;gBACzB,MAAM,YAAY,GAAG,GAAG,CAAC,kBAAkB,EAAE,CAAC;gBAC9C,IAAI,CAAC,YAAY;oBAAE,OAAO;gBAE1B,IAAI,YAAY,CAAC,IAAI,CAAC,QAAQ,EAAE;oBAC5B,UAAU,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,EAAE,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iBAClE;gBACD,IAAI,YAAY,CAAC,IAAI,CAAC,SAAS,EAAE;oBAC7B,OAAO,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,EAAE,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;iBAChE;YACL,CAAC,CAAC,CAAC;YAIH,IAAI,YAAY,EAAE;gBACd,MAAM,QAAQ,GAAG,YAAY,CAAC,IAAI,CAAC,IAAgB,CAAC;gBACpD,+BAA+B;gBAC/B,MAAM,CAAC,MAAM,CAAC,GAAG,GAAG,qBAAS,CAAC,aAAa,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,YAAY,CAAC,IAAI,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC;gBACnG,2BAA2B;gBAC3B,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,GAAG,GAAG,qBAAS,CAAC,aAAa,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,YAAY,CAAC,IAAI,EAAE,QAAQ,CAAC,EAAE,CAAC,CAAC;gBAErG,mBAAmB;gBACnB,IAAI,QAAQ,CAAC,OAAO,EAAE;oBAClB,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,GAAG,QAAQ,CAAC,OAAO,CAAC;iBAClD;qBAAM;oBACH,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC;iBAC5D;gBAED,uBAAuB;gBACvB,IAAI,QAAQ,CAAC,UAAU,EAAE;oBACrB,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,UAAU,CAAC;iBAClD;qBAAM;oBACH,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;iBACtD;aACJ;iBAAM;gBACH,4CAA4C;gBAC5C,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC;gBACzD,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;aACtD;YAED,0EAA0E;YAC1E,MAAM,CAAC,MAAM,CAAC,KAAK,GAAG,iBAAO,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YACvD,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,GAAG,iBAAO,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;YAE7D,MAAM,CAAC,KAAK,CAAC,KAAK,GAAG,iBAAO,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;SACxD;QAED,MAAM,KAAK,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;QACpC,IAAI,KAAK,EAAE;YACP,IAAI,KAAK,CAAC,EAAE,EAAE;gBACV,MAAM,UAAU,GAAG,IAAI,qBAAS,EAAE,CAAC;gBACnC,YAAY,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE;oBACzB,yGAAyG;oBACzG,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;wBAAE,UAAU,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;oBAC3E,6BAA6B;gBACjC,CAAC,CAAC,CAAC;gBACH,yGAAyG;gBACzG,KAAK,CAAC,EAAE,CAAC,GAAG,GAAG,UAAU,CAAC,IAAI,CAAC;gBAC/B,yGAAyG;gBACzG,IAAI,KAAK,CAAC,EAAE;oBAAE,KAAK,CAAC,EAAE,CAAC,KAAK,GAAG,iBAAO,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;aAC9D;SACJ;QAED,MAAM,UAAU,GAAG,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAC3C,IAAI,UAAU,EAAE;YACZ,UAAU,CAAC,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC;SAC7E;IACL,CAAC;IAEK,YAAY;;YACd,MAAM,KAAK,GAAI,IAAI,CAAC,cAAc,EAAE,CAAC;YACrC,MAAM,OAAO,GAAG;gBACZ,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE;gBAC/B,IAAI,EAAE,IAAI;gBACV,eAAe,EAAE,IAAI,CAAC,WAAW;gBACjC,KAAK;aACR,CAAC;YACF,OAAO,MAAM,4BAAqB,CAAC,OAAO,CAAC,CAAC;QAChD,CAAC;KAAA;IAEK,UAAU,CAAC,KAAM;;YACnB,IAAI,CAAC,IAAI,CAAC,KAAK;gBAAE,OAAO;YAExB,MAAM,YAAY,GAAG,CAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,QAAQ,KAAI,CAAC,IAAI,CAAC,OAAO,CAAC;YACtD,IAAI,YAAY;gBAAE,OAAO,MAAM,IAAI,CAAC,YAAY,EAAE,CAAC;YAEnD,MAAM,MAAM,GAAG,MAAM,yCAAmB,CAAC,MAAM,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;YAC7D,kDAAkD;YAClD,IAAI,CAAC,MAAM;gBAAE,OAAO,MAAM,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YAE/C,MAAM,cAAc,GAAG,MAAM,MAAM,CAAC,MAAM,EAAE,CAAC;YAC7C,IAAI,MAAM,CAAC,QAAQ;gBAAE,OAAO;YAE5B,OAAO,MAAM,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,cAAc,CAAC,CAAC;QAC1D,CAAC;KAAA;IAEG,WAAW,CAAC,WAAY;QACpB,MAAM,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACvC,MAAM,EAAE,MAAM,EAAE,GAAG,IAAI,CAAC;QACxB,wFAAwF;QACxF,kEAAkE;QAClE,IAAI,CAAC,IAAI,CAAC,WAAW;YAAE,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QAC7C,uFAAuF;QACvF,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK;YAAE,IAAI,CAAC,WAAW,CAAC,KAAK,GAAG,EAAE,CAAC;QAEzD,IAAI,CAAC,WAAW,CAAC,KAAK,GAAG,UAAU,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,WAAW,CAAC,CAAC;QAEpF,MAAM,KAAK,GAAG,EAAE,CAAC;QACjB,MAAM,IAAI,GAAG,mBAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACtC,IAAI,IAAI;YAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;QAErD,wFAAwF;QACxF,kEAAkE;QAClE,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAE3C,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,iBAAiB;QACb,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QACpC,OAAO,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;IACnE,CAAC;IAED,kBAAkB;QACd,IAAI,IAAI,GAAG,EAAE,CAAC;QACd,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QAChC,IAAI,MAAM,IAAI,MAAM,CAAC,OAAO,CAAC,IAAI,EAAE;YAC/B,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,CAAC;YAC3B,IAAI,OAAO,CAAC,IAAI,KAAK,QAAQ,EAAE;gBAC3B,IAAI,GAAG,GAAG,iBAAO,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC;aAC3C;iBAAM,IAAI,OAAO,CAAC,KAAK,EAAE;gBACtB,IAAI,GAAG,GAAG,iBAAO,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,iBAAO,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE,CAAC;aAChF;iBAAM,IAAI,OAAO,CAAC,UAAU,EAAE;gBAC3B,IAAI,GAAG,GAAG,iBAAO,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,iBAAO,CAAC,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE,CAAC;aACrF;iBAAM,IAAI,OAAO,CAAC,SAAS,EAAE;gBAC1B,IAAI,GAAG,GAAG,iBAAO,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE,CAAC;aAChD;SACJ;QAED,MAAM,GAAG,GAAG,IAAI,CAAC,sBAAsB,EAAE,CAAC;QAC1C,IAAI,GAAG;YAAE,IAAI,IAAI,IAAI,GAAG,EAAE,CAAC;QAC3B,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,iBAAiB;QACb,MAAM,KAAK,GAAG,IAAI,qBAAS,EAAU,CAAC;QACtC,IAAI,IAAI,CAAC,cAAc,EAAE,EAAE;YACvB,IAAI,IAAI,CAAC,cAAc,EAAE,EAAE;gBACvB,KAAK,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC;aACtC;YACD,IAAI,IAAI,CAAC,cAAc,EAAE,EAAE;gBACvB,MAAM,YAAY,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;gBAC5C,IAAI,YAAY,aAAZ,YAAY,uBAAZ,YAAY,CAAE,OAAO,EAAE;oBACvB,IAAI,YAAY,CAAC,OAAO,KAAK,iBAAiB,EAAE;wBAC5C,MAAM,QAAQ,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC;wBACvC,KAAK,CAAC,aAAa,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC;qBACjD;iBACJ;aACJ;SACJ;QACD,OAAO,KAAK,CAAC;IACjB,CAAC;IAED,sBAAsB;QAClB,MAAM,OAAO,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzC,MAAM,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;QAC5B,IAAI,KAAK;YAAE,OAAO,IAAI,KAAK,GAAG,CAAC;aAC1B;YACD,IAAI,IAAI,CAAC,cAAc,EAAE,EAAE;gBACvB,MAAM,YAAY,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;gBAC5C,IAAI,YAAY,aAAZ,YAAY,uBAAZ,YAAY,CAAE,OAAO,EAAE;oBACvB,IAAI,YAAY,CAAC,OAAO,KAAK,iBAAiB,EAAE;wBAC5C,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;qBAChD;iBACJ;aACJ;SACJ;QACD,OAAO,EAAE,CAAC;IACd,CAAC;IAEA,YAAY,CAAC,cAA+B;QACzC,IAAI,IAAI,CAAC,OAAO,EAAE,IAAI,IAAI,CAAC,cAAc,EAAE,EAAE;YACzC,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAiB,CAAC;YAEzC,oDAAoD;YACpD,IAAI,QAAQ,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC,KAAK,CAAC;YAE9C,6CAA6C;YAC7C,IAAI,cAAc,aAAd,cAAc,uBAAd,cAAc,CAAE,KAAK,EAAE;gBACvB,QAAQ,GAAG,cAAc,CAAC,KAAK,CAAC,KAAK,CAAC;aACzC;YAED,uCAAuC;YACvC,mGAAmG;YACnG,aAAa;YACb,IAAI,IAAI,CAAC,QAAQ;gBAAE,QAAQ,IAAI,EAAE,CAAC;YAClC,MAAM,OAAO,GAAG,CAAC,CAAC;YAElB,OAAO;gBACH,MAAM,EAAE,QAAQ;gBAChB,OAAO;aACV,CAAA;SAEJ;aAAM,IAAI,IAAI,CAAC,SAAS,EAAE,EAAE;YACzB,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAkB,CAAC;YAE1C,MAAM,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC;YAC1C,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC;YAE1C,OAAO;gBACH,MAAM,EAAE,QAAQ;gBAChB,OAAO;aACV,CAAA;SAEJ;aAAM,IAAI,IAAI,CAAC,gBAAgB,EAAE,EAAE;YAChC,MAAM,IAAI,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;YACpC,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAY,CAAC;YACnC,MAAM,QAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;YAC5C,MAAM,OAAO,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC;YAE5C,OAAO;gBACH,MAAM,EAAE,QAAQ;gBAChB,OAAO;aACV,CAAC;SACL;IACL,CAAC;IAED,eAAe;QACX,MAAM,aAAa,GAAG,CAAC,IAAI,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,EAAE,CACrD,IAAI,CAAC,MAAM,EAAE;YACb,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;QAEvB,8DAA8D;QAC9D,OAAO,aAAa,CAAC,CAAC,CAAC,CAAC;IAC5B,CAAC;IAED,eAAe;QACX,OAAO,CAAC,IAAI,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,EAAE,CACtC,IAAI,CAAC,oBAAoB,EAAE;YAC3B,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;IAC3B,CAAC;IAED,gBAAgB;QACZ,MAAM,IAAI,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QACpC,IAAI,CAAC,IAAI;YAAE,OAAO,KAAK,CAAC;QACxB,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAgB,CAAC;QACxC,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;IACjC,CAAC;IAEK,cAAc,CAAC,GAAG;;YACpB,MAAM,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;YACnC,IAAI,GAAG,EAAE;gBACL,MAAM,OAAO,GAAG,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;gBACpC,MAAM,IAAI,GAAG,OAAO,CAAC,IAA0B,CAAC;gBAChD,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC;gBACrD,MAAM,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;aACvC;QACL,CAAC;KAAA;IAED,OAAO;QACH,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;IAClC,CAAC;IAEK,OAAO,CAAC,QAAQ;;YAClB,MAAM,MAAM,GAAG,SAAS,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC;YAC9C,IAAI,MAAM,EAAE;gBACR,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,CAAC,IAAI,CAAC;gBAC7B,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,QAAQ,CAAC,CAAC;gBAEhE,OAAO,MAAM,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;aACpC;QACL,CAAC;KAAA;IAEK,UAAU;;YACZ,MAAM,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC;YAE5C,IAAI,CAAC,IAAI;gBAAE,OAAO;YAElB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC;YAC3B,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;YACnD,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;YAEtC,IAAI,IAAI,CAAC,WAAW,EAAE;gBAClB,IAAI,CAAC,WAAW,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;aACpE;YAED,MAAM,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YAExB,MAAM,aAAa,GAAG,CAAC,IAAI,CAAC,KAAK,IAAI,EAAE,CAAC;iBACnC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,MAAM,CAAC;iBACrC,MAAM,CAAC,CAAC,GAAkB,EAAE,IAAI,EAAE,EAAE;gBACjC,MAAM,QAAQ,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;gBAEnC,IAAI,QAAQ,IAAI,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE;oBAC/C,MAAM,EAAE,UAAU,EAAE,GAAG,QAAQ,CAAC,IAAI,CAAC;oBACrC,MAAM,GAAG,GAAG,OAAO,UAAU,CAAC,QAAQ,KAAK,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,QAAQ,CAAC;oBAC9E,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,CAAC;oBAC9C,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACvB;gBACD,OAAO,GAAG,CAAC;YACf,CAAC,EAAE,EAAE,CAAC,CAAC;YAEX,IAAI,aAAa,IAAI,aAAa,CAAC,MAAM,EAAE;gBACvC,MAAM,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,CAAC;aAC7C;QACL,CAAC;KAAA;IAEK,SAAS,CAAC,GAAG;;YACf,uDAAuD;YACvD,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK;iBAClB,MAAM,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,IAAI,KAAK,MAAM,CAAC;iBACtC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE;gBACV,MAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBAC9C,MAAM,QAAQ,GAAG,SAAS,aAAT,SAAS,uBAAT,SAAS,CAAE,UAAU,EAAE,CAAC;gBAEzC,IAAI,SAAS,IAAI,QAAQ,EAAE;oBACvB,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,GAAG,KAAK,IAAI,CAAC,GAAG,CAAC;oBACrD,OAAO,SAAS,CAAC,IAAI,CAAC;iBACzB;YACL,CAAC,CAAC,CAAC;YACP,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;QACrC,CAAC;KAAA;IAEK,aAAa;;YACf,MAAM,GAAG,GAAG,SAAS,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;YACxC,IAAI,CAAC,GAAG;gBAAE,OAAO;YAEjB,8GAA8G;YAC9G,IAAI,OAAO,GAAG,CAAC,IAAI,CAAC,QAAQ,KAAK,QAAQ,EAAE;gBACvC,aAAa;gBACb,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aACxD;YAED,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;gBACnB,IAAI,EAAE,EAAE;gBACR,GAAG,EAAE,EAAE;gBACP,WAAW,EAAE,EAAE;aAClB,CAAC,CAAC;YAEH,MAAM,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QAC3B,CAAC;KAAA;IAED,gBAAgB;QACZ,uDAAuD;QACvD,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QAChC,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,KAAK;YAAE,OAAO,EAAE,CAAC;QAEtC,MAAM,KAAK,GAAG,IAAI,qBAAS,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC;QAE/D,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC;QAChE,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAAC;QACtE,MAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,mBAAmB,EAAE,CAAC,CAAC;QAExE,IAAI,SAAS,IAAI,SAAS,CAAC,KAAK;YAAE,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,EAAE,SAAS,CAAC,KAAK,CAAC,CAAC;QAElF,8DAA8D;QAC9D,IAAI,KAAK,EAAE;YACP,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC,KAAK,IAAI,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC;YAC5D,qBAAS,CAAC,gBAAgB,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;SAC5C;aACI,IAAI,UAAU,IAAI,UAAU,CAAC,KAAK,EAAE;YACrC,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC;SACrD;QAED,MAAM,IAAI,GAAG,IAAI,CAAC,uBAAuB,EAAE,CAAC;QAC5C,IAAI,IAAI;YAAE,KAAK,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;QAEvC,2DAA2D;QAC3D,MAAM,GAAG,GAAG,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;QACrD,IAAI,GAAG;YAAE,KAAK,CAAC,aAAa,CAAC,aAAa,EAAE,GAAG,CAAC,CAAC;QAEjD,MAAM,IAAI,GAA8C,EAAE,CAAC;QAC3D,IAAI,SAAS,KAAK,SAAS;YAAE,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAClD,IAAI,UAAU,KAAK,SAAS;YAAE,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACpD,IAAI,KAAK,KAAK,SAAS;YAAE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC1C,8BAA8B;QAC9B,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;QAClC,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;QACxC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;QAE5B,OAAO,KAAK,CAAC,IAAI,CAAC;IACtB,CAAC;IAED,eAAe;;QACX,MAAM,YAAY,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QAC5C,IAAI,CAAC,YAAY;YAAE,OAAO,CAAC,CAAC;QAC5B,IAAI,YAAY,CAAC,KAAK,KAAK,EAAE;YAAE,OAAO,CAAC,CAAC;QACxC,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA,MAAA,IAAI,CAAC,eAAe,EAAE,0CAAE,KAAK,KAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAChG,CAAC;IAED,eAAe,CAAC,KAAwB;QACpC,IAAI,IAAI,CAAC,cAAc,EAAE,EAAE;YACvB,MAAM,MAAM,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;YACtC,IAAI,MAAM;gBAAE,KAAK,CAAC,aAAa,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;SACzD;IACL,CAAC;IAED,KAAK;QACD,OAAO,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;IAChC,CAAC;IAED,SAAS;QACL,IAAI,IAAI,CAAC,KAAK,EAAE,EAAE;YACd,OAAO,IAAI,CAAC,IAAW,CAAC;SAC3B;IACL,CAAC;IAED,WAAW;QACP,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;IACtC,CAAC;IAED,eAAe;QACX,IAAI,IAAI,CAAC,WAAW,EAAE,EAAE;YACpB,OAAO,IAAI,CAAC,IAAiB,CAAC;SACjC;IACL,CAAC;IAED,MAAM;QACF,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;IACjC,CAAC;IAED,UAAU;QACN,IAAI,IAAI,CAAC,MAAM,EAAE,EAAE;YACf,OAAO,IAAI,CAAC,IAAY,CAAC;SAC5B;IACL,CAAC;IAED,cAAc;QACV,OAAO,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC;IACzC,CAAC;IAED,kBAAkB;QACd,IAAI,IAAI,CAAC,cAAc,EAAE,EAAE;YACvB,OAAO,IAAI,CAAC,IAAoB,CAAC;SACpC;IACL,CAAC;IAED,oBAAoB;QAChB,OAAO,IAAI,CAAC,OAAO,CAAC,oBAAoB,EAAE,CAAC;IAC/C,CAAC;IAED,mBAAmB;QACf,OAAO,IAAI,CAAC,OAAO,CAAC,mBAAmB,EAAE,CAAC;IAC9C,CAAC;IAED,SAAS;QACL,OAAO,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC;IACpC,CAAC;IAED,aAAa;QACT,IAAI,IAAI,CAAC,SAAS,EAAE,EAAE;YAClB,OAAO,IAAI,CAAC,IAAe,CAAC;SAC/B;IACL,CAAC;IAED,SAAS;QACL,OAAO,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC;IACpC,CAAC;IAED,aAAa;QACT,IAAI,IAAI,CAAC,SAAS,EAAE,EAAE;YAClB,OAAO,IAAI,CAAC,IAAe,CAAC;SAC/B;IACL,CAAC;IAED,YAAY;QACR,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,aAAa,CAAC;IAC5C,CAAC;IAED,gBAAgB;QACZ,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,OAAO,IAAI,CAAC,IAAkB,CAAC;IACvC,CAAC;IAEK,aAAa,CAAC,KAAK;;YACrB,MAAM,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;YACzC,IAAI,IAAI,EAAE;gBACN,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;gBACpC,MAAM,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;aAC3B;QACL,CAAC;KAAA;IAED,QAAQ;QACJ,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;IACnC,CAAC;IAED,YAAY;QACR,IAAI,IAAI,CAAC,QAAQ,EAAE,EAAE;YACjB,OAAO,IAAI,CAAC,IAAc,CAAC;SAC9B;IACL,CAAC;IAIK,eAAe,CAAC,MAAgB,EAAE,MAAkB,EAAE,KAAK;;YAC7D,MAAM,OAAO,GAAG;gBACZ,KAAK;gBACL,eAAe,EAAE,CAAC;gBAClB,KAAK,EAAE,KAAK;gBACZ,MAAM;aACT,CAAC;YAEF,MAAM,KAAK,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;YACvC,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;YAChC,IAAI,CAAC,MAAM;gBAAE,OAAO;YAEpB,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,CAAC;YAE3B,IAAI,OAAO,CAAC,IAAI,KAAK,SAAS,EAAE;gBAC5B,OAAO,MAAM,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;aAElD;iBAAM,IAAI,OAAO,CAAC,IAAI,KAAK,MAAM,EAAE;gBAChC,OAAO,CAAC,QAAQ,CAAC,GAAG,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,MAAM,CAAC;gBACnC,OAAO,CAAC,cAAc,CAAC,GAAG,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,IAAI,CAAC;gBACvC,OAAO,MAAM,MAAM,CAAC,QAAQ,CAAC,OAAO,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC;aAErD;iBAAM,IAAI,OAAO,CAAC,IAAI,KAAK,OAAO,EAAE;gBACjC,OAAO,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;aAEpC;iBAAM,IAAI,OAAO,CAAC,KAAK,IAAI,OAAO,CAAC,SAAS,EAAE;gBAC3C,MAAM,KAAK,GAAG,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;gBAE7C,IAAI,CAAC,KAAK,EAAE;oBACR,EAAE,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,yBAAyB,CAAC,CAAC,CAAC;oBACtE,OAAO;iBACV;gBAED,OAAO,MAAM,CAAC,SAAS,CAAC,KAAK,kCACtB,OAAO,KACV,SAAS,EAAE,OAAO,CAAC,SAAS,IAC9B,CAAC;aAEN;iBAAM,IAAI,OAAO,CAAC,SAAS,IAAI,OAAO,CAAC,UAAU,EAAE;gBAChD,OAAO,MAAM,CAAC,iBAAiB,CAAC,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,CAAC,UAAU,CAAC,EAAE,OAAO,CAAC,CAAC;aAErF;iBAAM,IAAI,OAAO,CAAC,SAAS,EAAE;gBAC1B,OAAO,MAAM,CAAC,mBAAmB,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;aAEjE;QACL,CAAC;KAAA;IAEK,YAAY,CAAC,IAAY,EAAE,MAAkB,EAAE,KAAK,EAAE,MAAgB;;YACxE,IAAI,IAAI,KAAK,SAAS,EAAE;gBACpB,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;aACrD;YACD,IAAI,IAAI,KAAK,QAAQ,EAAE;gBACnB,MAAM,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;aAChC;QACL,CAAC;KAAA;IAED;;;;;OAKG;IACG,QAAQ,CAAC,KAAK,EAAE,cAA+B;;YAEjD,MAAM,IAAI,GAAG,MAAM,iCAAe,CAAC,QAAQ,CAAC,KAAK,EAAE,IAAI,EAAE,cAAc,CAAC,CAAC;YACzE,IAAI,CAAC,IAAI;gBAAE,OAAO;YAElB,MAAM,iCAAe,CAAC,kBAAkB,CAAC,KAAK,EAAE,IAAI,EAAE,cAAc,CAAC,CAAC;YAEtE,OAAO,IAAI,CAAC;QAChB,CAAC;KAAA;IAED,MAAM,CAAC,kBAAkB,CAAC,IAAI;QAC1B,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACrC,IAAI,KAAK,CAAC;QACV,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACtC,IAAI,QAAQ,EAAE;YACV,MAAM,CAAC,OAAO,EAAE,OAAO,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAC/C,IAAI,KAAK,CAAC;YACV,IAAI,OAAO,MAAK,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,KAAK,CAAC,GAAG,CAAA;gBAAE,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;iBACjE;gBACD,MAAM,KAAK,GAAU,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;gBAC9C,IAAI,CAAC,KAAK;oBAAE,OAAO;gBACnB,aAAa;gBACb,MAAM,SAAS,GAAG,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;gBAC1E,IAAI,SAAS;oBAAE,KAAK,GAAG,IAAI,KAAK,CAAC,SAAS,CAAC,CAAC;aAC/C;YACD,IAAI,CAAC,KAAK;gBAAE,OAAO;YACnB,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;SAClC;;YAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;QAErD,IAAI,CAAC,KAAK;YAAE,OAAO;QACnB,MAAM,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACnC,OAAO,KAAK,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;IACtC,CAAC;IAED,MAAM,CAAC,UAAU;QACb,MAAM,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC;QAChC,MAAM,EAAE,UAAU,EAAE,GAAG,MAAM,CAAC,MAAM,CAAC;QACrC,MAAM,OAAO,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC;QAC3F,IAAI,SAAS,IAAI,UAAU,CAAC,MAAM,KAAK,CAAC;YAAE,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAClE,IAAI,CAAC,OAAO,CAAC,MAAM;YAAE,MAAM,IAAI,KAAK,CAAC,wDAAwD,CAAC,CAAC;QAC/F,OAAO,OAAO,CAAC;IACnB,CAAC;IAED,cAAc;QACV,IAAI,CAAC,IAAI,CAAC,OAAO;YAAE,OAAO,EAAE,CAAA;QAE5B,OAAO,CAAC;gBACJ,KAAK,EAAE,IAAI,CAAC,iBAAiB,EAAE;gBAC/B,IAAI,EAAE,QAAQ;aACjB,CAAC,CAAC;IACP,CAAC;IAED,eAAe;QACX,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;YACtB,OAAO,EAAE,CAAC;SACb;QACD,OAAO,CAAC;gBACJ,KAAK,EAAE,IAAI,CAAC,kBAAkB,EAAE;gBAChC,IAAI,EAAE,SAAS;aAClB,CAAC,CAAC;IACP,CAAC;IAED;;;;OAIG;IACG,eAAe,CAAC,QAAQ,EAAE,OAAO,GAAG,EAAE;;YACxC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC;gBAAE,QAAQ,GAAG,CAAC,QAAQ,CAAC,CAAC;YACpD,uBAAuB;YACvB,IAAI,IAAI,CAAC,IAAI,KAAK,QAAQ,EAAE;gBACxB,MAAM,YAAY,GAAG,SAAS,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC;gBAExD,QAAQ,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,EAAE;;oBACxB,MAAM,IAAI,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;oBAC/B,IAAI,CAAC,GAAG,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC;oBACxB,IAAI,IAAI,CAAC,IAAI,KAAK,MAAM,IAAI,IAAI,CAAC,IAAI,KAAK,cAAc,EAAE;wBACtD,IAAI,MAAA,MAAA,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,IAAI,0CAAE,UAAU,0CAAE,QAAQ,EAAE;4BAClC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,KAAK,CAAC;yBACzC;wBACD,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBAC3B;gBACL,CAAC,CAAC,CAAC;gBAEH,MAAM,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,CAAC;aAC7C;YACD,MAAM,IAAI,CAAC,uBAAuB,EAAE,CAAC;YACrC,MAAM,IAAI,CAAC,WAAW,EAAE,CAAC;YACzB,MAAM,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YAEzB,OAAO,IAAI,CAAC;QAChB,CAAC;KAAA;IAED;;OAEG;IACH,uBAAuB;QACnB,KAAK,CAAC,uBAAuB,EAAE,CAAC;QAChC,IAAI,KAAK,GAAG,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAEpC,oFAAoF;QACpF,IAAI,KAAK,EAAE;YAEP,MAAM,QAAQ,GAAG,CAAC,IAAI,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACrD,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;gBACjB,OAAO,MAAM,CAAC;YAClB,CAAC,EAAE,EAAE,CAAC,CAAC;YAEP,mFAAmF;YACnF,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE;gBAC5B,IAAI,IAAI,CAAC,GAAG,IAAI,QAAQ,EAAE;oBACtB,MAAM,WAAW,GAAG,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;oBAEvC,8DAA8D;oBAC9D,mGAAmG;oBACnG,8DAA8D;oBAC9D,WAAW,CAAC,IAAI,GAAG,IAAI,CAAC;oBACxB,WAAW,CAAC,KAAK,GAAG,IAAI,CAAC;oBACzB,WAAW,CAAC,WAAW,EAAE,CAAC;oBAC1B,OAAO,WAAW,CAAC;iBAEtB;qBAAM;oBACH,yBAAyB;oBACzB,aAAa;oBACb,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;iBACvC;YACL,CAAC,CAAC,CAAC;SACN;IACL,CAAC;IAED,YAAY,CAAC,MAAM;QACf,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;QACzB,IAAI,CAAC,KAAK;YAAE,OAAO;QACnB,OAAO,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,MAAM,CAAC,CAAC;IAC/C,CAAC;IAEK,eAAe,CAAC,OAAO;;YACzB,MAAM,KAAK,GAAG,SAAS,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC;YACjD,IAAI,CAAC,KAAK;gBAAE,OAAO;YACnB,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;YACvD,IAAI,CAAC,OAAO,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC;gBAAE,OAAO;YAC7C,OAAO,CAAC,OAAO,CAAC,CAAC,WAAW,EAAE,EAAE;gBAC5B,MAAM,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,WAAW,CAAC,GAAG,CAAC,CAAC;gBAChE,IAAI,KAAK,KAAK,CAAC,CAAC;oBAAE,OAAO;gBACzB,MAAM,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC;gBAC1B,IAAI,IAAI,EAAE;oBACN,WAAW,GAAG,YAAY,CAAC,WAAW,CAAC,CAAC;oBACxC,WAAW,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;oBAC/B,KAAK,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;oBACpB,yCAAyC;iBAC5C;YACL,CAAC,CAAC,CAAC;YAEH,MAAM,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;YACnC,MAAM,IAAI,CAAC,uBAAuB,EAAE,CAAC;YACrC,MAAM,IAAI,CAAC,WAAW,EAAE,CAAC;YACzB,MAAM,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACzB,OAAO,IAAI,CAAC;QAChB,CAAC;KAAA;IAEK,oBAAoB,CAAC,YAAoB,EAAE,UAA6B,EAAE,OAAgB;;YAC5F,MAAM,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;YACvC,OAAO,IAAI,CAAC;QAChB,CAAC;KAAA;IAED;;;;OAIG;IACG,eAAe,CAAC,OAAO;;YACzB,MAAM,KAAK,GAAG,SAAS,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC;YACjD,IAAI,CAAC,KAAK;gBAAE,OAAO;YAEnB,MAAM,GAAG,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,OAAO,IAAI,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,OAAO,CAAC,CAAC;YACnF,IAAI,GAAG,KAAK,CAAC,CAAC;gBAAE,MAAM,IAAI,KAAK,CAAC,0CAA0C,OAAO,EAAE,CAAC,CAAC;YACrF,KAAK,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YACrB,iFAAiF;YACjF,MAAM,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAChC,MAAM,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;YACnC,MAAM,IAAI,CAAC,uBAAuB,EAAE,CAAC;YACrC,MAAM,IAAI,CAAC,WAAW,EAAE,CAAC;YACzB,MAAM,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACzB,OAAO,IAAI,CAAC;QAChB,CAAC;KAAA;IAEK,aAAa;;YACf,6EAA6E;YAC7E,IAAI,CAAC,EAAE,CAAC,WAAW,CAAC,EAAE;gBAClB,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,iCAAiC,CAAC,CAAC,CAAC;gBAC7E,OAAO;aACV;YAED,MAAM,MAAM,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;YACpC,IAAI,MAAM,KAAK,EAAE,EAAE;gBACf,aAAa;gBACb,EAAE,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,2BAA2B,CAAC,CAAC,CAAC;aAC3E;YACD,oCAAoC;YACpC,mEAAmE;YACnE,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAEvC,YAAY;YACZ,EAAE,CAAC,SAAS,CAAC,aAAa,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAC/D,CAAC;KAAA;IAED,cAAc;QACV,6DAA6D;QAC7D,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QAChC,IAAI,CAAC,MAAM;YAAE,OAAO,KAAK,CAAC;QAC1B,OAAO,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;IACrC,CAAC;IAED,SAAS;QACL,OAAO,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC;IACpC,CAAC;IAED,WAAW;QACP,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QAChC,IAAI,CAAC,MAAM;YAAE,OAAO,KAAK,CAAC;QAC1B,OAAO,MAAM,CAAC,QAAQ,CAAC;IAC3B,CAAC;IAED,aAAa;QACT,OAAO,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC;IACxC,CAAC;IAED,QAAQ;QACJ,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;IACnC,CAAC;IAED,cAAc;QACV,IAAI,IAAI,CAAC,cAAc,EAAE;YACrB,OAAO,IAAI,CAAC,QAAQ,EAAqB,CAAC;IAClD,CAAC;IAED,aAAa,CAAC,IAAY,EAAE,cAA+B;;QACvD,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,EAAE;YACxB,OAAO;SACV;QAED,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QAChC,IAAI,CAAC,MAAM;YAAE,OAAO;QAEpB,MAAM,MAAM,GAAG,uBAAU,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAEhE,MAAM,IAAI,GAAe;YACrB,IAAI;YACJ,MAAM;SACT,CAAC;QAEF,wCAAwC;QACxC,IAAI,IAAI,CAAC,aAAa,EAAE,KAAI,cAAc,aAAd,cAAc,uBAAd,cAAc,CAAE,KAAK,CAAA,EAAE;YAC/C,MAAM,KAAK,GAAG,cAAc,CAAC,KAAK,CAAC,KAAK,CAAC;YACzC,MAAM,WAAW,GAAG,IAAI,qBAAS,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YACnD,MAAM,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;YAErD,IAAI,WAAW,EAAE;gBACb,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;gBACnB,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,WAAW,CAAC,IAAI,CAAC;gBACpC,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,WAAW,CAAC,IAAI,GAAG,WAAW,CAAC,KAAK,CAAC;gBACzD,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,GAAG,CAAC,WAAW,CAAC,EAAE,CAAC,KAAK,GAAG,WAAW,CAAC,KAAK,CAAC;gBACjE,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,IAAI,GAAG,CAAC,WAAW,CAAC,EAAE,CAAC,KAAK,CAAC;aAC/C;SACJ;QAED,IAAI,IAAI,CAAC,aAAa,EAAE,KAAI,cAAc,aAAd,cAAc,uBAAd,cAAc,CAAE,WAAW,CAAA,EAAE;YACrD,IAAI,CAAC,KAAK,GAAG,cAAc,CAAC,WAAW,CAAC,KAAK,CAAC;SACjD;QAED,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE;YACtB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;YAC7B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;SACzC;QAED,IAAI,IAAI,CAAC,cAAc,EAAE,EAAE;YACvB,IAAI,CAAC,QAAQ,GAAG,MAAA,cAAc,aAAd,cAAc,uBAAd,cAAc,CAAE,YAAY,0CAAE,QAAQ,CAAC;YACvD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;SACzC;QAED,MAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC;QACpD,IAAI,SAAS;YAAE,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC;QAEtC,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,WAAW;QACP,IAAI,IAAI,CAAC,cAAc,EAAE,EAAE;YACvB,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,uBAAuB,CAAC,CAAC;SACtD;QACD,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE;YACtB,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,uBAAuB,CAAC,CAAC;SACtD;QACD,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE;YACtB,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;SAChD;QACD,IAAI,IAAI,CAAC,OAAO,EAAE,EAAE;YAChB,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;SAC9C;QACD,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,OAAO,IAAI,CAAC,IAAI,CAAA;SACnB;QAED,OAAO,6BAAiB,CAAC;IAC7B,CAAC;IAED,QAAQ;;QACJ,0GAA0G;QAC1G,MAAM,KAAK,GAAG,SAAS,CAAC,MAAA,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,0CAAE,KAAK,CAAC,CAAC;QACtD,IAAI,CAAC,KAAK;YAAE,OAAO,SAAS,CAAC;QAC7B,yCAAyC;QACzC,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,QAAQ,EAAE;YAC7B,KAAK,CAAC,KAAK,GAAG,cAAc,CAAC;SAChC;aAAM,IAAI,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,SAAS,EAAE;YACzB,KAAK,CAAC,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;SACpD;aAAM,IAAI,IAAI,CAAC,OAAO,EAAE,EAAE;YACvB,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC,KAAK,CAAC;YAC7C,KAAK,CAAC,KAAK,GAAG,WAAW,CAAC;SAC7B;aAAM,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE;YAC7B,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,uBAAuB,EAAE,CAAC,KAAK,CAAC;YACnD,KAAK,CAAC,KAAK,GAAG,WAAW,CAAC;SAC7B;aAAM;YACH,KAAK,CAAC,KAAK,GAAG,WAAW,CAAC;SAC7B;QAED,oCAAoC;QACpC,IAAI,KAAK,CAAC,SAAS,EAAE;YACjB,MAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YAClD,IAAI,GAAG,EAAE;gBACL,KAAK,CAAC,GAAG,GAAG,qBAAS,CAAC,aAAa,CAAC,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;gBACrE,iBAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;aAC5B;SACJ;QAED,OAAO,KAAK,CAAC;IACjB,CAAC;IAED;;;;;OAKG;IACH,OAAO,CAAC,KAAa,EAAE,GAAW,EAAE,KAAU;QAC1C,MAAM,QAAQ,GAAG,iBAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QAC1C,OAAO,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAC;IAC/C,CAAC;IAED;;;;OAIG;IACH,OAAO,CAAC,KAAa,EAAE,GAAW;QAC9B,MAAM,IAAI,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;QACvC,OAAO,iBAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;IACnC,CAAC;IAED;;OAEG;IACH,cAAc;QACV,OAAO,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC;IACzC,CAAC;IAED,OAAO;QACH,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;IAClC,CAAC;IAED,WAAW;QACP,IAAI,IAAI,CAAC,OAAO,EAAE,EAAE;YAChB,OAAO,IAAI,CAAC,IAAa,CAAC;SAC7B;IACL,CAAC;IAED,YAAY;QACR,OAAO,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE,CAAC;IACvC,CAAC;IAED,iBAAiB;QACb,OAAO,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,CAAC;IAC5C,CAAC;IAED,QAAQ;QACJ,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;IACnC,CAAC;IAED,SAAS;QACL,OAAO,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC;IACpC,CAAC;IAED,QAAQ;QACJ,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;IACnC,CAAC;IAED,YAAY;QACR,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE;YACzB,OAAO,IAAI,CAAC,IAAc,CAAC;SAC9B;IACL,CAAC;IAED,WAAW;QACP,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;IACtC,CAAC;IAED,eAAe;QACX,IAAI,IAAI,CAAC,WAAW,EAAE,EAAE;YACpB,OAAO,IAAI,CAAC,IAAiB,CAAC;SACjC;IACL,CAAC;IAED,aAAa;QACT,OAAO,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC;IACxC,CAAC;IAED,mBAAmB;QACf,OAAO,IAAI,CAAC,OAAO,CAAC,mBAAmB,EAAE,CAAC;IAC9C,CAAC;IAED,qBAAqB;QACjB,OAAO,IAAI,CAAC,OAAO,CAAC,qBAAqB,EAAE,CAAC;IAChD,CAAC;IAED,WAAW;QACP,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;IACtC,CAAC;IAED,eAAe;QACX,OAAO,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;IAC1C,CAAC;IAED,cAAc;QACV,OAAO,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC;IACzC,CAAC;IAED,OAAO;QACH,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;IAClC,CAAC;IAED,WAAW;QACP,IAAI,IAAI,CAAC,OAAO,EAAE,EAAE;YAChB,OAAO,IAAI,CAAC,IAAa,CAAC;SAC7B;IACL,CAAC;IAED,aAAa;QACT,OAAO,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC;IACxC,CAAC;IAED,iBAAiB;QACb,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE;YACtB,OAAO,IAAI,CAAC,IAAmB,CAAC;SACnC;IACL,CAAC;IAED,SAAS;QACL,OAAO,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC;IACpC,CAAC;IAED,aAAa;QACT,OAAO,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC;IACxC,CAAC;IAED,iBAAiB;QACb,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE;YACtB,OAAO,IAAI,CAAC,IAAmB,CAAC;SACnC;IACL,CAAC;IAED,SAAS;QACL,OAAO,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC;IACpC,CAAC;IAED,aAAa;QACT,IAAI,IAAI,CAAC,SAAS,EAAE,EAAE;YAClB,OAAO,IAAI,CAAC,IAAe,CAAC;SAC/B;IACL,CAAC;IAED,cAAc;QACV,OAAO,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC;IACzC,CAAC;IAED,kBAAkB;QACd,IAAI,IAAI,CAAC,cAAc,EAAE,EAAE;YACvB,OAAO,IAAI,CAAC,IAAoB,CAAC;SACpC;IACL,CAAC;IAED,aAAa;QACT,OAAO,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC;IACxC,CAAC;IAED,QAAQ;QACJ,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;IACnC,CAAC;IAED,YAAY;QACR,IAAI,IAAI,CAAC,QAAQ,EAAE,EAAE;YACjB,OAAO,IAAI,CAAC,IAAc,CAAC;SAC9B;IACL,CAAC;IAED,WAAW;QACP,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;IACtC,CAAC;IAED,eAAe;QACX,IAAI,IAAI,CAAC,WAAW,EAAE,EAAE;YACpB,OAAO,IAAI,CAAC,IAAiB,CAAC;SACjC;IACL,CAAC;IAED,UAAU;QACN,OAAO,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,CAAC;IACrC,CAAC;IAED,WAAW;QACP,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;IACtC,CAAC;IAED,aAAa;QACT,OAAO,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC;IACxC,CAAC;IAED,mBAAmB;QACf,OAAO,IAAI,CAAC,OAAO,CAAC,mBAAmB,EAAE,CAAC;IAC9C,CAAC;IAED,SAAS;QACL,OAAO,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC;IACpC,CAAC;IAED,aAAa;QACT,OAAO,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC;IACxC,CAAC;IAED,gBAAgB;QACZ,OAAO,IAAI,CAAC,OAAO,CAAC,gBAAgB,EAAE,CAAC;IAC3C,CAAC;IAED,cAAc;QACV,OAAO,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC;IACzC,CAAC;IAED,OAAO;QACH,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;IAClC,CAAC;IAED,cAAc;QACV,OAAO,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC;IACzC,CAAC;IAED,kBAAkB;QACd,OAAO,IAAI,CAAC,OAAO,CAAC,kBAAkB,EAAE,CAAC;IAC7C,CAAC;IAED,mBAAmB;QACf,OAAO,IAAI,CAAC,OAAO,CAAC,mBAAmB,EAAE,CAAC;IAC9C,CAAC;IAED,cAAc;QACV,IAAI,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC;QAC1C,yDAAyD;QACzD,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC;QACxC,IAAI,CAAA,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,KAAK,CAAC,SAAS,KAAI,KAAK,IAAI,IAAI,CAAC,KAAK,EAAE;YAChD,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM,CAAC,KAAK,CAAC;YACnC,MAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;YAChD,IAAI,GAAG,EAAE;gBACL,KAAK,IAAI,GAAG,CAAC,KAAK,CAAC;aACtB;SACJ;QACD,OAAO,KAAK,CAAC;IACjB,CAAC;IAED,eAAe;QACX,OAAO,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;IAC1C,CAAC;IAED,uBAAuB;QACnB,OAAO,IAAI,CAAC,OAAO,CAAC,uBAAuB,EAAE,CAAC;IAClD,CAAC;IAED,QAAQ;QACJ,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;IACnC,CAAC;IAED,OAAO;QACH,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;IAClC,CAAC;IAED,qBAAqB,CAAC,eAAwB,IAAI;QAC9C,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,qBAAqB,EAAE,CAAC;QAC9C,IAAI,YAAY,IAAI,IAAI,CAAC,KAAK,EAAE;YAC5B,EAAE,IAAI,IAAI,CAAC,KAAK,CAAC,qBAAqB,EAAE,CAAC;SAC5C;QACD,OAAO,EAAE,CAAC;IACd,CAAC;IAED,QAAQ;;QACJ,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE;YACtB,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAkB,CAAC;YAC1C,OAAO,MAAA,IAAI,CAAC,KAAK,CAAC,KAAK,mCAAI,CAAC,CAAC;SAChC;QACD,OAAO,CAAC,CAAC;IACb,CAAC;IAED,YAAY;QACR,MAAM,UAAU,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QACxC,IAAI,UAAU,IAAI,mBAAmB,IAAI,UAAU;YAC/C,OAAO,UAAU,CAAC,iBAAiB,CAAC;IAC5C,CAAC;IAED,cAAc;QACV,IAAI,CAAC,IAAI,CAAC,cAAc;YAAE,OAAO,KAAK,CAAC;QACvC,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QAChC,IAAI,CAAC,MAAM;YAAE,OAAO,KAAK,CAAC;QAC1B,OAAO,MAAM,CAAC,OAAO,CAAC,IAAI,KAAK,SAAS,CAAC;IAC7C,CAAC;IAED;;;OAGG;IACH,cAAc,CAAC,KAAa,EAAE,IAAY;QACtC,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;YAAE,OAAO;QAElC,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QAChC,IAAI,CAAC,MAAM;YAAE,OAAO;QAEpB,IAAI,IAAI,CAAC,mBAAmB,EAAE,EAAE;YAC5B,MAAM,MAAM,GAAG,IAAI,CAAC;YAEpB,OAAO,iBAAO,CAAC,gBAAgB,CAAC,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SACrE;aAAM,IAAI,IAAI,CAAC,qBAAqB,EAAE,EAAE;YACrC,MAAM,MAAM,GAAG,KAAK,CAAC;YACrB,MAAM,EAAE,GAAG,CAAC,KAAK,CAAC;YAElB,OAAO,iBAAO,CAAC,gBAAgB,CAAC,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,CAAA;SACzE;IACL,CAAC;IAED,kCAAkC;IAC5B,WAAW,CAAC,MAAgB,EAAE,OAA2B;;;YAC3D,+EAA+E;YAC/E,MAAM,YAAY,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAE9C,IAAI,IAAI,CAAC,QAAQ,EAAE,EAAE;gBACjB,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC;gBACrB,IAAI,MAAA,MAAA,OAAO,CAAC,MAAM,0CAAE,QAAQ,0CAAE,OAAO,EAAE;oBACnC,OAAO,CAAC,eAAe,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC;iBAC9D;gBAED,OAAO,MAAM,MAAM,CAAC,iBAAiB,CAAC,OAAO,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC;aACrE;YAED,IAAI,IAAI,CAAC,mBAAmB,EAAE,EAAE;gBAC5B,OAAO,MAAM,MAAM,CAAC,sBAAsB,CAAC,IAAI,EAAE,OAA8B,CAAC,CAAC;aACpF;YAED,IAAI,IAAI,CAAC,qBAAqB,EAAE,EAAE;gBAC9B,OAAO,MAAM,MAAM,CAAC,wBAAwB,CAAC,IAAI,EAAE,OAA8B,CAAC,CAAC;aACtF;;KACJ;IAED;OACG;IACH,2BAA2B;QACvB,IAAI,IAAI,CAAC,cAAc,EAAE;YAAE,OAAO,IAAI,CAAC;QACvC,IAAI,IAAI,CAAC,aAAa,EAAE;YAAE,OAAO,IAAI,CAAC;QACtC,IAAI,IAAI,CAAC,qBAAqB,EAAE;YAAE,OAAO,IAAI,CAAC;QAE9C,OAAO,KAAK,CAAC;IACjB,CAAC;CACJ;AAv3CD,0BAu3CC;;;;;AC76CD,6DAA0D;AAkB1D,MAAa,kBAAmB,SAAQ,yBAAwB;IAC5D,OAAO;QACH,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;IAC1B,CAAC;IACD,OAAO;QACH,OAAQ,IAAI,CAAC,IAAI,CAAC,IAAsC,CAAC;IAC7D,CAAC;IAED,cAAc;QACV,+CAA+C;QAC/C,OAAO,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC,KAAK,KAAK,OAAO,CAAC,CAAC,CAAC,6BAA6B;IAClH,CAAC;IAED;;OAEG;IACH,OAAO;QACH,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,OAAO,CAAC;IACtC,CAAC;IAED;;OAEG;IACH,cAAc;QACV,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC,KAAK,CAAC;QACnC,OAAO,IAAI,CAAC,OAAO,EAAE,IAAI,KAAK,KAAK,SAAS,CAAC;IACjD,CAAC;IAED,YAAY;;QACR,OAAO,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAA,MAAA,IAAI,CAAC,OAAO,EAAE,CAAC,KAAK,0CAAE,GAAG,CAAA,CAAC;IACzD,CAAC;IAED,iBAAiB;;QACb,OAAO,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAA,MAAA,IAAI,CAAC,OAAO,EAAE,CAAC,KAAK,0CAAE,GAAG,mCAAI,KAAK,CAAC,CAAC;IACnE,CAAC;IAED,QAAQ;QACJ,OAAO,IAAI,CAAC,aAAa,EAAE,GAAG,CAAC,CAAC;IACpC,CAAC;IAED,SAAS;;QACL,OAAO,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,MAAA,MAAA,IAAI,CAAC,OAAO,EAAE,CAAC,MAAM,0CAAE,KAAK,CAAC,MAAM,mCAAI,CAAC,CAAC,GAAG,CAAC,CAAC;IACnF,CAAC;IAED,cAAc;QACV,OAAO,IAAI,CAAC,QAAQ,EAAE,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC,QAAQ,KAAK,QAAQ,CAAC;IACnE,CAAC;IAED,QAAQ;QACJ,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,QAAQ,CAAC;IACvC,CAAC;IAED,cAAc;QACV,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC;IAC7C,CAAC;IAED,oBAAoB;QAChB,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;YAAE,OAAO,KAAK,CAAC;QACzC,MAAM,YAAY,GAAG,IAAI,CAAC,IAAoB,CAAC;QAC/C,OAAO,YAAY,CAAC,IAAI,CAAC,IAAI,KAAK,QAAQ,CAAC;IAC/C,CAAC;IAED,mBAAmB;QACf,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;YAAE,OAAO,KAAK,CAAC;QACzC,MAAM,YAAY,GAAG,IAAI,CAAC,IAAoB,CAAC;QAC/C,OAAO,YAAY,CAAC,IAAI,CAAC,IAAI,KAAK,OAAO,CAAC;IAC9C,CAAC;IAED,SAAS;QACL,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,SAAS,CAAC;IACxC,CAAC;IAED,SAAS;QACL,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,SAAS,CAAC;IACxC,CAAC;IAED,MAAM;QACF,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,MAAM,CAAC;IACrC,CAAC;IAED,WAAW;QACP,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,WAAW,CAAC;IAC1C,CAAC;IAED,SAAS;QACL,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,SAAS,CAAC;IACxC,CAAC;IAED,UAAU;QACN,OAAO,IAAI,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;IAClD,CAAC;IAED,aAAa;QACT,OAAO,IAAI,CAAC,OAAO,EAAE,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC,QAAQ,KAAK,QAAQ,CAAC;IAClE,CAAC;IAED,mBAAmB;;QACf,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;YAAE,OAAO,KAAK,CAAC;QACxC,OAAO,CAAA,MAAA,MAAA,IAAI,CAAC,OAAO,EAAE,0CAAE,MAAM,0CAAE,IAAI,MAAK,QAAQ,CAAC;IACrD,CAAC;IAED,qBAAqB;;QACjB,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;YAAE,OAAO,KAAK,CAAC;QACxC,OAAO,CAAA,MAAA,MAAA,IAAI,CAAC,OAAO,EAAE,0CAAE,MAAM,0CAAE,IAAI,MAAK,UAAU,CAAC;IACvD,CAAC;IAED,WAAW;QACP,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;YAAE,OAAO,KAAK,CAAC;QAClC,mFAAmF;QACnF,MAAM,SAAS,GAAG,IAAI,CAAC,OAAO,EAAwB,CAAC;QACvD,OAAO,SAAS,CAAC,IAAI,KAAK,MAAM,CAAC;IACrC,CAAC;IAED,eAAe;QACX,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;YAAE,OAAO,KAAK,CAAC;QAClC,mFAAmF;QACnF,MAAM,SAAS,GAAG,IAAI,CAAC,OAAO,EAAwB,CAAC;QACvD,OAAO,SAAS,CAAC,IAAI,KAAK,UAAU,CAAC;IACzC,CAAC;IAED,cAAc;QACV,OAAO,IAAI,CAAC,QAAQ,EAAE,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC,QAAQ,KAAK,OAAO,CAAC;IAClE,CAAC;IAED,OAAO;QACH,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,OAAO,CAAC;IACtC,CAAC;IAED,aAAa;QACT,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC;IAC7C,CAAC;IAED,aAAa;QACT,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC;IAC7C,CAAC;IAED,SAAS;QACL,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,SAAS,CAAC;IACxC,CAAC;IAED,cAAc;QACV,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,eAAe,CAAC;IAC9C,CAAC;IAED,aAAa;QACT,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,QAAQ,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC,QAAQ,KAAK,OAAO,CAAC;IAC9E,CAAC;IAED,QAAQ;QACJ,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,QAAQ,CAAC;IACvC,CAAC;IAED,WAAW;QACP,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,WAAW,CAAC;IAC1C,CAAC;IAED,UAAU;;QACN,OAAO,CAAA,MAAA,IAAI,CAAC,OAAO,EAAE,CAAC,UAAU,0CAAE,QAAQ,KAAI,KAAK,CAAC;IACxD,CAAC;IAED,WAAW;QACP,OAAO,IAAI,CAAC,QAAQ,EAAE,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC,QAAQ,KAAK,WAAW,CAAC;IACtE,CAAC;IAED,KAAK;QACD,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,KAAK,CAAC;IACpC,CAAC;IAED,WAAW;QACP,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,WAAW,CAAC;IAC1C,CAAC;IAED,KAAK;QACD,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;IACzB,CAAC;IAED,aAAa;;QACT,OAAO,MAAA,MAAA,IAAI,CAAC,OAAO,EAAE,CAAC,WAAW,0CAAE,MAAM,mCAAI,EAAE,CAAC;IACpD,CAAC;IAED,mBAAmB;;QACf,OAAO,MAAA,MAAA,IAAI,CAAC,OAAO,EAAE,CAAC,UAAU,0CAAE,iBAAiB,mCAAI,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC;IAC3F,CAAC;IAED,SAAS;;QACL,OAAO,CAAA,MAAA,IAAI,CAAC,OAAO,EAAE,CAAC,UAAU,0CAAE,MAAM,KAAI,CAAC,CAAC;IAClD,CAAC;IAED,aAAa;;QACT,OAAO,MAAA,MAAA,MAAA,IAAI,CAAC,OAAO,EAAE,0CAAE,KAAK,0CAAE,KAAK,mCAAI,CAAC,CAAC;IAC7C,CAAC;IAED,gBAAgB;QACZ,qBAAqB;QACrB,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC,KAAK,IAAI,EAAE,CAAC;QACrE,OAAO,EAAE,IAAI,EAAE,IAAI,aAAJ,IAAI,cAAJ,IAAI,GAAI,CAAC,EAAE,WAAW,EAAE,WAAW,aAAX,WAAW,cAAX,WAAW,GAAI,CAAC,EAAE,IAAI,EAAE,IAAI,aAAJ,IAAI,cAAJ,IAAI,GAAI,CAAC,EAAE,IAAI,EAAE,IAAI,aAAJ,IAAI,cAAJ,IAAI,GAAI,CAAC,EAAE,CAAC;IAChG,CAAC;IAED,OAAO;QACH,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;IAC1B,CAAC;IAED,cAAc;;QACV,OAAO,MAAA,MAAA,IAAI,CAAC,OAAO,EAAE,0CAAE,OAAO,mCAAI,CAAC,CAAC;IACxC,CAAC;IAED,OAAO;QACH,OAAO,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;IAC/B,CAAC;IAED,OAAO;QACH,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAAE,OAAO,SAAS,CAAC;QAEvC,4CAA4C;QAC5C,MAAM,MAAM,GAAG;YACX,MAAM,EAAE;gBACJ,KAAK,EAAE,CAAC;gBACR,UAAU,EAAE,EAAE;aACjB;YACD,MAAM,EAAE;gBACJ,KAAK,EAAE,CAAC;gBACR,UAAU,EAAE,EAAE;aACjB;YACD,eAAe,EAAE;gBACb,KAAK,EAAE,IAAI,CAAC,SAAS,EAAE;gBACvB,UAAU,EAAE,EAAE;aACjB;YACD,QAAQ,EAAE;gBACN,KAAK,EAAE,IAAI,CAAC,SAAS,EAAE;gBACvB,UAAU,EAAE,EAAE;aACjB;SACJ,CAAC;QAEF,IAAI,IAAI,CAAC,WAAW,EAAE,EAAE;YACpB;;;;;;;eAOG;YACH,MAAM,IAAI,GAAkE,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;YAChG,IAAI,IAAI,EAAE;gBACN,KAAK,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;oBACzC,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC;oBAClC,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,UAAU,GAAG,GAAG,CAAC;iBACpC;aACJ;SACJ;QAED,OAAO,MAAM,CAAC;IAClB,CAAC;IAED,WAAW;;QACP,OAAO,CAAA,MAAA,MAAA,IAAI,CAAC,OAAO,EAAE,0CAAE,UAAU,0CAAE,QAAQ,KAAI,CAAC,CAAC;IACrD,CAAC;IAED,QAAQ;QACJ,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,QAAQ,CAAC;IACvC,CAAC;IAED,SAAS;QACL,OAAO,IAAI,CAAC,OAAO,EAAE,CAAC,MAAM,CAAC;IACjC,CAAC;IAED,oBAAoB;;QAChB,OAAO,MAAA,IAAI,CAAC,OAAO,EAAE,CAAC,MAAM,0CAAE,GAAG,CAAC;IACtC,CAAC;IAED,iBAAiB;;QACb,OAAO,MAAA,MAAA,IAAI,CAAC,OAAO,EAAE,CAAC,MAAM,0CAAE,KAAK,0CAAE,SAAS,CAAC;IACnD,CAAC;IAED,cAAc;;QACV,OAAO,MAAA,IAAI,CAAC,OAAO,EAAE,CAAC,MAAM,0CAAE,KAAK,CAAC;IACxC,CAAC;IAED,kBAAkB;;QACd,OAAO,MAAA,IAAI,CAAC,OAAO,EAAE,CAAC,MAAM,0CAAE,SAAS,CAAC;IAC5C,CAAC;IAED,mBAAmB;;QACf,OAAO,MAAA,IAAI,CAAC,OAAO,EAAE,CAAC,MAAM,0CAAE,UAAU,CAAC;IAC7C,CAAC;IAED,cAAc;;QACV,OAAO,MAAA,MAAA,IAAI,CAAC,OAAO,EAAE,CAAC,MAAM,0CAAE,KAAK,0CAAE,KAAK,CAAC;IAC/C,CAAC;IAED,eAAe;;QACX,OAAO,CAAA,MAAA,IAAI,CAAC,OAAO,EAAE,CAAC,MAAM,0CAAE,aAAa,KAAI,EAAE,CAAC;IACtD,CAAC;IAED,uBAAuB;;QACnB,IAAI,MAAA,IAAI,CAAC,OAAO,EAAE,CAAC,MAAM,0CAAE,IAAI;YAAE,OAAO,oBAAoB,CAAC;QAC7D,OAAO,SAAS,CAAC;IACrB,CAAC;IAED,QAAQ;QACJ,OAAO,IAAI,CAAC,OAAO,EAAE,CAAC,KAAK,IAAI,CAAC,CAAC;IACrC,CAAC;IAED,OAAO;QACH,OAAO,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,IAAI,CAAC,CAAC;IACpC,CAAC;IAED,qBAAqB;;QACjB,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;YAAE,OAAO,CAAC,CAAC;QACrC,MAAM,IAAI,GAAG,MAAA,MAAA,MAAA,IAAI,CAAC,OAAO,EAAE,0CAAE,KAAK,0CAAE,EAAE,CAAC,KAAK,mCAAI,GAAG,CAAC;QACpD,OAAO,MAAM,CAAC,IAAI,CAAC,CAAC;IACxB,CAAC;IAED,QAAQ;;QACJ,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE;YACtB,OAAO,MAAA,MAAA,IAAI,CAAC,OAAO,EAAE,CAAC,KAAK,0CAAE,KAAK,mCAAI,CAAC,CAAC;SAC3C;QACD,OAAO,CAAC,CAAC;IACb,CAAC;IAED,aAAa;QACT,IAAI,YAAY,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI;YAC9B,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;IACzC,CAAC;IAED,QAAQ;QACJ,IAAI,CAAC,CAAC,OAAO,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;YAAE,OAAO;QAEzC,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,eAAe;YAClC,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAA0B,CAAC;QAErD,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,OAAO;YAC1B,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAmB,CAAC;QAE9C,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,QAAQ;YAC3B,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAwB,CAAC;IACvD,CAAC;IAED,cAAc;;QACV,OAAO,CAAA,MAAA,MAAA,IAAI,CAAC,OAAO,EAAE,CAAC,MAAM,0CAAE,OAAO,0CAAE,IAAI,MAAK,SAAS,CAAC;IAC9D,CAAC;IAED,OAAO;QACH,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;QAC5B,OAAO,CAAC,CAAC,IAAI,CAAA;IACjB,CAAC;CACJ;AA1VD,gDA0VC;;;;;;;;;;;;;;AC5WD,wCAAqC;AAIrC;;GAEG;AACH,MAAa,YAAa,SAAQ,SAAsB;IAGpD,YAAY,GAAG,IAAI;QACf,KAAK,CAAC,GAAG,IAAI,CAAC,CAAC;QACf,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;IACzB,CAAC;IAED,gBAAgB;QACZ,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,EAAE,CAAC;IACjC,CAAC;IAED;;;OAGG;IACH,MAAM,KAAK,cAAc;QACrB,OAAO,WAAW,CAAC,KAAK,CAAC,cAAc,EAAE;YACrC,OAAO,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,MAAM,CAAC;YACjC,KAAK,EAAE,GAAG;YACV,MAAM,EAAE,GAAG;YACX,IAAI,EAAE,CAAC,EAAE,WAAW,EAAE,OAAO,EAAE,eAAe,EAAE,YAAY,EAAE,CAAC;SAClE,CAAC,CAAC;IACP,CAAC;IAED,IAAI,QAAQ;QACR,MAAM,IAAI,GAAG,0CAA0C,CAAC;QACxD,OAAO,GAAG,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,OAAO,CAAC;IAChD,CAAC;IAED,kDAAkD;IAElD;;;OAGG;IACH,OAAO;QACH,MAAM,IAAI,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;QAC7B,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC;QAE3B,IAAI,QAAQ,CAAC,MAAM,EAAE;YACjB,IAAI;gBACA,MAAM,EAAE,MAAM,EAAE,GAAG,QAAQ,CAAC;gBAC5B,IAAI,MAAM,CAAC,GAAG,KAAK,CAAC;oBAAE,OAAO,MAAM,CAAC,GAAG,CAAC;gBACxC,IAAI,MAAM,CAAC,KAAK,KAAK,CAAC;oBAAE,OAAO,MAAM,CAAC,KAAK,CAAC;gBAC5C,IAAI,MAAM,CAAC,MAAM,EAAE;oBACf,IAAI,MAAM,CAAC,MAAM,CAAC,GAAG,KAAK,CAAC;wBAAE,OAAO,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC;oBACtD,IAAI,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC;wBAAE,OAAO,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,GAAG,CAAC;iBAC/D;gBACD,IAAI,MAAM,CAAC,KAAK,EAAE;oBACd,IAAI,MAAM,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC;wBAAE,OAAO,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC;iBACvD;aACJ;YAAC,OAAO,CAAC,EAAE;gBACR,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;aACpB;SACJ;QAED,IAAI,QAAQ,CAAC,UAAU,EAAE;YACrB,IAAI;gBACA,MAAM,IAAI,GAAG,QAAQ,CAAC,UAAU,CAAC;gBACjC,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC;oBAAE,OAAO,IAAI,CAAC,MAAM,CAAC;gBAC1C,IAAI,IAAI,CAAC,QAAQ,KAAK,CAAC;oBAAE,OAAO,IAAI,CAAC,QAAQ,CAAC;gBAC9C,IAAI,IAAI,CAAC,IAAI,KAAK,CAAC;oBAAE,OAAO,IAAI,CAAC,IAAI,CAAC;aACzC;YAAC,OAAO,CAAC,EAAE;gBACR,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;aAClB;SACJ;QAED,IAAI,CAAC,QAAQ,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC;QAC5B,MAAM,KAAK,GAAG,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACtC,MAAM,CAAC,UAAU,EAAE,UAAU,EAAE,SAAS,CAAC,GAAG,KAAK,CAAC,MAAM,CACpD,CAAC,KAA8C,EAAE,IAAa,EAAE,EAAE;YAC9D,IAAI,IAAI,CAAC,IAAI,KAAK,MAAM;gBAAE,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACnD,IAAI,IAAI,CAAC,IAAI,KAAK,cAAc,IAAI,MAAM,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,QAAQ;gBAAE,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC3H,IAAI,IAAI,CAAC,IAAI,KAAK,cAAc,IAAI,MAAM,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,OAAO;gBAAE,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC1H,OAAO,KAAK,CAAC;QACjB,CAAC,EACD,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CACf,CAAC;QACF,IAAI,CAAC,YAAY,CAAC,GAAG,UAAU,CAAC;QAChC,IAAI,CAAC,YAAY,CAAC,GAAG,UAAU,CAAC;QAChC,IAAI,CAAC,WAAW,CAAC,GAAG,SAAS,CAAC;QAC9B,uEAAuE;QACvE,wDAAwD;QACxD,IAAI,CAAC,uBAAuB,CAAC,GAAG,IAAI,CAAC;QACrC,IAAI,CAAC,cAAc,CAAC,GAAG,IAAI,CAAC,yBAAyB,EAAE,CAAC;QAExD,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,yBAAyB;QACrB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK;YAAE,OAAO,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC;QACrD,MAAM,YAAY,GAAG,iBAAO,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC,CAAC;QAE3E,MAAM,qBAAqB,GAAG,EAAE,CAAC;QACjC,KAAK,MAAM,CAAC,EAAE,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE;YACpD,0DAA0D;YAC1D,oDAAoD;YACpD,MAAM,GAAG,GAAG,KAAK,CAAC,IAAI,IAAI,EAAE,CAAC;YAC7B,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,IAAI,KAAK,CAAC,IAAI,CAAC;YACxC,qBAAqB,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;SACtC;QAED,OAAO,qBAAqB,CAAC;IACjC,CAAC;IAED,kDAAkD;IAElD;;;OAGG;IACH,iBAAiB,CAAC,IAAI;QAClB,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;QAC9B,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,QAAQ,EAAE;YAC7B,qEAAqE;YACrE,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,KAAK,EAAE,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;YAC1D,qEAAqE;YACrE,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,KAAK,EAAE,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;SACrD;QACD,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAChE,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC7D,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC/D,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAE/D,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAE3D,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACjE,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACjE,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAEnE,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACnE,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAE3E,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAE5E,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,EAAE;YACnC,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;YAC1D,MAAM,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC;YAChC,MAAM,KAAK,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC;YAC1B,KAAK,CAAC,MAAM,EAAE,CAAC;YACf,IAAI,GAAG,EAAE;gBACL,IAAI,KAAK,CAAC,EAAE,CAAC,UAAU,CAAC;oBAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;;oBAC/C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,KAAK,GAAG,CAAC,CAAC;aACvE;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,CAAC;IAChC,CAAC;IAED,WAAW,CAAC,KAAK;QACb,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,OAAO,KAAK,CAAC;IACjB,CAAC;IAEK,OAAO,CAAC,KAAK;;;YACf,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,KAAK,CAAC,eAAe,EAAE,CAAC;YACxB,IAAI,IAAI,CAAC;YACT,IAAI;gBACA,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC;gBAC5D,IAAI,IAAI,CAAC,IAAI,KAAK,MAAM,EAAE;oBACtB,OAAO,CAAC,GAAG,CAAC,mCAAmC,CAAC,CAAC;iBACpD;aACJ;YAAC,OAAO,GAAG,EAAE;gBACV,OAAO,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;aAC3C;YACD,IAAI,IAAI,CAAC;YACT,oCAAoC;YACpC,IAAI,IAAI,CAAC,IAAI,EAAE;gBACX,YAAY;gBACZ,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,MAAK,MAAA,IAAI,CAAC,IAAI,CAAC,KAAK,0CAAE,GAAG,CAAA,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,KAAK,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE;oBAC/F,OAAO,CAAC,GAAG,CAAC,wCAAwC,CAAC,CAAC;oBACtD,aAAa;oBACb,EAAE,CAAC,aAAa,CAAC,KAAK,CAAC,oCAAoC,CAAC,CAAC;iBAChE;gBACD,IAAI,GAAG,IAAI,CAAC;aACf;iBAAM,IAAI,IAAI,CAAC,IAAI,EAAE;gBAClB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;gBAClB,kCAAkC;gBAClC,YAAY;gBACZ,IAAI,GAAG,MAAM,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;aAChE;iBAAM;gBACH,+BAA+B;gBAC/B,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;aAClC;YAED,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;KACxC;IAED,sBAAsB,CAAC,UAAU,EAAE,MAAM;QACrC,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,UAAU,KAAK,UAAU,CAAC,CAAC;QACjE,OAAO,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;IAClC,CAAC;IAED,QAAQ,CAAC,KAAK;QACV,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,OAAO,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC;IACpE,CAAC;IAEK,gBAAgB,CAAC,KAAK;;YACxB,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC;QACpC,CAAC;KAAA;IAEK,WAAW,CAAC,KAAK;;YACnB,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;YAC1D,IAAI,IAAI,EAAE;gBACN,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;aAC3B;QACL,CAAC;KAAA;IAEK,aAAa,CAAC,KAAK;;YACrB,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC;QACpC,CAAC;KAAA;IAEK,gBAAgB,CAAC,KAAK;;YACxB,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,KAAK,GAAG,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,KAAK,CAAC;YAChD,IAAI,KAAK,IAAI,CAAC;gBAAE,MAAM,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACzD,CAAC;KAAA;IAEK,kBAAkB,CAAC,KAAK;;YAC1B,MAAM,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;QACzC,CAAC;KAAA;IAEK,iBAAiB,CAAC,KAAK;;YACzB,MAAM,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;QACzD,CAAC;KAAA;IAEK,eAAe,CAAC,KAAK;;YACvB,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,IAAI,GAAG,cAAc,CAAC;YAC5B,MAAM,QAAQ,GAAG;gBACb,IAAI,EAAE,OAAO,iBAAO,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;gBAClC,IAAI,EAAE,IAAI;gBACV,IAAI,EAAE,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC;aACvD,CAAC;YACF,QAAQ,CAAC,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC;YAC9B,aAAa;YACb,MAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YACnD,MAAM,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/C,CAAC;KAAA;IAEK,aAAa,CAAC,KAAK;;YACrB,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;QACjC,CAAC;KAAA;IAEK,aAAa,CAAC,KAAK;;YACrB,MAAM,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;QACzC,CAAC;KAAA;IAEK,YAAY,CAAC,KAAK;;YACpB,MAAM,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;QACpD,CAAC;KAAA;IAEK,aAAa,CAAC,KAAK;;YACrB,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,IAAI,GAAG,MAAM,CAAC;YACpB,MAAM,QAAQ,GAAG;gBACb,IAAI,EAAE,OAAO,iBAAO,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;gBAClC,IAAI,EAAE,IAAI;gBACV,IAAI,EAAE,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;aAC/C,CAAC;YACF,aAAa;YACb,MAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YACnD,MAAM,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/C,CAAC;KAAA;IAEK,kBAAkB,CAAC,KAAK;;YACzB,KAAK,CAAC,cAAc,EAAE,CAAC;YAExB,MAAM,aAAa,GAAG,MAAM,iBAAO,CAAC,eAAe,EAAE,CAAC;YACtD,IAAI,CAAC,aAAa;gBAAE,OAAO;YAE3B,MAAM,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;QAC1D,CAAC;KAAA;IAED;;OAEG;IACH,eAAe;QACX,OAAO,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC;IAC5D,CAAC;IAED;;;;;;OAMG;IACK,qBAAqB;QACzB,IAAI,IAAI,CAAC,MAAM,KAAK,WAAW,CAAC,aAAa,CAAC,QAAQ,IAAI,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,SAAS,EAAE;YAC5F,OAAO,CAAC,IAAI,CAAC,wBAAwB,IAAI,CAAC,MAAM,CAAC,IAAI,0GAA0G,CAAC,CAAC;YACjK,oHAAoH;YACpH,IAAI,CAAC,MAAM,GAAG,WAAW,CAAC,aAAa,CAAC,MAAM,CAAC;SAClD;IACL,CAAC;IAED;;OAEG;IACG,OAAO,CAAC,KAAK,GAAG,KAAK,EAAE,OAAO,GAAG,EAAE;;;;;YACrC,6GAA6G;YAC7G,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAE7B,IAAI,CAAC,oBAAoB,EAAE,CAAC;YAC5B,MAAM,OAAM,OAAO,YAAC,KAAK,EAAE,OAAO,CAAC,CAAC;YACpC,IAAI,CAAC,uBAAuB,EAAE,CAAC;QACnC,CAAC;KAAA;IAED;;OAEG;IACH,uBAAuB;QACnB,MAAM,UAAU,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QAC1C,IAAI,UAAU,CAAC,MAAM,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,EAAE;YAC3C,UAAU,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;SAC9C;IACL,CAAC;IAED;;OAEG;IACH,oBAAoB;QAChB,MAAM,UAAU,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QAC1C,IAAI,UAAU,CAAC,MAAM,EAAE;YACnB,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;SAC/C;IACL,CAAC;CACJ;AA9UD,oCA8UC;;;;;;;;;;;;;;ACrVD;;;;;;GAMG;AACH,SAAsB,eAAe,CAAC,IAAI,EAAE,IAAI;;QAC5C,MAAM,OAAO,GAAG,mCAAmC,IAAI,CAAC,IAAI,KAAK,CAAC;QAClE,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC,CAAC;QACnE,IAAI,CAAC,KAAK,EAAE;YACR,KAAK,GAAG,CAAC,MAAM,KAAK,CAAC,MAAM,CACvB;gBACI,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,IAAI,EAAE,QAAQ;gBACd,GAAG,EAAE,IAAI,CAAC,GAAG;gBACb,OAAO,EAAE,OAAO;gBAChB,KAAK,EAAE,EAAE,uBAAuB,EAAE,IAAI,EAAE;aAC3C,EACD,EAAE,YAAY,EAAE,KAAK,EAAE,CAC1B,CAAU,CAAC;SACf;QACD,IAAI,KAAK;YAAE,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;IACxD,CAAC;CAAA;AAhBD,0CAgBC;AAED;;;;;GAKG;AACH,SAAgB,aAAa,CAAC,QAAQ;IAClC,MAAM,OAAO,GAAG,WAAW,CAAC,UAAU,EAAE,CAAC;IACzC,IAAI,KAAK,CAAC;IACV,IAAI,OAAO,CAAC,KAAK;QAAE,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IAC7D,IAAI,CAAC,KAAK;QAAE,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IACnD,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IACzE,IAAI,CAAC,IAAI,EAAE;QACP,aAAa;QACb,OAAO,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,qDAAqD,QAAQ,EAAE,CAAC,CAAC;KACjG;IAED,OAAO,IAAI,CAAC,UAAU,EAAE,CAAC;AAC7B,CAAC;AAZD,sCAYC;;;;AC3CD,oEAAiE;AACjE,mCAAqC;AAErC,kDAAkD;AAClD,kDAAkD;AAClD,kDAAkD;AAGlD,oBAAY,CAAC,aAAa,EAAE,CAAC;AAC7B,mCAAgB,CAAC,eAAe,EAAE,CAAC;;;;;;;;;;;;;;ACTnC,yDAAsD;AACtD,gEAA6D;AAC7D,0DAAuD;AACvD,4DAAyD;AACzD,0DAAqD;AAMrD,MAAa,QAAQ;IASjB,sBAAsB;IACf,MAAM,CAAO,cAAc;;YAC9B,IAAI,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,mCAAgB,CAAC,WAAW,EAAE,mCAAgB,CAAC,gBAAgB,CAAC,CAAC;YACxG,IAAI,cAAc,KAAK,SAAS,IAAI,cAAc,KAAK,IAAI,EAAE;gBACzD,cAAc,GAAG,mCAAgB,CAAC,UAAU,CAAC;aAChD;YAED,MAAM,UAAU,GAAG,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,EAAE,aAAa,EAAE,EAAE,EAAE;gBAChE,mFAAmF;gBACnF,OAAO,IAAI,CAAC,cAAc,CAAC,aAAa,EAAE,cAAc,CAAC,KAAK,CAAC,CAAC;YACpE,CAAC,CAAC,CAAC;YAEH,oCAAoC;YACpC,IAAI,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE;gBACzB,OAAO;aACV;YAED,MAAM,qBAAqB,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,4BAA4B,CAAC,CAAC;YAC/E,MAAM,sBAAsB,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,6BAA6B,CAAC,CAAC;YACjF,MAAM,wBAAwB,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,+BAA+B,CAAC,CAAC;YACrF,MAAM,2BAA2B,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,kCAAkC,CAAC,CAAC;YAC3F,MAAM,sBAAsB,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,6BAA6B,CAAC,CAAC;YACjF,MAAM,qBAAqB,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,8BAA8B,CAAC,CAAC;YAEjF,MAAM,CAAC,GAAG,IAAI,MAAM,CAAC;gBACjB,KAAK,EAAE,qBAAqB;gBAC5B,OAAO,EACH,8CAA8C,sBAAsB,OAAO;oBAC3E,oCAAoC,wBAAwB,UAAU;oBACtE,MAAM,2BAA2B,MAAM;oBACvC,0BAA0B,sBAAsB,OAAO;gBAC3D,OAAO,EAAE;oBACL,EAAE,EAAE;wBACA,KAAK,EAAE,qBAAqB;wBAC5B,QAAQ,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC;qBAC3C;iBACJ;gBACD,OAAO,EAAE,IAAI;aAChB,CAAC,CAAC;YACH,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACnB,CAAC;KAAA;IAEO,MAAM,CAAO,OAAO,CAAC,UAA+B;;YACxD,8EAA8E;YAC9E,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;gBACrB,OAAO,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,aAAa,EAAE,CAAC,CAAC,aAAa,CAAC,CAAC;YACjE,CAAC,CAAC,CAAC;YAEH,MAAM,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;YAC1C,MAAM,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;YAE/C,MAAM,qBAAqB,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,4BAA4B,CAAC,CAAC;YAC/E,MAAM,sBAAsB,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,6BAA6B,CAAC,CAAC;YACjF,MAAM,2BAA2B,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,kCAAkC,CAAC,CAAC;YAC3F,MAAM,yBAAyB,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,gCAAgC,CAAC,CAAC;YACvF,MAAM,uBAAuB,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,8BAA8B,CAAC,CAAC;YACnF,MAAM,WAAW,GAAG,IAAI,MAAM,CAAC;gBAC3B,KAAK,EAAE,qBAAqB;gBAC5B,OAAO,EACH,gDAAgD,sBAAsB,OAAO;oBAC7E,MAAM,2BAA2B,MAAM;oBACvC,oCAAoC,yBAAyB,UAAU;gBAC3E,OAAO,EAAE;oBACL,EAAE,EAAE;wBACA,IAAI,EAAE,8BAA8B;wBACpC,KAAK,EAAE,uBAAuB;qBACjC;iBACJ;gBACD,OAAO,EAAE,IAAI;aAChB,CAAC,CAAC;YACH,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAC7B,CAAC;KAAA;IAED;;;;OAIG;IACK,MAAM,CAAO,YAAY,CAAC,IAAU,EAAE,UAA+B;;YACzE,8BAA8B;YAC9B,KAAK,MAAM,EAAE,SAAS,EAAE,IAAI,UAAU,EAAE;gBACpC,MAAM,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;aACjC;QACL,CAAC;KAAA;IAED;;;;OAIG;IACK,MAAM,CAAO,iBAAiB,CAAC,IAAU,EAAE,UAA+B;;YAC9E,iCAAiC;YACjC,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,KAAK,OAAO,IAAI,CAAC,OAAO,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;YAE1I,4CAA4C;YAC5C,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE;gBACtB,KAAK,MAAM,EAAE,SAAS,EAAE,IAAI,UAAU,EAAE;oBACpC,MAAM,SAAS,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;iBAC/C;aACJ;QACL,CAAC;KAAA;IAED,4FAA4F;IAC5F,yBAAyB;IACzB;;;;OAIG;IACI,MAAM,CAAC,cAAc,CAAC,EAAU,EAAE,EAAU;QAC/C,MAAM,EAAE,GAAG,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;QACrD,MAAM,EAAE,GAAG,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;QACrD,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC;QACzC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,EAAE;YACxB,IAAI,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;gBAAE,OAAO,CAAC,CAAC;YAC5B,IAAI,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;gBAAE,OAAO,CAAC,CAAC,CAAC;SAChC;QACD,OAAO,EAAE,CAAC,MAAM,KAAK,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACxE,CAAC;;AA/HL,4BAgIC;AA/HG,iEAAiE;AACzC,mBAAU,GAAwB;IACtD,EAAE,aAAa,EAAE,iCAAe,CAAC,aAAa,EAAE,SAAS,EAAE,IAAI,iCAAe,EAAE,EAAE;IAClF,EAAE,aAAa,EAAE,2BAAY,CAAC,aAAa,EAAE,SAAS,EAAE,IAAI,2BAAY,EAAE,EAAE;IAC5E,EAAE,aAAa,EAAE,6BAAa,CAAC,aAAa,EAAE,SAAS,EAAE,IAAI,6BAAa,EAAE,EAAE;IAC9E,EAAE,aAAa,EAAE,2BAAY,CAAC,aAAa,EAAE,SAAS,EAAE,IAAI,2BAAY,EAAE,EAAE;CAC/E,CAAC;;;;;;;;;;;;;;ACfN;;;;GAIG;AACH,MAAsB,gBAAgB;IAAtC;QAKY,YAAO,GAAY,KAAK,CAAC;IAuZrC,CAAC;IA3YG,IAAW,yBAAyB;QAChC,OAAO,IAAI,IAAI,CAAC,aAAa,EAAE,CAAC;IACpC,CAAC;IACD,IAAW,yBAAyB;QAChC,OAAO,IAAI,IAAI,CAAC,aAAa,EAAE,CAAC;IACpC,CAAC;IAED;;;;OAIG;IACO,KAAK,CAAC,MAAc;QAC1B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC;QAC5B,aAAa;QACb,EAAE,CAAC,aAAa,CAAC,KAAK,CAAC,oCAAoC,MAAM,EAAE,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;IAC9F,CAAC;IAED;;;OAGG;IACU,OAAO,CAAC,IAAU;;YAC3B,sDAAsD;YACtD,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,iCAAiC,CAAC,IAAI,IAAI,CAAC,yBAAyB,OAAO,IAAI,CAAC,yBAAyB,GAAG,CAAC,CAAC;YAC1J,sDAAsD;YACtD,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,sCAAsC,CAAC,EAAE;gBAC9E,SAAS,EAAE,IAAI;aAClB,CAAC,CAAC;YAEH,mFAAmF;YACnF,8CAA8C;YAC9C,MAAM,aAAa,GAA8B,IAAI,GAAG,EAAwB,CAAC;YAEjF,sBAAsB;YACtB,MAAM,IAAI,CAAC,kBAAkB,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;YACnD,IAAI,IAAI,CAAC,OAAO,EAAE;gBACd,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;aAC7C;YACD,MAAM,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;YAC7C,MAAM,IAAI,CAAC,mBAAmB,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;YACpD,IAAI,IAAI,CAAC,OAAO,EAAE;gBACd,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;aAC7C;YAED,uBAAuB;YACvB,MAAM,IAAI,CAAC,mBAAmB,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;YACpD,IAAI,IAAI,CAAC,OAAO,EAAE;gBACd,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;aAC7C;YACD,MAAM,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;YAC9C,MAAM,IAAI,CAAC,oBAAoB,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;YACrD,IAAI,IAAI,CAAC,OAAO,EAAE;gBACd,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;aAC7C;YAED,uBAAuB;YACvB,MAAM,IAAI,CAAC,mBAAmB,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;YACpD,IAAI,IAAI,CAAC,OAAO,EAAE;gBACd,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;aAC7C;YACD,MAAM,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;YAC9C,MAAM,IAAI,CAAC,oBAAoB,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;YACrD,IAAI,IAAI,CAAC,OAAO,EAAE;gBACd,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;aAC7C;YAED,8EAA8E;YAC9E,MAAM,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;YAEhC,MAAM,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,gBAAgB,CAAC,WAAW,EAAE,gBAAgB,CAAC,gBAAgB,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;YAC7G,sDAAsD;YACtD,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,mCAAmC,CAAC,IAAI,IAAI,CAAC,aAAa,GAAG,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;QACpI,CAAC;KAAA;IAED;;;OAGG;IACa,KAAK,CAAC,aAAwC;;YAC1D,KAAK,MAAM,CAAC,MAAM,EAAE,EAAE,UAAU,EAAE,aAAa,EAAE,CAAC,IAAI,aAAa,EAAE;gBACjE,IAAI,aAAa,KAAK,IAAI,EAAE;oBACxB,MAAM,KAAK,GAAG,MAAkB,CAAC;oBACjC,MAAM,KAAK,CAAC,eAAe,CAAC,aAAa,CAAC,CAAC;iBAC9C;gBACD,MAAM,MAAM,CAAC,MAAM,CAAC,UAAU,EAAE,EAAE,YAAY,EAAE,KAAK,EAAE,CAAC,CAAC;aAC5D;QACL,CAAC;KAAA;IAED;;;;OAIG;IACa,aAAa,CAAC,IAAU,EAAE,aAAwC;;YAC9E,uGAAuG;YACvG,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE;gBACrC,IAAI;oBACA,IAAI,CAAC,CAAC,MAAM,IAAI,CAAC,sBAAsB,CAAC,KAAK,CAAC,CAAC,EAAE;wBAC7C,SAAS;qBACZ;oBAED,IAAI,KAAK,CAAC,GAAG,KAAK,kBAAkB,EAAE;wBAClC,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;wBAChC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;qBACtB;oBAED,OAAO,CAAC,GAAG,CAAC,0BAA0B,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC;oBACpD,MAAM,UAAU,GAAG,MAAM,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;oBAEtE,IAAI,eAAe,GAAG,KAAK,CAAC;oBAC5B,UAAU,CAAC,MAAM,GAAG,MAAM,OAAO,CAAC,GAAG;oBACjC,aAAa;oBACb,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAO,KAAK,EAAE,EAAE;wBAClC,IAAI,aAAa,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE;4BAChC,OAAO,KAAK,CAAC;yBAChB;wBAED,IAAI,eAAe,GAAG,MAAM,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;wBACnE,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,EAAE;4BACjC,eAAe,GAAG,IAAI,CAAC;4BACvB,eAAe,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC;4BAEnC,MAAM,QAAQ,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC;4BAClC,QAAQ,CAAC,SAAS,GAAG,MAAM,WAAW,CAAC,KAAK,CAAC,SAAS,EAAE,eAAe,EAAE;gCACrE,YAAY,EAAE,KAAK;gCACnB,OAAO,EAAE,KAAK;6BACjB,CAAC,CAAC;4BACH,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;4BACtB,OAAO,QAAQ,CAAC;yBACnB;6BAAM;4BACH,OAAO,KAAK,CAAC;yBAChB;oBACL,CAAC,CAAA,CAAC,CACL,CAAC;oBACF,IAAI,KAAK,CAAC,GAAG,KAAK,kBAAkB,EAAE;wBAClC,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;wBAChC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;qBACtB;oBAED,IAAI,aAAa,CAAC,UAAU,CAAC,EAAE;wBAC3B,SAAS;qBACZ;oBAED,YAAY,CAAC,UAAU,CAAC,CAAC;oBACzB,aAAa,CAAC,GAAG,CAAC,KAAK,EAAE;wBACrB,UAAU;wBACV,aAAa,EAAE,IAAI;qBACtB,CAAC,CAAC;iBACN;gBAAC,OAAO,KAAK,EAAE;oBACZ,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;oBACrB,OAAO,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;iBAChC;aACJ;QACL,CAAC;KAAA;IACD;;;;OAIG;IACa,YAAY,CAAC,IAAU,EAAE,aAAwC;;YAC7E,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;gBACpC,IAAI;oBACA,IAAI,CAAC,CAAC,MAAM,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE;wBAChD,SAAS;qBACZ;oBAED,OAAO,CAAC,GAAG,CAAC,mBAAmB,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;oBAC5C,MAAM,UAAU,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAEzD,IAAI,aAAa,CAAC,UAAU,CAAC,EAAE;wBAC3B,SAAS;qBACZ;oBAED,YAAY,CAAC,UAAU,CAAC,CAAC;oBACzB,aAAa,CAAC,GAAG,CAAC,IAAI,EAAE;wBACpB,UAAU;wBACV,aAAa,EAAE,IAAI;qBACtB,CAAC,CAAC;iBACN;gBAAC,OAAO,KAAK,EAAE;oBACZ,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;oBACrB,OAAO,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;iBAChC;aACJ;QACL,CAAC;KAAA;IACD;;;;OAIG;IACa,aAAa,CAAC,IAAU,EAAE,aAAwC;;YAC9E,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE;gBACtC,IAAI;oBACA,IAAI,CAAC,CAAC,MAAM,IAAI,CAAC,sBAAsB,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,EAAE;wBAClD,SAAS;qBACZ;oBAED,OAAO,CAAC,GAAG,CAAC,mBAAmB,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC;oBAC7C,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;oBACnB,MAAM,UAAU,GAAG,MAAM,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;oBACtE,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;oBACxB,IAAI,KAAK,GAAG,EAAE,CAAC;oBACf,IAAI,UAAU,CAAC,KAAK,EAAE;wBAClB,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC;wBACzB,OAAO,UAAU,CAAC,KAAK,CAAC;qBAC3B;oBAED,YAAY,CAAC,UAAU,CAAC,CAAC;oBAEzB,aAAa,CAAC,GAAG,CAAC,KAAK,EAAE;wBACrB,UAAU;wBACV,aAAa,EAAE,KAAK;qBACvB,CAAC,CAAC;iBACN;gBAAC,OAAO,KAAK,EAAE;oBACZ,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;oBACrB,OAAO,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;iBAChC;aACJ;QACL,CAAC;KAAA;IAED;;;;OAIG;IACa,iBAAiB,CAAC,SAAqB,EAAE,UAAU;;YAC/D,IAAI,cAAc,GAAG,KAAK,CAAC;YAC3B,aAAa;YACb,IAAI,SAAS,CAAC,KAAK,KAAK,SAAS,EAAE;gBAC/B,MAAM,KAAK,GAAG,MAAM,OAAO,CAAC,GAAG;gBAC3B,aAAa;gBACb,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAO,IAAI,EAAE,EAAE;oBAC/B,IAAI,UAAU,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;oBAElD,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,EAAE;wBAC5B,cAAc,GAAG,IAAI,CAAC;wBACtB,UAAU,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC;wBAC7B,OAAO,MAAM,WAAW,CAAC,IAAI,EAAE,UAAU,EAAE;4BACvC,YAAY,EAAE,KAAK;4BACnB,OAAO,EAAE,KAAK;yBACjB,CAAC,CAAC;qBACN;yBAAM;wBACH,OAAO,IAAI,CAAC;qBACf;gBACL,CAAC,CAAA,CAAC,CACL,CAAC;gBACF,IAAI,cAAc,EAAE;oBAChB,UAAU,CAAC,KAAK,GAAG,KAAK,CAAC;iBAC5B;aACJ;YAED,OAAO,UAAU,CAAC;QACtB,CAAC;KAAA;IAED;;;;OAIG;IACa,sBAAsB,CAAC,KAAY;;YAC/C,OAAO,KAAK,CAAC;QACjB,CAAC;KAAA;IACD;;;;OAIG;IACa,gBAAgB,CAAC,KAAU;;YACvC,OAAO,EAAE,CAAC;QACd,CAAC;KAAA;IACD;;;;OAIG;IACa,mBAAmB,CAAC,IAAU,EAAE,aAAwC;8DAAkB,CAAC;KAAA;IAC3G;;;;OAIG;IACa,oBAAoB,CAAC,IAAU,EAAE,aAAwC;8DAAkB,CAAC;KAAA;IAE5G;;;;OAIG;IACa,qBAAqB,CAAC,IAAiB;;YACnD,OAAO,KAAK,CAAC;QACjB,CAAC;KAAA;IACD;;;;OAIG;IACa,eAAe,CAAC,IAAiB;;YAC7C,OAAO,EAAE,CAAC;QACd,CAAC;KAAA;IACD;;;;OAIG;IACa,kBAAkB,CAAC,IAAU,EAAE,aAAwC;8DAAkB,CAAC;KAAA;IAC1G;;;;OAIG;IACa,mBAAmB,CAAC,IAAU,EAAE,aAAwC;8DAAkB,CAAC;KAAA;IAE3G;;;;OAIG;IACa,sBAAsB,CAAC,KAAiB;;YACpD,OAAO,KAAK,CAAC;QACjB,CAAC;KAAA;IACD;;;;OAIG;IACa,gBAAgB,CAAC,KAAiB;;YAC9C,OAAO,EAAE,CAAC;QACd,CAAC;KAAA;IACD;;;;OAIG;IACa,mBAAmB,CAAC,IAAU,EAAE,aAAwC;8DAAkB,CAAC;KAAA;IAC3G;;;;OAIG;IACa,oBAAoB,CAAC,IAAU,EAAE,aAAwC;8DAAkB,CAAC;KAAA;IAE5G;;;OAGG;IACU,qBAAqB,CAAC,IAAgB;;YAC/C,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;YACpC,IAAI,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC;gBAAE,OAAO;YAEzD,oFAAoF;YACpF,MAAM,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YACvB,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,UAAU,EAAE,CAAC;YAExC,4EAA4E;YAC5E,KAAK,IAAI,GAAG,IAAI,OAAO,EAAE;gBACrB,IAAI;oBACA,IAAI,UAAU,GAAQ,IAAI,CAAC;oBAC3B,IAAI,MAAM,KAAK,MAAM,EAAE;wBACnB,UAAU,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;wBAElD,IAAI,aAAa,CAAC,UAAU,CAAC,EAAE;4BAC3B,SAAS;yBACZ;wBAED,YAAY,CAAC,UAAU,CAAC,CAAC;wBACzB,UAAU,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC;wBAC5B,MAAM,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;wBACpC,uEAAuE;wBACvE,mCAAmC;wBACnC,0DAA0D;wBAC1D,EAAE;wBACF,uCAAuC;wBACvC,oBAAoB;wBACpB,QAAQ;wBACR,EAAE;wBACF,mCAAmC;wBACnC,2CAA2C;qBAC9C;yBAAM,IAAI,MAAM,KAAK,OAAO,EAAE;wBAC3B,UAAU,GAAG,MAAM,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;wBAEnD,IAAI,aAAa,CAAC,UAAU,CAAC,EAAE;4BAC3B,SAAS;yBACZ;wBAED,YAAY,CAAC,UAAU,CAAC,CAAC;wBACzB,UAAU,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC;wBAC5B,MAAM,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;qBACvC;iBACJ;gBAAC,OAAO,GAAG,EAAE;oBACV,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;iBACtB;aACJ;YACD,OAAO,CAAC,GAAG,CAAC,gBAAgB,MAAM,6BAA6B,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;QACtF,CAAC;KAAA;;AA3ZL,4CA4ZC;AA3ZmB,4BAAW,GAAG,aAAa,CAAC;AAC5B,iCAAgB,GAAG,wBAAwB,CAAC;AAC5C,2BAAU,GAAG,GAAG,CAAC;;;;;;;;;;;;;;ACVrC,0DAAuD;AAEvD;;GAEG;AACH,MAAa,eAAgB,SAAQ,mCAAgB;IACjD,IAAI,aAAa;QACb,OAAO,GAAG,CAAC;IACf,CAAC;IACD,IAAI,aAAa;QACb,OAAO,eAAe,CAAC,aAAa,CAAC;IACzC,CAAC;IACD,MAAM,KAAK,aAAa;QACpB,OAAO,OAAO,CAAC;IACnB,CAAC;IAEe,gBAAgB,CAAC,SAAqB;;YAClD,IAAI,UAAU,GAAQ,EAAE,CAAC;YACzB,eAAe,CAAC,oBAAoB,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;YAC5D,eAAe,CAAC,kBAAkB,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;YAE1D,UAAU,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;YAEjE,OAAO,UAAU,CAAC;QACtB,CAAC;KAAA;IAEe,eAAe,CAAC,IAAiB;;YAC7C,MAAM,UAAU,GAAG,EAAE,CAAC;YACtB,eAAe,CAAC,2BAA2B,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;YAC9D,eAAe,CAAC,sBAAsB,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;YACzD,eAAe,CAAC,oBAAoB,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;YACvD,eAAe,CAAC,uBAAuB,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;YAC1D,eAAe,CAAC,gBAAgB,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;YACnD,eAAe,CAAC,mBAAmB,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;YACtD,OAAO,UAAU,CAAC;QACtB,CAAC;KAAA;IAEe,gBAAgB,CAAC,KAAU;;YACvC,OAAO,EAAE,CAAC;QACd,CAAC;KAAA;IAEe,sBAAsB,CAAC,SAAqB;;YACxD,OAAO,IAAI,CAAC;QAChB,CAAC;KAAA;IAEe,qBAAqB,CAAC,IAAiB;;YACnD,OAAO,IAAI,CAAC;QAChB,CAAC;KAAA;IAEe,sBAAsB,CAAC,KAAY;;;YAC/C,aAAa;YACb,OAAO,CAAA,MAAA,KAAK,CAAC,IAAI,CAAC,MAAM,0CAAE,MAAM,IAAG,CAAC,CAAC;;KACxC;IAED;;;;;OAKG;IACK,MAAM,CAAC,oBAAoB,CAAC,SAAS,EAAE,UAAU;QACrD,IAAI,WAAW,CAAC,SAAS,CAAC,IAAI,EAAE,yBAAyB,CAAC,KAAK,CAAC,EAAE;YAC9D,UAAU,CAAC,oCAAoC,CAAC,GAAG,CAAC,CAAC;YACrD,UAAU,CAAC,kCAAkC,CAAC,GAAG,CAAC,CAAC;SACtD;IACL,CAAC;IAED;;;;OAIG;IACK,MAAM,CAAC,kBAAkB,CAAC,SAAS,EAAE,UAAU;;QACnD,IAAI,CAAC,CAAA,MAAA,MAAA,SAAS,CAAC,IAAI,0CAAE,MAAM,0CAAE,MAAM,CAAA;YAAE,OAAO;QAC5C,MAAM,UAAU,GAAG,UAAU,CAAC;QAE9B,MAAM,OAAO,GAAG,CAAC,OAAO,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,EAAE;YACpC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,GAAG,CAAC,KAAK,EAAE;gBACxC,OAAO,CAAC,GAAG,CAAC,GAAG;oBACX,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC;iBAC7D,CAAC;aACL;YACD,OAAO,OAAO,CAAC;QACnB,CAAC,CAAC;QAEF,IAAI,SAAS,CAAC,IAAI,CAAC,MAAM,EAAE;YACvB,UAAU,CAAC,oBAAoB,CAAC,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;YACpG,IAAI,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;gBACjC,UAAU,CAAC,oCAAoC,CAAC,GAAG,MAAM,CAAC,OAAO,CAAC,MAAA,MAAA,MAAA,SAAS,CAAC,IAAI,CAAC,MAAM,0CAAE,SAAS,0CAAE,MAAM,0CAAE,KAAK,CAAC,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;gBACvI,UAAU,CAAC,0CAA0C,CAAC,GAAG,MAAM,CAAC,OAAO,CAAC,MAAA,MAAA,MAAA,SAAS,CAAC,IAAI,CAAC,MAAM,0CAAE,SAAS,0CAAE,YAAY,0CAAE,KAAK,CAAC,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;gBACnJ,UAAU,CAAC,sCAAsC,CAAC,GAAG,MAAM,CAAC,OAAO,CAAC,MAAA,MAAA,MAAA,SAAS,CAAC,IAAI,CAAC,MAAM,0CAAE,SAAS,0CAAE,QAAQ,0CAAE,KAAK,CAAC,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;gBAC3I,UAAU,CAAC,uCAAuC,CAAC,GAAG,MAAM,CAAC,OAAO,CAAC,MAAA,MAAA,MAAA,SAAS,CAAC,IAAI,CAAC,MAAM,0CAAE,SAAS,0CAAE,SAAS,0CAAE,KAAK,CAAC,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;aAChJ;YACD,IAAI,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE;gBAChC,UAAU,CAAC,4BAA4B,CAAC,GAAG,MAAM,CAAC,OAAO,CAAC,MAAA,MAAA,SAAS,CAAC,IAAI,CAAC,MAAM,0CAAE,QAAQ,0CAAE,KAAK,CAAC,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;aACzH;SACJ;IACL,CAAC;IAED;;;;OAIG;IACK,MAAM,CAAC,2BAA2B,CAAC,IAAI,EAAE,UAAU;QACvD,gDAAgD;QAChD,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YAClB,MAAM,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;YAChC,IAAI,OAAO,MAAM,CAAC,MAAM,CAAC,IAAI,KAAK,QAAQ,EAAE;gBACxC,UAAU,CAAC,8BAA8B,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC;aAC7E;YACD,IAAI,OAAO,MAAM,CAAC,MAAM,CAAC,OAAO,KAAK,QAAQ,EAAE;gBAC3C,UAAU,CAAC,iCAAiC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC;aACnF;SACJ;IACL,CAAC;IAED;;;;OAIG;IACK,MAAM,CAAC,gBAAgB,CAAC,IAAI,EAAE,UAAU;QAC5C,iCAAiC;QACjC,IAAI,IAAI,CAAC,IAAI,KAAK,QAAQ,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,SAAS,EAAE;YACxD,IAAI,WAAW,GAAG,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC;YACvC,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,KAAK,OAAO,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE;gBAC3E,uBAAuB;gBACvB,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;gBACrC,WAAW,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;gBAClC,WAAW,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC;aACjC;YACD,UAAU,CAAC,WAAW,CAAC,GAAG;gBACtB,WAAW,EAAE;oBACT,KAAK,EAAE,CAAC;oBACR,GAAG,EAAE,CAAC;iBACT;gBACD,OAAO,EAAE;oBACL,KAAK,EAAE,WAAW,CAAC,KAAK;oBACxB,GAAG,EAAE,WAAW,CAAC,GAAG;iBACvB;aACJ,CAAC;SACL;IACL,CAAC;IAED;;;;OAIG;IACK,MAAM,CAAC,mBAAmB,CAAC,IAAI,EAAE,UAAU;;QAC/C,IAAI,CAAA,MAAA,IAAI,CAAC,IAAI,CAAC,UAAU,0CAAE,cAAc,MAAK,SAAS,EAAE;YACpD,UAAU,CAAC,yBAAyB,CAAC,GAAG;gBACpC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,cAAc;aAC5C,CAAC;SACL;IACL,CAAC;IAED;;;;OAIG;IACK,MAAM,CAAC,uBAAuB,CAAC,IAAI,EAAE,UAAU;QACnD,IAAI,CAAC,WAAW,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YACnC,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,KAAK,SAAS,EAAE;gBAClC,UAAU,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;aAChC;SACJ;IACL,CAAC;IAED;;;;OAIG;IACK,MAAM,CAAC,sBAAsB,CAAC,IAAI,EAAE,UAAU;QAClD,IAAI,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YAC9C,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,KAAK,SAAS,EAAE;gBAChC,MAAM,MAAM,GAAG;oBACX,IAAI,EAAE,EAAE;oBACR,QAAQ,EAAE,EAAE;oBACZ,SAAS,EAAE,EAAE;oBACb,UAAU,EAAE,EAAE;oBACd,KAAK,EAAE,EAAE;oBACT,IAAI,EAAE,KAAK;oBACX,GAAG,EAAE,CAAC;oBACN,KAAK,EAAE;wBACH,KAAK,EAAE,CAAC;wBACR,SAAS,EAAE,EAAE;qBAChB;oBACD,QAAQ,EAAE,KAAK;oBACf,MAAM,EAAE;wBACJ,IAAI,EAAE,EAAE;wBACR,OAAO,EAAE,EAAE;wBACX,KAAK,EAAE,CAAC;wBACR,EAAE,EAAE;4BACA,KAAK,EAAE,CAAC;yBACX;wBACD,SAAS,EAAE,EAAE;qBAChB;oBACD,OAAO,EAAE;wBACL,IAAI,EAAE,EAAE;wBACR,SAAS,EAAE,EAAE;wBACb,UAAU,EAAE,EAAE;wBACd,KAAK,EAAE,EAAE;wBACT,GAAG,EAAE,CAAC;wBACN,WAAW,EAAE,EAAE;qBAClB;iBACJ,CAAC;gBACF,IAAI,CAAC,UAAU,CAAC,IAAI;oBAAE,UAAU,CAAC,IAAI,GAAG,EAAE,CAAC;gBAC3C,UAAU,CAAC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;aACnC;SACJ;IACL,CAAC;CACJ;AAlND,0CAkNC;;;;;;;;;;;;;;ACvND,0DAAuD;AAGvD;;GAEG;AACH,MAAa,aAAc,SAAQ,mCAAgB;IAC/C,IAAI,aAAa;QACb,OAAO,OAAO,CAAC;IACnB,CAAC;IACD,IAAI,aAAa;QACb,OAAO,aAAa,CAAC,aAAa,CAAC;IACvC,CAAC;IACD,MAAM,KAAK,aAAa;QACpB,OAAO,QAAQ,CAAC;IACpB,CAAC;IAEe,gBAAgB,CAAC,SAAuB;;;YACpD,IAAI,CAAA,MAAA,MAAA,SAAS,CAAC,IAAI,0CAAE,UAAU,0CAAE,IAAI,MAAK,SAAS;gBAAE,OAAO,EAAE,CAAC;YAC9D,OAAO;gBACH,IAAI,EAAE;oBACF,UAAU,EAAE;wBACR,IAAI,EAAE;4BACF,IAAI,EAAE,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG;4BACxC,KAAK,EAAE,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG;4BACzC,IAAI,EAAE,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK;yBAC7C;qBACJ;iBACJ;aACJ,CAAC;;KACL;IAEe,sBAAsB,CAAC,SAAuB;;;YAC1D,OAAO,CAAA,MAAA,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,0CAAE,IAAI,MAAK,SAAS,CAAC;;KAC7D;IAEe,sBAAsB,CAAC,KAAY;;;YAC/C,aAAa;YACb,OAAO,CAAA,MAAA,KAAK,CAAC,IAAI,CAAC,MAAM,0CAAE,MAAM,IAAG,CAAC,CAAC;;KACxC;CACJ;AAlCD,sCAkCC;;;;;;;;;;;;;;ACxCD,0DAAuD;AAEvD;;GAEG;AACH,MAAa,YAAa,SAAQ,mCAAgB;IAC9C,IAAI,aAAa;QACb,OAAO,OAAO,CAAC;IACnB,CAAC;IACD,IAAI,aAAa;QACb,OAAO,YAAY,CAAC,aAAa,CAAC;IACtC,CAAC;IACD,MAAM,KAAK,aAAa;QACpB,OAAO,OAAO,CAAC;IACnB,CAAC;IAEe,gBAAgB,CAAC,SAAqB;;YAClD,IAAI,UAAU,GAAQ,EAAE,CAAC;YACzB,IAAI,UAAU,CAAC,IAAI,KAAK,SAAS;gBAAE,UAAU,CAAC,IAAI,GAAG,EAAE,CAAC;YACxD,UAAU,CAAC,IAAI,CAAC,sBAAsB,GAAG,WAAW,CAAC;YACrD,OAAO,UAAU,CAAC;QACtB,CAAC;KAAA;IAEe,sBAAsB,CAAC,SAAc;;YACjD,OAAO,SAAS,CAAC,IAAI,CAAC,sBAAsB,KAAK,SAAS,CAAC;QAC/D,CAAC;KAAA;IAEe,sBAAsB,CAAC,KAAY;;;YAC/C,aAAa;YACb,OAAO,CAAA,MAAA,KAAK,CAAC,IAAI,CAAC,MAAM,0CAAE,MAAM,IAAG,CAAC,CAAC;;KACxC;CACJ;AA1BD,oCA0BC;;;AC/BD,uCAAuC;AACvC,uCAAuC;;;;;;;;;;;;AAGvC,0DAAqD;AACrD,yCAAiC;AAGjC;;;GAGG;AACH,MAAa,YAAa,SAAQ,mCAAgB;IAC9C,IAAI,aAAa;QACb,OAAO,OAAO,CAAC;IACnB,CAAC;IAED,IAAI,aAAa;QACb,OAAO,YAAY,CAAC,aAAa,CAAC;IACtC,CAAC;IAED,MAAM,KAAK,aAAa;QACpB,OAAO,OAAO,CAAC;IACnB,CAAC;IAED,MAAM,CAAC,qBAAqB,CAAC,SAAuB;QAChD,8FAA8F;QAC9F,OAAO,SAAS,CAAC,IAAI,KAAK,WAAW,IAAI,CACrC,CAAC,CAAC,QAAQ,KAAI,SAAS,aAAT,SAAS,uBAAT,SAAS,CAAE,IAAI,CAAA,CAAC;YAC9B,CAAC,CAAC,KAAK,KAAI,SAAS,aAAT,SAAS,uBAAT,SAAS,CAAE,IAAI,CAAA,CAAC,CAC9B,CAAC;IACN,CAAC;IAED,MAAM,CAAC,mBAAmB,CAAC,SAAuB;;QAC9C,oEAAoE;QACpE,+HAA+H;QAC/H,MAAM,IAAI,GAAG,MAAA,MAAA,SAAS,CAAC,IAAI,CAAC,QAAQ,0CAAE,WAAW,EAAE,mCAAI,EAAE,CAAC;QAC1D,OAAO,SAAS,CAAC,IAAI,KAAK,WAAW;YACjC,YAAG,CAAC,SAAS,CAAC,KAAK,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;IACjD,CAAC;IAEe,gBAAgB,CAAC,SAAuB;;;YACpD,MAAM,UAAU,GAGZ,EAAE,CAAC;YAEP,IAAI,YAAY,CAAC,mBAAmB,CAAC,SAAS,CAAC,EAAE;gBAC7C,oEAAoE;gBACpE,+HAA+H;gBAC/H,MAAM,IAAI,GAAG,MAAA,MAAA,SAAS,CAAC,IAAI,CAAC,QAAQ,0CAAE,WAAW,EAAE,mCAAI,EAAE,CAAC;gBAC1D,0CAA0C;gBAC1C,MAAM,YAAY,GAAG,EAAC,QAAQ,EAAE,YAAG,CAAC,SAAS,CAAC,KAAK,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,EAAC,CAAC;gBAC3F,UAAU,CAAC,IAAI,mCAAO,UAAU,CAAC,IAAI,GAAK,YAAY,CAAC,CAAC;aAC3D;YAED,IAAI,YAAY,CAAC,qBAAqB,CAAC,SAAS,CAAC,EAAE;gBAC/C,UAAU,CAAC,IAAI,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;gBACzD,MAAM,OAAO,GAAG;oBACZ,MAAM,EAAE,KAAK;oBACb,GAAG,EAAE;wBACD,QAAQ,EAAE,KAAK;wBACf,mBAAmB,EAAE,CAAC;qBACzB;iBACJ,CAAA;gBACD,UAAU,CAAC,IAAI,mCAAO,UAAU,CAAC,IAAI,GAAK,OAAO,CAAC,CAAC;aACtD;YAED,OAAO,UAAU,CAAC;;KACrB;IAEe,sBAAsB,CAAC,SAAuB;;YAC1D,OAAO,YAAY,CAAC,mBAAmB,CAAC,SAAS,CAAC,IAAI,YAAY,CAAC,qBAAqB,CAAC,SAAS,CAAC,CAAC;QACxG,CAAC;KAAA;CACJ;AA9DD,oCA8DC;;;;;ACvED,MAAa,SAAS;IAiClB,YAAY,KAAsB;QAC9B,IAAI,WAAW,GAAG,EAAoB,CAAC;QACvC,IAAI,KAAK,EAAE;YACP,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;gBACtB,WAAW,GAAG,KAAK,CAAC;aACvB;iBAAM,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;gBAClC,KAAK,MAAM,CAAC,IAAI,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;oBAC/C,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,SAAS,EAAE;wBACvC,8DAA8D;wBAC9D,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;4BACnD,WAAW,CAAC,IAAI,CAAC;gCACb,IAAI,EAAG,KAA6B,CAAC,IAAI;gCACzC,KAAK,EAAG,KAA6B,CAAC,KAAK;6BAC9C,CAAC,CAAC;yBACN;6BAAM;4BACH,WAAW,CAAC,IAAI,CAAC;gCACb,IAAI;gCACJ,KAAK;6BACe,CAAC,CAAC;yBAC7B;qBACJ;iBACJ;aACJ;SACJ;QACD,IAAI,CAAC,KAAK,GAAG,WAAW,CAAC;IAC7B,CAAC;IAzDD,IAAI,IAAI;QACJ,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;IAC9B,CAAC;IAED,IAAI,MAAM;QACN,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;IAC7B,CAAC;IAED,IAAI,KAAK;QACL,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,KAAK,EAAE;YAC3B,IAAI,OAAO,IAAI,CAAC,KAAK,KAAK,QAAQ,EAAE;gBAChC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC;aACvB;SACJ;QACD,OAAO,KAAK,CAAC;IACjB,CAAC;IAED,IAAI,OAAO;QACP,OAAO,IAAI,CAAC,MAAM,KAAK,CAAC,CAAC;IAC7B,CAAC;IAED,YAAY,CAAC,IAAY;;QACrB,OAAO,MAAA,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,0CAAE,KAAK,CAAC;IAChE,CAAC;IAED,KAAK;QACD,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;IAC1B,CAAC;IA+BD,OAAO,CAAC,IAAY,EAAE,KAAY;QAC9B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;YACZ,IAAI;YACJ,KAAK;SACR,CAAC,CAAC;IACP,CAAC;IAED,aAAa,CAAC,IAAY,EAAE,KAAa,EAAE,SAAS,GAAG,IAAI;QACvD,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC;QACjE,IAAI,KAAK,GAAG,CAAC,CAAC,EAAE;YACZ,8CAA8C;YAC9C,IAAI,CAAC,SAAS;gBAAE,OAAO;YAEvB,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YAC5B,+CAA+C;YAC/C,IAAI,KAAK,KAAK,SAAS,IAAI,KAAK,KAAK,IAAI;gBAAE,OAAO;YAClD,qEAAqE;YACrE,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;SACnC;aAAM,IAAI,KAAK,EAAE;YACd,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;SAC7B;IACL,CAAC;IAED,UAAU,CAAC,IAAY;QACnB,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC;QACjE,IAAI,KAAK,GAAG,CAAC,CAAC,EAAE;YACZ,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YAC5B,OAAO,IAAI,CAAC;SACf;QACD,OAAO,KAAK,CAAC;IACjB,CAAC;IAED,gBAAgB;QACZ,OAAO,IAAI,CAAC,IAAI,CAAC;IACrB,CAAC;IAED,MAAM,CAAC,aAAa,CAAQ,IAAoB,EAAE,IAAY,EAAE,KAAY,EAAE,SAAS,GAAG,IAAI;QAC1F,MAAM,KAAK,GAAG,IAAI,SAAS,CAAC,IAAI,CAAC,CAAC;QAClC,KAAK,CAAC,aAAa,CAAC,IAAI,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC;QAC5C,OAAO,KAAK,CAAC,KAAK,CAAC;IACvB,CAAC;IAED,MAAM,CAAC,KAAK,CAAC,IAAqB;QAC9B,MAAM,KAAK,GAAG,IAAI,SAAS,CAAC,IAAI,CAAC,CAAC;QAClC,OAAO,KAAK,CAAC,KAAK,CAAC;IACvB,CAAC;CACJ;AA1GD,8BA0GC;;;;;;;;;;;;;;ACvGD,wCAAqC;AAGrC,kCAGiB;AACjB,4CAA8F;AAC9F,kDAA+C;AAK/C,6EAAwE;AAyFxE,MAAa,aAAc,SAAQ,IAAI;IAEnC,mDAAmD;IACnD,MAAM;QACF,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC;QAC5B,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC;QACpB,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,IAAI,KAAK;QACL,YAAY;QACZ,mBAAmB;QACnB,IAAI,IAAI,CAAC,KAAK,EAAE;YACZ,YAAY;YACZ,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;SAC7D;QAED,YAAY;QACZ,mBAAmB;QACnB,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACtD,CAAC;IAED,IAAI,KAAK;QACL,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;IAC3B,CAAC;IAED,IAAI,SAAS;QACT,OAAO,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;IAC/B,CAAC;IAED,IAAI,KAAK;QACL,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;IAC3B,CAAC;IAED,IAAI,YAAY;QACZ,OAAO,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC;IAClC,CAAC;IAED,KAAK,CAAC,IAAY;QACd,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC;QAC3B,OAAO,OAAO,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE,CAAC,MAAM,KAAK,IAAI,CAAC,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;IAC3F,CAAC;IAED,IAAI,IAAI;QACJ,OAAO,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAI,IAAI;QACJ,YAAY;QACZ,mBAAmB;QACnB,IAAI,IAAI,CAAC,KAAK,EAAE;YACZ,YAAY;YACZ,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;SAC9B;QAED,YAAY;QACZ,mBAAmB;QACnB,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC;IACtC,CAAC;IAED,IAAI,QAAQ;QACR,IAAI,QAAQ,GAAG,CAAC,CAAC;QACjB,cAAE,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;QAC1D,OAAO,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;IAChD,CAAC;CACJ;AAjED,sCAiEC;AAED,MAAa,eAAe;IACxB,MAAM,CAAO,QAAQ,CAAC,KAAK,EAAE,IAAa,EAAE,cAA+B;;YACvE,yCAAyC;YACzC,MAAM,KAAK,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;YACjC,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;YACzB,MAAM,MAAM,GAAI,IAAI,CAAC,aAAa,CAAC,CAAC,EAAE,cAAc,CAAC,CAAC;YACtD,MAAM,KAAK,GAAG,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACtC,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;YAC9B,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;YACpC,MAAM,eAAe,GAAG,IAAI,CAAC,WAAW,CAAC;YACzC,MAAM,WAAW,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;YACvC,MAAM,KAAK,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;YACrC,MAAM,SAAS,GAAG,MAAM,KAAK,CAAC,YAAY,EAAE,CAAC;YAE7C,+BAA+B;YAC/B,MAAM,iBAAiB,GAAG;gBACtB,eAAe,EAAE,IAAI;gBACrB,KAAK,EAAE,KAAK;gBACZ,KAAK;gBACL,KAAK;gBACL,KAAK;gBACL,QAAQ;gBACR,KAAK;aACa,CAAC;YAGvB,+EAA+E;YAC/E,MAAM,qBAAqB,GAAG;gBAC1B,aAAa,EAAE,CAAC;aACE,CAAC;YACvB,IAAI,IAAI,CAAC,2BAA2B,EAAE,EAAE;gBACpC,qBAAqB,CAAC,aAAa,GAAG,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC;aACvE;YAED,MAAM,IAAI,GAAG,MAAM,eAAe,CAAC,YAAY,CAAC,iBAAiB,EAAE,qBAAqB,CAAC,CAAC;YAE1F,IAAI,CAAC,IAAI;gBAAE,OAAO;YAElB,IAAI,MAAM,EAAE;gBACR,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;aAC3B;YAED,+EAA+E;YAC/E,wGAAwG;YACxG,IAAI,MAAM,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE;gBAChC,MAAM,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,cAAc,CAAC,CAAC;gBAClE,IAAI,WAAW;oBAAE,MAAM,CAAC,MAAM,GAAG,WAAW,CAAC,MAAM,CAAC;aACvD;YAGD,+DAA+D;YAC/D,MAAM,OAAO,GAAY,iBAAO,CAAC,cAAc,EAAE,CAAC;YAClD,2EAA2E;YAC3E,MAAM,MAAM,GAAG,OAAO,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;YAE7D,MAAM,eAAe,GAAG,EAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,eAAe,EAAE,OAAO,EAAE,MAAM,EAAE,WAAW,EAAE,KAAK,EAAC,CAAC;YACjH,MAAM,4BAAqB,CAAC,eAAe,CAAC,CAAC;YAE7C,IAAI,KAAK,EAAE;gBACP,MAAM,iBAAiB,GAAG,EAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAC,CAAA;gBAC5D,MAAM,eAAe,CAAC,mBAAmB,CAAC,OAAO,EAAE,iBAAiB,CAAC,CAAC;aACzE;YAED,OAAO,IAAI,CAAC;QAChB,CAAC;KAAA;IAED,MAAM,CAAO,kBAAkB,CAAC,KAAK,EAAE,IAAa,EAAE,cAAgC;;YAClF,uEAAuE;YACvE,IAAI,IAAI,CAAC,aAAa,EAAE,KAAI,cAAc,aAAd,cAAc,uBAAd,cAAc,CAAE,WAAW,CAAA,EAAE;gBACrD,MAAM,KAAK,GAAG,cAAc,CAAC,WAAW,CAAC,KAAK,CAAC;gBAC/C,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,GAAG,KAAK,CAAC;gBACpC,MAAM,OAAO,GAAG,CAAC,CAAC;gBAClB,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;gBAC1C,MAAM,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,EAAE,SAAS,CAAC,CAAC;aACnD;iBACI,IAAI,IAAI,CAAC,OAAO,EAAE,EAAE;gBACrB,sCAAsC;gBACtC,wEAAwE;gBACxE,IAAI;gBACJ,IAAI,cAAc,aAAd,cAAc,uBAAd,cAAc,CAAE,KAAK,EAAE;oBACvB,MAAM,KAAK,GAAG,cAAc,CAAC,KAAK,CAAC,KAAK,CAAC;oBACzC,MAAM,QAAQ,GAAG,cAAc,CAAC,KAAK,CAAC,QAAQ,CAAC;oBAC/C,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,GAAG,KAAK,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC3D,MAAM,QAAQ,GAAG,CAAC,CAAC;oBACnB,MAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;oBAE7C,MAAM,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,EAAE,UAAU,CAAC,CAAC;iBACrD;aACJ;iBACI,IAAI,IAAI,CAAC,QAAQ,EAAE,EAAE;gBACtB,IAAI,IAAI,CAAC,OAAO,EAAE,KAAI,cAAc,aAAd,cAAc,uBAAd,cAAc,CAAE,YAAY,CAAA,EAAE;oBAChD,MAAM,QAAQ,GAAG,cAAc,CAAC,YAAY,CAAC,QAAQ,CAAC,KAAK,IAAI,CAAC,CAAC;oBACjE,MAAM,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;iBAChC;aACJ;QACL,CAAC;KAAA;IAED,MAAM,CAAC,gBAAgB,CAAC,EACpB,KAAK,EAAE,UAAU,EACjB,KAAK,EACL,OAAO,GAKV;QACG,MAAM,KAAK,GAAG,IAAI,qBAAS,CAAC,UAAU,CAAC,CAAC;QACxC,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;QAC1B,IAAI,KAAK,IAAI,CAAC,EAAE;YACZ,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC,CAAC;YAC5D,OAAO,UAAU,CAAC;SACrB;QACD,IAAI,OAAO,GAAG,GAAG,KAAK,IAAI,CAAC;QAC3B,IAAI,OAAO,EAAE;YACT,OAAO,IAAI,IAAI,CAAC;SACnB;QACD,IAAI,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,KAAK,EAAE;YACd,OAAO,IAAI,KAAK,KAAK,CAAC,KAAK,EAAE,CAAC;SACjC;QACD,OAAO,IAAI,OAAO,CAAC;QACnB,OAAO,OAAO,CAAC;IACnB,CAAC;IAED,MAAM,CAAC,IAAI,CAAC,KAAgB;QACxB,MAAM,KAAK,GAAG,IAAI,qBAAS,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAEzC,gDAAgD;QAChD,MAAM,cAAc,GAAG,EAAE,KAAK,EAAE,KAAK,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,KAAK,EAAE,OAAO,EAAE,KAAK,CAAC,YAAY,EAAE,CAAC;QAC9F,MAAM,OAAO,GAAG,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,CAAC;QACtD,IAAI,CAAC,OAAO,EAAE;YACV,OAAO;SACV;QAED,4BAA4B;QAC5B,MAAM,QAAQ,GAAG,EAAC,KAAK,EAAE,KAAK,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,KAAK,EAAE,YAAY,EAAE,KAAK,CAAC,YAAY,EAAC,CAAC;QAC3F,MAAM,IAAI,GAAG,IAAI,aAAa,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;QAElD,sEAAsE;QACtE,IAAI,CAAC,IAAI,EAAE,CAAC;QAEZ,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,MAAM,CAAO,SAAS,CAAC,UAA0B;;YAC7C,MAAM,KAAK,GAAG,eAAe,CAAC,sBAAsB,CAAC,UAAU,CAAC,CAAC;YAEjE,MAAM,IAAI,GAAG,MAAM,eAAe,CAAC,IAAI,CAAC,EAAC,KAAK,EAAE,KAAK,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,KAAK,EAAE,YAAY,EAAE,KAAK,CAAC,YAAY,EAAC,CAAC,CAAC;YACpH,IAAI,CAAC,IAAI;gBAAE,OAAO;YAElB,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE;gBACxB,MAAM,eAAe,CAAC,eAAe,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;aACtD;YAED,OAAO,IAAI,CAAC;QAChB,CAAC;KAAA;IAED;OACG;IACH,MAAM,CAAC,sBAAsB,CAAC,KAAqB;;QAC/C,KAAK,CAAC,KAAK,GAAG,MAAA,KAAK,CAAC,KAAK,mCAAI,6BAAiB,CAAC;QAC/C,KAAK,CAAC,KAAK,GAAG,MAAA,KAAK,CAAC,KAAK,mCAAI,EAAE,CAAC;QAChC,KAAK,CAAC,YAAY,GAAG,MAAA,KAAK,CAAC,YAAY,mCAAI,KAAK,CAAC;QACjD,KAAK,CAAC,eAAe,GAAG,MAAA,KAAK,CAAC,eAAe,mCAAI,KAAK,CAAC;QACvD,KAAK,CAAC,QAAQ,GAAG,MAAA,KAAK,CAAC,QAAQ,mCAAI,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;QAC9D,KAAK,CAAC,eAAe,GAAG,MAAA,KAAK,CAAC,eAAe,mCAAI,KAAK,CAAC;QAEvD,OAAO,kBAAI,KAAK,CAA4B,CAAC;IACjD,CAAC;IAED;OACG;IACH,MAAM,CAAC,yBAAyB,CAAC,KAAwB;;QACrD,KAAK,CAAC,KAAK,GAAG,MAAA,KAAK,CAAC,KAAK,mCAAI,EAAE,CAAC;QAChC,KAAK,CAAC,MAAM,GAAG,MAAA,KAAK,CAAC,MAAM,mCAAI,IAAI,CAAC;QAEpC,OAAO,kBAAI,KAAK,CAA+B,CAAC;IACpD,CAAC;IAED;;OAEG;IACH,MAAM,CAAC,UAAU;QACb,MAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC;QAC7E,MAAM,KAAK,GAAG,CAAC,EAAE,IAAI,EAAE,cAAc,EAAE,KAAK,EAAE,CAAC,CAAC;QAChD,MAAM,iBAAiB,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAsB,CAAC;QAC/F,MAAM,aAAa,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,CAAA;QACpC,OAAO,eAAe,CAAC,YAAY,CAAC,iBAAiB,EAAE,aAAa,CAAC,CAAC;IAC1E,CAAC;IAED;;;OAGG;IACH,MAAM,CAAO,YAAY,CAAC,aAAgC,EAAE,aAAiC;;YACzF,kFAAkF;YAClF,MAAM,EAAC,KAAK,EAAC,GAAG,aAAa,CAAC;YAE9B,MAAM,KAAK,GAAG,eAAe,CAAC,yBAAyB,CAAC,aAAa,CAAC,CAAC;YAEvE,wCAAwC;YACxC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,uBAAW,EAAE,iBAAK,CAAC,WAAW,CAAC,EAAE;gBACpD,OAAO,KAAK,CAAC,KAAK,CAAC;aACtB;iBAAM;gBACH,eAAe,CAAC,oBAAoB,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;aACrD;YAED,gEAAgE;YAChE,MAAM,iBAAiB,GAAG;gBACtB,KAAK,EAAE,KAAK,CAAC,KAAK;gBAClB,aAAa;gBACb,QAAQ,EAAE,KAAK,CAAC,QAAQ;gBACxB,KAAK,EAAE,KAAK,CAAC,KAAK;gBAClB,MAAM,EAAE,KAAK,CAAC,MAAM;aACvB,CAAC;YAEF,MAAM,UAAU,GAAG,MAAM,yCAAmB,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,EAAE,iBAAiB,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC;YACjG,MAAM,QAAQ,GAAG,MAAM,UAAU,CAAC,MAAM,EAAE,CAAC;YAE3C,IAAI,UAAU,CAAC,QAAQ;gBAAE,OAAO;YAGhC,qBAAqB;YACrB,MAAM,cAAc,GAAG,kBAAI,KAAK,CAA4B,CAAC;YAC7D,2CAA2C;YAC3C,yDAAyD;YACzD,cAAc,CAAC,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAC;YAC5C,iGAAiG;YACjG,0GAA0G;YAC1G,iCAAiC;YACjC,cAAc,CAAC,eAAe,GAAG,IAAI,CAAC;YAGtC,IAAI,UAAU,CAAC,cAAc,KAAK,MAAM,IAAI,KAAK,CAAC,KAAK,EAAE;gBACrD,MAAM,eAAe,CAAC,oBAAoB,CAAC,KAAK,CAAC,KAAK,EAAE,cAAc,EAAE,QAAQ,CAAC,CAAC;aACrF;YAED,uEAAuE;YACvE,cAAc,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC;YAE3C,uBAAuB;YACvB,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC;YAClD,IAAI,CAAC,IAAI;gBAAE,OAAO;YAGlB,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE;gBACxB,MAAM,eAAe,CAAC,eAAe,CAAC,IAAI,EAAE,cAAc,CAAC,CAAC;aAC/D;YAGD,IAAI,QAAQ,CAAC,QAAQ,EAAE;gBACnB,eAAe,CAAC,kBAAkB,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;aACvD;YAGD,8DAA8D;YAC9D,IAAI,KAAK;gBAAE,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC;YAE7B,OAAO,IAAI,CAAC;QAChB,CAAC;KAAA;IAED,MAAM,CAAO,eAAe,CAAC,IAAmB,EAAE,KAA8B;;YAC5E,MAAM,EAAC,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,WAAW,EAAE,KAAK,EAAE,eAAe,EAAE,MAAM,EAAE,cAAc,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAC,GAAG,KAAK,CAAC;YAClI,MAAM,sBAAsB,GAAG,EAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,WAAW,EAAE,KAAK,EAAE,eAAe,EAAE,MAAM,EAAE,cAAc,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAC,CAAC;YACzJ,MAAM,4BAAqB,CAAC,sBAAsB,CAAC,CAAC;QACxD,CAAC;KAAA;IAED;;;;;;;OAOG;IACH,MAAM,CAAO,iBAAiB,CAAC,OAA8B;;;YACzD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,uBAAW,EAAE,iBAAK,CAAC,oCAAoC,CAAC;gBAAE,OAAO;YAExF,MAAM,QAAQ,GAAG,MAAA,OAAO,CAAC,QAAQ,mCAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,qBAAS,EAAE,sBAAU,CAAC,QAAQ,CAAC,CAAC;YACvF,IAAI,QAAQ,KAAK,MAAM;gBAAE,OAAO;YAEhC,iEAAiE;YACjE,MAAM,KAAK,GAAG,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,qBAAqB,EAAE,CAAC;YAE3D,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE;gBACtB,IAAI,IAAI,CAAC,IAAI;oBAAE,SAAS;gBACxB,IAAI,IAAI,KAAK,IAAI,CAAC,IAAI;oBAAE,SAAS;gBAEjC,MAAM,iBAAiB,GAAG;oBACtB,KAAK,EAAE,OAAO,CAAC,KAAK,EAAE,MAAM,EAAE,OAAO,CAAC,MAAM,EAAE,OAAO,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI;oBAC3F,KAAK,EAAE,OAAO,CAAC,KAAK,EAAE,SAAS,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,CAAC,MAAM;iBACpC,CAAC;gBAC9B,MAAM,8BAAuB,CAAC,iBAAiB,CAAC,CAAC;aACpD;;KACJ;IAED;;;;;;;OAOG;IACH,MAAM,CAAO,mBAAmB,CAAC,OAAgB,EAAE,OAA8B;;YAC7E,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,uBAAW,EAAE,iBAAK,CAAC,oCAAoC,CAAC;gBAAE,OAAO;YAExF,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;gBACrB,iEAAiE;gBACjE,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,oBAAoB,EAAE;oBAAE,OAAO;gBAEjD,OAAO,mCAAO,OAAO,KAAE,MAAM,GAAC,CAAC;gBAC/B,eAAe,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;YAC/C,CAAC,CAAC,CAAA;QACN,CAAC;KAAA;IAED,MAAM,CAAC,oBAAoB,CAAC,KAAkB;QAC1C,IAAI,KAAK,IAAI,KAAK,CAAC,KAAK,GAAG,CAAC,EAAE;YAC1B,EAAE,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,iCAAiC,CAAC,CAAC,CAAC;SACjF;IACL,CAAC;IAED,MAAM,CAAC,kBAAkB,CAAC,aAAyC,EAAE,QAAwB;;QACzF,MAAM,eAAe,GAAG,MAAA,QAAQ,CAAC,KAAK,CAAC,YAAY,CAAC,cAAc,CAAC,mCAAI,CAAC,CAAC;QACzE,QAAQ,CAAC,KAAK,CAAC,aAAa,CAAC,cAAc,EAAE,eAAe,GAAG,CAAC,CAAC,CAAC;QAElE,wCAAwC;QACxC,aAAa,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC;QAC1C,aAAa,CAAC,QAAQ,GAAG,IAAI,CAAC;QAC9B,MAAM,SAAS,GAAG,GAAG,CAAC;QACtB,UAAU,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,EAAE,SAAS,CAAC,CAAC;IAClE,CAAC;IAED,MAAM,CAAO,oBAAoB,CAAC,KAAe,EAAE,UAA0B,EAAE,QAAwB;;YACnG,UAAU,CAAC,YAAY,GAAG,IAAI,CAAC;YAC/B,OAAO,UAAU,CAAC,KAAK,CAAC;YACxB,QAAQ,CAAC,KAAK,CAAC,aAAa,CAAC,kBAAkB,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,KAAK,CAAC,CAAC;YAExE,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;QAC1B,CAAC;KAAA;CACJ;AAnVD,0CAmVC;;;AClgBD,iCAAiC;;;AAEjC,kEAA+D;AAC/D,2CAAiD;AAE1C,MAAM,sBAAsB,GAAG,GAAG,EAAE;IACvC;;OAEG;IACH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,uBAAW,EAAE,kBAAkB,EAAE;QACpD,IAAI,EAAE,+BAA+B;QACrC,IAAI,EAAE,sCAAsC;QAC5C,KAAK,EAAE,OAAO;QACd,MAAM,EAAE,IAAI;QACZ,IAAI,EAAE,MAAM;QACZ,OAAO,EAAE,OAAO;QAChB,OAAO,EAAE;YACL,OAAO,EAAE,yBAAyB;YAClC,OAAO,EAAE,2BAA2B;YACpC,MAAM,EAAE,oBAAoB;SAC/B;QACD,QAAQ,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;KACxD,CAAC,CAAC;IAEH;;OAEG;IACH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,uBAAW,EAAE,aAAa,EAAE;QAC/C,IAAI,EAAE,0BAA0B;QAChC,IAAI,EAAE,iCAAiC;QACvC,KAAK,EAAE,OAAO;QACd,MAAM,EAAE,IAAI;QACZ,IAAI,EAAE,OAAO;QACb,OAAO,EAAE,IAAI;KAChB,CAAC,CAAC;IAEH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,uBAAW,EAAE,wBAAwB,EAAE;QAC1D,IAAI,EAAE,qCAAqC;QAC3C,IAAI,EAAE,4CAA4C;QAClD,KAAK,EAAE,MAAM;QACb,MAAM,EAAE,IAAI;QACZ,IAAI,EAAE,OAAO;QACb,OAAO,EAAE,KAAK;KACjB,CAAC,CAAC;IAEH;;OAEG;IACH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,uBAAW,EAAE,mCAAgB,CAAC,gBAAgB,EAAE;QACnE,IAAI,EAAE,sBAAsB;QAC5B,KAAK,EAAE,OAAO;QACd,MAAM,EAAE,KAAK;QACb,IAAI,EAAE,MAAM;QACZ,OAAO,EAAE,GAAG;KACf,CAAC,CAAC;IAEH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,uBAAW,EAAE,iBAAK,CAAC,mBAAmB,EAAE;QAC3D,IAAI,EAAE,kCAAkC;QACxC,IAAI,EAAE,yCAAyC;QAC/C,KAAK,EAAE,MAAM;QACb,MAAM,EAAE,IAAI;QACZ,IAAI,EAAE,OAAO;QACb,OAAO,EAAE,IAAI;KAChB,CAAC,CAAC;IAEH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,uBAAW,EAAE,iBAAK,CAAC,0BAA0B,EAAE;QAClE,IAAI,EAAE,yCAAyC;QAC/C,IAAI,EAAE,gDAAgD;QACtD,KAAK,EAAE,OAAO;QACd,MAAM,EAAE,IAAI;QACZ,IAAI,EAAE,OAAO;QACb,OAAO,EAAE,IAAI;KAChB,CAAC,CAAC;IAEH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,uBAAW,EAAE,iBAAK,CAAC,oCAAoC,EAAE;QAC5E,IAAI,EAAE,+CAA+C;QACrD,IAAI,EAAE,0DAA0D;QAChE,KAAK,EAAE,OAAO;QACd,MAAM,EAAE,IAAI;QACZ,IAAI,EAAE,OAAO;QACb,OAAO,EAAE,IAAI;KAChB,CAAC,CAAC;IAEH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,uBAAW,EAAE,iBAAK,CAAC,gCAAgC,EAAE;QACvE,IAAI,EAAE,2CAA2C;QAClD,IAAI,EAAE,sDAAsD;QAC5D,KAAK,EAAE,OAAO;QACd,MAAM,EAAE,IAAI;QACZ,IAAI,EAAE,OAAO;QACb,OAAO,EAAE,IAAI;KAChB,CAAC,CAAC;IAEH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,uBAAW,EAAE,iBAAK,CAAC,qBAAqB,EAAE;QAC5D,IAAI,EAAE,gCAAgC;QACvC,IAAI,EAAE,2CAA2C;QACjD,KAAK,EAAE,MAAM;QACb,MAAM,EAAE,IAAI;QACZ,IAAI,EAAE,OAAO;QACb,OAAO,EAAE,IAAI;KAChB,CAAC,CAAC;IAEH,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,uBAAW,EAAE,iBAAK,CAAC,uBAAuB,EAAE;QAC9D,IAAI,EAAE,kCAAkC;QACzC,IAAI,EAAE,6CAA6C;QACnD,KAAK,EAAE,OAAO;QACd,MAAM,EAAE,IAAI;QACZ,IAAI,EAAE,OAAO;QACb,OAAO,EAAE,IAAI;KAChB,CAAC,CAAC;AACP,CAAC,CAAC;AAxGW,QAAA,sBAAsB,0BAwGjC;;;;;AC7GF,4CAAgC;AAEhC,MAAa,WAAW;IACpB,MAAM,CAAC,wBAAwB,CAAC,MAAgB;QAC5C,KAAK,MAAM,KAAK,IAAI,MAAM,EAAE;YACxB,IAAI,WAAW,CAAC,wBAAwB,CAAC,KAAK,CAAC;gBAAE,OAAO,IAAI,CAAC;SAChE;QACD,OAAO,KAAK,CAAC;IACjB,CAAC;IACD;;;;OAIG;IACH,MAAM,CAAC,wBAAwB,CAAC,KAAa;QACzC,OAAO,WAAW,CAAC,wBAAwB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IAC3D,CAAC;IACD;;;OAGG;IACH,MAAM,CAAC,wBAAwB,CAAC,KAAa;QACzC,OAAO,IAAI,CAAC,GAAG,CAAC,KAAK,GAAG,cAAE,CAAC,MAAM,CAAC,6BAA6B,EAAE,CAAC,CAAC,CAAC;IACxE,CAAC;IAED;;;;OAIG;IACH,MAAM,CAAC,oBAAoB,CAAC,KAAa,EAAE,IAAY;QACnD,6BAA6B;QAC7B,4EAA4E;QAC5E,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;QAC7B,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QAE3B,gEAAgE;QAChE,MAAM,YAAY,GAAG,KAAK,GAAG,IAAI,GAAG,cAAE,CAAC,MAAM,CAAC,6BAA6B,CAAC;QAC5E,OAAO,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;IACrC,CAAC;CACJ;AAtCD,kCAsCC;;;;;;;;;;;;;;ACxCD,4CAAoD;AAMpD,MAAa,SAAS;IAGlB,YAAY,IAAwB;QAChC,0CAA0C;QAC1C,qEAAqE;QACrE,IAAI,OAAO,IAAI,KAAK,QAAQ,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;YACjD,IAAI,GAAG,SAAS,CAAC,mBAAmB,EAAE,CAAC;SAC1C;QAED,mGAAmG;QACnG,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;IAChC,CAAC;IAED,IAAI,sBAAsB;QACtB,OAAO,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;IAC7D,CAAC;IAED,IAAI,SAAS;QACT,OAAO,IAAI,CAAC,IAAI,CAAC;IACrB,CAAC;IAED,IAAI,SAAS,CAAC,SAA6B;QACvC,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;IAC1B,CAAC;IAED,IAAI,aAAa;QACb,OAAO,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC;IACnC,CAAC;IAED,IAAI,aAAa,CAAC,SAAiC;QAC/C,IAAI,CAAC,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC;IACxC,CAAC;IAED,4BAA4B,CAAC,QAA+C,EAAE,KAAa;QACvF,OAAO,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,KAAK,CAAC;IACzD,CAAC;IAED,+BAA+B,CAAC,QAA+C,EAAE,KAAa;QAC1F,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,KAAK,CAAC;IAChD,CAAC;IAED,iCAAiC,CAAC,QAA+C;QAC7E,OAAO,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;IAC/C,CAAC;IAED,8BAA8B;QAC1B,IAAI,CAAC,iCAAiC,CAAC,OAAO,CAAC,CAAC;IACpD,CAAC;IAED;;;;OAIG;IACH,6BAA6B,CAAC,QAA+C,EAAE,KAAa;QACxF,IAAI,CAAC,IAAI,CAAC,iCAAiC,CAAC,QAAQ,CAAC,EAAE;YACnD,IAAI,CAAC,8BAA8B,EAAE,CAAC;SACzC;QAED,IAAI,CAAC,+BAA+B,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;QACtD,IAAI,CAAC,sBAAsB,EAAE,CAAC;IAClC,CAAC;IAED,2BAA2B,CAAC,QAA+C,EAAE,KAAa;QACtF,IAAI,IAAI,CAAC,4BAA4B,CAAC,QAAQ,EAAE,KAAK,CAAC,EAAE;YACpD,IAAI,CAAC,iCAAiC,CAAC,QAAQ,CAAC,CAAC;SACpD;aAAM,IAAI,IAAI,CAAC,iCAAiC,CAAC,QAAQ,CAAC,EAAE;YACzD,IAAI,CAAC,gCAAgC,CAAC,KAAK,CAAC,CAAC;SAChD;aAAM;YACH,IAAI,CAAC,+BAA+B,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;SACzD;QAED,0DAA0D;QAC1D,IAAI,CAAC,IAAI,CAAC,iCAAiC,CAAC,QAAQ,CAAC,EAAE;YACnD,IAAI,CAAC,kCAAkC,EAAE,CAAC;SAC7C;QAED,IAAI,CAAC,sBAAsB,EAAE,CAAC;IAClC,CAAC;IAED,sBAAsB;QAClB,8CAA8C;QAC9C,IAAI,IAAI,CAAC,+BAA+B,EAAE;YACtC,MAAM,QAAQ,GAAG,IAAI,CAAC,6BAA6B,CAAC;YAEpD,IAAI,QAAQ,KAAK,SAAS,EAAE;gBACxB,OAAO,CAAC,KAAK,CAAC,wDAAwD,CAAC,CAAC;gBACxE,OAAO;aACV;YAED,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAC3B,IAAI,CAAC,gCAAgC,CAAC,QAAQ,CAAC,CAAC;YAChD,IAAI,CAAC,sBAAsB,CAAC,QAAQ,CAAC,CAAC;SAEzC;aAAM;YACH,+EAA+E;YAC/E,MAAM,gBAAgB,GAAG,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,QAAQ,EAAE,KAAK,CAAC,EAAE,EAAE,CAAC,QAAQ,KAAK,OAAO,CAAC,CAAC;YACvH,0EAA0E;YAC1E,MAAM,YAAY,GAAG,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,EAAE,KAAK,CAAC,EAAE,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAEpF,MAAM,KAAK,GAAG,IAAI,CAAC,0BAA0B,CAAC,YAAY,CAAC,CAAC;YAE5D,MAAM,SAAS,GAAG,SAAS,CAAC,8BAA8B,EAAE,CAAC;YAE7D,IAAI,KAAK,CAAC,OAAO,GAAG,CAAC,IAAI,KAAK,CAAC,KAAK,IAAI,CAAC,EAAE;gBACvC,IAAI,CAAC,sBAAsB,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;aAClD;iBACI,IAAI,KAAK,CAAC,KAAK,KAAK,CAAC,IAAI,KAAK,CAAC,QAAQ,IAAI,CAAC,EAAE;gBAC/C,IAAI,CAAC,sBAAsB,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;aAChD;iBACI,IAAI,KAAK,CAAC,QAAQ,KAAK,CAAC,IAAI,KAAK,CAAC,KAAK,IAAI,CAAC,EAAE;gBAC/C,IAAI,CAAC,sBAAsB,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;aACnD;iBACI,IAAI,KAAK,CAAC,KAAK,KAAK,CAAC,EAAE;gBACxB,IAAI,CAAC,sBAAsB,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;aAChD;iBAAM;gBACH,IAAI,CAAC,sBAAsB,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;aAC/C;SACJ;IACL,CAAC;IAED,MAAM,CAAO,aAAa,CAAC,MAAc;;YACrC,MAAM,MAAM,CAAC,SAAS,CAAC,uBAAW,EAAE,iBAAK,CAAC,QAAQ,CAAC,CAAC;YACpD,OAAO,IAAI,SAAS,CAAC,SAAS,CAAC,mBAAmB,EAAE,CAAC,CAAC;QAC1D,CAAC;KAAA;IAED,MAAM,CAAO,0BAA0B,CAAC,MAAc;;YAClD,MAAM,SAAS,GAAG,MAAM,SAAS,CAAC,sBAAsB,CAAC,MAAM,CAAC,CAAC;YAEjE,SAAS,CAAC,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC,gCAAgC,EAAE,CAAC;YAE5E,MAAM,SAAS,CAAC,oBAAoB,CAAC,MAAM,EAAE,SAAS,CAAC,IAAI,CAAC,CAAC;YAE7D,OAAO,SAAS,CAAC;QACrB,CAAC;KAAA;IAED,iCAAiC,CAAC,QAA+C;QAC7E,OAAO,QAAQ,KAAK,OAAO,CAAC;IAChC,CAAC;IAED,mBAAmB;QACf,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,CAAC,OAAO,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;IAC3G,CAAC;IAED,gCAAgC,CAAC,KAAa;QAC1C,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAC3B,IAAI,CAAC,+BAA+B,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;IACzD,CAAC;IAED,kCAAkC;QAC9B,IAAI,CAAC,iCAAiC,CAAC,OAAO,CAAC,CAAC;IACpD,CAAC;IAED,sBAAsB,CAAC,KAAa;QAChC,IAAI,CAAC,aAAa,CAAC,KAAK,GAAG,KAAK,CAAC;IACrC,CAAC;IAED,IAAI,6BAA6B;QAC7B,OAAO,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,MAAM,CAAC,KAAK,CAAC;IACrD,CAAC;IAED,IAAI,+BAA+B;QAC/B,OAAO,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,KAAK,KAAK,SAAS,CAAC;IACzD,CAAC;IAED;;;OAGG;IACH,0BAA0B,CAAC,MAAgB;QACvC,MAAM,SAAS,GAAG,SAAS,CAAC,8BAA8B,EAAE,CAAC;QAE7D,OAAO;YACH,KAAK,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,KAAa,EAAE,KAAa,EAAE,EAAE,CAAC,CAAC,KAAK,KAAK,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;YAC1G,QAAQ,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,KAAa,EAAE,KAAa,EAAE,EAAE,CAAC,CAAC,KAAK,KAAK,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;YAChH,KAAK,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,KAAa,EAAE,KAAa,EAAE,EAAE,CAAC,CAAC,KAAK,KAAK,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;YAC1G,OAAO,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,KAAa,EAAE,KAAa,EAAE,EAAE,CAAC,CAAC,KAAK,KAAK,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;SACjH,CAAA;IACL,CAAC;IAED,MAAM,CAAC,gCAAgC;QACnC,OAAO;YACH,KAAK,EAAE,CAAC;YACR,MAAM,EAAE,EAAE;SACb,CAAA;IACL,CAAC;IAED,MAAM,CAAC,mBAAmB;QACtB,OAAO;YACH,aAAa,EAAE,SAAS,CAAC,gCAAgC,EAAE;SAC9D,CAAA;IACL,CAAC;IAED,MAAM,CAAC,8BAA8B;QACjC,OAAO,cAAE,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC;IAC1C,CAAC;IAED,MAAM,CAAO,sBAAsB,CAAC,MAAc;;YAC9C,MAAM,IAAI,GAAG,MAAM,MAAM,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,QAAQ,CAAC,CAAC;YAE/D,OAAO,IAAI,SAAS,CAAC,IAAI,CAAC,CAAC;QAC/B,CAAC;KAAA;IAED,MAAM,CAAO,oBAAoB,CAAC,MAAc,EAAE,SAA6B;;YAC3E,+CAA+C;YAC/C,gDAAgD;YAChD,MAAM,MAAM,CAAC,SAAS,CAAC,uBAAW,EAAE,iBAAK,CAAC,QAAQ,CAAC,CAAC;YACpD,MAAM,MAAM,CAAC,OAAO,CAAC,uBAAW,EAAE,iBAAK,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;QACjE,CAAC;KAAA;CACJ;AAlND,8BAkNC;;;;AC5MD,MACM,QAAS,SAAQ,gBAAgB;IAOnC,MAAM,CAAC,QAAQ,CAAC,IAAa,EAAE,UAAuB;QAClD,MAAM,aAAa,GAAG,QAAQ,CAAC;QAE/B,MAAM,YAAY,GAAG;YACjB,CAAC,EAAE,aAAa;YAChB,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG;YACnB,SAAS,EAAE,CAAC;YACZ,CAAC,EAAE,CAAC;YACJ,CAAC,EAAE,CAAC;YACJ,aAAa;YACb,SAAS,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK;SAC7B,CAAC;QACF,MAAM,KAAK,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QAClC,YAAY,CAAC,UAAU,CAAC,GAAG,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,MAAM,CAAC;QACzC,YAAY,CAAC,SAAS,CAAC,GAAG,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,OAAO,CAAC;QAEzC,aAAa;QACb,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC;QACxC,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAC;QACrB,QAAQ,CAAC,UAAU,GAAG,UAAU,CAAC;QACjC,OAAO,QAAQ,CAAC;IACpB,CAAC;IAED,WAAW;QACP,MAAM,YAAY,GAAG,MAAM,CAAC,WAAW,CAAC;QACxC,aAAa;QACb,IAAI,CAAC,IAAI,EAAE,CAAC;QACZ,aAAa;QACb,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;QACtB,aAAa;QACb,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QAClC,IAAI,CAAC,wBAAwB,CAAC,YAAY,CAAC,CAAC;IAChD,CAAC;IAED,wBAAwB,CAAC,YAAyB;QAC9C,MAAM,QAAQ,GAAG,EAAE,CAAC;QACpB,IAAI,QAAQ,GAAG,CAAC,CAAC;QAEjB,gCAAgC;QAChC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,EAAE;YACvB,KAAK,CAAC,eAAe,EAAE,CAAC;YACxB,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,wBAAwB;YAC9C,IAAI,GAAG,GAAG,QAAQ,IAAI,EAAE;gBAAE,OAAO;YACjC,MAAM,MAAM,GAAG,KAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACvD,MAAM,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACtE,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC;YACxB,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC;YACxB,aAAa;YACb,IAAI,CAAC,OAAO,EAAE,CAAC;YACf,QAAQ,GAAG,GAAG,CAAC;QACnB,CAAC,CAAC;QAEF,oCAAoC;QACpC,QAAQ,CAAC,IAAI,CAAC,GAAG,GAAG,EAAE;YAClB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC;YACpC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;YAC9C,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;YAC9C,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YACrC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YAC/B,YAAY,CAAC,QAAQ,EAAE,CAAC;YAExB,IAAI,IAAI,CAAC,UAAU;gBAAE,IAAI,CAAC,UAAU,EAAE,CAAC;QAC3C,CAAC,CAAC;QAEF,oCAAoC;QACpC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,EAAE;YACvB,QAAQ,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC;YAEtB,iCAAiC;YACjC,MAAM,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACtE,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;YAC5B,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;YAE5B,sBAAsB;YACtB,MAAM,CAAC,KAAK,CAAC,oBAAoB,CAAC,kBAAkB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QACrE,CAAC,CAAC;QAEF,2DAA2D;QAC3D,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,EAAE;YACvB,IAAI,KAAK,CAAC,OAAO;gBAAE,KAAK,CAAC,cAAc,EAAE,CAAC,CAAC,mCAAmC;YAC9E,KAAK,CAAC,eAAe,EAAE,CAAC;YACxB,IAAI,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;YACjE,IAAI,IAAI,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YACtC,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;YACtD,aAAa;YACb,IAAI,CAAC,OAAO,EAAE,CAAC;QACnB,CAAC,CAAC;QAEF,qBAAqB;QACrB,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,WAAW,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;QAC7C,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,WAAW,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;QAC7C,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;QAC/C,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;IAC7C,CAAC;CACJ;AAtGD,2BAsGC","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","var superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","module.exports = require(\"regenerator-runtime\");\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nvar K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = { __proto__: Uint8Array.prototype, foo: function () { return 42 } }\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  var buf = new Uint8Array(length)\n  buf.__proto__ = Buffer.prototype\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\n// Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\nif (typeof Symbol !== 'undefined' && Symbol.species != null &&\n    Buffer[Symbol.species] === Buffer) {\n  Object.defineProperty(Buffer, Symbol.species, {\n    value: null,\n    configurable: true,\n    enumerable: false,\n    writable: false\n  })\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayLike(value)\n  }\n\n  if (value == null) {\n    throw TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  var valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  var b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(\n      value[Symbol.toPrimitive]('string'), encodingOrOffset, length\n    )\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nBuffer.prototype.__proto__ = Uint8Array.prototype\nBuffer.__proto__ = Uint8Array\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  var length = byteLength(string, encoding) | 0\n  var buf = createBuffer(length)\n\n  var actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  var buf = createBuffer(length)\n  for (var i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  var buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  buf.__proto__ = Buffer.prototype\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    var buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      buf = Buffer.from(buf)\n    }\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  var len = string.length\n  var mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  var strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n        : (firstByte > 0xBF) ? 2\n          : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  newBuf.__proto__ = Buffer.prototype\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (var i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    var len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\n\nfunction isArray(arg) {\n  if (Array.isArray) {\n    return Array.isArray(arg);\n  }\n  return objectToString(arg) === '[object Array]';\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = Buffer.isBuffer;\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar objectCreate = Object.create || objectCreatePolyfill\nvar objectKeys = Object.keys || objectKeysPolyfill\nvar bind = Function.prototype.bind || functionBindPolyfill\n\nfunction EventEmitter() {\n  if (!this._events || !Object.prototype.hasOwnProperty.call(this, '_events')) {\n    this._events = objectCreate(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nvar hasDefineProperty;\ntry {\n  var o = {};\n  if (Object.defineProperty) Object.defineProperty(o, 'x', { value: 0 });\n  hasDefineProperty = o.x === 0;\n} catch (err) { hasDefineProperty = false }\nif (hasDefineProperty) {\n  Object.defineProperty(EventEmitter, 'defaultMaxListeners', {\n    enumerable: true,\n    get: function() {\n      return defaultMaxListeners;\n    },\n    set: function(arg) {\n      // check whether the input is a positive number (whose value is zero or\n      // greater and not a NaN).\n      if (typeof arg !== 'number' || arg < 0 || arg !== arg)\n        throw new TypeError('\"defaultMaxListeners\" must be a positive number');\n      defaultMaxListeners = arg;\n    }\n  });\n} else {\n  EventEmitter.defaultMaxListeners = defaultMaxListeners;\n}\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || isNaN(n))\n    throw new TypeError('\"n\" argument must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\n// These standalone emit* functions are used to optimize calling of event\n// handlers for fast cases because emit() itself often has a variable number of\n// arguments and can be deoptimized because of that. These functions always have\n// the same number of arguments and thus do not get deoptimized, so the code\n// inside them can execute faster.\nfunction emitNone(handler, isFn, self) {\n  if (isFn)\n    handler.call(self);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self);\n  }\n}\nfunction emitOne(handler, isFn, self, arg1) {\n  if (isFn)\n    handler.call(self, arg1);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1);\n  }\n}\nfunction emitTwo(handler, isFn, self, arg1, arg2) {\n  if (isFn)\n    handler.call(self, arg1, arg2);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2);\n  }\n}\nfunction emitThree(handler, isFn, self, arg1, arg2, arg3) {\n  if (isFn)\n    handler.call(self, arg1, arg2, arg3);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2, arg3);\n  }\n}\n\nfunction emitMany(handler, isFn, self, args) {\n  if (isFn)\n    handler.apply(self, args);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].apply(self, args);\n  }\n}\n\nEventEmitter.prototype.emit = function emit(type) {\n  var er, handler, len, args, i, events;\n  var doError = (type === 'error');\n\n  events = this._events;\n  if (events)\n    doError = (doError && events.error == null);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    if (arguments.length > 1)\n      er = arguments[1];\n    if (er instanceof Error) {\n      throw er; // Unhandled 'error' event\n    } else {\n      // At least give some kind of context to the user\n      var err = new Error('Unhandled \"error\" event. (' + er + ')');\n      err.context = er;\n      throw err;\n    }\n    return false;\n  }\n\n  handler = events[type];\n\n  if (!handler)\n    return false;\n\n  var isFn = typeof handler === 'function';\n  len = arguments.length;\n  switch (len) {\n      // fast cases\n    case 1:\n      emitNone(handler, isFn, this);\n      break;\n    case 2:\n      emitOne(handler, isFn, this, arguments[1]);\n      break;\n    case 3:\n      emitTwo(handler, isFn, this, arguments[1], arguments[2]);\n      break;\n    case 4:\n      emitThree(handler, isFn, this, arguments[1], arguments[2], arguments[3]);\n      break;\n      // slower\n    default:\n      args = new Array(len - 1);\n      for (i = 1; i < len; i++)\n        args[i - 1] = arguments[i];\n      emitMany(handler, isFn, this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n\n  events = target._events;\n  if (!events) {\n    events = target._events = objectCreate(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener) {\n      target.emit('newListener', type,\n          listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (!existing) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n          prepend ? [listener, existing] : [existing, listener];\n    } else {\n      // If we've already got an array, just append.\n      if (prepend) {\n        existing.unshift(listener);\n      } else {\n        existing.push(listener);\n      }\n    }\n\n    // Check for listener leak\n    if (!existing.warned) {\n      m = $getMaxListeners(target);\n      if (m && m > 0 && existing.length > m) {\n        existing.warned = true;\n        var w = new Error('Possible EventEmitter memory leak detected. ' +\n            existing.length + ' \"' + String(type) + '\" listeners ' +\n            'added. Use emitter.setMaxListeners() to ' +\n            'increase limit.');\n        w.name = 'MaxListenersExceededWarning';\n        w.emitter = target;\n        w.type = type;\n        w.count = existing.length;\n        if (typeof console === 'object' && console.warn) {\n          console.warn('%s: %s', w.name, w.message);\n        }\n      }\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    switch (arguments.length) {\n      case 0:\n        return this.listener.call(this.target);\n      case 1:\n        return this.listener.call(this.target, arguments[0]);\n      case 2:\n        return this.listener.call(this.target, arguments[0], arguments[1]);\n      case 3:\n        return this.listener.call(this.target, arguments[0], arguments[1],\n            arguments[2]);\n      default:\n        var args = new Array(arguments.length);\n        for (var i = 0; i < args.length; ++i)\n          args[i] = arguments[i];\n        this.listener.apply(this.target, args);\n    }\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = bind.call(onceWrapper, state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      list = events[type];\n      if (!list)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = objectCreate(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else\n          spliceOne(list, position);\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (!events.removeListener) {\n        if (arguments.length === 0) {\n          this._events = objectCreate(null);\n          this._eventsCount = 0;\n        } else if (events[type]) {\n          if (--this._eventsCount === 0)\n            this._events = objectCreate(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = objectKeys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = objectCreate(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (!events)\n    return [];\n\n  var evlistener = events[type];\n  if (!evlistener)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];\n};\n\n// About 1.5x faster than the two-arg version of Array#splice().\nfunction spliceOne(list, index) {\n  for (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1)\n    list[i] = list[k];\n  list.pop();\n}\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction objectCreatePolyfill(proto) {\n  var F = function() {};\n  F.prototype = proto;\n  return new F;\n}\nfunction objectKeysPolyfill(obj) {\n  var keys = [];\n  for (var k in obj) if (Object.prototype.hasOwnProperty.call(obj, k)) {\n    keys.push(k);\n  }\n  return k;\n}\nfunction functionBindPolyfill(context) {\n  var fn = this;\n  return function () {\n    return fn.apply(context, arguments);\n  };\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","'use strict';\n\nif (typeof process === 'undefined' ||\n    !process.version ||\n    process.version.indexOf('v0.') === 0 ||\n    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {\n  module.exports = { nextTick: nextTick };\n} else {\n  module.exports = process\n}\n\nfunction nextTick(fn, arg1, arg2, arg3) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('\"callback\" argument must be a function');\n  }\n  var len = arguments.length;\n  var args, i;\n  switch (len) {\n  case 0:\n  case 1:\n    return process.nextTick(fn);\n  case 2:\n    return process.nextTick(function afterTickOne() {\n      fn.call(null, arg1);\n    });\n  case 3:\n    return process.nextTick(function afterTickTwo() {\n      fn.call(null, arg1, arg2);\n    });\n  case 4:\n    return process.nextTick(function afterTickThree() {\n      fn.call(null, arg1, arg2, arg3);\n    });\n  default:\n    args = new Array(len - 1);\n    i = 0;\n    while (i < args.length) {\n      args[i++] = arguments[i];\n    }\n    return process.nextTick(function afterTick() {\n      fn.apply(null, args);\n    });\n  }\n}\n\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","module.exports = require('./lib/_stream_duplex.js');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    keys.push(key);\n  }return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\n\nutil.inherits(Duplex, Readable);\n\n{\n  // avoid scope creep, the keys array can then be collected\n  var keys = objectKeys(Writable.prototype);\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false) this.readable = false;\n\n  if (options && options.writable === false) this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  pna.nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});\n\nDuplex.prototype._destroy = function (err, cb) {\n  this.push(null);\n  this.end();\n\n  pna.nextTick(cb, err);\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\n\nvar Transform = require('./_stream_transform');\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar isArray = require('isarray');\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = require('events').EventEmitter;\n\nvar EElistenerCount = function (emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar debugUtil = require('util');\nvar debug = void 0;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function () {};\n}\n/*</replacement>*/\n\nvar BufferList = require('./internal/streams/BufferList');\nvar destroyImpl = require('./internal/streams/destroy');\nvar StringDecoder;\n\nutil.inherits(Readable, Stream);\n\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\n\nfunction ReadableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  var readableHwm = options.readableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (readableHwm || readableHwm === 0)) this.highWaterMark = readableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n\n  Stream.call(this);\n}\n\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n  }\n});\n\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\nReadable.prototype._destroy = function (err, cb) {\n  this.push(null);\n  cb(err);\n};\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\n\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  var state = stream._readableState;\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n    if (er) {\n      stream.emit('error', er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n\n      if (addToFront) {\n        if (state.endEmitted) stream.emit('error', new Error('stream.unshift() after end event'));else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        stream.emit('error', new Error('stream.push() after EOF'));\n      } else {\n        state.reading = false;\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n    }\n  }\n\n  return needMoreData(state);\n}\n\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    stream.emit('data', chunk);\n    stream.read(0);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n\n    if (state.needReadable) emitReadable(stream);\n  }\n  maybeReadMore(stream, state);\n}\n\nfunction chunkInvalid(state, chunk) {\n  var er;\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);\n}\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n  return this;\n};\n\n// Don't raise the hwm > 8MB\nvar MAX_HWM = 0x800000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n\n  return ret;\n};\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // emit 'readable' now to make sure it gets picked up.\n  emitReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    if (state.sync) pna.nextTick(emitReadable_, stream);else emitReadable_(stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  debug('emit readable');\n  stream.emit('readable');\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    pna.nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;else len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  this.emit('error', new Error('_read() is not implemented'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) pna.nextTick(endFn);else src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  // If the user pushes more data while we're writing to dest then we'll end up\n  // in ondata again. However, we only want to increase awaitDrain once because\n  // dest will only emit one 'drain' event for the multiple writes.\n  // => Introduce a guard on increasing awaitDrain.\n  var increasedAwaitDrain = false;\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    increasedAwaitDrain = false;\n    var ret = dest.write(chunk);\n    if (false === ret && !increasedAwaitDrain) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', src._readableState.awaitDrain);\n        src._readableState.awaitDrain++;\n        increasedAwaitDrain = true;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function () {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = { hasUnpiped: false };\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++) {\n      dests[i].emit('unpipe', this, unpipeInfo);\n    }return this;\n  }\n\n  // try to find the right one.\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this, unpipeInfo);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n\n  if (ev === 'data') {\n    // Start flowing on next tick if stream isn't explicitly paused\n    if (this._readableState.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    var state = this._readableState;\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.emittedReadable = false;\n      if (!state.reading) {\n        pna.nextTick(nReadingNextTick, this);\n      } else if (state.length) {\n        emitReadable(this);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    state.flowing = true;\n    resume(this, state);\n  }\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    pna.nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  if (!state.reading) {\n    debug('resume read 0');\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  state.awaitDrain = 0;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (false !== this._readableState.flowing) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null) {}\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n\n  var state = this._readableState;\n  var paused = false;\n\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n\n    _this.push(null);\n  });\n\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = _this.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function (method) {\n        return function () {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  }\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  this._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return this;\n};\n\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._readableState.highWaterMark;\n  }\n});\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = fromListPartial(n, state.buffer, state.decoder);\n  }\n\n  return ret;\n}\n\n// Extracts only enough buffered data to satisfy the amount requested.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromListPartial(n, list, hasStrings) {\n  var ret;\n  if (n < list.head.data.length) {\n    // slice is the same for buffers and strings\n    ret = list.head.data.slice(0, n);\n    list.head.data = list.head.data.slice(n);\n  } else if (n === list.head.data.length) {\n    // first chunk is a perfect match\n    ret = list.shift();\n  } else {\n    // result spans more than one buffer\n    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);\n  }\n  return ret;\n}\n\n// Copies a specified amount of characters from the list of buffered data\n// chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBufferString(n, list) {\n  var p = list.head;\n  var c = 1;\n  var ret = p.data;\n  n -= ret.length;\n  while (p = p.next) {\n    var str = p.data;\n    var nb = n > str.length ? str.length : n;\n    if (nb === str.length) ret += str;else ret += str.slice(0, n);\n    n -= nb;\n    if (n === 0) {\n      if (nb === str.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = str.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\n// Copies a specified amount of bytes from the list of buffered data chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBuffer(n, list) {\n  var ret = Buffer.allocUnsafe(n);\n  var p = list.head;\n  var c = 1;\n  p.data.copy(ret);\n  n -= p.data.length;\n  while (p = p.next) {\n    var buf = p.data;\n    var nb = n > buf.length ? buf.length : n;\n    buf.copy(ret, ret.length - n, 0, nb);\n    n -= nb;\n    if (n === 0) {\n      if (nb === buf.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = buf.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0) throw new Error('\"endReadable()\" called on non-empty stream');\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    pna.nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\n\nvar Duplex = require('./_stream_duplex');\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(Transform, Duplex);\n\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb) {\n    return this.emit('error', new Error('write callback called multiple times'));\n  }\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    this.push(data);\n\n  cb(er);\n\n  var rs = this._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n\n  Duplex.call(this, options);\n\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  };\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  this.on('prefinish', prefinish);\n}\n\nfunction prefinish() {\n  var _this = this;\n\n  if (typeof this._flush === 'function') {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  throw new Error('_transform() is not implemented');\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nTransform.prototype._destroy = function (err, cb) {\n  var _this2 = this;\n\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n    _this2.emit('close');\n  });\n};\n\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    stream.push(data);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  if (stream._writableState.length) throw new Error('Calling transform done when ws.length != 0');\n\n  if (stream._transformState.transforming) throw new Error('Calling transform done when still transforming');\n\n  return stream.push(null);\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Writable;\n\n/* <replacement> */\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\nvar asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : pna.nextTick;\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\nvar destroyImpl = require('./internal/streams/destroy');\n\nutil.inherits(Writable, Stream);\n\nfunction nop() {}\n\nfunction WritableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  var writableHwm = options.writableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (writableHwm || writableHwm === 0)) this.highWaterMark = writableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // if _final has been called\n  this.finalCalled = false;\n\n  // drain event flag.\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function () {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})();\n\n// Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\nvar realHasInstance;\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function (object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function (object) {\n    return object instanceof this;\n  };\n}\n\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n  if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {\n    return new Writable(options);\n  }\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n\n    if (typeof options.writev === 'function') this._writev = options.writev;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  this.emit('error', new Error('Cannot pipe, not readable'));\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  pna.nextTick(cb, er);\n}\n\n// Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  var er = false;\n\n  if (chunk === null) {\n    er = new TypeError('May not write null values to stream');\n  } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  if (er) {\n    stream.emit('error', er);\n    pna.nextTick(cb, er);\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n\n  if (typeof cb !== 'function') cb = nop;\n\n  if (state.ended) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  var state = this._writableState;\n\n  state.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n\n    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\n\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    pna.nextTick(cb, er);\n    // this can emit finish, and it will always happen\n    // after error\n    pna.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n    // this can emit finish, but finish must\n    // always follow error\n    finishMaybe(stream, state);\n  }\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state);\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      /*<replacement>*/\n      asyncWrite(afterWrite, stream, state, finished, cb);\n      /*</replacement>*/\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n\n    var count = 0;\n    var allBuffers = true;\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n    buffer.allBuffers = allBuffers;\n\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new Error('_write() is not implemented'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending && !state.finished) endWritable(this, state, cb);\n};\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n    if (err) {\n      stream.emit('error', err);\n    }\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function') {\n      state.pendingcb++;\n      state.finalCalled = true;\n      pna.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    prefinish(stream, state);\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n    }\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) pna.nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\n\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  }\n  if (state.corkedRequestsFree) {\n    state.corkedRequestsFree.next = corkReq;\n  } else {\n    state.corkedRequestsFree = corkReq;\n  }\n}\n\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  get: function () {\n    if (this._writableState === undefined) {\n      return false;\n    }\n    return this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._writableState.destroyed = value;\n  }\n});\n\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\nWritable.prototype._destroy = function (err, cb) {\n  this.end();\n  cb(err);\n};","'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Buffer = require('safe-buffer').Buffer;\nvar util = require('util');\n\nfunction copyBuffer(src, target, offset) {\n  src.copy(target, offset);\n}\n\nmodule.exports = function () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  BufferList.prototype.push = function push(v) {\n    var entry = { data: v, next: null };\n    if (this.length > 0) this.tail.next = entry;else this.head = entry;\n    this.tail = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.unshift = function unshift(v) {\n    var entry = { data: v, next: this.head };\n    if (this.length === 0) this.tail = entry;\n    this.head = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.shift = function shift() {\n    if (this.length === 0) return;\n    var ret = this.head.data;\n    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n    --this.length;\n    return ret;\n  };\n\n  BufferList.prototype.clear = function clear() {\n    this.head = this.tail = null;\n    this.length = 0;\n  };\n\n  BufferList.prototype.join = function join(s) {\n    if (this.length === 0) return '';\n    var p = this.head;\n    var ret = '' + p.data;\n    while (p = p.next) {\n      ret += s + p.data;\n    }return ret;\n  };\n\n  BufferList.prototype.concat = function concat(n) {\n    if (this.length === 0) return Buffer.alloc(0);\n    if (this.length === 1) return this.head.data;\n    var ret = Buffer.allocUnsafe(n >>> 0);\n    var p = this.head;\n    var i = 0;\n    while (p) {\n      copyBuffer(p.data, ret, i);\n      i += p.data.length;\n      p = p.next;\n    }\n    return ret;\n  };\n\n  return BufferList;\n}();\n\nif (util && util.inspect && util.inspect.custom) {\n  module.exports.prototype[util.inspect.custom] = function () {\n    var obj = util.inspect({ length: this.length });\n    return this.constructor.name + ' ' + obj;\n  };\n}","'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {\n      pna.nextTick(emitErrorNT, this, err);\n    }\n    return this;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      pna.nextTick(emitErrorNT, _this, err);\n      if (_this._writableState) {\n        _this._writableState.errorEmitted = true;\n      }\n    } else if (cb) {\n      cb(err);\n    }\n  });\n\n  return this;\n}\n\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\n\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\n\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy\n};","module.exports = require('events').EventEmitter;\n","module.exports = require('./readable').PassThrough\n","exports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\n","module.exports = require('./readable').Transform\n","module.exports = require('./lib/_stream_writable.js');\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n",";(function (sax) { // wrapper for non-node envs\n  sax.parser = function (strict, opt) { return new SAXParser(strict, opt) }\n  sax.SAXParser = SAXParser\n  sax.SAXStream = SAXStream\n  sax.createStream = createStream\n\n  // When we pass the MAX_BUFFER_LENGTH position, start checking for buffer overruns.\n  // When we check, schedule the next check for MAX_BUFFER_LENGTH - (max(buffer lengths)),\n  // since that's the earliest that a buffer overrun could occur.  This way, checks are\n  // as rare as required, but as often as necessary to ensure never crossing this bound.\n  // Furthermore, buffers are only tested at most once per write(), so passing a very\n  // large string into write() might have undesirable effects, but this is manageable by\n  // the caller, so it is assumed to be safe.  Thus, a call to write() may, in the extreme\n  // edge case, result in creating at most one complete copy of the string passed in.\n  // Set to Infinity to have unlimited buffers.\n  sax.MAX_BUFFER_LENGTH = 64 * 1024\n\n  var buffers = [\n    'comment', 'sgmlDecl', 'textNode', 'tagName', 'doctype',\n    'procInstName', 'procInstBody', 'entity', 'attribName',\n    'attribValue', 'cdata', 'script'\n  ]\n\n  sax.EVENTS = [\n    'text',\n    'processinginstruction',\n    'sgmldeclaration',\n    'doctype',\n    'comment',\n    'opentagstart',\n    'attribute',\n    'opentag',\n    'closetag',\n    'opencdata',\n    'cdata',\n    'closecdata',\n    'error',\n    'end',\n    'ready',\n    'script',\n    'opennamespace',\n    'closenamespace'\n  ]\n\n  function SAXParser (strict, opt) {\n    if (!(this instanceof SAXParser)) {\n      return new SAXParser(strict, opt)\n    }\n\n    var parser = this\n    clearBuffers(parser)\n    parser.q = parser.c = ''\n    parser.bufferCheckPosition = sax.MAX_BUFFER_LENGTH\n    parser.opt = opt || {}\n    parser.opt.lowercase = parser.opt.lowercase || parser.opt.lowercasetags\n    parser.looseCase = parser.opt.lowercase ? 'toLowerCase' : 'toUpperCase'\n    parser.tags = []\n    parser.closed = parser.closedRoot = parser.sawRoot = false\n    parser.tag = parser.error = null\n    parser.strict = !!strict\n    parser.noscript = !!(strict || parser.opt.noscript)\n    parser.state = S.BEGIN\n    parser.strictEntities = parser.opt.strictEntities\n    parser.ENTITIES = parser.strictEntities ? Object.create(sax.XML_ENTITIES) : Object.create(sax.ENTITIES)\n    parser.attribList = []\n\n    // namespaces form a prototype chain.\n    // it always points at the current tag,\n    // which protos to its parent tag.\n    if (parser.opt.xmlns) {\n      parser.ns = Object.create(rootNS)\n    }\n\n    // mostly just for error reporting\n    parser.trackPosition = parser.opt.position !== false\n    if (parser.trackPosition) {\n      parser.position = parser.line = parser.column = 0\n    }\n    emit(parser, 'onready')\n  }\n\n  if (!Object.create) {\n    Object.create = function (o) {\n      function F () {}\n      F.prototype = o\n      var newf = new F()\n      return newf\n    }\n  }\n\n  if (!Object.keys) {\n    Object.keys = function (o) {\n      var a = []\n      for (var i in o) if (o.hasOwnProperty(i)) a.push(i)\n      return a\n    }\n  }\n\n  function checkBufferLength (parser) {\n    var maxAllowed = Math.max(sax.MAX_BUFFER_LENGTH, 10)\n    var maxActual = 0\n    for (var i = 0, l = buffers.length; i < l; i++) {\n      var len = parser[buffers[i]].length\n      if (len > maxAllowed) {\n        // Text/cdata nodes can get big, and since they're buffered,\n        // we can get here under normal conditions.\n        // Avoid issues by emitting the text node now,\n        // so at least it won't get any bigger.\n        switch (buffers[i]) {\n          case 'textNode':\n            closeText(parser)\n            break\n\n          case 'cdata':\n            emitNode(parser, 'oncdata', parser.cdata)\n            parser.cdata = ''\n            break\n\n          case 'script':\n            emitNode(parser, 'onscript', parser.script)\n            parser.script = ''\n            break\n\n          default:\n            error(parser, 'Max buffer length exceeded: ' + buffers[i])\n        }\n      }\n      maxActual = Math.max(maxActual, len)\n    }\n    // schedule the next check for the earliest possible buffer overrun.\n    var m = sax.MAX_BUFFER_LENGTH - maxActual\n    parser.bufferCheckPosition = m + parser.position\n  }\n\n  function clearBuffers (parser) {\n    for (var i = 0, l = buffers.length; i < l; i++) {\n      parser[buffers[i]] = ''\n    }\n  }\n\n  function flushBuffers (parser) {\n    closeText(parser)\n    if (parser.cdata !== '') {\n      emitNode(parser, 'oncdata', parser.cdata)\n      parser.cdata = ''\n    }\n    if (parser.script !== '') {\n      emitNode(parser, 'onscript', parser.script)\n      parser.script = ''\n    }\n  }\n\n  SAXParser.prototype = {\n    end: function () { end(this) },\n    write: write,\n    resume: function () { this.error = null; return this },\n    close: function () { return this.write(null) },\n    flush: function () { flushBuffers(this) }\n  }\n\n  var Stream\n  try {\n    Stream = require('stream').Stream\n  } catch (ex) {\n    Stream = function () {}\n  }\n\n  var streamWraps = sax.EVENTS.filter(function (ev) {\n    return ev !== 'error' && ev !== 'end'\n  })\n\n  function createStream (strict, opt) {\n    return new SAXStream(strict, opt)\n  }\n\n  function SAXStream (strict, opt) {\n    if (!(this instanceof SAXStream)) {\n      return new SAXStream(strict, opt)\n    }\n\n    Stream.apply(this)\n\n    this._parser = new SAXParser(strict, opt)\n    this.writable = true\n    this.readable = true\n\n    var me = this\n\n    this._parser.onend = function () {\n      me.emit('end')\n    }\n\n    this._parser.onerror = function (er) {\n      me.emit('error', er)\n\n      // if didn't throw, then means error was handled.\n      // go ahead and clear error, so we can write again.\n      me._parser.error = null\n    }\n\n    this._decoder = null\n\n    streamWraps.forEach(function (ev) {\n      Object.defineProperty(me, 'on' + ev, {\n        get: function () {\n          return me._parser['on' + ev]\n        },\n        set: function (h) {\n          if (!h) {\n            me.removeAllListeners(ev)\n            me._parser['on' + ev] = h\n            return h\n          }\n          me.on(ev, h)\n        },\n        enumerable: true,\n        configurable: false\n      })\n    })\n  }\n\n  SAXStream.prototype = Object.create(Stream.prototype, {\n    constructor: {\n      value: SAXStream\n    }\n  })\n\n  SAXStream.prototype.write = function (data) {\n    if (typeof Buffer === 'function' &&\n      typeof Buffer.isBuffer === 'function' &&\n      Buffer.isBuffer(data)) {\n      if (!this._decoder) {\n        var SD = require('string_decoder').StringDecoder\n        this._decoder = new SD('utf8')\n      }\n      data = this._decoder.write(data)\n    }\n\n    this._parser.write(data.toString())\n    this.emit('data', data)\n    return true\n  }\n\n  SAXStream.prototype.end = function (chunk) {\n    if (chunk && chunk.length) {\n      this.write(chunk)\n    }\n    this._parser.end()\n    return true\n  }\n\n  SAXStream.prototype.on = function (ev, handler) {\n    var me = this\n    if (!me._parser['on' + ev] && streamWraps.indexOf(ev) !== -1) {\n      me._parser['on' + ev] = function () {\n        var args = arguments.length === 1 ? [arguments[0]] : Array.apply(null, arguments)\n        args.splice(0, 0, ev)\n        me.emit.apply(me, args)\n      }\n    }\n\n    return Stream.prototype.on.call(me, ev, handler)\n  }\n\n  // this really needs to be replaced with character classes.\n  // XML allows all manner of ridiculous numbers and digits.\n  var CDATA = '[CDATA['\n  var DOCTYPE = 'DOCTYPE'\n  var XML_NAMESPACE = 'http://www.w3.org/XML/1998/namespace'\n  var XMLNS_NAMESPACE = 'http://www.w3.org/2000/xmlns/'\n  var rootNS = { xml: XML_NAMESPACE, xmlns: XMLNS_NAMESPACE }\n\n  // http://www.w3.org/TR/REC-xml/#NT-NameStartChar\n  // This implementation works on strings, a single character at a time\n  // as such, it cannot ever support astral-plane characters (10000-EFFFF)\n  // without a significant breaking change to either this  parser, or the\n  // JavaScript language.  Implementation of an emoji-capable xml parser\n  // is left as an exercise for the reader.\n  var nameStart = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/\n\n  var nameBody = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/\n\n  var entityStart = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/\n  var entityBody = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/\n\n  function isWhitespace (c) {\n    return c === ' ' || c === '\\n' || c === '\\r' || c === '\\t'\n  }\n\n  function isQuote (c) {\n    return c === '\"' || c === '\\''\n  }\n\n  function isAttribEnd (c) {\n    return c === '>' || isWhitespace(c)\n  }\n\n  function isMatch (regex, c) {\n    return regex.test(c)\n  }\n\n  function notMatch (regex, c) {\n    return !isMatch(regex, c)\n  }\n\n  var S = 0\n  sax.STATE = {\n    BEGIN: S++, // leading byte order mark or whitespace\n    BEGIN_WHITESPACE: S++, // leading whitespace\n    TEXT: S++, // general stuff\n    TEXT_ENTITY: S++, // &amp and such.\n    OPEN_WAKA: S++, // <\n    SGML_DECL: S++, // <!BLARG\n    SGML_DECL_QUOTED: S++, // <!BLARG foo \"bar\n    DOCTYPE: S++, // <!DOCTYPE\n    DOCTYPE_QUOTED: S++, // <!DOCTYPE \"//blah\n    DOCTYPE_DTD: S++, // <!DOCTYPE \"//blah\" [ ...\n    DOCTYPE_DTD_QUOTED: S++, // <!DOCTYPE \"//blah\" [ \"foo\n    COMMENT_STARTING: S++, // <!-\n    COMMENT: S++, // <!--\n    COMMENT_ENDING: S++, // <!-- blah -\n    COMMENT_ENDED: S++, // <!-- blah --\n    CDATA: S++, // <![CDATA[ something\n    CDATA_ENDING: S++, // ]\n    CDATA_ENDING_2: S++, // ]]\n    PROC_INST: S++, // <?hi\n    PROC_INST_BODY: S++, // <?hi there\n    PROC_INST_ENDING: S++, // <?hi \"there\" ?\n    OPEN_TAG: S++, // <strong\n    OPEN_TAG_SLASH: S++, // <strong /\n    ATTRIB: S++, // <a\n    ATTRIB_NAME: S++, // <a foo\n    ATTRIB_NAME_SAW_WHITE: S++, // <a foo _\n    ATTRIB_VALUE: S++, // <a foo=\n    ATTRIB_VALUE_QUOTED: S++, // <a foo=\"bar\n    ATTRIB_VALUE_CLOSED: S++, // <a foo=\"bar\"\n    ATTRIB_VALUE_UNQUOTED: S++, // <a foo=bar\n    ATTRIB_VALUE_ENTITY_Q: S++, // <foo bar=\"&quot;\"\n    ATTRIB_VALUE_ENTITY_U: S++, // <foo bar=&quot\n    CLOSE_TAG: S++, // </a\n    CLOSE_TAG_SAW_WHITE: S++, // </a   >\n    SCRIPT: S++, // <script> ...\n    SCRIPT_ENDING: S++ // <script> ... <\n  }\n\n  sax.XML_ENTITIES = {\n    'amp': '&',\n    'gt': '>',\n    'lt': '<',\n    'quot': '\"',\n    'apos': \"'\"\n  }\n\n  sax.ENTITIES = {\n    'amp': '&',\n    'gt': '>',\n    'lt': '<',\n    'quot': '\"',\n    'apos': \"'\",\n    'AElig': 198,\n    'Aacute': 193,\n    'Acirc': 194,\n    'Agrave': 192,\n    'Aring': 197,\n    'Atilde': 195,\n    'Auml': 196,\n    'Ccedil': 199,\n    'ETH': 208,\n    'Eacute': 201,\n    'Ecirc': 202,\n    'Egrave': 200,\n    'Euml': 203,\n    'Iacute': 205,\n    'Icirc': 206,\n    'Igrave': 204,\n    'Iuml': 207,\n    'Ntilde': 209,\n    'Oacute': 211,\n    'Ocirc': 212,\n    'Ograve': 210,\n    'Oslash': 216,\n    'Otilde': 213,\n    'Ouml': 214,\n    'THORN': 222,\n    'Uacute': 218,\n    'Ucirc': 219,\n    'Ugrave': 217,\n    'Uuml': 220,\n    'Yacute': 221,\n    'aacute': 225,\n    'acirc': 226,\n    'aelig': 230,\n    'agrave': 224,\n    'aring': 229,\n    'atilde': 227,\n    'auml': 228,\n    'ccedil': 231,\n    'eacute': 233,\n    'ecirc': 234,\n    'egrave': 232,\n    'eth': 240,\n    'euml': 235,\n    'iacute': 237,\n    'icirc': 238,\n    'igrave': 236,\n    'iuml': 239,\n    'ntilde': 241,\n    'oacute': 243,\n    'ocirc': 244,\n    'ograve': 242,\n    'oslash': 248,\n    'otilde': 245,\n    'ouml': 246,\n    'szlig': 223,\n    'thorn': 254,\n    'uacute': 250,\n    'ucirc': 251,\n    'ugrave': 249,\n    'uuml': 252,\n    'yacute': 253,\n    'yuml': 255,\n    'copy': 169,\n    'reg': 174,\n    'nbsp': 160,\n    'iexcl': 161,\n    'cent': 162,\n    'pound': 163,\n    'curren': 164,\n    'yen': 165,\n    'brvbar': 166,\n    'sect': 167,\n    'uml': 168,\n    'ordf': 170,\n    'laquo': 171,\n    'not': 172,\n    'shy': 173,\n    'macr': 175,\n    'deg': 176,\n    'plusmn': 177,\n    'sup1': 185,\n    'sup2': 178,\n    'sup3': 179,\n    'acute': 180,\n    'micro': 181,\n    'para': 182,\n    'middot': 183,\n    'cedil': 184,\n    'ordm': 186,\n    'raquo': 187,\n    'frac14': 188,\n    'frac12': 189,\n    'frac34': 190,\n    'iquest': 191,\n    'times': 215,\n    'divide': 247,\n    'OElig': 338,\n    'oelig': 339,\n    'Scaron': 352,\n    'scaron': 353,\n    'Yuml': 376,\n    'fnof': 402,\n    'circ': 710,\n    'tilde': 732,\n    'Alpha': 913,\n    'Beta': 914,\n    'Gamma': 915,\n    'Delta': 916,\n    'Epsilon': 917,\n    'Zeta': 918,\n    'Eta': 919,\n    'Theta': 920,\n    'Iota': 921,\n    'Kappa': 922,\n    'Lambda': 923,\n    'Mu': 924,\n    'Nu': 925,\n    'Xi': 926,\n    'Omicron': 927,\n    'Pi': 928,\n    'Rho': 929,\n    'Sigma': 931,\n    'Tau': 932,\n    'Upsilon': 933,\n    'Phi': 934,\n    'Chi': 935,\n    'Psi': 936,\n    'Omega': 937,\n    'alpha': 945,\n    'beta': 946,\n    'gamma': 947,\n    'delta': 948,\n    'epsilon': 949,\n    'zeta': 950,\n    'eta': 951,\n    'theta': 952,\n    'iota': 953,\n    'kappa': 954,\n    'lambda': 955,\n    'mu': 956,\n    'nu': 957,\n    'xi': 958,\n    'omicron': 959,\n    'pi': 960,\n    'rho': 961,\n    'sigmaf': 962,\n    'sigma': 963,\n    'tau': 964,\n    'upsilon': 965,\n    'phi': 966,\n    'chi': 967,\n    'psi': 968,\n    'omega': 969,\n    'thetasym': 977,\n    'upsih': 978,\n    'piv': 982,\n    'ensp': 8194,\n    'emsp': 8195,\n    'thinsp': 8201,\n    'zwnj': 8204,\n    'zwj': 8205,\n    'lrm': 8206,\n    'rlm': 8207,\n    'ndash': 8211,\n    'mdash': 8212,\n    'lsquo': 8216,\n    'rsquo': 8217,\n    'sbquo': 8218,\n    'ldquo': 8220,\n    'rdquo': 8221,\n    'bdquo': 8222,\n    'dagger': 8224,\n    'Dagger': 8225,\n    'bull': 8226,\n    'hellip': 8230,\n    'permil': 8240,\n    'prime': 8242,\n    'Prime': 8243,\n    'lsaquo': 8249,\n    'rsaquo': 8250,\n    'oline': 8254,\n    'frasl': 8260,\n    'euro': 8364,\n    'image': 8465,\n    'weierp': 8472,\n    'real': 8476,\n    'trade': 8482,\n    'alefsym': 8501,\n    'larr': 8592,\n    'uarr': 8593,\n    'rarr': 8594,\n    'darr': 8595,\n    'harr': 8596,\n    'crarr': 8629,\n    'lArr': 8656,\n    'uArr': 8657,\n    'rArr': 8658,\n    'dArr': 8659,\n    'hArr': 8660,\n    'forall': 8704,\n    'part': 8706,\n    'exist': 8707,\n    'empty': 8709,\n    'nabla': 8711,\n    'isin': 8712,\n    'notin': 8713,\n    'ni': 8715,\n    'prod': 8719,\n    'sum': 8721,\n    'minus': 8722,\n    'lowast': 8727,\n    'radic': 8730,\n    'prop': 8733,\n    'infin': 8734,\n    'ang': 8736,\n    'and': 8743,\n    'or': 8744,\n    'cap': 8745,\n    'cup': 8746,\n    'int': 8747,\n    'there4': 8756,\n    'sim': 8764,\n    'cong': 8773,\n    'asymp': 8776,\n    'ne': 8800,\n    'equiv': 8801,\n    'le': 8804,\n    'ge': 8805,\n    'sub': 8834,\n    'sup': 8835,\n    'nsub': 8836,\n    'sube': 8838,\n    'supe': 8839,\n    'oplus': 8853,\n    'otimes': 8855,\n    'perp': 8869,\n    'sdot': 8901,\n    'lceil': 8968,\n    'rceil': 8969,\n    'lfloor': 8970,\n    'rfloor': 8971,\n    'lang': 9001,\n    'rang': 9002,\n    'loz': 9674,\n    'spades': 9824,\n    'clubs': 9827,\n    'hearts': 9829,\n    'diams': 9830\n  }\n\n  Object.keys(sax.ENTITIES).forEach(function (key) {\n    var e = sax.ENTITIES[key]\n    var s = typeof e === 'number' ? String.fromCharCode(e) : e\n    sax.ENTITIES[key] = s\n  })\n\n  for (var s in sax.STATE) {\n    sax.STATE[sax.STATE[s]] = s\n  }\n\n  // shorthand\n  S = sax.STATE\n\n  function emit (parser, event, data) {\n    parser[event] && parser[event](data)\n  }\n\n  function emitNode (parser, nodeType, data) {\n    if (parser.textNode) closeText(parser)\n    emit(parser, nodeType, data)\n  }\n\n  function closeText (parser) {\n    parser.textNode = textopts(parser.opt, parser.textNode)\n    if (parser.textNode) emit(parser, 'ontext', parser.textNode)\n    parser.textNode = ''\n  }\n\n  function textopts (opt, text) {\n    if (opt.trim) text = text.trim()\n    if (opt.normalize) text = text.replace(/\\s+/g, ' ')\n    return text\n  }\n\n  function error (parser, er) {\n    closeText(parser)\n    if (parser.trackPosition) {\n      er += '\\nLine: ' + parser.line +\n        '\\nColumn: ' + parser.column +\n        '\\nChar: ' + parser.c\n    }\n    er = new Error(er)\n    parser.error = er\n    emit(parser, 'onerror', er)\n    return parser\n  }\n\n  function end (parser) {\n    if (parser.sawRoot && !parser.closedRoot) strictFail(parser, 'Unclosed root tag')\n    if ((parser.state !== S.BEGIN) &&\n      (parser.state !== S.BEGIN_WHITESPACE) &&\n      (parser.state !== S.TEXT)) {\n      error(parser, 'Unexpected end')\n    }\n    closeText(parser)\n    parser.c = ''\n    parser.closed = true\n    emit(parser, 'onend')\n    SAXParser.call(parser, parser.strict, parser.opt)\n    return parser\n  }\n\n  function strictFail (parser, message) {\n    if (typeof parser !== 'object' || !(parser instanceof SAXParser)) {\n      throw new Error('bad call to strictFail')\n    }\n    if (parser.strict) {\n      error(parser, message)\n    }\n  }\n\n  function newTag (parser) {\n    if (!parser.strict) parser.tagName = parser.tagName[parser.looseCase]()\n    var parent = parser.tags[parser.tags.length - 1] || parser\n    var tag = parser.tag = { name: parser.tagName, attributes: {} }\n\n    // will be overridden if tag contails an xmlns=\"foo\" or xmlns:foo=\"bar\"\n    if (parser.opt.xmlns) {\n      tag.ns = parent.ns\n    }\n    parser.attribList.length = 0\n    emitNode(parser, 'onopentagstart', tag)\n  }\n\n  function qname (name, attribute) {\n    var i = name.indexOf(':')\n    var qualName = i < 0 ? [ '', name ] : name.split(':')\n    var prefix = qualName[0]\n    var local = qualName[1]\n\n    // <x \"xmlns\"=\"http://foo\">\n    if (attribute && name === 'xmlns') {\n      prefix = 'xmlns'\n      local = ''\n    }\n\n    return { prefix: prefix, local: local }\n  }\n\n  function attrib (parser) {\n    if (!parser.strict) {\n      parser.attribName = parser.attribName[parser.looseCase]()\n    }\n\n    if (parser.attribList.indexOf(parser.attribName) !== -1 ||\n      parser.tag.attributes.hasOwnProperty(parser.attribName)) {\n      parser.attribName = parser.attribValue = ''\n      return\n    }\n\n    if (parser.opt.xmlns) {\n      var qn = qname(parser.attribName, true)\n      var prefix = qn.prefix\n      var local = qn.local\n\n      if (prefix === 'xmlns') {\n        // namespace binding attribute. push the binding into scope\n        if (local === 'xml' && parser.attribValue !== XML_NAMESPACE) {\n          strictFail(parser,\n            'xml: prefix must be bound to ' + XML_NAMESPACE + '\\n' +\n            'Actual: ' + parser.attribValue)\n        } else if (local === 'xmlns' && parser.attribValue !== XMLNS_NAMESPACE) {\n          strictFail(parser,\n            'xmlns: prefix must be bound to ' + XMLNS_NAMESPACE + '\\n' +\n            'Actual: ' + parser.attribValue)\n        } else {\n          var tag = parser.tag\n          var parent = parser.tags[parser.tags.length - 1] || parser\n          if (tag.ns === parent.ns) {\n            tag.ns = Object.create(parent.ns)\n          }\n          tag.ns[local] = parser.attribValue\n        }\n      }\n\n      // defer onattribute events until all attributes have been seen\n      // so any new bindings can take effect. preserve attribute order\n      // so deferred events can be emitted in document order\n      parser.attribList.push([parser.attribName, parser.attribValue])\n    } else {\n      // in non-xmlns mode, we can emit the event right away\n      parser.tag.attributes[parser.attribName] = parser.attribValue\n      emitNode(parser, 'onattribute', {\n        name: parser.attribName,\n        value: parser.attribValue\n      })\n    }\n\n    parser.attribName = parser.attribValue = ''\n  }\n\n  function openTag (parser, selfClosing) {\n    if (parser.opt.xmlns) {\n      // emit namespace binding events\n      var tag = parser.tag\n\n      // add namespace info to tag\n      var qn = qname(parser.tagName)\n      tag.prefix = qn.prefix\n      tag.local = qn.local\n      tag.uri = tag.ns[qn.prefix] || ''\n\n      if (tag.prefix && !tag.uri) {\n        strictFail(parser, 'Unbound namespace prefix: ' +\n          JSON.stringify(parser.tagName))\n        tag.uri = qn.prefix\n      }\n\n      var parent = parser.tags[parser.tags.length - 1] || parser\n      if (tag.ns && parent.ns !== tag.ns) {\n        Object.keys(tag.ns).forEach(function (p) {\n          emitNode(parser, 'onopennamespace', {\n            prefix: p,\n            uri: tag.ns[p]\n          })\n        })\n      }\n\n      // handle deferred onattribute events\n      // Note: do not apply default ns to attributes:\n      //   http://www.w3.org/TR/REC-xml-names/#defaulting\n      for (var i = 0, l = parser.attribList.length; i < l; i++) {\n        var nv = parser.attribList[i]\n        var name = nv[0]\n        var value = nv[1]\n        var qualName = qname(name, true)\n        var prefix = qualName.prefix\n        var local = qualName.local\n        var uri = prefix === '' ? '' : (tag.ns[prefix] || '')\n        var a = {\n          name: name,\n          value: value,\n          prefix: prefix,\n          local: local,\n          uri: uri\n        }\n\n        // if there's any attributes with an undefined namespace,\n        // then fail on them now.\n        if (prefix && prefix !== 'xmlns' && !uri) {\n          strictFail(parser, 'Unbound namespace prefix: ' +\n            JSON.stringify(prefix))\n          a.uri = prefix\n        }\n        parser.tag.attributes[name] = a\n        emitNode(parser, 'onattribute', a)\n      }\n      parser.attribList.length = 0\n    }\n\n    parser.tag.isSelfClosing = !!selfClosing\n\n    // process the tag\n    parser.sawRoot = true\n    parser.tags.push(parser.tag)\n    emitNode(parser, 'onopentag', parser.tag)\n    if (!selfClosing) {\n      // special case for <script> in non-strict mode.\n      if (!parser.noscript && parser.tagName.toLowerCase() === 'script') {\n        parser.state = S.SCRIPT\n      } else {\n        parser.state = S.TEXT\n      }\n      parser.tag = null\n      parser.tagName = ''\n    }\n    parser.attribName = parser.attribValue = ''\n    parser.attribList.length = 0\n  }\n\n  function closeTag (parser) {\n    if (!parser.tagName) {\n      strictFail(parser, 'Weird empty close tag.')\n      parser.textNode += '</>'\n      parser.state = S.TEXT\n      return\n    }\n\n    if (parser.script) {\n      if (parser.tagName !== 'script') {\n        parser.script += '</' + parser.tagName + '>'\n        parser.tagName = ''\n        parser.state = S.SCRIPT\n        return\n      }\n      emitNode(parser, 'onscript', parser.script)\n      parser.script = ''\n    }\n\n    // first make sure that the closing tag actually exists.\n    // <a><b></c></b></a> will close everything, otherwise.\n    var t = parser.tags.length\n    var tagName = parser.tagName\n    if (!parser.strict) {\n      tagName = tagName[parser.looseCase]()\n    }\n    var closeTo = tagName\n    while (t--) {\n      var close = parser.tags[t]\n      if (close.name !== closeTo) {\n        // fail the first time in strict mode\n        strictFail(parser, 'Unexpected close tag')\n      } else {\n        break\n      }\n    }\n\n    // didn't find it.  we already failed for strict, so just abort.\n    if (t < 0) {\n      strictFail(parser, 'Unmatched closing tag: ' + parser.tagName)\n      parser.textNode += '</' + parser.tagName + '>'\n      parser.state = S.TEXT\n      return\n    }\n    parser.tagName = tagName\n    var s = parser.tags.length\n    while (s-- > t) {\n      var tag = parser.tag = parser.tags.pop()\n      parser.tagName = parser.tag.name\n      emitNode(parser, 'onclosetag', parser.tagName)\n\n      var x = {}\n      for (var i in tag.ns) {\n        x[i] = tag.ns[i]\n      }\n\n      var parent = parser.tags[parser.tags.length - 1] || parser\n      if (parser.opt.xmlns && tag.ns !== parent.ns) {\n        // remove namespace bindings introduced by tag\n        Object.keys(tag.ns).forEach(function (p) {\n          var n = tag.ns[p]\n          emitNode(parser, 'onclosenamespace', { prefix: p, uri: n })\n        })\n      }\n    }\n    if (t === 0) parser.closedRoot = true\n    parser.tagName = parser.attribValue = parser.attribName = ''\n    parser.attribList.length = 0\n    parser.state = S.TEXT\n  }\n\n  function parseEntity (parser) {\n    var entity = parser.entity\n    var entityLC = entity.toLowerCase()\n    var num\n    var numStr = ''\n\n    if (parser.ENTITIES[entity]) {\n      return parser.ENTITIES[entity]\n    }\n    if (parser.ENTITIES[entityLC]) {\n      return parser.ENTITIES[entityLC]\n    }\n    entity = entityLC\n    if (entity.charAt(0) === '#') {\n      if (entity.charAt(1) === 'x') {\n        entity = entity.slice(2)\n        num = parseInt(entity, 16)\n        numStr = num.toString(16)\n      } else {\n        entity = entity.slice(1)\n        num = parseInt(entity, 10)\n        numStr = num.toString(10)\n      }\n    }\n    entity = entity.replace(/^0+/, '')\n    if (isNaN(num) || numStr.toLowerCase() !== entity) {\n      strictFail(parser, 'Invalid character entity')\n      return '&' + parser.entity + ';'\n    }\n\n    return String.fromCodePoint(num)\n  }\n\n  function beginWhiteSpace (parser, c) {\n    if (c === '<') {\n      parser.state = S.OPEN_WAKA\n      parser.startTagPosition = parser.position\n    } else if (!isWhitespace(c)) {\n      // have to process this as a text node.\n      // weird, but happens.\n      strictFail(parser, 'Non-whitespace before first tag.')\n      parser.textNode = c\n      parser.state = S.TEXT\n    }\n  }\n\n  function charAt (chunk, i) {\n    var result = ''\n    if (i < chunk.length) {\n      result = chunk.charAt(i)\n    }\n    return result\n  }\n\n  function write (chunk) {\n    var parser = this\n    if (this.error) {\n      throw this.error\n    }\n    if (parser.closed) {\n      return error(parser,\n        'Cannot write after close. Assign an onready handler.')\n    }\n    if (chunk === null) {\n      return end(parser)\n    }\n    if (typeof chunk === 'object') {\n      chunk = chunk.toString()\n    }\n    var i = 0\n    var c = ''\n    while (true) {\n      c = charAt(chunk, i++)\n      parser.c = c\n\n      if (!c) {\n        break\n      }\n\n      if (parser.trackPosition) {\n        parser.position++\n        if (c === '\\n') {\n          parser.line++\n          parser.column = 0\n        } else {\n          parser.column++\n        }\n      }\n\n      switch (parser.state) {\n        case S.BEGIN:\n          parser.state = S.BEGIN_WHITESPACE\n          if (c === '\\uFEFF') {\n            continue\n          }\n          beginWhiteSpace(parser, c)\n          continue\n\n        case S.BEGIN_WHITESPACE:\n          beginWhiteSpace(parser, c)\n          continue\n\n        case S.TEXT:\n          if (parser.sawRoot && !parser.closedRoot) {\n            var starti = i - 1\n            while (c && c !== '<' && c !== '&') {\n              c = charAt(chunk, i++)\n              if (c && parser.trackPosition) {\n                parser.position++\n                if (c === '\\n') {\n                  parser.line++\n                  parser.column = 0\n                } else {\n                  parser.column++\n                }\n              }\n            }\n            parser.textNode += chunk.substring(starti, i - 1)\n          }\n          if (c === '<' && !(parser.sawRoot && parser.closedRoot && !parser.strict)) {\n            parser.state = S.OPEN_WAKA\n            parser.startTagPosition = parser.position\n          } else {\n            if (!isWhitespace(c) && (!parser.sawRoot || parser.closedRoot)) {\n              strictFail(parser, 'Text data outside of root node.')\n            }\n            if (c === '&') {\n              parser.state = S.TEXT_ENTITY\n            } else {\n              parser.textNode += c\n            }\n          }\n          continue\n\n        case S.SCRIPT:\n          // only non-strict\n          if (c === '<') {\n            parser.state = S.SCRIPT_ENDING\n          } else {\n            parser.script += c\n          }\n          continue\n\n        case S.SCRIPT_ENDING:\n          if (c === '/') {\n            parser.state = S.CLOSE_TAG\n          } else {\n            parser.script += '<' + c\n            parser.state = S.SCRIPT\n          }\n          continue\n\n        case S.OPEN_WAKA:\n          // either a /, ?, !, or text is coming next.\n          if (c === '!') {\n            parser.state = S.SGML_DECL\n            parser.sgmlDecl = ''\n          } else if (isWhitespace(c)) {\n            // wait for it...\n          } else if (isMatch(nameStart, c)) {\n            parser.state = S.OPEN_TAG\n            parser.tagName = c\n          } else if (c === '/') {\n            parser.state = S.CLOSE_TAG\n            parser.tagName = ''\n          } else if (c === '?') {\n            parser.state = S.PROC_INST\n            parser.procInstName = parser.procInstBody = ''\n          } else {\n            strictFail(parser, 'Unencoded <')\n            // if there was some whitespace, then add that in.\n            if (parser.startTagPosition + 1 < parser.position) {\n              var pad = parser.position - parser.startTagPosition\n              c = new Array(pad).join(' ') + c\n            }\n            parser.textNode += '<' + c\n            parser.state = S.TEXT\n          }\n          continue\n\n        case S.SGML_DECL:\n          if ((parser.sgmlDecl + c).toUpperCase() === CDATA) {\n            emitNode(parser, 'onopencdata')\n            parser.state = S.CDATA\n            parser.sgmlDecl = ''\n            parser.cdata = ''\n          } else if (parser.sgmlDecl + c === '--') {\n            parser.state = S.COMMENT\n            parser.comment = ''\n            parser.sgmlDecl = ''\n          } else if ((parser.sgmlDecl + c).toUpperCase() === DOCTYPE) {\n            parser.state = S.DOCTYPE\n            if (parser.doctype || parser.sawRoot) {\n              strictFail(parser,\n                'Inappropriately located doctype declaration')\n            }\n            parser.doctype = ''\n            parser.sgmlDecl = ''\n          } else if (c === '>') {\n            emitNode(parser, 'onsgmldeclaration', parser.sgmlDecl)\n            parser.sgmlDecl = ''\n            parser.state = S.TEXT\n          } else if (isQuote(c)) {\n            parser.state = S.SGML_DECL_QUOTED\n            parser.sgmlDecl += c\n          } else {\n            parser.sgmlDecl += c\n          }\n          continue\n\n        case S.SGML_DECL_QUOTED:\n          if (c === parser.q) {\n            parser.state = S.SGML_DECL\n            parser.q = ''\n          }\n          parser.sgmlDecl += c\n          continue\n\n        case S.DOCTYPE:\n          if (c === '>') {\n            parser.state = S.TEXT\n            emitNode(parser, 'ondoctype', parser.doctype)\n            parser.doctype = true // just remember that we saw it.\n          } else {\n            parser.doctype += c\n            if (c === '[') {\n              parser.state = S.DOCTYPE_DTD\n            } else if (isQuote(c)) {\n              parser.state = S.DOCTYPE_QUOTED\n              parser.q = c\n            }\n          }\n          continue\n\n        case S.DOCTYPE_QUOTED:\n          parser.doctype += c\n          if (c === parser.q) {\n            parser.q = ''\n            parser.state = S.DOCTYPE\n          }\n          continue\n\n        case S.DOCTYPE_DTD:\n          parser.doctype += c\n          if (c === ']') {\n            parser.state = S.DOCTYPE\n          } else if (isQuote(c)) {\n            parser.state = S.DOCTYPE_DTD_QUOTED\n            parser.q = c\n          }\n          continue\n\n        case S.DOCTYPE_DTD_QUOTED:\n          parser.doctype += c\n          if (c === parser.q) {\n            parser.state = S.DOCTYPE_DTD\n            parser.q = ''\n          }\n          continue\n\n        case S.COMMENT:\n          if (c === '-') {\n            parser.state = S.COMMENT_ENDING\n          } else {\n            parser.comment += c\n          }\n          continue\n\n        case S.COMMENT_ENDING:\n          if (c === '-') {\n            parser.state = S.COMMENT_ENDED\n            parser.comment = textopts(parser.opt, parser.comment)\n            if (parser.comment) {\n              emitNode(parser, 'oncomment', parser.comment)\n            }\n            parser.comment = ''\n          } else {\n            parser.comment += '-' + c\n            parser.state = S.COMMENT\n          }\n          continue\n\n        case S.COMMENT_ENDED:\n          if (c !== '>') {\n            strictFail(parser, 'Malformed comment')\n            // allow <!-- blah -- bloo --> in non-strict mode,\n            // which is a comment of \" blah -- bloo \"\n            parser.comment += '--' + c\n            parser.state = S.COMMENT\n          } else {\n            parser.state = S.TEXT\n          }\n          continue\n\n        case S.CDATA:\n          if (c === ']') {\n            parser.state = S.CDATA_ENDING\n          } else {\n            parser.cdata += c\n          }\n          continue\n\n        case S.CDATA_ENDING:\n          if (c === ']') {\n            parser.state = S.CDATA_ENDING_2\n          } else {\n            parser.cdata += ']' + c\n            parser.state = S.CDATA\n          }\n          continue\n\n        case S.CDATA_ENDING_2:\n          if (c === '>') {\n            if (parser.cdata) {\n              emitNode(parser, 'oncdata', parser.cdata)\n            }\n            emitNode(parser, 'onclosecdata')\n            parser.cdata = ''\n            parser.state = S.TEXT\n          } else if (c === ']') {\n            parser.cdata += ']'\n          } else {\n            parser.cdata += ']]' + c\n            parser.state = S.CDATA\n          }\n          continue\n\n        case S.PROC_INST:\n          if (c === '?') {\n            parser.state = S.PROC_INST_ENDING\n          } else if (isWhitespace(c)) {\n            parser.state = S.PROC_INST_BODY\n          } else {\n            parser.procInstName += c\n          }\n          continue\n\n        case S.PROC_INST_BODY:\n          if (!parser.procInstBody && isWhitespace(c)) {\n            continue\n          } else if (c === '?') {\n            parser.state = S.PROC_INST_ENDING\n          } else {\n            parser.procInstBody += c\n          }\n          continue\n\n        case S.PROC_INST_ENDING:\n          if (c === '>') {\n            emitNode(parser, 'onprocessinginstruction', {\n              name: parser.procInstName,\n              body: parser.procInstBody\n            })\n            parser.procInstName = parser.procInstBody = ''\n            parser.state = S.TEXT\n          } else {\n            parser.procInstBody += '?' + c\n            parser.state = S.PROC_INST_BODY\n          }\n          continue\n\n        case S.OPEN_TAG:\n          if (isMatch(nameBody, c)) {\n            parser.tagName += c\n          } else {\n            newTag(parser)\n            if (c === '>') {\n              openTag(parser)\n            } else if (c === '/') {\n              parser.state = S.OPEN_TAG_SLASH\n            } else {\n              if (!isWhitespace(c)) {\n                strictFail(parser, 'Invalid character in tag name')\n              }\n              parser.state = S.ATTRIB\n            }\n          }\n          continue\n\n        case S.OPEN_TAG_SLASH:\n          if (c === '>') {\n            openTag(parser, true)\n            closeTag(parser)\n          } else {\n            strictFail(parser, 'Forward-slash in opening tag not followed by >')\n            parser.state = S.ATTRIB\n          }\n          continue\n\n        case S.ATTRIB:\n          // haven't read the attribute name yet.\n          if (isWhitespace(c)) {\n            continue\n          } else if (c === '>') {\n            openTag(parser)\n          } else if (c === '/') {\n            parser.state = S.OPEN_TAG_SLASH\n          } else if (isMatch(nameStart, c)) {\n            parser.attribName = c\n            parser.attribValue = ''\n            parser.state = S.ATTRIB_NAME\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_NAME:\n          if (c === '=') {\n            parser.state = S.ATTRIB_VALUE\n          } else if (c === '>') {\n            strictFail(parser, 'Attribute without value')\n            parser.attribValue = parser.attribName\n            attrib(parser)\n            openTag(parser)\n          } else if (isWhitespace(c)) {\n            parser.state = S.ATTRIB_NAME_SAW_WHITE\n          } else if (isMatch(nameBody, c)) {\n            parser.attribName += c\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_NAME_SAW_WHITE:\n          if (c === '=') {\n            parser.state = S.ATTRIB_VALUE\n          } else if (isWhitespace(c)) {\n            continue\n          } else {\n            strictFail(parser, 'Attribute without value')\n            parser.tag.attributes[parser.attribName] = ''\n            parser.attribValue = ''\n            emitNode(parser, 'onattribute', {\n              name: parser.attribName,\n              value: ''\n            })\n            parser.attribName = ''\n            if (c === '>') {\n              openTag(parser)\n            } else if (isMatch(nameStart, c)) {\n              parser.attribName = c\n              parser.state = S.ATTRIB_NAME\n            } else {\n              strictFail(parser, 'Invalid attribute name')\n              parser.state = S.ATTRIB\n            }\n          }\n          continue\n\n        case S.ATTRIB_VALUE:\n          if (isWhitespace(c)) {\n            continue\n          } else if (isQuote(c)) {\n            parser.q = c\n            parser.state = S.ATTRIB_VALUE_QUOTED\n          } else {\n            strictFail(parser, 'Unquoted attribute value')\n            parser.state = S.ATTRIB_VALUE_UNQUOTED\n            parser.attribValue = c\n          }\n          continue\n\n        case S.ATTRIB_VALUE_QUOTED:\n          if (c !== parser.q) {\n            if (c === '&') {\n              parser.state = S.ATTRIB_VALUE_ENTITY_Q\n            } else {\n              parser.attribValue += c\n            }\n            continue\n          }\n          attrib(parser)\n          parser.q = ''\n          parser.state = S.ATTRIB_VALUE_CLOSED\n          continue\n\n        case S.ATTRIB_VALUE_CLOSED:\n          if (isWhitespace(c)) {\n            parser.state = S.ATTRIB\n          } else if (c === '>') {\n            openTag(parser)\n          } else if (c === '/') {\n            parser.state = S.OPEN_TAG_SLASH\n          } else if (isMatch(nameStart, c)) {\n            strictFail(parser, 'No whitespace between attributes')\n            parser.attribName = c\n            parser.attribValue = ''\n            parser.state = S.ATTRIB_NAME\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_VALUE_UNQUOTED:\n          if (!isAttribEnd(c)) {\n            if (c === '&') {\n              parser.state = S.ATTRIB_VALUE_ENTITY_U\n            } else {\n              parser.attribValue += c\n            }\n            continue\n          }\n          attrib(parser)\n          if (c === '>') {\n            openTag(parser)\n          } else {\n            parser.state = S.ATTRIB\n          }\n          continue\n\n        case S.CLOSE_TAG:\n          if (!parser.tagName) {\n            if (isWhitespace(c)) {\n              continue\n            } else if (notMatch(nameStart, c)) {\n              if (parser.script) {\n                parser.script += '</' + c\n                parser.state = S.SCRIPT\n              } else {\n                strictFail(parser, 'Invalid tagname in closing tag.')\n              }\n            } else {\n              parser.tagName = c\n            }\n          } else if (c === '>') {\n            closeTag(parser)\n          } else if (isMatch(nameBody, c)) {\n            parser.tagName += c\n          } else if (parser.script) {\n            parser.script += '</' + parser.tagName\n            parser.tagName = ''\n            parser.state = S.SCRIPT\n          } else {\n            if (!isWhitespace(c)) {\n              strictFail(parser, 'Invalid tagname in closing tag')\n            }\n            parser.state = S.CLOSE_TAG_SAW_WHITE\n          }\n          continue\n\n        case S.CLOSE_TAG_SAW_WHITE:\n          if (isWhitespace(c)) {\n            continue\n          }\n          if (c === '>') {\n            closeTag(parser)\n          } else {\n            strictFail(parser, 'Invalid characters in closing tag')\n          }\n          continue\n\n        case S.TEXT_ENTITY:\n        case S.ATTRIB_VALUE_ENTITY_Q:\n        case S.ATTRIB_VALUE_ENTITY_U:\n          var returnState\n          var buffer\n          switch (parser.state) {\n            case S.TEXT_ENTITY:\n              returnState = S.TEXT\n              buffer = 'textNode'\n              break\n\n            case S.ATTRIB_VALUE_ENTITY_Q:\n              returnState = S.ATTRIB_VALUE_QUOTED\n              buffer = 'attribValue'\n              break\n\n            case S.ATTRIB_VALUE_ENTITY_U:\n              returnState = S.ATTRIB_VALUE_UNQUOTED\n              buffer = 'attribValue'\n              break\n          }\n\n          if (c === ';') {\n            parser[buffer] += parseEntity(parser)\n            parser.entity = ''\n            parser.state = returnState\n          } else if (isMatch(parser.entity.length ? entityBody : entityStart, c)) {\n            parser.entity += c\n          } else {\n            strictFail(parser, 'Invalid character in entity name')\n            parser[buffer] += '&' + parser.entity + c\n            parser.entity = ''\n            parser.state = returnState\n          }\n\n          continue\n\n        default:\n          throw new Error(parser, 'Unknown state: ' + parser.state)\n      }\n    } // while\n\n    if (parser.position >= parser.bufferCheckPosition) {\n      checkBufferLength(parser)\n    }\n    return parser\n  }\n\n  /*! http://mths.be/fromcodepoint v0.1.0 by @mathias */\n  /* istanbul ignore next */\n  if (!String.fromCodePoint) {\n    (function () {\n      var stringFromCharCode = String.fromCharCode\n      var floor = Math.floor\n      var fromCodePoint = function () {\n        var MAX_SIZE = 0x4000\n        var codeUnits = []\n        var highSurrogate\n        var lowSurrogate\n        var index = -1\n        var length = arguments.length\n        if (!length) {\n          return ''\n        }\n        var result = ''\n        while (++index < length) {\n          var codePoint = Number(arguments[index])\n          if (\n            !isFinite(codePoint) || // `NaN`, `+Infinity`, or `-Infinity`\n            codePoint < 0 || // not a valid Unicode code point\n            codePoint > 0x10FFFF || // not a valid Unicode code point\n            floor(codePoint) !== codePoint // not an integer\n          ) {\n            throw RangeError('Invalid code point: ' + codePoint)\n          }\n          if (codePoint <= 0xFFFF) { // BMP code point\n            codeUnits.push(codePoint)\n          } else { // Astral code point; split in surrogate halves\n            // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n            codePoint -= 0x10000\n            highSurrogate = (codePoint >> 10) + 0xD800\n            lowSurrogate = (codePoint % 0x400) + 0xDC00\n            codeUnits.push(highSurrogate, lowSurrogate)\n          }\n          if (index + 1 === length || codeUnits.length > MAX_SIZE) {\n            result += stringFromCharCode.apply(null, codeUnits)\n            codeUnits.length = 0\n          }\n        }\n        return result\n      }\n      /* istanbul ignore next */\n      if (Object.defineProperty) {\n        Object.defineProperty(String, 'fromCodePoint', {\n          value: fromCodePoint,\n          configurable: true,\n          writable: true\n        })\n      } else {\n        String.fromCodePoint = fromCodePoint\n      }\n    }())\n  }\n})(typeof exports === 'undefined' ? this.sax = {} : exports)\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nmodule.exports = Stream;\n\nvar EE = require('events').EventEmitter;\nvar inherits = require('inherits');\n\ninherits(Stream, EE);\nStream.Readable = require('readable-stream/readable.js');\nStream.Writable = require('readable-stream/writable.js');\nStream.Duplex = require('readable-stream/duplex.js');\nStream.Transform = require('readable-stream/transform.js');\nStream.PassThrough = require('readable-stream/passthrough.js');\n\n// Backwards-compat with node 0.4.x\nStream.Stream = Stream;\n\n\n\n// old-style streams.  Note that the pipe method (the only relevant\n// part of this class) is overridden in the Readable class.\n\nfunction Stream() {\n  EE.call(this);\n}\n\nStream.prototype.pipe = function(dest, options) {\n  var source = this;\n\n  function ondata(chunk) {\n    if (dest.writable) {\n      if (false === dest.write(chunk) && source.pause) {\n        source.pause();\n      }\n    }\n  }\n\n  source.on('data', ondata);\n\n  function ondrain() {\n    if (source.readable && source.resume) {\n      source.resume();\n    }\n  }\n\n  dest.on('drain', ondrain);\n\n  // If the 'end' option is not supplied, dest.end() will be called when\n  // source gets the 'end' or 'close' events.  Only dest.end() once.\n  if (!dest._isStdio && (!options || options.end !== false)) {\n    source.on('end', onend);\n    source.on('close', onclose);\n  }\n\n  var didOnEnd = false;\n  function onend() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    dest.end();\n  }\n\n\n  function onclose() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    if (typeof dest.destroy === 'function') dest.destroy();\n  }\n\n  // don't leave dangling pipes when there are errors.\n  function onerror(er) {\n    cleanup();\n    if (EE.listenerCount(this, 'error') === 0) {\n      throw er; // Unhandled stream error in pipe.\n    }\n  }\n\n  source.on('error', onerror);\n  dest.on('error', onerror);\n\n  // remove all the event listeners that were added.\n  function cleanup() {\n    source.removeListener('data', ondata);\n    dest.removeListener('drain', ondrain);\n\n    source.removeListener('end', onend);\n    source.removeListener('close', onclose);\n\n    source.removeListener('error', onerror);\n    dest.removeListener('error', onerror);\n\n    source.removeListener('end', cleanup);\n    source.removeListener('close', cleanup);\n\n    dest.removeListener('close', cleanup);\n  }\n\n  source.on('end', cleanup);\n  source.on('close', cleanup);\n\n  dest.on('close', cleanup);\n\n  dest.emit('pipe', source);\n\n  // Allow for unix-like usage: A.pipe(B).pipe(C)\n  return dest;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}","var nextTick = require('process/browser.js').nextTick;\nvar apply = Function.prototype.apply;\nvar slice = Array.prototype.slice;\nvar immediateIds = {};\nvar nextImmediateId = 0;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) { timeout.close(); };\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// That's not how node.js implements it but the exposed api is the same.\nexports.setImmediate = typeof setImmediate === \"function\" ? setImmediate : function(fn) {\n  var id = nextImmediateId++;\n  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n\n  immediateIds[id] = true;\n\n  nextTick(function onNextTick() {\n    if (immediateIds[id]) {\n      // fn.call() is faster so we optimize for the common use-case\n      // @see http://jsperf.com/call-apply-segu\n      if (args) {\n        fn.apply(null, args);\n      } else {\n        fn.call(null);\n      }\n      // Prevent ids from leaking\n      exports.clearImmediate(id);\n    }\n  });\n\n  return id;\n};\n\nexports.clearImmediate = typeof clearImmediate === \"function\" ? clearImmediate : function(id) {\n  delete immediateIds[id];\n};","\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  exports.stripBOM = function(str) {\n    if (str[0] === '\\uFEFF') {\n      return str.substring(1);\n    } else {\n      return str;\n    }\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  var builder, defaults, escapeCDATA, requiresCDATA, wrapCDATA,\n    hasProp = {}.hasOwnProperty;\n\n  builder = require('xmlbuilder');\n\n  defaults = require('./defaults').defaults;\n\n  requiresCDATA = function(entry) {\n    return typeof entry === \"string\" && (entry.indexOf('&') >= 0 || entry.indexOf('>') >= 0 || entry.indexOf('<') >= 0);\n  };\n\n  wrapCDATA = function(entry) {\n    return \"<![CDATA[\" + (escapeCDATA(entry)) + \"]]>\";\n  };\n\n  escapeCDATA = function(entry) {\n    return entry.replace(']]>', ']]]]><![CDATA[>');\n  };\n\n  exports.Builder = (function() {\n    function Builder(opts) {\n      var key, ref, value;\n      this.options = {};\n      ref = defaults[\"0.2\"];\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this.options[key] = value;\n      }\n      for (key in opts) {\n        if (!hasProp.call(opts, key)) continue;\n        value = opts[key];\n        this.options[key] = value;\n      }\n    }\n\n    Builder.prototype.buildObject = function(rootObj) {\n      var attrkey, charkey, render, rootElement, rootName;\n      attrkey = this.options.attrkey;\n      charkey = this.options.charkey;\n      if ((Object.keys(rootObj).length === 1) && (this.options.rootName === defaults['0.2'].rootName)) {\n        rootName = Object.keys(rootObj)[0];\n        rootObj = rootObj[rootName];\n      } else {\n        rootName = this.options.rootName;\n      }\n      render = (function(_this) {\n        return function(element, obj) {\n          var attr, child, entry, index, key, value;\n          if (typeof obj !== 'object') {\n            if (_this.options.cdata && requiresCDATA(obj)) {\n              element.raw(wrapCDATA(obj));\n            } else {\n              element.txt(obj);\n            }\n          } else if (Array.isArray(obj)) {\n            for (index in obj) {\n              if (!hasProp.call(obj, index)) continue;\n              child = obj[index];\n              for (key in child) {\n                entry = child[key];\n                element = render(element.ele(key), entry).up();\n              }\n            }\n          } else {\n            for (key in obj) {\n              if (!hasProp.call(obj, key)) continue;\n              child = obj[key];\n              if (key === attrkey) {\n                if (typeof child === \"object\") {\n                  for (attr in child) {\n                    value = child[attr];\n                    element = element.att(attr, value);\n                  }\n                }\n              } else if (key === charkey) {\n                if (_this.options.cdata && requiresCDATA(child)) {\n                  element = element.raw(wrapCDATA(child));\n                } else {\n                  element = element.txt(child);\n                }\n              } else if (Array.isArray(child)) {\n                for (index in child) {\n                  if (!hasProp.call(child, index)) continue;\n                  entry = child[index];\n                  if (typeof entry === 'string') {\n                    if (_this.options.cdata && requiresCDATA(entry)) {\n                      element = element.ele(key).raw(wrapCDATA(entry)).up();\n                    } else {\n                      element = element.ele(key, entry).up();\n                    }\n                  } else {\n                    element = render(element.ele(key), entry).up();\n                  }\n                }\n              } else if (typeof child === \"object\") {\n                element = render(element.ele(key), child).up();\n              } else {\n                if (typeof child === 'string' && _this.options.cdata && requiresCDATA(child)) {\n                  element = element.ele(key).raw(wrapCDATA(child)).up();\n                } else {\n                  if (child == null) {\n                    child = '';\n                  }\n                  element = element.ele(key, child.toString()).up();\n                }\n              }\n            }\n          }\n          return element;\n        };\n      })(this);\n      rootElement = builder.create(rootName, this.options.xmldec, this.options.doctype, {\n        headless: this.options.headless,\n        allowSurrogateChars: this.options.allowSurrogateChars\n      });\n      return render(rootElement, rootObj).end(this.options.renderOpts);\n    };\n\n    return Builder;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  exports.defaults = {\n    \"0.1\": {\n      explicitCharkey: false,\n      trim: true,\n      normalize: true,\n      normalizeTags: false,\n      attrkey: \"@\",\n      charkey: \"#\",\n      explicitArray: false,\n      ignoreAttrs: false,\n      mergeAttrs: false,\n      explicitRoot: false,\n      validator: null,\n      xmlns: false,\n      explicitChildren: false,\n      childkey: '@@',\n      charsAsChildren: false,\n      includeWhiteChars: false,\n      async: false,\n      strict: true,\n      attrNameProcessors: null,\n      attrValueProcessors: null,\n      tagNameProcessors: null,\n      valueProcessors: null,\n      emptyTag: ''\n    },\n    \"0.2\": {\n      explicitCharkey: false,\n      trim: false,\n      normalize: false,\n      normalizeTags: false,\n      attrkey: \"$\",\n      charkey: \"_\",\n      explicitArray: true,\n      ignoreAttrs: false,\n      mergeAttrs: false,\n      explicitRoot: true,\n      validator: null,\n      xmlns: false,\n      explicitChildren: false,\n      preserveChildrenOrder: false,\n      childkey: '$$',\n      charsAsChildren: false,\n      includeWhiteChars: false,\n      async: false,\n      strict: true,\n      attrNameProcessors: null,\n      attrValueProcessors: null,\n      tagNameProcessors: null,\n      valueProcessors: null,\n      rootName: 'root',\n      xmldec: {\n        'version': '1.0',\n        'encoding': 'UTF-8',\n        'standalone': true\n      },\n      doctype: null,\n      renderOpts: {\n        'pretty': true,\n        'indent': '  ',\n        'newline': '\\n'\n      },\n      headless: false,\n      chunkSize: 10000,\n      emptyTag: '',\n      cdata: false\n    }\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  var bom, defaults, events, isEmpty, processItem, processors, sax, setImmediate,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  sax = require('sax');\n\n  events = require('events');\n\n  bom = require('./bom');\n\n  processors = require('./processors');\n\n  setImmediate = require('timers').setImmediate;\n\n  defaults = require('./defaults').defaults;\n\n  isEmpty = function(thing) {\n    return typeof thing === \"object\" && (thing != null) && Object.keys(thing).length === 0;\n  };\n\n  processItem = function(processors, item, key) {\n    var i, len, process;\n    for (i = 0, len = processors.length; i < len; i++) {\n      process = processors[i];\n      item = process(item, key);\n    }\n    return item;\n  };\n\n  exports.Parser = (function(superClass) {\n    extend(Parser, superClass);\n\n    function Parser(opts) {\n      this.parseStringPromise = bind(this.parseStringPromise, this);\n      this.parseString = bind(this.parseString, this);\n      this.reset = bind(this.reset, this);\n      this.assignOrPush = bind(this.assignOrPush, this);\n      this.processAsync = bind(this.processAsync, this);\n      var key, ref, value;\n      if (!(this instanceof exports.Parser)) {\n        return new exports.Parser(opts);\n      }\n      this.options = {};\n      ref = defaults[\"0.2\"];\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this.options[key] = value;\n      }\n      for (key in opts) {\n        if (!hasProp.call(opts, key)) continue;\n        value = opts[key];\n        this.options[key] = value;\n      }\n      if (this.options.xmlns) {\n        this.options.xmlnskey = this.options.attrkey + \"ns\";\n      }\n      if (this.options.normalizeTags) {\n        if (!this.options.tagNameProcessors) {\n          this.options.tagNameProcessors = [];\n        }\n        this.options.tagNameProcessors.unshift(processors.normalize);\n      }\n      this.reset();\n    }\n\n    Parser.prototype.processAsync = function() {\n      var chunk, err;\n      try {\n        if (this.remaining.length <= this.options.chunkSize) {\n          chunk = this.remaining;\n          this.remaining = '';\n          this.saxParser = this.saxParser.write(chunk);\n          return this.saxParser.close();\n        } else {\n          chunk = this.remaining.substr(0, this.options.chunkSize);\n          this.remaining = this.remaining.substr(this.options.chunkSize, this.remaining.length);\n          this.saxParser = this.saxParser.write(chunk);\n          return setImmediate(this.processAsync);\n        }\n      } catch (error1) {\n        err = error1;\n        if (!this.saxParser.errThrown) {\n          this.saxParser.errThrown = true;\n          return this.emit(err);\n        }\n      }\n    };\n\n    Parser.prototype.assignOrPush = function(obj, key, newValue) {\n      if (!(key in obj)) {\n        if (!this.options.explicitArray) {\n          return obj[key] = newValue;\n        } else {\n          return obj[key] = [newValue];\n        }\n      } else {\n        if (!(obj[key] instanceof Array)) {\n          obj[key] = [obj[key]];\n        }\n        return obj[key].push(newValue);\n      }\n    };\n\n    Parser.prototype.reset = function() {\n      var attrkey, charkey, ontext, stack;\n      this.removeAllListeners();\n      this.saxParser = sax.parser(this.options.strict, {\n        trim: false,\n        normalize: false,\n        xmlns: this.options.xmlns\n      });\n      this.saxParser.errThrown = false;\n      this.saxParser.onerror = (function(_this) {\n        return function(error) {\n          _this.saxParser.resume();\n          if (!_this.saxParser.errThrown) {\n            _this.saxParser.errThrown = true;\n            return _this.emit(\"error\", error);\n          }\n        };\n      })(this);\n      this.saxParser.onend = (function(_this) {\n        return function() {\n          if (!_this.saxParser.ended) {\n            _this.saxParser.ended = true;\n            return _this.emit(\"end\", _this.resultObject);\n          }\n        };\n      })(this);\n      this.saxParser.ended = false;\n      this.EXPLICIT_CHARKEY = this.options.explicitCharkey;\n      this.resultObject = null;\n      stack = [];\n      attrkey = this.options.attrkey;\n      charkey = this.options.charkey;\n      this.saxParser.onopentag = (function(_this) {\n        return function(node) {\n          var key, newValue, obj, processedKey, ref;\n          obj = {};\n          obj[charkey] = \"\";\n          if (!_this.options.ignoreAttrs) {\n            ref = node.attributes;\n            for (key in ref) {\n              if (!hasProp.call(ref, key)) continue;\n              if (!(attrkey in obj) && !_this.options.mergeAttrs) {\n                obj[attrkey] = {};\n              }\n              newValue = _this.options.attrValueProcessors ? processItem(_this.options.attrValueProcessors, node.attributes[key], key) : node.attributes[key];\n              processedKey = _this.options.attrNameProcessors ? processItem(_this.options.attrNameProcessors, key) : key;\n              if (_this.options.mergeAttrs) {\n                _this.assignOrPush(obj, processedKey, newValue);\n              } else {\n                obj[attrkey][processedKey] = newValue;\n              }\n            }\n          }\n          obj[\"#name\"] = _this.options.tagNameProcessors ? processItem(_this.options.tagNameProcessors, node.name) : node.name;\n          if (_this.options.xmlns) {\n            obj[_this.options.xmlnskey] = {\n              uri: node.uri,\n              local: node.local\n            };\n          }\n          return stack.push(obj);\n        };\n      })(this);\n      this.saxParser.onclosetag = (function(_this) {\n        return function() {\n          var cdata, emptyStr, key, node, nodeName, obj, objClone, old, s, xpath;\n          obj = stack.pop();\n          nodeName = obj[\"#name\"];\n          if (!_this.options.explicitChildren || !_this.options.preserveChildrenOrder) {\n            delete obj[\"#name\"];\n          }\n          if (obj.cdata === true) {\n            cdata = obj.cdata;\n            delete obj.cdata;\n          }\n          s = stack[stack.length - 1];\n          if (obj[charkey].match(/^\\s*$/) && !cdata) {\n            emptyStr = obj[charkey];\n            delete obj[charkey];\n          } else {\n            if (_this.options.trim) {\n              obj[charkey] = obj[charkey].trim();\n            }\n            if (_this.options.normalize) {\n              obj[charkey] = obj[charkey].replace(/\\s{2,}/g, \" \").trim();\n            }\n            obj[charkey] = _this.options.valueProcessors ? processItem(_this.options.valueProcessors, obj[charkey], nodeName) : obj[charkey];\n            if (Object.keys(obj).length === 1 && charkey in obj && !_this.EXPLICIT_CHARKEY) {\n              obj = obj[charkey];\n            }\n          }\n          if (isEmpty(obj)) {\n            obj = _this.options.emptyTag !== '' ? _this.options.emptyTag : emptyStr;\n          }\n          if (_this.options.validator != null) {\n            xpath = \"/\" + ((function() {\n              var i, len, results;\n              results = [];\n              for (i = 0, len = stack.length; i < len; i++) {\n                node = stack[i];\n                results.push(node[\"#name\"]);\n              }\n              return results;\n            })()).concat(nodeName).join(\"/\");\n            (function() {\n              var err;\n              try {\n                return obj = _this.options.validator(xpath, s && s[nodeName], obj);\n              } catch (error1) {\n                err = error1;\n                return _this.emit(\"error\", err);\n              }\n            })();\n          }\n          if (_this.options.explicitChildren && !_this.options.mergeAttrs && typeof obj === 'object') {\n            if (!_this.options.preserveChildrenOrder) {\n              node = {};\n              if (_this.options.attrkey in obj) {\n                node[_this.options.attrkey] = obj[_this.options.attrkey];\n                delete obj[_this.options.attrkey];\n              }\n              if (!_this.options.charsAsChildren && _this.options.charkey in obj) {\n                node[_this.options.charkey] = obj[_this.options.charkey];\n                delete obj[_this.options.charkey];\n              }\n              if (Object.getOwnPropertyNames(obj).length > 0) {\n                node[_this.options.childkey] = obj;\n              }\n              obj = node;\n            } else if (s) {\n              s[_this.options.childkey] = s[_this.options.childkey] || [];\n              objClone = {};\n              for (key in obj) {\n                if (!hasProp.call(obj, key)) continue;\n                objClone[key] = obj[key];\n              }\n              s[_this.options.childkey].push(objClone);\n              delete obj[\"#name\"];\n              if (Object.keys(obj).length === 1 && charkey in obj && !_this.EXPLICIT_CHARKEY) {\n                obj = obj[charkey];\n              }\n            }\n          }\n          if (stack.length > 0) {\n            return _this.assignOrPush(s, nodeName, obj);\n          } else {\n            if (_this.options.explicitRoot) {\n              old = obj;\n              obj = {};\n              obj[nodeName] = old;\n            }\n            _this.resultObject = obj;\n            _this.saxParser.ended = true;\n            return _this.emit(\"end\", _this.resultObject);\n          }\n        };\n      })(this);\n      ontext = (function(_this) {\n        return function(text) {\n          var charChild, s;\n          s = stack[stack.length - 1];\n          if (s) {\n            s[charkey] += text;\n            if (_this.options.explicitChildren && _this.options.preserveChildrenOrder && _this.options.charsAsChildren && (_this.options.includeWhiteChars || text.replace(/\\\\n/g, '').trim() !== '')) {\n              s[_this.options.childkey] = s[_this.options.childkey] || [];\n              charChild = {\n                '#name': '__text__'\n              };\n              charChild[charkey] = text;\n              if (_this.options.normalize) {\n                charChild[charkey] = charChild[charkey].replace(/\\s{2,}/g, \" \").trim();\n              }\n              s[_this.options.childkey].push(charChild);\n            }\n            return s;\n          }\n        };\n      })(this);\n      this.saxParser.ontext = ontext;\n      return this.saxParser.oncdata = (function(_this) {\n        return function(text) {\n          var s;\n          s = ontext(text);\n          if (s) {\n            return s.cdata = true;\n          }\n        };\n      })(this);\n    };\n\n    Parser.prototype.parseString = function(str, cb) {\n      var err;\n      if ((cb != null) && typeof cb === \"function\") {\n        this.on(\"end\", function(result) {\n          this.reset();\n          return cb(null, result);\n        });\n        this.on(\"error\", function(err) {\n          this.reset();\n          return cb(err);\n        });\n      }\n      try {\n        str = str.toString();\n        if (str.trim() === '') {\n          this.emit(\"end\", null);\n          return true;\n        }\n        str = bom.stripBOM(str);\n        if (this.options.async) {\n          this.remaining = str;\n          setImmediate(this.processAsync);\n          return this.saxParser;\n        }\n        return this.saxParser.write(str).close();\n      } catch (error1) {\n        err = error1;\n        if (!(this.saxParser.errThrown || this.saxParser.ended)) {\n          this.emit('error', err);\n          return this.saxParser.errThrown = true;\n        } else if (this.saxParser.ended) {\n          throw err;\n        }\n      }\n    };\n\n    Parser.prototype.parseStringPromise = function(str) {\n      return new Promise((function(_this) {\n        return function(resolve, reject) {\n          return _this.parseString(str, function(err, value) {\n            if (err) {\n              return reject(err);\n            } else {\n              return resolve(value);\n            }\n          });\n        };\n      })(this));\n    };\n\n    return Parser;\n\n  })(events);\n\n  exports.parseString = function(str, a, b) {\n    var cb, options, parser;\n    if (b != null) {\n      if (typeof b === 'function') {\n        cb = b;\n      }\n      if (typeof a === 'object') {\n        options = a;\n      }\n    } else {\n      if (typeof a === 'function') {\n        cb = a;\n      }\n      options = {};\n    }\n    parser = new exports.Parser(options);\n    return parser.parseString(str, cb);\n  };\n\n  exports.parseStringPromise = function(str, a) {\n    var options, parser;\n    if (typeof a === 'object') {\n      options = a;\n    }\n    parser = new exports.Parser(options);\n    return parser.parseStringPromise(str);\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  var prefixMatch;\n\n  prefixMatch = new RegExp(/(?!xmlns)^.*:/);\n\n  exports.normalize = function(str) {\n    return str.toLowerCase();\n  };\n\n  exports.firstCharLowerCase = function(str) {\n    return str.charAt(0).toLowerCase() + str.slice(1);\n  };\n\n  exports.stripPrefix = function(str) {\n    return str.replace(prefixMatch, '');\n  };\n\n  exports.parseNumbers = function(str) {\n    if (!isNaN(str)) {\n      str = str % 1 === 0 ? parseInt(str, 10) : parseFloat(str);\n    }\n    return str;\n  };\n\n  exports.parseBooleans = function(str) {\n    if (/^(?:true|false)$/i.test(str)) {\n      str = str.toLowerCase() === 'true';\n    }\n    return str;\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  var builder, defaults, parser, processors,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  defaults = require('./defaults');\n\n  builder = require('./builder');\n\n  parser = require('./parser');\n\n  processors = require('./processors');\n\n  exports.defaults = defaults.defaults;\n\n  exports.processors = processors;\n\n  exports.ValidationError = (function(superClass) {\n    extend(ValidationError, superClass);\n\n    function ValidationError(message) {\n      this.message = message;\n    }\n\n    return ValidationError;\n\n  })(Error);\n\n  exports.Builder = builder.Builder;\n\n  exports.Parser = parser.Parser;\n\n  exports.parseString = parser.parseString;\n\n  exports.parseStringPromise = parser.parseStringPromise;\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  module.exports = {\n    Disconnected: 1,\n    Preceding: 2,\n    Following: 4,\n    Contains: 8,\n    ContainedBy: 16,\n    ImplementationSpecific: 32\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  module.exports = {\n    Element: 1,\n    Attribute: 2,\n    Text: 3,\n    CData: 4,\n    EntityReference: 5,\n    EntityDeclaration: 6,\n    ProcessingInstruction: 7,\n    Comment: 8,\n    Document: 9,\n    DocType: 10,\n    DocumentFragment: 11,\n    NotationDeclaration: 12,\n    Declaration: 201,\n    Raw: 202,\n    AttributeDeclaration: 203,\n    ElementDeclaration: 204,\n    Dummy: 205\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var assign, getValue, isArray, isEmpty, isFunction, isObject, isPlainObject,\n    slice = [].slice,\n    hasProp = {}.hasOwnProperty;\n\n  assign = function() {\n    var i, key, len, source, sources, target;\n    target = arguments[0], sources = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n    if (isFunction(Object.assign)) {\n      Object.assign.apply(null, arguments);\n    } else {\n      for (i = 0, len = sources.length; i < len; i++) {\n        source = sources[i];\n        if (source != null) {\n          for (key in source) {\n            if (!hasProp.call(source, key)) continue;\n            target[key] = source[key];\n          }\n        }\n      }\n    }\n    return target;\n  };\n\n  isFunction = function(val) {\n    return !!val && Object.prototype.toString.call(val) === '[object Function]';\n  };\n\n  isObject = function(val) {\n    var ref;\n    return !!val && ((ref = typeof val) === 'function' || ref === 'object');\n  };\n\n  isArray = function(val) {\n    if (isFunction(Array.isArray)) {\n      return Array.isArray(val);\n    } else {\n      return Object.prototype.toString.call(val) === '[object Array]';\n    }\n  };\n\n  isEmpty = function(val) {\n    var key;\n    if (isArray(val)) {\n      return !val.length;\n    } else {\n      for (key in val) {\n        if (!hasProp.call(val, key)) continue;\n        return false;\n      }\n      return true;\n    }\n  };\n\n  isPlainObject = function(val) {\n    var ctor, proto;\n    return isObject(val) && (proto = Object.getPrototypeOf(val)) && (ctor = proto.constructor) && (typeof ctor === 'function') && (ctor instanceof ctor) && (Function.prototype.toString.call(ctor) === Function.prototype.toString.call(Object));\n  };\n\n  getValue = function(obj) {\n    if (isFunction(obj.valueOf)) {\n      return obj.valueOf();\n    } else {\n      return obj;\n    }\n  };\n\n  module.exports.assign = assign;\n\n  module.exports.isFunction = isFunction;\n\n  module.exports.isObject = isObject;\n\n  module.exports.isArray = isArray;\n\n  module.exports.isEmpty = isEmpty;\n\n  module.exports.isPlainObject = isPlainObject;\n\n  module.exports.getValue = getValue;\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  module.exports = {\n    None: 0,\n    OpenTag: 1,\n    InsideTag: 2,\n    CloseTag: 3\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLAttribute, XMLNode;\n\n  NodeType = require('./NodeType');\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLAttribute = (function() {\n    function XMLAttribute(parent, name, value) {\n      this.parent = parent;\n      if (this.parent) {\n        this.options = this.parent.options;\n        this.stringify = this.parent.stringify;\n      }\n      if (name == null) {\n        throw new Error(\"Missing attribute name. \" + this.debugInfo(name));\n      }\n      this.name = this.stringify.name(name);\n      this.value = this.stringify.attValue(value);\n      this.type = NodeType.Attribute;\n      this.isId = false;\n      this.schemaTypeInfo = null;\n    }\n\n    Object.defineProperty(XMLAttribute.prototype, 'nodeType', {\n      get: function() {\n        return this.type;\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'ownerElement', {\n      get: function() {\n        return this.parent;\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'textContent', {\n      get: function() {\n        return this.value;\n      },\n      set: function(value) {\n        return this.value = value || '';\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'namespaceURI', {\n      get: function() {\n        return '';\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'prefix', {\n      get: function() {\n        return '';\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'localName', {\n      get: function() {\n        return this.name;\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'specified', {\n      get: function() {\n        return true;\n      }\n    });\n\n    XMLAttribute.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLAttribute.prototype.toString = function(options) {\n      return this.options.writer.attribute(this, this.options.writer.filterOptions(options));\n    };\n\n    XMLAttribute.prototype.debugInfo = function(name) {\n      name = name || this.name;\n      if (name == null) {\n        return \"parent: <\" + this.parent.name + \">\";\n      } else {\n        return \"attribute: {\" + name + \"}, parent: <\" + this.parent.name + \">\";\n      }\n    };\n\n    XMLAttribute.prototype.isEqualNode = function(node) {\n      if (node.namespaceURI !== this.namespaceURI) {\n        return false;\n      }\n      if (node.prefix !== this.prefix) {\n        return false;\n      }\n      if (node.localName !== this.localName) {\n        return false;\n      }\n      if (node.value !== this.value) {\n        return false;\n      }\n      return true;\n    };\n\n    return XMLAttribute;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLCData, XMLCharacterData,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLCharacterData = require('./XMLCharacterData');\n\n  module.exports = XMLCData = (function(superClass) {\n    extend(XMLCData, superClass);\n\n    function XMLCData(parent, text) {\n      XMLCData.__super__.constructor.call(this, parent);\n      if (text == null) {\n        throw new Error(\"Missing CDATA text. \" + this.debugInfo());\n      }\n      this.name = \"#cdata-section\";\n      this.type = NodeType.CData;\n      this.value = this.stringify.cdata(text);\n    }\n\n    XMLCData.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLCData.prototype.toString = function(options) {\n      return this.options.writer.cdata(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLCData;\n\n  })(XMLCharacterData);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLCharacterData, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLCharacterData = (function(superClass) {\n    extend(XMLCharacterData, superClass);\n\n    function XMLCharacterData(parent) {\n      XMLCharacterData.__super__.constructor.call(this, parent);\n      this.value = '';\n    }\n\n    Object.defineProperty(XMLCharacterData.prototype, 'data', {\n      get: function() {\n        return this.value;\n      },\n      set: function(value) {\n        return this.value = value || '';\n      }\n    });\n\n    Object.defineProperty(XMLCharacterData.prototype, 'length', {\n      get: function() {\n        return this.value.length;\n      }\n    });\n\n    Object.defineProperty(XMLCharacterData.prototype, 'textContent', {\n      get: function() {\n        return this.value;\n      },\n      set: function(value) {\n        return this.value = value || '';\n      }\n    });\n\n    XMLCharacterData.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLCharacterData.prototype.substringData = function(offset, count) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLCharacterData.prototype.appendData = function(arg) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLCharacterData.prototype.insertData = function(offset, arg) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLCharacterData.prototype.deleteData = function(offset, count) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLCharacterData.prototype.replaceData = function(offset, count, arg) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLCharacterData.prototype.isEqualNode = function(node) {\n      if (!XMLCharacterData.__super__.isEqualNode.apply(this, arguments).isEqualNode(node)) {\n        return false;\n      }\n      if (node.data !== this.data) {\n        return false;\n      }\n      return true;\n    };\n\n    return XMLCharacterData;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLCharacterData, XMLComment,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLCharacterData = require('./XMLCharacterData');\n\n  module.exports = XMLComment = (function(superClass) {\n    extend(XMLComment, superClass);\n\n    function XMLComment(parent, text) {\n      XMLComment.__super__.constructor.call(this, parent);\n      if (text == null) {\n        throw new Error(\"Missing comment text. \" + this.debugInfo());\n      }\n      this.name = \"#comment\";\n      this.type = NodeType.Comment;\n      this.value = this.stringify.comment(text);\n    }\n\n    XMLComment.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLComment.prototype.toString = function(options) {\n      return this.options.writer.comment(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLComment;\n\n  })(XMLCharacterData);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDOMConfiguration, XMLDOMErrorHandler, XMLDOMStringList;\n\n  XMLDOMErrorHandler = require('./XMLDOMErrorHandler');\n\n  XMLDOMStringList = require('./XMLDOMStringList');\n\n  module.exports = XMLDOMConfiguration = (function() {\n    function XMLDOMConfiguration() {\n      var clonedSelf;\n      this.defaultParams = {\n        \"canonical-form\": false,\n        \"cdata-sections\": false,\n        \"comments\": false,\n        \"datatype-normalization\": false,\n        \"element-content-whitespace\": true,\n        \"entities\": true,\n        \"error-handler\": new XMLDOMErrorHandler(),\n        \"infoset\": true,\n        \"validate-if-schema\": false,\n        \"namespaces\": true,\n        \"namespace-declarations\": true,\n        \"normalize-characters\": false,\n        \"schema-location\": '',\n        \"schema-type\": '',\n        \"split-cdata-sections\": true,\n        \"validate\": false,\n        \"well-formed\": true\n      };\n      this.params = clonedSelf = Object.create(this.defaultParams);\n    }\n\n    Object.defineProperty(XMLDOMConfiguration.prototype, 'parameterNames', {\n      get: function() {\n        return new XMLDOMStringList(Object.keys(this.defaultParams));\n      }\n    });\n\n    XMLDOMConfiguration.prototype.getParameter = function(name) {\n      if (this.params.hasOwnProperty(name)) {\n        return this.params[name];\n      } else {\n        return null;\n      }\n    };\n\n    XMLDOMConfiguration.prototype.canSetParameter = function(name, value) {\n      return true;\n    };\n\n    XMLDOMConfiguration.prototype.setParameter = function(name, value) {\n      if (value != null) {\n        return this.params[name] = value;\n      } else {\n        return delete this.params[name];\n      }\n    };\n\n    return XMLDOMConfiguration;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDOMErrorHandler;\n\n  module.exports = XMLDOMErrorHandler = (function() {\n    function XMLDOMErrorHandler() {}\n\n    XMLDOMErrorHandler.prototype.handleError = function(error) {\n      throw new Error(error);\n    };\n\n    return XMLDOMErrorHandler;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDOMImplementation;\n\n  module.exports = XMLDOMImplementation = (function() {\n    function XMLDOMImplementation() {}\n\n    XMLDOMImplementation.prototype.hasFeature = function(feature, version) {\n      return true;\n    };\n\n    XMLDOMImplementation.prototype.createDocumentType = function(qualifiedName, publicId, systemId) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    XMLDOMImplementation.prototype.createDocument = function(namespaceURI, qualifiedName, doctype) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    XMLDOMImplementation.prototype.createHTMLDocument = function(title) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    XMLDOMImplementation.prototype.getFeature = function(feature, version) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    return XMLDOMImplementation;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDOMStringList;\n\n  module.exports = XMLDOMStringList = (function() {\n    function XMLDOMStringList(arr) {\n      this.arr = arr || [];\n    }\n\n    Object.defineProperty(XMLDOMStringList.prototype, 'length', {\n      get: function() {\n        return this.arr.length;\n      }\n    });\n\n    XMLDOMStringList.prototype.item = function(index) {\n      return this.arr[index] || null;\n    };\n\n    XMLDOMStringList.prototype.contains = function(str) {\n      return this.arr.indexOf(str) !== -1;\n    };\n\n    return XMLDOMStringList;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDTDAttList, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  module.exports = XMLDTDAttList = (function(superClass) {\n    extend(XMLDTDAttList, superClass);\n\n    function XMLDTDAttList(parent, elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      XMLDTDAttList.__super__.constructor.call(this, parent);\n      if (elementName == null) {\n        throw new Error(\"Missing DTD element name. \" + this.debugInfo());\n      }\n      if (attributeName == null) {\n        throw new Error(\"Missing DTD attribute name. \" + this.debugInfo(elementName));\n      }\n      if (!attributeType) {\n        throw new Error(\"Missing DTD attribute type. \" + this.debugInfo(elementName));\n      }\n      if (!defaultValueType) {\n        throw new Error(\"Missing DTD attribute default. \" + this.debugInfo(elementName));\n      }\n      if (defaultValueType.indexOf('#') !== 0) {\n        defaultValueType = '#' + defaultValueType;\n      }\n      if (!defaultValueType.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/)) {\n        throw new Error(\"Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. \" + this.debugInfo(elementName));\n      }\n      if (defaultValue && !defaultValueType.match(/^(#FIXED|#DEFAULT)$/)) {\n        throw new Error(\"Default value only applies to #FIXED or #DEFAULT. \" + this.debugInfo(elementName));\n      }\n      this.elementName = this.stringify.name(elementName);\n      this.type = NodeType.AttributeDeclaration;\n      this.attributeName = this.stringify.name(attributeName);\n      this.attributeType = this.stringify.dtdAttType(attributeType);\n      if (defaultValue) {\n        this.defaultValue = this.stringify.dtdAttDefault(defaultValue);\n      }\n      this.defaultValueType = defaultValueType;\n    }\n\n    XMLDTDAttList.prototype.toString = function(options) {\n      return this.options.writer.dtdAttList(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLDTDAttList;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDTDElement, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  module.exports = XMLDTDElement = (function(superClass) {\n    extend(XMLDTDElement, superClass);\n\n    function XMLDTDElement(parent, name, value) {\n      XMLDTDElement.__super__.constructor.call(this, parent);\n      if (name == null) {\n        throw new Error(\"Missing DTD element name. \" + this.debugInfo());\n      }\n      if (!value) {\n        value = '(#PCDATA)';\n      }\n      if (Array.isArray(value)) {\n        value = '(' + value.join(',') + ')';\n      }\n      this.name = this.stringify.name(name);\n      this.type = NodeType.ElementDeclaration;\n      this.value = this.stringify.dtdElementValue(value);\n    }\n\n    XMLDTDElement.prototype.toString = function(options) {\n      return this.options.writer.dtdElement(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLDTDElement;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDTDEntity, XMLNode, isObject,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  isObject = require('./Utility').isObject;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  module.exports = XMLDTDEntity = (function(superClass) {\n    extend(XMLDTDEntity, superClass);\n\n    function XMLDTDEntity(parent, pe, name, value) {\n      XMLDTDEntity.__super__.constructor.call(this, parent);\n      if (name == null) {\n        throw new Error(\"Missing DTD entity name. \" + this.debugInfo(name));\n      }\n      if (value == null) {\n        throw new Error(\"Missing DTD entity value. \" + this.debugInfo(name));\n      }\n      this.pe = !!pe;\n      this.name = this.stringify.name(name);\n      this.type = NodeType.EntityDeclaration;\n      if (!isObject(value)) {\n        this.value = this.stringify.dtdEntityValue(value);\n        this.internal = true;\n      } else {\n        if (!value.pubID && !value.sysID) {\n          throw new Error(\"Public and/or system identifiers are required for an external entity. \" + this.debugInfo(name));\n        }\n        if (value.pubID && !value.sysID) {\n          throw new Error(\"System identifier is required for a public external entity. \" + this.debugInfo(name));\n        }\n        this.internal = false;\n        if (value.pubID != null) {\n          this.pubID = this.stringify.dtdPubID(value.pubID);\n        }\n        if (value.sysID != null) {\n          this.sysID = this.stringify.dtdSysID(value.sysID);\n        }\n        if (value.nData != null) {\n          this.nData = this.stringify.dtdNData(value.nData);\n        }\n        if (this.pe && this.nData) {\n          throw new Error(\"Notation declaration is not allowed in a parameter entity. \" + this.debugInfo(name));\n        }\n      }\n    }\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'publicId', {\n      get: function() {\n        return this.pubID;\n      }\n    });\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'systemId', {\n      get: function() {\n        return this.sysID;\n      }\n    });\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'notationName', {\n      get: function() {\n        return this.nData || null;\n      }\n    });\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'inputEncoding', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'xmlEncoding', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'xmlVersion', {\n      get: function() {\n        return null;\n      }\n    });\n\n    XMLDTDEntity.prototype.toString = function(options) {\n      return this.options.writer.dtdEntity(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLDTDEntity;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDTDNotation, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  module.exports = XMLDTDNotation = (function(superClass) {\n    extend(XMLDTDNotation, superClass);\n\n    function XMLDTDNotation(parent, name, value) {\n      XMLDTDNotation.__super__.constructor.call(this, parent);\n      if (name == null) {\n        throw new Error(\"Missing DTD notation name. \" + this.debugInfo(name));\n      }\n      if (!value.pubID && !value.sysID) {\n        throw new Error(\"Public or system identifiers are required for an external entity. \" + this.debugInfo(name));\n      }\n      this.name = this.stringify.name(name);\n      this.type = NodeType.NotationDeclaration;\n      if (value.pubID != null) {\n        this.pubID = this.stringify.dtdPubID(value.pubID);\n      }\n      if (value.sysID != null) {\n        this.sysID = this.stringify.dtdSysID(value.sysID);\n      }\n    }\n\n    Object.defineProperty(XMLDTDNotation.prototype, 'publicId', {\n      get: function() {\n        return this.pubID;\n      }\n    });\n\n    Object.defineProperty(XMLDTDNotation.prototype, 'systemId', {\n      get: function() {\n        return this.sysID;\n      }\n    });\n\n    XMLDTDNotation.prototype.toString = function(options) {\n      return this.options.writer.dtdNotation(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLDTDNotation;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDeclaration, XMLNode, isObject,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  isObject = require('./Utility').isObject;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  module.exports = XMLDeclaration = (function(superClass) {\n    extend(XMLDeclaration, superClass);\n\n    function XMLDeclaration(parent, version, encoding, standalone) {\n      var ref;\n      XMLDeclaration.__super__.constructor.call(this, parent);\n      if (isObject(version)) {\n        ref = version, version = ref.version, encoding = ref.encoding, standalone = ref.standalone;\n      }\n      if (!version) {\n        version = '1.0';\n      }\n      this.type = NodeType.Declaration;\n      this.version = this.stringify.xmlVersion(version);\n      if (encoding != null) {\n        this.encoding = this.stringify.xmlEncoding(encoding);\n      }\n      if (standalone != null) {\n        this.standalone = this.stringify.xmlStandalone(standalone);\n      }\n    }\n\n    XMLDeclaration.prototype.toString = function(options) {\n      return this.options.writer.declaration(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLDeclaration;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDocType, XMLNamedNodeMap, XMLNode, isObject,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  isObject = require('./Utility').isObject;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  XMLDTDAttList = require('./XMLDTDAttList');\n\n  XMLDTDEntity = require('./XMLDTDEntity');\n\n  XMLDTDElement = require('./XMLDTDElement');\n\n  XMLDTDNotation = require('./XMLDTDNotation');\n\n  XMLNamedNodeMap = require('./XMLNamedNodeMap');\n\n  module.exports = XMLDocType = (function(superClass) {\n    extend(XMLDocType, superClass);\n\n    function XMLDocType(parent, pubID, sysID) {\n      var child, i, len, ref, ref1, ref2;\n      XMLDocType.__super__.constructor.call(this, parent);\n      this.type = NodeType.DocType;\n      if (parent.children) {\n        ref = parent.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          if (child.type === NodeType.Element) {\n            this.name = child.name;\n            break;\n          }\n        }\n      }\n      this.documentObject = parent;\n      if (isObject(pubID)) {\n        ref1 = pubID, pubID = ref1.pubID, sysID = ref1.sysID;\n      }\n      if (sysID == null) {\n        ref2 = [pubID, sysID], sysID = ref2[0], pubID = ref2[1];\n      }\n      if (pubID != null) {\n        this.pubID = this.stringify.dtdPubID(pubID);\n      }\n      if (sysID != null) {\n        this.sysID = this.stringify.dtdSysID(sysID);\n      }\n    }\n\n    Object.defineProperty(XMLDocType.prototype, 'entities', {\n      get: function() {\n        var child, i, len, nodes, ref;\n        nodes = {};\n        ref = this.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          if ((child.type === NodeType.EntityDeclaration) && !child.pe) {\n            nodes[child.name] = child;\n          }\n        }\n        return new XMLNamedNodeMap(nodes);\n      }\n    });\n\n    Object.defineProperty(XMLDocType.prototype, 'notations', {\n      get: function() {\n        var child, i, len, nodes, ref;\n        nodes = {};\n        ref = this.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          if (child.type === NodeType.NotationDeclaration) {\n            nodes[child.name] = child;\n          }\n        }\n        return new XMLNamedNodeMap(nodes);\n      }\n    });\n\n    Object.defineProperty(XMLDocType.prototype, 'publicId', {\n      get: function() {\n        return this.pubID;\n      }\n    });\n\n    Object.defineProperty(XMLDocType.prototype, 'systemId', {\n      get: function() {\n        return this.sysID;\n      }\n    });\n\n    Object.defineProperty(XMLDocType.prototype, 'internalSubset', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    XMLDocType.prototype.element = function(name, value) {\n      var child;\n      child = new XMLDTDElement(this, name, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.attList = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      var child;\n      child = new XMLDTDAttList(this, elementName, attributeName, attributeType, defaultValueType, defaultValue);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.entity = function(name, value) {\n      var child;\n      child = new XMLDTDEntity(this, false, name, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.pEntity = function(name, value) {\n      var child;\n      child = new XMLDTDEntity(this, true, name, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.notation = function(name, value) {\n      var child;\n      child = new XMLDTDNotation(this, name, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.toString = function(options) {\n      return this.options.writer.docType(this, this.options.writer.filterOptions(options));\n    };\n\n    XMLDocType.prototype.ele = function(name, value) {\n      return this.element(name, value);\n    };\n\n    XMLDocType.prototype.att = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      return this.attList(elementName, attributeName, attributeType, defaultValueType, defaultValue);\n    };\n\n    XMLDocType.prototype.ent = function(name, value) {\n      return this.entity(name, value);\n    };\n\n    XMLDocType.prototype.pent = function(name, value) {\n      return this.pEntity(name, value);\n    };\n\n    XMLDocType.prototype.not = function(name, value) {\n      return this.notation(name, value);\n    };\n\n    XMLDocType.prototype.up = function() {\n      return this.root() || this.documentObject;\n    };\n\n    XMLDocType.prototype.isEqualNode = function(node) {\n      if (!XMLDocType.__super__.isEqualNode.apply(this, arguments).isEqualNode(node)) {\n        return false;\n      }\n      if (node.name !== this.name) {\n        return false;\n      }\n      if (node.publicId !== this.publicId) {\n        return false;\n      }\n      if (node.systemId !== this.systemId) {\n        return false;\n      }\n      return true;\n    };\n\n    return XMLDocType;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDOMConfiguration, XMLDOMImplementation, XMLDocument, XMLNode, XMLStringWriter, XMLStringifier, isPlainObject,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  isPlainObject = require('./Utility').isPlainObject;\n\n  XMLDOMImplementation = require('./XMLDOMImplementation');\n\n  XMLDOMConfiguration = require('./XMLDOMConfiguration');\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  XMLStringifier = require('./XMLStringifier');\n\n  XMLStringWriter = require('./XMLStringWriter');\n\n  module.exports = XMLDocument = (function(superClass) {\n    extend(XMLDocument, superClass);\n\n    function XMLDocument(options) {\n      XMLDocument.__super__.constructor.call(this, null);\n      this.name = \"#document\";\n      this.type = NodeType.Document;\n      this.documentURI = null;\n      this.domConfig = new XMLDOMConfiguration();\n      options || (options = {});\n      if (!options.writer) {\n        options.writer = new XMLStringWriter();\n      }\n      this.options = options;\n      this.stringify = new XMLStringifier(options);\n    }\n\n    Object.defineProperty(XMLDocument.prototype, 'implementation', {\n      value: new XMLDOMImplementation()\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'doctype', {\n      get: function() {\n        var child, i, len, ref;\n        ref = this.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          if (child.type === NodeType.DocType) {\n            return child;\n          }\n        }\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'documentElement', {\n      get: function() {\n        return this.rootObject || null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'inputEncoding', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'strictErrorChecking', {\n      get: function() {\n        return false;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'xmlEncoding', {\n      get: function() {\n        if (this.children.length !== 0 && this.children[0].type === NodeType.Declaration) {\n          return this.children[0].encoding;\n        } else {\n          return null;\n        }\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'xmlStandalone', {\n      get: function() {\n        if (this.children.length !== 0 && this.children[0].type === NodeType.Declaration) {\n          return this.children[0].standalone === 'yes';\n        } else {\n          return false;\n        }\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'xmlVersion', {\n      get: function() {\n        if (this.children.length !== 0 && this.children[0].type === NodeType.Declaration) {\n          return this.children[0].version;\n        } else {\n          return \"1.0\";\n        }\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'URL', {\n      get: function() {\n        return this.documentURI;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'origin', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'compatMode', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'characterSet', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'contentType', {\n      get: function() {\n        return null;\n      }\n    });\n\n    XMLDocument.prototype.end = function(writer) {\n      var writerOptions;\n      writerOptions = {};\n      if (!writer) {\n        writer = this.options.writer;\n      } else if (isPlainObject(writer)) {\n        writerOptions = writer;\n        writer = this.options.writer;\n      }\n      return writer.document(this, writer.filterOptions(writerOptions));\n    };\n\n    XMLDocument.prototype.toString = function(options) {\n      return this.options.writer.document(this, this.options.writer.filterOptions(options));\n    };\n\n    XMLDocument.prototype.createElement = function(tagName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createDocumentFragment = function() {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createTextNode = function(data) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createComment = function(data) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createCDATASection = function(data) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createProcessingInstruction = function(target, data) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createAttribute = function(name) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createEntityReference = function(name) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.getElementsByTagName = function(tagname) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.importNode = function(importedNode, deep) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createElementNS = function(namespaceURI, qualifiedName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createAttributeNS = function(namespaceURI, qualifiedName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.getElementsByTagNameNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.getElementById = function(elementId) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.adoptNode = function(source) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.normalizeDocument = function() {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.renameNode = function(node, namespaceURI, qualifiedName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.getElementsByClassName = function(classNames) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createEvent = function(eventInterface) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createRange = function() {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createNodeIterator = function(root, whatToShow, filter) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createTreeWalker = function(root, whatToShow, filter) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    return XMLDocument;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, WriterState, XMLAttribute, XMLCData, XMLComment, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDeclaration, XMLDocType, XMLDocument, XMLDocumentCB, XMLElement, XMLProcessingInstruction, XMLRaw, XMLStringWriter, XMLStringifier, XMLText, getValue, isFunction, isObject, isPlainObject, ref,\n    hasProp = {}.hasOwnProperty;\n\n  ref = require('./Utility'), isObject = ref.isObject, isFunction = ref.isFunction, isPlainObject = ref.isPlainObject, getValue = ref.getValue;\n\n  NodeType = require('./NodeType');\n\n  XMLDocument = require('./XMLDocument');\n\n  XMLElement = require('./XMLElement');\n\n  XMLCData = require('./XMLCData');\n\n  XMLComment = require('./XMLComment');\n\n  XMLRaw = require('./XMLRaw');\n\n  XMLText = require('./XMLText');\n\n  XMLProcessingInstruction = require('./XMLProcessingInstruction');\n\n  XMLDeclaration = require('./XMLDeclaration');\n\n  XMLDocType = require('./XMLDocType');\n\n  XMLDTDAttList = require('./XMLDTDAttList');\n\n  XMLDTDEntity = require('./XMLDTDEntity');\n\n  XMLDTDElement = require('./XMLDTDElement');\n\n  XMLDTDNotation = require('./XMLDTDNotation');\n\n  XMLAttribute = require('./XMLAttribute');\n\n  XMLStringifier = require('./XMLStringifier');\n\n  XMLStringWriter = require('./XMLStringWriter');\n\n  WriterState = require('./WriterState');\n\n  module.exports = XMLDocumentCB = (function() {\n    function XMLDocumentCB(options, onData, onEnd) {\n      var writerOptions;\n      this.name = \"?xml\";\n      this.type = NodeType.Document;\n      options || (options = {});\n      writerOptions = {};\n      if (!options.writer) {\n        options.writer = new XMLStringWriter();\n      } else if (isPlainObject(options.writer)) {\n        writerOptions = options.writer;\n        options.writer = new XMLStringWriter();\n      }\n      this.options = options;\n      this.writer = options.writer;\n      this.writerOptions = this.writer.filterOptions(writerOptions);\n      this.stringify = new XMLStringifier(options);\n      this.onDataCallback = onData || function() {};\n      this.onEndCallback = onEnd || function() {};\n      this.currentNode = null;\n      this.currentLevel = -1;\n      this.openTags = {};\n      this.documentStarted = false;\n      this.documentCompleted = false;\n      this.root = null;\n    }\n\n    XMLDocumentCB.prototype.createChildNode = function(node) {\n      var att, attName, attributes, child, i, len, ref1, ref2;\n      switch (node.type) {\n        case NodeType.CData:\n          this.cdata(node.value);\n          break;\n        case NodeType.Comment:\n          this.comment(node.value);\n          break;\n        case NodeType.Element:\n          attributes = {};\n          ref1 = node.attribs;\n          for (attName in ref1) {\n            if (!hasProp.call(ref1, attName)) continue;\n            att = ref1[attName];\n            attributes[attName] = att.value;\n          }\n          this.node(node.name, attributes);\n          break;\n        case NodeType.Dummy:\n          this.dummy();\n          break;\n        case NodeType.Raw:\n          this.raw(node.value);\n          break;\n        case NodeType.Text:\n          this.text(node.value);\n          break;\n        case NodeType.ProcessingInstruction:\n          this.instruction(node.target, node.value);\n          break;\n        default:\n          throw new Error(\"This XML node type is not supported in a JS object: \" + node.constructor.name);\n      }\n      ref2 = node.children;\n      for (i = 0, len = ref2.length; i < len; i++) {\n        child = ref2[i];\n        this.createChildNode(child);\n        if (child.type === NodeType.Element) {\n          this.up();\n        }\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.dummy = function() {\n      return this;\n    };\n\n    XMLDocumentCB.prototype.node = function(name, attributes, text) {\n      var ref1;\n      if (name == null) {\n        throw new Error(\"Missing node name.\");\n      }\n      if (this.root && this.currentLevel === -1) {\n        throw new Error(\"Document can only have one root node. \" + this.debugInfo(name));\n      }\n      this.openCurrent();\n      name = getValue(name);\n      if (attributes == null) {\n        attributes = {};\n      }\n      attributes = getValue(attributes);\n      if (!isObject(attributes)) {\n        ref1 = [attributes, text], text = ref1[0], attributes = ref1[1];\n      }\n      this.currentNode = new XMLElement(this, name, attributes);\n      this.currentNode.children = false;\n      this.currentLevel++;\n      this.openTags[this.currentLevel] = this.currentNode;\n      if (text != null) {\n        this.text(text);\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.element = function(name, attributes, text) {\n      var child, i, len, oldValidationFlag, ref1, root;\n      if (this.currentNode && this.currentNode.type === NodeType.DocType) {\n        this.dtdElement.apply(this, arguments);\n      } else {\n        if (Array.isArray(name) || isObject(name) || isFunction(name)) {\n          oldValidationFlag = this.options.noValidation;\n          this.options.noValidation = true;\n          root = new XMLDocument(this.options).element('TEMP_ROOT');\n          root.element(name);\n          this.options.noValidation = oldValidationFlag;\n          ref1 = root.children;\n          for (i = 0, len = ref1.length; i < len; i++) {\n            child = ref1[i];\n            this.createChildNode(child);\n            if (child.type === NodeType.Element) {\n              this.up();\n            }\n          }\n        } else {\n          this.node(name, attributes, text);\n        }\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.attribute = function(name, value) {\n      var attName, attValue;\n      if (!this.currentNode || this.currentNode.children) {\n        throw new Error(\"att() can only be used immediately after an ele() call in callback mode. \" + this.debugInfo(name));\n      }\n      if (name != null) {\n        name = getValue(name);\n      }\n      if (isObject(name)) {\n        for (attName in name) {\n          if (!hasProp.call(name, attName)) continue;\n          attValue = name[attName];\n          this.attribute(attName, attValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        if (this.options.keepNullAttributes && (value == null)) {\n          this.currentNode.attribs[name] = new XMLAttribute(this, name, \"\");\n        } else if (value != null) {\n          this.currentNode.attribs[name] = new XMLAttribute(this, name, value);\n        }\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.text = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLText(this, value);\n      this.onData(this.writer.text(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.cdata = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLCData(this, value);\n      this.onData(this.writer.cdata(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.comment = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLComment(this, value);\n      this.onData(this.writer.comment(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.raw = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLRaw(this, value);\n      this.onData(this.writer.raw(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.instruction = function(target, value) {\n      var i, insTarget, insValue, len, node;\n      this.openCurrent();\n      if (target != null) {\n        target = getValue(target);\n      }\n      if (value != null) {\n        value = getValue(value);\n      }\n      if (Array.isArray(target)) {\n        for (i = 0, len = target.length; i < len; i++) {\n          insTarget = target[i];\n          this.instruction(insTarget);\n        }\n      } else if (isObject(target)) {\n        for (insTarget in target) {\n          if (!hasProp.call(target, insTarget)) continue;\n          insValue = target[insTarget];\n          this.instruction(insTarget, insValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        node = new XMLProcessingInstruction(this, target, value);\n        this.onData(this.writer.processingInstruction(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.declaration = function(version, encoding, standalone) {\n      var node;\n      this.openCurrent();\n      if (this.documentStarted) {\n        throw new Error(\"declaration() must be the first node.\");\n      }\n      node = new XMLDeclaration(this, version, encoding, standalone);\n      this.onData(this.writer.declaration(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.doctype = function(root, pubID, sysID) {\n      this.openCurrent();\n      if (root == null) {\n        throw new Error(\"Missing root node name.\");\n      }\n      if (this.root) {\n        throw new Error(\"dtd() must come before the root node.\");\n      }\n      this.currentNode = new XMLDocType(this, pubID, sysID);\n      this.currentNode.rootNodeName = root;\n      this.currentNode.children = false;\n      this.currentLevel++;\n      this.openTags[this.currentLevel] = this.currentNode;\n      return this;\n    };\n\n    XMLDocumentCB.prototype.dtdElement = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDElement(this, name, value);\n      this.onData(this.writer.dtdElement(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.attList = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDAttList(this, elementName, attributeName, attributeType, defaultValueType, defaultValue);\n      this.onData(this.writer.dtdAttList(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.entity = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDEntity(this, false, name, value);\n      this.onData(this.writer.dtdEntity(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.pEntity = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDEntity(this, true, name, value);\n      this.onData(this.writer.dtdEntity(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.notation = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDNotation(this, name, value);\n      this.onData(this.writer.dtdNotation(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.up = function() {\n      if (this.currentLevel < 0) {\n        throw new Error(\"The document node has no parent.\");\n      }\n      if (this.currentNode) {\n        if (this.currentNode.children) {\n          this.closeNode(this.currentNode);\n        } else {\n          this.openNode(this.currentNode);\n        }\n        this.currentNode = null;\n      } else {\n        this.closeNode(this.openTags[this.currentLevel]);\n      }\n      delete this.openTags[this.currentLevel];\n      this.currentLevel--;\n      return this;\n    };\n\n    XMLDocumentCB.prototype.end = function() {\n      while (this.currentLevel >= 0) {\n        this.up();\n      }\n      return this.onEnd();\n    };\n\n    XMLDocumentCB.prototype.openCurrent = function() {\n      if (this.currentNode) {\n        this.currentNode.children = true;\n        return this.openNode(this.currentNode);\n      }\n    };\n\n    XMLDocumentCB.prototype.openNode = function(node) {\n      var att, chunk, name, ref1;\n      if (!node.isOpen) {\n        if (!this.root && this.currentLevel === 0 && node.type === NodeType.Element) {\n          this.root = node;\n        }\n        chunk = '';\n        if (node.type === NodeType.Element) {\n          this.writerOptions.state = WriterState.OpenTag;\n          chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + '<' + node.name;\n          ref1 = node.attribs;\n          for (name in ref1) {\n            if (!hasProp.call(ref1, name)) continue;\n            att = ref1[name];\n            chunk += this.writer.attribute(att, this.writerOptions, this.currentLevel);\n          }\n          chunk += (node.children ? '>' : '/>') + this.writer.endline(node, this.writerOptions, this.currentLevel);\n          this.writerOptions.state = WriterState.InsideTag;\n        } else {\n          this.writerOptions.state = WriterState.OpenTag;\n          chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + '<!DOCTYPE ' + node.rootNodeName;\n          if (node.pubID && node.sysID) {\n            chunk += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n          } else if (node.sysID) {\n            chunk += ' SYSTEM \"' + node.sysID + '\"';\n          }\n          if (node.children) {\n            chunk += ' [';\n            this.writerOptions.state = WriterState.InsideTag;\n          } else {\n            this.writerOptions.state = WriterState.CloseTag;\n            chunk += '>';\n          }\n          chunk += this.writer.endline(node, this.writerOptions, this.currentLevel);\n        }\n        this.onData(chunk, this.currentLevel);\n        return node.isOpen = true;\n      }\n    };\n\n    XMLDocumentCB.prototype.closeNode = function(node) {\n      var chunk;\n      if (!node.isClosed) {\n        chunk = '';\n        this.writerOptions.state = WriterState.CloseTag;\n        if (node.type === NodeType.Element) {\n          chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + '</' + node.name + '>' + this.writer.endline(node, this.writerOptions, this.currentLevel);\n        } else {\n          chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + ']>' + this.writer.endline(node, this.writerOptions, this.currentLevel);\n        }\n        this.writerOptions.state = WriterState.None;\n        this.onData(chunk, this.currentLevel);\n        return node.isClosed = true;\n      }\n    };\n\n    XMLDocumentCB.prototype.onData = function(chunk, level) {\n      this.documentStarted = true;\n      return this.onDataCallback(chunk, level + 1);\n    };\n\n    XMLDocumentCB.prototype.onEnd = function() {\n      this.documentCompleted = true;\n      return this.onEndCallback();\n    };\n\n    XMLDocumentCB.prototype.debugInfo = function(name) {\n      if (name == null) {\n        return \"\";\n      } else {\n        return \"node: <\" + name + \">\";\n      }\n    };\n\n    XMLDocumentCB.prototype.ele = function() {\n      return this.element.apply(this, arguments);\n    };\n\n    XMLDocumentCB.prototype.nod = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLDocumentCB.prototype.txt = function(value) {\n      return this.text(value);\n    };\n\n    XMLDocumentCB.prototype.dat = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLDocumentCB.prototype.com = function(value) {\n      return this.comment(value);\n    };\n\n    XMLDocumentCB.prototype.ins = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLDocumentCB.prototype.dec = function(version, encoding, standalone) {\n      return this.declaration(version, encoding, standalone);\n    };\n\n    XMLDocumentCB.prototype.dtd = function(root, pubID, sysID) {\n      return this.doctype(root, pubID, sysID);\n    };\n\n    XMLDocumentCB.prototype.e = function(name, attributes, text) {\n      return this.element(name, attributes, text);\n    };\n\n    XMLDocumentCB.prototype.n = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLDocumentCB.prototype.t = function(value) {\n      return this.text(value);\n    };\n\n    XMLDocumentCB.prototype.d = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLDocumentCB.prototype.c = function(value) {\n      return this.comment(value);\n    };\n\n    XMLDocumentCB.prototype.r = function(value) {\n      return this.raw(value);\n    };\n\n    XMLDocumentCB.prototype.i = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLDocumentCB.prototype.att = function() {\n      if (this.currentNode && this.currentNode.type === NodeType.DocType) {\n        return this.attList.apply(this, arguments);\n      } else {\n        return this.attribute.apply(this, arguments);\n      }\n    };\n\n    XMLDocumentCB.prototype.a = function() {\n      if (this.currentNode && this.currentNode.type === NodeType.DocType) {\n        return this.attList.apply(this, arguments);\n      } else {\n        return this.attribute.apply(this, arguments);\n      }\n    };\n\n    XMLDocumentCB.prototype.ent = function(name, value) {\n      return this.entity(name, value);\n    };\n\n    XMLDocumentCB.prototype.pent = function(name, value) {\n      return this.pEntity(name, value);\n    };\n\n    XMLDocumentCB.prototype.not = function(name, value) {\n      return this.notation(name, value);\n    };\n\n    return XMLDocumentCB;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDummy, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  module.exports = XMLDummy = (function(superClass) {\n    extend(XMLDummy, superClass);\n\n    function XMLDummy(parent) {\n      XMLDummy.__super__.constructor.call(this, parent);\n      this.type = NodeType.Dummy;\n    }\n\n    XMLDummy.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLDummy.prototype.toString = function(options) {\n      return '';\n    };\n\n    return XMLDummy;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLAttribute, XMLElement, XMLNamedNodeMap, XMLNode, getValue, isFunction, isObject, ref,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  ref = require('./Utility'), isObject = ref.isObject, isFunction = ref.isFunction, getValue = ref.getValue;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  XMLAttribute = require('./XMLAttribute');\n\n  XMLNamedNodeMap = require('./XMLNamedNodeMap');\n\n  module.exports = XMLElement = (function(superClass) {\n    extend(XMLElement, superClass);\n\n    function XMLElement(parent, name, attributes) {\n      var child, j, len, ref1;\n      XMLElement.__super__.constructor.call(this, parent);\n      if (name == null) {\n        throw new Error(\"Missing element name. \" + this.debugInfo());\n      }\n      this.name = this.stringify.name(name);\n      this.type = NodeType.Element;\n      this.attribs = {};\n      this.schemaTypeInfo = null;\n      if (attributes != null) {\n        this.attribute(attributes);\n      }\n      if (parent.type === NodeType.Document) {\n        this.isRoot = true;\n        this.documentObject = parent;\n        parent.rootObject = this;\n        if (parent.children) {\n          ref1 = parent.children;\n          for (j = 0, len = ref1.length; j < len; j++) {\n            child = ref1[j];\n            if (child.type === NodeType.DocType) {\n              child.name = this.name;\n              break;\n            }\n          }\n        }\n      }\n    }\n\n    Object.defineProperty(XMLElement.prototype, 'tagName', {\n      get: function() {\n        return this.name;\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'namespaceURI', {\n      get: function() {\n        return '';\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'prefix', {\n      get: function() {\n        return '';\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'localName', {\n      get: function() {\n        return this.name;\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'id', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'className', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'classList', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'attributes', {\n      get: function() {\n        if (!this.attributeMap || !this.attributeMap.nodes) {\n          this.attributeMap = new XMLNamedNodeMap(this.attribs);\n        }\n        return this.attributeMap;\n      }\n    });\n\n    XMLElement.prototype.clone = function() {\n      var att, attName, clonedSelf, ref1;\n      clonedSelf = Object.create(this);\n      if (clonedSelf.isRoot) {\n        clonedSelf.documentObject = null;\n      }\n      clonedSelf.attribs = {};\n      ref1 = this.attribs;\n      for (attName in ref1) {\n        if (!hasProp.call(ref1, attName)) continue;\n        att = ref1[attName];\n        clonedSelf.attribs[attName] = att.clone();\n      }\n      clonedSelf.children = [];\n      this.children.forEach(function(child) {\n        var clonedChild;\n        clonedChild = child.clone();\n        clonedChild.parent = clonedSelf;\n        return clonedSelf.children.push(clonedChild);\n      });\n      return clonedSelf;\n    };\n\n    XMLElement.prototype.attribute = function(name, value) {\n      var attName, attValue;\n      if (name != null) {\n        name = getValue(name);\n      }\n      if (isObject(name)) {\n        for (attName in name) {\n          if (!hasProp.call(name, attName)) continue;\n          attValue = name[attName];\n          this.attribute(attName, attValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        if (this.options.keepNullAttributes && (value == null)) {\n          this.attribs[name] = new XMLAttribute(this, name, \"\");\n        } else if (value != null) {\n          this.attribs[name] = new XMLAttribute(this, name, value);\n        }\n      }\n      return this;\n    };\n\n    XMLElement.prototype.removeAttribute = function(name) {\n      var attName, j, len;\n      if (name == null) {\n        throw new Error(\"Missing attribute name. \" + this.debugInfo());\n      }\n      name = getValue(name);\n      if (Array.isArray(name)) {\n        for (j = 0, len = name.length; j < len; j++) {\n          attName = name[j];\n          delete this.attribs[attName];\n        }\n      } else {\n        delete this.attribs[name];\n      }\n      return this;\n    };\n\n    XMLElement.prototype.toString = function(options) {\n      return this.options.writer.element(this, this.options.writer.filterOptions(options));\n    };\n\n    XMLElement.prototype.att = function(name, value) {\n      return this.attribute(name, value);\n    };\n\n    XMLElement.prototype.a = function(name, value) {\n      return this.attribute(name, value);\n    };\n\n    XMLElement.prototype.getAttribute = function(name) {\n      if (this.attribs.hasOwnProperty(name)) {\n        return this.attribs[name].value;\n      } else {\n        return null;\n      }\n    };\n\n    XMLElement.prototype.setAttribute = function(name, value) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getAttributeNode = function(name) {\n      if (this.attribs.hasOwnProperty(name)) {\n        return this.attribs[name];\n      } else {\n        return null;\n      }\n    };\n\n    XMLElement.prototype.setAttributeNode = function(newAttr) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.removeAttributeNode = function(oldAttr) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getElementsByTagName = function(name) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getAttributeNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.setAttributeNS = function(namespaceURI, qualifiedName, value) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.removeAttributeNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getAttributeNodeNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.setAttributeNodeNS = function(newAttr) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getElementsByTagNameNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.hasAttribute = function(name) {\n      return this.attribs.hasOwnProperty(name);\n    };\n\n    XMLElement.prototype.hasAttributeNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.setIdAttribute = function(name, isId) {\n      if (this.attribs.hasOwnProperty(name)) {\n        return this.attribs[name].isId;\n      } else {\n        return isId;\n      }\n    };\n\n    XMLElement.prototype.setIdAttributeNS = function(namespaceURI, localName, isId) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.setIdAttributeNode = function(idAttr, isId) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getElementsByTagName = function(tagname) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getElementsByTagNameNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getElementsByClassName = function(classNames) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.isEqualNode = function(node) {\n      var i, j, ref1;\n      if (!XMLElement.__super__.isEqualNode.apply(this, arguments).isEqualNode(node)) {\n        return false;\n      }\n      if (node.namespaceURI !== this.namespaceURI) {\n        return false;\n      }\n      if (node.prefix !== this.prefix) {\n        return false;\n      }\n      if (node.localName !== this.localName) {\n        return false;\n      }\n      if (node.attribs.length !== this.attribs.length) {\n        return false;\n      }\n      for (i = j = 0, ref1 = this.attribs.length - 1; 0 <= ref1 ? j <= ref1 : j >= ref1; i = 0 <= ref1 ? ++j : --j) {\n        if (!this.attribs[i].isEqualNode(node.attribs[i])) {\n          return false;\n        }\n      }\n      return true;\n    };\n\n    return XMLElement;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLNamedNodeMap;\n\n  module.exports = XMLNamedNodeMap = (function() {\n    function XMLNamedNodeMap(nodes) {\n      this.nodes = nodes;\n    }\n\n    Object.defineProperty(XMLNamedNodeMap.prototype, 'length', {\n      get: function() {\n        return Object.keys(this.nodes).length || 0;\n      }\n    });\n\n    XMLNamedNodeMap.prototype.clone = function() {\n      return this.nodes = null;\n    };\n\n    XMLNamedNodeMap.prototype.getNamedItem = function(name) {\n      return this.nodes[name];\n    };\n\n    XMLNamedNodeMap.prototype.setNamedItem = function(node) {\n      var oldNode;\n      oldNode = this.nodes[node.nodeName];\n      this.nodes[node.nodeName] = node;\n      return oldNode || null;\n    };\n\n    XMLNamedNodeMap.prototype.removeNamedItem = function(name) {\n      var oldNode;\n      oldNode = this.nodes[name];\n      delete this.nodes[name];\n      return oldNode || null;\n    };\n\n    XMLNamedNodeMap.prototype.item = function(index) {\n      return this.nodes[Object.keys(this.nodes)[index]] || null;\n    };\n\n    XMLNamedNodeMap.prototype.getNamedItemNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    XMLNamedNodeMap.prototype.setNamedItemNS = function(node) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    XMLNamedNodeMap.prototype.removeNamedItemNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    return XMLNamedNodeMap;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var DocumentPosition, NodeType, XMLCData, XMLComment, XMLDeclaration, XMLDocType, XMLDummy, XMLElement, XMLNamedNodeMap, XMLNode, XMLNodeList, XMLProcessingInstruction, XMLRaw, XMLText, getValue, isEmpty, isFunction, isObject, ref1,\n    hasProp = {}.hasOwnProperty;\n\n  ref1 = require('./Utility'), isObject = ref1.isObject, isFunction = ref1.isFunction, isEmpty = ref1.isEmpty, getValue = ref1.getValue;\n\n  XMLElement = null;\n\n  XMLCData = null;\n\n  XMLComment = null;\n\n  XMLDeclaration = null;\n\n  XMLDocType = null;\n\n  XMLRaw = null;\n\n  XMLText = null;\n\n  XMLProcessingInstruction = null;\n\n  XMLDummy = null;\n\n  NodeType = null;\n\n  XMLNodeList = null;\n\n  XMLNamedNodeMap = null;\n\n  DocumentPosition = null;\n\n  module.exports = XMLNode = (function() {\n    function XMLNode(parent1) {\n      this.parent = parent1;\n      if (this.parent) {\n        this.options = this.parent.options;\n        this.stringify = this.parent.stringify;\n      }\n      this.value = null;\n      this.children = [];\n      this.baseURI = null;\n      if (!XMLElement) {\n        XMLElement = require('./XMLElement');\n        XMLCData = require('./XMLCData');\n        XMLComment = require('./XMLComment');\n        XMLDeclaration = require('./XMLDeclaration');\n        XMLDocType = require('./XMLDocType');\n        XMLRaw = require('./XMLRaw');\n        XMLText = require('./XMLText');\n        XMLProcessingInstruction = require('./XMLProcessingInstruction');\n        XMLDummy = require('./XMLDummy');\n        NodeType = require('./NodeType');\n        XMLNodeList = require('./XMLNodeList');\n        XMLNamedNodeMap = require('./XMLNamedNodeMap');\n        DocumentPosition = require('./DocumentPosition');\n      }\n    }\n\n    Object.defineProperty(XMLNode.prototype, 'nodeName', {\n      get: function() {\n        return this.name;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'nodeType', {\n      get: function() {\n        return this.type;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'nodeValue', {\n      get: function() {\n        return this.value;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'parentNode', {\n      get: function() {\n        return this.parent;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'childNodes', {\n      get: function() {\n        if (!this.childNodeList || !this.childNodeList.nodes) {\n          this.childNodeList = new XMLNodeList(this.children);\n        }\n        return this.childNodeList;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'firstChild', {\n      get: function() {\n        return this.children[0] || null;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'lastChild', {\n      get: function() {\n        return this.children[this.children.length - 1] || null;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'previousSibling', {\n      get: function() {\n        var i;\n        i = this.parent.children.indexOf(this);\n        return this.parent.children[i - 1] || null;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'nextSibling', {\n      get: function() {\n        var i;\n        i = this.parent.children.indexOf(this);\n        return this.parent.children[i + 1] || null;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'ownerDocument', {\n      get: function() {\n        return this.document() || null;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'textContent', {\n      get: function() {\n        var child, j, len, ref2, str;\n        if (this.nodeType === NodeType.Element || this.nodeType === NodeType.DocumentFragment) {\n          str = '';\n          ref2 = this.children;\n          for (j = 0, len = ref2.length; j < len; j++) {\n            child = ref2[j];\n            if (child.textContent) {\n              str += child.textContent;\n            }\n          }\n          return str;\n        } else {\n          return null;\n        }\n      },\n      set: function(value) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    XMLNode.prototype.setParent = function(parent) {\n      var child, j, len, ref2, results;\n      this.parent = parent;\n      if (parent) {\n        this.options = parent.options;\n        this.stringify = parent.stringify;\n      }\n      ref2 = this.children;\n      results = [];\n      for (j = 0, len = ref2.length; j < len; j++) {\n        child = ref2[j];\n        results.push(child.setParent(this));\n      }\n      return results;\n    };\n\n    XMLNode.prototype.element = function(name, attributes, text) {\n      var childNode, item, j, k, key, lastChild, len, len1, ref2, ref3, val;\n      lastChild = null;\n      if (attributes === null && (text == null)) {\n        ref2 = [{}, null], attributes = ref2[0], text = ref2[1];\n      }\n      if (attributes == null) {\n        attributes = {};\n      }\n      attributes = getValue(attributes);\n      if (!isObject(attributes)) {\n        ref3 = [attributes, text], text = ref3[0], attributes = ref3[1];\n      }\n      if (name != null) {\n        name = getValue(name);\n      }\n      if (Array.isArray(name)) {\n        for (j = 0, len = name.length; j < len; j++) {\n          item = name[j];\n          lastChild = this.element(item);\n        }\n      } else if (isFunction(name)) {\n        lastChild = this.element(name.apply());\n      } else if (isObject(name)) {\n        for (key in name) {\n          if (!hasProp.call(name, key)) continue;\n          val = name[key];\n          if (isFunction(val)) {\n            val = val.apply();\n          }\n          if (!this.options.ignoreDecorators && this.stringify.convertAttKey && key.indexOf(this.stringify.convertAttKey) === 0) {\n            lastChild = this.attribute(key.substr(this.stringify.convertAttKey.length), val);\n          } else if (!this.options.separateArrayItems && Array.isArray(val) && isEmpty(val)) {\n            lastChild = this.dummy();\n          } else if (isObject(val) && isEmpty(val)) {\n            lastChild = this.element(key);\n          } else if (!this.options.keepNullNodes && (val == null)) {\n            lastChild = this.dummy();\n          } else if (!this.options.separateArrayItems && Array.isArray(val)) {\n            for (k = 0, len1 = val.length; k < len1; k++) {\n              item = val[k];\n              childNode = {};\n              childNode[key] = item;\n              lastChild = this.element(childNode);\n            }\n          } else if (isObject(val)) {\n            if (!this.options.ignoreDecorators && this.stringify.convertTextKey && key.indexOf(this.stringify.convertTextKey) === 0) {\n              lastChild = this.element(val);\n            } else {\n              lastChild = this.element(key);\n              lastChild.element(val);\n            }\n          } else {\n            lastChild = this.element(key, val);\n          }\n        }\n      } else if (!this.options.keepNullNodes && text === null) {\n        lastChild = this.dummy();\n      } else {\n        if (!this.options.ignoreDecorators && this.stringify.convertTextKey && name.indexOf(this.stringify.convertTextKey) === 0) {\n          lastChild = this.text(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertCDataKey && name.indexOf(this.stringify.convertCDataKey) === 0) {\n          lastChild = this.cdata(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertCommentKey && name.indexOf(this.stringify.convertCommentKey) === 0) {\n          lastChild = this.comment(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertRawKey && name.indexOf(this.stringify.convertRawKey) === 0) {\n          lastChild = this.raw(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertPIKey && name.indexOf(this.stringify.convertPIKey) === 0) {\n          lastChild = this.instruction(name.substr(this.stringify.convertPIKey.length), text);\n        } else {\n          lastChild = this.node(name, attributes, text);\n        }\n      }\n      if (lastChild == null) {\n        throw new Error(\"Could not create any elements with: \" + name + \". \" + this.debugInfo());\n      }\n      return lastChild;\n    };\n\n    XMLNode.prototype.insertBefore = function(name, attributes, text) {\n      var child, i, newChild, refChild, removed;\n      if (name != null ? name.type : void 0) {\n        newChild = name;\n        refChild = attributes;\n        newChild.setParent(this);\n        if (refChild) {\n          i = children.indexOf(refChild);\n          removed = children.splice(i);\n          children.push(newChild);\n          Array.prototype.push.apply(children, removed);\n        } else {\n          children.push(newChild);\n        }\n        return newChild;\n      } else {\n        if (this.isRoot) {\n          throw new Error(\"Cannot insert elements at root level. \" + this.debugInfo(name));\n        }\n        i = this.parent.children.indexOf(this);\n        removed = this.parent.children.splice(i);\n        child = this.parent.element(name, attributes, text);\n        Array.prototype.push.apply(this.parent.children, removed);\n        return child;\n      }\n    };\n\n    XMLNode.prototype.insertAfter = function(name, attributes, text) {\n      var child, i, removed;\n      if (this.isRoot) {\n        throw new Error(\"Cannot insert elements at root level. \" + this.debugInfo(name));\n      }\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i + 1);\n      child = this.parent.element(name, attributes, text);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return child;\n    };\n\n    XMLNode.prototype.remove = function() {\n      var i, ref2;\n      if (this.isRoot) {\n        throw new Error(\"Cannot remove the root element. \" + this.debugInfo());\n      }\n      i = this.parent.children.indexOf(this);\n      [].splice.apply(this.parent.children, [i, i - i + 1].concat(ref2 = [])), ref2;\n      return this.parent;\n    };\n\n    XMLNode.prototype.node = function(name, attributes, text) {\n      var child, ref2;\n      if (name != null) {\n        name = getValue(name);\n      }\n      attributes || (attributes = {});\n      attributes = getValue(attributes);\n      if (!isObject(attributes)) {\n        ref2 = [attributes, text], text = ref2[0], attributes = ref2[1];\n      }\n      child = new XMLElement(this, name, attributes);\n      if (text != null) {\n        child.text(text);\n      }\n      this.children.push(child);\n      return child;\n    };\n\n    XMLNode.prototype.text = function(value) {\n      var child;\n      if (isObject(value)) {\n        this.element(value);\n      }\n      child = new XMLText(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.cdata = function(value) {\n      var child;\n      child = new XMLCData(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.comment = function(value) {\n      var child;\n      child = new XMLComment(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.commentBefore = function(value) {\n      var child, i, removed;\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i);\n      child = this.parent.comment(value);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return this;\n    };\n\n    XMLNode.prototype.commentAfter = function(value) {\n      var child, i, removed;\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i + 1);\n      child = this.parent.comment(value);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return this;\n    };\n\n    XMLNode.prototype.raw = function(value) {\n      var child;\n      child = new XMLRaw(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.dummy = function() {\n      var child;\n      child = new XMLDummy(this);\n      return child;\n    };\n\n    XMLNode.prototype.instruction = function(target, value) {\n      var insTarget, insValue, instruction, j, len;\n      if (target != null) {\n        target = getValue(target);\n      }\n      if (value != null) {\n        value = getValue(value);\n      }\n      if (Array.isArray(target)) {\n        for (j = 0, len = target.length; j < len; j++) {\n          insTarget = target[j];\n          this.instruction(insTarget);\n        }\n      } else if (isObject(target)) {\n        for (insTarget in target) {\n          if (!hasProp.call(target, insTarget)) continue;\n          insValue = target[insTarget];\n          this.instruction(insTarget, insValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        instruction = new XMLProcessingInstruction(this, target, value);\n        this.children.push(instruction);\n      }\n      return this;\n    };\n\n    XMLNode.prototype.instructionBefore = function(target, value) {\n      var child, i, removed;\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i);\n      child = this.parent.instruction(target, value);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return this;\n    };\n\n    XMLNode.prototype.instructionAfter = function(target, value) {\n      var child, i, removed;\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i + 1);\n      child = this.parent.instruction(target, value);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return this;\n    };\n\n    XMLNode.prototype.declaration = function(version, encoding, standalone) {\n      var doc, xmldec;\n      doc = this.document();\n      xmldec = new XMLDeclaration(doc, version, encoding, standalone);\n      if (doc.children.length === 0) {\n        doc.children.unshift(xmldec);\n      } else if (doc.children[0].type === NodeType.Declaration) {\n        doc.children[0] = xmldec;\n      } else {\n        doc.children.unshift(xmldec);\n      }\n      return doc.root() || doc;\n    };\n\n    XMLNode.prototype.dtd = function(pubID, sysID) {\n      var child, doc, doctype, i, j, k, len, len1, ref2, ref3;\n      doc = this.document();\n      doctype = new XMLDocType(doc, pubID, sysID);\n      ref2 = doc.children;\n      for (i = j = 0, len = ref2.length; j < len; i = ++j) {\n        child = ref2[i];\n        if (child.type === NodeType.DocType) {\n          doc.children[i] = doctype;\n          return doctype;\n        }\n      }\n      ref3 = doc.children;\n      for (i = k = 0, len1 = ref3.length; k < len1; i = ++k) {\n        child = ref3[i];\n        if (child.isRoot) {\n          doc.children.splice(i, 0, doctype);\n          return doctype;\n        }\n      }\n      doc.children.push(doctype);\n      return doctype;\n    };\n\n    XMLNode.prototype.up = function() {\n      if (this.isRoot) {\n        throw new Error(\"The root node has no parent. Use doc() if you need to get the document object.\");\n      }\n      return this.parent;\n    };\n\n    XMLNode.prototype.root = function() {\n      var node;\n      node = this;\n      while (node) {\n        if (node.type === NodeType.Document) {\n          return node.rootObject;\n        } else if (node.isRoot) {\n          return node;\n        } else {\n          node = node.parent;\n        }\n      }\n    };\n\n    XMLNode.prototype.document = function() {\n      var node;\n      node = this;\n      while (node) {\n        if (node.type === NodeType.Document) {\n          return node;\n        } else {\n          node = node.parent;\n        }\n      }\n    };\n\n    XMLNode.prototype.end = function(options) {\n      return this.document().end(options);\n    };\n\n    XMLNode.prototype.prev = function() {\n      var i;\n      i = this.parent.children.indexOf(this);\n      if (i < 1) {\n        throw new Error(\"Already at the first node. \" + this.debugInfo());\n      }\n      return this.parent.children[i - 1];\n    };\n\n    XMLNode.prototype.next = function() {\n      var i;\n      i = this.parent.children.indexOf(this);\n      if (i === -1 || i === this.parent.children.length - 1) {\n        throw new Error(\"Already at the last node. \" + this.debugInfo());\n      }\n      return this.parent.children[i + 1];\n    };\n\n    XMLNode.prototype.importDocument = function(doc) {\n      var clonedRoot;\n      clonedRoot = doc.root().clone();\n      clonedRoot.parent = this;\n      clonedRoot.isRoot = false;\n      this.children.push(clonedRoot);\n      return this;\n    };\n\n    XMLNode.prototype.debugInfo = function(name) {\n      var ref2, ref3;\n      name = name || this.name;\n      if ((name == null) && !((ref2 = this.parent) != null ? ref2.name : void 0)) {\n        return \"\";\n      } else if (name == null) {\n        return \"parent: <\" + this.parent.name + \">\";\n      } else if (!((ref3 = this.parent) != null ? ref3.name : void 0)) {\n        return \"node: <\" + name + \">\";\n      } else {\n        return \"node: <\" + name + \">, parent: <\" + this.parent.name + \">\";\n      }\n    };\n\n    XMLNode.prototype.ele = function(name, attributes, text) {\n      return this.element(name, attributes, text);\n    };\n\n    XMLNode.prototype.nod = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLNode.prototype.txt = function(value) {\n      return this.text(value);\n    };\n\n    XMLNode.prototype.dat = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLNode.prototype.com = function(value) {\n      return this.comment(value);\n    };\n\n    XMLNode.prototype.ins = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLNode.prototype.doc = function() {\n      return this.document();\n    };\n\n    XMLNode.prototype.dec = function(version, encoding, standalone) {\n      return this.declaration(version, encoding, standalone);\n    };\n\n    XMLNode.prototype.e = function(name, attributes, text) {\n      return this.element(name, attributes, text);\n    };\n\n    XMLNode.prototype.n = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLNode.prototype.t = function(value) {\n      return this.text(value);\n    };\n\n    XMLNode.prototype.d = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLNode.prototype.c = function(value) {\n      return this.comment(value);\n    };\n\n    XMLNode.prototype.r = function(value) {\n      return this.raw(value);\n    };\n\n    XMLNode.prototype.i = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLNode.prototype.u = function() {\n      return this.up();\n    };\n\n    XMLNode.prototype.importXMLBuilder = function(doc) {\n      return this.importDocument(doc);\n    };\n\n    XMLNode.prototype.replaceChild = function(newChild, oldChild) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.removeChild = function(oldChild) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.appendChild = function(newChild) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.hasChildNodes = function() {\n      return this.children.length !== 0;\n    };\n\n    XMLNode.prototype.cloneNode = function(deep) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.normalize = function() {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.isSupported = function(feature, version) {\n      return true;\n    };\n\n    XMLNode.prototype.hasAttributes = function() {\n      return this.attribs.length !== 0;\n    };\n\n    XMLNode.prototype.compareDocumentPosition = function(other) {\n      var ref, res;\n      ref = this;\n      if (ref === other) {\n        return 0;\n      } else if (this.document() !== other.document()) {\n        res = DocumentPosition.Disconnected | DocumentPosition.ImplementationSpecific;\n        if (Math.random() < 0.5) {\n          res |= DocumentPosition.Preceding;\n        } else {\n          res |= DocumentPosition.Following;\n        }\n        return res;\n      } else if (ref.isAncestor(other)) {\n        return DocumentPosition.Contains | DocumentPosition.Preceding;\n      } else if (ref.isDescendant(other)) {\n        return DocumentPosition.Contains | DocumentPosition.Following;\n      } else if (ref.isPreceding(other)) {\n        return DocumentPosition.Preceding;\n      } else {\n        return DocumentPosition.Following;\n      }\n    };\n\n    XMLNode.prototype.isSameNode = function(other) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.lookupPrefix = function(namespaceURI) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.isDefaultNamespace = function(namespaceURI) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.lookupNamespaceURI = function(prefix) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.isEqualNode = function(node) {\n      var i, j, ref2;\n      if (node.nodeType !== this.nodeType) {\n        return false;\n      }\n      if (node.children.length !== this.children.length) {\n        return false;\n      }\n      for (i = j = 0, ref2 = this.children.length - 1; 0 <= ref2 ? j <= ref2 : j >= ref2; i = 0 <= ref2 ? ++j : --j) {\n        if (!this.children[i].isEqualNode(node.children[i])) {\n          return false;\n        }\n      }\n      return true;\n    };\n\n    XMLNode.prototype.getFeature = function(feature, version) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.setUserData = function(key, data, handler) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.getUserData = function(key) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.contains = function(other) {\n      if (!other) {\n        return false;\n      }\n      return other === this || this.isDescendant(other);\n    };\n\n    XMLNode.prototype.isDescendant = function(node) {\n      var child, isDescendantChild, j, len, ref2;\n      ref2 = this.children;\n      for (j = 0, len = ref2.length; j < len; j++) {\n        child = ref2[j];\n        if (node === child) {\n          return true;\n        }\n        isDescendantChild = child.isDescendant(node);\n        if (isDescendantChild) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    XMLNode.prototype.isAncestor = function(node) {\n      return node.isDescendant(this);\n    };\n\n    XMLNode.prototype.isPreceding = function(node) {\n      var nodePos, thisPos;\n      nodePos = this.treePosition(node);\n      thisPos = this.treePosition(this);\n      if (nodePos === -1 || thisPos === -1) {\n        return false;\n      } else {\n        return nodePos < thisPos;\n      }\n    };\n\n    XMLNode.prototype.isFollowing = function(node) {\n      var nodePos, thisPos;\n      nodePos = this.treePosition(node);\n      thisPos = this.treePosition(this);\n      if (nodePos === -1 || thisPos === -1) {\n        return false;\n      } else {\n        return nodePos > thisPos;\n      }\n    };\n\n    XMLNode.prototype.treePosition = function(node) {\n      var found, pos;\n      pos = 0;\n      found = false;\n      this.foreachTreeNode(this.document(), function(childNode) {\n        pos++;\n        if (!found && childNode === node) {\n          return found = true;\n        }\n      });\n      if (found) {\n        return pos;\n      } else {\n        return -1;\n      }\n    };\n\n    XMLNode.prototype.foreachTreeNode = function(node, func) {\n      var child, j, len, ref2, res;\n      node || (node = this.document());\n      ref2 = node.children;\n      for (j = 0, len = ref2.length; j < len; j++) {\n        child = ref2[j];\n        if (res = func(child)) {\n          return res;\n        } else {\n          res = this.foreachTreeNode(child, func);\n          if (res) {\n            return res;\n          }\n        }\n      }\n    };\n\n    return XMLNode;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLNodeList;\n\n  module.exports = XMLNodeList = (function() {\n    function XMLNodeList(nodes) {\n      this.nodes = nodes;\n    }\n\n    Object.defineProperty(XMLNodeList.prototype, 'length', {\n      get: function() {\n        return this.nodes.length || 0;\n      }\n    });\n\n    XMLNodeList.prototype.clone = function() {\n      return this.nodes = null;\n    };\n\n    XMLNodeList.prototype.item = function(index) {\n      return this.nodes[index] || null;\n    };\n\n    return XMLNodeList;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLCharacterData, XMLProcessingInstruction,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLCharacterData = require('./XMLCharacterData');\n\n  module.exports = XMLProcessingInstruction = (function(superClass) {\n    extend(XMLProcessingInstruction, superClass);\n\n    function XMLProcessingInstruction(parent, target, value) {\n      XMLProcessingInstruction.__super__.constructor.call(this, parent);\n      if (target == null) {\n        throw new Error(\"Missing instruction target. \" + this.debugInfo());\n      }\n      this.type = NodeType.ProcessingInstruction;\n      this.target = this.stringify.insTarget(target);\n      this.name = this.target;\n      if (value) {\n        this.value = this.stringify.insValue(value);\n      }\n    }\n\n    XMLProcessingInstruction.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLProcessingInstruction.prototype.toString = function(options) {\n      return this.options.writer.processingInstruction(this, this.options.writer.filterOptions(options));\n    };\n\n    XMLProcessingInstruction.prototype.isEqualNode = function(node) {\n      if (!XMLProcessingInstruction.__super__.isEqualNode.apply(this, arguments).isEqualNode(node)) {\n        return false;\n      }\n      if (node.target !== this.target) {\n        return false;\n      }\n      return true;\n    };\n\n    return XMLProcessingInstruction;\n\n  })(XMLCharacterData);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLNode, XMLRaw,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLRaw = (function(superClass) {\n    extend(XMLRaw, superClass);\n\n    function XMLRaw(parent, text) {\n      XMLRaw.__super__.constructor.call(this, parent);\n      if (text == null) {\n        throw new Error(\"Missing raw text. \" + this.debugInfo());\n      }\n      this.type = NodeType.Raw;\n      this.value = this.stringify.raw(text);\n    }\n\n    XMLRaw.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLRaw.prototype.toString = function(options) {\n      return this.options.writer.raw(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLRaw;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, WriterState, XMLStreamWriter, XMLWriterBase,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLWriterBase = require('./XMLWriterBase');\n\n  WriterState = require('./WriterState');\n\n  module.exports = XMLStreamWriter = (function(superClass) {\n    extend(XMLStreamWriter, superClass);\n\n    function XMLStreamWriter(stream, options) {\n      this.stream = stream;\n      XMLStreamWriter.__super__.constructor.call(this, options);\n    }\n\n    XMLStreamWriter.prototype.endline = function(node, options, level) {\n      if (node.isLastRootNode && options.state === WriterState.CloseTag) {\n        return '';\n      } else {\n        return XMLStreamWriter.__super__.endline.call(this, node, options, level);\n      }\n    };\n\n    XMLStreamWriter.prototype.document = function(doc, options) {\n      var child, i, j, k, len, len1, ref, ref1, results;\n      ref = doc.children;\n      for (i = j = 0, len = ref.length; j < len; i = ++j) {\n        child = ref[i];\n        child.isLastRootNode = i === doc.children.length - 1;\n      }\n      options = this.filterOptions(options);\n      ref1 = doc.children;\n      results = [];\n      for (k = 0, len1 = ref1.length; k < len1; k++) {\n        child = ref1[k];\n        results.push(this.writeChildNode(child, options, 0));\n      }\n      return results;\n    };\n\n    XMLStreamWriter.prototype.attribute = function(att, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.attribute.call(this, att, options, level));\n    };\n\n    XMLStreamWriter.prototype.cdata = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.cdata.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.comment = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.comment.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.declaration = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.declaration.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.docType = function(node, options, level) {\n      var child, j, len, ref;\n      level || (level = 0);\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      this.stream.write(this.indent(node, options, level));\n      this.stream.write('<!DOCTYPE ' + node.root().name);\n      if (node.pubID && node.sysID) {\n        this.stream.write(' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"');\n      } else if (node.sysID) {\n        this.stream.write(' SYSTEM \"' + node.sysID + '\"');\n      }\n      if (node.children.length > 0) {\n        this.stream.write(' [');\n        this.stream.write(this.endline(node, options, level));\n        options.state = WriterState.InsideTag;\n        ref = node.children;\n        for (j = 0, len = ref.length; j < len; j++) {\n          child = ref[j];\n          this.writeChildNode(child, options, level + 1);\n        }\n        options.state = WriterState.CloseTag;\n        this.stream.write(']');\n      }\n      options.state = WriterState.CloseTag;\n      this.stream.write(options.spaceBeforeSlash + '>');\n      this.stream.write(this.endline(node, options, level));\n      options.state = WriterState.None;\n      return this.closeNode(node, options, level);\n    };\n\n    XMLStreamWriter.prototype.element = function(node, options, level) {\n      var att, child, childNodeCount, firstChildNode, j, len, name, prettySuppressed, ref, ref1;\n      level || (level = 0);\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      this.stream.write(this.indent(node, options, level) + '<' + node.name);\n      ref = node.attribs;\n      for (name in ref) {\n        if (!hasProp.call(ref, name)) continue;\n        att = ref[name];\n        this.attribute(att, options, level);\n      }\n      childNodeCount = node.children.length;\n      firstChildNode = childNodeCount === 0 ? null : node.children[0];\n      if (childNodeCount === 0 || node.children.every(function(e) {\n        return (e.type === NodeType.Text || e.type === NodeType.Raw) && e.value === '';\n      })) {\n        if (options.allowEmpty) {\n          this.stream.write('>');\n          options.state = WriterState.CloseTag;\n          this.stream.write('</' + node.name + '>');\n        } else {\n          options.state = WriterState.CloseTag;\n          this.stream.write(options.spaceBeforeSlash + '/>');\n        }\n      } else if (options.pretty && childNodeCount === 1 && (firstChildNode.type === NodeType.Text || firstChildNode.type === NodeType.Raw) && (firstChildNode.value != null)) {\n        this.stream.write('>');\n        options.state = WriterState.InsideTag;\n        options.suppressPrettyCount++;\n        prettySuppressed = true;\n        this.writeChildNode(firstChildNode, options, level + 1);\n        options.suppressPrettyCount--;\n        prettySuppressed = false;\n        options.state = WriterState.CloseTag;\n        this.stream.write('</' + node.name + '>');\n      } else {\n        this.stream.write('>' + this.endline(node, options, level));\n        options.state = WriterState.InsideTag;\n        ref1 = node.children;\n        for (j = 0, len = ref1.length; j < len; j++) {\n          child = ref1[j];\n          this.writeChildNode(child, options, level + 1);\n        }\n        options.state = WriterState.CloseTag;\n        this.stream.write(this.indent(node, options, level) + '</' + node.name + '>');\n      }\n      this.stream.write(this.endline(node, options, level));\n      options.state = WriterState.None;\n      return this.closeNode(node, options, level);\n    };\n\n    XMLStreamWriter.prototype.processingInstruction = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.processingInstruction.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.raw = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.raw.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.text = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.text.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.dtdAttList = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.dtdAttList.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.dtdElement = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.dtdElement.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.dtdEntity = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.dtdEntity.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.dtdNotation = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.dtdNotation.call(this, node, options, level));\n    };\n\n    return XMLStreamWriter;\n\n  })(XMLWriterBase);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLStringWriter, XMLWriterBase,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLWriterBase = require('./XMLWriterBase');\n\n  module.exports = XMLStringWriter = (function(superClass) {\n    extend(XMLStringWriter, superClass);\n\n    function XMLStringWriter(options) {\n      XMLStringWriter.__super__.constructor.call(this, options);\n    }\n\n    XMLStringWriter.prototype.document = function(doc, options) {\n      var child, i, len, r, ref;\n      options = this.filterOptions(options);\n      r = '';\n      ref = doc.children;\n      for (i = 0, len = ref.length; i < len; i++) {\n        child = ref[i];\n        r += this.writeChildNode(child, options, 0);\n      }\n      if (options.pretty && r.slice(-options.newline.length) === options.newline) {\n        r = r.slice(0, -options.newline.length);\n      }\n      return r;\n    };\n\n    return XMLStringWriter;\n\n  })(XMLWriterBase);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLStringifier,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    hasProp = {}.hasOwnProperty;\n\n  module.exports = XMLStringifier = (function() {\n    function XMLStringifier(options) {\n      this.assertLegalName = bind(this.assertLegalName, this);\n      this.assertLegalChar = bind(this.assertLegalChar, this);\n      var key, ref, value;\n      options || (options = {});\n      this.options = options;\n      if (!this.options.version) {\n        this.options.version = '1.0';\n      }\n      ref = options.stringify || {};\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this[key] = value;\n      }\n    }\n\n    XMLStringifier.prototype.name = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalName('' + val || '');\n    };\n\n    XMLStringifier.prototype.text = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar(this.textEscape('' + val || ''));\n    };\n\n    XMLStringifier.prototype.cdata = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      val = '' + val || '';\n      val = val.replace(']]>', ']]]]><![CDATA[>');\n      return this.assertLegalChar(val);\n    };\n\n    XMLStringifier.prototype.comment = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      val = '' + val || '';\n      if (val.match(/--/)) {\n        throw new Error(\"Comment text cannot contain double-hypen: \" + val);\n      }\n      return this.assertLegalChar(val);\n    };\n\n    XMLStringifier.prototype.raw = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return '' + val || '';\n    };\n\n    XMLStringifier.prototype.attValue = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar(this.attEscape(val = '' + val || ''));\n    };\n\n    XMLStringifier.prototype.insTarget = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.insValue = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      val = '' + val || '';\n      if (val.match(/\\?>/)) {\n        throw new Error(\"Invalid processing instruction value: \" + val);\n      }\n      return this.assertLegalChar(val);\n    };\n\n    XMLStringifier.prototype.xmlVersion = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      val = '' + val || '';\n      if (!val.match(/1\\.[0-9]+/)) {\n        throw new Error(\"Invalid version number: \" + val);\n      }\n      return val;\n    };\n\n    XMLStringifier.prototype.xmlEncoding = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      val = '' + val || '';\n      if (!val.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/)) {\n        throw new Error(\"Invalid encoding: \" + val);\n      }\n      return this.assertLegalChar(val);\n    };\n\n    XMLStringifier.prototype.xmlStandalone = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      if (val) {\n        return \"yes\";\n      } else {\n        return \"no\";\n      }\n    };\n\n    XMLStringifier.prototype.dtdPubID = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.dtdSysID = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.dtdElementValue = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.dtdAttType = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.dtdAttDefault = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.dtdEntityValue = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.dtdNData = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.convertAttKey = '@';\n\n    XMLStringifier.prototype.convertPIKey = '?';\n\n    XMLStringifier.prototype.convertTextKey = '#text';\n\n    XMLStringifier.prototype.convertCDataKey = '#cdata';\n\n    XMLStringifier.prototype.convertCommentKey = '#comment';\n\n    XMLStringifier.prototype.convertRawKey = '#raw';\n\n    XMLStringifier.prototype.assertLegalChar = function(str) {\n      var regex, res;\n      if (this.options.noValidation) {\n        return str;\n      }\n      regex = '';\n      if (this.options.version === '1.0') {\n        regex = /[\\0-\\x08\\x0B\\f\\x0E-\\x1F\\uFFFE\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/;\n        if (res = str.match(regex)) {\n          throw new Error(\"Invalid character in string: \" + str + \" at index \" + res.index);\n        }\n      } else if (this.options.version === '1.1') {\n        regex = /[\\0\\uFFFE\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/;\n        if (res = str.match(regex)) {\n          throw new Error(\"Invalid character in string: \" + str + \" at index \" + res.index);\n        }\n      }\n      return str;\n    };\n\n    XMLStringifier.prototype.assertLegalName = function(str) {\n      var regex;\n      if (this.options.noValidation) {\n        return str;\n      }\n      this.assertLegalChar(str);\n      regex = /^([:A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])([\\x2D\\.0-:A-Z_a-z\\xB7\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u203F\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])*$/;\n      if (!str.match(regex)) {\n        throw new Error(\"Invalid character in name\");\n      }\n      return str;\n    };\n\n    XMLStringifier.prototype.textEscape = function(str) {\n      var ampregex;\n      if (this.options.noValidation) {\n        return str;\n      }\n      ampregex = this.options.noDoubleEncoding ? /(?!&\\S+;)&/g : /&/g;\n      return str.replace(ampregex, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\r/g, '&#xD;');\n    };\n\n    XMLStringifier.prototype.attEscape = function(str) {\n      var ampregex;\n      if (this.options.noValidation) {\n        return str;\n      }\n      ampregex = this.options.noDoubleEncoding ? /(?!&\\S+;)&/g : /&/g;\n      return str.replace(ampregex, '&amp;').replace(/</g, '&lt;').replace(/\"/g, '&quot;').replace(/\\t/g, '&#x9;').replace(/\\n/g, '&#xA;').replace(/\\r/g, '&#xD;');\n    };\n\n    return XMLStringifier;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLCharacterData, XMLText,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLCharacterData = require('./XMLCharacterData');\n\n  module.exports = XMLText = (function(superClass) {\n    extend(XMLText, superClass);\n\n    function XMLText(parent, text) {\n      XMLText.__super__.constructor.call(this, parent);\n      if (text == null) {\n        throw new Error(\"Missing element text. \" + this.debugInfo());\n      }\n      this.name = \"#text\";\n      this.type = NodeType.Text;\n      this.value = this.stringify.text(text);\n    }\n\n    Object.defineProperty(XMLText.prototype, 'isElementContentWhitespace', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    Object.defineProperty(XMLText.prototype, 'wholeText', {\n      get: function() {\n        var next, prev, str;\n        str = '';\n        prev = this.previousSibling;\n        while (prev) {\n          str = prev.data + str;\n          prev = prev.previousSibling;\n        }\n        str += this.data;\n        next = this.nextSibling;\n        while (next) {\n          str = str + next.data;\n          next = next.nextSibling;\n        }\n        return str;\n      }\n    });\n\n    XMLText.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLText.prototype.toString = function(options) {\n      return this.options.writer.text(this, this.options.writer.filterOptions(options));\n    };\n\n    XMLText.prototype.splitText = function(offset) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLText.prototype.replaceWholeText = function(content) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    return XMLText;\n\n  })(XMLCharacterData);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, WriterState, XMLCData, XMLComment, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDeclaration, XMLDocType, XMLDummy, XMLElement, XMLProcessingInstruction, XMLRaw, XMLText, XMLWriterBase, assign,\n    hasProp = {}.hasOwnProperty;\n\n  assign = require('./Utility').assign;\n\n  NodeType = require('./NodeType');\n\n  XMLDeclaration = require('./XMLDeclaration');\n\n  XMLDocType = require('./XMLDocType');\n\n  XMLCData = require('./XMLCData');\n\n  XMLComment = require('./XMLComment');\n\n  XMLElement = require('./XMLElement');\n\n  XMLRaw = require('./XMLRaw');\n\n  XMLText = require('./XMLText');\n\n  XMLProcessingInstruction = require('./XMLProcessingInstruction');\n\n  XMLDummy = require('./XMLDummy');\n\n  XMLDTDAttList = require('./XMLDTDAttList');\n\n  XMLDTDElement = require('./XMLDTDElement');\n\n  XMLDTDEntity = require('./XMLDTDEntity');\n\n  XMLDTDNotation = require('./XMLDTDNotation');\n\n  WriterState = require('./WriterState');\n\n  module.exports = XMLWriterBase = (function() {\n    function XMLWriterBase(options) {\n      var key, ref, value;\n      options || (options = {});\n      this.options = options;\n      ref = options.writer || {};\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this[\"_\" + key] = this[key];\n        this[key] = value;\n      }\n    }\n\n    XMLWriterBase.prototype.filterOptions = function(options) {\n      var filteredOptions, ref, ref1, ref2, ref3, ref4, ref5, ref6;\n      options || (options = {});\n      options = assign({}, this.options, options);\n      filteredOptions = {\n        writer: this\n      };\n      filteredOptions.pretty = options.pretty || false;\n      filteredOptions.allowEmpty = options.allowEmpty || false;\n      filteredOptions.indent = (ref = options.indent) != null ? ref : '  ';\n      filteredOptions.newline = (ref1 = options.newline) != null ? ref1 : '\\n';\n      filteredOptions.offset = (ref2 = options.offset) != null ? ref2 : 0;\n      filteredOptions.dontPrettyTextNodes = (ref3 = (ref4 = options.dontPrettyTextNodes) != null ? ref4 : options.dontprettytextnodes) != null ? ref3 : 0;\n      filteredOptions.spaceBeforeSlash = (ref5 = (ref6 = options.spaceBeforeSlash) != null ? ref6 : options.spacebeforeslash) != null ? ref5 : '';\n      if (filteredOptions.spaceBeforeSlash === true) {\n        filteredOptions.spaceBeforeSlash = ' ';\n      }\n      filteredOptions.suppressPrettyCount = 0;\n      filteredOptions.user = {};\n      filteredOptions.state = WriterState.None;\n      return filteredOptions;\n    };\n\n    XMLWriterBase.prototype.indent = function(node, options, level) {\n      var indentLevel;\n      if (!options.pretty || options.suppressPrettyCount) {\n        return '';\n      } else if (options.pretty) {\n        indentLevel = (level || 0) + options.offset + 1;\n        if (indentLevel > 0) {\n          return new Array(indentLevel).join(options.indent);\n        }\n      }\n      return '';\n    };\n\n    XMLWriterBase.prototype.endline = function(node, options, level) {\n      if (!options.pretty || options.suppressPrettyCount) {\n        return '';\n      } else {\n        return options.newline;\n      }\n    };\n\n    XMLWriterBase.prototype.attribute = function(att, options, level) {\n      var r;\n      this.openAttribute(att, options, level);\n      r = ' ' + att.name + '=\"' + att.value + '\"';\n      this.closeAttribute(att, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.cdata = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<![CDATA[';\n      options.state = WriterState.InsideTag;\n      r += node.value;\n      options.state = WriterState.CloseTag;\n      r += ']]>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.comment = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!-- ';\n      options.state = WriterState.InsideTag;\n      r += node.value;\n      options.state = WriterState.CloseTag;\n      r += ' -->' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.declaration = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<?xml';\n      options.state = WriterState.InsideTag;\n      r += ' version=\"' + node.version + '\"';\n      if (node.encoding != null) {\n        r += ' encoding=\"' + node.encoding + '\"';\n      }\n      if (node.standalone != null) {\n        r += ' standalone=\"' + node.standalone + '\"';\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '?>';\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.docType = function(node, options, level) {\n      var child, i, len, r, ref;\n      level || (level = 0);\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level);\n      r += '<!DOCTYPE ' + node.root().name;\n      if (node.pubID && node.sysID) {\n        r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n      } else if (node.sysID) {\n        r += ' SYSTEM \"' + node.sysID + '\"';\n      }\n      if (node.children.length > 0) {\n        r += ' [';\n        r += this.endline(node, options, level);\n        options.state = WriterState.InsideTag;\n        ref = node.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          r += this.writeChildNode(child, options, level + 1);\n        }\n        options.state = WriterState.CloseTag;\n        r += ']';\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>';\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.element = function(node, options, level) {\n      var att, child, childNodeCount, firstChildNode, i, j, len, len1, name, prettySuppressed, r, ref, ref1, ref2;\n      level || (level = 0);\n      prettySuppressed = false;\n      r = '';\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r += this.indent(node, options, level) + '<' + node.name;\n      ref = node.attribs;\n      for (name in ref) {\n        if (!hasProp.call(ref, name)) continue;\n        att = ref[name];\n        r += this.attribute(att, options, level);\n      }\n      childNodeCount = node.children.length;\n      firstChildNode = childNodeCount === 0 ? null : node.children[0];\n      if (childNodeCount === 0 || node.children.every(function(e) {\n        return (e.type === NodeType.Text || e.type === NodeType.Raw) && e.value === '';\n      })) {\n        if (options.allowEmpty) {\n          r += '>';\n          options.state = WriterState.CloseTag;\n          r += '</' + node.name + '>' + this.endline(node, options, level);\n        } else {\n          options.state = WriterState.CloseTag;\n          r += options.spaceBeforeSlash + '/>' + this.endline(node, options, level);\n        }\n      } else if (options.pretty && childNodeCount === 1 && (firstChildNode.type === NodeType.Text || firstChildNode.type === NodeType.Raw) && (firstChildNode.value != null)) {\n        r += '>';\n        options.state = WriterState.InsideTag;\n        options.suppressPrettyCount++;\n        prettySuppressed = true;\n        r += this.writeChildNode(firstChildNode, options, level + 1);\n        options.suppressPrettyCount--;\n        prettySuppressed = false;\n        options.state = WriterState.CloseTag;\n        r += '</' + node.name + '>' + this.endline(node, options, level);\n      } else {\n        if (options.dontPrettyTextNodes) {\n          ref1 = node.children;\n          for (i = 0, len = ref1.length; i < len; i++) {\n            child = ref1[i];\n            if ((child.type === NodeType.Text || child.type === NodeType.Raw) && (child.value != null)) {\n              options.suppressPrettyCount++;\n              prettySuppressed = true;\n              break;\n            }\n          }\n        }\n        r += '>' + this.endline(node, options, level);\n        options.state = WriterState.InsideTag;\n        ref2 = node.children;\n        for (j = 0, len1 = ref2.length; j < len1; j++) {\n          child = ref2[j];\n          r += this.writeChildNode(child, options, level + 1);\n        }\n        options.state = WriterState.CloseTag;\n        r += this.indent(node, options, level) + '</' + node.name + '>';\n        if (prettySuppressed) {\n          options.suppressPrettyCount--;\n        }\n        r += this.endline(node, options, level);\n        options.state = WriterState.None;\n      }\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.writeChildNode = function(node, options, level) {\n      switch (node.type) {\n        case NodeType.CData:\n          return this.cdata(node, options, level);\n        case NodeType.Comment:\n          return this.comment(node, options, level);\n        case NodeType.Element:\n          return this.element(node, options, level);\n        case NodeType.Raw:\n          return this.raw(node, options, level);\n        case NodeType.Text:\n          return this.text(node, options, level);\n        case NodeType.ProcessingInstruction:\n          return this.processingInstruction(node, options, level);\n        case NodeType.Dummy:\n          return '';\n        case NodeType.Declaration:\n          return this.declaration(node, options, level);\n        case NodeType.DocType:\n          return this.docType(node, options, level);\n        case NodeType.AttributeDeclaration:\n          return this.dtdAttList(node, options, level);\n        case NodeType.ElementDeclaration:\n          return this.dtdElement(node, options, level);\n        case NodeType.EntityDeclaration:\n          return this.dtdEntity(node, options, level);\n        case NodeType.NotationDeclaration:\n          return this.dtdNotation(node, options, level);\n        default:\n          throw new Error(\"Unknown XML node type: \" + node.constructor.name);\n      }\n    };\n\n    XMLWriterBase.prototype.processingInstruction = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<?';\n      options.state = WriterState.InsideTag;\n      r += node.target;\n      if (node.value) {\n        r += ' ' + node.value;\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '?>';\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.raw = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level);\n      options.state = WriterState.InsideTag;\n      r += node.value;\n      options.state = WriterState.CloseTag;\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.text = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level);\n      options.state = WriterState.InsideTag;\n      r += node.value;\n      options.state = WriterState.CloseTag;\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.dtdAttList = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!ATTLIST';\n      options.state = WriterState.InsideTag;\n      r += ' ' + node.elementName + ' ' + node.attributeName + ' ' + node.attributeType;\n      if (node.defaultValueType !== '#DEFAULT') {\n        r += ' ' + node.defaultValueType;\n      }\n      if (node.defaultValue) {\n        r += ' \"' + node.defaultValue + '\"';\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.dtdElement = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!ELEMENT';\n      options.state = WriterState.InsideTag;\n      r += ' ' + node.name + ' ' + node.value;\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.dtdEntity = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!ENTITY';\n      options.state = WriterState.InsideTag;\n      if (node.pe) {\n        r += ' %';\n      }\n      r += ' ' + node.name;\n      if (node.value) {\n        r += ' \"' + node.value + '\"';\n      } else {\n        if (node.pubID && node.sysID) {\n          r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n        } else if (node.sysID) {\n          r += ' SYSTEM \"' + node.sysID + '\"';\n        }\n        if (node.nData) {\n          r += ' NDATA ' + node.nData;\n        }\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.dtdNotation = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!NOTATION';\n      options.state = WriterState.InsideTag;\n      r += ' ' + node.name;\n      if (node.pubID && node.sysID) {\n        r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n      } else if (node.pubID) {\n        r += ' PUBLIC \"' + node.pubID + '\"';\n      } else if (node.sysID) {\n        r += ' SYSTEM \"' + node.sysID + '\"';\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.openNode = function(node, options, level) {};\n\n    XMLWriterBase.prototype.closeNode = function(node, options, level) {};\n\n    XMLWriterBase.prototype.openAttribute = function(att, options, level) {};\n\n    XMLWriterBase.prototype.closeAttribute = function(att, options, level) {};\n\n    return XMLWriterBase;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, WriterState, XMLDOMImplementation, XMLDocument, XMLDocumentCB, XMLStreamWriter, XMLStringWriter, assign, isFunction, ref;\n\n  ref = require('./Utility'), assign = ref.assign, isFunction = ref.isFunction;\n\n  XMLDOMImplementation = require('./XMLDOMImplementation');\n\n  XMLDocument = require('./XMLDocument');\n\n  XMLDocumentCB = require('./XMLDocumentCB');\n\n  XMLStringWriter = require('./XMLStringWriter');\n\n  XMLStreamWriter = require('./XMLStreamWriter');\n\n  NodeType = require('./NodeType');\n\n  WriterState = require('./WriterState');\n\n  module.exports.create = function(name, xmldec, doctype, options) {\n    var doc, root;\n    if (name == null) {\n      throw new Error(\"Root element needs a name.\");\n    }\n    options = assign({}, xmldec, doctype, options);\n    doc = new XMLDocument(options);\n    root = doc.element(name);\n    if (!options.headless) {\n      doc.declaration(options);\n      if ((options.pubID != null) || (options.sysID != null)) {\n        doc.dtd(options);\n      }\n    }\n    return root;\n  };\n\n  module.exports.begin = function(options, onData, onEnd) {\n    var ref1;\n    if (isFunction(options)) {\n      ref1 = [options, onData], onData = ref1[0], onEnd = ref1[1];\n      options = {};\n    }\n    if (onData) {\n      return new XMLDocumentCB(options, onData, onEnd);\n    } else {\n      return new XMLDocument(options);\n    }\n  };\n\n  module.exports.stringWriter = function(options) {\n    return new XMLStringWriter(options);\n  };\n\n  module.exports.streamWriter = function(stream, options) {\n    return new XMLStreamWriter(stream, options);\n  };\n\n  module.exports.implementation = new XMLDOMImplementation();\n\n  module.exports.nodeType = NodeType;\n\n  module.exports.writerState = WriterState;\n\n}).call(this);\n","import {DamageAndSoakPerActor, DamageApplicationDialog} from \"../apps/dialogs/DamageApplicationDialog\";\r\nimport { SR5 } from \"../config\";\r\nimport {SR5Actor} from \"./SR5Actor\";\r\nimport DamageData = Shadowrun.DamageData;\r\nimport CharacterActorData = Shadowrun.CharacterActorData;\r\n\r\nexport class DamageApplicationFlow {\r\n\r\n    /**\r\n     * Runs the flow to apply damage to multiple actors with user interaction\r\n     * This will also take care of changing the damage type if necessary\r\n     * @param actors The actors that are affected\r\n     * @param damage The damage the actors will receive\r\n     */\r\n    async runApplyDamage(actors: SR5Actor[], damage : DamageData) {\r\n \r\n        console.log(\"Run apply damage\");\r\n        const actorDamage : DamageAndSoakPerActor[] = \r\n            actors.map(actor => this.getDamageAndSoakForActor(actor, damage));\r\n\r\n        // Show user the affected actors and the damage values\r\n        const damageApplicationDialog = await new DamageApplicationDialog(actorDamage, damage);\r\n        await damageApplicationDialog.select();\r\n\r\n        if (damageApplicationDialog.canceled) {\r\n            return;\r\n        }\r\n\r\n        if (damageApplicationDialog.selectedButton === 'damage') {\r\n            actorDamage.forEach(({actor, modified }) => {\r\n                this.applyDamageToActor(actor, modified);\r\n            });\r\n        }\r\n        else if (damageApplicationDialog.selectedButton === 'unmodifiedDamage') {\r\n            actorDamage.forEach(({actor}) => {\r\n                this.applyDamageToActor(actor, damage);\r\n            });\r\n        }\r\n\r\n        else {\r\n            console.error('Expected a dialog selection, but none known selection was made');\r\n        }\r\n    }\r\n\r\n    /** Apply all types of damage to the actor.\r\n     *\r\n     * @param damage The damage to apply. Stun damage will be turned to physical for grunts.\r\n     */\r\n    async applyDamageToActor(actor : SR5Actor, damage: DamageData) {\r\n        if (damage.value <= 0) {\r\n            return;\r\n        }\r\n\r\n        // We change the damage type for grunts at the (they do not have stun) to avoid confusing the user in the dialog\r\n        damage = this.applyDamageTypeChangeForGrunt(actor, damage);\r\n\r\n        // Apply damage and resulting overflow to the according track.\r\n        // The amount and type damage can value in the process.\r\n        if (damage.type.value === 'matrix') {\r\n            damage = await actor.addMatrixDamage(damage);\r\n        }\r\n\r\n        if (damage.type.value === 'stun') {\r\n            damage = await actor.addStunDamage(damage);\r\n        }\r\n\r\n        if (damage.type.value === 'physical') {\r\n            await actor.addPhysicalDamage(damage);\r\n        }\r\n\r\n        // NOTE: For stuff like healing the last wound by magic, it might also be interesting to store and give\r\n        //       an overview of each damage/wound applied to select from.\r\n        // await this.update({'data.track': this.data.data.track});\r\n        // TODO: Handle changes in actor status (death and such)\r\n    }\r\n\r\n\r\n\r\n    private getDamageAndSoakForActor(actor : SR5Actor, damage : DamageData) : DamageAndSoakPerActor {\r\n        const actorData = actor.data.data as CharacterActorData;\r\n        const perception = actorData.initiative.perception;\r\n        const initCategory  = SR5.initiativeCategories[perception];\r\n        let hotsim = false;\r\n\r\n        // Not all characters have an equipped comlink / deck / rcc\r\n        if (actorData.matrix) {\r\n            hotsim = actorData.matrix.hot_sim;\r\n        }\r\n\r\n        return {\r\n            actor,\r\n            modified: damage,\r\n            armor: actor.getModifiedArmor(damage),\r\n            perception: initCategory,\r\n            hotsim: hotsim,\r\n        }\r\n    }\r\n\r\n    private applyDamageTypeChangeForGrunt(actor : SR5Actor, damage: DamageData): DamageData {\r\n        const updatedDamage = duplicate(damage);\r\n        if (!actor.isGrunt()) {\r\n            return updatedDamage;\r\n        }\r\n\r\n        // Grunts do not have a stun track and will always receive physical damage.\r\n        if (damage.type.value === 'stun') {\r\n            updatedDamage.type.value = 'physical';\r\n        }\r\n\r\n        return updatedDamage;\r\n    }\r\n}","import {ShadowrunRoll, ShadowrunRoller} from '../rolls/ShadowrunRoller';\r\nimport {Helpers} from '../helpers';\r\nimport {SR5Item} from '../item/SR5Item';\r\nimport {FLAGS, SKILL_DEFAULT_NAME, SR, SYSTEM_NAME} from '../constants';\r\nimport {PartsList} from '../parts/PartsList';\r\nimport {ActorPrepFactory} from './prep/ActorPrepFactory';\r\nimport {ShadowrunActorDialogs} from \"../apps/dialogs/ShadowrunActorDialogs\";\r\nimport {createRollChatMessage} from \"../chat\";\r\nimport {SR5Combat} from \"../combat/SR5Combat\";\r\nimport {Modifiers} from \"../sr5/Modifiers\";\r\nimport {SoakFlow} from './SoakFlow';\r\nimport {DefaultValues} from '../dataTemplates';\r\nimport {SkillFlow} from \"./SkillFlow\";\r\nimport ActorRollOptions = Shadowrun.ActorRollOptions;\r\nimport DefenseRollOptions = Shadowrun.DefenseRollOptions;\r\nimport SoakRollOptions = Shadowrun.SoakRollOptions;\r\nimport AttributeField = Shadowrun.AttributeField;\r\nimport SkillRollOptions = Shadowrun.SkillRollOptions;\r\nimport SkillField = Shadowrun.SkillField;\r\nimport ModList = Shadowrun.ModList;\r\nimport LimitField = Shadowrun.LimitField;\r\nimport SR5ActorType = Shadowrun.SR5ActorType;\r\nimport EdgeAttributeField = Shadowrun.EdgeAttributeField;\r\nimport VehicleActorData = Shadowrun.VehicleActorData;\r\nimport VehicleStat = Shadowrun.VehicleStat;\r\nimport Attributes = Shadowrun.Attributes;\r\nimport Limits = Shadowrun.Limits;\r\nimport DamageData = Shadowrun.DamageData;\r\nimport TrackType = Shadowrun.TrackType;\r\nimport OverflowTrackType = Shadowrun.OverflowTrackType;\r\nimport SpellDefenseOptions = Shadowrun.SpellDefenseOptions;\r\nimport NumberOrEmpty = Shadowrun.NumberOrEmpty;\r\nimport CharacterActorData = Shadowrun.CharacterActorData;\r\nimport SR5VehicleType = Shadowrun.SR5VehicleType;\r\nimport VehicleStats = Shadowrun.VehicleStats;\r\nimport SR5CharacterType = Shadowrun.SR5CharacterType;\r\nimport ActorArmorData = Shadowrun.ActorArmorData;\r\nimport ConditionData = Shadowrun.ConditionData;\r\nimport SR5SpiritType = Shadowrun.SR5SpiritType;\r\nimport SR5SpriteType = Shadowrun.SR5SpriteType;\r\nimport SR5CritterType = Shadowrun.SR5CritterType;\r\nimport SR5ActorData = Shadowrun.SR5ActorData;\r\nimport Skills = Shadowrun.Skills;\r\nimport {SkillRules} from \"./SkillRules\";\r\nimport { SoakRules } from './SoakRules';\r\n\r\nexport class SR5Actor extends Actor<SR5ActorData> {\r\n    // NOTE: Overwrite Actor.data additionally to extends Actor<T as SR5Actortype.Data: SR5ActorData> to still have\r\n    //       access to Actor.data.type checks.\r\n    data: SR5ActorType;\r\n\r\n    getOverwatchScore() {\r\n        const os = this.getFlag(SYSTEM_NAME, 'overwatchScore');\r\n        return os !== undefined ? os : 0;\r\n    }\r\n\r\n    async setOverwatchScore(value) {\r\n        const num = parseInt(value);\r\n        if (!isNaN(num)) {\r\n            return this.setFlag(SYSTEM_NAME, 'overwatchScore', num);\r\n        }\r\n    }\r\n\r\n    prepareData() {\r\n        super.prepareData();\r\n\r\n        const actorData = this.data as SR5ActorType;\r\n        const prepper = ActorPrepFactory.Create(actorData);\r\n        if (prepper) {\r\n            prepper.prepare();\r\n        }\r\n    }\r\n\r\n    getModifier(modifierName: string): NumberOrEmpty {\r\n        return this.data.data.modifiers[modifierName];\r\n    }\r\n\r\n    findActiveSkill(skillName?: string): SkillField | undefined {\r\n        if (skillName === undefined) return undefined;\r\n        // Search for legacy skills with their name as id.\r\n        const skill = this.data.data.skills.active[skillName];\r\n        if (skill) return skill;\r\n        // Search for custom skills with a random id.\r\n        return Object.values(this.data.data.skills.active).find(skill => skill.name === skillName);\r\n    }\r\n\r\n    findAttribute(attributeName?: string): AttributeField | undefined {\r\n        if (attributeName === undefined) return undefined;\r\n        return this.data.data.attributes[attributeName];\r\n    }\r\n\r\n    findVehicleStat(statName?: string): VehicleStat | undefined {\r\n        if (statName === undefined) return;\r\n\r\n        const vehicleStats = this.getVehicleStats();\r\n        if (vehicleStats)\r\n            return vehicleStats[statName];\r\n    }\r\n\r\n    findLimitFromAttribute(attributeName?: string): LimitField | undefined {\r\n        if (attributeName === undefined) return undefined;\r\n        const attribute = this.findAttribute(attributeName);\r\n        if (!attribute?.limit) return undefined;\r\n        return this.findLimit(attribute.limit);\r\n    }\r\n\r\n    findLimit(limitName?: string): LimitField | undefined {\r\n        if (!limitName) return undefined;\r\n        return this.data.data.limits[limitName];\r\n    }\r\n\r\n    getWoundModifier(): number {\r\n        if (!(\"wounds\" in this.data.data)) return 0;\r\n        return -1 * this.data.data.wounds.value || 0;\r\n    }\r\n\r\n    /** Use edge on actors that have an edge attribute.\r\n     *\r\n     * NOTE: This doesn't only include characters but spirits, critters and more.\r\n     */\r\n    async useEdge(by: number = -1) {\r\n        const edge = this.getEdge();\r\n        if (edge && edge.value === 0) return;\r\n        // NOTE: There used to be a bug which could lower edge usage below zero. Let's quietly ignore and reset. :)\r\n        const usesLeft = edge.uses > 0 ? edge.uses : 0;\r\n        const uses = Math.min(edge.value, usesLeft + by);\r\n\r\n        await this.update({'data.attributes.edge.uses': uses});\r\n    }\r\n\r\n    getEdge(): EdgeAttributeField {\r\n        return this.data.data.attributes.edge;\r\n    }\r\n\r\n    hasArmor(): boolean {\r\n        return \"armor\" in this.data.data;\r\n    }\r\n\r\n    getArmor(): ActorArmorData {\r\n        if (\"armor\" in this.data.data)\r\n            return this.data.data.armor;\r\n\r\n        return DefaultValues.actorArmorData();\r\n    }\r\n\r\n    getOwnedSR5Item(itemId: string): SR5Item | null {\r\n        return (super.getOwnedItem(itemId) as unknown) as SR5Item;\r\n    }\r\n\r\n    getMatrixDevice(): SR5Item | undefined | null {\r\n        if (!(\"matrix\" in this.data.data)) return;\r\n        const matrix = this.data.data.matrix;\r\n        if (matrix.device) return this.getOwnedSR5Item(matrix.device);\r\n    }\r\n\r\n    getFullDefenseAttribute(): AttributeField | undefined {\r\n        if (this.isVehicle()) {\r\n            return this.findVehicleStat('pilot');\r\n        } else if (this.isCharacter()) {\r\n            const character = this.asCharacterData();\r\n            if (character) {\r\n                let att = character.data.full_defense_attribute;\r\n                if (!att) att = 'willpower';\r\n                return this.findAttribute(att);\r\n            }\r\n        }\r\n    }\r\n\r\n    getEquippedWeapons(): SR5Item[] {\r\n        // @ts-ignore // TODO: How to define SR5Actor.items as SR5Item[]?\r\n        return this.items.filter((item: SR5Item) => item.isEquipped() && item.isWeapon());\r\n    }\r\n\r\n    getRecoilCompensation(): number {\r\n        let total = 1; // always get 1\r\n        const strength = this.findAttribute('strength');\r\n        if (strength) {\r\n            total += Math.ceil(strength.value / 3);\r\n        }\r\n        return total;\r\n    }\r\n\r\n    getDeviceRating(): number {\r\n        if (!(\"matrix\" in this.data.data)) return 0;\r\n        // @ts-ignore // parseInt does indeed allow number types.\r\n        return parseInt(this.data.data.matrix.rating);\r\n    }\r\n\r\n    getAttributes(): Attributes {\r\n        return this.data.data.attributes;\r\n    }\r\n\r\n    getAttribute(name: string): AttributeField {\r\n        const attributes = this.getAttributes();\r\n        return attributes[name];\r\n    }\r\n\r\n    getLimits(): Limits {\r\n        return this.data.data.limits;\r\n    }\r\n\r\n    getLimit(name: string): LimitField {\r\n        const limits = this.getLimits();\r\n        return limits[name];\r\n    }\r\n\r\n    /** Return actor type, which can be different kind of actors from 'character' to 'vehicle'.\r\n     *  Please check SR5ActorType for reference.\r\n     */\r\n    getType(): string {\r\n        return this.data.type;\r\n    }\r\n\r\n    isCharacter(): boolean {\r\n        return this.getType() === 'character';\r\n    }\r\n\r\n    isSpirit(): boolean {\r\n        return this.getType() === 'spirit';\r\n    }\r\n\r\n    isSprite(): boolean {\r\n        return this.getType() === 'sprite';\r\n    }\r\n\r\n    isVehicle() {\r\n        return this.getType() === 'vehicle';\r\n    }\r\n\r\n    isGrunt() {\r\n        if (!(\"is_npc\" in this.data.data) || !(\"npc\" in this.data.data)) return false;\r\n\r\n        return this.data.data.is_npc && this.data.data.npc.is_grunt;\r\n    }\r\n\r\n    isCritter() {\r\n        return this.getType() === 'critter';\r\n    }\r\n\r\n    getVehicleTypeSkillName(): string | undefined {\r\n        if (!(\"vehicleType\" in this.data.data)) return;\r\n\r\n        switch (this.data.data.vehicleType) {\r\n            case 'air':\r\n                return 'pilot_aircraft';\r\n            case 'ground':\r\n                return 'pilot_ground_craft';\r\n            case 'water':\r\n                return 'pilot_water_craft';\r\n            case 'aerospace':\r\n                return 'pilot_aerospace';\r\n            case 'walker':\r\n                return 'pilot_walker';\r\n            case 'exotic':\r\n                return'pilot_exotic_vehicle';\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n\r\n    getVehicleTypeSkill(): SkillField | undefined {\r\n        if (this.isVehicle()) return;\r\n\r\n        const name = this.getVehicleTypeSkillName();\r\n        return this.findActiveSkill(name);\r\n    }\r\n\r\n    getActiveSkills(): Skills {\r\n        return this.data.data.skills.active;\r\n    }\r\n\r\n    /**\r\n     * Return the full pool of a skill including attribute and possible specialization bonus.\r\n     * @param skillId The ID of the skill. Note that this can differ from what is shown in the skill list. If you're\r\n     *                unsure about the id and want to search\r\n     * @param options An object to change the behaviour.\r\n     *                The property specialization will trigger the pool value to be raised by a specialization modifier\r\n     *                The property byLbale will cause the param skillId to be interpreted as the shown i18n label.\r\n     */\r\n    getPool(skillId: string, options= {specialization: false, byLabel: false}): number {\r\n        const skill = options.byLabel ? this.getSkillByLabel(skillId) : this.getSkill(skillId);\r\n        if (!skill || !skill.attribute) return 0;\r\n        if (!SkillFlow.allowRoll(skill)) return 0;\r\n\r\n        const attribute = this.getAttribute(skill.attribute);\r\n\r\n        if (SkillRules.mustDefaultToRoll(skill) && SkillRules.allowDefaultingRoll(skill)) {\r\n            return SkillRules.getDefaultingModifier() + attribute.value;\r\n        }\r\n\r\n        const specializationBonus = options.specialization ? SR.skill.SPECIALIZATION_MODIFIER : 0;\r\n        return skill.value + attribute.value + specializationBonus;\r\n    }\r\n\r\n    getSkill(skillId: string, options= {byLabel: false}): SkillField | undefined {\r\n        if (options.byLabel)\r\n            return this.getSkillByLabel(skillId);\r\n\r\n        const { skills } = this.data.data;\r\n        if (skills.active.hasOwnProperty(skillId)) {\r\n            return skills.active[skillId];\r\n        }\r\n        if (skills.language.value.hasOwnProperty(skillId)) {\r\n            return skills.language.value[skillId];\r\n        }\r\n        // Knowledge skills are de-normalized into categories (street, hobby, ...)\r\n        for (const categoryKey in skills.knowledge) {\r\n            if (skills.knowledge.hasOwnProperty(categoryKey)) {\r\n                const category = skills.knowledge[categoryKey];\r\n                if (category.value.hasOwnProperty(skillId)) {\r\n                    return category.value[skillId];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Search all skills for a matching i18n translation label.\r\n     * NOTE: You should use getSkill if you have the skillId ready. Only use this for ease of use!\r\n     *\r\n     * @param searchedFor The translated output of either the skill label (after localize) or name of the skill in question.\r\n     * @return The first skill found with a matching translation or name.\r\n     */\r\n    getSkillByLabel(searchedFor: string): SkillField|undefined {\r\n        if (!searchedFor) return;\r\n\r\n        const possibleMatch = (skill: SkillField): string =>  skill.label ? game.i18n.localize(skill.label) : skill.name;\r\n\r\n        const {skills} = this.data.data;\r\n\r\n        for (const skill of Object.values(skills.active)) {\r\n            if (searchedFor === possibleMatch(skill))\r\n                return skill;\r\n        }\r\n\r\n        for (const skill of Object.values(skills.language.value)) {\r\n            if (searchedFor === possibleMatch(skill))\r\n                return skill;\r\n        }\r\n\r\n        // Iterate over all different knowledge skill categories\r\n        for (const categoryKey in skills.knowledge) {\r\n            if (!skills.knowledge.hasOwnProperty(categoryKey)) continue;\r\n            // Typescript can't follow the flow here...\r\n            const categorySkills = skills.knowledge[categoryKey].value as SkillField[];\r\n            for (const skill of Object.values(categorySkills) ) {\r\n                if (searchedFor === possibleMatch(skill))\r\n                    return skill;\r\n            }\r\n        }\r\n    }\r\n\r\n    getSkillLabel(skillId: string): string {\r\n        const skill = this.getSkill(skillId);\r\n        if (!skill) {\r\n            return '';\r\n        }\r\n\r\n        return skill.label ? skill.label : skill.name ? skill.name : '';\r\n    }\r\n\r\n    async addKnowledgeSkill(category, skill?): Promise<string> {\r\n        const defaultSkill = {\r\n            name: '',\r\n            specs: [],\r\n            base: 0,\r\n            value: 0,\r\n            mod: 0,\r\n        };\r\n        skill = {\r\n            ...defaultSkill,\r\n            ...skill,\r\n        };\r\n\r\n        const id = randomID(16);\r\n        const value = {};\r\n        value[id] = skill;\r\n        const fieldName = `data.skills.knowledge.${category}.value`;\r\n        const updateData = {};\r\n        updateData[fieldName] = value;\r\n\r\n        await this.update(updateData);\r\n\r\n        return id;\r\n    }\r\n\r\n    async addActiveSkill(skillData: Partial<SkillField> = {name: SKILL_DEFAULT_NAME}): Promise<string | undefined> {\r\n        const skill = DefaultValues.skillData(skillData);\r\n\r\n        const activeSkillsPath = 'data.skills.active';\r\n        const updateSkillDataResult = Helpers.getRandomIdSkillFieldDataEntry(activeSkillsPath, skill);\r\n\r\n        if (!updateSkillDataResult) return;\r\n\r\n        const {updateSkillData, id} = updateSkillDataResult;\r\n\r\n        await this.update(updateSkillData as object);\r\n\r\n        return id;\r\n    }\r\n\r\n    async removeLanguageSkill(skillId) {\r\n        const updateData = Helpers.getDeleteDataEntry('data.skills.language.value', skillId);\r\n        await this.update(updateData);\r\n    }\r\n\r\n    async addLanguageSkill(skill): Promise<string> {\r\n        const defaultSkill = {\r\n            name: '',\r\n            specs: [],\r\n            base: 0,\r\n            value: 0,\r\n            // TODO: BUG ModifiableValue is ModList<number>[] and not number\r\n            mod: 0,\r\n        };\r\n        skill = {\r\n            ...defaultSkill,\r\n            ...skill,\r\n        };\r\n\r\n        const id = randomID(16);\r\n        const value = {};\r\n        value[id] = skill;\r\n        const fieldName = `data.skills.language.value`;\r\n        const updateData = {};\r\n        updateData[fieldName] = value;\r\n\r\n        await this.update(updateData);\r\n\r\n        return id;\r\n    }\r\n\r\n    async removeKnowledgeSkill(skillId, category) {\r\n        const updateData = Helpers.getDeleteDataEntry(`data.skills.knowledge.${category}.value`, skillId);\r\n        await this.update(updateData);\r\n    }\r\n\r\n    /** Delete the given active skill by it's id. It doesn't\r\n     *\r\n     * @param skillId Either a random id for custom skills or the skills name used as an id.\r\n     */\r\n    async removeActiveSkill(skillId: string) {\r\n        const activeSkills = this.getActiveSkills();\r\n        if (!activeSkills.hasOwnProperty(skillId)) return;\r\n\r\n        const updateData = Helpers.getDeleteDataEntry('data.skills.active', skillId);\r\n        await this.update(updateData);\r\n    }\r\n\r\n    async rollFade(options: ActorRollOptions = {}, incoming = -1): Promise<ShadowrunRoll|undefined> {\r\n        const wil = duplicate(this.data.data.attributes.willpower);\r\n        const res = duplicate(this.data.data.attributes.resonance);\r\n        const data = this.data.data;\r\n\r\n        const parts = new PartsList<number>();\r\n        parts.addUniquePart(wil.label, wil.value);\r\n        parts.addUniquePart(res.label, res.value);\r\n        if (data.modifiers.fade) parts.addUniquePart('SR5.Bonus', data.modifiers.fade);\r\n\r\n        let title = `${game.i18n.localize('SR5.Resist')} ${game.i18n.localize('SR5.Fade')}`;\r\n\r\n        const actor = this;\r\n        const roll = await ShadowrunRoller.advancedRoll({\r\n            parts: parts.list,\r\n            actor,\r\n            title: title,\r\n            wounds: false,\r\n            hideRollMessage: true\r\n        });\r\n\r\n        if (!roll) return;\r\n\r\n        // Reduce damage by soak roll and inform user.\r\n        const incomingDamage = Helpers.createDamageData(incoming, 'stun');\r\n        const damage = Helpers.reduceDamageByHits(incomingDamage, roll.hits, 'SR5.Fade');\r\n\r\n        await createRollChatMessage({title, roll, actor, damage});\r\n\r\n        return roll;\r\n    }\r\n\r\n    async rollDrain(options: ActorRollOptions = {}, incoming = -1): Promise<ShadowrunRoll|undefined> {\r\n        if (!this.isCharacter()) return;\r\n\r\n        const data = this.data.data as CharacterActorData;\r\n\r\n        const wil = duplicate(data.attributes.willpower);\r\n        const drainAtt = duplicate(data.attributes[data.magic.attribute]);\r\n\r\n        const parts = new PartsList<number>();\r\n        parts.addPart(wil.label, wil.value);\r\n        parts.addPart(drainAtt.label, drainAtt.value);\r\n        if (data.modifiers.drain) parts.addUniquePart('SR5.Bonus', data.modifiers.drain);\r\n\r\n        let title = `${game.i18n.localize('SR5.Resist')} ${game.i18n.localize('SR5.Drain')}`;\r\n        const actor = this;\r\n        const roll = await ShadowrunRoller.advancedRoll({\r\n            parts: parts.list,\r\n            title,\r\n            actor,\r\n            wounds: false,\r\n            hideRollMessage: true\r\n        });\r\n\r\n        if (!roll) return;\r\n\r\n        // Reduce damage by soak roll and inform user.\r\n        const incomingDamage = Helpers.createDamageData(incoming, 'stun');\r\n        const damage = Helpers.reduceDamageByHits(incomingDamage, roll.hits, 'SR5.Drain');\r\n\r\n        await createRollChatMessage({title, roll, actor, damage});\r\n\r\n        return roll;\r\n    }\r\n\r\n    rollArmor(options: ActorRollOptions = {}, partsProps: ModList<number> = []) {\r\n        const parts = new PartsList(partsProps);\r\n        this._addArmorParts(parts);\r\n        return ShadowrunRoller.advancedRoll({\r\n            event: options.event,\r\n            actor: this,\r\n            parts: parts.list,\r\n            title: game.i18n.localize('SR5.Armor'),\r\n            wounds: false,\r\n        });\r\n    }\r\n\r\n    /** A attack defense is anything against visible attacks (ranged weapons, melee weapons, indirect spell attacks, ...)\r\n     */\r\n    async rollAttackDefense(options: DefenseRollOptions = {}, partsProps: ModList<number> = []): Promise<ShadowrunRoll | undefined> {\r\n        const {attack} = options;\r\n\r\n        const defenseDialog = await ShadowrunActorDialogs.createDefenseDialog(this, options, partsProps);\r\n        const defenseActionData = await defenseDialog.select();\r\n\r\n        if (defenseDialog.canceled) return;\r\n\r\n        const roll = await ShadowrunRoller.advancedRoll({\r\n            event: options.event,\r\n            actor: this,\r\n            parts: defenseActionData.parts.list,\r\n            title: game.i18n.localize('SR5.DefenseTest'),\r\n            incomingAttack: attack,\r\n            combat: defenseActionData.combat\r\n        });\r\n\r\n        if (!roll) return;\r\n\r\n        // Reduce initiative after a successful roll, but before attack handling, to allow for the standalone sheet\r\n        // defense action to still reduce the initiative.\r\n        if (defenseActionData.combat.initiative) {\r\n            await this.changeCombatInitiative(defenseActionData.combat.initiative);\r\n        }\r\n\r\n        if (!attack) return;\r\n\r\n        // Collect defense information.\r\n        let defenderHits = roll.total;\r\n        let attackerHits = attack.hits || 0;\r\n        let netHits = Math.max(attackerHits - defenderHits, 0);\r\n\r\n        // Reduce damage flow.\r\n        let damage = attack.damage;\r\n\r\n        // modified damage value by netHits.\r\n        if (netHits > 0) {\r\n            const {modified} = Helpers.modifyDamageByHits(damage, netHits, \"SR5.NetHits\");\r\n            damage = modified;\r\n        }\r\n\r\n        const soakRollOptions = {\r\n            event: options.event,\r\n            damage,\r\n        };\r\n\r\n        await this.rollSoak(soakRollOptions);\r\n    }\r\n\r\n    async rollDirectSpellDefense(spell: SR5Item, options: SpellDefenseOptions): Promise<ShadowrunRoll | undefined> {\r\n        if (!spell.isDirectCombatSpell()) return;\r\n\r\n        // Prepare the actual roll.\r\n        options.hideRollMessage = options.hideRollMessage ?? true;\r\n        const attribute = spell.isManaSpell() ?\r\n            SR.defense.spell.direct.mana :\r\n            SR.defense.spell.direct.physical;\r\n\r\n        const roll = await this.rollSingleAttribute(attribute, options);\r\n\r\n        if (!roll) return;\r\n\r\n        // Prepare the resulting damage message.\r\n        const title = spell.isManaSpell() ?\r\n            game.i18n.localize('SR5.SpellDefenseDirectMana') :\r\n            game.i18n.localize('SR5.SpellDefenseDirectPhysical');\r\n        const modificationLabel = 'SR5.SpellDefense';\r\n        const actor = this;\r\n        const damage = Helpers.reduceDamageByHits(options.attack.damage, roll.hits, modificationLabel);\r\n\r\n        await createRollChatMessage({title, roll, actor, damage});\r\n\r\n        return roll;\r\n    }\r\n\r\n    async rollIndirectSpellDefense(spell: SR5Item, options: SpellDefenseOptions): Promise<ShadowrunRoll | undefined> {\r\n        if (!spell.isIndirectCombatSpell()) return;\r\n\r\n        const opposedParts = spell.getOpposedTestMod();\r\n\r\n        // TODO: indirect LOS spell defense works like a ranged weapon defense, but indirect LOS(A) spell defense\r\n        //       work like grenade attack (no defense, but soak, with the threshold net hits modifying damage.)\r\n        //       Grenades: SR5#181 Combat Spells: SR5#283\r\n        return await this.rollAttackDefense(options, opposedParts.list);\r\n    }\r\n\r\n    // TODO: Abstract handling of const damage : ModifiedDamageData\r\n    async rollSoak(options: SoakRollOptions, partsProps: ModList<number> = []): Promise<ShadowrunRoll|undefined> {\r\n        return new SoakFlow().runSoakTest(this, options, partsProps);\r\n    }\r\n\r\n    rollSingleAttribute(attId, options: ActorRollOptions) {\r\n        const attr = duplicate(this.data.data.attributes[attId]);\r\n        const parts = new PartsList<number>();\r\n        parts.addUniquePart(attr.label, attr.value);\r\n        this._addMatrixParts(parts, attr);\r\n        this._addGlobalParts(parts);\r\n\r\n        return ShadowrunRoller.advancedRoll({\r\n            actor: this,\r\n            parts: parts.list,\r\n            event: options?.event,\r\n            title: options.title ?? Helpers.label(attId),\r\n            hideRollMessage: options.hideRollMessage\r\n        });\r\n    }\r\n\r\n    rollTwoAttributes([id1, id2], options: ActorRollOptions) {\r\n        const attr1 = duplicate(this.data.data.attributes[id1]);\r\n        const attr2 = duplicate(this.data.data.attributes[id2]);\r\n        const label1 = Helpers.label(id1);\r\n        const label2 = Helpers.label(id2);\r\n        const parts = new PartsList<number>();\r\n        parts.addPart(attr1.label, attr1.value);\r\n        parts.addPart(attr2.label, attr2.value);\r\n        this._addMatrixParts(parts, [attr1, attr2]);\r\n        this._addGlobalParts(parts);\r\n\r\n        return ShadowrunRoller.advancedRoll({\r\n            actor: this,\r\n            parts: parts.list,\r\n            event: options?.event,\r\n            title: options.title ?? `${label1} + ${label2}`,\r\n            hideRollMessage: options.hideRollMessage\r\n        });\r\n    }\r\n\r\n    rollNaturalRecovery(track, options?: ActorRollOptions) {\r\n        if (!this.isCharacter()) return;\r\n\r\n        let id1 = 'body';\r\n        let id2 = 'willpower';\r\n        let title = 'Natural Recover';\r\n        if (track === 'physical') {\r\n            id2 = 'body';\r\n            title += ' - Physical - 1 Day';\r\n        } else {\r\n            title += ' - Stun - 1 Hour';\r\n        }\r\n        let att1 = duplicate(this.data.data.attributes[id1]);\r\n        let att2 = duplicate(this.data.data.attributes[id2]);\r\n        const parts = new PartsList<number>();\r\n        parts.addPart(att1.label, att1.value);\r\n        parts.addPart(att2.label, att2.value);\r\n\r\n        return ShadowrunRoller.advancedRoll({\r\n            event: options?.event,\r\n            actor: this,\r\n            parts: parts.list,\r\n            title: title,\r\n            extended: true,\r\n            after: async (roll: Roll | undefined) => {\r\n                if (!roll) return;\r\n                let hits = roll.total;\r\n                const data = this.data.data as CharacterActorData;\r\n                let current = data.track[track].value;\r\n\r\n                current = Math.max(current - hits, 0);\r\n\r\n                let key = `data.track.${track}.value`;\r\n\r\n                let u = {};\r\n                u[key] = current;\r\n                await this.update(u);\r\n            },\r\n        });\r\n    }\r\n\r\n    async rollMatrixAttribute(attr, options?: ActorRollOptions) {\r\n        if (!(\"matrix\" in this.data.data)) return;\r\n\r\n        let matrix_att = duplicate(this.data.data.matrix[attr]);\r\n        let title = game.i18n.localize(CONFIG.SR5.matrixAttributes[attr]);\r\n        const parts = new PartsList<number>();\r\n        parts.addPart(CONFIG.SR5.matrixAttributes[attr], matrix_att.value);\r\n\r\n        if (options && options.event && options.event[CONFIG.SR5.kbmod.SPEC]) parts.addUniquePart('SR5.Specialization', 2);\r\n        if (Helpers.hasModifiers(options?.event)) {\r\n            return ShadowrunRoller.advancedRoll({\r\n                event: options?.event,\r\n                actor: this,\r\n                parts: parts.list,\r\n                title: title,\r\n            });\r\n        }\r\n        const attributes = Helpers.filter(this.data.data.attributes, ([, value]) => value.value > 0);\r\n        const attribute = 'willpower';\r\n\r\n        let dialogData = {\r\n            attribute: attribute,\r\n            attributes: attributes,\r\n        };\r\n        const buttons = {\r\n            roll: {\r\n                label: 'Continue',\r\n                callback: () => (cancel = false),\r\n            },\r\n        };\r\n\r\n        let cancel = true;\r\n        renderTemplate('systems/shadowrun5e/dist/templates/rolls/matrix-roll.html', dialogData).then((dlg) => {\r\n            new Dialog({\r\n                title: `${title} Test`,\r\n                content: dlg,\r\n                buttons: buttons,\r\n                close: async (html) => {\r\n                    if (cancel) return;\r\n                    const newAtt = Helpers.parseInputToString($(html).find('[name=attribute]').val());\r\n                    let att: AttributeField | undefined = undefined;\r\n                    if (newAtt) {\r\n                        att = this.data.data.attributes[newAtt];\r\n                        title += ` + ${game.i18n.localize(CONFIG.SR5.attributes[newAtt])}`;\r\n                    }\r\n                    if (att !== undefined) {\r\n                        if (att.value && att.label) parts.addPart(att.label, att.value);\r\n                        this._addMatrixParts(parts, true);\r\n                        this._addGlobalParts(parts);\r\n                        return ShadowrunRoller.advancedRoll({\r\n                            event: options?.event,\r\n                            actor: this,\r\n                            parts: parts.list,\r\n                            title: title,\r\n                        });\r\n                    }\r\n                },\r\n            }).render(true);\r\n        });\r\n    }\r\n\r\n    promptRoll(options?: ActorRollOptions) {\r\n        const rollProps = {\r\n            event: options?.event,\r\n            title: 'Roll',\r\n            parts: [],\r\n            actor: this\r\n        };\r\n        const dialogOptions = {\r\n            pool: true\r\n        }\r\n        return ShadowrunRoller.advancedRoll(rollProps, dialogOptions);\r\n    }\r\n\r\n    rollDeviceRating(options?: ActorRollOptions) {\r\n        const title = game.i18n.localize('SR5.Labels.ActorSheet.DeviceRating');\r\n        const parts = new PartsList<number>();\r\n        const rating = this.getDeviceRating();\r\n        // add device rating twice as this is the most common roll\r\n        parts.addPart(title, rating);\r\n        parts.addPart(title, rating);\r\n        this._addGlobalParts(parts);\r\n        return ShadowrunRoller.advancedRoll({\r\n            event: options?.event,\r\n            title,\r\n            parts: parts.list,\r\n            actor: this,\r\n        });\r\n    }\r\n\r\n    rollAttributesTest(rollId, options?: ActorRollOptions) {\r\n        const title = game.i18n.localize(CONFIG.SR5.attributeRolls[rollId]);\r\n        const atts = this.data.data.attributes;\r\n        const modifiers = this.data.data.modifiers;\r\n        const parts = new PartsList<number>();\r\n        if (rollId === 'composure') {\r\n            parts.addUniquePart(atts.charisma.label, atts.charisma.value);\r\n            parts.addUniquePart(atts.willpower.label, atts.willpower.value);\r\n            if (modifiers.composure) parts.addUniquePart('SR5.Bonus', modifiers.composure);\r\n        } else if (rollId === 'judge_intentions') {\r\n            parts.addUniquePart(atts.charisma.label, atts.charisma.value);\r\n            parts.addUniquePart(atts.intuition.label, atts.intuition.value);\r\n            if (modifiers.judge_intentions) parts.addUniquePart('SR5.Bonus', modifiers.judge_intentions);\r\n        } else if (rollId === 'lift_carry') {\r\n            parts.addUniquePart(atts.strength.label, atts.strength.value);\r\n            parts.addUniquePart(atts.body.label, atts.body.value);\r\n            if (modifiers.lift_carry) parts.addUniquePart('SR5.Bonus', modifiers.lift_carry);\r\n        } else if (rollId === 'memory') {\r\n            parts.addUniquePart(atts.willpower.label, atts.willpower.value);\r\n            parts.addUniquePart(atts.logic.label, atts.logic.value);\r\n            if (modifiers.memory) parts.addUniquePart('SR5.Bonus', modifiers.memory);\r\n        }\r\n\r\n        this._addGlobalParts(parts);\r\n        return ShadowrunRoller.advancedRoll({\r\n            event: options?.event,\r\n            actor: this,\r\n            parts: parts.list,\r\n            title: `${title} Test`,\r\n        });\r\n    }\r\n\r\n    async rollSkill(skill: SkillField, options?: SkillRollOptions) {\r\n        // NOTE: Currently defaulting happens at multiple places, which is why SkillFlow.handleDefaulting isn't used\r\n        //       here, yet. A general skill usage clean up between Skill, Attribute and Item action handling is needed.\r\n        if (!SkillFlow.allowRoll(skill)) {\r\n            ui.notifications.warn(game.i18n.localize('SR5.Warnings.SkillCantBeDefault'));\r\n            return;\r\n        }\r\n\r\n        // Legacy skills have a label, but no name. Custom skills have a name but no label.\r\n        const label = skill.label ? game.i18n.localize(skill.label) : skill.name;\r\n        const title = label;\r\n\r\n        // Since options can provide an attribute, ignore incomplete sill attribute configuration.\r\n        const attributeName = options?.attribute ? options.attribute : skill.attribute;\r\n        const attribute = this.getAttribute(attributeName);\r\n        if (!attribute) {\r\n            ui.notifications.error(game.i18n.localize('SR5.Errors.SkillWithoutAttribute'));\r\n            return;\r\n        }\r\n        let limit = attribute.limit ? this.getLimit(attribute.limit) : undefined;\r\n\r\n        // Initialize parts with always needed skill data.\r\n        const parts = new PartsList<number>();\r\n        parts.addUniquePart(label, skill.value);\r\n        this._addMatrixParts(parts, [attribute, skill]);\r\n        this._addGlobalParts(parts);\r\n\r\n        // Directly test, without further skill dialog.\r\n        if (options?.event && Helpers.hasModifiers(options?.event)) {\r\n            parts.addUniquePart(attribute.label, attribute.value);\r\n            if (options.event[CONFIG.SR5.kbmod.SPEC]) parts.addUniquePart('SR5.Specialization', 2);\r\n\r\n            return await ShadowrunRoller.advancedRoll({\r\n                event: options.event,\r\n                actor: this,\r\n                parts: parts.list,\r\n                limit,\r\n                title: `${title} ${game.i18n.localize('SR5.Test')}`,\r\n            });\r\n        }\r\n\r\n        // First ask user about skill details.\r\n        const skillRollDialogOptions = {\r\n            skill,\r\n            attribute: attributeName\r\n        }\r\n\r\n        const skillDialog = await ShadowrunActorDialogs.createSkillDialog(this, skillRollDialogOptions, parts);\r\n        const skillActionData = await skillDialog.select();\r\n\r\n        if (skillDialog.canceled) return;\r\n\r\n        return await ShadowrunRoller.advancedRoll({\r\n            event: options?.event,\r\n            actor: this,\r\n            parts: skillActionData.parts.list,\r\n            limit: skillActionData.limit,\r\n            title: skillActionData.title,\r\n        });\r\n    }\r\n\r\n    async rollDronePerception(options?: ActorRollOptions) {\r\n        if (!this.isVehicle())\r\n            return;\r\n\r\n        const actorData = duplicate(this.data.data) as VehicleActorData;\r\n        if (actorData.controlMode === 'autopilot') {\r\n            const parts = new PartsList<number>();\r\n\r\n            const pilot = Helpers.calcTotal(actorData.vehicle_stats.pilot);\r\n            // TODO possibly look for autosoft item level?\r\n            const perception = this.findActiveSkill('perception');\r\n            const limit = this.findLimit('sensor');\r\n\r\n            if (perception && limit) {\r\n                parts.addPart('SR5.Vehicle.Clearsight', Helpers.calcTotal(perception));\r\n                parts.addPart('SR5.Vehicle.Stats.Pilot', pilot);\r\n\r\n                this._addGlobalParts(parts);\r\n\r\n                return ShadowrunRoller.advancedRoll({\r\n                    event: options?.event,\r\n                    actor: this,\r\n                    parts: parts.list,\r\n                    limit,\r\n                    title: game.i18n.localize('SR5.Labels.ActorSheet.RollDronePerception'),\r\n                });\r\n            }\r\n        } else {\r\n            await this.rollActiveSkill('perception', options);\r\n        }\r\n    }\r\n\r\n    async rollPilotVehicle(options?: ActorRollOptions) {\r\n        if (!this.isVehicle()) {\r\n            return undefined;\r\n        }\r\n        const actorData = duplicate(this.data.data) as VehicleActorData;\r\n        if (actorData.controlMode === 'autopilot') {\r\n            const parts = new PartsList<number>();\r\n\r\n            const pilot = Helpers.calcTotal(actorData.vehicle_stats.pilot);\r\n            let skill: SkillField | undefined = this.getVehicleTypeSkill();\r\n            const environment = actorData.environment;\r\n            const limit = this.findLimit(environment);\r\n\r\n            if (skill && limit) {\r\n                parts.addPart('SR5.Vehicle.Stats.Pilot', pilot);\r\n                // TODO possibly look for autosoft item level?\r\n                parts.addPart('SR5.Vehicle.Maneuvering', Helpers.calcTotal(skill));\r\n\r\n                this._addGlobalParts(parts);\r\n\r\n                return await ShadowrunRoller.advancedRoll({\r\n                    event: options?.event,\r\n                    actor: this,\r\n                    parts: parts.list,\r\n                    limit,\r\n                    title: game.i18n.localize('SR5.Labels.ActorSheet.RollPilotVehicleTest'),\r\n                });\r\n            }\r\n        } else {\r\n            const skillName = this.getVehicleTypeSkillName();\r\n            if (!skillName) return;\r\n            return await this.rollActiveSkill(skillName, options);\r\n        }\r\n    }\r\n\r\n    async rollDroneInfiltration(options?: ActorRollOptions) {\r\n        if (!this.isVehicle()) {\r\n            return undefined;\r\n        }\r\n        const actorData = duplicate(this.data.data) as VehicleActorData;\r\n        if (actorData.controlMode === 'autopilot') {\r\n            const parts = new PartsList<number>();\r\n\r\n            const pilot = Helpers.calcTotal(actorData.vehicle_stats.pilot);\r\n            // TODO possibly look for autosoft item level?\r\n            const sneaking = this.findActiveSkill('sneaking');\r\n            const limit = this.findLimit('sensor');\r\n\r\n            if (sneaking && limit) {\r\n                parts.addPart('SR5.Vehicle.Stealth', Helpers.calcTotal(sneaking));\r\n                parts.addPart('SR5.Vehicle.Stats.Pilot', pilot);\r\n\r\n                this._addGlobalParts(parts);\r\n\r\n                return ShadowrunRoller.advancedRoll({\r\n                    event: options?.event,\r\n                    actor: this,\r\n                    parts: parts.list,\r\n                    limit,\r\n                    title: game.i18n.localize('SR5.Labels.ActorSheet.RollDroneInfiltration'),\r\n                });\r\n            }\r\n        } else {\r\n            await this.rollActiveSkill('sneaking', options);\r\n        }\r\n    }\r\n\r\n    rollKnowledgeSkill(catId: string, skillId: string, options?: SkillRollOptions) {\r\n        const category = duplicate(this.data.data.skills.knowledge[catId]);\r\n        const skill = duplicate(category.value[skillId]);\r\n        skill.attribute = category.attribute;\r\n        skill.label = skill.name;\r\n        return this.rollSkill(skill, options);\r\n    }\r\n\r\n    rollLanguageSkill(skillId: string, options?: SkillRollOptions) {\r\n        const skill = duplicate(this.data.data.skills.language.value[skillId]);\r\n        skill.attribute = 'intuition';\r\n        skill.label = skill.name;\r\n        return this.rollSkill(skill, options);\r\n    }\r\n\r\n    rollActiveSkill(skillId: string, options?: SkillRollOptions) {\r\n        const skill = duplicate(this.data.data.skills.active[skillId]);\r\n        return this.rollSkill(skill, options);\r\n    }\r\n\r\n    rollAttribute(attId, options?: ActorRollOptions) {\r\n        let title = game.i18n.localize(CONFIG.SR5.attributes[attId]);\r\n        const att = duplicate(this.data.data.attributes[attId]);\r\n        const atts = duplicate(this.data.data.attributes);\r\n        const parts = new PartsList<number>();\r\n        parts.addPart(att.label, att.value);\r\n        let dialogData = {\r\n            attribute: att,\r\n            attributes: atts,\r\n        };\r\n        let cancel = true;\r\n        renderTemplate('systems/shadowrun5e/dist/templates/rolls/single-attribute.html', dialogData).then((dlg) => {\r\n            new Dialog({\r\n                title: `${title} Attribute Test`,\r\n                content: dlg,\r\n                buttons: {\r\n                    roll: {\r\n                        label: 'Continue',\r\n                        callback: () => (cancel = false),\r\n                    },\r\n                },\r\n                default: 'roll',\r\n                close: async (html) => {\r\n                    if (cancel) return;\r\n\r\n                    const att2Id: string = Helpers.parseInputToString($(html).find('[name=attribute2]').val());\r\n                    let att2: AttributeField | undefined = undefined;\r\n                    if (att2Id !== 'none') {\r\n                        att2 = atts[att2Id];\r\n                        if (att2?.label) {\r\n                            parts.addPart(att2.label, att2.value);\r\n                            const att2IdLabel = game.i18n.localize(CONFIG.SR5.attributes[att2Id]);\r\n                            title += ` + ${att2IdLabel}`;\r\n                        }\r\n                    }\r\n                    if (att2Id === 'default') {\r\n                        parts.addUniquePart('SR5.Defaulting', -1);\r\n                    }\r\n                    this._addMatrixParts(parts, [att, att2]);\r\n                    this._addGlobalParts(parts);\r\n                    return ShadowrunRoller.advancedRoll({\r\n                        event: options?.event,\r\n                        title: `${title} Test`,\r\n                        actor: this,\r\n                        parts: parts.list,\r\n                    });\r\n                },\r\n            }).render(true);\r\n        });\r\n    }\r\n\r\n    _addMatrixParts(parts: PartsList<number>, atts) {\r\n        if (Helpers.isMatrix(atts)) {\r\n            if (!(\"matrix\" in this.data.data)) return;\r\n\r\n            const matrix = this.data.data.matrix;\r\n            if (matrix.hot_sim) parts.addUniquePart('SR5.HotSim', 2);\r\n            if (matrix.running_silent) parts.addUniquePart('SR5.RunningSilent', -2);\r\n        }\r\n    }\r\n    _addGlobalParts(parts: PartsList<number>) {\r\n        if (this.data.data.modifiers.global) {\r\n            parts.addUniquePart('SR5.Global', this.data.data.modifiers.global);\r\n        }\r\n    }\r\n\r\n    _addDefenseParts(parts: PartsList<number>) {\r\n        if (this.isVehicle()) {\r\n            const pilot = this.findVehicleStat('pilot');\r\n            if (pilot) {\r\n                parts.addUniquePart(pilot.label, Helpers.calcTotal(pilot));\r\n            }\r\n            const skill = this.getVehicleTypeSkill();\r\n            if (skill) {\r\n                parts.addUniquePart('SR5.Vehicle.Maneuvering', Helpers.calcTotal(skill));\r\n            }\r\n        } else {\r\n            const reaction = this.findAttribute('reaction');\r\n            const intuition = this.findAttribute('intuition');\r\n\r\n            if (reaction) {\r\n                parts.addUniquePart(reaction.label || 'SR5.Reaction', reaction.value);\r\n            }\r\n            if (intuition) {\r\n                parts.addUniquePart(intuition.label || 'SR5.Intuition', intuition.value);\r\n            }\r\n        }\r\n\r\n        const mod = this.getModifier('defense');\r\n        if (mod) {\r\n            parts.addUniquePart('SR5.Bonus', mod);\r\n        }\r\n    }\r\n\r\n    _addArmorParts(parts: PartsList<number>) {\r\n        const armor = this.getArmor();\r\n        if (armor) {\r\n            parts.addUniquePart(armor.label || 'SR5.Armor', armor.base);\r\n            for (let part of armor.mod) {\r\n                parts.addUniquePart(part.name, part.value);\r\n            }\r\n        }\r\n    }\r\n\r\n    static async pushTheLimit(li) {\r\n        let msg: ChatMessage = game.messages.get(li.data().messageId);\r\n\r\n        if (msg.getFlag(SYSTEM_NAME, FLAGS.MessageCustomRoll)) {\r\n            let actor = (msg.user.character as unknown) as SR5Actor;\r\n            if (!actor) {\r\n                const tokens = Helpers.getControlledTokens();\r\n                if (tokens.length > 0) {\r\n                    for (let token of tokens) {\r\n                        if (token.actor.owner) {\r\n                            actor = token.actor as SR5Actor;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (actor) {\r\n                const parts = new PartsList<number>();\r\n                parts.addUniquePart('SR5.PushTheLimit', actor.getEdge().value);\r\n                ShadowrunRoller.basicRoll({\r\n                    title: ` - ${game.i18n.localize('SR5.PushTheLimit')}`,\r\n                    parts: parts.list,\r\n                    actor: actor,\r\n                }).then(() => {\r\n                    actor.update({\r\n                        'data.attributes.edge.uses': actor.getEdge().uses - 1,\r\n                    });\r\n                });\r\n            } else {\r\n                // @ts-ignore\r\n                ui.notifications.warn(game.i18n.localize('SR5.SelectTokenMessage'));\r\n            }\r\n        }\r\n    }\r\n\r\n    static async secondChance(li) {\r\n        let msg: ChatMessage = game.messages.get(li.data().messageId);\r\n        // @ts-ignore\r\n        let roll: Roll = JSON.parse(msg.data?.roll);\r\n        let formula = roll.formula;\r\n        let hits = roll.total;\r\n        let re = /(\\d+)d6/;\r\n        let matches = formula.match(re);\r\n        if (matches && matches[1]) {\r\n            let match = matches[1];\r\n            let pool = parseInt(match.replace('d6', ''));\r\n            if (!isNaN(pool) && !isNaN(hits)) {\r\n                let actor = (msg.user.character as unknown) as SR5Actor;\r\n                if (!actor) {\r\n                    const tokens = Helpers.getControlledTokens();\r\n                    if (tokens.length > 0) {\r\n                        for (let token of tokens) {\r\n                            if (token.actor.owner) {\r\n                                actor = token.actor as SR5Actor;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if (actor) {\r\n                    const parts = new PartsList<number>();\r\n                    parts.addUniquePart('SR5.OriginalDicePool', pool);\r\n                    parts.addUniquePart('SR5.Successes', -hits);\r\n\r\n                    return ShadowrunRoller.basicRoll({\r\n                        title: ` - Second Chance`,\r\n                        parts: parts.list,\r\n                        actor: actor,\r\n                    }).then(() => {\r\n                        actor.useEdge();\r\n                    });\r\n                } else {\r\n                    // @ts-ignore\r\n                    ui.notifications.warn(game.i18n.localize('SR5.SelectTokenMessage'));\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Override setFlag to remove the 'SR5.' from keys in modlists, otherwise it handles them as embedded keys\r\n     * @param scope\r\n     * @param key\r\n     * @param value\r\n     */\r\n    setFlag(scope: string, key: string, value: any): Promise<any> {\r\n        const newValue = Helpers.onSetFlag(value);\r\n        return super.setFlag(scope, key, newValue);\r\n    }\r\n\r\n    /**\r\n     * Override getFlag to add back the 'SR5.' keys correctly to be handled\r\n     * @param scope\r\n     * @param key\r\n     */\r\n    getFlag(scope: string, key: string): any {\r\n        const data = super.getFlag(scope, key);\r\n        return Helpers.onGetFlag(data);\r\n    }\r\n\r\n    /** Return either the linked token or the token of the synthetic actor.\r\n     *\r\n     * @retrun Will return null should no token have been placed on scene.\r\n     */\r\n    getToken(): Token {\r\n        // Linked actors can only have one token, which isn't stored within actor data...\r\n        if (this._isLinkedToToken() && this.hasToken()) {\r\n            const linked = true;\r\n            const tokens = this.getActiveTokens(linked);\r\n            // This assumes for a token to exist and should fail if not.\r\n            return tokens[0];\r\n        }\r\n\r\n        // Unlinked actors can have multiple active token but each have theirs directly attached...\r\n        return this.token;\r\n    }\r\n\r\n    /**\r\n     * There is no need for a token to placed. The prototype token is enough.\r\n     */\r\n    _isLinkedToToken(): boolean {\r\n        //@ts-ignore\r\n        // If an actor is linked, all it's copies also contain this linked status, even if they're not.\r\n        return this.data.token.actorLink && !this.token;\r\n    }\r\n\r\n    hasToken(): boolean {\r\n        return this.getActiveTokens().length > 0;\r\n    }\r\n\r\n    hasActivePlayerOwner(): boolean {\r\n        const players = this.getActivePlayerOwners();\r\n        return players.length > 0;\r\n    }\r\n\r\n    getActivePlayer(): User|null {\r\n        //@ts-ignore\r\n        if (!this.hasPlayerOwner) {\r\n            return null;\r\n        }\r\n\r\n        for (const user of game.users.entities) {\r\n            if (!user.active || user.isGM) {\r\n                continue;\r\n            }\r\n            if (this.id === user.character.id) {\r\n                return user;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    getActivePlayerOwners(): User[] {\r\n        //@ts-ignore\r\n        const users = this.getUsers('OWNER');\r\n        return users.filter(user => user.active);\r\n    }\r\n\r\n    __addDamageToTrackValue(damage: DamageData, track: TrackType|OverflowTrackType|ConditionData): TrackType|OverflowTrackType|ConditionData {\r\n        if (damage.value === 0) return track;\r\n        if (track.value === track.max) return track;\r\n\r\n        //  Avoid cross referencing.\r\n        track = duplicate(track);\r\n\r\n        track.value += damage.value;\r\n        if (track.value > track.max) {\r\n            // dev error, not really meant to be ever seen by users. Therefore no localization.\r\n            console.error(\"Damage did overflow the track, which shouldn't happen at this stage. Damage has been set to max. Please use applyDamage.\")\r\n            track.value = track.max;\r\n        }\r\n\r\n        return track;\r\n    }\r\n\r\n    async _addDamageToDeviceTrack(damage: DamageData, device: SR5Item) {\r\n        if (!device) return;\r\n\r\n        let condition = device.getCondition();\r\n        if (!condition) return damage;\r\n\r\n        if (damage.value === 0) return;\r\n        if (condition.value === condition.max) return;\r\n\r\n        condition = this.__addDamageToTrackValue(damage, condition);\r\n\r\n        const data = {['data.technology.condition_monitor']: condition};\r\n        await device.update(data);\r\n    }\r\n\r\n    async _addDamageToTrack(damage: DamageData, track: TrackType|OverflowTrackType|ConditionData) {\r\n        if (damage.value === 0) return;\r\n        if (track.value === track.max) return;\r\n\r\n        track = this.__addDamageToTrackValue(damage, track);\r\n        // //  Avoid cross referencing.\r\n        // track = duplicate(track);\r\n        //\r\n        // track.value += damage.value;\r\n        // if (track.value > track.max) {\r\n        //     // dev error, not really meant to be ever seen by users. Therefore no localization.\r\n        //     console.error(\"Damage did overflow the track, which shouldn't happen at this stage. Damage has been set to max. Please use applyDamage.\")\r\n        //     track.value = track.max;\r\n        // }\r\n\r\n        const data = {[`data.track.${damage.type.value}`]: track};\r\n        await this.update(data);\r\n    }\r\n\r\n    async _addDamageToOverflow(damage: DamageData, track: OverflowTrackType) {\r\n        if (damage.value === 0) return;\r\n        if (track.overflow.value === track.overflow.max) return;\r\n\r\n        //  Avoid cross referencing.\r\n        const overflow = duplicate(track.overflow);\r\n\r\n        // Don't over apply damage to the track overflow.\r\n        overflow.value += damage.value;\r\n        overflow.value = Math.min(overflow.value, overflow.max);\r\n\r\n        const data = {[`data.track.${damage.type.value}.overflow`]: overflow};\r\n        await this.update(data);\r\n    }\r\n\r\n    /** Apply damage to the stun track and get overflow damage for the physical track.\r\n     */\r\n    async addStunDamage(damage: DamageData): Promise<DamageData> {\r\n        if (damage.type.value !== 'stun') return damage;\r\n\r\n        const track = this.getStunTrack();\r\n        if (!track)\r\n            return damage;\r\n\r\n        const {overflow, rest} = this._calcDamageOverflow(damage, track);\r\n\r\n        // Only change damage type when needed, in order to avoid confusion of callers.\r\n        if (overflow.value > 0) {\r\n            // Apply Stun overflow damage to physical track according to: SR5E#170\r\n            overflow.value = Math.floor(overflow.value / 2);\r\n            overflow.type.value = 'physical';\r\n        }\r\n\r\n        await this._addDamageToTrack(rest, track);\r\n        return overflow;\r\n    }\r\n\r\n    async addPhysicalDamage(damage: DamageData) {\r\n        if (damage.type.value !== 'physical') return damage;\r\n\r\n        const track = this.getPhysicalTrack();\r\n        if (!track)\r\n            return damage;\r\n\r\n        const {overflow, rest} = this._calcDamageOverflow(damage, track);\r\n\r\n        await this._addDamageToTrack(rest, track);\r\n        await this._addDamageToOverflow(overflow, track);\r\n    }\r\n\r\n    /** Adding damage to a device track instead of an actors track, as they contain their own track within their data.\r\n     */\r\n    async addMatrixDamage(damage: DamageData): Promise<DamageData> {\r\n        if (damage.type.value !== 'matrix') return damage;\r\n\r\n        const device = this.getMatrixDevice();\r\n        if (!device) return damage;\r\n\r\n        const track = this.getMatrixTrack();\r\n        // Actor might not have a commlink/cyberdeck equipped.\r\n        if (!track) return damage;\r\n\r\n        const {overflow, rest} = this._calcDamageOverflow(damage, track);\r\n\r\n        await this._addDamageToDeviceTrack(rest, device);\r\n\r\n        // Return overflow for consistency, yet nothing will take overflowing matrix damage.\r\n        return overflow;\r\n    }\r\n\r\n    /** Calculate damage overflow only based on max and current track values.\r\n     */\r\n    _calcDamageOverflow(damage: DamageData, track: TrackType|ConditionData): {overflow: DamageData, rest: DamageData} {\r\n        const freeTrackDamage = track.max - track.value;\r\n        const overflowDamage = damage.value > freeTrackDamage ?\r\n            damage.value - freeTrackDamage :\r\n            0;\r\n        const restDamage = damage.value - overflowDamage;\r\n\r\n        //  Avoid cross referencing.\r\n        const overflow = duplicate(damage);\r\n        const rest = duplicate(damage);\r\n\r\n        overflow.value = overflowDamage;\r\n        rest.value = restDamage;\r\n\r\n        return {overflow, rest};\r\n    }\r\n\r\n    getStunTrack(): TrackType | undefined {\r\n        if (\"track\" in this.data.data && \"stun\" in this.data.data.track)\r\n            return this.data.data.track.stun;\r\n    }\r\n\r\n    getPhysicalTrack(): OverflowTrackType | undefined {\r\n        if (\"track\" in this.data.data)\r\n            return this.data.data.track.physical;\r\n    }\r\n\r\n    getMatrixTrack(): ConditionData|undefined {\r\n        const device = this.getMatrixDevice();\r\n        if (!device) return undefined;\r\n\r\n        return device.getCondition();\r\n    }\r\n\r\n    getModifiedArmor(damage: DamageData): ActorArmorData {\r\n        if (!damage.ap?.value) {\r\n            return this.getArmor();\r\n       }\r\n\r\n        const modified = duplicate(this.getArmor());\r\n        if (modified) {\r\n            modified.mod = PartsList.AddUniquePart(modified.mod, 'SR5.DV', damage.ap.value);\r\n            modified.value = Helpers.calcTotal(modified, {min: 0});\r\n        }\r\n \r\n        return modified;\r\n    }\r\n\r\n    /** Reduce the initiative of the actor in the currently open / selected combat.\r\n     * Should a tokens actor be in multiple combats it will also only affect the currently open combat,\r\n     * since that is what's set in game.combat\r\n     *\r\n     * TODO: There is an issue with linked actors that have multiple tokens placed, with each in different combats.\r\n     *       The defense test needs to be done using the correct token, not just by the actor (from the sidebar).\r\n     *       One could argue this to be correct behavior, just confusing with normal linked actor / token usage.\r\n     */\r\n    async changeCombatInitiative(modifier: number) {\r\n        // No change needed for nothing to change.\r\n        if (modifier === 0) return;\r\n\r\n        const combat: SR5Combat = game.combat as SR5Combat;\r\n        const combatant = combat.getActorCombatant(this);\r\n\r\n        // Token might not be part of active combat.\r\n        if (!combatant) return;\r\n\r\n        await combat.adjustInitiative(combatant, modifier);\r\n    }\r\n\r\n    hasDamageTracks(): boolean {\r\n        return \"track\" in this.data.data;\r\n    }\r\n\r\n    asVehicleData(): SR5VehicleType | undefined {\r\n        if (this.isVehicle())\r\n            return this.data as SR5VehicleType;\r\n    }\r\n\r\n    asCharacterData(): SR5CharacterType | undefined {\r\n        if (this.isCharacter())\r\n            return this.data as SR5CharacterType;\r\n    }\r\n\r\n    asSpiritData(): SR5SpiritType | undefined {\r\n        if (this.isSpirit()) {\r\n            return this.data as SR5SpiritType;\r\n        }\r\n    }\r\n\r\n    asSpriteData(): SR5SpriteType | undefined {\r\n        if (this.isSprite()) {\r\n            return this.data as SR5SpriteType;\r\n        }\r\n    }\r\n\r\n    asCritterData(): SR5CritterType | undefined {\r\n        if (this.isCritter()){\r\n            return this.data as SR5CritterType;\r\n        }\r\n    }\r\n\r\n    getVehicleStats(): VehicleStats | undefined {\r\n        if (this.isVehicle() && \"vehicle_stats\" in this.data.data) {\r\n            return this.data.data.vehicle_stats;\r\n        }\r\n    }\r\n\r\n    /** Add another actor as the driver of a vehicle to allow for their values to be used in testing.\r\n     *\r\n     * @param id An actors id. Should be a character able to drive a vehicle\r\n     */\r\n    async addVehicleDriver(id: string) {\r\n        if (!this.isVehicle()) return;\r\n\r\n        const driver = game.actors.get(id) as SR5Actor;\r\n        if (!driver) return;\r\n\r\n        // NOTE: In THEORY almost all actor types can drive a vehicle.\r\n        // ... drek, in theory a drone could drive another vehicle even...\r\n\r\n        await this.update({'data.driver': driver.id});\r\n    }\r\n\r\n    async removeVehicleDriver() {\r\n        if (!this.hasDriver()) return;\r\n\r\n        await this.update({'data.driver': ''});\r\n    }\r\n\r\n    hasDriver(): boolean {\r\n        const data = this.asVehicleData();\r\n\r\n        if (!data) return false;\r\n        return data.data.driver.length > 0;\r\n    }\r\n\r\n    getVehicleDriver(): SR5Actor|undefined {\r\n        if (!this.hasDriver()) return;\r\n        const data = this.asVehicleData();\r\n        if (!data) return;\r\n\r\n        const driver = game.actors.get(data.data.driver) as SR5Actor;\r\n        // If no driver id is set, we won't get an actor and should explicitly return undefined.\r\n        if (!driver) return;\r\n        return driver;\r\n    }\r\n\r\n    /** Check if this actor is of one or multiple given actor types\r\n     *\r\n     * @param types A list of actor types to check.\r\n     */\r\n    matchesActorTypes(types: string[]): boolean {\r\n        return types.includes(this.data.type);\r\n    }\r\n\r\n    /** TODO: method documentation\r\n     *\r\n     * @param ignoreScene Set to true to ignore modifiers set on active or given scene.\r\n     * @param scene Should a scene be used as a fallback, provide this here. Otherwise current scene will be used.\r\n     */\r\n    async getModifiers(ignoreScene: boolean=false, scene: Scene=canvas.scene): Promise<Modifiers> {\r\n        const onActor = await Modifiers.getModifiersFromEntity(this);\r\n\r\n        if (onActor.hasActiveEnvironmental) {\r\n            return onActor;\r\n        } else if (ignoreScene) {\r\n            return new Modifiers(Modifiers.getDefaultModifiers());\r\n        } else {\r\n            return await Modifiers.getModifiersFromEntity(scene);\r\n        }\r\n    }\r\n\r\n    async setModifiers(modifiers: Modifiers) {\r\n        await Modifiers.setModifiersOnEntity(this, modifiers.modifiers);\r\n    }\r\n}\r\n","import {Helpers} from '../helpers';\r\nimport {ChummerImportForm} from '../apps/chummer-import-form';\r\nimport {SkillEditForm} from '../apps/skills/SkillEditForm';\r\nimport {KnowledgeSkillEditForm} from '../apps/skills/KnowledgeSkillEditForm';\r\nimport {LanguageSkillEditForm} from '../apps/skills/LanguageSkillEditForm';\r\nimport {SR5Actor} from './SR5Actor';\r\nimport {SR5} from '../config';\r\nimport {SR5Item} from \"../item/SR5Item\";\r\nimport SR5ActorSheetData = Shadowrun.SR5ActorSheetData;\r\nimport SR5SheetFilters = Shadowrun.SR5SheetFilters;\r\nimport Skills = Shadowrun.Skills;\r\nimport MatrixAttribute = Shadowrun.MatrixAttribute;\r\nimport SkillField = Shadowrun.SkillField;\r\nimport DeviceData = Shadowrun.DeviceData;\r\n\r\n// Use SR5ActorSheet._showSkillEditForm to only ever render one SkillEditForm instance.\r\n// Should multiple instances be open, Foundry will cause cross talk between skills and actors,\r\n// when opened in succession, causing SkillEditForm to wrongfully overwrite the wrong data.\r\nlet globalSkillAppId: number = -1;\r\n\r\n/**\r\n * Extend the basic ActorSheet with some very simple modifications\r\n *\r\n * NOTE: ActorSheet<T, A> expects Actor.data.data typing, yet complains about it's general type being not compatible\r\n *       with SR5ActorData\r\n */\r\nexport class SR5ActorSheet extends ActorSheet<{}, SR5Actor> {\r\n    _shownDesc: string[];\r\n    _filters: SR5SheetFilters;\r\n    _scroll: string;\r\n\r\n    constructor(...args) {\r\n        super(...args);\r\n\r\n        /**\r\n         * Keep track of the currently active sheet tab\r\n         * @type {string}\r\n         */\r\n        this._shownDesc = [];\r\n        this._filters = {\r\n            skills: '',\r\n            showUntrainedSkills: true,\r\n        };\r\n    }\r\n\r\n    /* -------------------------------------------- */\r\n\r\n    /**\r\n     * Extend and override the default options used by the 5e Actor Sheet\r\n     * @returns {Object}\r\n     */\r\n    static get defaultOptions() {\r\n        return mergeObject(super.defaultOptions, {\r\n            classes: ['sr5', 'sheet', 'actor'],\r\n            width: 880,\r\n            height: 690,\r\n            tabs: [\r\n                {\r\n                    navSelector: '.tabs',\r\n                    contentSelector: '.sheetbody',\r\n                    initial: 'skills',\r\n                },\r\n            ],\r\n        });\r\n    }\r\n\r\n    get template() {\r\n        const path = 'systems/shadowrun5e/dist/templates';\r\n\r\n        if (this.actor.hasPerm(game.user, 'LIMITED', true)) {\r\n            return `${path}/actor-limited/${this.actor.data.type}.html`;\r\n        }\r\n\r\n        return `${path}/actor/${this.actor.data.type}.html`;\r\n    }\r\n\r\n    /* -------------------------------------------- */\r\n\r\n    /**\r\n     * Prepare data for rendering the Actor sheet\r\n     * The prepared data object contains both the actor data as well as additional sheet options\r\n     */\r\n    getData() {\r\n        const data: SR5ActorSheetData = (super.getData() as unknown) as SR5ActorSheetData;\r\n\r\n        // General purpose fields...\r\n        data.config = CONFIG.SR5;\r\n        data.filters = this._filters;\r\n\r\n        this._prepareMatrixAttributes(data);\r\n        this._prepareActorAttributes(data);\r\n\r\n        this._prepareItems(data);\r\n        this._prepareSkillsWithFilters(data);\r\n        this._prepareActorTypeFields(data);\r\n        this._prepareCharacterFields(data);\r\n        this._prepareVehicleFields(data);\r\n\r\n        return data;\r\n    }\r\n\r\n    _isSkillMagic(id, skill) {\r\n        return skill.attribute === 'magic' || id === 'astral_combat' || id === 'assensing';\r\n    }\r\n\r\n    _isSkillResonance(skill) {\r\n        return skill.attribute === 'resonance';\r\n    }\r\n\r\n    _getSkillLabelOrName(skill) {\r\n        // Custom skills don't have labels, use their name instead.\r\n        return skill.label ? game.i18n.localize(skill.label) : skill.name;\r\n    }\r\n\r\n    _doesSkillContainText(key, skill, text) {\r\n        if (!text) {\r\n            return true;\r\n        }\r\n\r\n        // Search both english keys, localized labels and all specializations.\r\n        const name = this._getSkillLabelOrName(skill);\r\n        const searchKey = skill.name === undefined ? key : '';\r\n        // some \"specs\" were a string from old code I think\r\n        const specs = skill.specs !== undefined && Array.isArray(skill.specs) ? skill.specs.join(' ') : '';\r\n        let searchString = `${searchKey} ${name} ${specs}`;\r\n\r\n        return searchString.toLowerCase().search(text.toLowerCase()) > -1;\r\n    }\r\n\r\n    _prepareCharacterFields(data: SR5ActorSheetData) {\r\n        // Empty zero value modifiers for display purposes.\r\n        const { modifiers: mods } = data.data;\r\n        for (let [key, value] of Object.entries(mods)) {\r\n            if (value === 0) mods[key] = '';\r\n        }\r\n\r\n        data.awakened = data.data.special === 'magic';\r\n        data.emerged = data.data.special === 'resonance';\r\n        data.woundTolerance = 3 + (Number(mods['wound_tolerance']) || 0);\r\n    }\r\n\r\n    _prepareVehicleFields(data: SR5ActorSheetData) {\r\n        if (!this.actor.isVehicle()) return;\r\n\r\n        const driver = this.actor.getVehicleDriver();\r\n\r\n        data.vehicle = {\r\n            driver\r\n        };\r\n    }\r\n\r\n    _prepareActorTypeFields(data: SR5ActorSheetData) {\r\n        data.isCharacter = this.actor.isCharacter();\r\n        data.isSpirit = this.actor.isSpirit();\r\n        data.isCritter = this.actor.isCritter();\r\n    }\r\n\r\n    _prepareMatrixAttributes(data) {\r\n        const { matrix } = data.data;\r\n        if (matrix) {\r\n            const cleanupAttribute = (attribute: MatrixAttribute) => {\r\n                const att = matrix[attribute];\r\n                if (att) {\r\n                    if (!att.mod) att.mod = {};\r\n                    if (att.temp === 0) delete att.temp;\r\n                }\r\n            };\r\n\r\n            ['firewall', 'data_processing', 'sleaze', 'attack'].forEach((att: MatrixAttribute) => cleanupAttribute(att));\r\n        }\r\n    }\r\n\r\n    _prepareActorAttributes(data: SR5ActorSheetData) {\r\n        // Clear visible, zero value attributes temporary modifiers so they appear blank.\r\n        const attrs = data.data.attributes;\r\n        for (let [, att] of Object.entries(attrs)) {\r\n            if (!att.hidden) {\r\n                if (att.temp === 0) delete att.temp;\r\n            }\r\n        }\r\n    }\r\n\r\n    _prepareSkillsWithFilters(data: SR5ActorSheetData) {\r\n        this._filterActiveSkills(data);\r\n        this._filterKnowledgeSkills(data);\r\n        this._filterLanguageSkills(data);\r\n    }\r\n\r\n    _filterActiveSkills(data: SR5ActorSheetData) {\r\n        // Handle active skills directly, as it doesn't use sub-categories.\r\n        data.data.skills.active = this._filterSkills(data, data.data.skills.active);\r\n    }\r\n\r\n    _filterKnowledgeSkills(data: SR5ActorSheetData) {\r\n        // Knowledge skill have separate sub-categories.\r\n        Object.keys(SR5.knowledgeSkillCategories).forEach((category) => {\r\n            if (!data.data.skills.knowledge.hasOwnProperty(category)) {\r\n                console.warn(`Knowledge Skill doesn't provide configured category ${category}`);\r\n                return;\r\n            }\r\n            data.data.skills.knowledge[category].value = this._filterSkills(data, data.data.skills.knowledge[category].value);\r\n        });\r\n    }\r\n\r\n    _filterLanguageSkills(data: SR5ActorSheetData) {\r\n        // Language Skills have no sub-categories.\r\n        data.data.skills.language.value = this._filterSkills(data, data.data.skills.language.value);\r\n    }\r\n\r\n    _filterSkills(data: SR5ActorSheetData, skills: Skills) {\r\n        const filteredSkills = {};\r\n        for (let [key, skill] of Object.entries(skills)) {\r\n            if (this._showSkill(key, skill, data)) {\r\n                filteredSkills[key] = skill;\r\n            }\r\n        }\r\n\r\n        return Helpers.sortSkills(filteredSkills);\r\n    }\r\n\r\n    _showSkill(key, skill, data) {\r\n        if (this._showMagicSkills(key, skill, data)) {\r\n            return true;\r\n        }\r\n        if (this._showResonanceSkills(key, skill, data)) {\r\n            return true;\r\n        }\r\n\r\n        return this._showGeneralSkill(key, skill);\r\n    }\r\n\r\n    _isSkillFiltered(skillId, skill) {\r\n        // a newly created skill shouldn't be filtered, no matter what.\r\n        // Therefore disqualify empty skill labels/names from filtering and always show them.\r\n        const isFilterable = this._getSkillLabelOrName(skill).length > 0;\r\n        const isHiddenForText = !this._doesSkillContainText(skillId, skill, this._filters.skills);\r\n        const isHiddenForUntrained = !this._filters.showUntrainedSkills && skill.value === 0;\r\n\r\n        return !(isFilterable && (isHiddenForUntrained || isHiddenForText));\r\n    }\r\n\r\n    _showGeneralSkill(skillId, skill: SkillField) {\r\n        return !this._isSkillMagic(skillId, skill) && !this._isSkillResonance(skill) && this._isSkillFiltered(skillId, skill);\r\n    }\r\n\r\n    _showMagicSkills(skillId, skill: SkillField, data: SR5ActorSheetData) {\r\n        return this._isSkillMagic(skillId, skill) && data.data.special === 'magic' && this._isSkillFiltered(skillId, skill);\r\n    }\r\n\r\n    _showResonanceSkills(skillId, skill: SkillField, data: SR5ActorSheetData) {\r\n        return this._isSkillResonance(skill) && data.data.special === 'resonance' && this._isSkillFiltered(skillId, skill);\r\n    }\r\n\r\n    _prepareItems(data) {\r\n        const inventory = {};\r\n\r\n        // All acting entities should be allowed to carry some protection!\r\n        inventory['weapon'] = {\r\n            label: game.i18n.localize('SR5.ItemTypes.Weapon'),\r\n            items: [],\r\n            dataset: {\r\n                type: 'weapon',\r\n            },\r\n        };\r\n\r\n        // Critters are people to... Support your local HMHVV support groups!\r\n        if (this.actor.matchesActorTypes(['character', 'critter', 'vehicle'])) {\r\n            inventory['armor'] = {\r\n                label: game.i18n.localize('SR5.ItemTypes.Armor'),\r\n                items: [],\r\n                dataset: {\r\n                    type: 'armor',\r\n                },\r\n            };\r\n            inventory['device'] = {\r\n                label: game.i18n.localize('SR5.ItemTypes.Device'),\r\n                items: [],\r\n                dataset: {\r\n                    type: 'device',\r\n                },\r\n            };\r\n            inventory['equipment'] = {\r\n                label: game.i18n.localize('SR5.ItemTypes.Equipment'),\r\n                items: [],\r\n                dataset: {\r\n                    type: 'equipment',\r\n                },\r\n            };\r\n            inventory['ammo'] = {\r\n                label: game.i18n.localize('SR5.ItemTypes.Ammo'),\r\n                items: [],\r\n                dataset: {\r\n                    type: 'ammo',\r\n                },\r\n            };\r\n            inventory['cyberware'] = {\r\n                label: game.i18n.localize('SR5.ItemTypes.Cyberware'),\r\n                items: [],\r\n                dataset: {\r\n                    type: 'cyberware',\r\n                },\r\n            };\r\n            inventory['bioware'] = {\r\n                label: game.i18n.localize('SR5.ItemTypes.Bioware'),\r\n                items: [],\r\n                dataset: {\r\n                    type: 'bioware',\r\n                },\r\n            };\r\n        }\r\n\r\n        let [\r\n            items,\r\n            spells,\r\n            qualities,\r\n            adept_powers,\r\n            actions,\r\n            complex_forms,\r\n            lifestyles,\r\n            contacts,\r\n            sins,\r\n            programs,\r\n            critter_powers,\r\n            sprite_powers,\r\n        ] = data.items.reduce(\r\n            (arr, item) => {\r\n                // Duplicate to avoid later updates propagating changed item data.\r\n                // NOTE: If no duplication is done, added fields will be stored in the database on updates!\r\n                item = duplicate(item);\r\n                // Show item properties and description in the item list overviews.\r\n                const actorItem = this.actor.items.get(item._id) as SR5Item;\r\n                const chatData = actorItem.getChatData();\r\n                item.description = chatData.description;\r\n                // @ts-ignore // This is a hacky monkey patch solution to pass template data through duplicated item data.\r\n                item.properties = chatData.properties;\r\n\r\n                // TODO: isStack property isn't used elsewhere. Remove if unnecessary.\r\n                item.isStack = item.data.quantity ? item.data.quantity > 1 : false;\r\n                if (item.type === 'spell') arr[1].push(item);\r\n                else if (item.type === 'quality') arr[2].push(item);\r\n                else if (item.type === 'adept_power') arr[3].push(item);\r\n                else if (item.type === 'action') arr[4].push(item);\r\n                else if (item.type === 'complex_form') arr[5].push(item);\r\n                else if (item.type === 'lifestyle') arr[6].push(item);\r\n                else if (item.type === 'contact') arr[7].push(item);\r\n                else if (item.type === 'sin') arr[8].push(item);\r\n                else if (item.type === 'program') arr[9].push(item);\r\n                else if (item.type === 'critter_power') arr[10].push(item);\r\n                else if (item.type === 'sprite_power') arr[11].push(item);\r\n                else if (Object.keys(inventory).includes(item.type)) arr[0].push(item);\r\n                return arr;\r\n            },\r\n            [[], [], [], [], [], [], [], [], [], [], [], []],\r\n        );\r\n\r\n        const sortByName = (i1, i2) => {\r\n            if (i1.name > i2.name) return 1;\r\n            if (i1.name < i2.name) return -1;\r\n            return 0;\r\n        };\r\n        const sortByEquipped = (left, right) => {\r\n            const leftEquipped = left.data?.technology?.equipped;\r\n            const rightEquipped = right.data?.technology?.equipped;\r\n            if (leftEquipped && !rightEquipped) return -1;\r\n            if (rightEquipped && !leftEquipped) return 1;\r\n            if (left.name > right.name) return 1;\r\n            if (left.name < right.name) return -1;\r\n            return 0;\r\n        };\r\n        actions.sort(sortByName);\r\n        adept_powers.sort(sortByName);\r\n        complex_forms.sort(sortByName);\r\n        items.sort(sortByEquipped);\r\n        spells.sort(sortByName);\r\n        contacts.sort(sortByName);\r\n        lifestyles.sort(sortByName);\r\n        sins.sort(sortByName);\r\n        programs.sort(sortByEquipped);\r\n        critter_powers.sort(sortByName);\r\n        sprite_powers.sort(sortByName);\r\n\r\n        items.forEach((item) => {\r\n            inventory[item.type].items.push(item);\r\n        });\r\n\r\n        data.inventory = Object.values(inventory);\r\n        data.magic = {\r\n            spellbook: spells,\r\n            powers: adept_powers,\r\n        };\r\n        data.actions = actions;\r\n        data.complex_forms = complex_forms;\r\n        data.lifestyles = lifestyles;\r\n        data.contacts = contacts;\r\n        data.sins = sins;\r\n        data.programs = programs;\r\n        data.critter_powers = critter_powers;\r\n        data.sprite_powers = sprite_powers;\r\n\r\n        qualities.sort((a, b) => {\r\n            if (a.data.type === 'positive' && b.data.type === 'negative') return -1;\r\n            if (a.data.type === 'negative' && b.data.type === 'positive') return 1;\r\n            return a.name < b.name ? -1 : 1;\r\n        });\r\n        data.qualities = qualities;\r\n    }\r\n\r\n    /* -------------------------------------------- */\r\n\r\n    /**\r\n     * Activate event listeners using the prepared sheet HTML\r\n     * @param html The prepared HTML object ready to be rendered into the DOM\r\n     */\r\n    activateListeners(html) {\r\n        super.activateListeners(html);\r\n\r\n        html.find('.hidden').hide();\r\n\r\n        html.find('.has-desc').click((event) => {\r\n            event.preventDefault();\r\n            const item = $(event.currentTarget).parents('.list-item');\r\n            const iid = $(item).data().item;\r\n            const field = item.next();\r\n            field.toggle();\r\n            if (iid) {\r\n                if (field.is(':visible')) this._shownDesc.push(iid);\r\n                else this._shownDesc = this._shownDesc.filter((val) => val !== iid);\r\n            }\r\n        });\r\n\r\n        html.find('.skill-header').find('.item-name').click(this._onFilterUntrainedSkills.bind(this));\r\n        html.find('.skill-header').find('.skill-spec-item').click(this._onFilterUntrainedSkills.bind(this));\r\n        html.find('.skill-header').find('.rtg').click(this._onFilterUntrainedSkills.bind(this));\r\n\r\n        html.find('.cell-input-roll').click(this._onRollCellInput.bind(this));\r\n        html.find('.attribute-roll').click(this._onRollAttribute.bind(this));\r\n        html.find('.skill-roll').click(this._onRollActiveSkill.bind(this));\r\n\r\n        html.find('#filter-skills').on('input', this._onFilterSkills.bind(this));\r\n\r\n        html.find('.skill-edit').click(this._onShowEditSkill.bind(this));\r\n        html.find('.knowledge-skill-edit').click(this._onShowEditKnowledgeSkill.bind(this));\r\n        html.find('.language-skill-edit').click(this._onShowEditLanguageSkill.bind(this));\r\n        html.find('.add-knowledge').click(this._onAddKnowledgeSkill.bind(this));\r\n        html.find('.add-language').click(this._onAddLanguageSkill.bind(this));\r\n        html.find('.add-active').click(this._onAddActiveSkill.bind(this));\r\n        html.find('.remove-knowledge').click(this._onRemoveKnowledgeSkill.bind(this));\r\n        html.find('.remove-language').click(this._onRemoveLanguageSkill.bind(this));\r\n        html.find('.remove-active').click(this._onRemoveActiveSkill.bind(this));\r\n        html.find('.knowledge-skill').click(this._onRollKnowledgeSkill.bind(this));\r\n        html.find('.language-skill').click(this._onRollLanguageSkill.bind(this));\r\n\r\n        html.find('.item-roll').click(this._onRollItem.bind(this));\r\n        html.find('.item-equip-toggle').click(this._onEquipItem.bind(this));\r\n        html.find('.item-qty').change(this._onChangeQty.bind(this));\r\n        html.find('.item-rtg').change(this._onChangeRtg.bind(this));\r\n        html.find('.item-create').click(this._onItemCreate.bind(this));\r\n        html.find('.reload-ammo').click(this._onReloadAmmo.bind(this));\r\n        html.find('.matrix-att-selector').change(this._onMatrixAttributeSelected.bind(this));\r\n\r\n        html.find('.import-character').click(this._onShowImportCharacter.bind(this));\r\n\r\n        /**\r\n         * Open the PDF for an item on the actor\r\n         */\r\n        $(html)\r\n            .find('.open-source-pdf')\r\n            .on('click', async (event) => {\r\n                event.preventDefault();\r\n                const field = $(event.currentTarget).parents('.list-item');\r\n                const iid = $(field).data().itemId;\r\n                const item = this.actor.getOwnedSR5Item(iid);\r\n                if (item) {\r\n                    await item.openPdfSource();\r\n                }\r\n            });\r\n\r\n        $(html).find('.horizontal-cell-input .cell').on('click', this._onSetCellInput.bind(this));\r\n        $(html).find('.horizontal-cell-input .cell').on('contextmenu', this._onClearCellInput.bind(this));\r\n\r\n        /**\r\n         * New API to use for rolling from the actor sheet\r\n         * the clickable label needs the css class Roll\r\n         * a parent of the label needs to have the css class RollId, and then have data-roll-id set\r\n         */\r\n        $(html).find('.Roll').on('click', this._onRollFromSheet.bind(this));\r\n\r\n        // updates matrix condition monitor on the device the actor has equippe\r\n        $(html)\r\n            .find('[name=\"data.matrix.condition_monitor.value\"]')\r\n            .on('change', async (event: any) => {\r\n                event.preventDefault();\r\n                const value = Helpers.parseInputToNumber(event.currentTarget.value);\r\n                const matrixDevice = this.actor.getMatrixDevice();\r\n                if (matrixDevice && !isNaN(value)) {\r\n                    const updateData = {};\r\n                    updateData['data.technology.condition_monitor.value'] = value;\r\n                    await matrixDevice.update(updateData);\r\n                }\r\n            });\r\n\r\n        // Update Inventory Item\r\n        html.find('.item-edit').click((event) => {\r\n            event.preventDefault();\r\n            const iid = Helpers.listItemId(event);\r\n            const item = this.actor.getOwnedSR5Item(iid);\r\n            if (item) item.sheet.render(true);\r\n        });\r\n        // Delete Inventory Item\r\n        html.find('.item-delete').click(event => this.deleteOwnedItem(event));\r\n        // Drag inventory item\r\n        let handler = (ev) => this._onDragStart(ev);\r\n        html.find('.list-item').each((i, item) => {\r\n            if (item.dataset && item.dataset.itemId) {\r\n                item.setAttribute('draggable', true);\r\n                item.addEventListener('dragstart', handler, false);\r\n            }\r\n        });\r\n\r\n        html.find('.driver-remove').click(this.handleRemoveVehicleDriver.bind(this));\r\n    }\r\n\r\n    /** Handle all entity drops onto all actor sheet types.\r\n     *\r\n     * @param event\r\n     */\r\n    async _onDrop(event: DragEvent) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n\r\n        if (!event.dataTransfer) return;\r\n\r\n        const dropData = JSON.parse(event.dataTransfer.getData('text/plain'));\r\n\r\n        // Handle specific system drop events.\r\n        switch (dropData.type) {\r\n            case \"Actor\":\r\n                await this.actor.addVehicleDriver(dropData.id)\r\n                break;\r\n        }\r\n\r\n        // Handle none specific drop events.\r\n        await super._onDrop(event);\r\n    }\r\n\r\n\r\n\r\n    async deleteOwnedItem(event) {\r\n        event.preventDefault();\r\n\r\n        const userConsented = await Helpers.confirmDeletion();\r\n        if (!userConsented) return;\r\n\r\n        const iid = Helpers.listItemId(event);\r\n        await this.actor.deleteOwnedItem(iid);\r\n    }\r\n\r\n    async _onRollFromSheet(event) {\r\n        event.preventDefault();\r\n        // look for roll id data in the current line\r\n        let rollId = $(event.currentTarget).data()?.rollId;\r\n        // if that doesn't exist, look for a prent with RollId name\r\n        rollId = rollId ?? $(event.currentTarget).parent('.RollId').data().rollId;\r\n\r\n        const split = rollId.split('.');\r\n        const options = { event };\r\n        switch (split[0]) {\r\n            case 'prompt-roll':\r\n                await this.actor.promptRoll(options);\r\n                break;\r\n            case 'armor':\r\n                await this.actor.rollArmor(options);\r\n                break;\r\n            case 'fade':\r\n                await this.actor.rollFade(options);\r\n                break;\r\n            case 'drain':\r\n                await this.actor.rollDrain(options);\r\n                break;\r\n            case 'defense':\r\n                await this.actor.rollAttackDefense(options);\r\n                break;\r\n            case 'damage-resist':\r\n                await this.actor.rollSoak(options);\r\n                break;\r\n\r\n            // attribute only rolls\r\n            case 'composure':\r\n                await this.actor.rollAttributesTest('composure');\r\n                break;\r\n            case 'judge-intentions':\r\n                await this.actor.rollAttributesTest('judge_intentions');\r\n                break;\r\n            case 'lift-carry':\r\n                await this.actor.rollAttributesTest('lift_carry');\r\n                break;\r\n            case 'memory':\r\n                await this.actor.rollAttributesTest('memory');\r\n                break;\r\n\r\n            case 'vehicle-stat':\r\n                console.log('roll vehicle stat', rollId);\r\n                break;\r\n\r\n            case 'drone':\r\n                const prop = split[1]; // we expect another for \"drone\" category\r\n                switch (prop) {\r\n                    case 'perception':\r\n                        await this.actor.rollDronePerception(options);\r\n                        break;\r\n                    case 'infiltration':\r\n                        await this.actor.rollDroneInfiltration(options);\r\n                        break;\r\n                    case 'pilot-vehicle':\r\n                        await this.actor.rollPilotVehicle(options);\r\n                        break;\r\n                }\r\n                break;\r\n            // end drone\r\n\r\n            case 'attribute':\r\n                const attribute = split[1];\r\n                if (attribute) {\r\n                    await this.actor.rollAttribute(attribute, options);\r\n                }\r\n                break;\r\n            // end attribute\r\n\r\n            case 'skill':\r\n                const skillType = split[1];\r\n                switch (skillType) {\r\n                    case 'active': {\r\n                        const skillId = split[2];\r\n                        await this.actor.rollActiveSkill(skillId, options);\r\n                        break;\r\n                    }\r\n                    case 'language': {\r\n                        const skillId = split[2];\r\n                        await this.actor.rollLanguageSkill(skillId, options);\r\n                        break;\r\n                    }\r\n                    case 'knowledge': {\r\n                        const category = split[2];\r\n                        const skillId = split[3];\r\n                        await this.actor.rollKnowledgeSkill(category, skillId, options);\r\n                        break;\r\n                    }\r\n                }\r\n                break;\r\n            // end skill\r\n\r\n            case 'matrix':\r\n                const subkey = split[1];\r\n                switch (subkey) {\r\n                    case 'attribute':\r\n                        const attr = split[2];\r\n                        await this.actor.rollMatrixAttribute(attr, options);\r\n                        break;\r\n                    case 'device-rating':\r\n                        await this.actor.rollDeviceRating(options);\r\n                        break;\r\n                }\r\n\r\n                break;\r\n            // end matrix\r\n        }\r\n    }\r\n\r\n    // Setup skill name filter within getData\r\n    async _onFilterSkills(event) {\r\n        this._filters.skills = event.currentTarget.value;\r\n        await this.render();\r\n    }\r\n\r\n    // Setup untrained skill filter within getData\r\n    async _onFilterUntrainedSkills(event) {\r\n        event.preventDefault();\r\n        this._filters.showUntrainedSkills = !this._filters.showUntrainedSkills;\r\n        await this.render();\r\n    }\r\n\r\n    async _onReloadAmmo(event) {\r\n        event.preventDefault();\r\n        const iid = Helpers.listItemId(event);\r\n        const item = this.actor.getOwnedSR5Item(iid);\r\n        if (item) return item.reloadAmmo();\r\n    }\r\n\r\n    async _onMatrixAttributeSelected(event) {\r\n        if (!(\"matrix\" in this.actor.data.data)) return;\r\n\r\n        let iid = this.actor.data.data.matrix.device;\r\n        let item = this.actor.getOwnedSR5Item(iid);\r\n        if (!item) {\r\n            console.error('could not find item');\r\n            return;\r\n        }\r\n        // grab matrix attribute (sleaze, attack, etc.)\r\n        let att = event.currentTarget.dataset.att;\r\n        // grab device attribute (att1, att2, ...)\r\n        let deviceAtt = event.currentTarget.value;\r\n\r\n        // get current matrix attribute on the device\r\n        const deviceData = item.data.data as DeviceData;\r\n        let oldVal = deviceData.atts[deviceAtt].att;\r\n        let data = {\r\n            _id: iid,\r\n        };\r\n\r\n        // go through atts on device, setup matrix attributes on it\r\n        for (let i = 1; i <= 4; i++) {\r\n            let tmp = `att${i}`;\r\n            let key = `data.atts.att${i}.att`;\r\n            if (tmp === deviceAtt) {\r\n                data[key] = att;\r\n            } else if (deviceData.atts[`att${i}`].att === att) {\r\n                data[key] = oldVal;\r\n            }\r\n        }\r\n        await this.actor.updateOwnedItem(data);\r\n    }\r\n\r\n    _onItemCreate(event) {\r\n        event.preventDefault();\r\n        const type = Helpers.listItemId(event);\r\n        const itemData = {\r\n            name: `New ${type}`,\r\n            type: type,\r\n        };\r\n        return this.actor.createOwnedItem(itemData, { renderSheet: true });\r\n    }\r\n\r\n    async _onAddLanguageSkill(event) {\r\n        event.preventDefault();\r\n        const skillId = await this.actor.addLanguageSkill({ name: '' });\r\n        if (!skillId) return;\r\n\r\n        // NOTE: Causes issues with adding knowledge skills (category undefined)\r\n        // await this._showSkillEditForm(LanguageSkillEditForm, this.actor, {event}, skillId);\r\n    }\r\n\r\n    async _onRemoveLanguageSkill(event) {\r\n        event.preventDefault();\r\n\r\n        const userConsented = await Helpers.confirmDeletion();\r\n        if (!userConsented) return;\r\n\r\n        const skillId = Helpers.listItemId(event);\r\n        await this.actor.removeLanguageSkill(skillId);\r\n    }\r\n\r\n    async _onAddKnowledgeSkill(event) {\r\n        event.preventDefault();\r\n        const category = Helpers.listItemId(event);\r\n        const skillId = await this.actor.addKnowledgeSkill(category);\r\n        if (!skillId) return;\r\n\r\n        // NOTE: Causes issues with adding knowledge skills (category undefined)\r\n        // await this._showSkillEditForm(KnowledgeSkillEditForm, this.actor, {event}, skillId);\r\n    }\r\n\r\n    async _onRemoveKnowledgeSkill(event) {\r\n        event.preventDefault();\r\n\r\n        const userConsented = await Helpers.confirmDeletion();\r\n        if (!userConsented) return;\r\n\r\n        const [skillId, category] = Helpers.listItemId(event).split('.');\r\n        await this.actor.removeKnowledgeSkill(skillId, category);\r\n    }\r\n\r\n    /** Add an active skill and show the matching edit application afterwards.\r\n     *\r\n     * @param event The HTML event from which the action resulted.\r\n     */\r\n     async _onAddActiveSkill(event: Event) {\r\n        event.preventDefault();\r\n        const skillId = await this.actor.addActiveSkill();\r\n        if (!skillId) return;\r\n\r\n        await this._showSkillEditForm(SkillEditForm, this.actor, { event: event }, skillId);\r\n    }\r\n\r\n    async _onRemoveActiveSkill(event: Event) {\r\n         event.preventDefault();\r\n\r\n        const userConsented = await Helpers.confirmDeletion();\r\n        if (!userConsented) return;\r\n\r\n        const skillId = Helpers.listItemId(event);\r\n        await this.actor.removeActiveSkill(skillId);\r\n    }\r\n\r\n    async _onChangeRtg(event) {\r\n        const iid = Helpers.listItemId(event);\r\n        const item = this.actor.getOwnedSR5Item(iid);\r\n        const rtg = parseInt(event.currentTarget.value);\r\n        if (item && rtg) {\r\n            await item.update({ 'data.technology.rating': rtg });\r\n        }\r\n    }\r\n\r\n    async _onChangeQty(event) {\r\n        const iid = Helpers.listItemId(event);\r\n        const item = this.actor.getOwnedSR5Item(iid);\r\n        const qty = parseInt(event.currentTarget.value);\r\n        if (item && qty && \"technology\" in item.data.data) {\r\n            item.data.data.technology.quantity = qty;\r\n            await item.update({ 'data.technology.quantity': qty });\r\n        }\r\n    }\r\n\r\n    async _onEquipItem(event) {\r\n        event.preventDefault();\r\n        const iid = Helpers.listItemId(event);\r\n        const item = this.actor.getOwnedSR5Item(iid);\r\n        if (item) {\r\n            const newItems = [] as any[];\r\n            if (item.isDevice()) {\r\n                // Only allow one equipped device item. Unequip all other.\r\n                for (let ite of this.actor.items.filter((actorItem: SR5Item) => actorItem.isDevice())) {\r\n                    newItems.push({\r\n                        '_id': ite._id,\r\n                        'data.technology.equipped': ite._id === iid,\r\n                    });\r\n                }\r\n\r\n            } else {\r\n                // Toggle equip status.\r\n                newItems.push({\r\n                    '_id': iid,\r\n                    'data.technology.equipped': !item.isEquipped(),\r\n                });\r\n            }\r\n            // @ts-ignore // TODO: foundry-pc-type defines Entity.updateEmbeddedEntity as static but it's not.\r\n            await this.actor.updateEmbeddedEntity('OwnedItem', newItems);\r\n\r\n            this.actor.render(false);\r\n        }\r\n    }\r\n\r\n    async _onSetCellInput(event) {\r\n        const value = Number(event.currentTarget.dataset.value);\r\n        const cmId = $(event.currentTarget).closest('.horizontal-cell-input').data().id;\r\n        const data = {};\r\n        if (cmId === 'stun' || cmId === 'physical') {\r\n            const property = `data.track.${cmId}.value`;\r\n            data[property] = value;\r\n        } else if (cmId === 'edge') {\r\n            const property = `data.attributes.edge.uses`;\r\n            data[property] = value;\r\n        } else if (cmId === 'overflow') {\r\n            const property = 'data.track.physical.overflow.value';\r\n            data[property] = value;\r\n        } else if (cmId === 'matrix') {\r\n            const matrixDevice = this.actor.getMatrixDevice();\r\n            if (matrixDevice && !isNaN(value)) {\r\n                const updateData = {};\r\n                updateData['data.technology.condition_monitor.value'] = value;\r\n                await matrixDevice.update(updateData);\r\n            } else {\r\n                data['data.matrix.condition_monitor.value'] = value;\r\n            }\r\n        }\r\n        await this.actor.update(data);\r\n    }\r\n\r\n    async _onClearCellInput(event) {\r\n        const cmId = $(event.currentTarget).closest('.horizontal-cell-input').data().id;\r\n        const data = {};\r\n        if (cmId === 'stun') {\r\n            data[`data.track.stun.value`] = 0;\r\n        }\r\n        // Clearing the physical monitor should also clear the overflow.\r\n        else if (cmId === 'physical') {\r\n            data[`data.track.physical.value`] = 0;\r\n            data['data.track.physical.overflow.value'] = 0;\r\n\r\n        } else if (cmId === 'edge') {\r\n            data[`data.attributes.edge.uses`] = 0;\r\n\r\n        } else if (cmId === 'overflow') {\r\n            data['data.track.physical.overflow.value'] = 0;\r\n\r\n        } else if (cmId === 'matrix') {\r\n            const matrixDevice = this.actor.getMatrixDevice();\r\n\r\n            if (matrixDevice) {\r\n                const updateData = {};\r\n                updateData['data.technology.condition_monitor.value'] = 0;\r\n                await matrixDevice.update(updateData);\r\n\r\n            } else {\r\n                data['data.matrix.condition_monitor.value'] = 0;\r\n            }\r\n        }\r\n\r\n        await this.actor.update(data);\r\n    }\r\n\r\n    async _onRollCellInput(event) {\r\n        event.preventDefault();\r\n        let track = $(event.currentTarget).closest('.horizontal-cell-input').data().id;\r\n        if (track === 'stun' || track === 'physical') {\r\n            await this.actor.rollNaturalRecovery(track, event);\r\n        } else if (track === 'edge') {\r\n            await this.actor.rollAttribute('edge');\r\n        }\r\n    }\r\n\r\n    async _onRollItem(event) {\r\n        event.preventDefault();\r\n        const iid = Helpers.listItemId(event);\r\n        const item = this.actor.getOwnedSR5Item(iid);\r\n        if (item) {\r\n            await item.castAction(event);\r\n        }\r\n    }\r\n\r\n    async _onRollKnowledgeSkill(event) {\r\n        event.preventDefault();\r\n        const id = Helpers.listItemId(event);\r\n        const [skill, category] = id.split('.');\r\n        return this.actor.rollKnowledgeSkill(category, skill, { event: event });\r\n    }\r\n\r\n    async _onRollLanguageSkill(event) {\r\n        event.preventDefault();\r\n        const skill = Helpers.listItemId(event);\r\n        return this.actor.rollLanguageSkill(skill, { event: event });\r\n    }\r\n\r\n    async _onRollActiveSkill(event) {\r\n        event.preventDefault();\r\n        const skill = Helpers.listItemId(event);\r\n        return this.actor.rollActiveSkill(skill, { event: event });\r\n    }\r\n\r\n    async _onRollAttribute(event) {\r\n        event.preventDefault();\r\n        const attr = event.currentTarget.closest('.attribute').dataset.attribute;\r\n        return this.actor.rollAttribute(attr, { event: event });\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    _findActiveList() {\r\n        return $(this.element).find('.tab.active .scroll-area');\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    async _render(...args) {\r\n        const focusList = $(this.element).find(':focus');\r\n        const focus: any = focusList.length ? focusList[0] : null;\r\n\r\n        this._saveScrollPositions();\r\n        await super._render(...args);\r\n        this._restoreScrollPositions();\r\n\r\n        if (focus && focus.name) {\r\n            const element = this.form[focus.name];\r\n            if (element) {\r\n                element.focus();\r\n                // set the selection range on the focus formed from before (keeps track of cursor in input)\r\n                element.setSelectionRange && element.setSelectionRange(focus.selectionStart, focus.selectionEnd);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    _restoreScrollPositions() {\r\n        const activeList = this._findActiveList();\r\n        if (activeList.length && this._scroll != null) {\r\n            activeList.prop('scrollTop', this._scroll);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    _saveScrollPositions() {\r\n        const activeList = this._findActiveList();\r\n        if (activeList.length) {\r\n            this._scroll = activeList.prop('scrollTop');\r\n        }\r\n    }\r\n\r\n    async _closeOpenSkillApp() {\r\n        if (globalSkillAppId !== -1) {\r\n            if (ui.windows[globalSkillAppId]) {\r\n                await ui.windows[globalSkillAppId].close();\r\n            }\r\n            globalSkillAppId = -1;\r\n        }\r\n    }\r\n\r\n    /** Keep track of each SkillEditForm instance and close before opening another.\r\n     *\r\n     * @param skillEditFormImplementation Any extending class! of SkillEditForm\r\n     * @param actor\r\n     * @param options\r\n     * @param args Collect arguments of the different renderWithSkill implementations.\r\n     */\r\n    async _showSkillEditForm(skillEditFormImplementation, actor: SR5Actor, options: object, ...args) {\r\n        await this._closeOpenSkillApp();\r\n\r\n        const skillEditForm = new skillEditFormImplementation(actor, options, ...args);\r\n        globalSkillAppId = skillEditForm.appId;\r\n        await skillEditForm.render(true);\r\n    }\r\n\r\n    _onShowEditKnowledgeSkill(event) {\r\n        event.preventDefault();\r\n        const [skill, category] = Helpers.listItemId(event).split('.');\r\n\r\n        this._showSkillEditForm(\r\n            KnowledgeSkillEditForm,\r\n            this.actor,\r\n            {\r\n                event: event,\r\n            },\r\n            skill,\r\n            category,\r\n        );\r\n    }\r\n\r\n    async _onShowEditLanguageSkill(event) {\r\n        event.preventDefault();\r\n        const skill = Helpers.listItemId(event);\r\n        // new LanguageSkillEditForm(this.actor, skill, { event: event }).render(true);\r\n        await this._showSkillEditForm(LanguageSkillEditForm, this.actor, { event: event }, skill);\r\n    }\r\n\r\n    async _onShowEditSkill(event) {\r\n        event.preventDefault();\r\n        const skill = Helpers.listItemId(event);\r\n        // new SkillEditForm(this.actor, skill, { event: event }).render(true);\r\n        await this._showSkillEditForm(SkillEditForm, this.actor, { event: event }, skill);\r\n    }\r\n\r\n    _onShowImportCharacter(event) {\r\n        event.preventDefault();\r\n        const options = {\r\n            name: 'chummer-import',\r\n            title: 'Chummer Import',\r\n        };\r\n        new ChummerImportForm(this.actor, options).render(true);\r\n    }\r\n\r\n    async handleRemoveVehicleDriver(event) {\r\n        event.preventDefault();\r\n        await this.actor.removeVehicleDriver();\r\n    }\r\n}\r\n","import SkillField = Shadowrun.SkillField;\r\nimport {SkillRules} from \"./SkillRules\";\r\nimport {PartsList} from \"../parts/PartsList\";\r\nimport {FLAGS, SYSTEM_NAME} from \"../constants\";\r\n\r\nexport class SkillFlow {\r\n    /**\r\n     * Handle everything around how a skill should be defaulted\r\n     * @param skill\r\n     * @param parts\r\n     */\r\n    static handleDefaulting(skill: SkillField, parts: PartsList<number>) {\r\n        if (!SkillRules.mustDefaultToRoll(skill)) return;\r\n\r\n        if (!SkillFlow.allowDefaultingRoll(skill)) {\r\n            ui.notifications.warn(game.i18n.localize('SR5.Warnings.SkillCantBeDefault'));\r\n            return;\r\n        }\r\n\r\n        SkillRules.addDefaultingPart(parts);\r\n    }\r\n\r\n    /**\r\n     * Check if either the system settings or skill configuration allow for a skill to be defaulted.\r\n     * @param skill\r\n     * @return true will allow a role on the skill that needs defaulting.\r\n     */\r\n    static allowDefaultingRoll(skill: SkillField): boolean {\r\n        // Check if settings allow rolls of skills that otherwise would need to be defaulted.\r\n        const allowUnimproviseable = game.settings.get(SYSTEM_NAME, FLAGS.OnlyAllowRollOnDefaultableSkills) === false;\r\n        if (allowUnimproviseable)\r\n            return true;\r\n\r\n        return SkillRules.allowDefaultingRoll(skill);\r\n    }\r\n\r\n    static allowRoll(skill: SkillField): boolean {\r\n        if (SkillRules.mustDefaultToRoll(skill) && SkillFlow.allowDefaultingRoll(skill)) {\r\n            return true;\r\n        }\r\n        return SkillRules.allowRoll(skill);\r\n    }\r\n}","import SkillField = Shadowrun.SkillField;\r\nimport {PartsList} from \"../parts/PartsList\";\r\nimport {SR5} from \"../config\";\r\nimport {SR} from \"../constants\";\r\n\r\nexport class SkillRules {\r\n\r\n    static mustDefaultToRoll(skill: SkillField): boolean {\r\n        return skill.base === 0;\r\n    }\r\n    /**\r\n     * Allow defaulting a skill role.\r\n     * @PDF SR5#130\r\n     * @param skill Check for this skills ability to be defaulted.\r\n     * @return true will allow for a SuccessTest / role to proceed.\r\n     */\r\n    static allowDefaultingRoll(skill: SkillField): boolean {\r\n        // Check for skill defaulting at the base, since modifiers or bonus can cause a positive pool, while\r\n        // still defaulting.\r\n        return skill.canDefault;\r\n    }\r\n\r\n    /**\r\n     * Allow a skill role.\r\n     * @PDF SR5#130\r\n     * @param skill Check for this skills ability to be rolled.\r\n     * @return true will allow for a SuccessTest / role to proceed.\r\n     */\r\n    static allowRoll(skill: SkillField): boolean {\r\n        return !SkillRules.mustDefaultToRoll(skill) || SkillRules.allowDefaultingRoll(skill);\r\n    }\r\n\r\n    /**\r\n     * Add the defaulting modifier part to a parts list\r\n     * @param parts Should be a PartsList involved with skills.\r\n     */\r\n    static addDefaultingPart(parts: PartsList<number>) {\r\n        parts.addUniquePart('SR5.Defaulting', SkillRules.getDefaultingModifier());\r\n    }\r\n\r\n    static getDefaultingModifier(): number {\r\n        return SR.skill.DEFAULTING_MODIFIER;\r\n    }\r\n}","import {ShadowrunRoll, ShadowrunRoller} from '../rolls/ShadowrunRoller';\r\nimport {SR5Actor} from \"./SR5Actor\";\r\nimport {SoakRules} from \"./SoakRules\";\r\nimport { Helpers } from '../helpers';\r\nimport SoakRollOptions = Shadowrun.SoakRollOptions;\r\nimport ModList = Shadowrun.ModList;\r\nimport {createRollChatMessage} from \"../chat\";\r\nimport DamageData = Shadowrun.DamageData;\r\nimport DamageElement = Shadowrun.DamageElement;\r\nimport DamageType = Shadowrun.DamageType;\r\nimport {PartsList} from \"../parts/PartsList\";\r\nimport {DefaultValues} from \"../dataTemplates\";\r\nimport { ShadowrunActorDialogs } from '../apps/dialogs/ShadowrunActorDialogs';\r\n\r\nexport class SoakFlow {\r\n\r\n    /**\r\n     * Runs the soak flow with user interaction\r\n     * @param actor The actor doing the soaking\r\n     * @param soakRollOptions Information about the incoming damage (if it is already known)\r\n     * @param partsProps Optional modifiers for the soak test\r\n     */\r\n    async runSoakTest(actor: SR5Actor, soakRollOptions: SoakRollOptions, partsProps: ModList<number> = []): Promise<ShadowrunRoll|undefined> {\r\n        const initialDamageData = soakRollOptions.damage ? soakRollOptions.damage : DefaultValues.damageData();\r\n        const previewSoakDefenseParts = new PartsList<number>(duplicate(partsProps));\r\n        SoakRules.applyAllSoakParts(previewSoakDefenseParts, actor, initialDamageData);\r\n\r\n        // Ask the user for the damage data / update the incoming damage data \r\n        const damageDataOrUndef = await this.promptDamageData(soakRollOptions, previewSoakDefenseParts); \r\n        if (!damageDataOrUndef) {\r\n            return;\r\n        } \r\n\r\n        const damageData = damageDataOrUndef;\r\n        const finalSoakDefenseParts = new PartsList<number>(duplicate(partsProps));\r\n        SoakRules.applyAllSoakParts(finalSoakDefenseParts, actor, damageData); \r\n\r\n        // Query user for roll options and do the actual soak test.\r\n        const title = game.i18n.localize('SR5.SoakTest');\r\n        const roll = await ShadowrunRoller.advancedRoll({\r\n            event: soakRollOptions?.event,\r\n            extended: false,\r\n            actor,\r\n            parts: finalSoakDefenseParts.list,\r\n            title,\r\n            wounds: false,\r\n            hideRollMessage: true\r\n        });\r\n\r\n        if (!roll) return;\r\n\r\n        // Modify damage and reduce damage by net hits and show result\r\n        const incoming = duplicate(damageData);\r\n        let modified = SoakRules.modifyDamageType(incoming, actor);\r\n        modified = SoakRules.reduceDamage(modified, roll.hits).modified;\r\n        const incAndModDamage = {incoming, modified};\r\n\r\n        await createRollChatMessage({title, roll, actor, damage: incAndModDamage});\r\n\r\n        return roll;\r\n    }\r\n\r\n    private async promptDamageData(soakRollOptions: SoakRollOptions, soakDefenseParts: PartsList<number>) \r\n        : Promise<DamageData | undefined> {\r\n\r\n        // Ask user for incoming damage, ap and element\r\n        const damageDataDialog = await ShadowrunActorDialogs.createSoakDialog(soakRollOptions, soakDefenseParts);\r\n        const userData = await damageDataDialog.select();\r\n        if (damageDataDialog.canceled) return;\r\n\r\n        // Update damage with the user input\r\n        const initialDamageData: DamageData = soakRollOptions?.damage\r\n                ? soakRollOptions.damage\r\n                : DefaultValues.damageData();\r\n        \r\n        return this.updateDamageWithUserData(initialDamageData, userData.incomingDamage, userData.damageType, userData.ap, userData.element);\r\n    }\r\n\r\n\r\n    private updateDamageWithUserData(initialDamageData: DamageData, incomingDamage : number, damageType : DamageType, ap: number, element: string) {\r\n        const damageData: DamageData = duplicate(initialDamageData);\r\n\r\n        // Update damage data, diff changes instead of simply replacing\r\n        const totalDamage = Helpers.calcTotal(damageData);\r\n        if (totalDamage !== incomingDamage) {\r\n            const diff = incomingDamage - totalDamage;\r\n            damageData.mod = PartsList.AddUniquePart(damageData.mod, 'SR5.UserInput', diff);\r\n            damageData.value = Helpers.calcTotal(damageData);\r\n        }\r\n\r\n        if (initialDamageData.type.base !== damageType) {\r\n            damageData.type.base = damageType;\r\n            damageData.type.value = damageType;\r\n        }\r\n\r\n        // Update ap, diff changes instead of simply replacing\r\n        const totalAp = Helpers.calcTotal(damageData.ap);\r\n        if (totalAp !== ap) {\r\n            const diff = ap - totalAp;\r\n            damageData.ap.mod = PartsList.AddUniquePart(damageData.ap.mod, 'SR5.UserInput', diff);\r\n            damageData.ap.value = Helpers.calcTotal(damageData.ap);\r\n        }\r\n\r\n        if (element) {\r\n            damageData.element.value = element as DamageElement;\r\n        }\r\n\r\n        return damageData;\r\n    }\r\n}","import { SR5Actor } from './SR5Actor';\r\nimport { SR5 } from '../config';\r\nimport { Helpers } from '../helpers';\r\nimport { PartsList } from '../parts/PartsList';\r\nimport DamageData = Shadowrun.DamageData;\r\nimport ActorArmorData = Shadowrun.ActorArmorData;\r\nimport ModifiedDamageData = Shadowrun.ModifiedDamageData;\r\nimport ModifiableValue = Shadowrun.ModifiableValue;\r\nimport CharacterActorData = Shadowrun.CharacterActorData;\r\n\r\n/**\r\n * Soaking rules for actors\r\n */\r\nexport class SoakRules {\r\n\r\n    /**\r\n     * Determines the soak parts based on the damage and the actor type\r\n     * @param soakParts List of (potentially prefilled) soak parts\r\n     * @param actor The actor affected by the damage\r\n     * @param damageData The damage\r\n     */\r\n    static applyAllSoakParts(soakParts: PartsList<number>, actor: SR5Actor, damageData: DamageData) {\r\n        if (damageData.type.base !== 'matrix') {\r\n            SoakRules.applyMundaneAttackSoakParts(soakParts, actor, damageData);\r\n        } else {\r\n            SoakRules.applyMatrixSoakParts(soakParts, actor);\r\n        }\r\n    }\r\n\r\n    private static applyMundaneAttackSoakParts(soakParts: PartsList<number>, actor: SR5Actor, damageData: DamageData) {\r\n        SoakRules.applyBodyAndArmorParts(soakParts, actor);\r\n\r\n        const armor = actor.getArmor();\r\n        SoakRules.applyArmorPenetration(soakParts, armor, damageData);\r\n        SoakRules.applyElementalArmor(soakParts, armor, damageData.element.base);\r\n    }\r\n\r\n    private static applyBodyAndArmorParts(soakParts: PartsList<number>, actor: SR5Actor) {\r\n        const body = actor.findAttribute('body');\r\n        if (body) {\r\n            soakParts.addUniquePart(body.label || 'SR5.Body', body.value);\r\n        }\r\n\r\n        const mod = actor.getModifier('soak');\r\n        if (mod) {\r\n            soakParts.addUniquePart('SR5.Bonus', mod);\r\n        }\r\n\r\n        actor._addArmorParts(soakParts);\r\n    }\r\n\r\n    private static applyArmorPenetration(soakParts: PartsList<number>, armor: ActorArmorData, damageData: DamageData) {\r\n        const bonusArmor = armor[damageData.element.value] ?? 0;\r\n        const totalArmor = armor.value + bonusArmor;\r\n        const ap = Helpers.calcTotal(damageData.ap);\r\n\r\n        soakParts.addUniquePart('SR5.AP', Math.max(ap, -totalArmor));\r\n    }\r\n\r\n    private static applyElementalArmor(soakParts: PartsList<number>, armor: ActorArmorData, element: string) {\r\n        const bonusArmor = armor[element] ?? 0;\r\n        if (bonusArmor) {\r\n            soakParts.addUniquePart(CONFIG.SR5.elementTypes[element], bonusArmor);\r\n        }\r\n    }\r\n\r\n    private static applyMatrixSoakParts(soakParts: PartsList<number>, actor: SR5Actor) {\r\n        const actorData = actor.data.data as CharacterActorData;\r\n\r\n        // All actors have the same soak rules when they are not active in the matrix\r\n        // TODO Technomancer and Sprites special rules?\r\n        if (actorData.initiative.perception === 'matrix') {\r\n            if (actor.isVehicle()){\r\n                // Vehicles can have a matrix initiative but do not take biofeedback\r\n                SoakRules.applyRatingAndFirewallParts(actorData, soakParts);     \r\n            }\r\n            else {\r\n                SoakRules.applyBiofeedbackParts(soakParts, actor, actorData);\r\n            }\r\n        }\r\n\r\n        else {\r\n            SoakRules.applyRatingAndFirewallParts(actorData, soakParts);       \r\n        }\r\n    }\r\n\r\n    private static applyBiofeedbackParts(soakParts: PartsList<number>, actor: SR5Actor, actorData: CharacterActorData) {\r\n        SoakRules.addUniquePart(soakParts, actor.getAttribute('willpower'), SR5.attributes.willpower);\r\n\r\n        if (!actorData.matrix) {\r\n            return;\r\n        }\r\n\r\n        SoakRules.addUniquePart(soakParts, actorData.matrix.firewall, SR5.matrixAttributes.firewall);\r\n    }\r\n\r\n    private static applyRatingAndFirewallParts(actorData: CharacterActorData, soakParts: PartsList<number>) {\r\n        if (!actorData.matrix) {\r\n            return;\r\n        }\r\n\r\n        const deviceRating = actorData.matrix.rating;\r\n        if (deviceRating) {\r\n            soakParts.addUniquePart('SR5.Labels.ActorSheet.DeviceRating', deviceRating);\r\n        }\r\n\r\n        this.addUniquePart(soakParts, actorData.matrix.firewall, SR5.matrixAttributes.firewall);\r\n    }\r\n\r\n    private static addUniquePart(partsList: PartsList<number>, modifiableValue : ModifiableValue, label : string) {\r\n        const totalValue = Helpers.calcTotal(modifiableValue);\r\n        partsList.addUniquePart(label, totalValue);\r\n    }\r\n\r\n    /**\r\n     * Reduces the damage value\r\n     * At the moment just reduces the damage by the number of hits.\r\n     * @param damageData The incoming damage\r\n     * @param hits The number of hits on the soak tests\r\n     * @returns The updated damage data\r\n     */\r\n    static reduceDamage(damageData: DamageData, hits: number): ModifiedDamageData {\r\n        return Helpers.reduceDamageByHits(damageData, hits, 'SR5.SoakTest');\r\n    }\r\n\r\n    /**\r\n     * Changes the damage type based on the incoming damage type and the actor state (armor, matrix perception..)\r\n     * @param damage The incoming damage\r\n     * @param actor The actor affected by the damage \r\n     * @returns The updated damage data \r\n     */\r\n    static modifyDamageType(damage: DamageData, actor : SR5Actor) : DamageData {\r\n        // Careful, order is very important\r\n        const updatedDamage = SoakRules.modifyPhysicalDamageForArmor(damage, actor);\r\n        return SoakRules.modifyMatrixDamageForBiofeedback(updatedDamage, actor);\r\n    }\r\n\r\n    /**\r\n     * Turns physical damage to stun damage based on the damage and armor\r\n     * @param damage The incoming damage\r\n     * @param actor The actor affected by the damage \r\n     * @returns The updated damage data \r\n     */\r\n     static modifyPhysicalDamageForArmor(damage: DamageData, actor : SR5Actor): DamageData {\r\n        const updatedDamage = duplicate(damage);\r\n\r\n        if (damage.type.value === 'physical') {\r\n            // Physical damage is only transformed for some actors (e.g. not vehicles) \r\n            if (!actor.isCharacter() && !actor.isSpirit() && !actor.isCritter()) {\r\n                return updatedDamage;\r\n            }\r\n\r\n            const modifiedArmor = actor.getModifiedArmor(damage);\r\n            if (modifiedArmor) {\r\n                const armorWillChangeDamageType = modifiedArmor.value > damage.value;\r\n\r\n                if (armorWillChangeDamageType) {\r\n                    updatedDamage.type.value = 'stun';\r\n                }\r\n            }\r\n        }\r\n\r\n        return updatedDamage;\r\n    }\r\n\r\n    /**\r\n     * Turns matrix damage to biofeedback based on the actor state\r\n     * @param damage The incoming damage\r\n     * @param actor The actor affected by the damage \r\n     * @returns The updated damage data \r\n     */\r\n    static modifyMatrixDamageForBiofeedback(damage: DamageData, actor : SR5Actor): DamageData {\r\n        const updatedDamage = duplicate(damage);\r\n\r\n        if (damage.type.value === 'matrix') {\r\n            const actorData = actor.data.data as CharacterActorData;\r\n\r\n            // Only characters can receive biofeedback damage at the moment. \r\n            // TODO Technomancer and Sprites special rules?\r\n            if (!actor.isCharacter()) {\r\n                return updatedDamage;\r\n            }\r\n    \r\n            if (actorData.initiative.perception === 'matrix') {\r\n                if (actorData.matrix.hot_sim) {\r\n                    updatedDamage.type.value = 'physical';\r\n                }\r\n                else {\r\n                    updatedDamage.type.value = 'stun';    \r\n                }\r\n            }\r\n        }\r\n\r\n        return updatedDamage;\r\n    }\r\n}","import SR5ActorType = Shadowrun.SR5ActorType;\r\nimport { CharacterPrep } from './CharacterPrep';\r\nimport { SpiritPrep } from './SpiritPrep';\r\nimport { SpritePrep } from './SpritePrep';\r\nimport { VehiclePrep } from './VehiclePrep';\r\nimport { CritterPrep } from './CritterPrep';\r\n\r\nexport class ActorPrepFactory {\r\n    static Create(data: SR5ActorType) {\r\n        if (data.type === 'character') {\r\n            return new CharacterPrep(data);\r\n        } else if (data.type === 'spirit') {\r\n            return new SpiritPrep(data);\r\n        } else if (data.type === 'sprite') {\r\n            return new SpritePrep(data);\r\n        } else if (data.type === 'vehicle') {\r\n            return new VehiclePrep(data);\r\n        } else if (data.type === 'critter') {\r\n              return new CritterPrep(data);\r\n        }\r\n    }\r\n}\r\n","import SR5ActorType = Shadowrun.SR5ActorType;\r\nimport { SR5ItemDataWrapper } from '../../item/SR5ItemDataWrapper';\r\nimport SR5ActorData = Shadowrun.SR5ActorData;\r\n\r\nexport abstract class BaseActorPrep<ActorType extends SR5ActorType, DataType extends SR5ActorData> {\r\n    data: DataType;\r\n    items: SR5ItemDataWrapper[];\r\n\r\n    constructor(data: ActorType) {\r\n        // @ts-ignore\r\n        this.data = data.data;\r\n        // @ts-ignore\r\n        this.items = data.items.map((item) => new SR5ItemDataWrapper(item));\r\n    }\r\n\r\n    // override with the correct order and functions to prepare the actor\r\n    abstract prepare(): void;\r\n}\r\n","import { BaseActorPrep } from './BaseActorPrep';\r\nimport { InitiativePrep } from './functions/InitiativePrep';\r\nimport { ModifiersPrep } from './functions/ModifiersPrep';\r\nimport { MatrixPrep } from './functions/MatrixPrep';\r\nimport { ItemPrep } from './functions/ItemPrep';\r\nimport { SkillsPrep } from './functions/SkillsPrep';\r\nimport { LimitsPrep } from './functions/LimitsPrep';\r\nimport { ConditionMonitorsPrep } from './functions/ConditionMonitorsPrep';\r\nimport { MovementPrep } from './functions/MovementPrep';\r\nimport { WoundsPrep } from './functions/WoundsPrep';\r\nimport { AttributesPrep } from './functions/AttributesPrep';\r\nimport { NPCPrep } from './functions/NPCPrep';\r\nimport SR5CharacterType = Shadowrun.SR5CharacterType;\r\nimport CharacterActorData = Shadowrun.CharacterActorData;\r\n\r\nexport class CharacterPrep extends BaseActorPrep<SR5CharacterType, CharacterActorData> {\r\n    prepare() {\r\n        ModifiersPrep.prepareModifiers(this.data);\r\n        ModifiersPrep.clearAttributeMods(this.data);\r\n\r\n        ItemPrep.prepareArmor(this.data, this.items);\r\n        ItemPrep.prepareBodyware(this.data, this.items);\r\n\r\n        SkillsPrep.prepareSkills(this.data);\r\n        AttributesPrep.prepareAttributes(this.data);\r\n\r\n        // NPCPrep is reliant to be called after AttributesPrep.\r\n        NPCPrep.prepareNPCData(this.data);\r\n\r\n        LimitsPrep.prepareLimitBaseFromAttributes(this.data);\r\n        LimitsPrep.prepareLimits(this.data);\r\n\r\n        MatrixPrep.prepareMatrix(this.data, this.items);\r\n        MatrixPrep.prepareMatrixToLimitsAndAttributes(this.data);\r\n\r\n        if (this.data.is_npc && this.data.npc.is_grunt) {\r\n            ConditionMonitorsPrep.prepareGrunt(this.data);\r\n        } else {\r\n            ConditionMonitorsPrep.preparePhysical(this.data);\r\n            ConditionMonitorsPrep.prepareStun(this.data);\r\n        }\r\n\r\n        MovementPrep.prepareMovement(this.data);\r\n        WoundsPrep.prepareWounds(this.data);\r\n\r\n        InitiativePrep.prepareMeatspaceInit(this.data);\r\n        InitiativePrep.prepareAstralInit(this.data);\r\n        InitiativePrep.prepareMatrixInit(this.data);\r\n        InitiativePrep.prepareCurrentInitiative(this.data);\r\n    }\r\n}\r\n","import { BaseActorPrep } from './BaseActorPrep';\r\nimport { InitiativePrep } from './functions/InitiativePrep';\r\nimport { ModifiersPrep } from './functions/ModifiersPrep';\r\nimport { MatrixPrep } from './functions/MatrixPrep';\r\nimport { ItemPrep } from './functions/ItemPrep';\r\nimport { SkillsPrep } from './functions/SkillsPrep';\r\nimport { LimitsPrep } from './functions/LimitsPrep';\r\nimport { ConditionMonitorsPrep } from './functions/ConditionMonitorsPrep';\r\nimport { MovementPrep } from './functions/MovementPrep';\r\nimport { WoundsPrep } from './functions/WoundsPrep';\r\nimport { AttributesPrep } from './functions/AttributesPrep';\r\nimport SR5CritterType = Shadowrun.SR5CritterType;\r\nimport CritterActorData = Shadowrun.CritterActorData;\r\nimport SR5ActorData = Shadowrun.SR5ActorData;\r\nimport TwoTrackActorData = Shadowrun.TwoTrackActorData;\r\nimport {CharacterPrep} from \"./CharacterPrep\";\r\n\r\nexport class CritterPrep extends BaseActorPrep<SR5CritterType, CritterActorData> {\r\n    prepare() {\r\n        ModifiersPrep.prepareModifiers(this.data);\r\n        ModifiersPrep.clearAttributeMods(this.data);\r\n\r\n        ItemPrep.prepareArmor(this.data, this.items);\r\n        ItemPrep.prepareBodyware(this.data, this.items);\r\n\r\n        SkillsPrep.prepareSkills(this.data);\r\n        AttributesPrep.prepareAttributes(this.data);\r\n        LimitsPrep.prepareLimitBaseFromAttributes(this.data);\r\n        LimitsPrep.prepareLimits(this.data);\r\n\r\n        MatrixPrep.prepareMatrix(this.data, this.items);\r\n        MatrixPrep.prepareMatrixToLimitsAndAttributes(this.data);\r\n\r\n        ConditionMonitorsPrep.preparePhysical(this.data);\r\n        ConditionMonitorsPrep.prepareStun(this.data);\r\n\r\n        MovementPrep.prepareMovement(this.data);\r\n        WoundsPrep.prepareWounds(this.data);\r\n\r\n        InitiativePrep.prepareMeatspaceInit(this.data);\r\n        InitiativePrep.prepareAstralInit(this.data);\r\n        InitiativePrep.prepareMatrixInit(this.data);\r\n        InitiativePrep.prepareCurrentInitiative(this.data);\r\n    }\r\n}\r\n","import { BaseActorPrep } from './BaseActorPrep';\r\nimport SpiritActorData = Shadowrun.SpiritActorData;\r\nimport SR5SpiritType = Shadowrun.SR5SpiritType;\r\nimport { SkillsPrep } from './functions/SkillsPrep';\r\nimport { AttributesPrep } from './functions/AttributesPrep';\r\nimport { LimitsPrep } from './functions/LimitsPrep';\r\nimport { ConditionMonitorsPrep } from './functions/ConditionMonitorsPrep';\r\nimport { MovementPrep } from './functions/MovementPrep';\r\nimport { WoundsPrep } from './functions/WoundsPrep';\r\nimport { ModifiersPrep } from './functions/ModifiersPrep';\r\nimport { InitiativePrep } from './functions/InitiativePrep';\r\nimport SpiritType = Shadowrun.SpiritType;\r\nimport { Helpers } from '../../helpers';\r\nimport {PartsList} from \"../../parts/PartsList\";\r\n\r\nexport class SpiritPrep extends BaseActorPrep<SR5SpiritType, SpiritActorData> {\r\n    prepare() {\r\n        ModifiersPrep.prepareModifiers(this.data);\r\n        ModifiersPrep.clearAttributeMods(this.data);\r\n\r\n        SpiritPrep.prepareSpiritBaseData(this.data);\r\n\r\n        SkillsPrep.prepareSkills(this.data);\r\n        AttributesPrep.prepareAttributes(this.data);\r\n        LimitsPrep.prepareLimitBaseFromAttributes(this.data);\r\n        LimitsPrep.prepareLimits(this.data);\r\n\r\n        SpiritPrep.prepareSpiritArmor(this.data);\r\n\r\n        ConditionMonitorsPrep.prepareStun(this.data);\r\n        ConditionMonitorsPrep.preparePhysical(this.data);\r\n\r\n        MovementPrep.prepareMovement(this.data);\r\n        WoundsPrep.prepareWounds(this.data);\r\n\r\n        InitiativePrep.prepareCurrentInitiative(this.data);\r\n\r\n        this.data.special = 'magic';\r\n    }\r\n\r\n    static prepareSpiritBaseData(data: SpiritActorData) {\r\n        const overrides = this.getSpiritStatModifiers(data.spiritType);\r\n\r\n        if (overrides) {\r\n            const { attributes, skills, initiative, force, modifiers } = data;\r\n\r\n            // set the base of attributes to the provided value\r\n            for (const [attId, value] of Object.entries(overrides.attributes)) {\r\n                if (attributes[attId] !== undefined) {\r\n                    attributes[attId].base = value + force;\r\n                }\r\n            }\r\n\r\n            for (const [skillId, skill] of Object.entries(skills.active)) {\r\n                skill.base = overrides.skills.find((s) => s === skillId) ? force : 0;\r\n            }\r\n\r\n            // prepare initiative data\r\n            initiative.meatspace.base.base = force * 2 + overrides.init + Number(modifiers['astral_initiative']);\r\n            initiative.meatspace.base.mod = PartsList.AddUniquePart(initiative.meatspace.base.mod, \"SR5.Bonus\", Number(modifiers['meat_initiative']));\r\n            initiative.meatspace.dice.base = 2;\r\n            initiative.meatspace.dice.mod = PartsList.AddUniquePart(initiative.meatspace.dice.mod, \"SR5.Bonus\", Number(modifiers['meat_initiative_dice']));\r\n\r\n            initiative.astral.base.base = force * 2 + overrides.astral_init + Number(modifiers['astral_initiative_dice']);\r\n            initiative.astral.base.mod = PartsList.AddUniquePart(initiative.astral.base.mod, \"SR5.Bonus\", Number(modifiers['astral_initiative']));\r\n            initiative.astral.dice.base = 3;\r\n            initiative.astral.dice.mod = PartsList.AddUniquePart(initiative.astral.dice.mod, \"SR5.Bonus\", Number(modifiers['astral_initiative_dice']));\r\n        }\r\n    }\r\n\r\n    static prepareSpiritArmor(data: SpiritActorData) {\r\n        const { armor, attributes } = data;\r\n        armor.base = (attributes.essence.value ?? 0) * 2;\r\n        armor.value = Helpers.calcTotal(armor);\r\n    }\r\n\r\n    /**\r\n     * get the attribute and initiative modifiers and skills\r\n     */\r\n    static getSpiritStatModifiers(spiritType: SpiritType) {\r\n        const overrides = {\r\n            // value of 0 for attribute makes it equal to the Force\r\n            attributes: {\r\n                body: 0,\r\n                agility: 0,\r\n                reaction: 0,\r\n                strength: 0,\r\n                willpower: 0,\r\n                logic: 0,\r\n                intuition: 0,\r\n                charisma: 0,\r\n                magic: 0,\r\n                essence: 0,\r\n            },\r\n            // modifiers for after the Force x 2 calculation\r\n            init: 0,\r\n            astral_init: 0,\r\n            // skills are all set to Force\r\n            skills: [] as string[],\r\n        };\r\n        switch (spiritType) {\r\n            case 'air':\r\n                overrides.attributes.body = -2;\r\n                overrides.attributes.agility = 3;\r\n                overrides.attributes.reaction = 4;\r\n                overrides.attributes.strength = -3;\r\n                overrides.init = 4;\r\n                overrides.skills.push('assensing', 'astral_combat', 'exotic_range', 'perception', 'unarmed_combat');\r\n                break;\r\n            case 'beasts':\r\n                overrides.attributes.body = 2;\r\n                overrides.attributes.agility = 1;\r\n                overrides.attributes.strength = 2;\r\n                overrides.skills.push('assensing', 'astral_combat', 'perception', 'unarmed_combat');\r\n                break;\r\n            case 'earth':\r\n                overrides.attributes.body = 4;\r\n                overrides.attributes.agility = -2;\r\n                overrides.attributes.reaction = -1;\r\n                overrides.attributes.strength = 4;\r\n                overrides.attributes.logic = -1;\r\n                overrides.init = -1;\r\n                overrides.skills.push('assensing', 'astral_combat', 'exotic_range', 'perception', 'unarmed_combat');\r\n                break;\r\n            case 'fire':\r\n                overrides.attributes.body = 1;\r\n                overrides.attributes.agility = 2;\r\n                overrides.attributes.reaction = 3;\r\n                overrides.attributes.strength = -2;\r\n                overrides.attributes.intuition = 1;\r\n                overrides.init = 3;\r\n                overrides.skills.push('assensing', 'astral_combat', 'exotic_range', 'flight', 'perception', 'unarmed_combat');\r\n                break;\r\n            case 'guardian':\r\n                overrides.attributes.body = 1;\r\n                overrides.attributes.agility = 2;\r\n                overrides.attributes.reaction = 3;\r\n                overrides.attributes.strength = 2;\r\n                overrides.init = 1;\r\n                overrides.skills.push('assensing', 'astral_combat', 'blades', 'clubs', 'counter_spelling', 'exotic_range', 'perception', 'unarmed_combat');\r\n                break;\r\n            case 'guidance':\r\n                overrides.attributes.body = 3;\r\n                overrides.attributes.agility = -1;\r\n                overrides.attributes.reaction = 2;\r\n                overrides.attributes.strength = 1;\r\n                overrides.skills.push('arcana', 'assensing', 'astral_combat', 'counter_spelling', 'perception', 'unarmed_combat');\r\n                break;\r\n            case 'man':\r\n                overrides.attributes.body = 1;\r\n                overrides.attributes.reaction = 2;\r\n                overrides.attributes.strength = -2;\r\n                overrides.attributes.intuition = 1;\r\n                overrides.init = 2;\r\n                overrides.skills.push('assensing', 'astral_combat', 'perception', 'spellcasting', 'unarmed_combat');\r\n                break;\r\n            case 'plant':\r\n                overrides.attributes.body = 2;\r\n                overrides.attributes.agility = -1;\r\n                overrides.attributes.strength = 1;\r\n                overrides.attributes.logic = -1;\r\n                overrides.skills.push('assensing', 'astral_combat', 'perception', 'exotic_range', 'unarmed_combat');\r\n                break;\r\n            case 'task':\r\n                overrides.attributes.reaction = 2;\r\n                overrides.attributes.strength = 2;\r\n                overrides.init = 2;\r\n                overrides.skills.push('artisan', 'assensing', 'astral_combat', 'perception', 'unarmed_combat');\r\n                break;\r\n            case 'water':\r\n                overrides.attributes.agility = 1;\r\n                overrides.attributes.reaction = 2;\r\n                overrides.init = 2;\r\n                overrides.skills.push('assensing', 'astral_combat', 'exotic_range', 'perception', 'unarmed_combat');\r\n                break;\r\n\r\n            case 'toxic_air':\r\n                overrides.attributes.body = -2;\r\n                overrides.attributes.agility = 3;\r\n                overrides.attributes.reaction = 4;\r\n                overrides.attributes.strength = -3;\r\n                overrides.init = 4;\r\n                overrides.skills.push('assensing', 'astral_combat', 'exotic_range', 'perception', 'running', 'unarmed_combat');\r\n                break;\r\n            case 'toxic_beasts':\r\n                overrides.attributes.body = 2;\r\n                overrides.attributes.agility = 1;\r\n                overrides.attributes.strength = 2;\r\n                overrides.skills.push('assensing', 'astral_combat', 'exotic_range', 'gymnastics', 'perception', 'running', 'unarmed_combat');\r\n                break;\r\n            case 'toxic_earth':\r\n                overrides.attributes.body = 4;\r\n                overrides.attributes.agility = -2;\r\n                overrides.attributes.reaction = -1;\r\n                overrides.attributes.strength = 4;\r\n                overrides.attributes.logic = -1;\r\n                overrides.init = -1;\r\n                overrides.skills.push('assensing', 'astral_combat', 'exotic_range', 'perception', 'unarmed_combat');\r\n                break;\r\n            case 'toxic_fire':\r\n                overrides.attributes.body = 1;\r\n                overrides.attributes.agility = 2;\r\n                overrides.attributes.reaction = 3;\r\n                overrides.attributes.strength = -2;\r\n                overrides.attributes.intuition = 1;\r\n                overrides.init = 3;\r\n                overrides.skills.push('assensing', 'astral_combat', 'exotic_range', 'perception', 'flight', 'unarmed_combat');\r\n                break;\r\n            case 'toxic_man':\r\n                overrides.attributes.reaction = 2;\r\n                overrides.attributes.strength = -2;\r\n                overrides.attributes.intuition = 1;\r\n                overrides.init = 2;\r\n                overrides.skills.push('assensing', 'astral_combat', 'perception', 'spell_casting', 'unarmed_combat');\r\n                break;\r\n            case 'toxic_water':\r\n                overrides.attributes.body = 1;\r\n                overrides.attributes.agility = 1;\r\n                overrides.attributes.reaction = 2;\r\n                overrides.init = 2;\r\n                overrides.skills.push('assensing', 'astral_combat', 'exotic_range', 'perception', 'unarmed_combat');\r\n                break;\r\n\r\n            case 'blood':\r\n                overrides.attributes.body = 2;\r\n                overrides.attributes.agility = 2;\r\n                overrides.attributes.strength = 2;\r\n                overrides.attributes.logic = -1;\r\n                overrides.skills.push('assensing', 'astral_combat', 'perception', 'running', 'unarmed_combat');\r\n                break;\r\n\r\n            case 'muse':\r\n                overrides.attributes.agility = 3;\r\n                overrides.attributes.reaction = 2;\r\n                overrides.attributes.willpower = 1;\r\n                overrides.init = 3;\r\n                overrides.skills.push('assensing', 'astral_combat', 'con', 'gymnastics', 'intimidation', 'perception', 'unarmed_combat');\r\n                break;\r\n            case 'nightmare':\r\n                overrides.attributes.agility = 3;\r\n                overrides.attributes.reaction = 2;\r\n                overrides.attributes.willpower = 1;\r\n                overrides.attributes.intuition = 1;\r\n                overrides.attributes.charisma = 2;\r\n                overrides.init = 3;\r\n                overrides.skills.push('assensing', 'astral_combat', 'con', 'gymnastics', 'intimidation', 'perception', 'unarmed_combat');\r\n                break;\r\n            case 'shade':\r\n                overrides.attributes.agility = 3;\r\n                overrides.attributes.reaction = 2;\r\n                overrides.attributes.willpower = 1;\r\n                overrides.attributes.intuition = 1;\r\n                overrides.attributes.charisma = 2;\r\n                overrides.init = 3;\r\n                overrides.skills.push('assensing', 'astral_combat', 'con', 'gymnastics', 'intimidation', 'perception', 'unarmed_combat');\r\n                break;\r\n            case 'succubus':\r\n                overrides.attributes.agility = 3;\r\n                overrides.attributes.reaction = 2;\r\n                overrides.attributes.willpower = 1;\r\n                overrides.attributes.intuition = 1;\r\n                overrides.attributes.charisma = 2;\r\n                overrides.init = 3;\r\n                overrides.skills.push('assensing', 'astral_combat', 'con', 'gymnastics', 'intimidation', 'perception', 'unarmed_combat');\r\n                break;\r\n            case 'wraith':\r\n                overrides.attributes.agility = 3;\r\n                overrides.attributes.reaction = 2;\r\n                overrides.attributes.willpower = 1;\r\n                overrides.attributes.intuition = 1;\r\n                overrides.attributes.charisma = 2;\r\n                overrides.init = 3;\r\n                overrides.skills.push('assensing', 'astral_combat', 'con', 'gymnastics', 'intimidation', 'perception', 'unarmed_combat');\r\n                break;\r\n\r\n            case 'shedim':\r\n                overrides.attributes.reaction = 2;\r\n                overrides.attributes.strength = 1;\r\n                overrides.init = 2;\r\n                overrides.skills.push('assensing', 'astral_combat', 'perception', 'unarmed_combat');\r\n                break;\r\n            case 'master_shedim':\r\n                overrides.attributes.reaction = 2;\r\n                overrides.attributes.strength = 1;\r\n                overrides.attributes.logic = 1;\r\n                overrides.attributes.intuition = 1;\r\n                overrides.init = 3;\r\n                overrides.skills.push('assensing', 'astral_combat', 'counterspelling', 'perception', 'spellcasting', 'unarmed_combat');\r\n                break;\r\n\r\n            // insect\r\n            case 'caretaker':\r\n                overrides.attributes.agility = 1;\r\n                overrides.attributes.reaction = 1;\r\n                overrides.init = 1;\r\n                overrides.skills.push('assensing', 'astral_combat', 'leadership', 'perception', 'unarmed_combat');\r\n                break;\r\n            case 'nymph':\r\n                overrides.attributes.body = 1;\r\n                overrides.attributes.reaction = 3;\r\n                overrides.attributes.strength = 1;\r\n                overrides.init = 3;\r\n                overrides.skills.push('assensing', 'astral_combat', 'perception', 'gymnastics', 'spellcasting', 'unarmed_combat');\r\n                break;\r\n            case 'scout':\r\n                overrides.attributes.agility = 2;\r\n                overrides.attributes.reaction = 2;\r\n                overrides.init = 2;\r\n                overrides.skills.push('assensing', 'astral_combat', 'perception', 'gymnastics', 'sneaking', 'unarmed_combat');\r\n                break;\r\n            case 'soldier':\r\n                overrides.attributes.body = 3;\r\n                overrides.attributes.agility = 1;\r\n                overrides.attributes.reaction = 1;\r\n                overrides.attributes.strength = 3;\r\n                overrides.init = 1;\r\n                overrides.skills.push('assensing', 'astral_combat', 'counterspelling', 'exotic_range', 'gymnastics', 'perception', 'unarmed_combat');\r\n                break;\r\n            case 'worker':\r\n                overrides.attributes.strength = 1;\r\n                overrides.skills.push('assensing', 'astral_combat', 'perception', 'unarmed_combat');\r\n                break;\r\n            case 'queen':\r\n                overrides.attributes.body = 5;\r\n                overrides.attributes.agility = 3;\r\n                overrides.attributes.reaction = 4;\r\n                overrides.attributes.strength = 5;\r\n                overrides.attributes.willpower = 1;\r\n                overrides.attributes.logic = 1;\r\n                overrides.attributes.intuition = 1;\r\n                overrides.init = 5;\r\n                overrides.skills.push(\r\n                    'assensing',\r\n                    'astral_combat',\r\n                    'con',\r\n                    'counterspelling',\r\n                    'gymnastics',\r\n                    'leadership',\r\n                    'negotiation',\r\n                    'perception',\r\n                    'spellcasting',\r\n                    'unarmed_combat',\r\n                );\r\n                break;\r\n        }\r\n        return overrides;\r\n    }\r\n}\r\n","import { BaseActorPrep } from './BaseActorPrep';\r\nimport SR5SpriteType = Shadowrun.SR5SpriteType;\r\nimport SpriteActorData = Shadowrun.SpriteActorData;\r\nimport { SkillsPrep } from './functions/SkillsPrep';\r\nimport { ModifiersPrep } from './functions/ModifiersPrep';\r\nimport { InitiativePrep } from './functions/InitiativePrep';\r\nimport { AttributesPrep } from './functions/AttributesPrep';\r\nimport { LimitsPrep } from './functions/LimitsPrep';\r\nimport { MatrixPrep } from './functions/MatrixPrep';\r\nimport SpriteType = Shadowrun.SpriteType;\r\nimport { Helpers } from '../../helpers';\r\nimport { PartsList } from '../../parts/PartsList';\r\n\r\n/**\r\n * Prepare a Sprite Type of Actor\r\n */\r\nexport class SpritePrep extends BaseActorPrep<SR5SpriteType, SpriteActorData> {\r\n    prepare() {\r\n        ModifiersPrep.prepareModifiers(this.data);\r\n        ModifiersPrep.clearAttributeMods(this.data);\r\n\r\n        SpritePrep.prepareSpriteData(this.data);\r\n        MatrixPrep.prepareAttributesForDevice(this.data);\r\n\r\n        SkillsPrep.prepareSkills(this.data);\r\n        AttributesPrep.prepareAttributes(this.data);\r\n        LimitsPrep.prepareLimits(this.data);\r\n\r\n        MatrixPrep.prepareMatrixToLimitsAndAttributes(this.data);\r\n\r\n        InitiativePrep.prepareCurrentInitiative(this.data);\r\n\r\n        this.data.special = 'resonance';\r\n    }\r\n\r\n    /**\r\n     * Prepares basic Sprite specific data\r\n     * - matrix attribute values\r\n     * - device rating\r\n     * - matrix condition monitor\r\n     * - matrix initiative\r\n     * - skills\r\n     * @param data\r\n     */\r\n    static prepareSpriteData(data: SpriteActorData) {\r\n        const { level, skills, matrix, spriteType, initiative, attributes, modifiers } = data;\r\n\r\n        const matrixAtts = ['attack', 'sleaze', 'data_processing', 'firewall'];\r\n\r\n        const overrides = this.getSpriteStatModifiers(spriteType);\r\n\r\n        // apply the matrix overrides\r\n        matrixAtts.forEach((att) => {\r\n            if (matrix[att] !== undefined) {\r\n                matrix[att].base = level + overrides[att];\r\n                matrix[att].value = Helpers.calcTotal(matrix[att]);\r\n            }\r\n        });\r\n\r\n        // setup initiative from overrides\r\n        initiative.matrix.base.base = level * 2 + overrides.init;\r\n        PartsList.AddUniquePart(initiative.matrix.base.mod, 'SR5.Bonus', modifiers['matrix_initiative']);\r\n        Helpers.calcTotal(initiative.matrix.base);\r\n\r\n        initiative.matrix.dice.base = 4;\r\n        PartsList.AddUniquePart(initiative.matrix.dice.mod, 'SR5.Bonus', modifiers['matrix_initiative_dice']);\r\n        Helpers.calcTotal(initiative.matrix.dice);\r\n\r\n        // always in matrix perception\r\n        initiative.perception = 'matrix';\r\n\r\n        // calculate resonance value\r\n        attributes.resonance.base = level + overrides.resonance;\r\n        Helpers.calcTotal(attributes.resonance);\r\n\r\n        // apply skill levels\r\n        // clear skills that we don't have\r\n        for (const [skillId, skill] of Object.entries(skills.active)) {\r\n            skill.base = overrides.skills.find((s) => s === skillId) ? level : 0;\r\n        }\r\n\r\n        matrix.rating = level;\r\n        matrix.condition_monitor.max = 8 + Math.ceil(level / 2);\r\n    }\r\n\r\n    /**\r\n     * Get the stat modifiers for the specified type of sprite\r\n     * @param spriteType\r\n     */\r\n    static getSpriteStatModifiers(spriteType: SpriteType) {\r\n        const overrides = {\r\n            attack: 0,\r\n            sleaze: 0,\r\n            data_processing: 0,\r\n            firewall: 0,\r\n            resonance: 0,\r\n            init: 0,\r\n            // all sprites have computer\r\n            skills: ['computer'],\r\n        };\r\n        switch (spriteType) {\r\n            case 'courier':\r\n                overrides.sleaze = 3;\r\n                overrides.data_processing = 1;\r\n                overrides.firewall = 2;\r\n                overrides.init = 1;\r\n                overrides.skills.push('hacking');\r\n                break;\r\n            case 'crack':\r\n                overrides.sleaze = 3;\r\n                overrides.data_processing = 2;\r\n                overrides.firewall = 1;\r\n                overrides.init = 2;\r\n                overrides.skills.push('hacking', 'electronic_warfare');\r\n                break;\r\n            case 'data':\r\n                overrides.attack = -1;\r\n                overrides.data_processing = 4;\r\n                overrides.firewall = 1;\r\n                overrides.init = 4;\r\n                overrides.skills.push('electronic_warfare');\r\n                break;\r\n            case 'fault':\r\n                overrides.attack = 3;\r\n                overrides.data_processing = 1;\r\n                overrides.firewall = 2;\r\n                overrides.init = 1;\r\n                overrides.skills.push('cybercombat', 'hacking');\r\n                break;\r\n            case 'machine':\r\n                overrides.attack = 1;\r\n                overrides.data_processing = 3;\r\n                overrides.firewall = 2;\r\n                overrides.init = 3;\r\n                overrides.skills.push('electronic_warfare', 'hardware');\r\n                break;\r\n        }\r\n        return overrides;\r\n    }\r\n}\r\n","import { BaseActorPrep } from './BaseActorPrep';\r\nimport SR5VehicleType = Shadowrun.SR5VehicleType;\r\nimport VehicleActorData = Shadowrun.VehicleActorData;\r\nimport { SkillsPrep } from './functions/SkillsPrep';\r\nimport { ModifiersPrep } from './functions/ModifiersPrep';\r\nimport { InitiativePrep } from './functions/InitiativePrep';\r\nimport { AttributesPrep } from './functions/AttributesPrep';\r\nimport { LimitsPrep } from './functions/LimitsPrep';\r\nimport { MatrixPrep } from './functions/MatrixPrep';\r\nimport { Helpers } from '../../helpers';\r\nimport { PartsList } from '../../parts/PartsList';\r\n\r\nexport class VehiclePrep extends BaseActorPrep<SR5VehicleType, VehicleActorData> {\r\n    prepare() {\r\n        ModifiersPrep.prepareModifiers(this.data);\r\n        ModifiersPrep.clearAttributeMods(this.data);\r\n\r\n        VehiclePrep.prepareVehicleStats(this.data);\r\n        VehiclePrep.prepareAttributes(this.data);\r\n        VehiclePrep.prepareLimits(this.data);\r\n\r\n        SkillsPrep.prepareSkills(this.data);\r\n        AttributesPrep.prepareAttributes(this.data);\r\n        LimitsPrep.prepareLimits(this.data);\r\n\r\n        VehiclePrep.prepareConditionMonitor(this.data);\r\n\r\n        MatrixPrep.prepareMatrixToLimitsAndAttributes(this.data);\r\n        MatrixPrep.prepareAttributesForDevice(this.data);\r\n\r\n        VehiclePrep.prepareMovement(this.data);\r\n\r\n        VehiclePrep.prepareMeatspaceInit(this.data);\r\n        InitiativePrep.prepareMatrixInit(this.data);\r\n        InitiativePrep.prepareCurrentInitiative(this.data);\r\n\r\n        VehiclePrep.prepareArmor(this.data);\r\n    }\r\n\r\n    static prepareVehicleStats(data: VehicleActorData) {\r\n        const { vehicle_stats, isOffRoad } = data;\r\n        // set the value for the stats\r\n        for (let [key, stat] of Object.entries(vehicle_stats)) {\r\n            // this turns the Object model into the list mod\r\n            if (typeof stat.mod === 'object') {\r\n                stat.mod = new PartsList(stat.mod).list;\r\n            }\r\n            const parts = new PartsList(stat.mod);\r\n\r\n            parts.addUniquePart('SR5.Temporary', stat.temp ?? 0);\r\n\r\n            stat.mod = parts.list;\r\n            Helpers.calcTotal(stat);\r\n            // add labels\r\n            stat.label = CONFIG.SR5.vehicle.stats[key];\r\n        }\r\n\r\n        // hide certain stats depending on if we're offroad\r\n        if (isOffRoad) {\r\n            vehicle_stats.off_road_speed.hidden = false;\r\n            vehicle_stats.off_road_handling.hidden = false;\r\n            vehicle_stats.speed.hidden = true;\r\n            vehicle_stats.handling.hidden = true;\r\n        } else {\r\n            vehicle_stats.off_road_speed.hidden = true;\r\n            vehicle_stats.off_road_handling.hidden = true;\r\n            vehicle_stats.speed.hidden = false;\r\n            vehicle_stats.handling.hidden = false;\r\n        }\r\n    }\r\n\r\n    static prepareAttributes(data: VehicleActorData) {\r\n        const { attributes, vehicle_stats } = data;\r\n\r\n        const attributeIds = ['agility', 'reaction', 'strength', 'willpower', 'logic', 'intuition', 'charisma'];\r\n\r\n        const totalPilot = Helpers.calcTotal(vehicle_stats.pilot);\r\n\r\n        attributeIds.forEach((attId) => {\r\n            if (attributes[attId] !== undefined) {\r\n                attributes[attId].base = totalPilot;\r\n            }\r\n        });\r\n    }\r\n\r\n    static prepareLimits(data: VehicleActorData) {\r\n        const { limits, vehicle_stats, isOffRoad } = data;\r\n\r\n        limits.mental.base = Helpers.calcTotal(vehicle_stats.sensor);\r\n\r\n        // add sensor, handling, and speed as limits\r\n        limits.sensor = { ...vehicle_stats.sensor, hidden: true };\r\n        limits.handling = { ...(isOffRoad ? vehicle_stats.off_road_handling : vehicle_stats.handling), hidden: true };\r\n        limits.speed = { ...(isOffRoad ? vehicle_stats.off_road_speed : vehicle_stats.speed), hidden: true };\r\n    }\r\n\r\n    static prepareConditionMonitor(data: VehicleActorData) {\r\n        const { track, attributes, matrix, isDrone, modifiers } = data;\r\n\r\n        const halfBody = Math.ceil(Helpers.calcTotal(attributes.body) / 2);\r\n        // CRB pg 199 drone vs vehicle physical condition monitor rules\r\n        if (isDrone) {\r\n            track.physical.base = 6 + halfBody;\r\n            track.physical.max = track.physical.base + (Number(modifiers['physical_track']) || 0);\r\n        } else {\r\n            track.physical.base = 12 + halfBody;\r\n            track.physical.max =  track.physical.base + (Number(modifiers['physical_track']) || 0);\r\n        }\r\n        track.physical.label = CONFIG.SR5.damageTypes.physical;\r\n\r\n        const rating = matrix.rating || 0;\r\n        matrix.condition_monitor.max = 8 + Math.ceil(rating / 2);\r\n    }\r\n\r\n    static prepareMovement(data: VehicleActorData) {\r\n        const { vehicle_stats, movement, isOffRoad } = data;\r\n\r\n        let speedTotal = Helpers.calcTotal(isOffRoad ? vehicle_stats.off_road_speed : vehicle_stats.speed);\r\n\r\n        // algorithm to determine speed, CRB pg 202 table\r\n        movement.walk.base = 5 * Math.pow(2, speedTotal - 1);\r\n        movement.walk.value = movement.walk.base;\r\n\r\n        movement.run.base = 10 * Math.pow(2, speedTotal - 1);\r\n        movement.run.value = movement.run.base;\r\n    }\r\n\r\n    static prepareMeatspaceInit(data: VehicleActorData) {\r\n        const { vehicle_stats, initiative } = data;\r\n\r\n        const pilot = Helpers.calcTotal(vehicle_stats.pilot);\r\n\r\n        initiative.meatspace.base.base = pilot * 2;\r\n        initiative.meatspace.dice.base = 4;\r\n        Helpers.calcTotal(initiative.meatspace.base);\r\n        Helpers.calcTotal(initiative.meatspace.dice);\r\n    }\r\n\r\n    static prepareArmor(data: VehicleActorData) {\r\n        const { armor } = data;\r\n        armor.mod = PartsList.AddUniquePart(armor.mod, 'SR5.Temporary', armor['temp']);\r\n        Helpers.calcTotal(armor);\r\n    }\r\n}\r\n","import SR5ActorData = Shadowrun.SR5ActorData;\r\nimport { PartsList } from '../../../parts/PartsList';\r\nimport { Helpers } from '../../../helpers';\r\nimport {SR} from \"../../../constants\";\r\n\r\nexport class AttributesPrep {\r\n    /**\r\n     * Prepare actor data for attributes\r\n     */\r\n    static prepareAttributes(data: SR5ActorData) {\r\n        const { attributes } = data;\r\n\r\n        // always have special attributes set to hidden\r\n        attributes.magic.hidden = true;\r\n        attributes.resonance.hidden = true;\r\n        attributes.edge.hidden = true;\r\n        attributes.essence.hidden = true;\r\n\r\n        // set the value for the attributes\r\n        for (let [key, attribute] of Object.entries(attributes)) {\r\n            // don't manage the attribute if it is using the old method of edge tracking\r\n            // needed to be able to migrate things correctly\r\n            if (key === 'edge' && attribute['uses'] === undefined) return;\r\n            const parts = new PartsList(attribute.mod);\r\n\r\n            attribute.mod = parts.list;\r\n\r\n            // Each attribute can have a unique value range.\r\n            // TODO:  Implement metatype attribute value ranges for character actors.\r\n            const range = SR.attributes.ranges[key];\r\n            Helpers.calcTotal(attribute, range);\r\n\r\n            // add i18n labels.\r\n            attribute.label = CONFIG.SR5.attributes[key];\r\n        }\r\n    }\r\n}\r\n","import SR5ActorData = Shadowrun.SR5ActorData;\r\nimport PhysicalTrackActorData = Shadowrun.PhysicalTrackActorData;\r\nimport StunTrackActorData = Shadowrun.StunTrackActorData;\r\nimport TwoTrackActorData = Shadowrun.TwoTrackActorData;\r\n\r\nexport class ConditionMonitorsPrep {\r\n    static prepareStun(data: SR5ActorData & StunTrackActorData) {\r\n        const { track, attributes, modifiers } = data;\r\n\r\n        track.stun.base = 8 + Math.ceil(attributes.willpower.value / 2);\r\n        track.stun.max = track.stun.base + Number(modifiers['stun_track']);\r\n        track.stun.label = CONFIG.SR5.damageTypes.stun;\r\n        track.stun.disabled = false;\r\n    }\r\n\r\n    static preparePhysical(data: SR5ActorData & PhysicalTrackActorData) {\r\n        const { track, attributes, modifiers } = data;\r\n\r\n        track.physical.base = 8 + Math.ceil(attributes.body.value / 2);\r\n        track.physical.max = track.physical.base + Number(modifiers['physical_track']);\r\n        track.physical.overflow.max = attributes.body.value;\r\n        track.physical.label = CONFIG.SR5.damageTypes.physical;\r\n        track.physical.disabled = false;\r\n    }\r\n\r\n    static prepareGrunt(data: SR5ActorData & TwoTrackActorData) {\r\n        // Grunts use only one monitor, use physical to get overflow functionality.\r\n        ConditionMonitorsPrep.prepareStun(data);\r\n\r\n        const { track, attributes, modifiers } = data;\r\n        // Overwrite stun damage to avoid invisible damage modifiers.\r\n        track.stun.value = 0;\r\n        track.stun.disabled = true;\r\n\r\n        // Grunts use either their WIL or BOD as their monitors attribute.\r\n        const attribute = attributes.willpower.value > attributes.body.value ?\r\n            attributes.willpower:\r\n            attributes.body;\r\n\r\n        track.physical.base = 8 + Math.ceil(attribute.value / 2);\r\n        track.physical.max = track.physical.base + Number(modifiers['physical_track']);\r\n        track.physical.overflow.max = attributes.body.value;\r\n        track.physical.label = \"SR5.ConditionMonitor\";\r\n        track.physical.disabled = false;\r\n    }\r\n}\r\n","import SR5ActorData = Shadowrun.SR5ActorData;\r\nimport MagicActorData = Shadowrun.MagicActorData;\r\nimport MatrixActorData = Shadowrun.MatrixActorData;\r\nimport { Helpers } from '../../../helpers';\r\nimport { PartsList } from '../../../parts/PartsList';\r\n\r\nexport class InitiativePrep {\r\n    static prepareCurrentInitiative(data: SR5ActorData) {\r\n        const { initiative } = data;\r\n\r\n        if (initiative.perception === 'matrix') initiative.current = initiative.matrix;\r\n        else if (initiative.perception === 'astral') initiative.current = initiative.astral;\r\n        else {\r\n            initiative.current = initiative.meatspace;\r\n            initiative.perception = 'meatspace';\r\n        }\r\n\r\n        initiative.current.dice.value = Helpers.calcTotal(initiative.current.dice);\r\n        if (initiative.edge) initiative.current.dice.value = 5;\r\n        initiative.current.dice.value = Math.min(5, initiative.current.dice.value); // maximum of 5d6 for initiative\r\n        initiative.current.dice.text = `${initiative.current.dice.value}d6`;\r\n\r\n        initiative.current.base.value = Helpers.calcTotal(initiative.current.base);\r\n    }\r\n\r\n    static prepareMeatspaceInit(data: SR5ActorData) {\r\n        const { initiative, attributes, modifiers } = data;\r\n\r\n        initiative.meatspace.base.base = attributes.intuition.value + attributes.reaction.value;\r\n        initiative.meatspace.base.mod = PartsList.AddUniquePart(initiative.meatspace.base.mod, \"SR5.Bonus\", Number(modifiers['meat_initiative']));\r\n\r\n        initiative.meatspace.dice.base = 1;\r\n        initiative.meatspace.dice.mod = PartsList.AddUniquePart(initiative.meatspace.dice.mod, \"SR5.Bonus\", Number(modifiers['meat_initiative_dice']));\r\n    }\r\n\r\n    static prepareAstralInit(data: SR5ActorData & MagicActorData) {\r\n        const { initiative, attributes, modifiers } = data;\r\n\r\n        initiative.astral.base.base = attributes.intuition.value * 2;\r\n        initiative.astral.base.mod = PartsList.AddUniquePart(initiative.astral.base.mod, \"SR5.Bonus\", Number(modifiers['astral_initiative']));\r\n\r\n        initiative.astral.dice.base = 2;\r\n        initiative.astral.dice.mod = PartsList.AddUniquePart(initiative.astral.dice.mod, \"SR5.Bonus\", Number(modifiers['astral_initiative_dice']));\r\n    }\r\n\r\n    static prepareMatrixInit(data: SR5ActorData & MatrixActorData) {\r\n        const { initiative, attributes, modifiers, matrix } = data;\r\n        if (matrix) {\r\n\r\n            initiative.matrix.base.base = attributes.intuition.value + data.matrix.data_processing.value;\r\n            initiative.matrix.base.mod = PartsList.AddUniquePart(initiative.matrix.base.mod, \"SR5.Bonus\", Number(modifiers['matrix_initiative']));\r\n\r\n            initiative.matrix.dice.base = (matrix.hot_sim ? 4 : 3);\r\n            initiative.matrix.dice.mod = PartsList.AddUniquePart(initiative.matrix.dice.mod, \"SR5.Bonus\", Number(modifiers['matrix_initiative_dice']));\r\n        }\r\n    }\r\n}\r\n","import SR5ActorData = Shadowrun.SR5ActorData;\r\nimport { SR5ItemDataWrapper } from '../../../item/SR5ItemDataWrapper';\r\nimport { Helpers } from '../../../helpers';\r\nimport { PartsList } from '../../../parts/PartsList';\r\nimport ArmorActorData = Shadowrun.ArmorActorData;\r\n\r\nexport class ItemPrep {\r\n    /**\r\n     * Prepare the armor data for the Item\r\n     * - will only allow one \"Base\" armor item to be used\r\n     * - all \"accessories\" will be added to the armor\r\n     */\r\n    static prepareArmor(data: SR5ActorData & ArmorActorData, items: SR5ItemDataWrapper[]) {\r\n        const { armor } = data;\r\n        armor.base = 0;\r\n        armor.value = 0;\r\n        armor.mod = [];\r\n        for (const element of Object.keys(CONFIG.SR5.elementTypes)) {\r\n            armor[element] = 0;\r\n        }\r\n\r\n        const armorModParts = new PartsList<number>(armor.mod);\r\n        const equippedArmor = items.filter((item) => item.couldHaveArmor() && item.isEquipped());\r\n        equippedArmor?.forEach((item) => {\r\n            // Don't spam armor values with clothing or armor like items without any actual armor.\r\n            if (item.hasArmor()) {\r\n                // Apply armor base and accessory values.\r\n                if (item.hasArmorAccessory()) {\r\n                    armorModParts.addUniquePart(item.getName(), item.getArmorValue());\r\n                }\r\n                else {\r\n                    armor.base = item.getArmorValue();\r\n                    armor.label = item.getName();\r\n                }\r\n            }\r\n\r\n            // Apply elemental modifiers of all worn armor and clothing SR5#169.\r\n            for (const element of Object.keys(CONFIG.SR5.elementTypes)) {\r\n                armor[element] += item.getArmorElements()[element];\r\n            }\r\n        });\r\n\r\n        if (data.modifiers['armor']) armorModParts.addUniquePart(game.i18n.localize('SR5.Bonus'), data.modifiers['armor']);\r\n        // SET ARMOR\r\n        armor.value = Helpers.calcTotal(armor);\r\n    }\r\n    /**\r\n     * Prepare actor data for ware changes\r\n     * - this calculates the actors essence\r\n     */\r\n    static prepareBodyware(data: SR5ActorData, items: SR5ItemDataWrapper[]) {\r\n        const { attributes } = data;\r\n        const parts = new PartsList<number>();\r\n        // add Items as values to lower the total value of essence\r\n        items\r\n            .filter((item) => item.isBodyware() && item.isEquipped())\r\n            .forEach((item) => {\r\n                if (item.getEssenceLoss()) {\r\n                    parts.addUniquePart(item.getName(), -Number(item.getEssenceLoss()));\r\n                }\r\n            });\r\n        // add the bonus from the misc tab if applied\r\n        const essenceMod = data.modifiers['essence'];\r\n        if (essenceMod && !Number.isNaN(essenceMod)) {\r\n            parts.addUniquePart('SR5.Bonus', Number(essenceMod));\r\n        }\r\n\r\n        attributes.essence.base = 6;\r\n        attributes.essence.mod = parts.list;\r\n        attributes.essence.value = Helpers.calcTotal(attributes.essence);\r\n    }\r\n}\r\n","import SR5ActorData = Shadowrun.SR5ActorData;\r\nimport { PartsList } from '../../../parts/PartsList';\r\nimport { Helpers } from '../../../helpers';\r\n\r\nexport class LimitsPrep {\r\n    static prepareLimits(data: SR5ActorData) {\r\n        const { limits, modifiers } = data;\r\n\r\n        // SETUP LIMITS\r\n        limits.physical.mod = PartsList.AddUniquePart(limits.physical.mod, 'SR5.Bonus', Number(modifiers['physical_limit']));\r\n        limits.mental.mod = PartsList.AddUniquePart(limits.mental.mod, 'SR5.Bonus', Number(modifiers['mental_limit']));\r\n        limits.social.mod = PartsList.AddUniquePart(limits.social.mod, \"SR5.Bonus\", Number(modifiers['social_limit']));\r\n\r\n        // limit labels\r\n        for (let [limitKey, limitValue] of Object.entries(limits)) {\r\n            Helpers.calcTotal(limitValue);\r\n            limitValue.label = CONFIG.SR5.limits[limitKey];\r\n        }\r\n    }\r\n\r\n    static prepareLimitBaseFromAttributes(data: SR5ActorData) {\r\n\r\n        const { limits, attributes } = data;\r\n\r\n        limits.physical.base = Math.ceil((2 * attributes.strength.value + attributes.body.value + attributes.reaction.value) / 3);\r\n        limits.mental.base = Math.ceil((2 * attributes.logic.value + attributes.intuition.value + attributes.willpower.value) / 3);\r\n        limits.social.base = Math.ceil((2 * attributes.charisma.value + attributes.willpower.value + attributes.essence.value) / 3);\r\n\r\n    }\r\n}\r\n","import SR5ActorData = Shadowrun.SR5ActorData;\r\nimport MatrixActorData = Shadowrun.MatrixActorData;\r\nimport { Helpers } from '../../../helpers';\r\nimport { SR5ItemDataWrapper } from '../../../item/SR5ItemDataWrapper';\r\nimport { PartsList } from '../../../parts/PartsList';\r\n\r\nexport class MatrixPrep {\r\n    /**\r\n     * Prepare Matrix data on the actor\r\n     * - if an item is equipped, it will use that data\r\n     * - if it isn't and player is technomancer, it will use that data\r\n     */\r\n    static prepareMatrix(actorData: SR5ActorData & MatrixActorData, items: SR5ItemDataWrapper[]) {\r\n        const { matrix, attributes } = actorData;\r\n\r\n        const MatrixList = ['firewall', 'sleaze', 'data_processing', 'attack'];\r\n\r\n        // clear matrix data to defaults\r\n        MatrixList.forEach((key) => {\r\n            const parts = new PartsList(matrix[key].mod);\r\n            parts.addUniquePart('SR5.Temporary', matrix[key].temp);\r\n            // TODO LEGACY from when the sheet used 'mod.Temporary'\r\n            parts.removePart('Temporary');\r\n            matrix[key].mod = parts.list;\r\n            matrix[key].value = parts.total;\r\n        });\r\n        matrix.condition_monitor.max = 0;\r\n        matrix.rating = 0;\r\n        matrix.name = '';\r\n        matrix.device = '';\r\n        matrix.condition_monitor.label = 'SR5.ConditionMonitor';\r\n\r\n        // get the first equipped device, we don't care if they have more equipped -- it shouldn't happen\r\n        const device = items.find((item) => item.isEquipped() && item.isDevice());\r\n\r\n        if (device) {\r\n            const conditionMonitor = device.getConditionMonitor();\r\n            matrix.device = device.getId();\r\n            matrix.condition_monitor.max = conditionMonitor.max;\r\n            matrix.condition_monitor.value = conditionMonitor.value;\r\n            matrix.rating = device.getRating();\r\n            matrix.is_cyberdeck = device.isCyberdeck();\r\n            matrix.name = device.getName();\r\n            matrix.item = device.getData();\r\n            const deviceAtts = device.getASDF();\r\n            if (deviceAtts) {\r\n                // setup the actual matrix attributes for the actor\r\n                for (const [key, value] of Object.entries(deviceAtts)) {\r\n                    if (value && matrix[key]) {\r\n                        matrix[key].base = value.value;\r\n                        matrix[key].device_att = value.device_att;\r\n                    }\r\n                }\r\n            }\r\n        } // if we don't have a device, use living persona\r\n        else if (actorData.special === 'resonance') {\r\n            matrix.firewall.base = Helpers.calcTotal(attributes.willpower);\r\n            matrix.data_processing.base = Helpers.calcTotal(attributes.logic);\r\n            matrix.rating = Helpers.calcTotal(attributes.resonance);\r\n            matrix.attack.base = Helpers.calcTotal(attributes.charisma);\r\n            matrix.sleaze.base = Helpers.calcTotal(attributes.intuition);\r\n            matrix.name = game.i18n.localize('SR5.LivingPersona');\r\n        }\r\n\r\n        // set matrix condition monitor to max if greater than\r\n        if (matrix.condition_monitor.value > matrix.condition_monitor.max) {\r\n            matrix.condition_monitor.value = matrix.condition_monitor.max;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Add Matrix Attributes to Limits and Attributes\r\n     * @param data\r\n     */\r\n    static prepareMatrixToLimitsAndAttributes(data: SR5ActorData & MatrixActorData) {\r\n        const { matrix, attributes, limits } = data;\r\n        const MatrixList = ['firewall', 'sleaze', 'data_processing', 'attack'];\r\n\r\n        // add matrix attributes to both limits and attributes as hidden entries\r\n        MatrixList.forEach((key) => {\r\n            Helpers.calcTotal(matrix[key]);\r\n            if (matrix[key]) {\r\n                const label = CONFIG.SR5.matrixAttributes[key];\r\n                const { value, base, mod } = matrix[key];\r\n                const hidden = true;\r\n\r\n                limits[key] = {\r\n                    value,\r\n                    base,\r\n                    mod,\r\n                    label,\r\n                    hidden,\r\n                };\r\n                attributes[key] = {\r\n                    value,\r\n                    base,\r\n                    mod,\r\n                    label,\r\n                    hidden,\r\n                };\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Prepare the mental attributes for a sheet that just has a device rating\r\n     * @param data\r\n     */\r\n    static prepareAttributesForDevice(data: SR5ActorData & MatrixActorData) {\r\n        const { matrix, attributes } = data;\r\n        const rating = matrix.rating || 0;\r\n        const mentalAttributes = ['intuition', 'logic', 'charisma', 'willpower'];\r\n\r\n        mentalAttributes.forEach((attLabel) => {\r\n            if (attributes[attLabel] !== undefined) {\r\n                attributes[attLabel].base = rating;\r\n                Helpers.calcTotal(attributes[attLabel]);\r\n            }\r\n        });\r\n        const basic = ['firewall', 'data_processing'];\r\n        basic.forEach((attId) => {\r\n            matrix[attId].base = rating;\r\n        });\r\n        [...basic, 'sleaze', 'attack'].forEach((attId) => {\r\n            Helpers.calcTotal(matrix[attId]);\r\n        });\r\n    }\r\n}\r\n","import SR5ActorData = Shadowrun.SR5ActorData;\r\n\r\nexport class ModifiersPrep {\r\n    /**\r\n     * Prepare the modifiers that are displayed in the Misc. tab\r\n     */\r\n    static prepareModifiers(data: SR5ActorData) {\r\n        if (!data.modifiers) data.modifiers = {};\r\n        const modifiers = {};\r\n        let miscTabModifiers = [\r\n            'soak',\r\n            'drain',\r\n            'armor',\r\n            'physical_limit',\r\n            'social_limit',\r\n            'mental_limit',\r\n            'stun_track',\r\n            'physical_track',\r\n            'meat_initiative',\r\n            'meat_initiative_dice',\r\n            'astral_initiative',\r\n            'astral_initiative_dice',\r\n            'matrix_initiative',\r\n            'matrix_initiative_dice',\r\n            'composure',\r\n            'lift_carry',\r\n            'judge_intentions',\r\n            'memory',\r\n            'walk',\r\n            'run',\r\n            'defense',\r\n            'wound_tolerance',\r\n            'essence',\r\n            'fade',\r\n        ];\r\n        miscTabModifiers.sort();\r\n        // force global to the top\r\n        miscTabModifiers.unshift('global');\r\n\r\n        for (let item of miscTabModifiers) {\r\n            modifiers[item] = Number(data.modifiers[item]) || 0;\r\n        }\r\n\r\n        data.modifiers = modifiers;\r\n    }\r\n\r\n    static clearAttributeMods(data: SR5ActorData) {\r\n        const { attributes } = data;\r\n        for (const [, attribute] of Object.entries(attributes)) {\r\n            attribute.mod = [];\r\n        }\r\n    }\r\n}\r\n","import SR5ActorData = Shadowrun.SR5ActorData;\r\nimport MovementActorData = Shadowrun.MovementActorData;\r\n\r\nexport class MovementPrep {\r\n    static prepareMovement(data: SR5ActorData & MovementActorData) {\r\n        const { attributes, modifiers } = data;\r\n        const movement = data.movement;\r\n        // default movement: WALK = AGI * 2, RUN = AGI * 4\r\n        movement.walk.value = attributes.agility.value * (2 + Number(modifiers['walk']));\r\n        movement.run.value = attributes.agility.value * (4 + Number(modifiers['run']));\r\n    }\r\n}\r\n","import CharacterActorData = Shadowrun.CharacterActorData;\r\nimport {DataTemplates} from \"../../../dataTemplates\";\r\nimport {Helpers} from \"../../../helpers\";\r\nimport {METATYPEMODIFIER} from \"../../../constants\";\r\nimport {PartsList} from \"../../../parts/PartsList\";\r\n\r\nexport class NPCPrep {\r\n    static prepareNPCData(data: CharacterActorData) {\r\n        // Apply to NPC and none NPC to remove lingering modifiers after actor has been removed it's npc status.\r\n        NPCPrep.applyMetatypeModifiers(data);\r\n    }\r\n\r\n    /** Replace current metatype modifiers with, even if nothing has changed.\r\n     *\r\n     */\r\n    static applyMetatypeModifiers(data: CharacterActorData) {\r\n        const {metatype} = data;\r\n        let modifiers = DataTemplates.grunt.metatype_modifiers[metatype];\r\n        modifiers = modifiers ? modifiers : {};\r\n\r\n        const {attributes} = data;\r\n\r\n        for (const [attId, attribute] of Object.entries(attributes)) {\r\n            // old-style object mod transformation is happening in AttributePrep and is needed here. Order is important.\r\n            if (!Array.isArray(attribute.mod)) {\r\n                    console.error('Actor data contains wrong data type for attribute.mod', attribute, !Array.isArray(attribute.mod));\r\n            } else {\r\n                const modifyBy = modifiers?.attributes?.[attId];\r\n                const parts = new PartsList(attribute.mod);\r\n                parts.removePart(METATYPEMODIFIER);\r\n\r\n                if (data.is_npc && modifyBy) {\r\n                    parts.addPart(METATYPEMODIFIER, modifyBy);\r\n                }\r\n\r\n                attribute.mod = parts.list;\r\n\r\n                // Don't modify attribute below one.\r\n                // TODO: Use a SR5.Values.Attribute calculation to avoid duplication.\r\n                Helpers.calcTotal(attribute, {min: 1});\r\n            }\r\n        }\r\n    }\r\n\r\n    static AddNPCMetatypeAttributeModifier(value) {\r\n        return {\r\n            name: METATYPEMODIFIER,\r\n            value: value as number\r\n        }\r\n    }\r\n}","import SR5ActorData = Shadowrun.SR5ActorData;\r\nimport { Helpers } from '../../../helpers';\r\nimport { PartsList } from '../../../parts/PartsList';\r\nimport SkillField = Shadowrun.SkillField;\r\n\r\nexport class SkillsPrep {\r\n    /**\r\n     * Prepare actor data for skills\r\n     */\r\n    static prepareSkills(data: SR5ActorData) {\r\n        const { language, active, knowledge } = data.skills;\r\n        if (language) {\r\n            if (!language.value) {\r\n                language.value = {};\r\n            }\r\n\r\n            // language.value is defined as an array in template.json \r\n            // However what we actually want here is an object, so we set it manually\r\n            // The same is done for the other knowledge skillgroups 'value' properties below\r\n            if (Array.isArray(language.value) && language.value.length == 0) {\r\n                language.value = {};\r\n            }\r\n\r\n            language.attribute = 'intuition';\r\n        }\r\n\r\n        // function that will set the total of a skill correctly\r\n        const prepareSkill = (skill) => {\r\n            skill.mod = [];\r\n            if (!skill.base) skill.base = 0;\r\n            if (skill.bonus?.length) {\r\n                for (let bonus of skill.bonus) {\r\n                    skill.mod = PartsList.AddUniquePart(skill.mod, bonus.key, Number(bonus.value));\r\n                }\r\n            }\r\n            skill.value = Helpers.calcTotal(skill);\r\n\r\n            // Older Chummer imports miss some fields.\r\n            _mergeWithMissingSkillFields(skill);\r\n        };\r\n\r\n        // setup active skills\r\n        for (const skill of Object.values(active)) {\r\n            if (!skill.hidden) {\r\n                prepareSkill(skill);\r\n            }\r\n        }\r\n  \r\n        const entries = Object.entries(data.skills.language.value);\r\n        // remove entries which are deleted TODO figure out how to delete these from the data\r\n        entries.forEach(([key, val]: [string, { _delete?: boolean }]) => val._delete && delete data.skills.language.value[key]);\r\n\r\n        for (let skill of Object.values(language.value)) {\r\n            prepareSkill(skill);\r\n            skill.attribute = 'intuition';\r\n        }\r\n\r\n        // setup knowledge skills\r\n        for (let [, group] of Object.entries(knowledge)) {\r\n            const entries = Object.entries(group.value);\r\n            // remove entries which are deleted TODO figure out how to delete these from the data\r\n            group.value = entries\r\n                .filter(([, val]) => !val._delete)\r\n                .reduce((acc, [id, skill]) => {\r\n                    prepareSkill(skill);\r\n\r\n                    // set the attribute on the skill\r\n                    skill.attribute = group.attribute;\r\n                    acc[id] = skill;\r\n                    return acc;\r\n                }, {});\r\n        }\r\n\r\n        // skill labels\r\n        for (let [skillKey, skillValue] of Object.entries(active)) {\r\n            skillValue.label = CONFIG.SR5.activeSkills[skillKey];\r\n        }\r\n    }\r\n}\r\n\r\n/** Just a quick, semi hacky way of setting up a complete skill data structure, while still allowing\r\n *  fields to be added at need.\r\n *\r\n * @param givenSkill\r\n * @return merge default skill fields with fields of the given field, only adding new fields in the process.\r\n */\r\nexport const _mergeWithMissingSkillFields = (givenSkill) => {\r\n    // Only the absolute most necessary fields, not datatype complete to SkillField\r\n    const template = {\r\n        name: \"\",\r\n        base: \"\",\r\n        value: 0,\r\n        attribute: \"\",\r\n        mod: [],\r\n        specs: [],\r\n        hidden: false\r\n    };\r\n\r\n    // Use mergeObject to reserve original object instance in case replacing it\r\n    // causes problems down the line with active skills taken from a preexisting\r\n    // data structure.\r\n    // overwrite false to prohibit existing values to be overwritten with empty values.\r\n    mergeObject(givenSkill, template, {overwrite: false});\r\n}","import SR5ActorData = Shadowrun.SR5ActorData;\r\nimport TwoTrackActorData = Shadowrun.TwoTrackActorData;\r\nimport WoundsActorData = Shadowrun.WoundsActorData;\r\n\r\nexport class WoundsPrep {\r\n    static prepareWounds(data: SR5ActorData & TwoTrackActorData & WoundsActorData) {\r\n        const { modifiers, track } = data;\r\n        const count = 3 + Number(modifiers['wound_tolerance']);\r\n        const stunWounds = track.stun.disabled ? 0 : Math.floor(track.stun.value / count);\r\n        const physicalWounds = track.physical.disabled ? 0 : Math.floor(track.physical.value / count);\r\n\r\n        track.stun.wounds = stunWounds;\r\n        track.physical.wounds = physicalWounds;\r\n\r\n        data.wounds = {\r\n            value: stunWounds + physicalWounds,\r\n        };\r\n    }\r\n}\r\n","import {FLAGS, SYSTEM_NAME} from \"../constants\";\r\n\r\nexport class ChangelogApplication extends Application {\r\n    get template(): string {\r\n        return 'systems/shadowrun5e/dist/templates/apps/changelog.html';\r\n    }\r\n\r\n    static get defaultOptions() {\r\n        const options = super.defaultOptions;\r\n        options.classes = ['shadowrun5e'];\r\n        options.title = game.i18n.localize('SR5.ChangelogApplication.Title');\r\n        options.width = 500;\r\n        options.height = 'auto';\r\n        return options;\r\n    }\r\n\r\n    render(force?: boolean, options?: Application.RenderOptions): Application {\r\n        ChangelogApplication.setRenderForCurrentVersion();\r\n        return super.render(force, options);\r\n    }\r\n\r\n    // Let the async operation happen in background.\r\n    private static setRenderForCurrentVersion() {\r\n        game.user.setFlag(SYSTEM_NAME, FLAGS.ChangelogShownForVersion, game.system.data.version);\r\n    }\r\n\r\n    static get showApplication(): boolean {\r\n        if (!game.user.isGM || !game.user.isTrusted) return false;\r\n\r\n        const shownForVersion = game.user.getFlag(SYSTEM_NAME, FLAGS.ChangelogShownForVersion);\r\n        return shownForVersion !== game.system.data.version;\r\n    }\r\n}","import {SYSTEM_NAME} from \"../constants\";\r\nimport {Helpers} from \"../helpers\";\r\nimport {SR5Actor} from \"../actor/SR5Actor\";\r\nimport {Modifiers} from \"../sr5/Modifiers\";\r\nimport EnvironmentalModifierCategories = Shadowrun.EnvironmentalModifierCategories;\r\n\r\nexport type EnvModifiersTarget = Scene | SR5Actor;\r\n\r\n/** Helper window for easy overview and selection of environmental modifiers and their calculated total.\r\n *\r\n */\r\nexport class EnvModifiersApplication extends Application {\r\n    target: EnvModifiersTarget;\r\n    modifiers: Modifiers;\r\n\r\n    constructor(target: EnvModifiersTarget) {\r\n        super();\r\n\r\n        this.target = target;\r\n    }\r\n\r\n    get template() {\r\n        return 'systems/shadowrun5e/dist/templates/apps/env-modifiers.html';\r\n    }\r\n\r\n    static get defaultOptions() {\r\n        const options = super.defaultOptions;\r\n        options.classes = ['sr5', 'form-dialog'];\r\n        options.id = 'env-modifiers-application';\r\n        options.title = game.i18n.localize('SR5.EnvModifiersApplication.Title');\r\n        options.width = 'auto'; // auto is important for differing i18n text length.\r\n        options.height = 'auto';\r\n        options.resizable = true;\r\n        return options;\r\n    }\r\n\r\n    async getData(options?: object): Promise<any> {\r\n        const data = super.getData(options);\r\n\r\n        this.modifiers = await this._getModifiers();\r\n\r\n        data.active = this.modifiers.environmental.active;\r\n        data.total = this.modifiers.environmental.total;\r\n\r\n        data.levels = Modifiers.getEnvironmentalModifierLevels();\r\n\r\n        data.targetType = this._getTargetTypeLabel();\r\n        data.targetName = this.target.name;\r\n        data.disableForm = this._disableInputsForUser();\r\n\r\n        return data;\r\n    }\r\n\r\n    protected activateListeners(html: JQuery | HTMLElement) {\r\n        $(html).find('button.env-modifier').on('click', this._handleModifierChange.bind(this));\r\n        $(html).find('button.remove-modifiers-from-target').on('click', this._handleRemoveModifiersFromTarget.bind(this));\r\n    }\r\n\r\n    async _handleModifierChange(event: Event) {\r\n        event.preventDefault();\r\n\r\n        // Handle data retrieval from HTML datasets.\r\n        const element = event.currentTarget as HTMLElement;\r\n\r\n        if (!element.dataset.category || !element.dataset.value) return;\r\n\r\n        const category = element.dataset.category as keyof EnvironmentalModifierCategories;\r\n        const value = Number(element.dataset.value);\r\n\r\n        // Handle modifier calculation\r\n        this._toggleActiveModifierCategory(category, value);\r\n\r\n        await this._clearModifiersOnTargetForNoSelection();\r\n        await this._storeModifiersOnTarget();\r\n\r\n        this._updateTokenHUDTotalDisplay();\r\n\r\n        await this.render();\r\n    }\r\n\r\n    /** Updates opened tokenHUD modifier values.\r\n     *\r\n     * Doing it this way is just easier as relying on any update / hook workflow.\r\n     */\r\n    _updateTokenHUDTotalDisplay() {\r\n        if (this.target instanceof SR5Actor) {\r\n            $('.modifier-value-environmental').each((index, element) => {\r\n                $(element).html(this.modifiers.environmental.total.toString());\r\n            });\r\n        }\r\n    }\r\n\r\n    async _handleRemoveModifiersFromTarget(event: Event) {\r\n        event.preventDefault();\r\n\r\n        await this.clearModifiersOnTarget();\r\n\r\n        this._updateTokenHUDTotalDisplay();\r\n\r\n        await this.render();\r\n    }\r\n\r\n    /**\r\n     */\r\n    _toggleActiveModifierCategory(category: keyof EnvironmentalModifierCategories, level: number) {\r\n        this.modifiers.toggleEnvironmentalCategory(category, level);\r\n    }\r\n\r\n    /** Return the modifiers that best match the current target type\r\n     */\r\n    async _getModifiers(): Promise<Modifiers> {\r\n        // Actor targets might have no personal modifiers, but still see the scene modifiers then, and use those\r\n        // as a template for their local modifiers.\r\n        if (this.target instanceof SR5Actor) {\r\n            return await this.target.getModifiers();\r\n        }\r\n        // All other types are handled without special cases.\r\n        return await Modifiers.getModifiersFromEntity(this.target);\r\n    }\r\n\r\n    async _storeModifiersOnTarget() {\r\n        await Modifiers.setModifiersOnEntity(this.target, this.modifiers.data);\r\n    }\r\n\r\n    /** Cleanup unused data in Entity flag.\r\n     */\r\n    async _clearModifiersOnTargetForNoSelection() {\r\n        if (!this.modifiers.hasActiveEnvironmental) {\r\n            this.modifiers = await Modifiers.clearEnvironmentalOnEntity(this.target);\r\n        }\r\n    }\r\n\r\n    async _targetHasEnvironmentalModifiers() {\r\n        const modifiers = await Modifiers.getModifiersFromEntity(this.target);\r\n        return !!modifiers.environmental;\r\n    }\r\n\r\n    async clearModifiersOnTarget() {\r\n        await Modifiers.clearEnvironmentalOnEntity(this.target);\r\n        // Refresh modifiers. This can be necessary for Actor targets without modifiers when Scene modifiers are present.\r\n        this.modifiers = await this._getModifiers();\r\n    }\r\n\r\n    _getTargetTypeLabel(): string {\r\n        if (this.target instanceof Scene) {\r\n            return game.i18n.localize('ENTITY.Scene');\r\n        }\r\n        if (this.target instanceof SR5Actor) {\r\n            return game.i18n.localize('ENTITY.Actor');\r\n        }\r\n\r\n        return '';\r\n    }\r\n\r\n    /** Only allow interactions for user with appropriate permissions\r\n     *\r\n     */\r\n    _disableInputsForUser(): boolean {\r\n        const entity = this.target instanceof SR5Actor ? this.target : this.target;\r\n        return !(game.user.isGM || entity.owner);\r\n    }\r\n\r\n    static async openForCurrentScene() {\r\n        if (!canvas.scene) return;\r\n        await new EnvModifiersApplication(canvas.scene).render(true);\r\n    }\r\n\r\n    /** Part of the tokenHUD workflow makes it necessary to have the token id piped in\r\n     *\r\n     * @param tokenId\r\n     */\r\n    static openForTokenHUD(tokenId: string) {\r\n        const token = Helpers.getToken(tokenId);\r\n\r\n        // When the token hud control is activated, this inline handler will be called with it.\r\n        return async (event) => {\r\n            event.preventDefault();\r\n\r\n            if (!token || !token.actor) return;\r\n\r\n            await new EnvModifiersApplication(token.actor).render(true);\r\n        }\r\n    }\r\n\r\n    /** Left side tool window control icon / interaction\r\n     */\r\n    static getControl() {\r\n        return {\r\n            name: 'environmental-modifiers-application',\r\n            title: 'CONTROLS.SR5.EnvironmentalModifiers',\r\n            icon: 'fas fa-list',\r\n            onClick: EnvModifiersApplication.openForCurrentScene,\r\n            button: true\r\n        }\r\n    }\r\n\r\n    // TODO: Implement system wide token HUD management...\r\n    static async addTokenHUDFields(app: TokenHUD, html: JQuery, data) {\r\n        if (!data._id) return;\r\n\r\n        console.log(`${SYSTEM_NAME} | Environmental Modifier HUD on renderTokenHUD`);\r\n\r\n        const token = Helpers.getToken(data._id);\r\n        if (!token) return;\r\n\r\n        const actor = token.actor as SR5Actor;\r\n        const modifiers = await actor.getModifiers();\r\n\r\n        // Setup and connect tokenHUD elements.\r\n        const container = $('<div class=\"col far-right sr-modifier-container\"></div>');\r\n        const column = $('<div class=\"col modifier-column\"></div>');\r\n        const modifier = $('<div class=\"modifier-row\"></div>');\r\n        const modifierValue = $(`<div class=\"modifier-value modifier-value-environmental\">${modifiers.environmental.total}</div>`);\r\n        const modifierDescription = $(`<div class=\"modifier-description open-environmental-modifier\">${game.i18n.localize(\"SR5.EnvironmentModifier\")}</div>`);\r\n        modifierDescription.on('click', EnvModifiersApplication.openForTokenHUD(data._id));\r\n\r\n        container.append(column);\r\n        column.append(modifier);\r\n        modifier.append(modifierValue);\r\n        modifier.append(modifierDescription);\r\n\r\n        // Connect SR-FoundryVTT tokenHUD elements to FoundryVTT tokenHUD column structure.\r\n        html.find('.col.right').after(container);\r\n    }\r\n}","import { parseDescription, getArray, parseTechnology, createItemData } from \"./BaseParserFunctions.js\"\r\n\r\nexport class ArmorParser {\r\n   \r\n    parseArmors(chummerChar) {\r\n        const armors = getArray(chummerChar.armors.armor);\r\n        const parsedArmors = [];\r\n        armors.forEach((chummerArmor) => {\r\n            try {\r\n                const itemData = this.parseArmor(chummerArmor);\r\n                parsedArmors.push(itemData);\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        });\r\n\r\n        return parsedArmors;\r\n    }\r\n\r\n    parseArmor(chummerArmor) {\r\n        const data = {};\r\n        const armor = {};\r\n        data.armor = armor;\r\n\r\n        let desc = '';\r\n        armor.mod = chummerArmor.armor.includes('+');\r\n        armor.value = parseInt(chummerArmor.armor.replace('+', ''));\r\n        if (chummerArmor.description)\r\n            desc = chummerArmor.description;\r\n\r\n        console.log(chummerArmor);\r\n        if (chummerArmor.armormods && chummerArmor.armormods.armormod) {\r\n            armor.fire = 0;\r\n            armor.electricity = 0;\r\n            armor.cold = 0;\r\n            armor.acid = 0;\r\n            armor.radiation = 0;\r\n\r\n            const modDesc = [];\r\n            const mods = getArray(chummerArmor.armormods.armormod);\r\n            mods.forEach((mod) => {\r\n                if (mod.name.toLowerCase().includes('fire resistance')) {\r\n                    armor.fire += parseInt(mod.rating);\r\n                } else if (mod.name.toLowerCase().includes('nonconductivity')) {\r\n                    armor.electricity += parseInt(mod.rating);\r\n                } else if (mod.name.toLowerCase().includes('insulation')) {\r\n                    armor.cold += parseInt(mod.rating);\r\n                } else if (mod.name.toLowerCase().includes('radiation shielding')) {\r\n                    armor.radiation += parseInt(mod.rating);\r\n                }\r\n                if (mod.rating !== '') {\r\n                    modDesc.push(`${mod.name} R${mod.rating}`);\r\n                } else {\r\n                    modDesc.push(mod.name);\r\n                }\r\n            });\r\n            if (modDesc.length > 0) {\r\n                // add desc to beginning\r\n                desc = `${modDesc.join(',')}\\n\\n${desc}`;\r\n            }\r\n        }\r\n\r\n        data.technology = parseTechnology(chummerArmor);\r\n        data.description = parseDescription(chummerArmor);\r\n        \r\n        return createItemData(chummerArmor.name, 'armor', data);\r\n    }\r\n}","import { DefaultValues } from \"../../dataTemplates\";\r\n\r\nexport const getValues = (val) => {\r\n    const regex = /(-?[0-9]+)(?:([0-9]+))*/g;\r\n    const l = val.match(regex);\r\n    return l || ['0'];\r\n};\r\n\r\nexport const getArray = (value) => {\r\n    return Array.isArray(value) ? value : [value];\r\n};\r\n\r\n/**\r\n *  Creates the description data from the chummer entry\r\n *  @param chummerEntry The chummer entry (the item)\r\n */\r\nexport const parseDescription = (chummerEntry) => {\r\n    const parsedDescription = DefaultValues.descriptionData();\r\n\r\n    if (chummerEntry.source && chummerEntry.page) {\r\n        parsedDescription.source = `${chummerEntry.source} ${chummerEntry.page}`\r\n    }\r\n\r\n    if (chummerEntry.description) {\r\n        parsedDescription.value = TextEditor.enrichHTML(chummerEntry.description);\r\n    }\r\n\r\n    return parsedDescription\r\n}\r\n\r\n/**\r\n *  Creates the technology data from the chummer entry\r\n *  @param chummerEntry The chummer entry (the item)\r\n */\r\nexport const parseTechnology = (chummerEntry) => {\r\n    const parsedTechnology = DefaultValues.technologyData();\r\n\r\n    if (chummerEntry.rating) {\r\n        parsedTechnology.rating = chummerEntry.rating; \r\n    }\r\n\r\n    if (chummerEntry.avail) {\r\n        parsedTechnology.availability = chummerEntry.avail; \r\n    }\r\n\r\n    if (chummerEntry.qty) {\r\n        parsedTechnology.quantity = chummerEntry.qty; \r\n    }\r\n\r\n    if (chummerEntry.cost) {\r\n        parsedTechnology.cost = parseFloat(chummerEntry.cost.replace(/[^\\d\\.\\-]/g, \"\"));\r\n    }\r\n    \r\n    if (chummerEntry.equipped && chummerEntry.equipped.toLowerCase() === 'true') {\r\n        parsedTechnology.equipped = true;\r\n    }\r\n\r\n    if (chummerEntry.conditionmonitor) {\r\n        parsedTechnology.condition_monitor.max = Number(chummerEntry.conditionmonitor);\r\n    }\r\n\r\n    if (chummerEntry.conceal) {\r\n        parsedTechnology.conceal.base = Number(chummerEntry.conceal);\r\n    }\r\n\r\n    return parsedTechnology\r\n}\r\n\r\nexport const createItemData = (name, type, data) => {\r\n    return {\r\n        name: name,\r\n        _id: '',\r\n        folder: '',\r\n        flags: {},\r\n        img: 'icons/svg/mystery-man.svg',\r\n        type: type,\r\n        data,\r\n        permission: {\r\n            default: 2,\r\n        },\r\n    };\r\n}\r\n\r\n\r\n","import {CharacterInfoUpdater} from \"./CharacterInfoUpdater\"\r\nimport {ItemsParser} from \"./ItemsParser\"\r\n\r\n/**\r\n * Imports characters from other tools into an existing foundry actor.\r\n */\r\nexport class CharacterImporter {\r\n\r\n    /**\r\n     * Imports a chummer character into an existing actor. The actor will be updated. This might lead to duplicate items.\r\n     * @param {*} actor The actor that will be updated with the chummer character.\r\n     * @param {*} chummerFile The complete chummer file as json object. The first character will be selected for import.\r\n     * @param {*} importOptions Additional import option that specify what parts of the chummer file will be imported.\r\n     */\r\n    async importChummerCharacter(actor, chummerFile, importOptions) {\r\n        console.log('Importing the following character file content:');\r\n        console.log(chummerFile);\r\n\r\n        console.log('Using the following import options:')\r\n        console.log(importOptions);\r\n\r\n        if (!chummerFile.characters || !chummerFile.characters.character) {\r\n            console.log('Did not find a valid character to import  - aborting import');\r\n            return;\r\n        }\r\n\r\n        const chummerCharacter = chummerFile.characters.character;\r\n        const updatedActorData = new CharacterInfoUpdater().update(actor.data, chummerCharacter);\r\n        const items = new ItemsParser().parse(chummerCharacter, importOptions);\r\n\r\n        await actor.update(updatedActorData);\r\n        await actor.createEmbeddedEntity('OwnedItem', items);\r\n    }\r\n}","import {_mergeWithMissingSkillFields} from \"../../actor/prep/functions/SkillsPrep\";\r\n\r\n/**\r\n * Parses all non-item character information from a chummer character object.\r\n */\r\nexport class CharacterInfoUpdater {\r\n\r\n    /**\r\n     *  Maps the chummer attribute name to our sr5-foundry attribute name\r\n     *  @param attName name of the chummer attribute\r\n     */\r\n    parseAttName = (attName) =>  {\r\n        if (attName.toLowerCase() === 'bod') {\r\n            return 'body';\r\n        }\r\n        if (attName.toLowerCase() === 'agi') {\r\n            return 'agility';\r\n        }\r\n        if (attName.toLowerCase() === 'rea') {\r\n            return 'reaction';\r\n        }\r\n        if (attName.toLowerCase() === 'str') {\r\n            return 'strength';\r\n        }\r\n        if (attName.toLowerCase() === 'cha') {\r\n            return 'charisma';\r\n        }\r\n        if (attName.toLowerCase() === 'int') {\r\n            return 'intuition';\r\n        }\r\n        if (attName.toLowerCase() === 'log') {\r\n            return 'logic';\r\n        }\r\n        if (attName.toLowerCase() === 'wil') {\r\n            return 'willpower';\r\n        }\r\n        if (attName.toLowerCase() === 'edg') {\r\n            return 'edge';\r\n        }\r\n        if (attName.toLowerCase() === 'mag') {\r\n            return 'magic';\r\n        }\r\n        if (attName.toLowerCase() === 'res') {\r\n            return 'resonance';\r\n        }\r\n    };\r\n\r\n    getArray = (value) => {\r\n        return Array.isArray(value) ? value : [value];\r\n    };\r\n\r\n\r\n    /**\r\n     *  Converts the chummer attribute value to our sr5-foundry attribute value\r\n     *  @param att the chummer attribute\r\n     */\r\n    parseAttBaseValue = (att) => {\r\n        if (att.name.toLowerCase() === 'edg') {\r\n            // The edge attribute value is stored in the \"base\" field instead of the total field\r\n            // In chummer, the \"total\" field is used for the amount of edge remaining to a character\r\n            return parseInt(att.base);\r\n        }\r\n        else {\r\n            return parseInt(att.total);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Parses the actor data from the chummer file and returns an updated clone of the actor data.\r\n     * @param {*} actorData The actor data (actor.data not actor.data.data) that is used as the basis for the import. Will not be changed.\r\n     * @param {*} chummerChar The chummer character to parse.\r\n     */\r\n    update(actorData, chummerChar) {\r\n\r\n        const clonedActorData = duplicate(actorData);\r\n\r\n        // Name is required, so we need to always set something (even if the chummer field is empty)\r\n        clonedActorData.name = chummerChar.alias ? chummerChar.alias : '[Name not found]';\r\n        \r\n        this.importBasicData(clonedActorData.data, chummerChar);\r\n        this.importBio(clonedActorData.data, chummerChar);\r\n        this.importAttributes(clonedActorData.data, chummerChar)\r\n        this.importInitiative(clonedActorData.data, chummerChar);\r\n        this.importSkills(clonedActorData.data, chummerChar);\r\n\r\n        return clonedActorData;\r\n    }\r\n\r\n    importBasicData(actorDataData, chummerChar) {\r\n\r\n        try {\r\n            if (chummerChar.playername) {\r\n                actorDataData.player_name = chummerChar.playername;\r\n            }\r\n            if (chummerChar.alias) {\r\n                actorDataData.name = chummerChar.alias;\r\n            }\r\n            if (chummerChar.metatype) {\r\n                actorDataData.metatype = chummerChar.metatype;\r\n            }\r\n            if (chummerChar.sex) {\r\n                actorDataData.sex = chummerChar.sex;\r\n            }\r\n            if (chummerChar.age) {\r\n                actorDataData.age = chummerChar.age;\r\n            }\r\n            if (chummerChar.height) {\r\n                actorDataData.height = chummerChar.height;\r\n            }\r\n            if (chummerChar.weight) {\r\n                actorDataData.weight = chummerChar.weight;\r\n            }\r\n            if (chummerChar.calculatedstreetcred) {\r\n                actorDataData.street_cred = chummerChar.calculatedstreetcred;\r\n            }\r\n            if (chummerChar.calculatednotoriety) {\r\n                actorDataData.notoriety = chummerChar.calculatednotoriety;\r\n            }\r\n            if (chummerChar.calculatedpublicawareness) {\r\n                actorDataData.public_awareness = chummerChar.calculatedpublicawareness;\r\n            }\r\n            if (chummerChar.karma) {\r\n                actorDataData.karma.value = chummerChar.karma;\r\n            }\r\n            if (chummerChar.totalkarma) {\r\n                actorDataData.karma.max = chummerChar.totalkarma;\r\n            }\r\n            if (chummerChar.technomancer && chummerChar.technomancer.toLowerCase() === 'true') {\r\n                actorDataData.special = 'resonance';\r\n            }\r\n            if (\r\n                (chummerChar.magician && chummerChar.magician.toLowerCase() === 'true') ||\r\n                (chummerChar.adept && chummerChar.adept.toLowerCase() === 'true')\r\n            ) {\r\n                actorDataData.special = 'magic';\r\n                let attr = [];\r\n                if (\r\n                    chummerChar.tradition &&\r\n                    chummerChar.tradition.drainattribute &&\r\n                    chummerChar.tradition.drainattribute.attr\r\n                ) {\r\n                    attr = chummerChar.tradition.drainattribute.attr;\r\n                } else if (chummerChar.tradition && chummerChar.tradition.drainattributes) {\r\n                    attr = chummerChar.tradition.drainattributes\r\n                        .split('+')\r\n                        .map((item) => item.trim());\r\n                }\r\n                attr.forEach((att) => {\r\n                    const attName = this.parseAttName(att);\r\n                    if (attName !== 'willpower') actorDataData.magic.attribute = att;\r\n                });\r\n            }\r\n            if (chummerChar.totaless) {\r\n                actorDataData.attributes.essence.value = chummerChar.totaless;\r\n            }\r\n            if (chummerChar.nuyen) {\r\n                actorDataData.nuyen = parseInt(chummerChar.nuyen.replace(',', ''));\r\n            }\r\n        } catch (e) {\r\n            console.error(`Error while parsing character information ${e}`);\r\n        }\r\n    }\r\n\r\n    importBio(actorDataData, chummerChar) {\r\n        actorDataData.description.value = '';\r\n\r\n        // Chummer outputs html and wraps every section in <p> tags, \r\n        // so we just concat everything with an additional linebreak in between\r\n        if (chummerChar.description) {\r\n            actorDataData.description.value += TextEditor.enrichHTML(chummerChar.description + '<br/>');\r\n        }\r\n\r\n        if (chummerChar.background) {\r\n            actorDataData.description.value += TextEditor.enrichHTML(chummerChar.background + '<br/>');\r\n        }\r\n\r\n        if (chummerChar.concept) {\r\n            actorDataData.description.value += TextEditor.enrichHTML(chummerChar.concept + '<br/>');\r\n        }\r\n\r\n        if (chummerChar.notes) {\r\n            actorDataData.description.value += TextEditor.enrichHTML(chummerChar.notes + '<br/>');\r\n        }\r\n    }\r\n\r\n    importAttributes(actorDataData, chummerChar) {\r\n        const atts = chummerChar.attributes[1].attribute;\r\n        atts.forEach((att) => {\r\n            try {\r\n                const attName = this.parseAttName(att.name);\r\n                if (attName) { \r\n                    actorDataData.attributes[attName].base = this.parseAttBaseValue(att);\r\n                }\r\n                    \r\n            } catch (e) {\r\n                console.error(`Error while parsing attributes ${e}`);\r\n            }\r\n        });\r\n    }\r\n\r\n    importInitiative(actorDataData, chummerChar) {\r\n        try {\r\n            actorDataData.modifiers.meat_initiative = chummerChar.initbonus;\r\n\r\n            // 'initdice' contains the total amount of initiative dice, not just the bonus.\r\n            actorDataData.modifiers.meat_initiative_dice = chummerChar.initdice - 1;\r\n        } catch (e) {\r\n            console.error(`Error while parsing initiative ${e}`);\r\n        }\r\n    }\r\n\r\n    importSkills(actorDataData, chummerChar) {\r\n        const chummerSkills = chummerChar.skills.skill;\r\n        for (let i = 0; i < chummerSkills.length; i++) {\r\n            try {\r\n                const chummerSkill = chummerSkills[i];\r\n                if (chummerSkill.rating > 0 && chummerSkill.islanguage) {\r\n                    let determinedGroup = 'active';\r\n                    let parsedSkill = null;\r\n                    const id = randomID(16);\r\n                    if (chummerSkill.islanguage && chummerSkill.islanguage.toLowerCase() === 'true') {\r\n                        parsedSkill = {};\r\n                        actorDataData.skills.language.value[id] = parsedSkill;\r\n                        determinedGroup = 'language';\r\n                    } \r\n                    else if (chummerSkill.knowledge && chummerSkill.knowledge.toLowerCase() === 'true') {\r\n                        const category = chummerSkill.skillcategory_english;\r\n                        parsedSkill = {};\r\n\r\n                        // Determine the correct knowledge skill category and assign the skill to it\r\n                        let skillCategory;\r\n                        if (category) {\r\n                            const cat = category.toLowerCase();\r\n                            if (cat === 'street')\r\n                                skillCategory = actorDataData.skills.knowledge.street.value;\r\n                            if (cat === 'academic')\r\n                                skillCategory = actorDataData.skills.knowledge.academic.value;\r\n                            if (cat === 'professional')\r\n                                skillCategory = actorDataData.skills.knowledge.professional.value;\r\n                            if (cat === 'interest')\r\n                                skillCategory = actorDataData.skills.knowledge.interests.value;\r\n                            if (skillCategory)\r\n                                skillCategory[id] = parsedSkill;\r\n                        } \r\n                        else {\r\n                            if (chummerSkill.attribute.toLowerCase() === 'int') {\r\n                                actorDataData.skills.knowledge.street.value[id] = parsedSkill;\r\n                            }\r\n                            if (chummerSkill.attribute.toLowerCase() === 'log') {\r\n                                actorDataData.skills.knowledge.professional.value[id] = parsedSkill;\r\n                            }\r\n                        }\r\n                        determinedGroup = 'knowledge';\r\n                    } \r\n                    else {\r\n                        let name = chummerSkill.name\r\n                            .toLowerCase()\r\n                            .trim()\r\n                            .replace(/\\s/g, '_')\r\n                            .replace(/-/g, '_');\r\n                        if (name.includes('exotic') && name.includes('_weapon'))\r\n                            name = name.replace('_weapon', '');\r\n                        if (name === 'pilot_watercraft')\r\n                            name = 'pilot_water_craft';\r\n                        parsedSkill = actorDataData.skills.active[name];\r\n                    }\r\n                    if (!parsedSkill)\r\n                        console.error(`Couldn't parse skill ${chummerSkill.name}`);\r\n                    if (parsedSkill) {\r\n                        if (determinedGroup !== 'active')\r\n                            parsedSkill.name = chummerSkill.name;\r\n                        parsedSkill.base = parseInt(chummerSkill.rating);\r\n\r\n                        if (chummerSkill.skillspecializations) {\r\n                            parsedSkill.specs = this.getArray(\r\n                                chummerSkill.skillspecializations.skillspecialization.name\r\n                            );\r\n                        }\r\n\r\n                        parsedSkill = _mergeWithMissingSkillFields(parsedSkill);\r\n                    }\r\n                }\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { parseDescription, getArray, createItemData } from \"./BaseParserFunctions.js\"\r\n\r\nexport class ContactParser {\r\n    parseContacts(chummerChar) {\r\n        \r\n        const chummerContacts = getArray(chummerChar.contacts.contact);\r\n        const parsedContacts = [];\r\n\r\n        chummerContacts.forEach((chummerContact) => {\r\n            try {\r\n                const itemData = this.parseContact(chummerContact);\r\n                parsedContacts.push(itemData);\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        });\r\n\r\n        return parsedContacts;\r\n    }\r\n\r\n    parseContact(chummerContact) {\r\n        const data = {};\r\n        data.type = chummerContact.role;\r\n\r\n        // Group contacts are stored in chummer as 'Group(connectionRating)', e.g. 'Group(5)'\r\n        // We handle group contacts as normal contacts until they are supported in the codebase.\r\n        if (chummerContact.connection.toLowerCase().includes('group')) {\r\n            data.connection = chummerContact.connection\r\n                .toLowerCase()\r\n                .replace('group(', '')\r\n                .replace(')', '');\r\n        }\r\n        else {\r\n            data.connection = chummerContact.connection;\r\n        }\r\n\r\n        data.loyalty = chummerContact.loyalty;\r\n        data.family = (chummerContact.family.toLowerCase() === 'true');\r\n        data.blackmail = (chummerContact.blackmail.toLowerCase() === 'true');\r\n        data.description = parseDescription(chummerContact);\r\n\r\n        const itemName = chummerContact.name ? chummerContact.name : '[Unnamed connection]';\r\n        const itemData = createItemData(itemName, 'contact', data);\r\n        return itemData;\r\n    }\r\n}","import { parseDescription, getArray, parseTechnology, createItemData } from \"./BaseParserFunctions.js\"\r\n\r\nexport class CyberwareParser {\r\n   \r\n    parseCyberwares(chummerChar) {\r\n        const chummerCyberwares = getArray(chummerChar.cyberwares.cyberware);\r\n        const parsedCyberware = [];\r\n        chummerCyberwares.forEach((chummerCyber) => {\r\n            try {\r\n                const itemData = this.parseCyberware(chummerCyber);\r\n                parsedCyberware.push(itemData);\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        });\r\n\r\n        return parsedCyberware;\r\n    }\r\n\r\n    parseCyberware(chummerCyber) {\r\n        const data = {};\r\n        data.description = parseDescription(chummerCyber);\r\n        data.technology = parseTechnology(chummerCyber);\r\n        \r\n        // Cyberware has no equipped flag in chummer so it cannot be parsed - we consider it as always equipped\r\n        data.technology.equipped = true;\r\n        data.essence = chummerCyber.ess;\r\n        data.grade = chummerCyber.grade;\r\n\r\n        return createItemData(chummerCyber.name, 'cyberware', data);\r\n    }\r\n}","import { getArray } from \"./BaseParserFunctions.js\"\r\nimport { GearsParser } from \"./gearImport/GearsParser\"\r\nimport { ArmorParser } from \"./ArmorParser\";\r\nimport { CyberwareParser } from \"./CyberwareParser\";\r\nimport { QualityParser } from \"./QualityParser\";\r\nimport { PowerParser } from \"./PowerParser\";\r\nimport { SpellParser } from \"./SpellParser\";\r\nimport { WeaponParser } from \"./WeaponParser\";\r\nimport { LifestyleParser } from \"./LifestyleParser\";\r\nimport { ContactParser } from \"./ContactParser\";\r\n\r\n/**\r\n * Parses all items (qualities, weapons, gear, ...) from a chummer character.\r\n */\r\nexport class ItemsParser {\r\n\r\n    /**\r\n     * Parses all items from a chummer char and returns an array of the corresponding foundry items.\r\n     * @param {*} chummerChar The chummer char holding the items\r\n     * @param {*} importOptions Additional import option that specify what items will be imported.\r\n     */\r\n    parse(chummerChar, importOptions) {\r\n        const parsedItems = [];\r\n\r\n        if (importOptions.qualities && chummerChar.qualities && chummerChar.qualities.quality) {\r\n            const parsedQualities = new QualityParser().parseQualities(chummerChar);\r\n            Array.prototype.push.apply(parsedItems, parsedQualities);\r\n        }\r\n\r\n        if (importOptions.weapons && chummerChar.weapons != null && chummerChar.weapons.weapon != null) {\r\n            const parsedWeapons = new WeaponParser().parseWeapons(chummerChar);\r\n            Array.prototype.push.apply(parsedItems, parsedWeapons);\r\n        }\r\n\r\n        if (importOptions.armor && chummerChar.armors && chummerChar.armors.armor) {\r\n            const parsedArmors = new ArmorParser().parseArmors(chummerChar);\r\n            Array.prototype.push.apply(parsedItems, parsedArmors);\r\n        }\r\n\r\n        if (importOptions.cyberware && chummerChar.cyberwares && chummerChar.cyberwares.cyberware) {\r\n            const parsedCyberware = new CyberwareParser().parseCyberwares(chummerChar);\r\n            Array.prototype.push.apply(parsedItems, parsedCyberware);\r\n        }\r\n\r\n        if (importOptions.powers && chummerChar.powers && chummerChar.powers.power) {\r\n            const parsedPowers = new PowerParser().parsePowers(chummerChar);\r\n            Array.prototype.push.apply(parsedItems, parsedPowers);\r\n        }\r\n\r\n        if (importOptions.equipment && chummerChar.gears && chummerChar.gears.gear) {\r\n            const gears = getArray(chummerChar.gears.gear);\r\n            const allGearData = new GearsParser().parseGears(gears);\r\n            Array.prototype.push.apply(parsedItems, allGearData);\r\n        }\r\n\r\n        if (importOptions.spells && chummerChar.spells && chummerChar.spells.spell) {\r\n            const parsedSpells = new SpellParser().parseSpells(chummerChar);\r\n            Array.prototype.push.apply(parsedItems, parsedSpells);\r\n        }\r\n\r\n        if (importOptions.contacts && chummerChar.contacts && chummerChar.contacts.contact) {\r\n            const parsedContacts = new ContactParser().parseContacts(chummerChar);\r\n            Array.prototype.push.apply(parsedItems, parsedContacts);\r\n        }\r\n\r\n        if (importOptions.lifestyles && chummerChar.lifestyles && chummerChar.lifestyles.lifestyle) {\r\n            const parsedLifestyles = new LifestyleParser().parseLifestyles(chummerChar);\r\n            Array.prototype.push.apply(parsedItems, parsedLifestyles);\r\n        }\r\n\r\n        return parsedItems;\r\n    }\r\n}\r\n","import { parseDescription, getArray, createItemData } from \"./BaseParserFunctions.js\"\r\nimport {SR5} from \"../../config\"\r\n\r\nexport class LifestyleParser {\r\n    parseLifestyles(chummerChar) {\r\n        \r\n        const chummerLifestyle = getArray(chummerChar.lifestyles.lifestyle);\r\n        const parsedLifestyle = [];\r\n\r\n        chummerLifestyle.forEach((chummerLifestyle) => {\r\n            try {\r\n                const itemData = this.parseLifestyle(chummerLifestyle);\r\n                parsedLifestyle.push(itemData);\r\n            }\r\n             catch (e) {\r\n                console.error(e);\r\n            }\r\n        });\r\n\r\n        return parsedLifestyle;\r\n    }\r\n\r\n    parseLifestyle(chummerLifestyle) {\r\n        const data = {};\r\n\r\n        // Advanced lifestyles and lifestyle qualities are not supported at the moment\r\n        // Map the chummer lifestyle type to our sr5 foundry type. \r\n        const chummerLifestyleType = chummerLifestyle.baselifestyle.toLowerCase();\r\n        if ((chummerLifestyleType in SR5.lifestyleTypes)) {\r\n            data.type = chummerLifestyleType;\r\n        }\r\n        else {\r\n            // This is necessary because of a typo in SR5 config.\r\n            if (chummerLifestyleType === 'luxury') {\r\n                data.type = 'luxory';\r\n            }\r\n            else {\r\n                data.type = 'other';\r\n            }\r\n        }\r\n\r\n        data.cost = chummerLifestyle.totalmonthlycost;\r\n        data.permanent = chummerLifestyle.purchased;\r\n        data.description = parseDescription(chummerLifestyle);\r\n\r\n        // The name of the lifestyle is optional, so we use a fallback here.\r\n        const itemName = chummerLifestyle.name ? chummerLifestyle.name : chummerLifestyle.baselifestyle;\r\n        const itemData = createItemData(itemName, 'lifestyle', data);\r\n        return itemData;\r\n    }\r\n}","import { parseDescription, getArray, createItemData } from \"./BaseParserFunctions.js\"\r\n\r\nexport class PowerParser {\r\n\r\n    parsePowers(chummerChar) {\r\n        const powers = getArray(chummerChar.powers.power);\r\n        const parsedPowers = [];\r\n\r\n        powers.forEach((chummerPower) => {\r\n            const itemData = this.parsePower(chummerPower);\r\n            parsedPowers.push(itemData);\r\n        });\r\n\r\n        return parsedPowers;\r\n    }\r\n\r\n    parsePower(chummerPower) {\r\n        const data = {};\r\n        data.description = parseDescription(chummerPower);\r\n\r\n        data.level = parseInt(chummerPower.rating);\r\n        data.pp = parseFloat(chummerPower.totalpoints);\r\n        const itemData = createItemData(chummerPower.fullname, 'adept_power', data);\r\n        return itemData;\r\n    }\r\n}","import { parseDescription, getArray, createItemData } from \"./BaseParserFunctions.js\"\r\nimport { DefaultValues } from \"../../dataTemplates\";\r\n\r\nexport class QualityParser {\r\n   \r\n    parseQualities(chummerChar) {\r\n        const qualities = getArray(chummerChar.qualities.quality);\r\n        const parsedQualities = [];\r\n\r\n        qualities.forEach((chummerQuality) => {\r\n            try {\r\n                const itemData = this.parseQuality(chummerQuality);\r\n                parsedQualities.push(itemData);\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        });\r\n\r\n        return parsedQualities;\r\n    }\r\n\r\n    parseQuality(chummerQuality) {\r\n        const data = DefaultValues.qualityData();\r\n        data.type = chummerQuality.qualitytype.toLowerCase();\r\n        data.description = parseDescription(chummerQuality);\r\n\r\n        const itemData = createItemData(chummerQuality.name, 'quality', data);\r\n        return itemData;\r\n    }\r\n}","import { parseDescription, getArray, createItemData } from \"./BaseParserFunctions.js\"\r\n\r\nexport class SpellParser {\r\n    parseSpells(chummerChar) {\r\n        const spells = getArray(chummerChar.spells.spell);\r\n        const parsedSpells = [];\r\n        spells.forEach((chummerSpell) => {\r\n            try {\r\n                if (chummerSpell.alchemy.toLowerCase() !== 'true') {\r\n                    const itemData = this.parseSpell(chummerSpell);\r\n                    parsedSpells.push(itemData);\r\n                }\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        });\r\n\r\n        return parsedSpells;\r\n    }\r\n\r\n    parseSpell(chummerSpell) {\r\n        const action = {};\r\n        const data = {};\r\n        data.action = action;\r\n        data.category = chummerSpell.category.toLowerCase().replace(/\\s/g, '_');\r\n        data.name = chummerSpell.name;\r\n        data.type = chummerSpell.type === 'M' ? 'mana' : 'physical';\r\n        data.range =\r\n            chummerSpell.range === 'T'\r\n                ? 'touch'\r\n                : chummerSpell.range\r\n                        .toLowerCase()\r\n                        .replace(/\\s/g, '_')\r\n                        .replace('(', '')\r\n                        .replace(')', '');\r\n        data.drain = parseInt(chummerSpell.dv.replace('F', ''));\r\n        data.description = parseDescription(chummerSpell);\r\n\r\n        let description = '';\r\n        if (chummerSpell.descriptors) description = chummerSpell.descriptors;\r\n        if (chummerSpell.description) description += `\\n${chummerSpell.description}`;\r\n        data.description.value = TextEditor.enrichHTML(description);\r\n\r\n        if (chummerSpell.duration.toLowerCase() === 's') data.duration = 'sustained';\r\n        else if (chummerSpell.duration.toLowerCase() === 'i')\r\n            data.duration = 'instant';\r\n        else if (chummerSpell.duration.toLowerCase() === 'p')\r\n            data.duration = 'permanent';\r\n\r\n        action.type = 'varies';\r\n        action.skill = 'spellcasting';\r\n        action.attribute = 'magic';\r\n\r\n        if (chummerSpell.descriptors) {\r\n            const desc = chummerSpell.descriptors.toLowerCase();\r\n            if (chummerSpell.category.toLowerCase() === 'combat') {\r\n                data.combat = {};\r\n                if (desc.includes('direct')) {\r\n                    data.combat.type = 'indirect';\r\n                    action.opposed = {\r\n                        type: 'defense',\r\n                    };\r\n                } else {\r\n                    data.combat.type = 'direct';\r\n                    if (data.type === 'mana') {\r\n                        action.opposed = {\r\n                            type: 'custom',\r\n                            attribute: 'willpower',\r\n                        };\r\n                    } else if (data.type === 'physical') {\r\n                        action.opposed = {\r\n                            type: 'custom',\r\n                            attribute: 'body',\r\n                        };\r\n                    }\r\n                }\r\n            }\r\n            if (chummerSpell.category.toLowerCase() === 'detection') {\r\n                data.detection = {};\r\n                const split = desc.split(',');\r\n                split.forEach((token) => {\r\n                    token = token || '';\r\n                    token = token.replace(' detection spell', '');\r\n                    if (!token) return;\r\n                    if (token.includes('area')) return;\r\n\r\n                    if (token.includes('passive'))\r\n                        data.detection.passive = true;\r\n                    else if (token.includes('active'))\r\n                        data.detection.passive = false;\r\n                    else if (token)\r\n                        data.detection.type = token.toLowerCase();\r\n                });\r\n                if (!data.detection.passive) {\r\n                    action.opposed = {\r\n                        type: 'custom',\r\n                        attribute: 'willpower',\r\n                        attribute2: 'logic',\r\n                    };\r\n                }\r\n            }\r\n            if (chummerSpell.category.toLowerCase() === 'illusion') {\r\n                data.illusion = {};\r\n                const split = desc.split(',');\r\n                split.forEach((token) => {\r\n                    token = token || '';\r\n                    token = token.replace(' illusion spell', '');\r\n                    if (!token) return;\r\n                    if (token.includes('area')) return;\r\n\r\n                    if (token.includes('sense'))\r\n                        data.illusion.sense = token.toLowerCase();\r\n                    else if (token)\r\n                        data.illusion.type = token.toLowerCase();\r\n                });\r\n                if (data.type === 'mana') {\r\n                    action.opposed = {\r\n                        type: 'custom',\r\n                        attribute: 'willpower',\r\n                        attribute2: 'logic',\r\n                    };\r\n                } else {\r\n                    action.opposed = {\r\n                        type: 'custom',\r\n                        attribute: 'intuition',\r\n                        attribute2: 'logic',\r\n                    };\r\n                }\r\n            }\r\n            if (chummerSpell.category.toLowerCase() === 'manipulation') {\r\n                data.manipulation = {};\r\n                if (desc.includes('environmental'))\r\n                    data.manipulation.environmental = true;\r\n                if (desc.includes('physical'))\r\n                    data.manipulation.physical = true;\r\n                if (desc.includes('mental'))\r\n                    data.manipulation.mental = true;\r\n                // TODO figure out how to parse damaging\r\n\r\n                if (data.manipulation.mental) {\r\n                    action.opposed = {\r\n                        type: 'custom',\r\n                        attribute: 'willpower',\r\n                        attribute2: 'logic',\r\n                    };\r\n                }\r\n                if (data.manipulation.physical) {\r\n                    action.opposed = {\r\n                        type: 'custom',\r\n                        attribute: 'body',\r\n                        attribute2: 'strength',\r\n                    };\r\n                }\r\n            }\r\n        }\r\n\r\n        return createItemData(chummerSpell.name, 'spell', data);\r\n    }\r\n}","import { parseDescription, getArray, getValues, parseTechnology, createItemData } from \"./BaseParserFunctions.js\"\r\n\r\nexport class WeaponParser {\r\n    parseDamage = (val) => {\r\n        const damage = {\r\n            damage: 0,\r\n            type: 'physical',\r\n            radius: 0,\r\n            dropoff: 0,\r\n        };\r\n        const split = val.split(',');\r\n        if (split.length > 0) {\r\n            const l = split[0].match(/(\\d+)(\\w+)/);\r\n            if (l && l[1]) damage.damage = parseInt(l[1]);\r\n            if (l && l[2]) damage.type = l[2] === 'P' ? 'physical' : 'stun';\r\n        }\r\n        for (let i = 1; i < split.length; i++) {\r\n            const l = split[i].match(/(-?\\d+)(.*)/);\r\n            if (l && l[2]) {\r\n                if (l[2].toLowerCase().includes('/m')) damage.dropoff = parseInt(l[1]);\r\n                else damage.radius = parseInt(l[1]);\r\n            }\r\n        }\r\n        return damage;\r\n    };\r\n\r\n    parseWeapons(chummerChar) {\r\n        const weapons = getArray(chummerChar.weapons.weapon);\r\n        const parsedWeapons = [];\r\n\r\n        weapons.forEach((chummerWeapon) => {\r\n            try {\r\n                const itemData = this.parseWeapon(chummerWeapon);\r\n                parsedWeapons.push(itemData);\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        });\r\n    \r\n        return parsedWeapons;\r\n    }\r\n\r\n    parseWeapon(chummerWeapon) {\r\n        const data = {};\r\n        const action = {};\r\n        const damage = {};\r\n        action.damage = damage;\r\n        data.action = action;\r\n\r\n        data.description = parseDescription(chummerWeapon);\r\n        data.technology = parseTechnology(chummerWeapon);\r\n\r\n        damage.ap = {\r\n            base: parseInt(getValues(chummerWeapon.ap)[0])\r\n        };\r\n        action.type = 'varies';\r\n        if (chummerWeapon.skill)\r\n            action.skill = chummerWeapon.skill.toLowerCase().replace(/\\s/g, '_');\r\n        else if (chummerWeapon.category && chummerWeapon.category.toLowerCase().includes('exotic'))\r\n            action.skill = chummerWeapon.category\r\n                .toLowerCase()\r\n                .replace(' weapons', '')\r\n                .replace(/\\s/g, '_');\r\n        if (action.skill.includes('exotic'))\r\n            action.skill = action.skill.replace('_weapon', '');\r\n        action.attribute = 'agility';\r\n        action.limit = {\r\n            base: parseInt(getValues(chummerWeapon.accuracy)[0])\r\n        };\r\n        action.opposed = {\r\n            type: 'defense',\r\n        };\r\n\r\n        if (chummerWeapon.type.toLowerCase() === 'melee') {\r\n            action.type = 'complex';\r\n            data.category = 'melee';\r\n            const melee = {};\r\n            data.melee = melee;\r\n            melee.reach = parseInt(chummerWeapon.reach);\r\n        } else if (chummerWeapon.type.toLowerCase() === 'ranged') {\r\n            data.category = 'range';\r\n            if (chummerWeapon.skill.toLowerCase().includes('throw')) {\r\n                data.category = 'thrown'; // TODO clean this up\r\n            }\r\n            const range = {};\r\n            data.range = range;\r\n            range.rc = {\r\n                base: parseInt(getValues(chummerWeapon.rc)[0]),\r\n            };\r\n            if (chummerWeapon.mode) {\r\n                // HeroLab export doesn't have mode\r\n                const lower = chummerWeapon.mode.toLowerCase();\r\n                range.modes = {\r\n                    single_shot: lower.includes('ss'),\r\n                    semi_auto: lower.includes('sa'),\r\n                    burst_fire: lower.includes('bf'),\r\n                    full_auto: lower.includes('fa'),\r\n                };\r\n            }\r\n            if (chummerWeapon.clips != null && chummerWeapon.clips.clip != null) {\r\n                // HeroLab export doesn't have clips\r\n                const clips = Array.isArray(chummerWeapon.clips.clip)\r\n                    ? chummerWeapon.clips.clip\r\n                    : [chummerWeapon.clips.clip];\r\n                clips.forEach((clip) => {\r\n                    console.log(clip);\r\n                });\r\n            }\r\n            if (chummerWeapon.ranges &&\r\n                chummerWeapon.ranges.short &&\r\n                chummerWeapon.ranges.medium &&\r\n                chummerWeapon.ranges.long &&\r\n                chummerWeapon.ranges.extreme) {\r\n                console.log(chummerWeapon.ranges);\r\n                range.ranges = {\r\n                    short: parseInt(chummerWeapon.ranges.short.split('-')[1]),\r\n                    medium: parseInt(chummerWeapon.ranges.medium.split('-')[1]),\r\n                    long: parseInt(chummerWeapon.ranges.long.split('-')[1]),\r\n                    extreme: parseInt(chummerWeapon.ranges.extreme.split('-')[1]),\r\n                };\r\n            }\r\n            // TODO figure out how to add mods to weapons\r\n            // if (w.accessories && w.accessories.accessory) {\r\n            //     range.mods = [];\r\n            //     const accessories = getArray(w.accessories.accessory);\r\n            //     accessories.forEach((a) => {\r\n            //         if (a) {\r\n            //             range.mods.push({\r\n            //                 name: a.name,\r\n            //             });\r\n            //         }\r\n            //     });\r\n            // }\r\n        } else if (chummerWeapon.type.toLowerCase() === 'thrown') {\r\n            data.category = 'thrown';\r\n        }\r\n        {\r\n            // TODO handle raw damage if present\r\n            const d = this.parseDamage(chummerWeapon.damage_english);\r\n            damage.base = d.damage;\r\n            damage.type = {};\r\n            damage.type.base = d.type;\r\n            if (d.dropoff || d.radius) {\r\n                const thrown = {};\r\n                data.thrown = thrown;\r\n                thrown.blast = {\r\n                    radius: d.radius,\r\n                    dropoff: d.dropoff,\r\n                };\r\n            }\r\n        }\r\n\r\n        const itemData = createItemData(chummerWeapon.name, 'weapon', data);\r\n        return itemData;\r\n    }\r\n}","import { BaseGearParser } from \"./BaseGearParser\"\r\n\r\n/**\r\n * Parses ammunition\r\n */\r\nexport class AmmoParser extends BaseGearParser {\r\n   \r\n    parse(chummerGear : any) : any {\r\n        const parsedGear =  super.parse(chummerGear);\r\n        parsedGear.type = 'ammo';\r\n\r\n        if (chummerGear.weaponbonusap) {\r\n            parsedGear.data.ap = parseInt(chummerGear.weaponbonusap);\r\n        }\r\n\r\n        if (chummerGear.weaponbonusdamage) {\r\n            parsedGear.data.damage = parseInt(chummerGear.weaponbonusdamage);\r\n\r\n            if (chummerGear.weaponbonusdamage.includes('P')) {\r\n                parsedGear.data.damageType = 'physical';\r\n            } else if (chummerGear.weaponbonusdamage.includes('S')) {\r\n                parsedGear.data.damageType = 'stun';\r\n            } else if (chummerGear.weaponbonusdamage.includes('M')) {\r\n                parsedGear.data.damageType = 'matrix';\r\n            }\r\n            else {\r\n                parsedGear.data.damageType = 'physical';\r\n            }\r\n        }\r\n\r\n        return parsedGear;\r\n    }\r\n}","import { DefaultValues } from \"../../../dataTemplates\";\r\nimport { parseDescription, getArray, getValues, parseTechnology, createItemData } from \"../BaseParserFunctions.js\"\r\n\r\nimport Equipment = Shadowrun.Equipment;\r\n\r\n/**\r\n * Parses a certain class of gear (depending on the implementation).\r\n */\r\nexport interface GearParser {\r\n    /**\r\n     * Parses a gear entry and returns the corresponding foundry sr item data.\r\n     * @param chummerGear A chummer gear entry\r\n     */\r\n    parse(chummerGear : any) : any\r\n}\r\n\r\n/**\r\n * Base class for all gear parsers. Parses common information across all gear.\r\n */\r\nexport class BaseGearParser implements GearParser {\r\n    parse(chummerGear : any) : any {\r\n        const parsedGear = this.getDefaultData();\r\n        parsedGear.name = chummerGear.name;\r\n        if (chummerGear.extra)\r\n        {\r\n            parsedGear.name += ` (${chummerGear.extra})`;\r\n        }\r\n\r\n        parsedGear.data.technology = parseTechnology(chummerGear);\r\n        parsedGear.data.description = parseDescription(chummerGear);\r\n\r\n        return parsedGear;\r\n    }\r\n\r\n    private getDefaultData() : Equipment {\r\n        return {\r\n            name: '',\r\n            _id: '',\r\n            folder: '',\r\n            flags: {},\r\n            img: 'icons/svg/mystery-man.svg',\r\n            type: 'equipment',\r\n            data: DefaultValues.equipmentData(),\r\n            permission: {\r\n                default: 2,\r\n            },\r\n        };\r\n    }\r\n}\r\n\r\n","import { BaseGearParser } from \"./BaseGearParser\"\r\n\r\n/**\r\n * Parses devices (commlinks and decks)\r\n */\r\nexport class DeviceParser extends BaseGearParser {\r\n   \r\n    parse(chummerGear : any) : any {\r\n        const parsedGear =  super.parse(chummerGear);\r\n        parsedGear.type = 'device';\r\n        parsedGear.data.technology.rating = chummerGear.devicerating;\r\n\r\n        parsedGear.data.atts = {\r\n            att1:\r\n            {\r\n                value: chummerGear.attack,\r\n                att: 'attack'\r\n            },\r\n\r\n            att2:\r\n            {\r\n                value: chummerGear.sleaze,\r\n                att: 'sleaze'\r\n            },\r\n\r\n            att3:\r\n            {\r\n                value: chummerGear.dataprocessing,\r\n                att: 'data_processing'\r\n            },\r\n\r\n            att4:\r\n            {\r\n                value: chummerGear.firewall,\r\n                att: 'firewall'\r\n            } \r\n        };\r\n\r\n        if (chummerGear.category === 'Cyberdecks')\r\n        {\r\n            parsedGear.data.category = 'cyberdeck';\r\n        }\r\n\r\n        if (chummerGear.category === 'Commlinks')\r\n        {\r\n            parsedGear.data.category = 'commlink';\r\n        }\r\n\r\n        if (chummerGear.category === 'Rigger Command Consoles')\r\n        {\r\n            // We are handling rccs as commlinks for the moment since we have no support for rigger command consoles yet.\r\n            parsedGear.data.category = 'commlink'; \r\n        }\r\n\r\n        return parsedGear;\r\n    }\r\n}","import { ParserSelector } from \"./ParserSelector\";\r\n\r\n/**\r\n * Parses all gear from a chummer character file and turns them into foundry sr item data objects\r\n */\r\nexport class GearsParser {\r\n\r\n    /**\r\n     * Parses all chummer gear entries\r\n     * @param chummerGears Array of chummer gear entries\r\n     */\r\n    parseGears(chummerGears : any) : any {\r\n        let items : any[] = [];\r\n\r\n        chummerGears.forEach((chummerGear) => {\r\n            try {\r\n                // First filter out gear entries, that we do not want to handle.\r\n                if (!this.gearShouldBeParsed(chummerGear)) {\r\n                    return;\r\n                }\r\n\r\n                const itemsData = this.parseGearEntry(chummerGear);\r\n                items.push(itemsData);\r\n            }\r\n\r\n            catch (e) {\r\n                console.error(e);\r\n            }\r\n        });\r\n\r\n        return items;\r\n    }\r\n\r\n    private parseGearEntry(chummerGear : any) : any {\r\n        const parserSelector = new ParserSelector();\r\n        const parser = parserSelector.select(chummerGear);\r\n        return parser.parse(chummerGear);\r\n    }\r\n\r\n    private gearShouldBeParsed(chummerGear : any) : boolean {\r\n        // We do not handle grenades and rockets here since they are also in the weapons section with more info.\r\n        const englishGearName = (chummerGear.name_english as string).toLowerCase();\r\n        if (englishGearName.startsWith('grenade') || \r\n            englishGearName.startsWith('minigrenade') || \r\n            englishGearName.startsWith('rocket'))\r\n        {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n}\r\n","import { GearParser, BaseGearParser } from \"./BaseGearParser\";\r\nimport { SinParser } from \"./SinParser\";\r\nimport { DeviceParser } from \"./DeviceParser\";\r\nimport { ProgramParser } from \"./ProgramParser\";\r\nimport { AmmoParser } from \"./AmmoParser\";\r\n\r\n/**\r\n * Responsible for selecting the correct GearParser depending on the gear.\r\n */\r\nexport class ParserSelector {\r\n\r\n    /**\r\n     * Selects the correct GearParser depending on the gear.\r\n     * @param chummerGear The gear that needs to be parsed\r\n     * The correct GearParser for this gear entry.\r\n     */ \r\n    select(chummerGear : any) : GearParser {\r\n        if (chummerGear.issin === 'True')\r\n        {\r\n            return new SinParser();\r\n        }\r\n\r\n        if (chummerGear.iscommlink === 'True')\r\n        {\r\n            return new DeviceParser();\r\n        }\r\n\r\n        if (chummerGear.isammo === 'True')\r\n        {\r\n            return new AmmoParser();\r\n        }\r\n\r\n        if (chummerGear.category === 'Common Programs' || \r\n            chummerGear.category === 'Hacking Programs' || \r\n            chummerGear.category === 'Software')\r\n        {\r\n            return new ProgramParser();\r\n        }\r\n\r\n        return new BaseGearParser();\r\n    }\r\n}","import { BaseGearParser } from \"./BaseGearParser\"\r\n\r\n/**\r\n * Parses common, hacking and agent programs.\r\n */\r\nexport class ProgramParser extends BaseGearParser {\r\n    parse(chummerGear : any) : any {\r\n        const parsedGear =  super.parse(chummerGear);\r\n        parsedGear.type = 'program';\r\n\r\n        if (chummerGear.category === 'Common Programs')\r\n        {\r\n            parsedGear.data.type = 'common_program'\r\n        }\r\n        else if (chummerGear.category === 'Hacking Programs')\r\n        {\r\n            parsedGear.data.type = 'hacking_program'\r\n        } \r\n        else if (chummerGear.category === 'Software')\r\n        {\r\n            parsedGear.data.type = 'agent'\r\n        }\r\n\r\n        return parsedGear;\r\n    }\r\n}","import { BaseGearParser } from \"./BaseGearParser\"\r\n\r\n/**\r\n * Parses SINs and the attached licenses.\r\n * Licenses that are not attached to a SIN are not handled.\r\n */\r\nexport class SinParser extends BaseGearParser {\r\n    parse(chummerGear : any) : any {\r\n        const parsedGear =  super.parse(chummerGear);\r\n        parsedGear.type = 'sin';\r\n\r\n        // Create licenses if there are any\r\n        if (chummerGear.children) {\r\n\r\n            // \"gear\" is either  a single gear entry or an array of gear entries depending on the number of licenses\r\n            const chummerLicenses : any[] = [];\r\n            if (!Array.isArray(chummerGear.children.gear)) {\r\n                chummerLicenses.push(chummerGear.children.gear)\r\n            }\r\n            else {\r\n                chummerLicenses.push(...chummerGear.children.gear);\r\n            }\r\n\r\n            parsedGear.data.licenses = this.parseLicenses(chummerLicenses);\r\n        }\r\n        return parsedGear;\r\n    }\r\n\r\n    private parseLicenses(chummerLicenses : any) : any[] {\r\n        const parsedLicenses : any[] = []; \r\n\r\n        chummerLicenses.forEach(chummerLicense => {\r\n            if (chummerLicense.category === 'ID/Credsticks')\r\n            {\r\n                parsedLicenses.push(\r\n                    {\r\n                        name: chummerLicense.extra, // 'extra' holds the type of license from chummer\r\n                        rtg: chummerLicense.rating,\r\n                        description: ''\r\n                    }\r\n                );\r\n            }\r\n        });\r\n\r\n        return parsedLicenses;\r\n    }\r\n}\r\n","import {_mergeWithMissingSkillFields} from \"../actor/prep/functions/SkillsPrep\";\r\nimport {CharacterImporter} from \"./characterImport/CharacterImporter\"\r\n\r\nexport class ChummerImportForm extends FormApplication {\r\n    static get defaultOptions() {\r\n        const options = super.defaultOptions;\r\n        options.id = 'chummer-import';\r\n        options.classes = ['shadowrun5e'];\r\n        options.title = 'Chummer/Hero Lab Import';\r\n        options.template = 'systems/shadowrun5e/dist/templates/apps/import.html';\r\n        options.width = 600;\r\n        options.height = 'auto';\r\n        return options;\r\n    }\r\n\r\n    getData() {\r\n        return {};\r\n    }\r\n\r\n    activateListeners(html) {\r\n        html.find('.submit-chummer-import').click(async (event) => {\r\n            event.preventDefault();\r\n\r\n            const chummerFile = JSON.parse($('.chummer-text').val());\r\n            const importOptions = {\r\n                weapons: $('.weapons').is(':checked'),\r\n                armor: $('.armor').is(':checked'),\r\n                cyberware: $('.cyberware').is(':checked'),\r\n                equipment: $('.gear').is(':checked'),\r\n                qualities: $('.qualities').is(':checked'),\r\n                powers: $('.powers').is(':checked'),\r\n                spells: $('.spells').is(':checked'),\r\n                contacts: $('.contacts').is(':checked'),\r\n                lifestyles: $('.lifestyles').is(':checked'),\r\n            }\r\n\r\n            const importer = new CharacterImporter();\r\n            await importer.importChummerCharacter(this.object, chummerFile, importOptions);\r\n\r\n            ui.notifications.info(\r\n                'Complete! Check everything. Notably: Ranged weapon mods and ammo; Strength based weapon damage; Specializations on all spells, powers, and weapons;'\r\n            );\r\n            this.close();\r\n        });\r\n    }\r\n}\r\n","import {FormDialog, FormDialogData} from \"./FormDialog\";\r\nimport DamageData = Shadowrun.DamageData;\r\nimport ActorArmorData = Shadowrun.ActorArmorData;\r\nimport {SR5Actor} from \"../../actor/SR5Actor\";\r\n\r\nexport type DamageAndSoakPerActor = {\r\n    actor: SR5Actor;\r\n    modified: DamageData;\r\n    armor: ActorArmorData;\r\n    perception?: string;\r\n    hotsim?: boolean;\r\n}\r\n\r\nexport class DamageApplicationDialog extends FormDialog {\r\n\r\n    constructor(damagePerActor : DamageAndSoakPerActor[], damage: DamageData, options?: Application.Options) {\r\n\r\n        const dialogData = DamageApplicationDialog.getDialogData(damagePerActor, damage);\r\n        super(dialogData, options);\r\n    }\r\n\r\n    static get defaultOptions() {\r\n        const options = super.defaultOptions;\r\n        options.id = 'damage-application';\r\n        // TODO: Class Dialog here is needed for dialog button styling.\r\n        options.classes = ['sr5', 'form-dialog'];\r\n        options.resizable = true;\r\n        options.height = 'auto';\r\n        return options; \r\n    }\r\n\r\n    static getDialogData(damagePerActor : DamageAndSoakPerActor[], damage: DamageData): FormDialogData {\r\n        const title = game.i18n.localize('SR5.DamageApplication.Title');\r\n        const templatePath = 'systems/shadowrun5e/dist/templates/apps/dialogs/damage-application.html';\r\n\r\n        const actorDamage : any = damagePerActor;\r\n\r\n        const templateData = {\r\n            damage,\r\n            actorDamage,\r\n        };\r\n\r\n        const buttons = {\r\n            damage: {\r\n                label: game.i18n.localize('SR5.DamageApplication.ApplyDamage')\r\n            }\r\n        }\r\n\r\n        const onAfterClose = () => actorDamage;\r\n\r\n        return {\r\n            title,\r\n            templatePath,\r\n            templateData,\r\n            onAfterClose,\r\n            buttons,\r\n            default: 'damage'\r\n        }\r\n    }\r\n}","import {FormDialog} from \"./FormDialog\";\r\n\r\nexport class DeleteConfirmationDialog extends FormDialog {\r\n    constructor(options?: Application.Options) {\r\n        const dialogData = DeleteConfirmationDialog.getDialogData();\r\n\r\n        super(dialogData, options)\r\n    }\r\n\r\n    static getDialogData() {\r\n        return {\r\n            title: game.i18n.localize(\"SR5.DeleteConfirmationApplication.Title\"),\r\n            buttons: {\r\n                delete: {\r\n                    label: game.i18n.localize('SR5.DeleteConfirmationApplication.Delete')\r\n                },\r\n                cancel: {\r\n                    label: game.i18n.localize('SR5.DeleteConfirmationApplication.Cancel')\r\n                }\r\n            },\r\n            default: 'cancel',\r\n            templateData: {},\r\n            templatePath: 'systems/shadowrun5e/dist/templates/apps/dialogs/delete-confirmation-dialog.html'\r\n        }\r\n    }\r\n\r\n    static get defaultOptions() {\r\n        const options = super.defaultOptions;\r\n        options.id = 'delete-confirmation-application';\r\n        // Class Dialog here is needed for dialog button styling.\r\n        options.classes = ['sr5', 'form-dialog'];\r\n        options.resizable = true;\r\n        options.height = 'auto';\r\n        return options;\r\n    }\r\n}","export interface FormDialogData {\r\n    title?: string;\r\n\tbuttons: Record<string, DialogButton>;\r\n\tdefault?: string;\r\n\ttemplateData: object;\r\n\ttemplatePath: string;\r\n\tonAfterClose?: Function;\r\n}\r\n\r\n/** TODO: Documentation with usage example\r\n *  TODO: Rework getDialogData approach with the general getData Application style,\r\n *        to allow rerender from within the Dialog instance without external data\r\n *        reinitialization.\r\n *        This would for things like updating a dialog based on currently selected tokens\r\n *        without reopening.\r\n */\r\nexport class FormDialog extends Dialog {\r\n    selection: object;\r\n    selectedButton: string;\r\n\r\n    _onAfterClose: Function;\r\n    _selectionPromise: Promise<object>;\r\n    _selectionResolve: Function;\r\n    _selectionReject: Function;\r\n    _templateData: object;\r\n    _templatePath: string;\r\n\r\n    constructor(dialogData: FormDialogData, options?: Application.Options) {\r\n        super(dialogData, options);\r\n\r\n        const {templateData, templatePath} = dialogData;\r\n        this._templateData = templateData;\r\n        this._templatePath = templatePath;\r\n\r\n        this._onAfterClose = dialogData.onAfterClose ? dialogData.onAfterClose : () => {};\r\n\r\n        this.selection = this._emptySelection();\r\n\r\n        this._selectionPromise = new Promise((resolve, reject) => {\r\n            this._selectionResolve = resolve;\r\n            // Reject is stored, but never used in favor of FormDialog.canceled\r\n            this._selectionReject = reject;\r\n        });\r\n\r\n        this._amendButtonsWithName();\r\n    }\r\n\r\n    async close() {\r\n        await super.close();\r\n\r\n        if (this.canceled) {\r\n            this._selectionResolve(this.selection);\r\n        }\r\n    }\r\n\r\n    async submit(button) {\r\n        this.selectedButton = button.name ?? button.label;\r\n\r\n        //@ts-ignore\r\n        super.submit(button);\r\n        await this.afterSubmit(\"jQuery\" in this.options ? this.element : this.element [0]);\r\n    }\r\n\r\n    async afterSubmit(html: JQuery) {\r\n        // Await in case of a possible async handler.\r\n        this.selection = await this._onAfterClose(html, this.selectedButton);\r\n        this._selectionResolve(this.selection);\r\n    }\r\n\r\n    async getData(options) {\r\n        const content = await renderTemplate(this._templatePath, this._templateData);\r\n        return mergeObject(super.getData(), {\r\n            content\r\n        });\r\n    }\r\n\r\n    async select(): Promise<any> {\r\n        await this.render(true);\r\n\r\n        if (this._selectionPromise === undefined || this.selection === undefined) {\r\n            return this._emptySelection();\r\n        }\r\n        return await this._selectionPromise;\r\n    }\r\n\r\n    _emptySelection(): object {\r\n        return {};\r\n    }\r\n\r\n    /** Dialog has been confirmed and something has been selected.\r\n     */\r\n    get selected(): boolean {\r\n        return !this.canceled;\r\n    }\r\n\r\n    /** Dialog has been canceled and nothing has been selected\r\n     */\r\n    get canceled(): boolean {\r\n        return !this.selectedButton;\r\n    }\r\n\r\n    /** @override */\r\n    static getButtons(): Record<string, DialogButton> {\r\n        return {};\r\n    }\r\n\r\n    /** Allow for the selected button to be addressed by it's key, not it's localized label.\r\n     */\r\n    _amendButtonsWithName() {\r\n        //@ts-ignore\r\n        Object.keys(this.data.buttons).forEach(name => this.data.buttons[name].name = name);\r\n    }\r\n}","import {FormDialog, FormDialogData} from \"./FormDialog\";\r\nimport {SR5Actor} from \"../../actor/SR5Actor\";\r\nimport {PartsList} from \"../../parts/PartsList\";\r\nimport {Helpers} from \"../../helpers\";\r\nimport {SkillFlow} from \"../../actor/SkillFlow\";\r\nimport DefenseRollOptions = Shadowrun.DefenseRollOptions;\r\nimport ModList = Shadowrun.ModList;\r\nimport SoakRollOptions = Shadowrun.SoakRollOptions;\r\nimport SkillDialogOptions = Shadowrun.SkillDialogOptions;\r\nimport CombatData = Shadowrun.CombatData;\r\nimport DamageType = Shadowrun.DamageType;\r\n\r\nexport class ShadowrunActorDialogs {\r\n    static async createDefenseDialog(actor: SR5Actor, options: DefenseRollOptions, partsProps: ModList<number>): Promise<FormDialog> {\r\n        const defenseDialogData = ShadowrunActorDialogs.getDefenseDialogData(actor, options, partsProps);\r\n\r\n        return new FormDialog(defenseDialogData);\r\n    }\r\n\r\n    static async createSoakDialog(options: SoakRollOptions, soakParts: PartsList<number>): Promise<FormDialog> {\r\n        const soakDialogData = ShadowrunActorDialogs.getSoakDialogData(options, soakParts);\r\n        return new FormDialog(soakDialogData);\r\n    }\r\n\r\n    static async createSkillDialog(actor: SR5Actor, options: SkillDialogOptions, partsProps: PartsList<number>): Promise<FormDialog> {\r\n        const skillDialogData = ShadowrunActorDialogs.getSkillDialogData(actor, options, partsProps);\r\n\r\n        return new FormDialog(skillDialogData);\r\n    }\r\n\r\n    static getDefenseDialogData(actor: SR5Actor,  options: DefenseRollOptions, partsProps: ModList<number>): FormDialogData {\r\n        const title = game.i18n.localize('SR5.Defense');\r\n\r\n        const activeDefenses = {\r\n            full_defense: {\r\n                label: 'SR5.FullDefense',\r\n                value: actor.getFullDefenseAttribute()?.value,\r\n                initMod: -10,\r\n            },\r\n            dodge: {\r\n                label: 'SR5.Dodge',\r\n                value: actor.findActiveSkill('gymnastics')?.value,\r\n                initMod: -5,\r\n            },\r\n            block: {\r\n                label: 'SR5.Block',\r\n                value: actor.findActiveSkill('unarmed_combat')?.value,\r\n                initMod: -5,\r\n            },\r\n        };\r\n\r\n        const equippedMeleeWeapons = actor.getEquippedWeapons().filter((w) => w.isMeleeWeapon());\r\n        let defenseReach = 0;\r\n        equippedMeleeWeapons.forEach((weapon) => {\r\n            activeDefenses[`parry-${weapon.name}`] = {\r\n                label: 'SR5.Parry',\r\n                weapon: weapon.name,\r\n                value: actor.findActiveSkill(weapon.getActionSkill())?.value,\r\n                init: -5,\r\n            };\r\n            defenseReach = Math.max(defenseReach, weapon.getReach());\r\n        });\r\n\r\n        const parts = new PartsList(partsProps);\r\n        actor._addDefenseParts(parts);\r\n\r\n        // if we are defending a melee attack\r\n        if (options.attack?.reach) {\r\n            const incomingReach = options.attack.reach;\r\n            const netReach = defenseReach - incomingReach;\r\n            if (netReach !== 0) {\r\n                parts.addUniquePart('SR5.Reach', netReach);\r\n            }\r\n        }\r\n\r\n        const buttons = {\r\n            continue: {\r\n                label: game.i18n.localize('SR5.Continue'),\r\n                callback: () => {},\r\n            },\r\n        };\r\n\r\n        const onAfterClose = (html) => {\r\n            const cover = Helpers.parseInputToNumber($(html).find('[name=cover]').val());\r\n            const special = Helpers.parseInputToString($(html).find('[name=activeDefense]').val());\r\n            // Zero to indicate no initiative result change.\r\n            const combat: CombatData = {};\r\n\r\n            if (cover) {\r\n                parts.addUniquePart('SR5.Cover', cover)\r\n            }\r\n            if (special) {\r\n                // Defense pool modifier\r\n                const defense = activeDefenses[special];\r\n                parts.addUniquePart(defense.label, defense.value);\r\n\r\n                // Combat initiative modifier\r\n                combat.initiative = defense.initMod;\r\n            }\r\n\r\n            return {cover, special, parts, combat};\r\n        }\r\n\r\n        const templatePath = 'systems/shadowrun5e/dist/templates/rolls/roll-defense.html';\r\n        const templateData = {\r\n            parts: parts.getMessageOutput(),\r\n            cover: options.cover,\r\n            activeDefenses\r\n        };\r\n\r\n        return {\r\n            title,\r\n            templateData,\r\n            templatePath,\r\n            buttons,\r\n            onAfterClose\r\n        }\r\n    }\r\n\r\n\r\n    static getSoakDialogData(soakRollOptions: SoakRollOptions, soakParts : PartsList<number>): FormDialogData {\r\n        const title = game.i18n.localize('SR5.DamageResistanceTest');\r\n\r\n        const templatePath = 'systems/shadowrun5e/dist/templates/rolls/roll-soak.html';\r\n        const templateData = {\r\n            damage: soakRollOptions?.damage,\r\n            parts: soakParts.getMessageOutput(),\r\n            elementTypes: CONFIG.SR5.elementTypes,\r\n            damageTypes: CONFIG.SR5.damageTypes\r\n        };\r\n\r\n        const buttons =  {\r\n            continue: {\r\n                label: game.i18n.localize('SR5.Continue'),\r\n                callback: () => {},\r\n            },\r\n        };\r\n\r\n        const onAfterClose = (html: JQuery) => {\r\n            const incomingDamage = Helpers.parseInputToNumber($(html).find('[name=incomingDamage]').val());\r\n            const ap = Helpers.parseInputToNumber($(html).find('[name=ap]').val());\r\n            const element = Helpers.parseInputToString($(html).find('[name=element]').val());\r\n            const damageType = Helpers.parseInputToString($(html).find('[name=damageType]').val()) as DamageType;\r\n\r\n            return {incomingDamage, damageType, ap, element};\r\n        }\r\n\r\n        return {\r\n            title,\r\n            templatePath,\r\n            templateData,\r\n            buttons,\r\n            onAfterClose\r\n        }\r\n    }\r\n\r\n    static getSkillDialogData(actor: SR5Actor, options: SkillDialogOptions, partsProps: PartsList<number>): FormDialogData {\r\n        const title = game.i18n.localize(options.skill.label || options.skill.name);\r\n        const templatePath = 'systems/shadowrun5e/dist/templates/rolls/skill-roll.html';\r\n\r\n        const attributes = actor.getAttributes();\r\n        const attribute = actor.getAttribute(options.attribute ? options.attribute : options.skill.attribute);\r\n        const limits = actor.getLimits();\r\n\r\n        const templateData = {\r\n            attribute: options.skill.attribute,\r\n            attributes: Helpers.filter(attributes, ([, value]) => value.value > 0),\r\n            limit: attribute.limit,\r\n            limits\r\n        }\r\n\r\n\r\n        const buttons = {\r\n            roll: {\r\n                label: game.i18n.localize('SR5.NormalSkillButton'),\r\n                callback: () => {},\r\n            },\r\n        };\r\n        // add specializations to dialog as buttons\r\n        if (options.skill.specs?.length) {\r\n            options.skill.specs.forEach(\r\n                (spec) =>\r\n                    (buttons[spec] = {\r\n                        label: spec,\r\n                        callback: () => {},\r\n                    }),\r\n            );\r\n        }\r\n\r\n        const onAfterClose = (html: JQuery, selectedButton) => {\r\n            const newAtt = Helpers.parseInputToString($(html).find('[name=\"attribute\"]').val());\r\n            const newLimit = Helpers.parseInputToString($(html).find('[name=\"attribute.limit\"]').val());\r\n            const attribute = actor.getAttribute(newAtt);\r\n            const limit = actor.getLimit(newLimit);\r\n            // Legacy skills have a label, but no name. Custom skills have a name but no label.\r\n            const skillLabel = game.i18n.localize(options.skill.label || options.skill.name);\r\n            const attributeLabel = game.i18n.localize(CONFIG.SR5.attributes[newAtt]);\r\n            const testLabel = game.i18n.localize('SR5.Test')\r\n\r\n            const skillTestTitle = `${skillLabel} + ${attributeLabel} ${testLabel}`;\r\n\r\n            partsProps.addUniquePart(attribute.label, attribute.value);\r\n\r\n            SkillFlow.handleDefaulting(options.skill, partsProps);\r\n\r\n            // Possible specialization based on button label.\r\n            const isSpecialization = options.skill.specs.includes(selectedButton);\r\n            if (isSpecialization) {\r\n                partsProps.addUniquePart('SR5.Specialization', 2);\r\n            }\r\n\r\n            return {\r\n                title: skillTestTitle,\r\n                attribute,\r\n                limit,\r\n                skill: options.skill,\r\n                parts: partsProps\r\n            }\r\n        }\r\n\r\n        return {\r\n            title,\r\n            templatePath,\r\n            templateData,\r\n            buttons,\r\n            onAfterClose\r\n        }\r\n    }\r\n}","import {SR5Item} from '../../item/SR5Item';\r\nimport {Helpers} from '../../helpers';\r\nimport {LENGTH_UNIT, SR} from \"../../constants\";\r\nimport {SR5Actor} from \"../../actor/SR5Actor\";\r\nimport FireModeData = Shadowrun.FireModeData;\r\nimport RangesTemplateData = Shadowrun.RangesTemplateData;\r\nimport RangeData = Shadowrun.RangeData;\r\nimport {FormDialog} from \"./FormDialog\";\r\nimport WeaponData = Shadowrun.WeaponData;\r\nimport {Modifiers} from \"../../sr5/Modifiers\";\r\n\r\ntype ItemDialogData = {\r\n    dialogData: DialogData | undefined,\r\n    getActionTestData: Function | undefined,\r\n    itemHasNoDialog: boolean\r\n};\r\n\r\nexport type RangedWeaponActionTestData = {\r\n    environmental: {\r\n        range?: number\r\n    },\r\n    fireMode: FireModeData,\r\n}\r\n\r\nexport type SpellActionTestData = {\r\n    force: number,\r\n    reckless: boolean,\r\n}\r\n\r\nexport type ComplexFormTestData = {\r\n    level: number\r\n}\r\n\r\nexport type ActionTestData = {\r\n    rangedWeapon?: RangedWeaponActionTestData,\r\n    spell?: SpellActionTestData,\r\n    complexForm?: ComplexFormTestData,\r\n    targetId?: string\r\n}\r\n\r\n\r\nexport class ShadowrunItemDialog {\r\n    static async create(item: SR5Item, event?: MouseEvent): Promise<FormDialog|undefined> {\r\n\r\n        if (item.isRangedWeapon()) {\r\n            return ShadowrunItemDialog.createRangedWeaponDialog(item, event);\r\n        }\r\n\r\n        if (item.isSpell()) {\r\n            return ShadowrunItemDialog.createSpellDialog(item, event);\r\n        }\r\n\r\n        if (item.isComplexForm()) {\r\n            return ShadowrunItemDialog.createComplexFormDialog(item, event);\r\n        }\r\n    }\r\n\r\n    static async createRangedWeaponDialog(item: SR5Item, event?: MouseEvent): Promise<FormDialog> {\r\n        const dialogData = {title: item.name,\r\n                            event,\r\n        };\r\n\r\n        const templatePath = 'systems/shadowrun5e/dist/templates/rolls/range-weapon-roll.html';\r\n\r\n        // Prepare template data for display.\r\n        const modifiers = await item.actor.getModifiers();\r\n\r\n        // Disable manual range selection when a overwrite is set.\r\n        const targetRange = modifiers.environmental.active.range;\r\n        const disableTargetRange = modifiers.hasActiveEnvironmentalOverwrite;\r\n\r\n        console.error(modifiers);\r\n\r\n        const templateData = {\r\n            targetRange,\r\n            disableTargetRange\r\n        };\r\n        const onAfterClose = ShadowrunItemDialog.addRangedWeaponData(templateData, dialogData, item);\r\n\r\n        dialogData['templateData'] = templateData;\r\n        dialogData['templatePath'] = templatePath;\r\n        dialogData['onAfterClose'] = onAfterClose;\r\n\r\n        //@ts-ignore\r\n        return new FormDialog(dialogData);\r\n    }\r\n\r\n    static async createSpellDialog(item: SR5Item, event?: MouseEvent): Promise<FormDialog> {\r\n        const dialogData = {title: item.name,\r\n                            event,\r\n        };\r\n\r\n        const templatePath = 'systems/shadowrun5e/dist/templates/rolls/roll-spell.html';\r\n        const templateData = {};\r\n        const onAfterClose = ShadowrunItemDialog.addSpellData(templateData, dialogData, item);\r\n\r\n        dialogData['templateData'] = templateData;\r\n        dialogData['templatePath'] = templatePath;\r\n        dialogData['onAfterClose'] = onAfterClose;\r\n\r\n        //@ts-ignore\r\n        return new FormDialog(dialogData);\r\n    }\r\n\r\n    static async createComplexFormDialog(item: SR5Item, event?: MouseEvent): Promise<FormDialog> {\r\n        const dialogData = {title: item.name,\r\n                            event,\r\n        };\r\n\r\n        const templatePath = 'systems/shadowrun5e/dist/templates/rolls/roll-complex-form.html';\r\n        const templateData = {};\r\n        const onAfterClose = ShadowrunItemDialog.addComplexFormData(templateData, dialogData, item);\r\n\r\n        dialogData['templateData'] = templateData;\r\n        dialogData['templatePath'] = templatePath;\r\n        dialogData['onAfterClose'] = onAfterClose;\r\n\r\n        //@ts-ignore\r\n        return new FormDialog(dialogData);\r\n    }\r\n\r\n    static addComplexFormData(templateData: object, dialogData: DialogData, item: SR5Item): Function {\r\n        const fade = item.getFade();\r\n        const title = `${Helpers.label(item.name)} Level`;\r\n\r\n        const level = item.getLastComplexFormLevel()?.value || 2 - fade;\r\n\r\n        templateData['fade'] = fade >= 0 ? `+${fade}` : fade;\r\n        templateData['level'] = level;\r\n        templateData['title'] = title;\r\n\r\n        let cancel = true;\r\n        dialogData.buttons = {\r\n            roll: {\r\n                label: 'Continue',\r\n                icon: '<i class=\"fas fa-dice-six\"></i>',\r\n                callback: () => (cancel = false),\r\n            },\r\n        };\r\n\r\n        return async (html: JQuery): Promise<ActionTestData|undefined> => {\r\n            if (cancel) return;\r\n\r\n            const actionTestData = {} as ComplexFormTestData;\r\n\r\n            mergeObject(actionTestData, ShadowrunItemDialog._getSelectedComplexFormLevel(html))\r\n\r\n            // TODO: Remnants of old style data flow. Look into RangedWeapon for newer style.\r\n            await item.setLastComplexFormLevel({value: actionTestData.level});\r\n\r\n            return {complexForm: actionTestData};\r\n        };\r\n    }\r\n\r\n    static _getSelectedComplexFormLevel(html: JQuery): object {\r\n        const level = Helpers.parseInputToNumber($(html).find('[name=level]').val());\r\n        return {level};\r\n    }\r\n\r\n    static addSpellData(templateData: object, dialogData: DialogData, item: SR5Item): Function {\r\n        const title = `${Helpers.label(item.name)} Force`;\r\n        const drain = item.getDrain();\r\n\r\n        const force = item.getLastSpellForce()?.value || 2 - drain;\r\n\r\n        templateData['drain'] = drain >= 0 ? `+${drain}` : `${drain}`;\r\n        templateData['force'] = force;\r\n        templateData['title'] = title;\r\n\r\n        dialogData.title = title;\r\n        let cancel = true;\r\n        let reckless = false;\r\n        dialogData.buttons = {\r\n            normal: {\r\n                label: game.i18n.localize('SR5.NormalSpellButton'),\r\n                callback: () => (cancel = false),\r\n            },\r\n            reckless: {\r\n                label: game.i18n.localize('SR5.RecklessSpellButton'),\r\n                callback: () => {\r\n                    reckless = true;\r\n                    cancel = false;\r\n                },\r\n            },\r\n        };\r\n        dialogData.default = 'normal';\r\n\r\n        return async (html: JQuery): Promise<ActionTestData|undefined> => {\r\n            if (cancel) return;\r\n\r\n            const actionTestData = {} as SpellActionTestData;\r\n\r\n            mergeObject(actionTestData, ShadowrunItemDialog._getSelectedSpellForce(html));\r\n            mergeObject(actionTestData, ShadowrunItemDialog._getSelectedSpellReckless(reckless));\r\n\r\n            await item.setLastSpellForce({value: actionTestData.force, reckless: actionTestData.reckless});\r\n\r\n            return {spell: actionTestData};\r\n        };\r\n    }\r\n\r\n    static _getSelectedSpellForce(html: JQuery): object {\r\n        const force = Helpers.parseInputToNumber($(html).find('[name=force]').val());\r\n        return {force}\r\n    }\r\n\r\n    static _getSelectedSpellReckless(reckless: boolean): object {\r\n        return {reckless}\r\n    }\r\n\r\n    static addRangedWeaponData(templateData: object, dialogData: DialogData, item: SR5Item): Function {\r\n        let title = dialogData.title || item.name;\r\n\r\n        const itemData = item.data.data as WeaponData;\r\n        const fireModes = {};\r\n\r\n        const {modes, ranges} = itemData.range;\r\n        const {ammo} = itemData;\r\n        // TODO: This should be moved into constants or some kind of 'rulesData'\r\n        if (modes.single_shot) {\r\n            fireModes['1'] = game.i18n.localize(\"SR5.WeaponModeSingleShotShort\");\r\n        }\r\n        if (modes.semi_auto) {\r\n            fireModes['1'] = game.i18n.localize(\"SR5.WeaponModeSemiAutoShort\");\r\n            fireModes['3'] = game.i18n.localize(\"SR5.WeaponModeSemiAutoBurst\");\r\n        }\r\n        if (modes.burst_fire) {\r\n            fireModes['3'] = `${modes.semi_auto ? `${game.i18n.localize(\"SR5.WeaponModeSemiAutoBurst\")}/` : ''}${game.i18n.localize(\"SR5.WeaponModeBurstFireShort\")}`;\r\n            fireModes['6'] = game.i18n.localize(\"SR5.WeaponModeBurstFireLong\");\r\n        }\r\n        if (modes.full_auto) {\r\n            fireModes['6'] = `${modes.burst_fire ? 'LB/' : ''}${game.i18n.localize(\"SR5.WeaponModeFullAutoShort\")}(s)`;\r\n            fireModes['10'] = `${game.i18n.localize(\"SR5.WeaponModeFullAutoShort\")}(c)`;\r\n            fireModes['20'] = game.i18n.localize('SR5.Suppressing');\r\n        }\r\n\r\n        const templateRanges = this._getRangeWeaponTemplateData(ranges);\r\n        const fireMode = item.getLastFireMode();\r\n        const rc = item.getRecoilCompensation(true);\r\n        templateData['fireModes'] = fireModes;\r\n        templateData['fireMode'] = fireMode?.value;\r\n        templateData['rc'] = rc;\r\n        templateData['ammo'] = ammo;\r\n        templateData['title'] = title;\r\n        templateData['ranges'] = templateRanges;\r\n\r\n        if (item.actor.getToken() && Helpers.userHasTargets()) {\r\n            templateData['targetsSelected'] = Helpers.userHasTargets();\r\n            templateData['targets'] = ShadowrunItemDialog._getTargetRangeTemplateData(item.actor, templateRanges);\r\n        } else if (!item.actor.getToken() && Helpers.userHasTargets()) {\r\n            // Inform user about usage of actors without tokens!\r\n            ui.notifications.warn(game.i18n.localize('SR5.TargetingNeedsActorWithToken'));\r\n        }\r\n\r\n        let cancel = true;\r\n        dialogData.buttons = {\r\n            continue: {\r\n                label: game.i18n.localize('SR5.Continue'),\r\n                callback: () => (cancel = false),\r\n            },\r\n        };\r\n\r\n        // TODO: Move this selection handler to an appropriate place. Maybe split ShadowrunItemDialog into subclasses.\r\n        return async (html): Promise<ActionTestData|undefined> => {\r\n            if (cancel) {\r\n                return;\r\n            }\r\n\r\n            const actionTestData = {} as RangedWeaponActionTestData;\r\n\r\n            if (Helpers.userHasTargets()) {\r\n                mergeObject(actionTestData, ShadowrunItemDialog._getSelectedTargetRangeModifier(html));\r\n            } else {\r\n                mergeObject(actionTestData, ShadowrunItemDialog._getSelectedRangeModifier(html));\r\n                // Store lastFireRange for generic range selection.\r\n            }\r\n\r\n            mergeObject(actionTestData, ShadowrunItemDialog._getSelectedFireMode(html, fireModes))\r\n\r\n            const {targetId} = ShadowrunItemDialog._getSelectedTargetTokenId(html);\r\n\r\n            // Store selections for next dialog.\r\n\r\n            if (actionTestData.environmental.range !== undefined) {\r\n                // Change environmental modifiers for the actor.\r\n                const modifiers = await item.actor.getModifiers();\r\n                if (!modifiers.hasActiveEnvironmentalOverwrite) {\r\n                    modifiers.activateEnvironmentalCategory('range', actionTestData.environmental.range);\r\n                    await item.actor.setModifiers(modifiers);\r\n                } else {\r\n                    console.error('The actor has an active environmental overwrite, yet could define a manual range selection.');\r\n                }\r\n\r\n                await item.setLastFireRangeMod({value: actionTestData.environmental.range});\r\n            }\r\n            if (actionTestData.fireMode) {\r\n                await item.setLastFireMode(actionTestData.fireMode);\r\n            }\r\n\r\n            return {rangedWeapon: actionTestData, targetId};\r\n        };\r\n    }\r\n\r\n    static _getRangeWeaponTemplateData(ranges: RangeData): RangesTemplateData {\r\n        const {range_modifiers} = SR.combat.environmental;\r\n        const newRanges = {} as RangesTemplateData;\r\n        for (const [key, value] of Object.entries(ranges)) {\r\n            const distance = value as number;\r\n            newRanges[key] = Helpers.createRangeDescription(CONFIG.SR5.weaponRanges[key], distance, range_modifiers[key]);\r\n        }\r\n        return newRanges;\r\n    }\r\n\r\n    /** Build template data for target distances and resulting range modifiers\r\n     *\r\n     * It is mandatory for an actor to have token placed,\r\n     * so distance measurements can be taken.\r\n     *\r\n     */\r\n    static _getTargetRangeTemplateData(actor: SR5Actor, ranges) {\r\n        const attacker = actor.getToken();\r\n\r\n        if (!attacker || !Helpers.userHasTargets()) {\r\n            ui.notifications.warn(game.i18n.localize('SR5.TargetingNeedsActorWithToken'));\r\n            return [];\r\n        }\r\n\r\n        const targets = Helpers.getUserTargets();\r\n\r\n        const targetsTemplateData = targets.map(target => {\r\n            //@ts-ignore // undefined actor is okay\r\n            const distance = Helpers.measureTokenDistance(attacker, target);\r\n            const range = Helpers.getWeaponRange(distance, ranges);\r\n            return {\r\n                id: target.id,\r\n                name: target.name,\r\n                range: range,\r\n                unit: LENGTH_UNIT,\r\n                distance\r\n            };\r\n        });\r\n\r\n        //@ts-ignore\r\n        return targetsTemplateData.sort((a, b) => {\r\n            if (a.distance < b.distance) return -1;\r\n            if (a.distance > b.distance) return 1;\r\n            return 0;\r\n        });\r\n    }\r\n\r\n    static _getSelectedTargetRangeModifier(html: JQuery): object {\r\n        const selectElement = $(html).find('[name=\"selected-target\"]');\r\n        const range = Helpers.parseInputToNumber(selectElement.find(':selected').data('range-modifier'));\r\n\r\n        return {\r\n            environmental: {range}\r\n        };\r\n    }\r\n\r\n    static _getSelectedTargetTokenId(html: JQuery) {\r\n        const selectElement = $(html).find('[name=\"selected-target\"]');\r\n        const targetId = selectElement.val() as string;\r\n        return {targetId};\r\n    }\r\n\r\n    static _getSelectedRangeModifier(html: JQuery): object {\r\n        const range = Helpers.parseInputToNumber($(html).find('[name=\"range\"]').val());\r\n\r\n        return {environmental: {range}}\r\n    }\r\n\r\n    static _getSelectedFireMode(html: JQuery, fireModes): object {\r\n        const fireModeValue = Helpers.parseInputToNumber($(html).find('[name=\"fireMode\"]').val());\r\n        if (fireModeValue) {\r\n            const fireModeString = fireModes[fireModeValue];\r\n            const defenseModifier = Helpers.mapRoundsToDefenseDesc(fireModeValue);\r\n\r\n            const fireMode: FireModeData = {\r\n                label: fireModeString,\r\n                value: fireModeValue,\r\n                defense: defenseModifier,\r\n            };\r\n\r\n            return {fireMode};\r\n        }\r\n\r\n        return {};\r\n    }\r\n}\r\n","import {FormDialog, FormDialogData} from \"./FormDialog\";\r\nimport {RollDialogOptions} from \"../../rolls/ShadowrunRoller\";\r\nimport {PartsList} from \"../../parts/PartsList\";\r\nimport {SR5Actor} from \"../../actor/SR5Actor\";\r\nimport {CORE_FLAGS, CORE_NAME, FLAGS, SYSTEM_NAME} from \"../../constants\";\r\nimport {Helpers} from \"../../helpers\";\r\nimport ModList = Shadowrun.ModList;\r\nimport BaseValuePair = Shadowrun.BaseValuePair;\r\nimport LabelField = Shadowrun.LabelField;\r\n\r\ninterface AdvancedTestRollOptions {\r\n    title?: string;\r\n    dialogOptions?: RollDialogOptions;\r\n    extended?: boolean;\r\n    limit?: BaseValuePair<number> & LabelField;\r\n    wounds?: boolean;\r\n}\r\n\r\nexport class ShadowrunTestDialog {\r\n    static async create(actor: SR5Actor|undefined, options: AdvancedTestRollOptions, partsProps: ModList<number>): Promise<FormDialog> {\r\n        const testDialogData = ShadowrunTestDialog.getAdvancedTestData(actor, options, partsProps);\r\n\r\n        return new FormDialog(testDialogData);\r\n    }\r\n\r\n    static getAdvancedTestData(actor, options: AdvancedTestRollOptions, partsProps: ModList<number>): FormDialogData {\r\n        const title = options.title;\r\n        const parts = new PartsList(partsProps);\r\n\r\n        const templateData = {\r\n            options: options.dialogOptions,\r\n            extended: options.extended,\r\n            pool: parts.total,\r\n            parts: parts.getMessageOutput(),\r\n            limitValue: options.limit?.value,\r\n            wounds: options.wounds,\r\n            woundValue: actor?.getWoundModifier(),\r\n            rollMode: game.settings.get(CORE_NAME, CORE_FLAGS.RollMode),\r\n            rollModes: CONFIG.Dice.rollModes\r\n        }\r\n\r\n        let templatePath = 'systems/shadowrun5e/dist/templates/rolls/roll-dialog.html';\r\n\r\n        const rollButtonName = 'roll'\r\n        const buttons = {\r\n            [rollButtonName]: {\r\n                label: game.i18n.localize('SR5.Roll'),\r\n                icon: '<i class=\"fas fa-dice-six\"></i>',\r\n                callback: () => {\r\n                },\r\n            },\r\n        };\r\n        if (actor) {\r\n            buttons['edge'] = {\r\n                label: `${game.i18n.localize('SR5.PushTheLimit')} (+${actor.getEdge().value})`,\r\n                icon: '<i class=\"fas fa-bomb\"></i>',\r\n                callback: () => {\r\n                },\r\n            };\r\n        }\r\n\r\n        const onAfterClose = async (html: JQuery) => {\r\n            const dicePoolValue = Helpers.parseInputToNumber($(html).find('[name=\"pool\"]').val());\r\n\r\n            if (options.dialogOptions?.pool) {\r\n                parts.clear();\r\n                await game.user.setFlag(SYSTEM_NAME, FLAGS.LastRollPromptValue, dicePoolValue);\r\n                parts.addUniquePart('SR5.Base', dicePoolValue);\r\n            }\r\n\r\n            const limitValue = Helpers.parseInputToNumber($(html).find('[name=\"limitValue\"]').val());\r\n\r\n            const {limit} = options;\r\n            if (limit && limit.value !== limitValue) {\r\n                limit.value = limitValue;\r\n                limit.base = limitValue;\r\n                limit.label = 'SR5.Override';\r\n            }\r\n\r\n            const woundValue = Helpers.parseInputToNumber($(html).find('[name=\"wounds\"]').val());\r\n            const situationMod = Helpers.parseInputToNumber($(html).find('[name=\"dp_mod\"]').val());\r\n            const environmentMod = Helpers.parseInputToNumber($(html).find('[name=\"options.environmental\"]').val());\r\n\r\n            let {wounds} = options;\r\n            if (wounds && woundValue !== 0) {\r\n                parts.addUniquePart('SR5.Wounds', woundValue);\r\n                wounds = true;\r\n            }\r\n            if (situationMod) {\r\n                parts.addUniquePart('SR5.SituationalModifier', situationMod);\r\n            }\r\n            if (environmentMod) {\r\n                parts.addUniquePart('SR5.EnvironmentModifier', environmentMod);\r\n            }\r\n\r\n            const extendedString = Helpers.parseInputToString($(html).find('[name=\"extended\"]').val());\r\n            const extended = extendedString === 'true';\r\n\r\n            const rollMode = Helpers.parseInputToString($(html).find('[name=rollMode]').val());\r\n\r\n            return {\r\n                limit,\r\n                wounds,\r\n                parts,\r\n                extended,\r\n                rollMode\r\n            }\r\n        };\r\n\r\n        return {\r\n            title,\r\n            templateData,\r\n            templatePath,\r\n            buttons,\r\n            default: rollButtonName,\r\n            onAfterClose\r\n        }\r\n    }\r\n}","/**\r\n * A GM-Tool to keep track of all players overwatch scores\r\n */\r\nimport {Helpers} from \"../../helpers\";\r\n\r\nexport class OverwatchScoreTracker extends Application {\r\n    static MatrixOverwatchDiceCount = '2d6';\r\n    static get defaultOptions() {\r\n        const options = super.defaultOptions;\r\n        options.id = 'overwatch-score-tracker';\r\n        options.classes = ['sr5'];\r\n        options.title = game.i18n.localize('SR5.OverwatchScoreTrackerTitle');\r\n        options.template = 'systems/shadowrun5e/dist/templates/apps/gmtools/overwatch-score-tracker.html';\r\n        options.width = 450;\r\n        options.height = 'auto';\r\n        options.resizable = true;\r\n        return options;\r\n    }\r\n\r\n    static addedActors = [];\r\n\r\n    getData() {\r\n        // get list of actors that belong to users\r\n        const actors = game.users.reduce((acc, user) => {\r\n            if (!user.isGM && user.character) {\r\n                acc.push(user.character.data);\r\n            }\r\n            return acc;\r\n        }, []);\r\n\r\n        OverwatchScoreTracker.addedActors.forEach((id) => {\r\n            const actor = game.actors.find((a) => a._id === id);\r\n            if (actor) {\r\n                actors.push(actor.data);\r\n            }\r\n        });\r\n\r\n        return {\r\n            actors,\r\n        };\r\n    }\r\n\r\n    activateListeners(html) {\r\n        html.find('.overwatch-score-reset').on('click', this._resetOverwatchScore.bind(this));\r\n        html.find('.overwatch-score-add').on('click', this._addOverwatchScore.bind(this));\r\n        html.find('.overwatch-score-input').on('change', this._setOverwatchScore.bind(this));\r\n        html.find('.overwatch-score-roll-15-minutes').on('click', this._rollFor15Minutes.bind(this));\r\n        html.find('.overwatch-score-add-actor').on('click', this._onAddActor.bind(this));\r\n    }\r\n\r\n    // returns the actor that this event is acting on\r\n    _getActorFromEvent(event) {\r\n        const id = event.currentTarget.closest('.list-item').dataset.actorId;\r\n        if (id) return game.actors.find((a) => a._id === id);\r\n    }\r\n\r\n    _onAddActor(event) {\r\n        event.preventDefault();\r\n        const tokens = Helpers.getControlledTokens();\r\n        if (tokens.length === 0) {\r\n            ui.notifications.warn(game.i18n.localize('SR5.OverwatchScoreTracker.NotifyNoSelectedTokens'));\r\n            return;\r\n        }\r\n        tokens.forEach((token) => {\r\n            const actorId = token.data.actorId;\r\n            OverwatchScoreTracker.addedActors.push(actorId);\r\n            this.render();\r\n        });\r\n    }\r\n\r\n    _setOverwatchScore(event) {\r\n        const actor = this._getActorFromEvent(event);\r\n        const amount = event.currentTarget.value;\r\n        if (amount && actor) {\r\n            actor.setOverwatchScore(amount).then(() => this.render());\r\n        }\r\n    }\r\n\r\n    _addOverwatchScore(event) {\r\n        const actor = this._getActorFromEvent(event);\r\n        const amount = parseInt(event.currentTarget.dataset.amount);\r\n        if (amount && actor) {\r\n            const os = actor.getOverwatchScore();\r\n            actor.setOverwatchScore(os + amount).then(() => this.render());\r\n        }\r\n    }\r\n\r\n    _resetOverwatchScore(event) {\r\n        event.preventDefault();\r\n        const actor = this._getActorFromEvent(event);\r\n        if (actor) {\r\n            actor.setOverwatchScore(0).then(() => this.render());\r\n        }\r\n    }\r\n\r\n    _rollFor15Minutes(event) {\r\n        event.preventDefault();\r\n        const actor = this._getActorFromEvent(event);\r\n        if (actor) {\r\n            //  use static value so it can be modified in modules\r\n            const roll = new Roll(OverwatchScoreTracker.MatrixOverwatchDiceCount);\r\n            roll.roll();\r\n\r\n            // use GM Roll Mode so players don't see\r\n            // const rollMode = CONFIG.Dice.rollModes.gmroll;\r\n            // roll.toMessage({ rollMode });\r\n\r\n            if (roll.total) {\r\n                const os = actor.getOverwatchScore();\r\n                actor.setOverwatchScore(os + roll.total).then(() => this.render());\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { LanguageSkillEditForm } from './LanguageSkillEditForm';\r\nimport KnowledgeSkillCategory = Shadowrun.KnowledgeSkillCategory;\r\n\r\nexport class KnowledgeSkillEditForm extends LanguageSkillEditForm {\r\n    category: KnowledgeSkillCategory;\r\n    constructor(actor, options, skillId, category) {\r\n        super(actor, options, skillId);\r\n        this.category = category;\r\n    }\r\n    _updateString() {\r\n        return `data.skills.knowledge.${this.category}.value.${this.skillId}`;\r\n    }\r\n}\r\n","import { SkillEditForm } from './SkillEditForm';\r\nimport SkillEditFormData = Shadowrun.SkillEditFormData;\r\n\r\nexport class LanguageSkillEditForm extends SkillEditForm {\r\n    _updateString() {\r\n        return `data.skills.language.value.${this.skillId}`;\r\n    }\r\n\r\n    getData() {\r\n        return mergeObject(super.getData(), {\r\n            editable_name: true,\r\n            editable_canDefault: false,\r\n            editable_attribute: false\r\n        } as SkillEditFormData);\r\n    }\r\n\r\n    /** @override */\r\n    _onUpdateObject(event, formData, updateData) {\r\n        super._onUpdateObject(event, formData, updateData);\r\n        const name = formData['data.name'];\r\n        const currentData = updateData[this._updateString()] || {};\r\n        updateData[this._updateString()] = {\r\n            ...currentData,\r\n            name,\r\n        };\r\n    }\r\n}\r\n","import SkillEditFormData = Shadowrun.SkillEditFormData;\r\nimport {SR5Actor} from \"../../actor/SR5Actor\";\r\nimport Attributes = Shadowrun.Attributes;\r\nimport SkillField = Shadowrun.SkillField;\r\n\r\nexport class SkillEditForm extends BaseEntitySheet {\r\n    skillId: string;\r\n\r\n    get entity(): SR5Actor {\r\n        //@ts-ignore\r\n        return super.entity;\r\n    }\r\n\r\n    constructor(actor, options, skillId) {\r\n        super(actor, options);\r\n        this.skillId = skillId;\r\n    }\r\n\r\n    _updateString() {\r\n        return `data.skills.active.${this.skillId}`;\r\n    }\r\n\r\n    static get defaultOptions() {\r\n        const options = super.defaultOptions;\r\n        return mergeObject(options, {\r\n            id: 'skill-editor',\r\n            classes: ['sr5', 'sheet', 'skill-edit-window'],\r\n            template: 'systems/shadowrun5e/dist/templates/apps/skill-edit.html',\r\n            width: 300,\r\n            submitOnClose: true,\r\n            submitOnChange: true,\r\n            closeOnSubmit: false,\r\n            resizable: true,\r\n        });\r\n    }\r\n\r\n    get title(): string {\r\n        const label = this.entity.getSkillLabel(this.skillId);\r\n        return `${game.i18n.localize('SR5.EditSkill')} - ${game.i18n.localize(label)}`;\r\n    }\r\n\r\n    _onUpdateObject(event, formData, updateData) {\r\n        // get skill name.\r\n        // NOTE: This differs from the skill id, which is used to identify the skill internally.\r\n        const name = formData['data.name'];\r\n\r\n        // get attribute name\r\n        const attribute = formData['data.attribute'];\r\n\r\n        // get base value\r\n        const base = formData['data.base'];\r\n\r\n        // get can default\r\n        const canDefault = formData['data.canDefault'];\r\n\r\n        // process specializations\r\n        const specsRegex = /data\\.specs\\.(\\d+)/;\r\n        const specs = Object.entries(formData).reduce((running, [key, val]: [string, any]) => {\r\n            const found = key.match(specsRegex);\r\n            if (found && found[0]) {\r\n                running.push(val);\r\n            }\r\n            return running;\r\n        }, [] as any[]);\r\n\r\n        // process bonuses\r\n        const bonusKeyRegex = /data\\.bonus\\.(\\d+).key/;\r\n        const bonusValueRegex = /data\\.bonus\\.(\\d+).value/;\r\n        const bonus = Object.entries(formData).reduce((running, [key, value]: [string, any]) => {\r\n            const foundKey = key.match(bonusKeyRegex);\r\n            const foundVal = key.match(bonusValueRegex);\r\n            if (foundKey && foundKey[0] && foundKey[1]) {\r\n                const index = foundKey[1];\r\n                if (running[index] === undefined) running[index] = {};\r\n                running[index].key = value;\r\n            } else if (foundVal && foundVal[0] && foundVal[1]) {\r\n                const index = foundVal[1];\r\n                if (running[index] === undefined) running[index] = {};\r\n                running[index].value = value;\r\n            }\r\n\r\n            return running;\r\n        }, [] as any[]);\r\n\r\n        const currentData = updateData[this._updateString()] || {};\r\n        updateData[this._updateString()] = {\r\n            ...currentData,\r\n            base,\r\n            specs,\r\n            bonus,\r\n            name,\r\n            attribute,\r\n            canDefault\r\n        };\r\n    }\r\n\r\n    /** @override */\r\n    async _updateObject(event, formData) {\r\n        const updateData = {};\r\n        this._onUpdateObject(event, formData, updateData);\r\n        await this.entity.update(updateData);\r\n    }\r\n\r\n    activateListeners(html) {\r\n        super.activateListeners(html);\r\n        $(html).find('.add-spec').on('click', this._addNewSpec.bind(this));\r\n        $(html).find('.remove-spec').on('click', this._removeSpec.bind(this));\r\n        $(html).find('.add-bonus').on('click', this._addNewBonus.bind(this));\r\n        $(html).find('.remove-bonus').on('click', this._removeBonus.bind(this));\r\n    }\r\n\r\n    async _addNewBonus(event) {\r\n        event.preventDefault();\r\n        const updateData = {};\r\n        const data = this.getData().data;\r\n        if (!data) return;\r\n        const { bonus = [] } = data;\r\n        // add blank line for new bonus\r\n        updateData[`${this._updateString()}.bonus`] = [...bonus, { key: '', value: 0 }];\r\n        await this.entity.update(updateData);\r\n    }\r\n\r\n    async _removeBonus(event) {\r\n        event.preventDefault();\r\n        const updateData = {};\r\n        const data = this.getData().data;\r\n        if (data?.bonus) {\r\n            const { bonus } = data;\r\n            const index = event.currentTarget.dataset.spec;\r\n            if (index >= 0) {\r\n                bonus.splice(index, 1);\r\n                updateData[`${this._updateString()}.bonus`] = bonus;\r\n                await this.entity.update(updateData);\r\n            }\r\n        }\r\n    }\r\n\r\n    async _addNewSpec(event) {\r\n        event.preventDefault();\r\n        const updateData = {};\r\n        const data = this.getData().data;\r\n        if (data?.specs) {\r\n            // add a blank line to specs\r\n            const { specs } = data;\r\n            updateData[`${this._updateString()}.specs`] = [...specs, ''];\r\n        }\r\n        await this.entity.update(updateData);\r\n    }\r\n\r\n    async _removeSpec(event) {\r\n        event.preventDefault();\r\n        const updateData = {};\r\n        const data = this.getData().data;\r\n        if (data?.specs) {\r\n            const { specs } = data;\r\n            const index = event.currentTarget.dataset.spec;\r\n            if (index >= 0) {\r\n                specs.splice(index, 1);\r\n                updateData[`${this._updateString()}.specs`] = specs;\r\n                await this.entity.update(updateData);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** Enhance attribute selection by an empty option to allow newly created skills to have no attribute selected.\r\n     */\r\n    _getSkillAttributesForSelect() {\r\n        return {...CONFIG.SR5.attributes, '': ''};\r\n    }\r\n\r\n    _allowSkillNameEditing(): boolean {\r\n        const skill = this.entity.getSkill(this.skillId);\r\n        // Typescript sees string here? Double negate for boolean type cast...\r\n        return !!((!skill?.name && !skill?.label) || (skill?.name && !skill?.label));\r\n    }\r\n\r\n    getData(): SkillEditFormData {\r\n        const data = super.getData();\r\n        const actor = data.entity;\r\n\r\n        data['data'] = actor ? getProperty(actor, this._updateString()) : {};\r\n        data['editable_name'] = this._allowSkillNameEditing();\r\n        data['editable_canDefault'] = true;\r\n        data['editable_attribute'] = true;\r\n        data['attributes'] = this._getSkillAttributesForSelect();\r\n        return data as SkillEditFormData;\r\n    }\r\n}\r\n","// directly pulled from DND5e, just changed the\r\nexport const measureDistance = function (segments, options = {}) {\r\n    //@ts-ignore\r\n    // basegrid isn't typed, options aren't really important\r\n    if (!options.gridSpaces) return BaseGrid.prototype.measureDistances.call(this, segments, options);\r\n\r\n    // Track the total number of diagonals\r\n    let nDiagonal = 0;\r\n    const rule = this.parent.diagonalRule;\r\n    const d = canvas.dimensions;\r\n\r\n    // Iterate over measured segments\r\n    return segments.map((s) => {\r\n        let r = s.ray;\r\n\r\n        // Determine the total distance traveled\r\n        let nx = Math.abs(Math.ceil(r.dx / d.size));\r\n        let ny = Math.abs(Math.ceil(r.dy / d.size));\r\n\r\n        // Determine the number of straight and diagonal moves\r\n        let nd = Math.min(nx, ny);\r\n        let ns = Math.abs(ny - nx);\r\n        nDiagonal += nd;\r\n\r\n        // Common houserule variant\r\n        if (rule === '1-2-1') {\r\n            let nd10 = Math.floor(nDiagonal / 2) - Math.floor((nDiagonal - nd) / 2);\r\n            let spaces = nd10 * 2 + (nd - nd10) + ns;\r\n            return spaces * canvas.dimensions.distance;\r\n        }\r\n\r\n        // Euclidean Measurement\r\n        else if (rule === 'EUCL') {\r\n            return Math.round(Math.hypot(nx, ny) * canvas.scene.data.gridDistance);\r\n        }\r\n\r\n        // diag and straight are same space count\r\n        else return (ns + nd) * canvas.scene.data.gridDistance;\r\n    });\r\n};\r\n","import { SR5Actor } from './actor/SR5Actor';\r\nimport { SR5Item } from './item/SR5Item';\r\nimport Template from './template';\r\nimport AttackData = Shadowrun.AttackData;\r\nimport {CORE_FLAGS, CORE_NAME, FLAGS, SYSTEM_NAME} from './constants';\r\nimport {ShadowrunRoll, Test} from \"./rolls/ShadowrunRoller\";\r\nimport DrainData = Shadowrun.DrainData;\r\nimport {Helpers} from \"./helpers\";\r\nimport ModifiedDamageData = Shadowrun.ModifiedDamageData;\r\nimport DamageType = Shadowrun.DamageType;\r\nimport DamageElement = Shadowrun.DamageElement;\r\nimport CombatData = Shadowrun.CombatData;\r\nimport { DamageApplicationFlow } from './actor/DamageApplicationFlow';\r\n\r\nexport interface RollTargetChatMessage {\r\n    actor: SR5Actor\r\n    target?: Token|undefined\r\n    targets?: Token[]\r\n    item: SR5Item\r\n    tests: Test[]\r\n    roll: ShadowrunRoll\r\n    attack?: AttackData\r\n    rollMode?: keyof typeof CONFIG.Dice.rollModes\r\n}\r\n\r\nexport interface TargetChatMessageOptions extends RollTargetChatMessage{\r\n    whisperTo: User\r\n}\r\n\r\n// Simple card text messages\r\nexport interface ItemChatMessageOptions {\r\n    actor: SR5Actor\r\n    item: SR5Item\r\n    description: object\r\n    tests?: Test[]\r\n}\r\n\r\nexport interface RollChatMessageOptions {\r\n    title: string\r\n    roll: ShadowrunRoll\r\n    actor?: SR5Actor\r\n    target?: Token\r\n    targets?: Token[]\r\n\r\n    item?: SR5Item\r\n\r\n    description?: object\r\n\r\n    rollMode?: keyof typeof CONFIG.dice.rollModes\r\n    previewTemplate?: boolean\r\n\r\n    attack?: AttackData\r\n    incomingAttack?: AttackData\r\n    incomingDrain?: DrainData\r\n    damage?: ModifiedDamageData\r\n    tests?: Test[]\r\n    combat?: CombatData\r\n    reach?: number\r\n}\r\n\r\ninterface ItemChatTemplateData {\r\n    title: string\r\n    actor: SR5Actor\r\n    tokenId?: string\r\n    item: SR5Item\r\n    description: object\r\n    tests?: Test[]\r\n}\r\n\r\ninterface RollChatTemplateData extends RollChatMessageOptions {\r\n    tokenId?: string\r\n    targetTokenId?: string\r\n    rollMode: keyof typeof CONFIG.dice.rollModes\r\n}\r\n\r\nasync function createChatMessage(templateData, options?: ChatDataOptions): Promise<Entity<any>> {\r\n    const chatData = await createChatData(templateData, options);\r\n    const message = await ChatMessage.create(chatData);\r\n\r\n    // Store data in chat message for later use (opposed tests)\r\n    if (templateData.roll) await message.setFlag(SYSTEM_NAME, FLAGS.Roll, templateData.roll);\r\n    if (templateData.attack) await message.setFlag(SYSTEM_NAME, FLAGS.Attack, templateData.attack);\r\n    // Convert targets into scene token ids.\r\n    if (templateData.targets) await message.setFlag(SYSTEM_NAME, FLAGS.TargetsSceneTokenIds, templateData.targets.map(target => getTokenSceneId(target)));\r\n\r\n    console.log('Chat Message', message, chatData);\r\n    return message;\r\n}\r\n\r\ninterface ChatDataOptions {\r\n    roll?: ShadowrunRoll,\r\n    whisperTo?: User\r\n}\r\n// templateData has no datatype to pipe through whatever it's given.\r\n// Clean up your data within templateData creation functions!\r\nconst createChatData = async (templateData, options?: ChatDataOptions) => {\r\n    const template = `systems/shadowrun5e/dist/templates/rolls/roll-card.html`;\r\n    const actor = templateData.actor;\r\n    const token = actor?.getToken();\r\n\r\n    //@ts-ignore\r\n    const enhancedTemplateData = {\r\n        ...templateData,\r\n        speaker: {\r\n            actor, token\r\n        },\r\n        showGlitchAnimation: game.settings.get(SYSTEM_NAME, FLAGS.ShowGlitchAnimation),\r\n    };\r\n    const html = await renderTemplate(template, enhancedTemplateData);\r\n\r\n    const chatData = {\r\n        user: game.user._id,\r\n        type: options?.roll ? CONST.CHAT_MESSAGE_TYPES.ROLL : CONST.CHAT_MESSAGE_TYPES.OTHER,\r\n        sound: options?.roll ? CONFIG.sounds.dice : undefined,\r\n        content: html,\r\n        roll: options?.roll ? JSON.stringify(options?.roll) : undefined,\r\n        speaker: {\r\n            actor: actor?._id,\r\n            token: actor?.getToken(),\r\n            alias: game.user.name\r\n        },\r\n        flags: {\r\n            shadowrun5e: {\r\n                customRoll: true,\r\n            },\r\n        }\r\n    };\r\n\r\n    const rollMode = templateData.rollMode ?? game.settings.get(CORE_NAME, CORE_FLAGS.RollMode);\r\n\r\n    if (['gmroll', 'blindroll'].includes(rollMode as string)) chatData['whisper'] = ChatMessage.getWhisperRecipients('GM');\r\n    if (rollMode === 'blindroll') chatData['blind'] = true;\r\n\r\n    if (options?.whisperTo) {\r\n        chatData['whisper'] = ChatMessage.getWhisperRecipients(options.whisperTo.name);\r\n    }\r\n\r\n    return chatData;\r\n};\r\n\r\n\r\nexport async function ifConfiguredCreateDefaultChatMessage({roll, actor, title, rollMode}: Partial<RollChatMessageOptions>) {\r\n    if (game.settings.get(SYSTEM_NAME, FLAGS.DisplayDefaultRollCard) && roll) {\r\n        await roll.toMessage({\r\n            speaker: ChatMessage.getSpeaker({ actor: actor }),\r\n            flavor: title,\r\n            rollMode: rollMode,\r\n        });\r\n    }\r\n}\r\n\r\nexport async function createTargetChatMessage(options: TargetChatMessageOptions) {\r\n    const rollChatOptions = {...options};\r\n    const messageOptions = {whisperTo: options.whisperTo};\r\n    //@ts-ignore\r\n    const templateData = getRollChatTemplateData(rollChatOptions);\r\n    return await createChatMessage(templateData, messageOptions);\r\n}\r\n\r\nexport async function createItemChatMessage(options: ItemChatMessageOptions) {\r\n    const templateData = createChatTemplateData(options);\r\n    return await createChatMessage(templateData);\r\n}\r\n\r\nfunction createChatTemplateData(options: ItemChatMessageOptions): ItemChatTemplateData {\r\n    // field extraction is explicit to enforce visible data flow to ensure clean data.\r\n    // NOTE: As soon as clear data dynamic data flow can be established, this should be removed for a simple {...options}\r\n    let {actor, item, description, tests} = options;\r\n\r\n    const token = actor?.getToken();\r\n    const tokenId = getTokenSceneId(token);\r\n    const title = game.i18n.localize(\"SR5.Description\");\r\n\r\n    return {\r\n        title,\r\n        actor,\r\n        tokenId,\r\n        item,\r\n        description,\r\n        tests\r\n    }\r\n}\r\n\r\nexport async function createRollChatMessage(options: RollChatMessageOptions): Promise<Entity<any>> {\r\n    await ifConfiguredCreateDefaultChatMessage(options);\r\n\r\n    const templateData = getRollChatTemplateData(options);\r\n    const chatOptions = {roll: options.roll};\r\n    const message = await createChatMessage(templateData, chatOptions);\r\n\r\n    return message;\r\n}\r\n\r\n\r\nfunction getRollChatTemplateData(options: RollChatMessageOptions): RollChatTemplateData {\r\n    const token = options.actor?.getToken();\r\n\r\n    const rollMode = options.rollMode ?? game.settings.get(CORE_NAME, CORE_FLAGS.RollMode);\r\n    const tokenId = getTokenSceneId(token);\r\n\r\n    const targetTokenId = getTokenSceneId(options.target);\r\n\r\n    return {\r\n       ...options,\r\n        tokenId,\r\n        targetTokenId,\r\n        rollMode,\r\n    }\r\n}\r\n\r\nfunction getTokenSceneId(token: Token|undefined): string|undefined {\r\n    return token ? `${token.scene._id}.${token.id}` : undefined;\r\n}\r\n\r\nexport const addChatMessageContextOptions = (html, options) => {\r\n    const canRoll = (li) => {\r\n        const msg = game.messages.get(li.data().messageId);\r\n\r\n        return msg.getFlag(SYSTEM_NAME, FLAGS.MessageCustomRoll);\r\n    };\r\n\r\n    options.push(\r\n        {\r\n            name: game.i18n.localize('SR5.PushTheLimit'),\r\n            callback: (li) => SR5Actor.pushTheLimit(li),\r\n            condition: canRoll,\r\n            icon: '<i class=\"fas fa-meteor\"></i>',\r\n        },\r\n        {\r\n            name: game.i18n.localize('SR5.SecondChange'),\r\n            callback: (li) => SR5Actor.secondChance(li),\r\n            condition: canRoll,\r\n            icon: '<i class=\"fas fa-dice-d6\"></i>',\r\n        }\r\n    );\r\n    return options;\r\n};\r\n\r\nexport const addRollListeners = (app: ChatMessage, html) => {\r\n    if (!app.getFlag(SYSTEM_NAME, FLAGS.MessageCustomRoll)) {\r\n        return\r\n    }\r\n\r\n    html.on('click', '.test', async (event) => {\r\n        event.preventDefault();\r\n        const messageId = html.data('messageId');\r\n        const message = game.messages.get(messageId);\r\n        const attack = message.getFlag(SYSTEM_NAME, FLAGS.Attack);\r\n        const item = SR5Item.getItemFromMessage(html);\r\n\r\n        const type = event.currentTarget.dataset.action;\r\n        if (!item) {\r\n            ui.notifications.error(game.i18n.localize('SR5.MissingItemForOpposedTest'));\r\n            return;\r\n        }\r\n\r\n        // Selection will overwrite chat specific targeting\r\n        const actors = Helpers.getSelectedActorsOrCharacter();\r\n\r\n        // No selection, fall back to targeting.\r\n        if (actors.length === 0) {\r\n            const targetSceneIds = message.getFlag(SYSTEM_NAME, FLAGS.TargetsSceneTokenIds);\r\n\r\n            for (const targetSceneId of targetSceneIds) {\r\n                const token = Helpers.getSceneToken(targetSceneId);\r\n                if (!token) continue;\r\n\r\n                const actor = token.actor as SR5Actor;\r\n                if (!actor) continue;\r\n\r\n                actors.push(actor);\r\n            }\r\n        }\r\n\r\n        if (!actors) return;\r\n\r\n        for (const actor of actors) {\r\n            await item.rollTestType(type, attack, event, actor);\r\n        }\r\n    });\r\n    html.on('click', '.place-template', (event) => {\r\n        event.preventDefault();\r\n        const item = SR5Item.getItemFromMessage(html);\r\n\r\n        if (item) {\r\n            const template = Template.fromItem(item);\r\n            template?.drawPreview();\r\n        }\r\n    });\r\n\r\n    html.on('click', '.card-main-content', event => {\r\n        event.preventDefault();\r\n        // NOTE: This depends on the exact card template HTML structure.\r\n        const card = $(event.currentTarget).closest('.chat-card');\r\n        card.children('.dice-rolls').toggle();\r\n        card.children('.card-description').toggle();\r\n    });\r\n\r\n\r\n    /** Open the sheets of different entity types based on the chat card.\r\n     */\r\n    html.on('click', '.chat-entity-link', event => {\r\n        event.preventDefault();\r\n\r\n        const entityLink = $(event.currentTarget);\r\n        const id = entityLink.data('id');\r\n        const type = entityLink.data('entity');\r\n\r\n        if (!id) return;\r\n\r\n       if (type === 'Token') {\r\n           const token = canvas.tokens.get(id);\r\n           token.actor.sheet.render(true, {token});\r\n       }\r\n       else if (type === 'Actor') {\r\n           const actor = game.actors.get(id);\r\n           actor.sheet.render(true);\r\n       }\r\n       else if (type === 'Item') {\r\n           const card = entityLink.closest('.chat-card');\r\n           const sceneTokenId = card.data('tokenId');\r\n\r\n           const token = Helpers.getSceneToken(sceneTokenId)\r\n\r\n           if (!token) return;\r\n\r\n           const item = token.actor.getOwnedItem(id);\r\n           if (item) item.sheet.render(true);\r\n       }\r\n    });\r\n\r\n    /** Select a Token on the current scene based on the link id.\r\n     */\r\n    html.on('click', '.chat-select-link', event => {\r\n        event.preventDefault();\r\n\r\n        const selectLink = $(event.currentTarget);\r\n        const tokenId = selectLink.data('tokenId');\r\n        const token = canvas.tokens.get(tokenId);\r\n\r\n        if (token) {\r\n            token.control();\r\n        } else {\r\n            ui.notifications.warn(game.i18n.localize('SR5.NoSelectableToken'))\r\n        }\r\n    });\r\n\r\n    /** Apply damage to the actor speaking the chat card.\r\n     */\r\n    html.on('click', '.apply-damage', async event => {\r\n        event.stopPropagation();\r\n        const applyDamage = $(event.currentTarget);\r\n\r\n        const value = Number(applyDamage.data('damageValue'));\r\n        const type = String(applyDamage.data('damageType')) as DamageType;\r\n        const ap = Number(applyDamage.data('damageAp'));\r\n        const element = String(applyDamage.data('damageElement')) as DamageElement;\r\n        let damage = Helpers.createDamageData(value, type, ap, element);\r\n\r\n        let actors = Helpers.getSelectedActorsOrCharacter();\r\n\r\n        // Should no selection be available try guessing.\r\n        if (actors.length === 0) {\r\n            const messageId = html.data('messageId');\r\n            const message = game.messages.get(messageId);\r\n            const targetIds = message.getFlag(SYSTEM_NAME, FLAGS.TargetsSceneTokenIds);\r\n\r\n            // If targeting is available, use that.\r\n            if (targetIds) {\r\n                targetIds.forEach(targetId => {\r\n                    const token = Helpers.getSceneToken(targetId);\r\n                    const actor = token?.actor as SR5Actor;\r\n                    if (!actor) return;\r\n                    actors.push(actor);\r\n                });\r\n\r\n            // Otherwise apply to the actor casting the damage.\r\n            } else {\r\n                const sceneTokenId = html.find('.chat-card').data('tokenId');\r\n                const token = Helpers.getSceneToken(sceneTokenId);\r\n                const actor = token?.actor as SR5Actor;\r\n                if (actor) {\r\n                    actors.push(actor);\r\n                }\r\n            }\r\n\r\n            if (actors.length === 0) {\r\n                ui.notifications.warn(game.i18n.localize(\"SR5.Warnings.TokenSelectionNeeded\"));\r\n                return;\r\n            }\r\n        }\r\n\r\n        new DamageApplicationFlow().runApplyDamage(actors, damage);\r\n    });\r\n};","import {SR5Actor} from \"../actor/SR5Actor\";\r\nimport {CombatRules} from \"../sr5/Combat\";\r\nimport {FLAGS, SR, SYSTEM_NAME, SYSTEM_SOCKET} from \"../constants\";\r\n\r\n/**\r\n * Foundry combat implementation for Shadowrun5 rules.\r\n *\r\n * TODO: Store what combatants already acted and with what initiative base and dice they did. This can be used to alter\r\n *       initiative score without fully rerolling and maintain propper turn order after an actor raised they ini while\r\n *       stepping over other actors that already had their action phase in the current initiative pass.\r\n *       @PDF SR5#160 'Chaning Initiative'\r\n */\r\nexport class SR5Combat extends Combat {\r\n    get initiativePass(): number {\r\n        return this.getFlag(SYSTEM_NAME, FLAGS.CombatInitiativePass) || SR.combat.INITIAL_INI_PASS;\r\n    }\r\n\r\n    static async setInitiativePass(combat: SR5Combat, pass: number) {\r\n        await combat.unsetFlag(SYSTEM_NAME, FLAGS.CombatInitiativePass);\r\n        await combat.setFlag(SYSTEM_NAME, FLAGS.CombatInitiativePass, pass);\r\n    }\r\n\r\n    constructor(...args) {\r\n        // @ts-ignore\r\n        super(...args);\r\n\r\n        this._registerSocketListeners();\r\n    }\r\n\r\n    /**\r\n     * Use the given actors token to get the combatant.\r\n     * NOTE: The token must be used, instead of just the actor, as unlinked tokens will all use the same actor id.\r\n     */\r\n    getActorCombatant(actor: SR5Actor): undefined | any {\r\n        const token = actor.getToken();\r\n        if (!token) return;\r\n        return this.getCombatantByToken(token.id);\r\n    }\r\n\r\n    /**\r\n     * Add ContextMenu options to CombatTracker Entries -- adds the basic Initiative Subtractions\r\n     * @param html\r\n     * @param options\r\n     */\r\n    static addCombatTrackerContextOptions(html, options: any[]) {\r\n        options.push(\r\n            {\r\n                name: game.i18n.localize('SR5.COMBAT.ReduceInitByOne'),\r\n                icon: '<i class=\"fas fa-caret-down\"></i>',\r\n                callback: async (li) => {\r\n                    // @ts-ignore\r\n                    const combatant = await game.combat.getCombatant(li.data('combatant-id'));\r\n                    if (combatant) {\r\n                        const combat: SR5Combat = game.combat as SR5Combat;\r\n                        await combat.adjustInitiative(combatant, -1);\r\n                    }\r\n                },\r\n            },\r\n            {\r\n                name: game.i18n.localize('SR5.COMBAT.ReduceInitByFive'),\r\n                icon: '<i class=\"fas fa-angle-down\"></i>',\r\n                callback: async (li) => {\r\n                    // @ts-ignore\r\n                    const combatant = await game.combat.getCombatant(li.data('combatant-id'));\r\n                    if (combatant) {\r\n                        const combat: SR5Combat = game.combat as SR5Combat;\r\n                        await combat.adjustInitiative(combatant, -5);\r\n                    }\r\n                },\r\n            },\r\n            {\r\n                name: game.i18n.localize('SR5.COMBAT.ReduceInitByTen'),\r\n                icon: '<i class=\"fas fa-angle-double-down\"></i>',\r\n                callback: async (li) => {\r\n                    // @ts-ignore\r\n                    const combatant = await game.combat.getCombatant(li.data('combatant-id'));\r\n                    if (combatant) {\r\n                        const combat: SR5Combat = game.combat as SR5Combat;\r\n                        await combat.adjustInitiative(combatant, -10);\r\n                    }\r\n                },\r\n            },\r\n        );\r\n        return options;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param combatant\r\n     * @param adjustment\r\n     */\r\n    async adjustInitiative(combatant: string | any, adjustment: number): Promise<void> {\r\n        combatant = typeof combatant === 'string' ? this.combatants.find((c) => c._id === combatant) : combatant;\r\n        if (!combatant || typeof combatant === 'string') {\r\n            console.error('Could not find combatant with id ', combatant);\r\n            return;\r\n        }\r\n        const newCombatant = {\r\n            _id: combatant._id,\r\n            initiative: Number(combatant.initiative) + adjustment,\r\n        };\r\n        // @ts-ignore\r\n        await this.updateCombatant(newCombatant);\r\n    }\r\n\r\n    /**\r\n     * Handle the change of an initiative pass. This needs owner permissions on the combat entity.\r\n     * @param combatId\r\n     */\r\n    static async handleIniPass(combatId: string) {\r\n        const combat = game.combats.get(combatId) as SR5Combat;\r\n        if (!combat) return;\r\n\r\n        const initiativePass = combat.initiativePass + 1;\r\n        // Start at the top!\r\n        const turn = 0;\r\n\r\n        const combatants: any[] = [];\r\n        for (const combatant of combat.combatants) {\r\n            const initiative = CombatRules.reduceIniResultAfterPass(Number(combatant.initiative));\r\n            combatants.push({_id: combatant._id, initiative});\r\n        }\r\n        if (combatants.length > 0)\r\n            // @ts-ignore\r\n            await combat.updateCombatant(combatants);\r\n\r\n        await SR5Combat.setInitiativePass(combat, initiativePass);\r\n        await combat.update({turn});\r\n        return;\r\n    }\r\n\r\n    /**\r\n     * Handle the change of a initiative round. This needs owner permission on the combat entity.\r\n     * @param combatId\r\n     */\r\n    static async handleNextRound(combatId: string) {\r\n        const combat = game.combats.get(combatId) as SR5Combat;\r\n        if (!combat) return;\r\n        await combat.resetAll();\r\n\r\n        if (game.settings.get(SYSTEM_NAME, FLAGS.OnlyAutoRollNPCInCombat)) {\r\n            await combat.rollNPC();\r\n        } else {\r\n            await combat.rollAll();\r\n        }\r\n\r\n        const turn = 0\r\n        await combat.update({turn});\r\n    }\r\n\r\n    /**\r\n     * Make sure Shadowrun initiative order is applied.\r\n     */\r\n    setupTurns(): any[] {\r\n        const turns = super.setupTurns();\r\n        return turns.sort(SR5Combat.sortByRERIC);\r\n    }\r\n\r\n    static sortByRERIC(left, right): number {\r\n        // First sort by initiative value if different\r\n        const leftInit = Number(left.initiative);\r\n        const rightInit = Number(right.initiative);\r\n        if (isNaN(leftInit)) return 1;\r\n        if (isNaN(rightInit)) return -1;\r\n        if (leftInit > rightInit) return -1;\r\n        if (leftInit < rightInit) return 1;\r\n\r\n        // now we sort by ERIC\r\n        const genData = (actor) => {\r\n            // edge, reaction, intuition, coin flip\r\n            return [\r\n                Number(actor.getEdge().value),\r\n                Number(actor.findAttribute('reaction')?.value),\r\n                Number(actor.findAttribute('intuition')?.value),\r\n                new Roll('1d2').roll().total,\r\n            ];\r\n        };\r\n\r\n        const leftData = genData(left.actor);\r\n        const rightData = genData(right.actor);\r\n        // if we find a difference that isn't 0, return it\r\n        for (let index = 0; index < leftData.length; index++) {\r\n            const diff = rightData[index] - leftData[index];\r\n            if (diff !== 0) return diff;\r\n        }\r\n\r\n        return 0;\r\n    }\r\n\r\n    /**\r\n     * Return the position in the current ini pass of the next undefeated combatant.\r\n     */\r\n    get nextUndefeatedTurnPosition(): number {\r\n        for (let [turnInPass, combatant] of this.turns.entries()) {\r\n            // Skipping is only interesting when moving forward.\r\n            if (turnInPass <= this.turn) continue;\r\n            // @ts-ignore\r\n            if (!combatant.defeated && combatant.initiative > 0) {\r\n                return turnInPass;\r\n            }\r\n        }\r\n        // The current turn is the last undefeated combatant. So go to the end and beeeeyooond.\r\n        return this.turns.length;\r\n    }\r\n\r\n    /**\r\n     * Return the position in the current ini pass of the next combatant that has an action phase left.\r\n     */\r\n    get nextViableTurnPosition(): number {\r\n        // Start at the next position after the current one.\r\n        for (let n = this.turn + 1; n++; n < this.combatants.length) {\r\n            const combatant = this.combatants[n];\r\n            if (combatant.initiative > 0)\r\n                return n;\r\n        }\r\n        // If nothing is found, start at the top.\r\n        return 0\r\n    }\r\n\r\n    /**\r\n     * Determine wheter the current combat situation (current turn order) needs and can have an initiative pass applied.\r\n     * @return true means that an initiative pass must be applied\r\n     */\r\n    doIniPass(nextTurn: number): boolean {\r\n        // We're currently only stepping from combatant to combatant.\r\n        if (nextTurn < this.turns.length) return false;\r\n        // Prepare another possible initiative order.\r\n        const currentScores = this.combatants.map(combatant => Number(combatant.initiative));\r\n\r\n        return CombatRules.iniOrderCanDoAnotherPass(currentScores);\r\n    }\r\n\r\n    /**\r\n     * After all combatants have had their action phase (click on next 'turn') handle shadowrun rules for\r\n     * initiative pass and combat turn.\r\n     *\r\n     * As long as a combatant still has a positive initiative score left, go to the next pass.\r\n     *  Raise the Foundry turn and don't raise the Foundry round.\r\n     * As soons as all combatants have no initiative score left, go to the next combat round.\r\n     *  Reset the Foundry pass and don't raise the Foundry turn.\r\n     *\r\n     * Retrigger Initiative Rolls on each new Foundry round.\r\n     *\r\n     *\r\n     * * @Override\r\n     */\r\n    async nextTurn(): Promise<void> {\r\n        // Maybe advance to the next round/init pass\r\n        let nextRound = this.round;\r\n        let initiativePass = this.initiativePass;\r\n        // Get the next viable turn position.\r\n        let nextTurn = this.settings.skipDefeated ?\r\n            this.nextUndefeatedTurnPosition :\r\n            this.nextViableTurnPosition;\r\n\r\n        // Start of the combat Handling\r\n        if (nextRound === 0 && initiativePass === 0) {\r\n            await this.startCombat();\r\n            return;\r\n        }\r\n\r\n        // Just step from one combatant to the next!\r\n        if (nextTurn < this.turns.length) {\r\n            await this.update({turn: nextTurn});\r\n            return;\r\n        }\r\n\r\n        // Initiative Pass Handling. Owner permissions are needed to change the initiative pass.\r\n        if (!game.user.isGM && this.doIniPass(nextTurn)) {\r\n            await this._createDoIniPassSocketMessage();\r\n            return;\r\n        }\r\n\r\n        if (game.user.isGM && this.doIniPass(nextTurn)) {\r\n            await SR5Combat.handleIniPass(this.id)\r\n            return;\r\n        }\r\n\r\n        // Initiative Round Handling.\r\n        // NOTE: It's not checked if the next is needed. This should result int he user noticing the turn going up, when it\r\n        //       maybe shouldn't and reporting a unhandled combat phase flow case.\r\n        return this.nextRound();\r\n    }\r\n\r\n    async startCombat() {\r\n        const nextRound = SR.combat.INITIAL_INI_ROUND;\r\n        const initiativePass = SR.combat.INITIAL_INI_PASS;\r\n        // Start at the top!\r\n        const nextTurn = 0;\r\n\r\n        await SR5Combat.setInitiativePass(this, initiativePass);\r\n        return await this.update({round: nextRound, turn: nextTurn});\r\n\r\n        if (game.settings.get(SYSTEM_NAME, FLAGS.OnlyAutoRollNPCInCombat)) {\r\n            await this.rollNPC();\r\n        } else {\r\n            await this.rollAll();\r\n        }\r\n    }\r\n\r\n    async nextRound(): Promise<void> {\r\n        // Let Foundry handle time and some other things.\r\n        await super.nextRound();\r\n        await SR5Combat.setInitiativePass(this, SR.combat.INITIAL_INI_PASS);\r\n\r\n        // Owner permissions are needed to change the shadowrun initiative round.\r\n        if (!game.user.isGM) {\r\n            await this._createDoNextRoundSocketMessage();\r\n        } else {\r\n            await SR5Combat.handleNextRound(this.id);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * use default behaviour but ALWAYS start at the top!\r\n     */\r\n    async rollAll(): Promise<SR5Combat> {\r\n        const combat = await super.rollAll() as SR5Combat;\r\n        if (combat.turn !== 0)\r\n            await combat.update({turn: 0});\r\n        return combat;\r\n    }\r\n\r\n    async updateNewCombatants(ids: string[]) {\r\n        const newCombatants = this.combatants.filter(combatant => ids.includes(combatant._id));\r\n        if (!newCombatants) return;\r\n\r\n        // Reduce initiative score for ongoing initiative passes.\r\n        const updateData = newCombatants.map(combatant => {\r\n            const initiative = CombatRules.reduceIniOnLateSpawn(combatant.initiative, this.initiativePass);\r\n            return {\r\n                _id: combatant._id,\r\n                initiative\r\n            }\r\n        })\r\n\r\n        // @ts-ignore\r\n        await this.updateCombatant(updateData);\r\n    }\r\n\r\n\r\n    /**\r\n     * Shadowrun starts at the top, except for subsequent initiative passes, then it depends on the new values.\r\n     */\r\n    async rollInitiative(ids, options): Promise<SR5Combat> {\r\n        const newIds = Array.isArray(ids) ? ids : [ids];\r\n        //@ts-ignore\r\n        const combat = await super.rollInitiative(ids, options) as SR5Combat;\r\n\r\n        // if (this.initiativePass > SR.combat.INITIAL_INI_PASS)\r\n        //     await this.updateNewCombatants(newIds);\r\n\r\n        if (this.initiativePass === SR.combat.INITIAL_INI_PASS)\r\n            await combat.update({turn: 0});\r\n\r\n        return combat;\r\n    }\r\n\r\n    /**\r\n     * Alter initiative formula to include initiative pass reduction.\r\n     *\r\n     * NOTE: Should this here fail or be buggy, there always is SR5Combat.updateNewCombatants which can be uncommented in SR5Combat.rollInitiative\r\n     * @param combatant\r\n     */\r\n    _getInitiativeFormula(combatant: Entity) {\r\n        if (this.initiativePass === SR.combat.INITIAL_INI_PASS) { // @ts-ignore\r\n            return super._getInitiativeFormula(combatant);\r\n        }\r\n\r\n        // Reduce for initiative passes until zero.\r\n        return `max(${game.system.data.initiative} -${(this.initiativePass - 1) * -SR.combat.INI_RESULT_MOD_AFTER_INI_PASS}, 0)`;\r\n    }\r\n\r\n    _registerSocketListeners() {\r\n        // @ts-ignore\r\n        game.socket.on(SYSTEM_SOCKET, async (message) => {\r\n            switch (message.type) {\r\n                case (FLAGS.DoNextRound):\r\n                    if (!message.data.hasOwnProperty('id') && typeof message.data.id !== 'string') {\r\n                        console.error(`SR5Combat Socket Message ${FLAGS.DoNextRound} data.id must be a string (combat id) but is ${typeof message.data} (${message.data})!`);\r\n                        return;\r\n                    }\r\n\r\n                    return await SR5Combat.handleNextRound(message.data.id);\r\n                case (FLAGS.DoInitPass):\r\n                    if (!message.data.hasOwnProperty('id') && typeof message.data.id !== 'string') {\r\n                        console.error(`SR5Combat Socket Message ${FLAGS.DoInitPass} data.id must be a string (combat id) but is ${typeof message.data} (${message.data})!`);\r\n                        return;\r\n                    }\r\n\r\n                    return await SR5Combat.handleIniPass(message.data.id);\r\n            }\r\n        })\r\n    }\r\n\r\n    async _createDoNextRoundSocketMessage() {\r\n        //@ts-ignore\r\n        await game.socket.emit(`${SYSTEM_SOCKET}`, {type: FLAGS.DoNextRound, data: {id: this.id}});\r\n    }\r\n\r\n    async _createDoIniPassSocketMessage() {\r\n        //@ts-ignore\r\n        await game.socket.emit(`${SYSTEM_SOCKET}`, {type: FLAGS.DoInitPass, data: {id: this.id}});\r\n    }\r\n}\r\n","export const SR5 = {\r\n    itemTypes: {\r\n        action: 'SR5.ItemTypes.Action',\r\n        adept_power: 'SR5.ItemTypes.AdeptPower',\r\n        ammo: 'SR5.ItemTypes.Ammo',\r\n        armor: 'SR5.ItemTypes.Armor',\r\n        complex_form: 'SR5.ItemTypes.ComplexForm',\r\n        contact: 'SR5.ItemTypes.Contact',\r\n        critter_power: 'SR5.ItemTypes.CritterPower',\r\n        cyberware: 'SR5.ItemTypes.Cyberware',\r\n        bioware: 'SR5.ItemTypes.Bioware',\r\n        device: 'SR5.ItemTypes.Device',\r\n        equipment: 'SR5.ItemTypes.Equipment',\r\n        lifestyle: 'SR5.ItemTypes.Lifestyle',\r\n        modification: 'SR5.ItemTypes.Modification',\r\n        quality: 'SR5.ItemTypes.Quality',\r\n        sin: 'SR5.ItemTypes.Sin',\r\n        spell: 'SR5.ItemTypes.Spell',\r\n        weapon: 'SR5.ItemTypes.Weapon',\r\n    },\r\n\r\n    attributes: {\r\n        body: 'SR5.AttrBody',\r\n        agility: 'SR5.AttrAgility',\r\n        reaction: 'SR5.AttrReaction',\r\n        strength: 'SR5.AttrStrength',\r\n        willpower: 'SR5.AttrWillpower',\r\n        logic: 'SR5.AttrLogic',\r\n        intuition: 'SR5.AttrIntuition',\r\n        charisma: 'SR5.AttrCharisma',\r\n        magic: 'SR5.AttrMagic',\r\n        resonance: 'SR5.AttrResonance',\r\n        edge: 'SR5.AttrEdge',\r\n        essence: 'SR5.AttrEssence',\r\n        attack: 'SR5.MatrixAttrAttack',\r\n        sleaze: 'SR5.MatrixAttrSleaze',\r\n        data_processing: 'SR5.MatrixAttrDataProc',\r\n        firewall: 'SR5.MatrixAttrFirewall',\r\n    },\r\n\r\n    limits: {\r\n        physical: 'SR5.LimitPhysical',\r\n        social: 'SR5.LimitSocial',\r\n        mental: 'SR5.LimitMental',\r\n        attack: 'SR5.MatrixAttrAttack',\r\n        sleaze: 'SR5.MatrixAttrSleaze',\r\n        data_processing: 'SR5.MatrixAttrDataProc',\r\n        firewall: 'SR5.MatrixAttrFirewall',\r\n    },\r\n\r\n    specialTypes: {\r\n        mundane: 'SR5.Mundane',\r\n        magic: 'SR5.Awakened',\r\n        resonance: 'SR5.Emerged',\r\n    },\r\n\r\n    damageTypes: {\r\n        physical: 'SR5.DmgTypePhysical',\r\n        stun: 'SR5.DmgTypeStun',\r\n        matrix: 'SR5.DmgTypeMatrix',\r\n    },\r\n\r\n    elementTypes: {\r\n        fire: 'SR5.ElementFire',\r\n        cold: 'SR5.ElementCold',\r\n        acid: 'SR5.ElementAcid',\r\n        electricity: 'SR5.ElementElectricity',\r\n        radiation: 'SR5.ElementRadiation',\r\n    },\r\n\r\n    spellCategories: {\r\n        combat: 'SR5.SpellCatCombat',\r\n        detection: 'SR5.SpellCatDetection',\r\n        health: 'SR5.SpellCatHealth',\r\n        illusion: 'SR5.SpellCatIllusion',\r\n        manipulation: 'SR5.SpellCatManipulation',\r\n    },\r\n\r\n    spellTypes: {\r\n        physical: 'SR5.SpellTypePhysical',\r\n        mana: 'SR5.SpellTypeMana',\r\n    },\r\n\r\n    spellRanges: {\r\n        touch: 'SR5.SpellRangeTouch',\r\n        los: 'SR5.SpellRangeLos',\r\n        los_a: 'SR5.SpellRangeLosA',\r\n    },\r\n\r\n    combatSpellTypes: {\r\n        direct: 'SR5.SpellCombatDirect',\r\n        indirect: 'SR5.SpellCombatIndirect',\r\n    },\r\n\r\n    detectionSpellTypes: {\r\n        directional: 'SR5.SpellDetectionDirectional',\r\n        psychic: 'SR5.SpellDetectionPsychic',\r\n        area: 'SR5.SpellDetectionArea',\r\n    },\r\n\r\n    illusionSpellTypes: {\r\n        obvious: 'SR5.SpellIllusionObvious',\r\n        realistic: 'SR5.SpellIllusionRealistic',\r\n    },\r\n\r\n    illusionSpellSenses: {\r\n        'single-sense': 'SR5.SpellIllusionSingleSense',\r\n        'multi-sense': 'SR5.SpellIllusionMultiSense',\r\n    },\r\n\r\n    attributeRolls: {\r\n        composure: 'SR5.RollComposure',\r\n        lift_carry: 'SR5.RollLiftCarry',\r\n        judge_intentions: 'SR5.RollJudgeIntentions',\r\n        memory: 'SR5.RollMemory',\r\n    },\r\n\r\n    matrixTargets: {\r\n        persona: 'SR5.TargetPersona',\r\n        device: 'SR5.TargetDevice',\r\n        file: 'SR5.TargetFile',\r\n        self: 'SR5.TargetSelf',\r\n        sprite: 'SR5.TargetSprite',\r\n        other: 'SR5.TargetOther',\r\n    },\r\n\r\n    durations: {\r\n        instant: 'SR5.DurationInstant',\r\n        sustained: 'SR5.DurationSustained',\r\n        permanent: 'SR5.DurationPermanent',\r\n    },\r\n\r\n    weaponCategories: {\r\n        range: 'SR5.WeaponCatRange',\r\n        melee: 'SR5.WeaponCatMelee',\r\n        thrown: 'SR5.WeaponCatThrown',\r\n    },\r\n\r\n    weaponRanges: {\r\n        short: 'SR5.WeaponRangeShort',\r\n        medium: 'SR5.WeaponRangeMedium',\r\n        long: 'SR5.WeaponRangeLong',\r\n        extreme: 'SR5.WeaponRangeExtreme',\r\n    },\r\n\r\n    qualityTypes: {\r\n        positive: 'SR5.QualityTypePositive',\r\n        negative: 'SR5.QualityTypeNegative',\r\n    },\r\n\r\n    adeptPower: {\r\n        types: {\r\n            active: 'SR5.AdeptPower.Types.Active',\r\n            passive: 'SR5.AdeptPower.Types.Passive',\r\n        },\r\n    },\r\n\r\n    deviceCategories: {\r\n        commlink: 'SR5.DeviceCatCommlink',\r\n        cyberdeck: 'SR5.DeviceCatCyberdeck',\r\n    },\r\n\r\n    cyberwareGrades: {\r\n        standard: 'SR5.CyberwareGradeStandard',\r\n        alpha: 'SR5.CyberwareGradeAlpha',\r\n        beta: 'SR5.CyberwareGradeBeta',\r\n        delta: 'SR5.CyberwareGradeDelta',\r\n        used: 'SR5.CyberwareGradeUsed',\r\n    },\r\n\r\n    knowledgeSkillCategories: {\r\n        street: 'SR5.KnowledgeSkillStreet',\r\n        academic: 'SR5.KnowledgeSkillAcademic',\r\n        professional: 'SR5.KnowledgeSkillProfessional',\r\n        interests: 'SR5.KnowledgeSkillInterests',\r\n    },\r\n\r\n    activeSkills: {\r\n        archery: 'SR5.SkillArchery',\r\n        automatics: 'SR5.SkillAutomatics',\r\n        blades: 'SR5.SkillBlades',\r\n        clubs: 'SR5.SkillClubs',\r\n        exotic_melee: 'SR5.SkillExoticMelee',\r\n        exotic_range: 'SR5.SkillExoticRange',\r\n        heavy_weapons: 'SR5.SkillHeavyWeapons',\r\n        longarms: 'SR5.SkillLongarms',\r\n        pistols: 'SR5.SkillPistols',\r\n        throwing_weapons: 'SR5.SkillThrowingWeapons',\r\n        unarmed_combat: 'SR5.SkillUnarmedCombat',\r\n        disguise: 'SR5.SkillDisguise',\r\n        diving: 'SR5.SkillDiving',\r\n        escape_artist: 'SR5.SkillEscapeArtist',\r\n        free_fall: 'SR5.SkillFreeFall',\r\n        gymnastics: 'SR5.SkillGymnastics',\r\n        palming: 'SR5.SkillPalming',\r\n        perception: 'SR5.SkillPerception',\r\n        running: 'SR5.SkillRunning',\r\n        sneaking: 'SR5.SkillSneaking',\r\n        survival: 'SR5.SkillSurvival',\r\n        swimming: 'SR5.SkillSwimming',\r\n        tracking: 'SR5.SkillTracking',\r\n        con: 'SR5.SkillCon',\r\n        etiquette: 'SR5.SkillEtiquette',\r\n        impersonation: 'SR5.SkillImpersonation',\r\n        instruction: 'SR5.SkillInstruction',\r\n        intimidation: 'SR5.SkillIntimidation',\r\n        leadership: 'SR5.SkillLeadership',\r\n        negotiation: 'SR5.SkillNegotiation',\r\n        performance: 'SR5.SkillPerformance',\r\n        alchemy: 'SR5.SkillAlchemy',\r\n        arcana: 'SR5.SkillArcana',\r\n        artificing: 'SR5.SkillArtificing',\r\n        assensing: 'SR5.SkillAssensing',\r\n        astral_combat: 'SR5.SkillAstralCombat',\r\n        banishing: 'SR5.SkillBanishing',\r\n        binding: 'SR5.SkillBinding',\r\n        counterspelling: 'SR5.SkillCounterspelling',\r\n        disenchanting: 'SR5.SkillDisenchanting',\r\n        ritual_spellcasting: 'SR5.SkillRitualSpellcasting',\r\n        spellcasting: 'SR5.SkillSpellcasting',\r\n        summoning: 'SR5.SkillSummoning',\r\n        compiling: 'SR5.SkillCompiling',\r\n        decompiling: 'SR5.SkillDecompiling',\r\n        registering: 'SR5.SkillRegistering',\r\n        aeronautics_mechanic: 'SR5.SkillAeronauticsMechanic',\r\n        automotive_mechanic: 'SR5.SkillAutomotiveMechanic',\r\n        industrial_mechanic: 'SR5.SkillIndustrialMechanic',\r\n        nautical_mechanic: 'SR5.SkillNauticalMechanic',\r\n        animal_handling: 'SR5.SkillAnimalHandling',\r\n        armorer: 'SR5.SkillArmorer',\r\n        artisan: 'SR5.SkillArtisan',\r\n        biotechnology: 'SR5.SkillBiotechnology',\r\n        chemistry: 'SR5.SkillChemistry',\r\n        computer: 'SR5.SkillComputer',\r\n        cybercombat: 'SR5.SkillCybercombat',\r\n        cybertechnology: 'SR5.SkillCybertechnology',\r\n        demolitions: 'SR5.SkillDemolitions',\r\n        electronic_warfare: 'SR5.SkillElectronicWarfare',\r\n        first_aid: 'SR5.SkillFirstAid',\r\n        forgery: 'SR5.SkillForgery',\r\n        hacking: 'SR5.SkillHacking',\r\n        hardware: 'SR5.SkillHardware',\r\n        locksmith: 'SR5.SkillLocksmith',\r\n        medicine: 'SR5.SkillMedicine',\r\n        navigation: 'SR5.SkillNavigation',\r\n        software: 'SR5.SkillSoftware',\r\n        gunnery: 'SR5.SkillGunnery',\r\n        pilot_aerospace: 'SR5.SkillPilotAerospace',\r\n        pilot_aircraft: 'SR5.SkillPilotAircraft',\r\n        pilot_walker: 'SR5.SkillPilotWalker',\r\n        pilot_ground_craft: 'SR5.SkillPilotGroundCraft',\r\n        pilot_water_craft: 'SR5.SkillPilotWaterCraft',\r\n        pilot_exotic_vehicle: 'SR5.SkillPilotExoticVehicle',\r\n    },\r\n\r\n    actionTypes: {\r\n        none: 'SR5.ActionTypeNone',\r\n        free: 'SR5.ActionTypeFree',\r\n        simple: 'SR5.ActionTypeSimple',\r\n        complex: 'SR5.ActionTypeComplex',\r\n        varies: 'SR5.ActionTypeVaries',\r\n    },\r\n\r\n    // Use within action damage calculation (base <operator> attribute) => value\r\n    actionDamageFormulaOperators: {\r\n        add: '+',\r\n        subtract: '-',\r\n        multiply: '*',\r\n        divide: '/'\r\n    },\r\n\r\n    matrixAttributes: {\r\n        attack: 'SR5.MatrixAttrAttack',\r\n        sleaze: 'SR5.MatrixAttrSleaze',\r\n        data_processing: 'SR5.MatrixAttrDataProc',\r\n        firewall: 'SR5.MatrixAttrFirewall',\r\n    },\r\n\r\n    initiativeCategories: {\r\n        meatspace: 'SR5.InitCatMeatspace',\r\n        astral: 'SR5.InitCatAstral',\r\n        matrix: 'SR5.InitCatMatrix',\r\n    },\r\n\r\n    modificationTypes: {\r\n        weapon: 'SR5.Weapon',\r\n        armor: 'SR5.Armor',\r\n    },\r\n\r\n    mountPoints: {\r\n        barrel: 'SR5.Barrel',\r\n        under_barrel: 'SR5.UnderBarrel',\r\n        stock: 'SR5.Stock',\r\n        top: 'SR5.Top',\r\n        side: 'SR5.Side',\r\n        internal: 'SR5.Internal',\r\n    },\r\n\r\n    lifestyleTypes: {\r\n        street: 'SR5.LifestyleStreet',\r\n        squatter: 'SR5.LifestyleSquatter',\r\n        low: 'SR5.LifestyleLow',\r\n        medium: 'SR5.LifestyleMiddle',\r\n        high: 'SR5.LifestyleHigh',\r\n        luxory: 'SR5.LifestyleLuxory',\r\n        other: 'SR5.LifestyleOther',\r\n    },\r\n\r\n    kbmod: {\r\n        STANDARD: 'shiftKey',\r\n        EDGE: 'altKey',\r\n        SPEC: 'ctrlKey',\r\n    },\r\n\r\n    actorModifiers: {\r\n        soak: 'SR5.RollSoak',\r\n        drain: 'SR5.Drain',\r\n        armor: 'SR5.Armor',\r\n        physical_limit: 'SR5.PhysicalLimit',\r\n        social_limit: 'SR5.SocialLimit',\r\n        mental_limit: 'SR5.MentalLimit',\r\n        stun_track: 'SR5.StunTrack',\r\n        physical_track: 'SR5.PhysicalTrack',\r\n        meat_initiative: 'SR5.MeatSpaceInit',\r\n        meat_initiative_dice: 'SR5.MeatSpaceDice',\r\n        astral_initiative: 'SR5.AstralInit',\r\n        astral_initiative_dice: 'SR5.AstralDice',\r\n        matrix_initiative: 'SR5.MatrixInit',\r\n        matrix_initiative_dice: 'SR5.MatrixDice',\r\n        composure: 'SR5.RollComposure',\r\n        lift_carry: 'SR5.RollLiftCarry',\r\n        judge_intentions: 'SR5.RollJudgeIntentions',\r\n        memory: 'SR5.RollMemory',\r\n        walk: 'SR5.Walk',\r\n        run: 'SR5.Run',\r\n        defense: 'SR5.RollDefense',\r\n        wound_tolerance: 'SR5.WoundTolerance',\r\n        essence: 'SR5.AttrEssence',\r\n        fade: 'SR5.RollFade',\r\n        global: 'SR5.Global',\r\n    },\r\n\r\n    programTypes: {\r\n        common_program: 'SR5.CommonProgram',\r\n        hacking_program: 'SR5.HackingProgram',\r\n        agent: 'SR5.Agent',\r\n    },\r\n\r\n    spiritTypes: {\r\n        // base types\r\n        air: 'SR5.Spirit.Types.Air',\r\n        beasts: 'SR5.Spirit.Types.Beasts',\r\n        earth: 'SR5.Spirit.Types.Earth',\r\n        fire: 'SR5.Spirit.Types.Fire',\r\n        guardian: 'SR5.Spirit.Types.Guardian',\r\n        guidance: 'SR5.Spirit.Types.Guidance',\r\n        man: 'SR5.Spirit.Types.Man',\r\n        plant: 'SR5.Spirit.Types.Plant',\r\n        task: 'SR5.Spirit.Types.Task',\r\n        water: 'SR5.Spirit.Types.Water',\r\n\r\n        // toxic types\r\n        toxic_air: 'SR5.Spirit.Types.ToxicAir',\r\n        toxic_beasts: 'SR5.Spirit.Types.ToxicBeasts',\r\n        toxic_earth: 'SR5.Spirit.Types.ToxicEarth',\r\n        toxic_fire: 'SR5.Spirit.Types.ToxicFire',\r\n        toxic_man: 'SR5.Spirit.Types.ToxicMan',\r\n        toxic_water: 'SR5.Spirit.Types.ToxicWater',\r\n\r\n        // blood types\r\n        blood: 'SR5.Spirit.Types.Blood',\r\n\r\n        // shadow types\r\n        muse: 'SR5.Spirit.Types.Muse',\r\n        nightmare: 'SR5.Spirit.Types.Nightmare',\r\n        shade: 'SR5.Spirit.Types.Shade',\r\n        succubus: 'SR5.Spirit.Types.Succubus',\r\n        wraith: 'SR5.Spirit.Types.Wraith',\r\n\r\n        // shedim types\r\n        shedim: 'SR5.Spirit.Types.Shedim',\r\n        master_shedim: 'SR5.Spirit.Types.MasterShedim',\r\n\r\n        // insect types\r\n        caretaker: 'SR5.Spirit.Types.Caretaker',\r\n        nymph: 'SR5.Spirit.Types.Nymph',\r\n        scout: 'SR5.Spirit.Types.Scout',\r\n        soldier: 'SR5.Spirit.Types.Soldier',\r\n        worker: 'SR5.Spirit.Types.Worker',\r\n        queen: 'SR5.Spirit.Types.Queen',\r\n    },\r\n\r\n    critterPower: {\r\n        categories: {\r\n          mundane: 'SR5.CritterPower.Categories.Mundane',\r\n          paranormal: 'SR5.CritterPower.Categories.Paranormal',\r\n          free_spirit: 'SR5.CritterPower.Categories.FreeSpirit',\r\n          emergent: 'SR5.CritterPower.Categories.Emergent',\r\n          shapeshifter: 'SR5.CritterPower.Categories.Shapeshifter',\r\n          drake: 'SR5.CritterPower.Categories.Drake',\r\n          echoes: 'SR5.CritterPower.Categories.Echoes',\r\n          weakness: 'SR5.CritterPower.Categories.Weakness',\r\n          paranormal_infected: 'SR5.CritterPower.Categories.ParanormalInfected',\r\n        },\r\n        types: {\r\n            mana: 'SR5.CritterPower.Types.Mana',\r\n            physical: 'SR5.CritterPower.Types.Physical',\r\n        },\r\n        ranges: {\r\n            los: 'SR5.CritterPower.Ranges.LineOfSight',\r\n            self: 'SR5.CritterPower.Ranges.Self',\r\n            touch: 'SR5.CritterPower.Ranges.Touch',\r\n            los_a: 'SR5.CritterPower.Ranges.LineOfSightArea',\r\n            special: 'SR5.CritterPower.Ranges.Special',\r\n        },\r\n        durations: {\r\n            always: 'SR5.CritterPower.Durations.Always',\r\n            instant: 'SR5.CritterPower.Durations.Instant',\r\n            sustained: 'SR5.CritterPower.Durations.Sustained',\r\n            permanent: 'SR5.CritterPower.Durations.Permanent',\r\n            special: 'SR5.CritterPower.Durations.Special',\r\n        },\r\n    },\r\n\r\n    spriteTypes: {\r\n        courier: 'SR5.Sprite.Types.Courier',\r\n        crack: 'SR5.Sprite.Types.Crack',\r\n        data: 'SR5.Sprite.Types.Data',\r\n        fault: 'SR5.Sprite.Types.Fault',\r\n        machine: 'SR5.Sprite.Types.Machine',\r\n    },\r\n\r\n    vehicle: {\r\n        types: {\r\n            air: 'SR5.Vehicle.Types.Air',\r\n            aerospace: 'SR5.Vehicle.Types.Aerospace',\r\n            ground: 'SR5.Vehicle.Types.Ground',\r\n            water: 'SR5.Vehicle.Types.Water',\r\n            walker: 'SR5.Vehicle.Types.Walker',\r\n            exotic: 'SR5.Vehicle.Types.Exotic',\r\n        },\r\n        stats: {\r\n            handling: 'SR5.Vehicle.Stats.Handling',\r\n            off_road_handling: 'SR5.Vehicle.Stats.OffRoadHandling',\r\n            speed: 'SR5.Vehicle.Stats.Speed',\r\n            off_road_speed: 'SR5.Vehicle.Stats.OffRoadSpeed',\r\n            acceleration: 'SR5.Vehicle.Stats.Acceleration',\r\n            pilot: 'SR5.Vehicle.Stats.Pilot',\r\n            sensor: 'SR5.Vehicle.Stats.Sensor',\r\n        },\r\n        control_modes: {\r\n            manual: 'SR5.Vehicle.ControlModes.Manual',\r\n            remote: 'SR5.Vehicle.ControlModes.Remote',\r\n            rigger: 'SR5.Vehicle.ControlModes.Rigger',\r\n            autopilot: 'SR5.Vehicle.ControlModes.Autopilot',\r\n        },\r\n        environments: {\r\n            speed: 'SR5.Vehicle.Environments.Speed',\r\n            handling: 'SR5.Vehicle.Environments.Handling',\r\n        },\r\n    },\r\n\r\n    character: {\r\n        types: {\r\n            human: 'SR5.Character.Types.Human',\r\n            elf: 'SR5.Character.Types.Elf',\r\n            ork: 'SR5.Character.Types.Ork',\r\n            dwarf: 'SR5.Character.Types.Dwarf',\r\n            troll: 'SR5.Character.Types.Troll',\r\n        },\r\n    },\r\n};\r\n","/**\r\n * The constants file is a bit of a mess of stuff that doesn't change and some shadowrun specific rule values.\r\n * Everything should be reused by someplace else. Try to avoid any magic values withing your code.\r\n *\r\n * The SR object contains initial values and constants. Constants are written in ALL_CAPS_CONSTANTS and should never be\r\n * changed during runtime.\r\n * Regarding Shadowrun modifier values: If the rules define a negative modifier, declare it here as such. Don't use a positive\r\n * modifier and subtract at the place of use.\r\n *\r\n * Other than this file config.ts exists and only contains mappings between fixed names/ids and translation labels.\r\n *\r\n */\r\nexport const SYSTEM_NAME = 'shadowrun5e';\r\nexport const SYSTEM_SOCKET = `system.${SYSTEM_NAME}`;\r\nexport const FLAGS = {\r\n    ShowGlitchAnimation: 'showGlitchAnimation',\r\n    ShowTokenNameForChatOutput: 'showTokenNameInsteadOfActor',\r\n    WhisperOpposedTestsToTargetedPlayers: 'whisperOpposedTestsToTargetedPlayers',\r\n    OnlyAllowRollOnDefaultableSkills: 'onlyAllowRollOnDefaultableSkills',\r\n    ShowSkillsWithDetails: 'showSkillsWithDetails',\r\n    OnlyAutoRollNPCInCombat: 'onlyAutoRollNPCInCombat',\r\n    MessageCustomRoll: 'customRoll',\r\n    ApplyLimits: 'applyLimits',\r\n    LastRollPromptValue: 'lastRollPromptValue',\r\n    DisplayDefaultRollCard: 'displayDefaultRollCard',\r\n    CombatInitiativePass: 'combatInitiativePass',\r\n    EmbeddedItems: 'embeddedItems',\r\n    LastFireMode: 'lastFireMode',\r\n    LastSpellForce: 'lastSpellForce',\r\n    LastComplexFormLevel: 'lastComplexFormLevel',\r\n    LastFireRange: 'lastFireRange',\r\n    Attack: 'attack',\r\n    Roll: 'roll',\r\n    TargetsSceneTokenIds: 'targetsSceneTokenIds',\r\n    ChangelogShownForVersion: 'changelogShownForVersion',\r\n    Modifier: 'modifier',\r\n    DoInitPass: 'doInitPass',\r\n    DoNextRound: 'doNextRound',\r\n};\r\nexport const CORE_NAME = 'core';\r\nexport const CORE_FLAGS = {\r\n    RollMode: 'rollMode'\r\n}\r\nexport const METATYPEMODIFIER = 'SR5.Character.Modifiers.NPCMetatypeAttribute';\r\n\r\nexport const LENGTH_UNIT_TO_METERS_MULTIPLIERS = {\r\n    'm': 1,\r\n    'meter': 1,\r\n    'meters': 1,\r\n    'km': 1000,\r\n    'kilometers': 1000,\r\n    'kilometer': 1000,\r\n};\r\n\r\nexport const DEFAULT_ROLL_NAME = 'Roll';\r\nexport const LENGTH_UNIT = 'm';\r\nexport const SKILL_DEFAULT_NAME = '';\r\nexport const DEFAULT_ID_LENGTH = 16;\r\n\r\n// Contain data regarding shadowrun rules, mostly whatever is stated in some table to be looked up in other places.\r\nexport const SR = {\r\n    combat: {\r\n        environmental: {\r\n            range_modifiers: {\r\n                short: 0,\r\n                medium: -1,\r\n                long: -3,\r\n                extreme: -6,\r\n                // A modifier of zero will allow for users/gm to still test oor targets with their own judgement.\r\n                out_of_range: 0\r\n            },\r\n            levels: {\r\n                good: 0,\r\n                light: -1,\r\n                moderate: -3,\r\n                heavy: -6,\r\n                extreme: -10,\r\n            }\r\n        },\r\n\r\n        INI_RESULT_MOD_AFTER_INI_PASS: -10,\r\n        INITIAL_INI_PASS: 1,\r\n        INITIAL_INI_ROUND: 1\r\n    },\r\n    die: {\r\n        glitch: [1],\r\n        success: [5, 6]\r\n    },\r\n    defense: {\r\n        spell: {\r\n            direct: {\r\n                mana: 'willpower',\r\n                physical: 'body'\r\n            }\r\n        }\r\n    },\r\n    attributes: {\r\n        ranges: {\r\n            magic: {min: 0},\r\n            edge: {min: 0},\r\n            resonance: {min: 0},\r\n            essence: {min: 0},\r\n            body: {min: 1},\r\n            agility: {min: 1},\r\n            reaction: {min: 1},\r\n            strength: {min: 1},\r\n            willpower: {min: 1},\r\n            logic: {min: 1},\r\n            intuition: {min: 1},\r\n            charisma: {min: 1},\r\n            attack: {min: 0},\r\n            sleaze: {min: 0},\r\n            data_processing: {min: 0},\r\n            firewall: {min: 0}\r\n        },\r\n        SHORT_NAME_LENGTH: 3\r\n    },\r\n    skill: {\r\n        // @PDF SR5#130\r\n        DEFAULTING_MODIFIER: -1,\r\n        SPECIALIZATION_MODIFIER: 2\r\n    }\r\n}\r\n","import DamageData = Shadowrun.DamageData;\r\nimport ActorArmorData = Shadowrun.ActorArmorData;\r\nimport TechnologyData = Shadowrun.TechnologyData;\r\nimport DescriptionData = Shadowrun.DescriptionData;\r\nimport EquipmentData = Shadowrun.EquipmentData;\r\nimport QualityData = Shadowrun.QualityData;\r\nimport ActionRollData = Shadowrun.ActionRollData;\r\nimport LimitData = Shadowrun.LimitData;\r\nimport OpposedTestData = Shadowrun.OpposedTestData;\r\nimport SkillField = Shadowrun.SkillField;\r\nimport {SKILL_DEFAULT_NAME} from \"./constants\";\r\n\r\n/**\r\n * TODO: Add unittesting to DefaultValues helper.\r\n */\r\nexport class DefaultValues {\r\n    /**\r\n     *\r\n     * @param partialDamageData give partial DamageData fields to overwrite default values\r\n     */\r\n    static damageData(partialDamageData: Partial<DamageData> = {}): DamageData {\r\n        return mergeObject({\r\n            type: {\r\n                base: 'physical',\r\n                value: 'physical',\r\n            },\r\n            element: {\r\n                base: '',\r\n                value: '',\r\n            },\r\n            base: 0,\r\n            value: 0,\r\n            ap: {\r\n                base: 0,\r\n                value: 0,\r\n                mod: [],\r\n            },\r\n            attribute: '',\r\n            mod: [],\r\n            base_formula_operator: 'add'\r\n        }, partialDamageData) as DamageData;\r\n    }\r\n\r\n    static actorArmorData(partialActorArmorData: Partial<ActorArmorData> = {}): ActorArmorData {\r\n        return mergeObject({\r\n            value: 0,\r\n            mod: [],\r\n            base: 0,\r\n            label: '',\r\n        }, partialActorArmorData) as ActorArmorData;\r\n    }\r\n\r\n    static equipmentData(partialEquipmentData: Partial<EquipmentData> = {}): EquipmentData {\r\n        return mergeObject({\r\n            description: this.descriptionData(),\r\n            technology: this.technologyData(),\r\n        }, partialEquipmentData) as EquipmentData;\r\n    }\r\n\r\n    static qualityData(partialQualityData: Partial<QualityData> = {}): QualityData {\r\n        return mergeObject({\r\n            type: '',\r\n            description: this.descriptionData(),\r\n            action: this.actionRollData(),\r\n        }, partialQualityData) as QualityData;\r\n    }\r\n\r\n    static technologyData(partialTechnologyData: Partial<TechnologyData> = {}): TechnologyData {\r\n        return mergeObject({\r\n            rating: '',\r\n            availability: '',\r\n            quantity: 1,\r\n            cost: 0,\r\n            equipped: false,\r\n            conceal: {\r\n                base: 0,\r\n                value: 0,\r\n                mod: [],\r\n            },\r\n            condition_monitor: {\r\n                label: '',\r\n                value: 0,\r\n                max: 0,\r\n            }\r\n        }, partialTechnologyData) as TechnologyData;\r\n    }\r\n\r\n    static descriptionData(partialDescriptionData: Partial<DescriptionData> = {}): DescriptionData {\r\n        return mergeObject({\r\n            value: '',\r\n            chat: '',\r\n            source: ''\r\n        }, partialDescriptionData) as DescriptionData;\r\n    }\r\n\r\n    static actionRollData(partialActionRollData: Partial<ActionRollData> = {}): ActionRollData {\r\n        return mergeObject({\r\n            type: '',\r\n            category: '',\r\n            attribute: '',\r\n            attribute2: '',\r\n            skill: '',\r\n            spec: false,\r\n            mod: 0,\r\n            mod_description: '',\r\n            limit: this.limitData(),\r\n            extended: false,\r\n            damage: this.damageData(),\r\n            opposed: this.opposedTestData(),\r\n            alt_mod: 0,\r\n            dice_pool_mod: []\r\n        }, partialActionRollData) as ActionRollData;\r\n    }\r\n\r\n    static limitData(partialLimitData: Partial<LimitData> = {}): LimitData {\r\n        return mergeObject({\r\n            value: 0,\r\n            base: 0,\r\n            attribute: '',\r\n            mod: []\r\n        }, partialLimitData) as LimitData;\r\n    }\r\n\r\n    static opposedTestData(partialOpposedTestData: Partial<OpposedTestData> = {}): OpposedTestData {\r\n        return mergeObject({\r\n            type: '',\r\n            attribute: '',\r\n            attribute2: '',\r\n            skill: '',\r\n            mod: 0,\r\n            description: ''\r\n        }, partialOpposedTestData) as OpposedTestData;\r\n    }\r\n\r\n    static skillData(partialSkillData: Partial<SkillField> = {}): SkillField {\r\n        return mergeObject({\r\n            name: SKILL_DEFAULT_NAME,\r\n            base: 0,\r\n            value: 0,\r\n            hidden: false,\r\n            canDefault: false,\r\n            label: '',\r\n            bonus: [],\r\n            specs: [],\r\n            mod: [],\r\n            attribute: ''\r\n        }, partialSkillData) as SkillField;\r\n    }\r\n}\r\n\r\n// TODO: Move these into DefaultValues implementations.\r\nexport const DataTemplates = {\r\n    grunt: {\r\n        metatype_modifiers: {\r\n            elf: {\r\n                attributes: {\r\n                    agility: +1,\r\n                    charisma: +2,\r\n                    edge: -1\r\n                }\r\n            },\r\n            ork: {\r\n                attributes: {\r\n                    body: +3,\r\n                    strength: +2,\r\n                    logic: -1,\r\n                    charisma: -1,\r\n                    edge: -1\r\n                }\r\n            },\r\n            troll: {\r\n                attributes: {\r\n                    body: +4,\r\n                    agility: -1,\r\n                    strength: +4,\r\n                    logic: -1,\r\n                    intuition: -1,\r\n                    charisma: -2,\r\n                    edge: -1,\r\n                },\r\n                general: {\r\n                    armor: +1\r\n                }\r\n            },\r\n            dwarf: {\r\n                attributes: {\r\n                    body: +2,\r\n                    reaction: -1,\r\n                    strength: +2,\r\n                    willpower: +1,\r\n                    edge: -1\r\n                }\r\n            }\r\n        }\r\n    },\r\n    damage: DefaultValues.damageData({type: {base: '', value: ''}}),\r\n}","export abstract class DataWrapper<DataType> {\r\n    constructor(protected data: DataType) {}\r\n}\r\n","export const registerAppHelpers = () => {\r\n    // TODO: Add modifiers.env typing and add missing type\r\n    /** Determine if a environmental modifier of a specific category is active\r\n     *\r\n     * @param active\r\n     * @param category A environment modifier category (wind, range, ...)\r\n     * @param modifier A environmental modifier value (0, -1)\r\n     */\r\n    Handlebars.registerHelper('IsEnvModifierActive', (active, category: string, modifier: number) => {\r\n        return active[category] === modifier;\r\n    })\r\n}","import { Helpers } from '../helpers';\r\nimport {SafeString} from \"handlebars\";\r\nimport SkillField = Shadowrun.SkillField;\r\nimport {SR5} from \"../config\";\r\nimport {FLAGS, SR, SYSTEM_NAME} from \"../constants\";\r\n\r\nexport const registerBasicHelpers = () => {\r\n    Handlebars.registerHelper('localizeOb', function (strId, obj) {\r\n        if (obj) strId = obj[strId];\r\n        return game.i18n.localize(strId);\r\n    });\r\n\r\n    Handlebars.registerHelper('localizeSkill', function (skill: SkillField): string {\r\n        const translatedSkill = skill.label ? game.i18n.localize(skill.label) : skill.name;\r\n        if (!game.settings.get(SYSTEM_NAME, FLAGS.ShowSkillsWithDetails) || !translatedSkill || !skill.attribute)\r\n            return translatedSkill;\r\n\r\n        // Try showing the first three letters, or less.\r\n        const translatedAttribute = game.i18n.localize(SR5.attributes[skill.attribute]);\r\n        if (!translatedAttribute) return translatedSkill;\r\n\r\n        const cutToIndex = translatedAttribute.length < SR.attributes.SHORT_NAME_LENGTH ?\r\n            translatedAttribute.length -1 :\r\n            SR.attributes.SHORT_NAME_LENGTH;\r\n        const translatedAttributeShorthand = translatedAttribute.substring(0, cutToIndex).toUpperCase();\r\n        return `${translatedSkill} (${translatedAttributeShorthand})`;\r\n    });\r\n\r\n    Handlebars.registerHelper('toHeaderCase', function (str) {\r\n        if (str) return Helpers.label(str);\r\n        return '';\r\n    });\r\n\r\n    Handlebars.registerHelper('concatStrings', function (...args) {\r\n        return args.filter(a => typeof a === 'string').join('');\r\n    });\r\n\r\n    Handlebars.registerHelper('concat', function (strs, c = ',') {\r\n        if (Array.isArray(strs)) {\r\n            return strs.join(c);\r\n        }\r\n        return strs;\r\n    });\r\n\r\n    Handlebars.registerHelper('for', function (from: number, to: number, options) {\r\n        let accum = '';\r\n        for (let i = from; i < to; i += 1) {\r\n            accum += options.fn(i);\r\n        }\r\n\r\n        return accum;\r\n    });\r\n    Handlebars.registerHelper('modulo', function (v1: number, v2: number) {\r\n        return v1 % v2;\r\n    });\r\n    Handlebars.registerHelper('divide', function (v1: number, v2: number) {\r\n        if (v2 === 0) return 0;\r\n        return v1 / v2;\r\n    });\r\n    Handlebars.registerHelper('hasprop', function (obj, prop, options) {\r\n        if (obj.hasOwnProperty(prop)) {\r\n            return options.fn(this);\r\n        } else return options.inverse(this);\r\n    });\r\n    Handlebars.registerHelper('ifin', function (val, arr, options) {\r\n        if (arr.includes(val)) return options.fn(this);\r\n        else return options.inverse(this);\r\n    });\r\n    // if greater than\r\n    Handlebars.registerHelper('ifgt', function (v1, v2, options) {\r\n        if (v1 > v2) return options.fn(this);\r\n        else return options.inverse(this);\r\n    });\r\n    // if less than\r\n    Handlebars.registerHelper('iflt', function (v1, v2, options) {\r\n        if (v1 < v2) return options.fn(this);\r\n        else return options.inverse(this);\r\n    });\r\n    // if less than or equal\r\n    Handlebars.registerHelper('iflte', function (v1, v2, options) {\r\n        if (v1 <= v2) return options.fn(this);\r\n        else return options.inverse(this);\r\n    });\r\n    // if not equal\r\n    Handlebars.registerHelper('ifne', function (v1, v2, options) {\r\n        if (v1 !== v2) return options.fn(this);\r\n        else return options.inverse(this);\r\n    });\r\n    // if equal\r\n    Handlebars.registerHelper('ife', function (v1, v2, options) {\r\n        if (v1 === v2) return options.fn(this);\r\n        else return options.inverse(this);\r\n    });\r\n    Handlebars.registerHelper('not', function (v1) {\r\n        return !v1;\r\n    });\r\n    Handlebars.registerHelper('sum', function (v1, v2) {\r\n        return v1 + v2;\r\n    });\r\n\r\n    Handlebars.registerHelper('isDefined', function (value) {\r\n        return value !== undefined && value !== null;\r\n    });\r\n    /**\r\n     * Return a default value if the provided value is not defined (null or undefined)\r\n     */\r\n    Handlebars.registerHelper('default', function (value: string, defaultValue: string) {\r\n        return new Handlebars.SafeString(value ?? defaultValue);\r\n    });\r\n\r\n    Handlebars.registerHelper('log', function (value: string) {\r\n        console.log(value);\r\n    });\r\n    Handlebars.registerHelper('buildName', function (options) {\r\n        const hash: string[] = Helpers.orderKeys(options.hash);\r\n        const name = Object.values(hash).reduce((retVal, current, index) => {\r\n            if (index > 0) retVal += '.';\r\n            return retVal + current;\r\n        }, '');\r\n        return new Handlebars.SafeString(name);\r\n    });\r\n    Handlebars.registerHelper('disabledHelper', function (value) {\r\n        const val = Boolean(value);\r\n        return val ? val : undefined;\r\n    });\r\n    // TODO: This helper doesn't work... Don't why, but it doesn't.\r\n    Handlebars.registerHelper('localizeShortened', function (label: string, length: number, options: any): SafeString {\r\n        return new Handlebars.SafeString(Helpers.shortenAttributeLocalization(label, length));\r\n    });\r\n};\r\n","import { preloadHandlebarsTemplates } from './HandlebarTemplates';\r\nimport { registerBasicHelpers } from './BasicHelpers';\r\nimport { registerRollAndLabelHelpers } from './RollAndLabelHelpers';\r\nimport { registerItemLineHelpers } from './ItemLineHelpers';\r\nimport { registerSkillLineHelpers } from './SkillLineHelpers';\r\nimport {registerAppHelpers} from \"./AppHelpers\";\r\n\r\nexport class HandlebarManager {\r\n    static async loadTemplates() {\r\n        await preloadHandlebarsTemplates();\r\n    }\r\n    static registerHelpers(): void {\r\n        registerBasicHelpers();\r\n        registerRollAndLabelHelpers();\r\n        registerItemLineHelpers();\r\n        registerSkillLineHelpers();\r\n        registerAppHelpers();\r\n    }\r\n}","export const preloadHandlebarsTemplates = async () => {\r\n    const templatePaths = [\r\n        // actor tabs\r\n        'systems/shadowrun5e/dist/templates/actor/tabs/ActionsTab.html',\r\n        'systems/shadowrun5e/dist/templates/actor/tabs/BioTab.html',\r\n        'systems/shadowrun5e/dist/templates/actor/tabs/GearTab.html',\r\n        'systems/shadowrun5e/dist/templates/actor/tabs/MagicTab.html',\r\n        'systems/shadowrun5e/dist/templates/actor/tabs/MatrixTab.html',\r\n        'systems/shadowrun5e/dist/templates/actor/tabs/MiscTab.html',\r\n        'systems/shadowrun5e/dist/templates/actor/tabs/SkillsTab.html',\r\n        'systems/shadowrun5e/dist/templates/actor/tabs/SocialTab.html',\r\n        'systems/shadowrun5e/dist/templates/actor/tabs/SpellsTab.html',\r\n        'systems/shadowrun5e/dist/templates/actor/tabs/CritterPowersTab.html',\r\n\r\n        'systems/shadowrun5e/dist/templates/actor/tabs/spirit/SpiritSkillsTab.html',\r\n\r\n        'systems/shadowrun5e/dist/templates/actor/tabs/matrix/SpriteSkillsTab.html',\r\n\r\n        'systems/shadowrun5e/dist/templates/actor/tabs/vehicle/VehicleSkillsTab.html',\r\n        'systems/shadowrun5e/dist/templates/actor/tabs/vehicle/VehicleMatrixTab.html',\r\n\r\n        // uncategorized lists\r\n        'systems/shadowrun5e/dist/templates/actor/parts/Initiative.html',\r\n        'systems/shadowrun5e/dist/templates/actor/parts/Movement.html',\r\n        'systems/shadowrun5e/dist/templates/actor/parts/ProfileImage.html',\r\n        'systems/shadowrun5e/dist/templates/actor/parts/NameInput.html',\r\n        'systems/shadowrun5e/dist/templates/actor/parts/ActionList.html',\r\n        'systems/shadowrun5e/dist/templates/actor/parts/ContactList.html',\r\n        'systems/shadowrun5e/dist/templates/actor/parts/SinAndLifestyleList.html',\r\n\r\n        // magic\r\n        'systems/shadowrun5e/dist/templates/actor/parts/magic/AdeptPowerList.html',\r\n        'systems/shadowrun5e/dist/templates/actor/parts/magic/SpellList.html',\r\n        'systems/shadowrun5e/dist/templates/actor/parts/magic/SpellAndAdeptPowerList.html',\r\n        'systems/shadowrun5e/dist/templates/actor/parts/magic/SpiritOptions.html',\r\n\r\n        // matrix\r\n        'systems/shadowrun5e/dist/templates/actor/parts/matrix/ProgramList.html',\r\n        'systems/shadowrun5e/dist/templates/actor/parts/matrix/ComplexFormList.html',\r\n        'systems/shadowrun5e/dist/templates/actor/parts/matrix/MatrixAttribute.html',\r\n        'systems/shadowrun5e/dist/templates/actor/parts/matrix/SpritePowerList.html',\r\n        'systems/shadowrun5e/dist/templates/actor/parts/matrix/DeviceRating.html',\r\n\r\n        // attributes\r\n        'systems/shadowrun5e/dist/templates/actor/parts/attributes/Attribute.html',\r\n        'systems/shadowrun5e/dist/templates/actor/parts/attributes/AttributeList.html',\r\n        'systems/shadowrun5e/dist/templates/actor/parts/attributes/SpecialAttributeList.html',\r\n        'systems/shadowrun5e/dist/templates/actor/parts/attributes/Limits.html',\r\n\r\n        // skills\r\n        'systems/shadowrun5e/dist/templates/actor/parts/skills/ActiveSkillList.html',\r\n        'systems/shadowrun5e/dist/templates/actor/parts/skills/LanguageAndKnowledgeSkillList.html',\r\n\r\n        // vehicle\r\n        'systems/shadowrun5e/dist/templates/actor/parts/vehicle/VehicleStatsList.html',\r\n        'systems/shadowrun5e/dist/templates/actor/parts/vehicle/VehicleSecondStatsList.html',\r\n        'systems/shadowrun5e/dist/templates/actor/parts/vehicle/VehicleMovement.html',\r\n\r\n        // limited actor\r\n        'systems/shadowrun5e/dist/templates/actor-limited/character.html',\r\n        'systems/shadowrun5e/dist/templates/actor-limited/spirit.html',\r\n        'systems/shadowrun5e/dist/templates/actor-limited/sprite.html',\r\n        'systems/shadowrun5e/dist/templates/actor-limited/vehicle.html',\r\n        'systems/shadowrun5e/dist/templates/actor-limited/critter.html',\r\n        'systems/shadowrun5e/dist/templates/actor-limited/parts/Header.html',\r\n        'systems/shadowrun5e/dist/templates/actor-limited/parts/MiscCharacter.html',\r\n        'systems/shadowrun5e/dist/templates/actor-limited/parts/MiscSpirit.html',\r\n        'systems/shadowrun5e/dist/templates/actor-limited/parts/MiscSprite.html',\r\n        'systems/shadowrun5e/dist/templates/actor-limited/parts/MiscVehicle.html',\r\n        'systems/shadowrun5e/dist/templates/actor-limited/parts/MiscCritter.html',\r\n\r\n\r\n        'systems/shadowrun5e/dist/templates/item/parts/description.html',\r\n        'systems/shadowrun5e/dist/templates/item/parts/technology.html',\r\n        'systems/shadowrun5e/dist/templates/item/parts/header.html',\r\n        'systems/shadowrun5e/dist/templates/item/parts/weapon-ammo-list.html',\r\n        'systems/shadowrun5e/dist/templates/item/parts/weapon-mods-list.html',\r\n        'systems/shadowrun5e/dist/templates/item/parts/action.html',\r\n        'systems/shadowrun5e/dist/templates/item/parts/damage.html',\r\n        'systems/shadowrun5e/dist/templates/item/parts/opposed.html',\r\n        'systems/shadowrun5e/dist/templates/item/parts/spell.html',\r\n        'systems/shadowrun5e/dist/templates/item/parts/complex_form.html',\r\n        'systems/shadowrun5e/dist/templates/item/parts/weapon.html',\r\n        'systems/shadowrun5e/dist/templates/item/parts/armor.html',\r\n        'systems/shadowrun5e/dist/templates/item/parts/matrix.html',\r\n        'systems/shadowrun5e/dist/templates/item/parts/sin.html',\r\n        'systems/shadowrun5e/dist/templates/item/parts/contact.html',\r\n        'systems/shadowrun5e/dist/templates/item/parts/lifestyle.html',\r\n        'systems/shadowrun5e/dist/templates/item/parts/ammo.html',\r\n        'systems/shadowrun5e/dist/templates/item/parts/modification.html',\r\n        'systems/shadowrun5e/dist/templates/item/parts/program.html',\r\n        'systems/shadowrun5e/dist/templates/item/parts/critter_power.html',\r\n        'systems/shadowrun5e/dist/templates/rolls/parts/parts-list.html',\r\n        'systems/shadowrun5e/dist/templates/rolls/parts/Damage.html',\r\n\r\n        // to wrap the bodies of tabs\r\n        'systems/shadowrun5e/dist/templates/common/TabWrapper.html',\r\n        'systems/shadowrun5e/dist/templates/common/ValueInput.html',\r\n\r\n        // Useful wrapper and implemented components\r\n        'systems/shadowrun5e/dist/templates/common/ValueMaxAttribute.html',\r\n        'systems/shadowrun5e/dist/templates/common/Attribute.html',\r\n        'systems/shadowrun5e/dist/templates/common/ValueModifiers.html',\r\n\r\n        // useful select template for the common pattern\r\n        'systems/shadowrun5e/dist/templates/common/Select.html',\r\n\r\n        // to create the condition monitors and edge counter\r\n        'systems/shadowrun5e/dist/templates/common/HorizontalCellInput.html',\r\n\r\n        // looks like a ListHeader\r\n        'systems/shadowrun5e/dist/templates/common/HeaderBlock.html',\r\n\r\n        'systems/shadowrun5e/dist/templates/common/NameLineBlock.html',\r\n\r\n        // list components\r\n        'systems/shadowrun5e/dist/templates/common/List/ListItem.html',\r\n        'systems/shadowrun5e/dist/templates/common/List/ListHeader.html',\r\n\r\n        // dialogs\r\n        'systems/shadowrun5e/dist/templates/apps/dialogs/damage-application.html',\r\n    ];\r\n\r\n    return loadTemplates(templatePaths);\r\n};\r\n","import SR5ItemType = Shadowrun.SR5ItemType;\r\nimport { SR5ItemDataWrapper } from '../item/SR5ItemDataWrapper';\r\n\r\nexport const registerItemLineHelpers = () => {\r\n    Handlebars.registerHelper('ItemHeaderIcons', function (id) {\r\n        const PlusIcon = 'fas fa-plus';\r\n        const AddText = game.i18n.localize('SR5.Add');\r\n        const addIcon = {\r\n            icon: PlusIcon,\r\n            text: AddText,\r\n            title: game.i18n.localize('SR5.CreateItem'),\r\n            cssClass: 'item-create',\r\n        };\r\n        switch (id) {\r\n            case 'lifestyle':\r\n                addIcon.title = game.i18n.localize('SR5.CreateItemLifestyle');\r\n                return [addIcon];\r\n            case 'contact':\r\n                addIcon.title = game.i18n.localize('SR5.CreateItemContact');\r\n                return [addIcon];\r\n            case 'sin':\r\n                addIcon.title = game.i18n.localize('SR5.CreateItemSIN');\r\n                return [addIcon];\r\n            case 'license':\r\n                addIcon.title = game.i18n.localize('SR5.CreateItemLicense');\r\n                return [addIcon];\r\n            case 'quality':\r\n                addIcon.title = game.i18n.localize('SR5.CreateItemQuality');\r\n                return [addIcon];\r\n            case 'adept_power':\r\n                addIcon.title = game.i18n.localize('SR5.CreateItemAdeptPower');\r\n                return [addIcon];\r\n            case 'action':\r\n                addIcon.title = game.i18n.localize('SR5.CreateItemAction');\r\n                return [addIcon];\r\n            case 'spell':\r\n                addIcon.title = game.i18n.localize('SR5.CreateItemSpell');\r\n                return [addIcon];\r\n            case 'gear':\r\n                addIcon.title = game.i18n.localize('SR5.CreateItemGear');\r\n                return [addIcon];\r\n            case 'complex_form':\r\n                addIcon.title = game.i18n.localize('SR5.CreateItemComplexForm');\r\n                return [addIcon];\r\n            case 'program':\r\n                addIcon.title = game.i18n.localize('SR5.CreateItemProgram');\r\n                return [addIcon];\r\n            case 'weapon':\r\n                addIcon.title = game.i18n.localize('SR5.CreateItemWeapon');\r\n                return [addIcon];\r\n            case 'armor':\r\n                addIcon.title = game.i18n.localize('SR5.CreateItemArmor');\r\n                return [addIcon];\r\n            case 'ammo':\r\n                addIcon.title = game.i18n.localize('SR5.CreateItemAmmo');\r\n                return [addIcon];\r\n            case 'device':\r\n                addIcon.title = game.i18n.localize('SR5.CreateItemDevice');\r\n                return [addIcon];\r\n            case 'equipment':\r\n                addIcon.title = game.i18n.localize('SR5.CreateItemEquipment');\r\n                return [addIcon];\r\n            case 'cyberware':\r\n                addIcon.title = game.i18n.localize('SR5.CreateItemCyberware');\r\n                return [addIcon];\r\n            case 'bioware':\r\n                addIcon.title = game.i18n.localize('SR5.CreateItemBioware');\r\n                return [addIcon];\r\n            case 'critter_power':\r\n                addIcon.title = game.i18n.localize('SR5.CreateItemCritterPower');\r\n                return [addIcon];\r\n            case 'sprite_power':\r\n                addIcon.title = game.i18n.localize('SR5.CreateItemSpritePower');\r\n                return [addIcon];\r\n            default:\r\n                return [];\r\n        }\r\n    });\r\n\r\n    Handlebars.registerHelper('ItemHeaderRightSide', function (id) {\r\n        switch (id) {\r\n            case 'action':\r\n                return [\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize('SR5.Skill'),\r\n                            cssClass: 'six',\r\n                        },\r\n                    },\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize('SR5.Attribute'),\r\n                            cssClass: 'six',\r\n                        },\r\n                    },\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize('SR5.Attribute'),\r\n                            cssClass: 'six',\r\n                        },\r\n                    },\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize('SR5.Limit'),\r\n                            cssClass: 'six',\r\n                        },\r\n                    },\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize('SR5.Modifier'),\r\n                            cssClass: 'six',\r\n                        },\r\n                    },\r\n                ];\r\n            case 'weapon':\r\n            case 'armor':\r\n            case 'device':\r\n            case 'equipment':\r\n            case 'cyberware':\r\n            case 'bioware':\r\n            case 'ammo':\r\n                return [\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize('SR5.Qty'),\r\n                        },\r\n                    },\r\n                ];\r\n            case 'complex_form':\r\n                return [\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize('SR5.Target'),\r\n                        },\r\n                    },\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize('SR5.Duration'),\r\n                        },\r\n                    },\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize('SR5.Fade'),\r\n                        },\r\n                    },\r\n                ];\r\n            case 'adept_power':\r\n                return [\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize('SR5.PowerType'),\r\n                        },\r\n                    },\r\n                ];\r\n            case 'spell':\r\n                return [\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize('SR5.SpellType'),\r\n                        },\r\n                    },\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize('SR5.SpellRange'),\r\n                        },\r\n                    },\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize('SR5.Duration'),\r\n                        },\r\n                    },\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize('SR5.Drain'),\r\n                        },\r\n                    },\r\n                ];\r\n            case 'critter_power':\r\n                return [\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize('SR5.CritterPower.Type'),\r\n                        },\r\n                    },\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize('SR5.CritterPower.Range'),\r\n                        },\r\n                    },\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize('SR5.CritterPower.Duration'),\r\n                        },\r\n                    },\r\n                ];\r\n            case 'quality':\r\n                return [\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize('SR5.QualityType'),\r\n                        },\r\n                    },\r\n                ];\r\n            default:\r\n                return [];\r\n        }\r\n    });\r\n\r\n    Handlebars.registerHelper('ItemRightSide', function (item: SR5ItemType) {\r\n        const wrapper = new SR5ItemDataWrapper(item);\r\n        const qtyInput = {\r\n            input: {\r\n                type: 'number',\r\n                value: wrapper.getQuantity(),\r\n                cssClass: 'item-qty',\r\n            },\r\n        };\r\n        switch (item.type) {\r\n            case 'action':\r\n                return [\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize(CONFIG.SR5.activeSkills[wrapper.getActionSkill() ?? '']),\r\n                            cssClass: 'six',\r\n                        },\r\n                    },\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize(CONFIG.SR5.attributes[wrapper.getActionAttribute() ?? '']),\r\n                            cssClass: 'six',\r\n                        },\r\n                    },\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize(CONFIG.SR5.attributes[wrapper.getActionAttribute2() ?? '']),\r\n                            cssClass: 'six',\r\n                        },\r\n                    },\r\n                    {\r\n                        text: {\r\n                            text: wrapper.getLimitAttribute()\r\n                                ? game.i18n.localize(CONFIG.SR5.attributes[wrapper.getLimitAttribute() ?? ''])\r\n                                : wrapper.getActionLimit(),\r\n                            cssClass: 'six',\r\n                        },\r\n                    },\r\n                    {\r\n                        text: {\r\n                            text: wrapper.getActionDicePoolMod(),\r\n                            cssClass: 'six',\r\n                        },\r\n                    },\r\n                ];\r\n            case 'armor':\r\n            case 'ammo':\r\n            case 'device':\r\n            case 'equipment':\r\n            case 'cyberware':\r\n            case 'bioware':\r\n                return [qtyInput];\r\n            case 'weapon':\r\n                if (wrapper.isRangedWeapon()) {\r\n                    const count = wrapper.getAmmo()?.current.value ?? 0;\r\n                    const max = wrapper.getAmmo()?.current.max ?? 0;\r\n                    const text = count < max ? `${game.i18n.localize('SR5.WeaponReload')} (${count}/${max})` : game.i18n.localize('SR5.AmmoFull');\r\n                    const cssClass = 'no-break' + (count < max ? ' reload-ammo roll' : 'faded');\r\n                    return [\r\n                        {\r\n                            text: {\r\n                                title: `${game.i18n.localize('SR5.WeaponAmmoCount')}: ${count}`,\r\n                                text,\r\n                                cssClass,\r\n                            },\r\n                        },\r\n                        {\r\n                            text: {\r\n                                text: '',\r\n                            },\r\n                        },\r\n                        qtyInput,\r\n                    ];\r\n                } else {\r\n                    return [qtyInput];\r\n                }\r\n\r\n            case 'quality':\r\n                return [\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize(CONFIG.SR5.qualityTypes[item.data.type ?? '']),\r\n                        },\r\n                    },\r\n                ];\r\n\r\n            case 'adept_power':\r\n                return [\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize(CONFIG.SR5.adeptPower.types[item.data.type ?? '']),\r\n                        },\r\n                    },\r\n                ];\r\n            case 'spell':\r\n                return [\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize(CONFIG.SR5.spellTypes[item.data.type ?? '']),\r\n                        },\r\n                    },\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize(CONFIG.SR5.spellRanges[item.data.range ?? '']),\r\n                        },\r\n                    },\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize(CONFIG.SR5.durations[item.data.duration ?? '']),\r\n                        },\r\n                    },\r\n                    {\r\n                        text: {\r\n                            text: wrapper.getDrain(),\r\n                        },\r\n                    },\r\n                ];\r\n            case 'critter_power':\r\n                return [\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize(CONFIG.SR5.critterPower.types[item.data.powerType ?? '']),\r\n                        },\r\n                    },\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize(CONFIG.SR5.critterPower.ranges[item.data.range ?? '']),\r\n                        },\r\n                    },\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize(CONFIG.SR5.critterPower.durations[item.data.duration ?? '']),\r\n                        },\r\n                    },\r\n                ];\r\n\r\n            case 'complex_form':\r\n                return [\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize(CONFIG.SR5.matrixTargets[item.data.target ?? '']),\r\n                        },\r\n                    },\r\n                    {\r\n                        text: {\r\n                            text: game.i18n.localize(CONFIG.SR5.durations[item.data.duration ?? '']),\r\n                        },\r\n                    },\r\n                    {\r\n                        text: {\r\n                            text: String(item.data.fade),\r\n                        },\r\n                    },\r\n                ];\r\n            case 'program':\r\n                return [\r\n                    {\r\n                        button: {\r\n                            cssClass: `item-equip-toggle ${wrapper.isEquipped() ? 'light' : ''}`,\r\n                            short: true,\r\n                            text: wrapper.isEquipped() ? game.i18n.localize('SR5.Loaded') : game.i18n.localize('SR5.Load') + ' >>',\r\n                        },\r\n                    },\r\n                ];\r\n            default:\r\n                return [];\r\n        }\r\n    });\r\n\r\n    Handlebars.registerHelper('ItemIcons', function (item: SR5ItemType) {\r\n        const wrapper = new SR5ItemDataWrapper(item);\r\n        const editIcon = {\r\n            icon: 'fas fa-edit item-edit',\r\n            title: game.i18n.localize('SR5.EditItem'),\r\n        };\r\n        const removeIcon = {\r\n            icon: 'fas fa-trash item-delete',\r\n            title: game.i18n.localize('SR5.DeleteItem'),\r\n        };\r\n        const equipIcon = {\r\n            icon: `${wrapper.isEquipped() ? 'fas fa-check-circle' : 'far fa-circle'} item-equip-toggle`,\r\n            title: game.i18n.localize('SR5.ToggleEquip'),\r\n        };\r\n        const pdfIcon = {\r\n            icon: 'fas fa-file open-source-pdf',\r\n            title: game.i18n.localize('SR5.OpenSourcePdf'),\r\n        };\r\n\r\n        const icons = [editIcon, removeIcon];\r\n\r\n        if (ui['PDFoundry']) {\r\n            icons.unshift(pdfIcon);\r\n        }\r\n\r\n        switch (wrapper.getType()) {\r\n            case 'program':\r\n            case 'armor':\r\n            case 'device':\r\n            case 'equipment':\r\n            case 'cyberware':\r\n            case 'bioware':\r\n            case 'weapon':\r\n                icons.unshift(equipIcon);\r\n        }\r\n\r\n        return icons;\r\n    });\r\n};\r\n","import { PartsList } from '../parts/PartsList';\r\nimport ModList = Shadowrun.ModList;\r\nimport {SR5Actor} from \"../actor/SR5Actor\";\r\nimport {FLAGS, SYSTEM_NAME} from \"../constants\";\r\nimport {Helpers} from \"../helpers\";\r\nimport {SafeString} from \"handlebars\";\r\nimport DamageData = Shadowrun.DamageData;\r\n\r\nexport const registerRollAndLabelHelpers = () => {\r\n    Handlebars.registerHelper('damageAbbreviation', function (damage) {\r\n        if (damage === 'physical') return 'P';\r\n        if (damage === 'stun') return 'S';\r\n        if (damage === 'matrix') return 'M';\r\n        return '';\r\n    });\r\n\r\n    Handlebars.registerHelper('damageCode', function(damage: DamageData): SafeString {\r\n        const typeCode = Handlebars.helpers.damageAbbreviation(damage.type.value);\r\n        let code = `${damage.value}${typeCode}`;\r\n        return new Handlebars.SafeString(code);\r\n    });\r\n\r\n    Handlebars.registerHelper('diceIcon', function (side) {\r\n        if (side) {\r\n            switch (side) {\r\n                case 1:\r\n                    return 'red';\r\n                case 2:\r\n                    return 'grey';\r\n                case 3:\r\n                    return 'grey';\r\n                case 4:\r\n                    return 'grey';\r\n                case 5:\r\n                    return 'green';\r\n                case 6:\r\n                    return 'green';\r\n            }\r\n        }\r\n    });\r\n\r\n    Handlebars.registerHelper('elementIcon', function (element) {\r\n        let icon = '';\r\n        if (element === 'electricity') {\r\n            icon = 'fas fa-bolt';\r\n        } else if (element === 'radiation') {\r\n            icon = 'fas fa-radiation-alt';\r\n        } else if (element === 'fire') {\r\n            icon = 'fas fa-fire';\r\n        } else if (element === 'acid') {\r\n            icon = 'fas fa-vials';\r\n        } else if (element === 'cold') {\r\n            icon = 'fas fa-snowflake';\r\n        }\r\n        return icon;\r\n    });\r\n\r\n    Handlebars.registerHelper('partsTotal', function (partsList: ModList<number>) {\r\n        const parts = new PartsList(partsList);\r\n        return parts.total;\r\n    });\r\n\r\n    Handlebars.registerHelper('signedValue', function (value: number): string {\r\n        if (value > 0) {\r\n            return `+${value}`;\r\n        } else {\r\n            return `${value}`;\r\n        }\r\n    });\r\n\r\n    Handlebars.registerHelper('speakerName', Helpers.getChatSpeakerName);\r\n};\r\n","import SkillField = Shadowrun.SkillField;\r\nimport { Helpers } from '../helpers';\r\nimport SR5SheetFilters = Shadowrun.SR5SheetFilters;\r\nimport SkillCategories = Shadowrun.SkillCategories;\r\nimport {SkillRules} from \"../actor/SkillRules\";\r\nimport {FLAGS, SYSTEM_NAME} from \"../constants\";\r\n\r\nexport const registerSkillLineHelpers = () => {\r\n    Handlebars.registerHelper('SkillHeaderIcons', function (category: SkillCategories) {\r\n        const addIcon = {\r\n            icon: 'fas fa-plus',\r\n            title: game.i18n.localize('SR5.AddSkill'),\r\n            text: game.i18n.localize('SR5.Add'),\r\n            cssClass: '',\r\n        };\r\n        switch (category) {\r\n            case 'active':\r\n                addIcon.cssClass = 'add-active';\r\n                return [addIcon];\r\n            case 'language':\r\n                addIcon.cssClass = 'add-language';\r\n                return [addIcon];\r\n            case 'knowledge':\r\n                addIcon.cssClass = 'add-knowledge';\r\n                return [addIcon];\r\n            default:\r\n                return [];\r\n        }\r\n    });\r\n\r\n    Handlebars.registerHelper('SkillHeaderRightSide', function (id, filters: SR5SheetFilters) {\r\n        const specs = {\r\n            text: {\r\n                text: game.i18n.localize('SR5.Specialization'),\r\n                cssClass: 'skill-spec-item',\r\n            },\r\n        };\r\n\r\n        const rtg = {\r\n            // Change Rating header to show active filtering.\r\n            text: {\r\n                text: !filters || filters.showUntrainedSkills ?\r\n                    game.i18n.localize('SR5.Rtg') :\r\n                    game.i18n.localize('SR5.RtgAboveZero'),\r\n                cssClass: 'rtg',\r\n            },\r\n        };\r\n\r\n        switch (id) {\r\n            case 'active':\r\n            case 'knowledge':\r\n            case 'language':\r\n                return [specs, rtg];\r\n            default:\r\n                return [];\r\n        }\r\n    });\r\n    Handlebars.registerHelper('SkillRightSide', function (skillType: string, skill: SkillField) {\r\n        const specs = Array.isArray(skill.specs) ? skill.specs : [skill.specs];\r\n        return [\r\n            {\r\n                text: {\r\n                    text: specs.join(', ') ?? '',\r\n                    cssClass: 'skill-spec-item',\r\n                },\r\n            },\r\n            {\r\n                text: {\r\n                    text: Helpers.calcTotal(skill),\r\n                    cssClass: 'rtg',\r\n                },\r\n            },\r\n        ];\r\n    });\r\n\r\n    Handlebars.registerHelper('SkillAdditionCssClass', function(skill: SkillField): string[] {\r\n        const classes: string[] = [];\r\n\r\n        // @PDF SR5#151 not defaultable skills should be shown as italic.\r\n        if (game.settings.get(SYSTEM_NAME, FLAGS.ShowSkillsWithDetails) && !SkillRules.allowDefaultingRoll(skill)) {\r\n            classes.push('skill-roll-not-defaultable');\r\n        }\r\n\r\n        return classes;\r\n    })\r\n\r\n    Handlebars.registerHelper('SkillIcons', function (skillType: string, skill: SkillField) {\r\n        const editIcon = {\r\n            icon: 'fas fa-edit',\r\n            title: game.i18n.localize('SR5.EditSkill'),\r\n            cssClass: '',\r\n        };\r\n        const removeIcon = {\r\n            icon: 'fas fa-trash',\r\n            title: game.i18n.localize('SR5.DeleteSkill'),\r\n            cssClass: '',\r\n        };\r\n        switch (skillType) {\r\n            case 'active':\r\n                editIcon.cssClass = 'skill-edit';\r\n                removeIcon.cssClass = 'remove-active'\r\n                return [editIcon, removeIcon];\r\n            case 'language':\r\n                editIcon.cssClass = 'language-skill-edit';\r\n                removeIcon.cssClass = 'remove-language';\r\n                return [editIcon, removeIcon];\r\n            case 'knowledge':\r\n                editIcon.cssClass = 'knowledge-skill-edit';\r\n                removeIcon.cssClass = 'remove-knowledge';\r\n                return [editIcon, removeIcon];\r\n            default:\r\n                return [editIcon];\r\n        }\r\n    });\r\n\r\n};\r\n","import AttributeField = Shadowrun.AttributeField;\r\nimport SkillField = Shadowrun.SkillField;\r\nimport ModifiableValue = Shadowrun.ModifiableValue;\r\nimport LabelField = Shadowrun.LabelField;\r\nimport RangesTemplateData = Shadowrun.RangesTemplateData;\r\nimport RangeTemplateData = Shadowrun.RangeTemplateData;\r\nimport DamageData = Shadowrun.DamageData;\r\nimport ModifiedDamageData = Shadowrun.ModifiedDamageData;\r\nimport DamageType = Shadowrun.DamageType;\r\nimport DamageElement = Shadowrun.DamageElement;\r\nimport {PartsList} from './parts/PartsList';\r\nimport {DEFAULT_ID_LENGTH, FLAGS, LENGTH_UNIT, LENGTH_UNIT_TO_METERS_MULTIPLIERS, SR, SYSTEM_NAME} from \"./constants\";\r\nimport {SR5Actor} from \"./actor/SR5Actor\";\r\nimport {DataTemplates} from \"./dataTemplates\";\r\nimport {DeleteConfirmationDialog} from \"./apps/dialogs/DeleteConfirmationDialog\";\r\nimport Skills = Shadowrun.Skills;\r\n\r\ninterface CalcTotalOptions {\r\n    min?: number,\r\n    max?: number\r\n}\r\n\r\nexport class Helpers {\r\n    /**\r\n     * Calculate the total value for a data object\r\n     * - stores the total value and returns it\r\n     * @param data\r\n     * @param options\r\n     */\r\n    static calcTotal(data: ModifiableValue, options?: CalcTotalOptions): number {\r\n        if (data.mod === undefined) data.mod = [];\r\n        const parts = new PartsList(data.mod);\r\n        // if a temp field is found, add it as a unique part\r\n        if (data['temp'] !== undefined) {\r\n            parts.addUniquePart('SR5.Temporary', data['temp']);\r\n        }\r\n\r\n        data.value = Helpers.roundTo(parts.total + data.base, 3);\r\n        data.mod = parts.list;\r\n\r\n        data.value = Helpers.applyValueRange(data.value, options);\r\n\r\n        return data.value;\r\n    }\r\n\r\n    /** Round a number to a given degree.\r\n     *\r\n     * @param value Number to round with.\r\n     * @param decimals Amount of decimals after the decimal point.\r\n     */\r\n    static roundTo(value: number, decimals): number {\r\n        const multiplier = Math.pow(10, decimals);\r\n        return Math.round(value * multiplier) / multiplier;\r\n    }\r\n\r\n    /** Make sure a given value is in between a range.\r\n     *\r\n     * @param value\r\n     * @param options Define the range the given value must be in (or none)\r\n     */\r\n    static applyValueRange(value: number, options?: CalcTotalOptions): number {\r\n        if (typeof options?.min === 'number') {\r\n            value = Math.max(options.min, value);\r\n        }\r\n        if (typeof options?.max === 'number') {\r\n            value = Math.min(options.max, value);\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    static listItemId(event) {\r\n        return event.currentTarget.closest('.list-item').dataset.itemId;\r\n    }\r\n\r\n    // replace 'SR5.'s on keys with 'SR5_DOT_'\r\n    static onSetFlag(data) {\r\n        if (typeof data !== 'object') return data;\r\n        if (data === undefined || data === null) return data;\r\n        const newData = {};\r\n        for (const [key, value] of Object.entries(data)) {\r\n            const newKey = key.replace('SR5.', 'SR5_DOT_');\r\n            newData[newKey] = this.onSetFlag(value);\r\n        }\r\n        return newData;\r\n    }\r\n\r\n    // replace 'SR5_DOT_' with 'SR5.' on keys\r\n    static onGetFlag(data) {\r\n        if (typeof data !== 'object') return data;\r\n        if (data === undefined || data === null) return data;\r\n        const newData = {};\r\n        for (const [key, value] of Object.entries(data)) {\r\n            const newKey = key.replace('SR5_DOT_', 'SR5.');\r\n            newData[newKey] = this.onGetFlag(value);\r\n        }\r\n        return newData;\r\n    }\r\n\r\n    static isMatrix(atts?: boolean | (AttributeField | string | SkillField)[] | AttributeField | string | SkillField) {\r\n        if (!atts) return false;\r\n        if (typeof atts === 'boolean') return atts;\r\n        // array of labels to check for on the incoming data\r\n        const matrixLabels = [\r\n            'SR5.MatrixAttrFirewall',\r\n            'SR5.MatrixAttrDataProcessing',\r\n            'SR5.MatrixAttrSleaze',\r\n            'SR5.MatrixAttrAttack',\r\n            'SR5.SkillComputer',\r\n            'SR5.SkillHacking',\r\n            'SR5.SkillCybercombat',\r\n            'SR5.SkillElectronicWarfare',\r\n            'SR5.Software',\r\n        ];\r\n        if (!Array.isArray(atts)) atts = [atts];\r\n        atts = atts.filter((att) => att);\r\n        // iterate over the attributes and return true if we find a matrix att\r\n        for (const att of atts) {\r\n            if (typeof att === 'string') {\r\n                if (matrixLabels.indexOf(att) >= 0) {\r\n                    return true;\r\n                }\r\n            } else if (typeof att === 'object' && (att as LabelField).label !== undefined) {\r\n                if (matrixLabels.indexOf(att.label ?? '') >= 0) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        // if we don't find anything return false\r\n        return false;\r\n    }\r\n\r\n    static parseInputToString(val: number | string | string[] | undefined): string {\r\n        if (val === undefined) return '';\r\n        if (typeof val === 'number') return val.toString();\r\n        if (typeof val === 'string') return val;\r\n        if (Array.isArray(val)) {\r\n            return val.join(',');\r\n        }\r\n        return '';\r\n    }\r\n\r\n    static parseInputToNumber(val: number | string | string[] | undefined): number {\r\n        if (typeof val === 'number') return val;\r\n        if (typeof val === 'string') {\r\n            const ret = +val;\r\n            if (!isNaN(ret)) return ret;\r\n            return 0;\r\n        }\r\n        if (Array.isArray(val)) {\r\n            const str = val.join('');\r\n            const ret = +str;\r\n            if (!isNaN(ret)) return ret;\r\n            return 0;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    static setupCustomCheckbox(app, html) {\r\n        const setContent = (el) => {\r\n            const checkbox = $(el).children('input[type=checkbox]');\r\n            const checkmark = $(el).children('.checkmark');\r\n            if ($(checkbox).prop('checked')) {\r\n                $(checkmark).addClass('fa-check-circle');\r\n                $(checkmark).removeClass('fa-circle');\r\n            } else {\r\n                $(checkmark).addClass('fa-circle');\r\n                $(checkmark).removeClass('fa-check-circle');\r\n            }\r\n        };\r\n        html.find('label.checkbox').each(function () {\r\n            setContent(this);\r\n        });\r\n        html.find('label.checkbox').click((event) => setContent(event.currentTarget));\r\n        html.find('.submit-checkbox').change((event) => app._onSubmit(event));\r\n    }\r\n\r\n    static mapRoundsToDefenseMod(rounds) {\r\n        if (rounds === 1) return 0;\r\n        if (rounds === 3) return -2;\r\n        if (rounds === 6) return -5;\r\n        if (rounds === 10) return -9;\r\n        return 0;\r\n    }\r\n\r\n    static mapRoundsToDefenseDesc(rounds) {\r\n        if (rounds === 1) return '';\r\n        if (rounds === 3) return '-2';\r\n        if (rounds === 6) return '-5';\r\n        if (rounds === 10) return '-9';\r\n        if (rounds === 20) return 'SR5.DuckOrCover';\r\n        return '';\r\n    }\r\n\r\n    static label(str) {\r\n        const frags = str.split('_');\r\n        for (let i = 0; i < frags.length; i++) {\r\n            frags[i] = frags[i].charAt(0).toUpperCase() + frags[i].slice(1);\r\n        }\r\n        frags.forEach((frag, idx) => {\r\n            if (frag === 'Processing') frags[idx] = 'Proc.';\r\n            if (frag === 'Mechanic') frags[idx] = 'Mech.';\r\n        });\r\n        return frags.join(' ');\r\n    }\r\n\r\n    static orderKeys(obj) {\r\n        const keys = Object.keys(obj).sort(function keyOrder(k1, k2) {\r\n            if (k1 < k2) return -1;\r\n            if (k1 > k2) return +1;\r\n            return 0;\r\n        });\r\n\r\n        let i;\r\n        const after = {};\r\n        for (i = 0; i < keys.length; i++) {\r\n            after[keys[i]] = obj[keys[i]];\r\n            delete obj[keys[i]];\r\n        }\r\n\r\n        for (i = 0; i < keys.length; i++) {\r\n            obj[keys[i]] = after[keys[i]];\r\n        }\r\n        return obj;\r\n    }\r\n\r\n    static hasModifiers(event) {\r\n        return event && (event.shiftKey || event.altKey || event.ctrlKey || event.metaKey);\r\n    }\r\n\r\n    static filter(obj, comp) {\r\n        const retObj = {};\r\n        if (typeof obj === 'object' && obj !== null) {\r\n            Object.entries(obj).forEach(([key, value]) => {\r\n                if (comp([key, value])) retObj[key] = value;\r\n            });\r\n        }\r\n        return retObj;\r\n    }\r\n\r\n    static addLabels(obj, label) {\r\n        if (typeof obj === 'object' && obj !== null) {\r\n            if (!obj.hasOwnProperty('label') && obj.hasOwnProperty('value') && label !== '') {\r\n                obj.label = label;\r\n            }\r\n            Object.entries(obj)\r\n                .filter(([, value]) => typeof value === 'object')\r\n                .forEach(([key, value]) => Helpers.addLabels(value, key));\r\n        }\r\n    }\r\n\r\n    /* Handle Shadowrun style shortened attribute names with typical three letter shortening. */\r\n    static shortenAttributeLocalization(label: string, length: number = 3): string {\r\n        const name = game.i18n.localize(label);\r\n\r\n        if (length <= 0) {\r\n            return name;\r\n        }\r\n\r\n        if (name.length < length) {\r\n            length = name.length;\r\n        }\r\n\r\n        return name.slice(0, length).toUpperCase();\r\n    }\r\n\r\n    static getToken(id?: string): Token | undefined {\r\n        for (const token of canvas.tokens.placeables) {\r\n            if (token.id === id) {\r\n                return token;\r\n            }\r\n        }\r\n    }\r\n\r\n    static getSceneToken(sceneTokenId: string): Token | undefined {\r\n        const [sceneId, tokenId] = sceneTokenId.split('.');\r\n\r\n        const isActiveScene = sceneId === canvas?.scene._id;\r\n        if (isActiveScene) {\r\n            return canvas.tokens.get(tokenId);\r\n        }\r\n\r\n        // Build Token using it's data from the connected scene as a fallback.\r\n        const scene = game.scenes.get(sceneId);\r\n        if (!scene) {\r\n            return;\r\n        }\r\n\r\n        //@ts-ignore\r\n        const tokenData = scene.data.tokens.find((t) => t.id === Number(tokenId));\r\n        if (!tokenData) {\r\n            return;\r\n        }\r\n\r\n        return new Token(tokenData);\r\n    }\r\n\r\n    static getUserTargets(user?: User): Token[] {\r\n        user = user ? user : game.user;\r\n\r\n        if (user) {\r\n            return Array.from(user.targets);\r\n        } else {\r\n            return [];\r\n        }\r\n    }\r\n\r\n    static userHasTargets(user?: User): boolean {\r\n        user = user ? user : game.user;\r\n\r\n        return user.targets.size > 0;\r\n    }\r\n\r\n    static measureTokenDistance(tokenOrigin: Token, tokenDest: Token): number {\r\n        if (!tokenOrigin || !tokenDest) return 0;\r\n\r\n        const origin = new PIXI.Point(...canvas.grid.getCenter(tokenOrigin.data.x, tokenOrigin.data.y));\r\n        const dest = new PIXI.Point(...canvas.grid.getCenter(tokenDest.data.x, tokenDest.data.y));\r\n\r\n        const distanceInGridUnits = canvas.grid.measureDistance(origin, dest, {gridSpaces: true});\r\n        const sceneUnit = canvas.scene.data.gridUnits;\r\n        // TODO: Define weapon range units somewhere (settings)\r\n        return Helpers.convertLengthUnit(distanceInGridUnits, sceneUnit);\r\n    }\r\n\r\n    static convertLengthUnit(length: number, fromUnit: string): number {\r\n        //@ts-ignore\r\n        fromUnit = fromUnit.toLowerCase();\r\n\r\n        if (!LENGTH_UNIT_TO_METERS_MULTIPLIERS.hasOwnProperty(fromUnit)) {\r\n            console.error(`Distance can't be converted from ${fromUnit} to ${LENGTH_UNIT}`);\r\n            return 0;\r\n        }\r\n\r\n        // Round down since X.8 will hit X and not X+1.\r\n        return Math.floor(length * LENGTH_UNIT_TO_METERS_MULTIPLIERS[fromUnit]);\r\n    }\r\n\r\n    static getWeaponRange(distance: number, ranges: RangesTemplateData): RangeTemplateData {\r\n        // Assume ranges to be in ASC order and to define their max range.\r\n        // Should no range be found, assume distance to be out of range.\r\n        const rangeKey = Object.keys(ranges).find(range => distance < ranges[range].distance);\r\n        if (rangeKey) {\r\n            return ranges[rangeKey];\r\n        } else {\r\n            const {extreme} = ranges;\r\n            return Helpers.createRangeDescription('SR5.OutOfRange', extreme.distance, SR.combat.environmental.range_modifiers.out_of_range);\r\n        }\r\n    }\r\n\r\n    static getControlledTokens(): Token[] {\r\n        return canvas.tokens.controlled;\r\n    }\r\n\r\n    static getSelectedActorsOrCharacter(): SR5Actor[] {\r\n        const tokens = Helpers.getControlledTokens();\r\n        const actors = tokens.map(token => token.actor) as SR5Actor[];\r\n\r\n        // Try to default to a users character.\r\n        if (actors.length === 0 && game.user?.character) {\r\n            actors.push(game.user.character as SR5Actor);\r\n        }\r\n\r\n        return actors;\r\n    }\r\n\r\n    static createRangeDescription(label: string, distance: number, modifier: number): RangeTemplateData {\r\n        label = game.i18n.localize(label);\r\n        return {label, distance, modifier}\r\n    }\r\n\r\n    static convertIndexedObjectToArray(indexedObject: object): object[] {\r\n        return Object.keys(indexedObject).map((index) => {\r\n            if (Number.isNaN(index)) {\r\n                console.warn('An object with no numerical index was given, which is likely a bug.', indexedObject);\r\n            }\r\n            return indexedObject[index];\r\n        });\r\n    }\r\n\r\n    static getChatSpeakerName(actor: SR5Actor): string {\r\n        if (!actor) return '';\r\n\r\n        const useTokenNameForChatOutput = game.settings.get(SYSTEM_NAME, FLAGS.ShowTokenNameForChatOutput);\r\n        const token = actor.getToken();\r\n\r\n        if (useTokenNameForChatOutput && token) return token.data.name;\r\n\r\n        return actor.name;\r\n    }\r\n\r\n    static createDamageData(value: number, type: DamageType, ap: number = 0, element: DamageElement = ''): DamageData {\r\n        const damage = duplicate(DataTemplates.damage);\r\n        damage.base = value;\r\n        damage.value = value;\r\n        damage.type.base = type;\r\n        damage.type.value = type;\r\n        damage.ap.base = ap;\r\n        damage.ap.value = ap;\r\n        damage.element.base = element;\r\n        damage.element.value = element;\r\n\r\n        return damage;\r\n    }\r\n\r\n    /** Modifies given damage value and returns both original and modified damage\r\n     *\r\n     * For better readability reduceDamageByHits wraps this method to avoid negative params in the call signature.\r\n     * so instead of\r\n     * > modifyDamageByHits(incoming, -hits, label)\r\n     * do this instead\r\n     * > reduceDamageByHits(incoming, hits, label)\r\n     *\r\n     * @param incoming A DamageData value to be modified from\r\n     * @param hits Positive or negative hits to change the damage value with.\r\n     * @param modificationLabel The translatable label for the modification\r\n     */\r\n    static modifyDamageByHits(incoming: DamageData, hits: number, modificationLabel: string): ModifiedDamageData {\r\n        const modified = duplicate(incoming);\r\n        modified.mod = PartsList.AddUniquePart(modified.mod, modificationLabel, hits);\r\n        modified.value = Helpers.calcTotal(modified, {min: 0});\r\n\r\n        return {incoming, modified};\r\n    }\r\n\r\n    /** Reduces given damage value and returns both original and modified damage.\r\n     *\r\n     * Should you want RAISE the damage value, use modifyDamageByHits directly.\r\n     *\r\n     * @param incoming A DamageData value to be modified from\r\n     * @param hits Positive hits to reduce the damage value with! Should the hits amount be negative, use modifyDamageByHits.\r\n     * @param modificationLabel The translatable label for the modification\r\n     */\r\n    static reduceDamageByHits(incoming: DamageData, hits: number, modificationLabel: string): ModifiedDamageData {\r\n        if (hits < 0) {\r\n            console.warn('Helpers.reduceDamageByHits should only be called with positive hits values to avoid confusion');\r\n        }\r\n        return Helpers.modifyDamageByHits(incoming, -hits, modificationLabel);\r\n    }\r\n\r\n    static async confirmDeletion(): Promise<boolean> {\r\n        const dialog = new DeleteConfirmationDialog();\r\n        await dialog.select();\r\n        return !dialog.canceled && dialog.selectedButton === 'delete';\r\n    }\r\n\r\n    /**\r\n     * This can be used to create an SkillField into the Skills data path during the Skill creation process.\r\n     *\r\n     * @param skillDataPath Could be 'data.skills.active' or 'data.skill.language.value' or more\r\n     * @param skillField A SkillField with whatever values. You could use DefaultValues.skillData to create one.\r\n     * @param idLength How long should the id (GUID) be?\r\n     */\r\n    static getRandomIdSkillFieldDataEntry(skillDataPath: string, skillField: SkillField, idLength: number = DEFAULT_ID_LENGTH): { id: string, updateSkillData: { [skillDataPath: string]: { [id: string]: SkillField } } } | undefined {\r\n        if (!skillDataPath || skillDataPath.length === 0) return;\r\n\r\n        const id = randomID(idLength);\r\n        const updateSkillData = {\r\n            [skillDataPath]: {[id]: skillField}\r\n        };\r\n\r\n        return {\r\n            id,\r\n            updateSkillData\r\n        }\r\n    }\r\n\r\n    /** A simple helper to delete existing entity data keys.\r\n     *\r\n     * @param path The main data path as doted string relative from the item type data (not entity data). data.skills.active\r\n     * @param key The single sub property within the path that's meant to be deleted. 'test'\r\n     *\r\n     * @return An expected return object could look like this: {'data.skills.active': {'-=Pistols': null}} and would\r\n     *         remove the Pistols key from the 'data.skills.active' path within Entity.data.data.skills.active.\r\n     */\r\n    static getDeleteDataEntry(path: string, key: string): {[path: string]: {[key: string]: null}} {\r\n        // Entity.update utilizes the mergeObject function within Foundry.\r\n        // That functions documentation allows property deletion using the -= prefix before property key.\r\n        return {[path]: {[`-=${key}`]: null}};\r\n    }\r\n\r\n    /**\r\n     * Alphabetically sort skills either by their translated label. Should a skill not have one, use the name as a\r\n     * fallback.\r\n     *\r\n     * Sorting should be aware of UTF-8, however please blame JavaScript if it's not. :)\r\n     *\r\n     * @param skills\r\n     * @param asc Set to true for ascending sorting order and to false for descending order.\r\n     * @return Sorted Skills given by the skills parameter\r\n     */\r\n    static sortSkills(skills: Skills, asc: boolean=true): Skills {\r\n        // Filter entries instead of values to have a store of ids for easy rebuild.\r\n        const sortedEntries = Object.entries(skills).sort(([aId, a], [bId, b]) => {\r\n            const comparatorA = a.label ? game.i18n.localize(a.label) : a.name;\r\n            const comparatorB = b.label ? game.i18n.localize(b.label) : b.name;\r\n            // Use String.localeCompare instead of the > Operator to support other alphabets.\r\n            if (asc)\r\n                return comparatorA.localeCompare(comparatorB) === 1 ? 1 : -1;\r\n            else\r\n                return comparatorA.localeCompare(comparatorB) === 1 ? 1 : -1;\r\n        });\r\n\r\n        // Rebuild the Skills type using the earlier entries.\r\n        const sortedAsObject = {};\r\n        for (const [id, skill] of sortedEntries) {\r\n            sortedAsObject[id] = skill;\r\n        }\r\n\r\n        return sortedAsObject;\r\n    }\r\n}\r\n","import { SR5 } from './config';\r\nimport { Migrator } from './migrator/Migrator';\r\nimport { registerSystemSettings } from './settings';\r\nimport { SYSTEM_NAME } from './constants';\r\nimport { SR5Actor } from './actor/SR5Actor';\r\nimport { SR5ActorSheet } from './actor/SR5ActorSheet';\r\nimport { SR5Item } from './item/SR5Item';\r\nimport { SR5ItemSheet } from './item/SR5ItemSheet';\r\nimport { ShadowrunRoller } from './rolls/ShadowrunRoller';\r\nimport { Helpers } from './helpers';\r\nimport { HandlebarManager } from './handlebars/HandlebarManager';\r\nimport { measureDistance } from './canvas';\r\nimport * as chat from './chat';\r\nimport { createItemMacro, rollItemMacro } from './macros';\r\n\r\nimport { OverwatchScoreTracker } from './apps/gmtools/OverwatchScoreTracker';\r\nimport { SR5Combat } from './combat/SR5Combat';\r\nimport { Import } from './importer/apps/import-form';\r\nimport {ChangelogApplication} from \"./apps/ChangelogApplication\";\r\nimport {EnvModifiersApplication} from \"./apps/EnvModifiersApplication\";\r\n\r\nexport class HooksManager {\r\n    static registerHooks() {\r\n        // Register your highest level hook callbacks here for a quick overview of what's hooked into.\r\n\r\n        Hooks.once('init', HooksManager.init);\r\n\r\n        Hooks.on('canvasInit', HooksManager.canvasInit);\r\n        Hooks.on('ready', HooksManager.ready);\r\n        Hooks.on('renderChatMessage', HooksManager.renderChatMessage);\r\n        Hooks.on('getChatLogEntryContext', chat.addChatMessageContextOptions);\r\n        Hooks.on('hotbarDrop', HooksManager.hotbarDrop);\r\n        Hooks.on('renderSceneControls', HooksManager.renderSceneControls);\r\n        Hooks.on('getSceneControlButtons', HooksManager.getSceneControlButtons);\r\n        Hooks.on('getCombatTrackerEntryContext', SR5Combat.addCombatTrackerContextOptions);\r\n        Hooks.on('renderItemDirectory', HooksManager.renderItemDirectory);\r\n        Hooks.on('renderTokenHUD', EnvModifiersApplication.addTokenHUDFields);\r\n    }\r\n\r\n    static init() {\r\n        console.log(`Loading Shadowrun 5e System\r\n___________________\r\n ___________ _____ \r\n/  ___| ___ \\\\  ___|\r\n\\\\ \\`--.| |_/ /___ \\\\ \r\n \\`--. \\\\    /    \\\\ \\\\\r\n/\\\\__/ / |\\\\ \\\\/\\\\__/ /\r\n\\\\____/\\\\_| \\\\_\\\\____/ \r\n===================\r\n`);\r\n\r\n        // Create a shadowrun5e namespace within the game global\r\n        game['shadowrun5e'] = {\r\n            SR5Actor,\r\n            ShadowrunRoller,\r\n            SR5Item,\r\n            rollItemMacro,\r\n        };\r\n\r\n        CONFIG.SR5 = SR5;\r\n        // @ts-ignore\r\n        CONFIG.Actor.entityClass = SR5Actor;\r\n        // @ts-ignore\r\n        CONFIG.Item.entityClass = SR5Item;\r\n        CONFIG.Combat.entityClass = SR5Combat;\r\n\r\n        registerSystemSettings();\r\n\r\n        // Register sheet application classes\r\n        // NOTE: See dnd5e for a multi class approach for all actor types using the types array in Actors.registerSheet\r\n        Actors.unregisterSheet('core', ActorSheet);\r\n        Actors.registerSheet(SYSTEM_NAME, SR5ActorSheet, {\r\n            label: \"SR5.SheetActor\",\r\n            makeDefault: true\r\n        });\r\n        Items.unregisterSheet('core', ItemSheet);\r\n        Items.registerSheet(SYSTEM_NAME, SR5ItemSheet, {\r\n            label: \"SR5.SheetItem\",\r\n            makeDefault: true\r\n        });\r\n\r\n        ['renderSR5ActorSheet', 'renderSR5ItemSheet'].forEach((s) => {\r\n            Hooks.on(s, (app, html) => Helpers.setupCustomCheckbox(app, html));\r\n        });\r\n\r\n        HandlebarManager.loadTemplates();\r\n    }\r\n\r\n    static async ready() {\r\n        if (game.user.isGM) {\r\n            await Migrator.BeginMigration();\r\n\r\n            if (ChangelogApplication.showApplication) {\r\n                await new ChangelogApplication().render(true);\r\n            }\r\n\r\n        }\r\n\r\n        // TODO make based on foundry version\r\n        const diceIconSelector = '#chat-controls .roll-type-select .fa-dice-d20';\r\n        $(document).on('click', diceIconSelector, () => ShadowrunRoller.promptRoll());\r\n        const diceIconSelectorNew = '#chat-controls .chat-control-icon .fa-dice-d20';\r\n        $(document).on('click', diceIconSelectorNew, () => ShadowrunRoller.promptRoll());\r\n\r\n        // const target = game.scenes.entries[0];\r\n        // console.error('scene', target);\r\n        // await new EnvModifiersApplication(target).render(true);\r\n        //\r\n        // const token = canvas.tokens.placeables[0];\r\n        // console.error('token', token);\r\n        // await new EnvModifiersApplication(token).render(true);\r\n    }\r\n\r\n    static canvasInit() {\r\n        canvas.grid.diagonalRule = game.settings.get(SYSTEM_NAME, 'diagonalMovement');\r\n        //@ts-ignore\r\n        // SquareGrid isn't typed.\r\n        SquareGrid.prototype.measureDistances = measureDistance;\r\n    }\r\n\r\n    static hotbarDrop(bar, data, slot) {\r\n        if (data.type !== 'Item') return;\r\n\r\n        createItemMacro(data.data, slot);\r\n        return false;\r\n    }\r\n\r\n    static renderSceneControls(controls, html) {\r\n        html.find('[data-tool=\"overwatch-score-tracker\"]').on('click', (event) => {\r\n            event.preventDefault();\r\n            new OverwatchScoreTracker().render(true);\r\n        });\r\n    }\r\n\r\n    static getSceneControlButtons(controls) {\r\n        const tokenControls = controls.find((c) => c.name === 'token');\r\n\r\n        if (game.user.isGM) {\r\n            tokenControls.tools.push({\r\n                name: 'overwatch-score-tracker',\r\n                title: 'CONTROLS.SR5.OverwatchScoreTracker',\r\n                icon: 'fas fa-network-wired',\r\n                button: true\r\n            });\r\n        }\r\n\r\n        tokenControls.tools.push(EnvModifiersApplication.getControl());\r\n    }\r\n\r\n    static renderChatMessage(app, html) {\r\n        chat.addRollListeners(app, html);\r\n    }\r\n\r\n    static renderItemDirectory(app: Application, html: JQuery) {\r\n        const button = $('<button>Import Chummer Data</button>');\r\n        html.find('footer').before(button);\r\n        button.on('click', (event) => {\r\n            new Import().render(true);\r\n        });\r\n    }\r\n}\r\n","import { WeaponImporter } from '../importer/WeaponImporter';\r\nimport { ArmorImporter } from '../importer/ArmorImporter';\r\nimport { DataImporter } from '../importer/DataImporter';\r\nimport { AmmoImporter } from '../importer/AmmoImporter';\r\nimport { ModImporter } from '../importer/ModImporter';\r\nimport { SpellImporter } from '../importer/SpellImporter';\r\nimport { QualityImporter } from '../importer/QualityImporter';\r\nimport { ComplexFormImporter } from '../importer/ComplexFormImporter';\r\nimport { WareImporter } from '../importer/WareImporter';\r\nimport { CritterPowerImporter } from '../importer/CritterPowerImporter';\r\nimport { ImportHelper, ImportMode } from '../helper/ImportHelper';\r\nimport {DeviceImporter} from \"../importer/DeviceImporter\";\r\nimport {EquipmentImporter} from \"../importer/EquipmentImporter\";\r\n\r\n\r\nexport class Import extends Application {\r\n    private supportedDataFiles: string[] = [];\r\n    private dataFiles: File[] = [];\r\n    private langDataFile: File;\r\n    private parsedFiles: string[] = [];\r\n    private disableImportButton: boolean = true;\r\n    private currentParsedFile: string;\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this.collectDataImporterFileSupport();\r\n    }\r\n\r\n    static get defaultOptions() {\r\n        const options = super.defaultOptions;\r\n        options.id = 'chummer-data-import';\r\n        options.classes = ['app', 'window-app', 'filepicker'];\r\n        options.title = 'Chummer/Data Import';\r\n        options.template = 'systems/shadowrun5e/dist/templates/apps/compendium-import.html';\r\n        options.width = 600;\r\n        options.height = 'auto';\r\n        return options;\r\n    }\r\n\r\n    getData(options?: any): any {\r\n        const data = super.getData(options);\r\n\r\n        data.dataFiles = {};\r\n        this.supportedDataFiles.forEach((supportedFileName: string) => {\r\n            const missing = !this.dataFiles.some((dataFile) => supportedFileName === dataFile.name);\r\n            const parsed = this.parsedFiles.some((parsedFileName) => supportedFileName === parsedFileName);\r\n            const parsing = supportedFileName === this.currentParsedFile;\r\n\r\n            data.dataFiles[supportedFileName] = {\r\n                name: supportedFileName,\r\n                missing,\r\n                parsed,\r\n                parsing\r\n            };\r\n        });\r\n        data.langDataFile = this.langDataFile ? this.langDataFile.name : '';\r\n        data.finishedOverallParsing = this.supportedDataFiles.length === this.parsedFiles.length;\r\n        data.disableImportButton = this.disableImportButton;\r\n\r\n        return { ...data };\r\n    }\r\n\r\n    private collectDataImporterFileSupport() {\r\n        this.supportedDataFiles = [];\r\n        Import.Importers.forEach(importer => {\r\n            if (this.supportedDataFiles.some(supported => importer.files.includes(supported))) {\r\n                return;\r\n            }\r\n            this.supportedDataFiles = this.supportedDataFiles.concat(importer.files);\r\n        });\r\n    }\r\n\r\n    private clearParsingStatus() {\r\n        this.parsedFiles = [];\r\n    }\r\n\r\n    //Order is important, ex. some weapons need mods to fully import\r\n    static Importers: DataImporter[] = [\r\n        new ModImporter(),\r\n        new WeaponImporter(),\r\n        new ArmorImporter(),\r\n        new AmmoImporter(),\r\n        new SpellImporter(),\r\n        new ComplexFormImporter(),\r\n        new QualityImporter(),\r\n        new WareImporter(),\r\n        new CritterPowerImporter(),\r\n        new DeviceImporter(),\r\n        new EquipmentImporter()\r\n    ];\r\n\r\n    async parseXML(xmlSource, fileName) {\r\n        let jsonSource = await DataImporter.xml2json(xmlSource);\r\n        ImportHelper.SetMode(ImportMode.XML);\r\n\r\n        for (const di of Import.Importers) {\r\n            if (di.CanParse(jsonSource)) {\r\n                di.ExtractTranslation(fileName);\r\n                await di.Parse(jsonSource);\r\n            }\r\n        }\r\n    }\r\n\r\n    async parseXmli18n(xmlSource) {\r\n        if (!xmlSource) {\r\n            return;\r\n        }\r\n        let jsonSource = await DataImporter.xml2json(xmlSource);\r\n\r\n        if (DataImporter.CanParseI18n(jsonSource)) {\r\n            DataImporter.ParseTranslation(jsonSource);\r\n        }\r\n    }\r\n\r\n    isDataFile = (file: File): boolean => {\r\n        return this.supportedDataFiles.some((supported) => supported === file.name);\r\n    };\r\n\r\n    isLangDataFile = (file: File): boolean => {\r\n        const pattern = /[a-zA-Z]{2}-[a-zA-Z]{2}_data\\.xml/;\r\n        return file.name.match(pattern) !== null;\r\n    };\r\n\r\n    activateListeners(html) {\r\n        html.find(\"button[type='submit']\").on('click', async (event) => {\r\n            event.preventDefault();\r\n\r\n            this.clearParsingStatus();\r\n            this.disableImportButton = true;\r\n\r\n            await this.render();\r\n\r\n            if (this.langDataFile) {\r\n                const text = await this.langDataFile.text();\r\n                await this.parseXmli18n(text);\r\n            }\r\n\r\n            // Use 'for of'-loop to allow await to actually pause.\r\n            // don't use .forEach as it won't await for async callbacks.\r\n            // iterate over supportedDataFiles to adhere to Importer order\r\n            for (const supportedFile of this.supportedDataFiles) {\r\n                // Only try supported files.\r\n                const dataFile = this.dataFiles.find((dataFile) => dataFile.name === supportedFile);\r\n                if (dataFile) {\r\n                    const text = await dataFile.text();\r\n\r\n                     // Show status for current parsing progression.\r\n                    this.currentParsedFile = dataFile.name;\r\n                    await this.render();\r\n\r\n\r\n                    await this.parseXML(text, dataFile.name);\r\n\r\n                    // Store status to show parsing progression.\r\n                    if (!this.parsedFiles.some((parsedFileName) => parsedFileName === dataFile.name)) {\r\n                        this.parsedFiles.push(dataFile.name);\r\n                    }\r\n\r\n                    await this.render();\r\n                }\r\n            }\r\n\r\n            this.disableImportButton = false;\r\n\r\n            await this.render();\r\n        });\r\n\r\n        html.find(\"input[type='file'].langDataFileDrop\").on('change', async (event) => {\r\n            Array.from(event.target.files).forEach((file: File) => {\r\n                if (this.isLangDataFile(file)) {\r\n                    this.langDataFile = file;\r\n                    this.render();\r\n                }\r\n            });\r\n            return true;\r\n        });\r\n\r\n        html.find(\"input[type='file'].filedatadrop\").on('change', async (event) => {\r\n            Array.from(event.target.files).forEach((file: File) => {\r\n                if (this.isDataFile(file)) {\r\n                    // Allow user to overwrite an already added file, they have their reasons.\r\n                    const existingIdx = this.dataFiles.findIndex((dataFile) => dataFile.name === file.name);\r\n                    if (existingIdx === -1) {\r\n                        this.dataFiles.push(file);\r\n                    } else {\r\n                        this.dataFiles[existingIdx] = file;\r\n                    }\r\n                }\r\n            });\r\n\r\n            if (this.dataFiles.length > 0) {\r\n                this.disableImportButton = false;\r\n            }\r\n\r\n            this.render();\r\n        });\r\n    }\r\n}\r\n","import { Constants } from '../importer/Constants';\r\nimport { XMLStrategy } from './XMLStrategy';\r\nimport { JSONStrategy } from './JSONStrategy';\r\nimport { ImportStrategy } from './ImportStrategy';\r\n\r\nexport enum ImportMode {\r\n    XML = 1,\r\n    JSON = 2,\r\n}\r\nexport enum LookupMode {\r\n    Directory = 0,\r\n    Actor = 1,\r\n}\r\n\r\n/**\r\n * An import helper to standardize data extraction.\r\n * Mostly conceived to reduced required refactoring if Chummer changes data file layout.\r\n * Also contains helper methods to safely parse values to appropriate types.\r\n */\r\nexport class ImportHelper {\r\n    public static readonly CHAR_KEY = '_TEXT';\r\n\r\n    private static s_Strategy: ImportStrategy = new XMLStrategy();\r\n\r\n    public static SetMode(mode: ImportMode) {\r\n        switch (mode) {\r\n            case ImportMode.XML:\r\n                ImportHelper.s_Strategy = new XMLStrategy();\r\n                break;\r\n            case ImportMode.JSON:\r\n                ImportHelper.s_Strategy = new JSONStrategy();\r\n                break;\r\n        }\r\n    }\r\n\r\n    private constructor() {}\r\n\r\n    /**\r\n     * Helper method to create a new folder.\r\n     * @param name The name of the folder.\r\n     * @param parent The parent folder.\r\n     * @returns {Promise<Folder>} A promise that resolves with the folder object when the folder is created.\r\n     */\r\n    public static async NewFolder(name: string, parent: Folder | null = null): Promise<Folder> {\r\n        return await Folder.create({\r\n            type: 'Item',\r\n            parent: parent === null ? null : parent.id,\r\n            name: name,\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Get a folder at a path in the items directory.\r\n     * @param path The absolute path of the folder.\r\n     * @param mkdirs If true, will make all folders along the hierarchy if they do not exist.\r\n     * @returns A promise that will resolve with the found folder.\r\n     */\r\n    public static async GetFolderAtPath(path: string, mkdirs: boolean = false): Promise<Entity> {\r\n        let idx = 0;\r\n        let curr,\r\n            last = null;\r\n        let next = path.split('/');\r\n        while (idx < next.length) {\r\n            // @ts-ignore // TODO: foundry-pc-type defines Folder without parent property, but it does exist.\r\n            curr = game.folders.find((folder) => folder.parent === last && folder.name === next[idx]);\r\n            if (curr === null) {\r\n                if (!mkdirs) {\r\n                    return Promise.reject(`Unable to find folder: ${path}`);\r\n                }\r\n\r\n                curr = await ImportHelper.NewFolder(next[idx], last);\r\n            }\r\n            last = curr;\r\n            idx++;\r\n        }\r\n        return Promise.resolve(curr);\r\n    }\r\n\r\n    /**\r\n     * Get a value from the the provided jsonData, optionally returning a default value if it is not found\r\n     * or is unable to be parsed to an integer.\r\n     * @param jsonData The data to get the keyed value in.\r\n     * @param key The key to check for the value under.\r\n     * @param fallback An optional default value to return if the key is not found.\r\n     */\r\n    public static IntValue(jsonData: object, key: string, fallback: number | undefined = undefined): number {\r\n        return ImportHelper.s_Strategy.intValue(jsonData, key, fallback);\r\n    }\r\n\r\n    /**\r\n     * Get a value from the the provided jsonData, optionally returning a default value if it is not found.\r\n     * @param jsonData The data to get the keyed value in.\r\n     * @param key The key to check for the value under.\r\n     * @param fallback An optional default value to return if the key is not found.\r\n     */\r\n    public static StringValue(jsonData: object, key: string | number, fallback: string | undefined = undefined): string {\r\n        return ImportHelper.s_Strategy.stringValue(jsonData, key, fallback);\r\n    }\r\n\r\n    /**\r\n     * Get an object from the the provided jsonData, optionally returning a default value if it is not found.\r\n     * @param jsonData The data to get the keyed value in.\r\n     * @param key The key to check for the value under.\r\n     * @param fallback An optional default value to return if the key is not found.\r\n     */\r\n    public static ObjectValue(jsonData: object, key: string | number, fallback: object | null | undefined = undefined): object | null {\r\n        return ImportHelper.s_Strategy.objectValue(jsonData, key, fallback);\r\n    }\r\n\r\n    //TODO\r\n    public static findItem(nameOrCmp: string | ItemComparer): Entity {\r\n        let result: any | null;\r\n        if (typeof nameOrCmp === 'string') {\r\n            result = game.items.find((item) => item.name == nameOrCmp);\r\n        } else {\r\n            result = game.items.find(nameOrCmp);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    public static TranslateCategory(name, jsonCategoryTranslations?) {\r\n        if (jsonCategoryTranslations && jsonCategoryTranslations.hasOwnProperty(name)) {\r\n            return jsonCategoryTranslations[name];\r\n        }\r\n\r\n        return name;\r\n    }\r\n    //TODO\r\n    public static async MakeCategoryFolders(\r\n        jsonData: object,\r\n        path: string,\r\n        jsonCategoryTranslations?: object | undefined,\r\n    ): Promise<{ [name: string]: Folder }> {\r\n        let folders = {};\r\n        let jsonCategories = jsonData['categories']['category'];\r\n\r\n        for (let i = 0; i < jsonCategories.length; i++) {\r\n            let categoryName = jsonCategories[i][ImportHelper.CHAR_KEY];\r\n            // use untranslated category name for easier mapping during DataImporter.Parse implementations.\r\n            let origCategoryName = categoryName;\r\n            categoryName = ImportHelper.TranslateCategory(categoryName, jsonCategoryTranslations);\r\n            folders[origCategoryName.toLowerCase()] = await ImportHelper.GetFolderAtPath(`${Constants.ROOT_IMPORT_FOLDER_NAME}/${path}/${categoryName}`, true);\r\n        }\r\n\r\n        return folders;\r\n    }\r\n\r\n    /** Extract the correct <chummer file=\"${dataFileName}>[...]</chummer> element from xx-xx_data.xml translations.\r\n     *\r\n     * @param jsoni18n\r\n     * @param dataFileName Expected translation target file name\r\n     */\r\n    public static ExtractDataFileTranslation(jsoni18n, dataFileName): object {\r\n        for (let i = 0; i < jsoni18n.length; i++) {\r\n            const translation = jsoni18n[i];\r\n            if (translation.$.file === dataFileName) {\r\n                return translation;\r\n            }\r\n        }\r\n        return {};\r\n    }\r\n\r\n    /** Extract categories translations within xx-xx_data.xml <chummer/> translation subset.\r\n     *\r\n     *  Note: Not all file translations provide categories.\r\n     *\r\n     * @param jsonChummeri18n Translations as given by ExtractDataFileTranslations\r\n     */\r\n    public static ExtractCategoriesTranslation(jsonChummeri18n) {\r\n        const categoryTranslations = {};\r\n        if (jsonChummeri18n && jsonChummeri18n.hasOwnProperty('categories')) {\r\n            jsonChummeri18n.categories.category.forEach((category) => {\r\n                const name = category[ImportHelper.CHAR_KEY];\r\n                const translate = category.$.translate;\r\n                categoryTranslations[name] = translate;\r\n            });\r\n        }\r\n        return categoryTranslations;\r\n    }\r\n\r\n    /** Extract item type translations within xx-xx_data.xml <chummer/> translation subset.\r\n     *\r\n     * @param jsonItemsi18n Translations as given by ExtractDataFileTranslations\r\n     * @param typeKey The item type to translate. Tends to be plural.\r\n     * @param listKey The item to translate. Tends to be singular.\r\n     */\r\n    public static ExtractItemTranslation(jsonItemsi18n, typeKey, listKey) {\r\n        const itemTranslation = {};\r\n        if (jsonItemsi18n && jsonItemsi18n[typeKey] && jsonItemsi18n[typeKey][listKey] && jsonItemsi18n[typeKey][listKey].length > 0) {\r\n            jsonItemsi18n[typeKey][listKey].forEach((item) => {\r\n                const name = item.name[ImportHelper.CHAR_KEY];\r\n                const translate = item.translate[ImportHelper.CHAR_KEY];\r\n                const altpage = item.altpage[ImportHelper.CHAR_KEY];\r\n                itemTranslation[name] = { translate, altpage };\r\n            });\r\n        }\r\n\r\n        return itemTranslation;\r\n    }\r\n\r\n    static MapNameToTranslationKey(translationMap, name, key, fallbackValue = ''): string {\r\n        if (translationMap && translationMap.hasOwnProperty(name) && translationMap[name].hasOwnProperty(key)) {\r\n            return translationMap[name][key];\r\n        }\r\n\r\n        return fallbackValue;\r\n    }\r\n\r\n    public static MapNameToTranslation(translationMap, name): string {\r\n        return ImportHelper.MapNameToTranslationKey(translationMap, name, 'translate', name);\r\n    }\r\n\r\n    public static MapNameToPageSource(translationMap, name, fallback='?'): string {\r\n        return ImportHelper.MapNameToTranslationKey(translationMap, name, 'altpage', fallback);\r\n    }\r\n}\r\nexport type ItemComparer = (item: Item) => boolean;\r\n","export abstract class ImportStrategy {\r\n    public abstract intValue(jsonData: object, key: string, fallback: number | undefined): number;\r\n    public abstract stringValue(jsonData: object, key: string | number, fallback: string | undefined): string;\r\n    public abstract objectValue(jsonData: object, key: string | number, fallback: object | null | undefined): object | null;\r\n}\r\nexport type ItemComparer = (item: Item) => boolean;\r\n","import { ImportStrategy } from './ImportStrategy';\r\n\r\nexport class JSONStrategy extends ImportStrategy {\r\n    public intValue(jsonData: object, key: string, fallback: number | undefined = undefined): number {\r\n        throw new Error('Unimplemented');\r\n    }\r\n\r\n    public stringValue(jsonData: object, key: string | number, fallback: string | undefined = undefined): string {\r\n        throw new Error('Unimplemented');\r\n    }\r\n\r\n    public objectValue(jsonData: object, key: string | number, fallback: object | null | undefined = undefined): object | null {\r\n        throw new Error('Unimplemented');\r\n    }\r\n}\r\n","import { ImportHelper } from './ImportHelper';\r\nimport { ImportStrategy } from './ImportStrategy';\r\n\r\nexport class XMLStrategy extends ImportStrategy {\r\n    public intValue(jsonData: object, key: string, fallback: number | undefined = undefined): number {\r\n        try {\r\n            return parseInt(jsonData[key][ImportHelper.CHAR_KEY]);\r\n        } catch (e) {\r\n            if (fallback !== undefined) {\r\n                return fallback;\r\n            } else {\r\n                throw e;\r\n            }\r\n        }\r\n    }\r\n\r\n    public stringValue(jsonData: object, key: string | number, fallback: string | undefined = undefined): string {\r\n        try {\r\n            return jsonData[key][ImportHelper.CHAR_KEY];\r\n        } catch (e) {\r\n            if (fallback !== undefined) {\r\n                return fallback;\r\n            } else {\r\n                throw e;\r\n            }\r\n        }\r\n    }\r\n\r\n    public objectValue(jsonData: object, key: string | number, fallback: object | null | undefined = undefined): object | null {\r\n        try {\r\n            return jsonData[key];\r\n        } catch (e) {\r\n            if (fallback !== undefined) {\r\n                return fallback;\r\n            } else {\r\n                throw e;\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { DataImporter } from './DataImporter';\r\nimport { ImportHelper } from '../helper/ImportHelper';\r\nimport { Constants } from './Constants';\r\nimport Ammo = Shadowrun.Ammo;\r\nimport WeaponData = Shadowrun.WeaponData;\r\n\r\nexport class AmmoImporter extends DataImporter {\r\n    public files = ['gear.xml'];\r\n\r\n    CanParse(jsonObject: object): boolean {\r\n        return jsonObject.hasOwnProperty('gears') && jsonObject['gears'].hasOwnProperty('gear');\r\n    }\r\n\r\n    GetDefaultData(): Ammo {\r\n        return {\r\n            name: '',\r\n            _id: '',\r\n            folder: '',\r\n            img: 'icons/svg/mystery-man.svg',\r\n            flags: {},\r\n            type: 'ammo',\r\n            data: {\r\n                description: {\r\n                    value: '',\r\n                    chat: '',\r\n                    source: '',\r\n                },\r\n                technology: {\r\n                    rating: 1,\r\n                    availability: '',\r\n                    quantity: 1,\r\n                    cost: 0,\r\n                    equipped: true,\r\n                    conceal: {\r\n                        base: 0,\r\n                        value: 0,\r\n                        mod: [],\r\n                    },\r\n                    condition_monitor: {\r\n                        label: '',\r\n                        value: 0,\r\n                        max: 0,\r\n                    },\r\n                    wireless: true\r\n                },\r\n\r\n                element: '',\r\n                ap: 0,\r\n                damage: 0,\r\n                damageType: 'physical',\r\n                blast: {\r\n                    radius: 0,\r\n                    dropoff: 0,\r\n                },\r\n            },\r\n            permission: {\r\n                default: 2,\r\n            },\r\n        };\r\n    }\r\n\r\n    ExtractTranslation() {\r\n        if (!DataImporter.jsoni18n) {\r\n            return;\r\n        }\r\n\r\n        let jsonGeari18n = ImportHelper.ExtractDataFileTranslation(DataImporter.jsoni18n, this.files[0]);\r\n        this.categoryTranslations = ImportHelper.ExtractCategoriesTranslation(jsonGeari18n);\r\n        this.entryTranslations = ImportHelper.ExtractItemTranslation(jsonGeari18n, 'gears', 'gear');\r\n    }\r\n\r\n    async Parse(jsonObject: object): Promise<Entity> {\r\n        let ammoDatas: Ammo[] = [];\r\n        let jsonAmmos = jsonObject['gears']['gear'];\r\n        for (let i = 0; i < jsonAmmos.length; i++) {\r\n            let jsonData = jsonAmmos[i];\r\n            if (DataImporter.unsupportedEntry(jsonData)) {\r\n                continue;\r\n            }\r\n\r\n            if (ImportHelper.StringValue(jsonData, 'category', '') !== 'Ammunition') {\r\n                continue;\r\n            }\r\n\r\n            let data = this.GetDefaultData();\r\n            data.name = ImportHelper.StringValue(jsonData, 'name');\r\n            data.name = ImportHelper.MapNameToTranslation(this.entryTranslations, data.name);\r\n\r\n            data.data.description.source = `${ImportHelper.StringValue(jsonData, 'source')} ${ImportHelper.StringValue(jsonData, 'page')}`;\r\n            data.data.technology.rating = 2;\r\n            data.data.technology.availability = ImportHelper.StringValue(jsonData, 'avail');\r\n            data.data.technology.cost = ImportHelper.IntValue(jsonData, 'cost', 0);\r\n\r\n            let bonusData = ImportHelper.ObjectValue(jsonData, 'weaponbonus', null);\r\n            if (bonusData !== undefined && bonusData !== null) {\r\n                data.data.ap = ImportHelper.IntValue(bonusData, 'ap', 0);\r\n                data.data.damage = ImportHelper.IntValue(bonusData, 'damage', 0);\r\n\r\n                let damageType = ImportHelper.StringValue(bonusData, 'damagetype', '');\r\n                if (damageType.length > 0) {\r\n                    if (damageType.includes('P')) {\r\n                        data.data.damageType = 'physical';\r\n                    } else if (damageType.includes('S')) {\r\n                        data.data.damageType = 'stun';\r\n                    } else if (damageType.includes('M')) {\r\n                        data.data.damageType = 'matrix';\r\n                    }\r\n                }\r\n            }\r\n\r\n            let shouldLookForWeapons = false;\r\n            let nameLower = data.name.toLowerCase();\r\n            ['grenade', 'rocket', 'missile'].forEach((compare) => {\r\n                shouldLookForWeapons = shouldLookForWeapons || nameLower.includes(compare);\r\n            });\r\n            // NOTE: Should either weapons or gear not have been imported with translation, this will fail.\r\n            if (shouldLookForWeapons) {\r\n                let foundWeapon = ImportHelper.findItem((item) => {\r\n                    // Filter for weapon type due to possible double naming giving other item types.\r\n                    return item.type === 'weapon' && item.name.toLowerCase() === nameLower;\r\n                });\r\n\r\n                if (foundWeapon !== null && \"action\" in foundWeapon.data.data) {\r\n                    console.log(foundWeapon);\r\n\r\n                    const weaponData = foundWeapon.data.data as WeaponData;\r\n                    data.data.damage = weaponData.action.damage.value;\r\n                    data.data.ap =weaponData.action.damage.ap.value;\r\n                }\r\n            }\r\n\r\n            // ammo doesn't have conceal rating from looking at the data\r\n            // data.data.technology.conceal.base = ImportHelper.intValue(jsonData, \"conceal\");\r\n            data.data.technology.conceal.base = 0;\r\n\r\n            ammoDatas.push(data);\r\n        }\r\n\r\n        for (let i = 0; i < ammoDatas.length; i++) {\r\n            let folderName = 'Misc';\r\n            let ammo = ammoDatas[i];\r\n\r\n            let splitName = ammo.name.split(':');\r\n            if (splitName.length > 1) {\r\n                folderName = splitName[0].trim();\r\n            }\r\n\r\n            let folder = await ImportHelper.GetFolderAtPath(`${Constants.ROOT_IMPORT_FOLDER_NAME}/Ammo/${folderName}`, true);\r\n\r\n            ammo.folder = folder.id;\r\n        }\r\n\r\n        return await Item.create(ammoDatas);\r\n    }\r\n}\r\n","import { DataImporter } from './DataImporter';\r\nimport { ImportHelper } from '../helper/ImportHelper';\r\nimport Armor = Shadowrun.Armor;\r\nimport { ArmorParserBase } from '../parser/armor/ArmorParserBase';\r\n\r\nexport class ArmorImporter extends DataImporter {\r\n    public armorTranslations: any;\r\n    public categoryTranslations: any;\r\n    public files = ['armor.xml'];\r\n\r\n    CanParse(jsonObject: object): boolean {\r\n        return jsonObject.hasOwnProperty('armors') && jsonObject['armors'].hasOwnProperty('armor');\r\n    }\r\n\r\n    GetDefaultData(): Armor {\r\n        return {\r\n            name: 'Unnamed Armor',\r\n            _id: '',\r\n            folder: '',\r\n            img: 'icons/svg/mystery-man.svg',\r\n            flags: {},\r\n            type: 'armor',\r\n            data: {\r\n                description: {\r\n                    value: '',\r\n                    chat: '',\r\n                    source: '',\r\n                },\r\n                technology: {\r\n                    rating: 1,\r\n                    availability: '',\r\n                    quantity: 1,\r\n                    cost: 0,\r\n                    equipped: true,\r\n                    conceal: {\r\n                        base: 0,\r\n                        value: 0,\r\n                        mod: [],\r\n                    },\r\n                    condition_monitor: {\r\n                        label: '',\r\n                        value: 0,\r\n                        max: 0,\r\n                    },\r\n                    wireless: true\r\n                },\r\n                armor: {\r\n                    value: 0,\r\n                    mod: false,\r\n                    acid: 0,\r\n                    cold: 0,\r\n                    fire: 0,\r\n                    electricity: 0,\r\n                    radiation: 0,\r\n                },\r\n            },\r\n            permission: {\r\n                default: 2,\r\n            },\r\n        };\r\n    }\r\n\r\n    ExtractTranslation() {\r\n        if (!DataImporter.jsoni18n) {\r\n            return;\r\n        }\r\n\r\n        let jsonArmori18n = ImportHelper.ExtractDataFileTranslation(DataImporter.jsoni18n, this.files[0]);\r\n        this.categoryTranslations = ImportHelper.ExtractCategoriesTranslation(jsonArmori18n);\r\n        this.armorTranslations = ImportHelper.ExtractItemTranslation(jsonArmori18n, 'armors', 'armor');\r\n    }\r\n\r\n    async Parse(jsonObject: object): Promise<Entity> {\r\n        const folders = await ImportHelper.MakeCategoryFolders(jsonObject, 'Armor', this.categoryTranslations);\r\n\r\n        const parser = new ArmorParserBase();\r\n\r\n        let datas: Armor[] = [];\r\n        let jsonDatas = jsonObject['armors']['armor'];\r\n        for (let i = 0; i < jsonDatas.length; i++) {\r\n            let jsonData = jsonDatas[i];\r\n            if (DataImporter.unsupportedEntry(jsonData)) {\r\n                continue;\r\n            }\r\n\r\n            let data = parser.Parse(jsonData, this.GetDefaultData());\r\n            const category = ImportHelper.StringValue(jsonData, 'category').toLowerCase();\r\n            data.name = ImportHelper.MapNameToTranslation(this.armorTranslations, data.name);\r\n            data.folder = folders[category].id;\r\n\r\n            datas.push(data);\r\n        }\r\n\r\n        return await Item.create(datas);\r\n    }\r\n}\r\n","import { DataImporter } from './DataImporter';\r\nimport { ImportHelper } from '../helper/ImportHelper';\r\nimport { Constants } from './Constants';\r\nimport { ComplexFormParserBase } from '../parser/complex-form/ComplexFormParserBase';\r\nimport ComplexForm = Shadowrun.ComplexForm;\r\nimport {DefaultValues} from \"../../dataTemplates\";\r\n\r\nexport class ComplexFormImporter extends DataImporter {\r\n    public categoryTranslations: any;\r\n    public nameTranslations: any;\r\n    public files = ['complexforms.xml'];\r\n\r\n    CanParse(jsonObject: object): boolean {\r\n        return jsonObject.hasOwnProperty('complexforms') && jsonObject['complexforms'].hasOwnProperty('complexform');\r\n    }\r\n\r\n    GetDefaultData(): ComplexForm {\r\n        return {\r\n            name: 'Unnamed Form',\r\n            _id: '',\r\n            folder: '',\r\n            img: 'icons/svg/mystery-man.svg',\r\n            flags: {},\r\n            type: 'complex_form',\r\n            data: {\r\n                description: {\r\n                    value: '',\r\n                    chat: '',\r\n                    source: '',\r\n                },\r\n                action: {\r\n                    type: 'complex',\r\n                    category: '',\r\n                    attribute: 'resonance',\r\n                    attribute2: '',\r\n                    skill: 'compiling',\r\n                    spec: false,\r\n                    mod: 0,\r\n                    mod_description: '',\r\n                    damage: DefaultValues.damageData(),\r\n                    limit: {\r\n                        value: 0,\r\n                        attribute: '',\r\n                        mod: [],\r\n                        base: 0,\r\n                    },\r\n                    extended: false,\r\n                    opposed: {\r\n                        type: 'defense',\r\n                        attribute: '',\r\n                        attribute2: '',\r\n                        skill: '',\r\n                        mod: 0,\r\n                        description: '',\r\n                    },\r\n                    alt_mod: 0,\r\n                    dice_pool_mod: [],\r\n                },\r\n                target: '',\r\n                duration: '',\r\n                fade: 0,\r\n            },\r\n            permission: {\r\n                default: 2,\r\n            },\r\n        };\r\n    }\r\n\r\n    ExtractTranslation() {\r\n        if (!DataImporter.jsoni18n) {\r\n            return;\r\n        }\r\n\r\n        // Complexforms don't provide a category translation.\r\n        let jsonItemi18n = ImportHelper.ExtractDataFileTranslation(DataImporter.jsoni18n, this.files[0]);\r\n        this.nameTranslations = ImportHelper.ExtractItemTranslation(jsonItemi18n, 'complexforms', 'complexform');\r\n    }\r\n\r\n    async Parse(jsonObject: object): Promise<Entity> {\r\n        const parser = new ComplexFormParserBase();\r\n        const folder = await ImportHelper.GetFolderAtPath(`${Constants.ROOT_IMPORT_FOLDER_NAME}/Complex Forms`, true);\r\n\r\n        let datas: ComplexForm[] = [];\r\n        let jsonDatas = jsonObject['complexforms']['complexform'];\r\n        for (let i = 0; i < jsonDatas.length; i++) {\r\n            let jsonData = jsonDatas[i];\r\n            if (DataImporter.unsupportedEntry(jsonData)) {\r\n                continue;\r\n            }\r\n\r\n            let data = parser.Parse(jsonData, this.GetDefaultData(), this.nameTranslations);\r\n            data.folder = folder.id;\r\n\r\n            // TODO: Follow ComplexFormParserBase approach.\r\n            data.name = ImportHelper.MapNameToTranslation(this.nameTranslations, data.name);\r\n\r\n            datas.push(data);\r\n        }\r\n\r\n        return await Item.create(datas);\r\n    }\r\n}\r\n","export class Constants {\r\n    public static readonly MAP_CATEGORY_TO_SKILL = {\r\n        'Assault Cannons': 'heavy_weapons',\r\n        'Assault Rifles': 'automatics',\r\n        'Blades': 'blades',\r\n        'Bows': 'archery',\r\n        'Carbines': 'automatics',\r\n        'Clubs': 'clubs',\r\n        'Crossbows': 'archery',\r\n        'Exotic Melee Weapons': 'exotic_melee',\r\n        'Exotic Ranged Weapons': 'exotic_ranged',\r\n        'Flamethrowers': 'exotic_ranged',\r\n        'Grenade Launchers': 'heavy_weapons',\r\n        'Heavy Machine Guns': 'heavy_weapons',\r\n        'Heavy Pistols': 'pistols',\r\n        'Holdouts': 'pistols',\r\n        'Laser Weapons': 'exotic_ranged',\r\n        'Light Machine Guns': 'heavy_weapons',\r\n        'Light Pistols': 'pistols',\r\n        'Machine Pistols': 'automatics',\r\n        'Medium Machine Guns': 'automatics',\r\n        'Missile Launchers': 'heavy_weapons',\r\n        'Shotguns': 'longarms',\r\n        'Sniper Rifles': 'longarms',\r\n        'Sporting Rifles': 'longarms',\r\n        'Submachine Guns': 'automatics',\r\n        'Tasers': 'pistols',\r\n        'Unarmed': 'unarmed_combat',\r\n    };\r\n    public static readonly WEAPON_RANGES = {\r\n        'Tasers': {\r\n            short: 5,\r\n            medium: 10,\r\n            long: 15,\r\n            extreme: 20,\r\n        },\r\n        'Holdouts': {\r\n            short: 5,\r\n            medium: 15,\r\n            long: 30,\r\n            extreme: 50,\r\n        },\r\n        'Light Pistols': {\r\n            short: 5,\r\n            medium: 15,\r\n            long: 30,\r\n            extreme: 50,\r\n        },\r\n        'Heavy Pistols': {\r\n            short: 5,\r\n            medium: 20,\r\n            long: 40,\r\n            extreme: 60,\r\n        },\r\n        'Machine Pistols': {\r\n            short: 5,\r\n            medium: 15,\r\n            long: 30,\r\n            extreme: 50,\r\n        },\r\n        'Submachine Guns': {\r\n            short: 10,\r\n            medium: 40,\r\n            long: 80,\r\n            extreme: 150,\r\n        },\r\n        'Assault Rifles': {\r\n            short: 25,\r\n            medium: 150,\r\n            long: 350,\r\n            extreme: 550,\r\n        },\r\n        'Shotguns': {\r\n            short: 10,\r\n            medium: 40,\r\n            long: 80,\r\n            extreme: 150,\r\n        },\r\n        'Shotguns (slug)': {\r\n            short: 10,\r\n            medium: 40,\r\n            long: 80,\r\n            extreme: 150,\r\n        },\r\n        'Shotguns (flechette)': {\r\n            short: 15,\r\n            medium: 30,\r\n            long: 45,\r\n            extreme: 60,\r\n        },\r\n        'Sniper Rifles': {\r\n            short: 50,\r\n            medium: 350,\r\n            long: 800,\r\n            extreme: 1500,\r\n        },\r\n        'Sporting Rifles': {\r\n            short: 50,\r\n            medium: 250,\r\n            long: 500,\r\n            extreme: 750,\r\n        },\r\n        'Light Machine Guns': {\r\n            short: 25,\r\n            medium: 200,\r\n            long: 400,\r\n            extreme: 800,\r\n        },\r\n        'Medium/Heavy Machinegun': {\r\n            short: 40,\r\n            medium: 250,\r\n            long: 750,\r\n            extreme: 1200,\r\n        },\r\n        'Assault Cannons': {\r\n            short: 50,\r\n            medium: 300,\r\n            long: 750,\r\n            extreme: 1500,\r\n        },\r\n        'Grenade Launchers': {\r\n            min: 5,\r\n            short: 50,\r\n            medium: 100,\r\n            long: 150,\r\n            extreme: 500,\r\n        },\r\n        'Missile Launchers': {\r\n            min: 20,\r\n            short: 70,\r\n            medium: 150,\r\n            long: 450,\r\n            extreme: 1500,\r\n        },\r\n        'Bows': {\r\n            short: 1,\r\n            medium: 10,\r\n            long: 30,\r\n            extreme: 60,\r\n            attribute: 'strength',\r\n        },\r\n        'Light Crossbows': {\r\n            short: 6,\r\n            medium: 24,\r\n            long: 60,\r\n            extreme: 120,\r\n        },\r\n        'Medium Crossbows': {\r\n            short: 9,\r\n            medium: 36,\r\n            long: 90,\r\n            extreme: 150,\r\n        },\r\n        'Heavy Crossbows': {\r\n            short: 15,\r\n            medium: 45,\r\n            long: 120,\r\n            extreme: 180,\r\n        },\r\n        'Thrown Knife': {\r\n            short: 1,\r\n            medium: 2,\r\n            long: 3,\r\n            extreme: 5,\r\n            attribute: 'strength',\r\n        },\r\n        'Net': {\r\n            short: 0.5,\r\n            medium: 1,\r\n            long: 1.5,\r\n            extreme: 2.5,\r\n            attribute: 'strength',\r\n        },\r\n        'Shuriken': {\r\n            short: 1,\r\n            medium: 2,\r\n            long: 5,\r\n            extreme: 7,\r\n            attribute: 'strength',\r\n        },\r\n        'Standard Grenade': {\r\n            short: 2,\r\n            medium: 4,\r\n            long: 6,\r\n            extreme: 10,\r\n            attribute: 'strength',\r\n        },\r\n        'Aerodynamic Grenade': {\r\n            min: 0,\r\n            short: 2,\r\n            medium: 4,\r\n            long: 8,\r\n            extreme: 15,\r\n            attribute: 'strength',\r\n        },\r\n        'Harpoon Gun': {\r\n            short: 5,\r\n            medium: 20,\r\n            long: 40,\r\n            extreme: 60,\r\n        },\r\n        'Harpoon Gun (Underwater)': {\r\n            short: 6,\r\n            medium: 24,\r\n            long: 60,\r\n            extreme: 120,\r\n        },\r\n        'Flamethrowers': {\r\n            short: 15,\r\n            medium: 20,\r\n            long: -1,\r\n            extreme: -1,\r\n        },\r\n    };\r\n\r\n    public static readonly ROOT_IMPORT_FOLDER_NAME = 'SR5e';\r\n}\r\n","import { DataImporter } from './DataImporter';\r\nimport { ImportHelper } from '../helper/ImportHelper';\r\nimport CritterPower = Shadowrun.CritterPower;\r\nimport { CritterPowerParserBase } from '../parser/critter-power/CritterPowerParserBase';\r\nimport { Constants } from './Constants';\r\nimport {DefaultValues} from \"../../dataTemplates\";\r\n\r\nexport class CritterPowerImporter extends DataImporter {\r\n    public categoryTranslations: any;\r\n    public itemTranslations: any;\r\n    public files = ['critterpowers.xml'];\r\n\r\n    CanParse(jsonObject: object): boolean {\r\n        return jsonObject.hasOwnProperty('powers') && jsonObject['powers'].hasOwnProperty('power');\r\n    }\r\n\r\n    GetDefaultData(): CritterPower {\r\n        return {\r\n            name: 'Unnamed Item',\r\n            _id: '',\r\n            folder: '',\r\n            img: 'icons/svg/mystery-man.svg',\r\n            flags: {},\r\n            type: 'critter_power',\r\n            data: {\r\n                description: {\r\n                    value: '',\r\n                    chat: '',\r\n                    source: '',\r\n                },\r\n                action: {\r\n                    type: '',\r\n                    category: '',\r\n                    attribute: '',\r\n                    attribute2: '',\r\n                    skill: '',\r\n                    spec: false,\r\n                    mod: 0,\r\n                    mod_description: '',\r\n                    damage: DefaultValues.damageData({type: {base: '', value: ''}}),\r\n                    limit: {\r\n                        value: 0,\r\n                        attribute: '',\r\n                        mod: [],\r\n                        base: 0,\r\n                    },\r\n                    extended: false,\r\n                    opposed: {\r\n                        type: '',\r\n                        attribute: '',\r\n                        attribute2: '',\r\n                        skill: '',\r\n                        mod: 0,\r\n                        description: '',\r\n                    },\r\n                    alt_mod: 0,\r\n                    dice_pool_mod: [],\r\n                },\r\n                armor: {\r\n                    value: 0,\r\n                    mod: false,\r\n                    acid: 0,\r\n                    cold: 0,\r\n                    fire: 0,\r\n                    electricity: 0,\r\n                    radiation: 0,\r\n                },\r\n                category: '',\r\n                powerType: '',\r\n                range: '',\r\n                duration: '',\r\n                karma: 0,\r\n            },\r\n            permission: {\r\n                default: 2,\r\n            },\r\n        };\r\n    }\r\n\r\n    ExtractTranslation() {\r\n        if (!DataImporter.jsoni18n) {\r\n            return;\r\n        }\r\n\r\n        let jsonCritterPoweri18n = ImportHelper.ExtractDataFileTranslation(DataImporter.jsoni18n, this.files[0]);\r\n        this.categoryTranslations = ImportHelper.ExtractCategoriesTranslation(jsonCritterPoweri18n);\r\n        this.itemTranslations = ImportHelper.ExtractItemTranslation(jsonCritterPoweri18n, 'powers', 'power');\r\n    }\r\n\r\n    async Parse(jsonObject: object): Promise<Entity> {\r\n      const parser = new CritterPowerParserBase();\r\n      const folder = await ImportHelper.GetFolderAtPath(`${Constants.ROOT_IMPORT_FOLDER_NAME}/Critter Powers`, true);\r\n\r\n      let datas: CritterPower[] = [];\r\n      let jsonDatas = jsonObject['powers']['power'];\r\n      for (let i = 0; i < jsonDatas.length; i++) {\r\n          let jsonData = jsonDatas[i];\r\n\r\n          let data = parser.Parse(jsonData, this.GetDefaultData(), this.itemTranslations);\r\n          data.folder = folder.id;\r\n          data.name = ImportHelper.MapNameToTranslation(this.itemTranslations, data.name);\r\n\r\n          datas.push(data);\r\n      }\r\n\r\n      return await Item.create(datas);\r\n    }\r\n}\r\n","import { ImportHelper } from '../helper/ImportHelper';\r\n\r\nconst xml2js = require('xml2js');\r\n\r\nexport abstract class DataImporter {\r\n    public abstract files: string[];\r\n    public static jsoni18n: any;\r\n    public categoryTranslations: any;\r\n    public entryTranslations: any;\r\n    public static unsupportedBooks: string[] = ['2050'];\r\n\r\n    /**\r\n     * Get default data for constructing a TItem.\r\n     */\r\n    public abstract GetDefaultData(): any;\r\n\r\n    /**\r\n     *\r\n     * @param jsonObject JSON Data with all data translations for one language.\r\n     */\r\n    public static CanParseI18n(jsonObject: any): boolean {\r\n        return jsonObject.hasOwnProperty('chummer') && jsonObject.chummer.length > 0 && jsonObject.chummer[0].$.hasOwnProperty('file');\r\n    }\r\n\r\n    /**\r\n     * Stores translations as a whole for all implementing classes to extract from without reparsing.\r\n     * @param jsonObject JSON Data with all data translations for one language.\r\n     */\r\n    public static ParseTranslation(jsonObject: object) {\r\n        if (jsonObject && jsonObject.hasOwnProperty('chummer')) {\r\n            DataImporter.jsoni18n = jsonObject['chummer'];\r\n        }\r\n    }\r\n    /**\r\n     * Implementing classes can use ExtractTranslation to only extract needed translations.\r\n     */\r\n    public abstract ExtractTranslation(fileName?: string);\r\n\r\n    /**\r\n     * Validate if this importer is capable of parsing the provided JSON data.\r\n     * @param jsonObject JSON data to check import capability for.\r\n     * @returns boolean True if the importer is capable of parsing the provided XML data.\r\n     */\r\n    public abstract CanParse(jsonObject: object): boolean;\r\n\r\n    /**\r\n     * Parse the specified jsonObject and return Item representations.\r\n     * @param jsonObject The JSON data to parse.\r\n     * @returns An array of created objects.\r\n     */\r\n    public abstract Parse(jsonObject: object): Promise<Entity>;\r\n\r\n    /**\r\n     * Parse an XML string into a JSON object.\r\n     * @param xmlString The string to parse as XML.\r\n     * @returns A json object converted from the string.\r\n     */\r\n    public static async xml2json(xmlString: string): Promise<object> {\r\n        const parser = xml2js.Parser({\r\n            explicitArray: false,\r\n            explicitCharkey: true,\r\n            charkey: ImportHelper.CHAR_KEY,\r\n        });\r\n\r\n        return (await parser.parseStringPromise(xmlString))['chummer'];\r\n    }\r\n\r\n    public static unsupportedBookSource(jsonObject) {\r\n        if (!jsonObject.hasOwnProperty('source')) return false;\r\n        const source = ImportHelper.StringValue(jsonObject, 'source', '');\r\n        return DataImporter.unsupportedBooks.includes(source);\r\n    }\r\n\r\n    public static unsupportedEntry(jsonObject) {\r\n        if (DataImporter.unsupportedBookSource(jsonObject)) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n","import {DataImporter} from \"./DataImporter\";\r\nimport {ImportHelper} from \"../helper/ImportHelper\";\r\nimport {Constants} from \"./Constants\";\r\n\r\nexport class DeviceImporter extends DataImporter {\r\n    public files = ['gear.xml'];\r\n\r\n    CanParse(jsonObject: object): boolean {\r\n        return jsonObject.hasOwnProperty('gears') && jsonObject['gears'].hasOwnProperty('gear');\r\n    }\r\n\r\n    GetDefaultData() {\r\n        return {\r\n            name: '',\r\n            _id: '',\r\n            folder: '',\r\n            img: 'icons/svg/mystery-man.svg',\r\n            flags: {},\r\n            type: 'device',\r\n            data: {\r\n                description: {\r\n                    value: '',\r\n                    chat: '',\r\n                    source: '',\r\n                },\r\n                technology: {\r\n                    rating: 1,\r\n                    availability: '',\r\n                    quantity: 1,\r\n                    cost: 0,\r\n                    equipped: true,\r\n                    conceal: {\r\n                        base: 0,\r\n                        value: 0,\r\n                        mod: [],\r\n                    },\r\n                    condition_monitor: {\r\n                        label: '',\r\n                        value: 0,\r\n                        max: 0,\r\n                    },\r\n                },\r\n                category: 'commlink',\r\n                \"atts\": {\r\n                    \"att1\": {\r\n                        \"value\": 0,\r\n                        \"att\": \"attack\"\r\n                    },\r\n                    \"att2\": {\r\n                        \"value\": 0,\r\n                        \"att\": \"sleaze\"\r\n                    },\r\n                    \"att3\": {\r\n                        \"value\": 0,\r\n                        \"att\": \"data_processing\"\r\n                    },\r\n                    \"att4\": {\r\n                        \"value\": 0,\r\n                        \"att\": \"firewall\"\r\n                    }\r\n                },\r\n            },\r\n            permission: {\r\n                default: 2,\r\n            },\r\n        };\r\n    }\r\n\r\n    ExtractTranslation(fileName?: string) {\r\n        if (!DataImporter.jsoni18n) {\r\n            return;\r\n        }\r\n\r\n        let jsonGeari18n = ImportHelper.ExtractDataFileTranslation(DataImporter.jsoni18n, this.files[0]);\r\n        this.categoryTranslations = ImportHelper.ExtractCategoriesTranslation(jsonGeari18n);\r\n        this.entryTranslations = ImportHelper.ExtractItemTranslation(jsonGeari18n, 'gears', 'gear');\r\n    }\r\n\r\n    ParseCommlinkDevices(commlinks, folder) {\r\n        const entries = [];\r\n\r\n        for (const commlink of commlinks) {\r\n            if (DataImporter.unsupportedEntry(commlink)) {\r\n                continue;\r\n            }\r\n            const data = this.GetDefaultData();\r\n\r\n            data.name = ImportHelper.StringValue(commlink, 'name');\r\n            data.name = ImportHelper.MapNameToTranslation(this.entryTranslations, data.name);\r\n\r\n            data.data.description.source = `${ImportHelper.StringValue(commlink, 'source')} ${ImportHelper.MapNameToPageSource(this.entryTranslations, ImportHelper.StringValue(commlink, 'name'), ImportHelper.StringValue(commlink, 'page'))}`;\r\n            data.data.technology.rating = ImportHelper.IntValue(commlink, 'devicerating', 0);\r\n            data.data.technology.availability = ImportHelper.StringValue(commlink, 'avail');\r\n            data.data.technology.cost = ImportHelper.IntValue(commlink, 'cost', 0);\r\n            data.data.atts.att3.value = ImportHelper.IntValue(commlink, 'dataprocessing', 0);\r\n            data.data.atts.att4.value = ImportHelper.IntValue(commlink, 'firewall', 0);\r\n\r\n            //@ts-ignore\r\n            data.folder = folder.id;\r\n            //@ts-ignore\r\n            entries.push(data);\r\n        }\r\n\r\n        return entries;\r\n    }\r\n\r\n    ParseCyberdeckDevices(cyberdecks, folder) {\r\n        const entries = [];\r\n\r\n        for (const cyberdeck of cyberdecks) {\r\n            if (DataImporter.unsupportedEntry(cyberdeck)) {\r\n                continue;\r\n            }\r\n\r\n            const data = this.GetDefaultData();\r\n\r\n            data.data.category = 'cyberdeck';\r\n            data.name = ImportHelper.StringValue(cyberdeck, 'name');\r\n            data.name = ImportHelper.MapNameToTranslation(this.entryTranslations, data.name);\r\n\r\n            data.data.description.source = `${ImportHelper.StringValue(cyberdeck, 'source')} ${ImportHelper.MapNameToPageSource(this.entryTranslations, ImportHelper.StringValue(cyberdeck, 'name'), ImportHelper.StringValue(cyberdeck, 'page'))}`;\r\n            data.data.technology.rating = ImportHelper.IntValue(cyberdeck, 'devicerating', 0);\r\n            data.data.technology.availability = ImportHelper.StringValue(cyberdeck, 'avail');\r\n            data.data.technology.cost = ImportHelper.IntValue(cyberdeck, 'cost', 0);\r\n\r\n            // Some cyberdecks have a flexible attribute order\r\n            // attributearray is a ',' separated list of values. Since it's hacky, be very unforgiving.\r\n            if (cyberdeck.hasOwnProperty('attributearray')) {\r\n                const attributeOrder = ImportHelper.StringValue(cyberdeck, 'attributearray').split(',');\r\n                const att1 = Number(attributeOrder[0]);\r\n                const att2 = Number(attributeOrder[1]);\r\n                const att3 = Number(attributeOrder[2]);\r\n                const att4 = Number(attributeOrder[3]);\r\n                data.data.atts.att1.value = att1;\r\n                data.data.atts.att2.value = att2;\r\n                data.data.atts.att3.value = att3;\r\n                data.data.atts.att4.value = att4;\r\n\r\n            // Some cyberdecks have a fixed attribute order\r\n            } else if (cyberdeck.hasOwnProperty('attack')) {\r\n                data.data.atts.att1.value = ImportHelper.IntValue(cyberdeck, 'attack', 0);\r\n                data.data.atts.att2.value = ImportHelper.IntValue(cyberdeck, 'sleaze', 0);\r\n                data.data.atts.att3.value = ImportHelper.IntValue(cyberdeck, 'dataprocessing', 0);\r\n                data.data.atts.att4.value = ImportHelper.IntValue(cyberdeck, 'firewall', 0);\r\n            }\r\n\r\n            //@ts-ignore\r\n            data.folder = folder.id;\r\n            //@ts-ignore\r\n            entries.push(data);\r\n        }\r\n\r\n        return entries;\r\n    }\r\n\r\n    async Parse(jsonObject: object): Promise<Entity> {\r\n        let entries = [];\r\n        const commlinks = jsonObject['gears']['gear'].filter(gear => ImportHelper.StringValue(gear, 'category', '') === 'Commlinks');\r\n        const cyberdecks = jsonObject['gears']['gear'].filter(gear => ImportHelper.StringValue(gear, 'category', '') === 'Cyberdecks');\r\n\r\n        let commlinksFolder = await ImportHelper.GetFolderAtPath(`${Constants.ROOT_IMPORT_FOLDER_NAME}/${game.i18n.localize('SR5.DeviceCatCommlink')}`, true);\r\n        let cyberdecksFolder = await ImportHelper.GetFolderAtPath(`${Constants.ROOT_IMPORT_FOLDER_NAME}/${game.i18n.localize('SR5.DeviceCatCyberdeck')}`, true);\r\n\r\n        entries = entries.concat(this.ParseCommlinkDevices(commlinks, commlinksFolder));\r\n        entries = entries.concat(this.ParseCyberdeckDevices(cyberdecks, cyberdecksFolder));\r\n\r\n        return await Item.create(entries)\r\n    }\r\n\r\n    /* List of unsupported Commlinks, due to dynamics value calculations.\r\n     */\r\n    static unsupportedEntry(jsonData): boolean {\r\n        if (DataImporter.unsupportedEntry(jsonData)) {\r\n            return true;\r\n        }\r\n\r\n        const unsupportedIds = [\r\n            'd63eb841-7b15-4539-9026-b90a4924aeeb',  // Dynamic rating value.\r\n        ];\r\n        return unsupportedIds.includes(ImportHelper.StringValue(jsonData, 'id'));\r\n    }\r\n}","import {DataImporter} from \"./DataImporter\";\r\nimport {ImportHelper} from \"../helper/ImportHelper\";\r\nimport {Constants} from \"./Constants\";\r\n\r\nexport class EquipmentImporter extends DataImporter {\r\n    public files = ['gear.xml'];\r\n\r\n    CanParse(jsonObject: object): boolean {\r\n        return jsonObject.hasOwnProperty('gears') && jsonObject['gears'].hasOwnProperty('gear');\r\n    }\r\n\r\n    GetDefaultData() {\r\n        return {\r\n            name: '',\r\n            _id: '',\r\n            folder: '',\r\n            img: 'icons/svg/mystery-man.svg',\r\n            flags: {},\r\n            type: 'equipment',\r\n            data: {\r\n                description: {\r\n                    value: '',\r\n                    chat: '',\r\n                    source: '',\r\n                },\r\n                technology: {\r\n                    rating: 1,\r\n                    availability: '',\r\n                    quantity: 1,\r\n                    cost: 0,\r\n                    equipped: true,\r\n                    conceal: {\r\n                        base: 0,\r\n                        value: 0,\r\n                        mod: [],\r\n                    },\r\n                    condition_monitor: {\r\n                        label: '',\r\n                        value: 0,\r\n                        max: 0,\r\n                    },\r\n                }\r\n            },\r\n            permission: {\r\n                default: 2,\r\n            },\r\n        };\r\n    }\r\n\r\n    ExtractTranslation(fileName?: string) {\r\n        if (!DataImporter.jsoni18n) {\r\n            return;\r\n        }\r\n\r\n        let jsonGeari18n = ImportHelper.ExtractDataFileTranslation(DataImporter.jsoni18n, this.files[0]);\r\n        this.categoryTranslations = ImportHelper.ExtractCategoriesTranslation(jsonGeari18n);\r\n        this.entryTranslations = ImportHelper.ExtractItemTranslation(jsonGeari18n, 'gears', 'gear');\r\n    }\r\n\r\n    async ParseEquipments(equipments) {\r\n        const entries = [];\r\n\r\n        for (const equipment of equipments) {\r\n            if (DataImporter.unsupportedEntry(equipment)) {\r\n                continue;\r\n            }\r\n\r\n            // Replace / as it's used as a separator in GetFolderAtPath.\r\n            const category = ImportHelper.TranslateCategory(ImportHelper.StringValue(equipment, 'category'), this.categoryTranslations).replace('/', ' ');\r\n            let categoryFolder = await ImportHelper.GetFolderAtPath(`${Constants.ROOT_IMPORT_FOLDER_NAME}/${game.i18n.localize('SR5.Gear')}/${category}`, true);\r\n\r\n            const data = this.GetDefaultData();\r\n            data.name = ImportHelper.StringValue(equipment, 'name');\r\n            data.name = ImportHelper.MapNameToTranslation(this.entryTranslations, data.name);\r\n\r\n            data.data.description.source = `${ImportHelper.StringValue(equipment, 'source')} ${ImportHelper.MapNameToPageSource(this.entryTranslations, ImportHelper.StringValue(equipment, 'name'), ImportHelper.StringValue(equipment, 'page'))}`;\r\n            data.data.technology.rating = ImportHelper.IntValue(equipment, 'rating', 0);\r\n            data.data.technology.availability = ImportHelper.StringValue(equipment, 'avail');\r\n            data.data.technology.cost = ImportHelper.IntValue(equipment, 'cost', 0);\r\n\r\n            //@ts-ignore\r\n            data.folder = categoryFolder.id;\r\n            //@ts-ignore\r\n            entries.push(data);\r\n        }\r\n\r\n        return entries;\r\n    }\r\n\r\n    FilterJsonObjects(jsonObject) {\r\n        const unsupportedCategories = [\r\n            'Ammunition',\r\n            'Commlinks',\r\n            'Cyberdecks',\r\n            'Hacking Programs',\r\n            'Rigger Command Consoles',\r\n            'Custom'\r\n        ]\r\n\r\n        return jsonObject['gears']['gear'].filter(gear => !unsupportedCategories.includes(ImportHelper.StringValue(gear, 'category', '')));\r\n    }\r\n\r\n    async Parse(jsonObject: object): Promise<Entity> {\r\n        const equipments = this.FilterJsonObjects(jsonObject);\r\n\r\n        const entries = await this.ParseEquipments(equipments);\r\n\r\n        return await Item.create(entries);\r\n    }\r\n}","import { DataImporter } from './DataImporter';\r\nimport Mod = Shadowrun.Modification;\r\nimport { ImportHelper } from '../helper/ImportHelper';\r\nimport { Constants } from './Constants';\r\nimport { ModParserBase } from '../parser/mod/ModParserBase';\r\n\r\nexport class ModImporter extends DataImporter {\r\n    public categoryTranslations: any;\r\n    public accessoryTranslations: any;\r\n    public files = ['weapons.xml'];\r\n\r\n    CanParse(jsonObject: object): boolean {\r\n        return jsonObject.hasOwnProperty('accessories') && jsonObject['accessories'].hasOwnProperty('accessory');\r\n    }\r\n\r\n    GetDefaultData(): Mod {\r\n        return {\r\n            name: '',\r\n            _id: '',\r\n            folder: '',\r\n            img: 'icons/svg/mystery-man.svg',\r\n            flags: {},\r\n            type: 'modification',\r\n            data: {\r\n                description: {\r\n                    value: '',\r\n                    chat: '',\r\n                    source: '',\r\n                },\r\n                technology: {\r\n                    rating: 1,\r\n                    availability: '',\r\n                    quantity: 1,\r\n                    cost: 0,\r\n                    equipped: true,\r\n                    conceal: {\r\n                        base: 0,\r\n                        value: 0,\r\n                        mod: [],\r\n                    },\r\n                    condition_monitor: {\r\n                        label: '',\r\n                        value: 0,\r\n                        max: 0,\r\n                    },\r\n                    wireless: true\r\n                },\r\n                type: '',\r\n                mount_point: '',\r\n                dice_pool: 0,\r\n                accuracy: 0,\r\n                rc: 0,\r\n            },\r\n            permission: {\r\n                default: 2,\r\n            },\r\n        };\r\n    }\r\n\r\n    ExtractTranslation() {\r\n        if (!DataImporter.jsoni18n) {\r\n            return;\r\n        }\r\n\r\n        let jsonWeaponsi18n = ImportHelper.ExtractDataFileTranslation(DataImporter.jsoni18n, this.files[0]);\r\n        // Parts of weapon accessory translations are within the application translation. Currently only data translation is used.\r\n        this.accessoryTranslations = ImportHelper.ExtractItemTranslation(jsonWeaponsi18n, 'accessories', 'accessory');\r\n    }\r\n\r\n    async Parse(jsonObject: object): Promise<Entity> {\r\n        const parser = new ModParserBase();\r\n\r\n        let datas: Mod[] = [];\r\n        let jsonDatas = jsonObject['accessories']['accessory'];\r\n        for (let i = 0; i < jsonDatas.length; i++) {\r\n            let jsonData = jsonDatas[i];\r\n\r\n            if (DataImporter.unsupportedEntry(jsonData)) {\r\n                continue;\r\n            }\r\n\r\n            let data = parser.Parse(jsonData, this.GetDefaultData());\r\n            // TODO: Integrate into ModParserBase approach.\r\n            data.name = ImportHelper.MapNameToTranslation(this.accessoryTranslations, data.name);\r\n            //TODO: Test this\r\n\r\n            let folderName = data.data.mount_point !== undefined ? data.data.mount_point : 'Other';\r\n            if (folderName.includes('/')) {\r\n                let splitName = folderName.split('/');\r\n                folderName = splitName[0];\r\n            }\r\n\r\n            let folder = await ImportHelper.GetFolderAtPath(`${Constants.ROOT_IMPORT_FOLDER_NAME}/Mods/${folderName}`, true);\r\n            data.folder = folder.id;\r\n\r\n            datas.push(data);\r\n        }\r\n\r\n        return await Item.create(datas);\r\n    }\r\n}\r\n","import { DataImporter } from './DataImporter';\r\nimport { ImportHelper } from '../helper/ImportHelper';\r\nimport { QualityParserBase } from '../parser/quality/QualityParserBase';\r\nimport Quality = Shadowrun.Quality;\r\nimport {DefaultValues} from \"../../dataTemplates\";\r\n\r\nexport class QualityImporter extends DataImporter {\r\n    public categoryTranslations: any;\r\n    public itemTranslations: any;\r\n    public files = ['qualities.xml'];\r\n\r\n    CanParse(jsonObject: object): boolean {\r\n        return jsonObject.hasOwnProperty('qualities') && jsonObject['qualities'].hasOwnProperty('quality');\r\n    }\r\n\r\n    GetDefaultData(): Quality {\r\n        return {\r\n            name: 'Unnamed Armor',\r\n            _id: '',\r\n            folder: '',\r\n            img: 'icons/svg/mystery-man.svg',\r\n            flags: {},\r\n            type: 'quality',\r\n            data: {\r\n                description: {\r\n                    value: '',\r\n                    chat: '',\r\n                    source: '',\r\n                },\r\n                action: {\r\n                    type: '',\r\n                    category: '',\r\n                    attribute: '',\r\n                    attribute2: '',\r\n                    skill: '',\r\n                    spec: false,\r\n                    mod: 0,\r\n                    mod_description: '',\r\n                    damage: DefaultValues.damageData({type: {base: '', value: ''}}),\r\n                    limit: {\r\n                        value: 0,\r\n                        attribute: '',\r\n                        mod: [],\r\n                        base: 0,\r\n                    },\r\n                    extended: false,\r\n                    opposed: {\r\n                        type: '',\r\n                        attribute: '',\r\n                        attribute2: '',\r\n                        skill: '',\r\n                        mod: 0,\r\n                        description: '',\r\n                    },\r\n                    alt_mod: 0,\r\n                    dice_pool_mod: [],\r\n                },\r\n                type: '',\r\n            },\r\n            permission: {\r\n                default: 2,\r\n            },\r\n        };\r\n    }\r\n\r\n    ExtractTranslation() {\r\n        if (!DataImporter.jsoni18n) {\r\n            return;\r\n        }\r\n\r\n        let jsonQualityi18n = ImportHelper.ExtractDataFileTranslation(DataImporter.jsoni18n, this.files[0]);\r\n        this.categoryTranslations = ImportHelper.ExtractCategoriesTranslation(jsonQualityi18n);\r\n        this.itemTranslations = ImportHelper.ExtractItemTranslation(jsonQualityi18n, 'qualities', 'quality');\r\n    }\r\n\r\n    async Parse(jsonObject: object): Promise<Entity> {\r\n        const jsonNameTranslations = {};\r\n        const folders = await ImportHelper.MakeCategoryFolders(jsonObject, 'Qualities', this.categoryTranslations);\r\n        console.log(folders);\r\n\r\n        const parser = new QualityParserBase();\r\n\r\n        let datas: Quality[] = [];\r\n        let jsonDatas = jsonObject['qualities']['quality'];\r\n        for (let i = 0; i < jsonDatas.length; i++) {\r\n            let jsonData = jsonDatas[i];\r\n\r\n            if (DataImporter.unsupportedEntry(jsonData)) {\r\n                continue;\r\n            }\r\n\r\n            let data = parser.Parse(jsonData, this.GetDefaultData(), this.itemTranslations);\r\n\r\n            let category = ImportHelper.StringValue(jsonData, 'category');\r\n            data.folder = folders[category.toLowerCase()].id;\r\n            data.name = ImportHelper.MapNameToTranslation(this.itemTranslations, data.name);\r\n\r\n            datas.push(data);\r\n        }\r\n\r\n        return await Item.create(datas);\r\n    }\r\n}\r\n","import { DataImporter } from './DataImporter';\r\nimport { ImportHelper } from '../helper/ImportHelper';\r\nimport Spell = Shadowrun.Spell;\r\nimport { SpellParserBase } from '../parser/spell/SpellParserBase';\r\nimport { CombatSpellParser } from '../parser/spell/CombatSpellParser';\r\nimport { ManipulationSpellParser } from '../parser/spell/ManipulationSpellParser';\r\nimport { IllusionSpellParser } from '../parser/spell/IllusionSpellParser';\r\nimport { DetectionSpellImporter } from '../parser/spell/DetectionSpellImporter';\r\nimport { ParserMap } from '../parser/ParserMap';\r\nimport {DefaultValues} from \"../../dataTemplates\";\r\n\r\nexport class SpellImporter extends DataImporter {\r\n    public categoryTranslations: any;\r\n    public itemTranslations: any;\r\n    public files = ['spells.xml'];\r\n\r\n    CanParse(jsonObject: object): boolean {\r\n        return jsonObject.hasOwnProperty('spells') && jsonObject['spells'].hasOwnProperty('spell');\r\n    }\r\n\r\n    GetDefaultData(): Spell {\r\n        return {\r\n            name: 'Unnamed Item',\r\n            _id: '',\r\n            folder: '',\r\n            img: 'icons/svg/mystery-man.svg',\r\n            flags: {},\r\n            type: 'spell',\r\n            data: {\r\n                description: {\r\n                    value: '',\r\n                    chat: '',\r\n                    source: '',\r\n                },\r\n                action: {\r\n                    type: 'varies',\r\n                    category: '',\r\n                    attribute: 'magic',\r\n                    attribute2: '',\r\n                    skill: 'spellcasting',\r\n                    spec: false,\r\n                    mod: 0,\r\n                    mod_description: '',\r\n                    damage: DefaultValues.damageData({type: {base: '', value: ''}}),\r\n                    limit: {\r\n                        value: 0,\r\n                        attribute: '',\r\n                        mod: [],\r\n                        base: 0,\r\n                    },\r\n                    extended: false,\r\n                    opposed: {\r\n                        type: '',\r\n                        attribute: '',\r\n                        attribute2: '',\r\n                        skill: '',\r\n                        mod: 0,\r\n                        description: '',\r\n                    },\r\n                    alt_mod: 0,\r\n                    dice_pool_mod: [],\r\n                },\r\n                drain: 0,\r\n                category: '',\r\n                type: '',\r\n                range: '',\r\n                duration: '',\r\n                combat: {\r\n                    type: '',\r\n                },\r\n                detection: {\r\n                    passive: false,\r\n                    type: '',\r\n                    extended: false,\r\n                },\r\n                illusion: {\r\n                    type: '',\r\n                    sense: '',\r\n                },\r\n                manipulation: {\r\n                    damaging: false,\r\n                    mental: false,\r\n                    environmental: false,\r\n                    physical: false,\r\n                },\r\n            },\r\n            permission: {\r\n                default: 2,\r\n            },\r\n        };\r\n    }\r\n\r\n    ExtractTranslation() {\r\n        if (!DataImporter.jsoni18n) {\r\n            return;\r\n        }\r\n\r\n        let jsonSpelli18n = ImportHelper.ExtractDataFileTranslation(DataImporter.jsoni18n, this.files[0]);\r\n        this.categoryTranslations = ImportHelper.ExtractCategoriesTranslation(jsonSpelli18n);\r\n        this.itemTranslations = ImportHelper.ExtractItemTranslation(jsonSpelli18n, 'spells', 'spell');\r\n    }\r\n\r\n    async Parse(jsonObject: object): Promise<Entity> {\r\n        const folders = await ImportHelper.MakeCategoryFolders(jsonObject, 'Spells', this.categoryTranslations);\r\n\r\n        const parser = new ParserMap<Spell>('category', [\r\n            { key: 'Combat', value: new CombatSpellParser() },\r\n            { key: 'Manipulation', value: new ManipulationSpellParser() },\r\n            { key: 'Illusion', value: new IllusionSpellParser() },\r\n            { key: 'Detection', value: new DetectionSpellImporter() },\r\n            { key: 'Health', value: new SpellParserBase() },\r\n            { key: 'Enchantments', value: new SpellParserBase() },\r\n            { key: 'Rituals', value: new SpellParserBase() },\r\n        ]);\r\n\r\n        let datas: Spell[] = [];\r\n        let jsonDatas = jsonObject['spells']['spell'];\r\n        for (let i = 0; i < jsonDatas.length; i++) {\r\n            let jsonData = jsonDatas[i];\r\n            if (DataImporter.unsupportedEntry(jsonData)) {\r\n                continue;\r\n            }\r\n\r\n            let data = parser.Parse(jsonData, this.GetDefaultData(), this.itemTranslations);\r\n            data.folder = folders[data.data.category].id;\r\n            datas.push(data);\r\n        }\r\n\r\n        return await Item.create(datas);\r\n    }\r\n}\r\n","import { DataImporter } from './DataImporter';\r\nimport { ImportHelper } from '../helper/ImportHelper';\r\nimport { CyberwareParser } from '../parser/ware/CyberwareParser';\r\nimport Ware = Shadowrun.Ware;\r\nimport Cyberware = Shadowrun.Cyberware;\r\nimport {DefaultValues} from \"../../dataTemplates\";\r\n\r\nexport class WareImporter extends DataImporter {\r\n    public categoryTranslations: any;\r\n    public itemTranslations: any;\r\n    public files = ['cyberware.xml', 'bioware.xml'];\r\n\r\n    CanParse(jsonObject: object): boolean {\r\n        return jsonObject.hasOwnProperty('cyberwares') && jsonObject['cyberwares'].hasOwnProperty('cyberware') ||\r\n               jsonObject.hasOwnProperty('biowares') && jsonObject['biowares'].hasOwnProperty('bioware');\r\n    }\r\n\r\n    GetDefaultCyberwareData(): Cyberware {\r\n        //@ts-ignore // Bio/Cyberware conflicts on 'type'...\r\n        return {...this.GetDefaultData(), type: 'cyberware'};\r\n    }\r\n\r\n    GetDefaultBiowareData(): Cyberware {\r\n        //@ts-ignore // Bio/Cyberware conflicts on 'type'...\r\n        return {...this.GetDefaultData(), type: 'bioware'};\r\n    }\r\n\r\n    GetDefaultData(): Ware {\r\n        return {\r\n            name: 'Unnamed Form',\r\n            type: 'cyberware',\r\n            _id: '',\r\n            folder: '',\r\n            img: 'icons/svg/mystery-man.svg',\r\n            flags: {},\r\n            data: {\r\n                description: {\r\n                    value: '',\r\n                    chat: '',\r\n                    source: '',\r\n                },\r\n                technology: {\r\n                    rating: 1,\r\n                    availability: '',\r\n                    quantity: 1,\r\n                    cost: 0,\r\n                    equipped: true,\r\n                    conceal: {\r\n                        base: 0,\r\n                        value: 0,\r\n                        mod: [],\r\n                    },\r\n                    condition_monitor: {\r\n                        label: '',\r\n                        value: 0,\r\n                        max: 0,\r\n                    },\r\n                    wireless: true\r\n                },\r\n                armor: {\r\n                    value: 0,\r\n                    mod: false,\r\n                    acid: 0,\r\n                    cold: 0,\r\n                    fire: 0,\r\n                    electricity: 0,\r\n                    radiation: 0,\r\n                },\r\n                action: {\r\n                    type: '',\r\n                    category: '',\r\n                    attribute: '',\r\n                    attribute2: '',\r\n                    skill: '',\r\n                    spec: false,\r\n                    mod: 0,\r\n                    mod_description: '',\r\n                    damage: DefaultValues.damageData({type: {base: '', value: ''}}),\r\n                    limit: {\r\n                        value: 0,\r\n                        attribute: '',\r\n                        mod: [],\r\n                        base: 0,\r\n                    },\r\n                    extended: false,\r\n                    opposed: {\r\n                        type: '',\r\n                        attribute: '',\r\n                        attribute2: '',\r\n                        skill: '',\r\n                        mod: 0,\r\n                        description: '',\r\n                    },\r\n                    alt_mod: 0,\r\n                    dice_pool_mod: [],\r\n                },\r\n                grade: 'standard',\r\n                essence: 0,\r\n                capacity: 0,\r\n            },\r\n            permission: {\r\n                default: 2,\r\n            },\r\n        };\r\n    }\r\n    ExtractTranslation(fileName) {\r\n        if (!DataImporter.jsoni18n) {\r\n            return;\r\n        }\r\n\r\n        let jsonItemi18n = ImportHelper.ExtractDataFileTranslation(DataImporter.jsoni18n, fileName);\r\n         // TODO: Move ExtractTranslation phase before the parsing phase and initiate it with the filename to parse.\r\n            if (this.files.length !== 2) console.error('Lazily hacked code will fail for more or less than two files.');\r\n\r\n        this.categoryTranslations = ImportHelper.ExtractCategoriesTranslation(jsonItemi18n);\r\n\r\n        const {typeKey, listKey} = fileName === 'cyberware.xml' ?\r\n                {typeKey: 'cyberwares', listKey: 'cyberware'} :\r\n                {typeKey: 'biowares', listKey: 'bioware'};\r\n\r\n        this.itemTranslations = ImportHelper.ExtractItemTranslation(jsonItemi18n, typeKey, listKey);\r\n    }\r\n\r\n    async Parse(jsonObject: object): Promise<Entity> {\r\n        const cyberParser = new CyberwareParser();\r\n\r\n        let key = jsonObject.hasOwnProperty('cyberwares') ? 'Cyberware' : 'Bioware';\r\n        const folders = await ImportHelper.MakeCategoryFolders(jsonObject, key);\r\n\r\n        key = key.toLowerCase();\r\n        let datas: Ware[] = [];\r\n        let jsonDatas = jsonObject[key + 's'][key];\r\n        for (let i = 0; i < jsonDatas.length; i++) {\r\n            let jsonData = jsonDatas[i];\r\n\r\n            if (DataImporter.unsupportedEntry(jsonData)) {\r\n                continue;\r\n            }\r\n\r\n            const defaultData = key === 'cyberware' ? this.GetDefaultCyberwareData() : this.GetDefaultBiowareData();\r\n            let data = cyberParser.Parse(jsonData, defaultData, this.itemTranslations);\r\n            const category = ImportHelper.StringValue(jsonData, 'category');\r\n\r\n            // TODO: Does this type mixture cause later issues? Will it carry over?\r\n            //@ts-ignore\r\n            data.folder = folders[category.toLowerCase()].id;\r\n\r\n            // // TODO: Follow ComplexFormParserBase approach.\r\n            // data.name = ImportHelper.MapNameToTranslation(this.itemTranslations, data.name);\r\n\r\n            datas.push(data);\r\n        }\r\n\r\n        return await Item.create(datas);\r\n    }\r\n}\r\n","import { DataImporter } from './DataImporter';\r\nimport { ImportHelper } from '../helper/ImportHelper';\r\nimport { Constants } from './Constants';\r\nimport { RangedParser } from '../parser/weapon/RangedParser';\r\nimport { MeleeParser } from '../parser/weapon/MeleeParser';\r\nimport { ThrownParser } from '../parser/weapon/ThrownParser';\r\nimport { ParserMap } from '../parser/ParserMap';\r\nimport Weapon = Shadowrun.Weapon;\r\nimport { WeaponParserBase } from '../parser/weapon/WeaponParserBase';\r\nimport {DefaultValues} from \"../../dataTemplates\";\r\n\r\nexport class WeaponImporter extends DataImporter {\r\n    public categoryTranslations: any;\r\n    public itemTranslations: any;\r\n    public files = ['weapons.xml'];\r\n\r\n    CanParse(jsonObject: object): boolean {\r\n        return jsonObject.hasOwnProperty('weapons') && jsonObject['weapons'].hasOwnProperty('weapon');\r\n    }\r\n\r\n    GetDefaultData(): Weapon {\r\n        return {\r\n            name: 'Unnamed Item',\r\n            _id: '',\r\n            folder: '',\r\n            img: 'icons/svg/mystery-man.svg',\r\n            flags: {},\r\n            type: 'weapon',\r\n            data: {\r\n                description: {\r\n                    value: '',\r\n                    chat: '',\r\n                    source: '',\r\n                },\r\n                action: {\r\n                    type: 'varies',\r\n                    category: '',\r\n                    attribute: 'agility',\r\n                    attribute2: '',\r\n                    skill: '',\r\n                    spec: false,\r\n                    mod: 0,\r\n                    mod_description: '',\r\n                    damage: DefaultValues.damageData(),\r\n                    limit: {\r\n                        value: 0,\r\n                        attribute: '',\r\n                        mod: [],\r\n                        base: 0,\r\n                    },\r\n                    extended: false,\r\n                    opposed: {\r\n                        type: 'defense',\r\n                        attribute: '',\r\n                        attribute2: '',\r\n                        skill: '',\r\n                        mod: 0,\r\n                        description: '',\r\n                    },\r\n                    alt_mod: 0,\r\n                    dice_pool_mod: [],\r\n                },\r\n                technology: {\r\n                    rating: 1,\r\n                    availability: '',\r\n                    quantity: 1,\r\n                    cost: 0,\r\n                    equipped: true,\r\n                    conceal: {\r\n                        base: 0,\r\n                        value: 0,\r\n                        mod: [],\r\n                    },\r\n                    condition_monitor: {\r\n                        label: '',\r\n                        value: 0,\r\n                        max: 0,\r\n                    },\r\n                    wireless: true\r\n                },\r\n                ammo: {\r\n                    spare_clips: {\r\n                        value: 0,\r\n                        max: 0,\r\n                    },\r\n                    current: {\r\n                        value: 0,\r\n                        max: 0,\r\n                    },\r\n                },\r\n                range: {\r\n                    category: '',\r\n                    ranges: {\r\n                        short: 0,\r\n                        medium: 0,\r\n                        long: 0,\r\n                        extreme: 0,\r\n                    },\r\n                    rc: {\r\n                        value: 0,\r\n                        base: 0,\r\n                        mod: [],\r\n                    },\r\n                    modes: {\r\n                        single_shot: false,\r\n                        semi_auto: false,\r\n                        burst_fire: false,\r\n                        full_auto: false,\r\n                    },\r\n                },\r\n                melee: {\r\n                    reach: 0,\r\n                },\r\n                thrown: {\r\n                    ranges: {\r\n                        short: 0,\r\n                        medium: 0,\r\n                        long: 0,\r\n                        extreme: 0,\r\n                        attribute: '',\r\n                    },\r\n                    blast: {\r\n                        radius: 0,\r\n                        dropoff: 0,\r\n                    },\r\n                },\r\n                category: 'range',\r\n                subcategory: '',\r\n            },\r\n            permission: {\r\n                default: 2,\r\n            },\r\n        };\r\n    }\r\n\r\n    ExtractTranslation() {\r\n        if (!DataImporter.jsoni18n) {\r\n            return;\r\n        }\r\n\r\n        let jsonWeaponi18n = ImportHelper.ExtractDataFileTranslation(DataImporter.jsoni18n, this.files[0]);\r\n        this.categoryTranslations = ImportHelper.ExtractCategoriesTranslation(jsonWeaponi18n);\r\n        this.itemTranslations = ImportHelper.ExtractItemTranslation(jsonWeaponi18n, 'weapons', 'weapon');\r\n    }\r\n\r\n    async Parse(jsonObject: object): Promise<Entity> {\r\n        const folders = await ImportHelper.MakeCategoryFolders(jsonObject, 'Weapons', this.categoryTranslations);\r\n\r\n        folders['gear'] = await ImportHelper.GetFolderAtPath(`${Constants.ROOT_IMPORT_FOLDER_NAME}/Weapons/Gear`, true);\r\n        folders['quality'] = await ImportHelper.GetFolderAtPath(`${Constants.ROOT_IMPORT_FOLDER_NAME}/Weapons/Quality`, true);\r\n\r\n        const parser = new ParserMap<Weapon>(WeaponParserBase.GetWeaponType, [\r\n            { key: 'range', value: new RangedParser() },\r\n            { key: 'melee', value: new MeleeParser() },\r\n            { key: 'thrown', value: new ThrownParser() },\r\n        ]);\r\n\r\n        let datas: Weapon[] = [];\r\n        let jsonDatas = jsonObject['weapons']['weapon'];\r\n        for (let i = 0; i < jsonDatas.length; i++) {\r\n            let jsonData = jsonDatas[i];\r\n\r\n            if (DataImporter.unsupportedEntry(jsonData)) {\r\n                continue;\r\n            }\r\n\r\n            let data = parser.Parse(jsonData, this.GetDefaultData(), this.itemTranslations);\r\n            data.folder = folders[data.data.subcategory].id;\r\n\r\n            datas.push(data);\r\n        }\r\n\r\n        return await Item.create(datas);\r\n    }\r\n}\r\n","export abstract class Parser<TResult> {\r\n    public abstract Parse(jsonData: object, data: TResult, jsonTranslation?: object): TResult;\r\n}\r\n","import { Parser } from './Parser';\r\nimport { ImportHelper } from '../helper/ImportHelper';\r\n\r\nexport class ParserMap<TResult> extends Parser<TResult> {\r\n    private readonly m_BranchKey: string | BranchFunc<TResult>;\r\n    private readonly m_Map: Map<string, Parser<TResult>>;\r\n\r\n    public constructor(branchKey: string | BranchFunc<TResult>, elements: CArg<TResult>[]) {\r\n        super();\r\n\r\n        this.m_BranchKey = branchKey;\r\n\r\n        this.m_Map = new Map();\r\n        for (const { key, value } of elements) {\r\n            this.m_Map.set(key, value);\r\n        }\r\n    }\r\n\r\n    public Parse(jsonData: object, data: TResult, jsonTranslation?: object): TResult {\r\n        let key;\r\n        if (typeof this.m_BranchKey === 'function') {\r\n            key = this.m_BranchKey(jsonData);\r\n        } else {\r\n            key = this.m_BranchKey;\r\n            key = ImportHelper.StringValue(jsonData, key);\r\n        }\r\n\r\n        const parser = this.m_Map.get(key);\r\n        if (parser === undefined) {\r\n            console.warn(`Could not find mapped parser for category ${key}.`);\r\n            return data;\r\n        }\r\n        return parser.Parse(jsonData, data, jsonTranslation);\r\n    }\r\n}\r\n\r\ntype CArg<TResult> = {\r\n    key: string;\r\n    value: Parser<TResult>;\r\n};\r\ntype BranchFunc<TResult> = (TResult) => string;\r\n","import Armor = Shadowrun.Armor;\r\nimport { ImportHelper } from '../../helper/ImportHelper';\r\nimport { TechnologyItemParserBase } from '../item/TechnologyItemParserBase';\r\n\r\nexport class ArmorParserBase extends TechnologyItemParserBase<Armor> {\r\n    Parse(jsonData: object, data: Shadowrun.Armor): Shadowrun.Armor {\r\n        data = super.Parse(jsonData, data);\r\n\r\n        data.data.armor.value = ImportHelper.IntValue(jsonData, 'armor', 0);\r\n        data.data.armor.mod = ImportHelper.StringValue(jsonData, 'armor').includes('+');\r\n\r\n        return data;\r\n    }\r\n}\r\n","import ComplexForm = Shadowrun.ComplexForm;\r\nimport { ImportHelper } from '../../helper/ImportHelper';\r\nimport { ItemParserBase } from '../item/ItemParserBase';\r\nimport ComplexFormTarget = Shadowrun.ComplexFormTarget;\r\n\r\nexport class ComplexFormParserBase extends ItemParserBase<ComplexForm> {\r\n    Parse(jsonData: object, data: Shadowrun.ComplexForm, jsonTranslation?: object): Shadowrun.ComplexForm {\r\n        data.name = ImportHelper.StringValue(jsonData, 'name');\r\n\r\n        data.data.description.source = `${ImportHelper.StringValue(jsonData, 'source')} ${ImportHelper.StringValue(jsonData, 'page')}`;\r\n\r\n        let fade = ImportHelper.StringValue(jsonData, 'fv');\r\n        if (fade.includes('+') || fade.includes('-')) {\r\n            data.data.fade = parseInt(fade.substring(1, fade.length));\r\n        }\r\n\r\n        let duration = ImportHelper.StringValue(jsonData, 'duration');\r\n        if (duration === 'I') {\r\n            data.data.duration = 'instant';\r\n        } else if (duration === 'S') {\r\n            data.data.duration = 'sustained';\r\n        } else if (duration === 'P') {\r\n            data.data.duration = 'permanent';\r\n        }\r\n\r\n        let target = ImportHelper.StringValue(jsonData, 'target');\r\n        switch (target) {\r\n            case 'Device':\r\n            case 'File':\r\n            case 'Host':\r\n            case 'Persona':\r\n            case 'Self':\r\n            case 'Sprite':\r\n                data.data.target = target.toLowerCase() as ComplexFormTarget;\r\n                break;\r\n            default:\r\n                data.data.target = 'other';\r\n                break;\r\n        }\r\n\r\n        if (jsonTranslation) {\r\n            const origName = ImportHelper.StringValue(jsonData, 'name');\r\n            data.name = ImportHelper.MapNameToTranslation(jsonTranslation, origName);\r\n            data.data.description.source = `${ImportHelper.StringValue(jsonData, 'source')} ${ImportHelper.MapNameToPageSource(jsonTranslation, origName)}`;\r\n        }\r\n\r\n        return data;\r\n    }\r\n}\r\n","import { ImportHelper } from '../../helper/ImportHelper';\r\nimport CritterPower = Shadowrun.CritterPower;\r\nimport CritterPowerCategory = Shadowrun.CritterPowerCategory;\r\nimport { ItemParserBase } from '../item/ItemParserBase';\r\n\r\nexport class CritterPowerParserBase extends ItemParserBase<CritterPower> {\r\n    public Parse(jsonData: object, data: CritterPower, jsonTranslation?: object): CritterPower {\r\n\r\n        console.log(jsonData);\r\n\r\n        data.name = ImportHelper.StringValue(jsonData, 'name');\r\n\r\n        data.data.description.source = `${ImportHelper.StringValue(jsonData, 'source')} ${ImportHelper.StringValue(jsonData, 'page')}`;\r\n        data.data.category = ImportHelper.StringValue(jsonData, 'category').toLowerCase() as CritterPowerCategory;\r\n\r\n        let duration = ImportHelper.StringValue(jsonData, 'duration');\r\n        if (duration === 'Always') {\r\n            data.data.duration = 'always';\r\n        } else if (duration === 'Instant') {\r\n            data.data.duration = 'instant';\r\n        } else if (duration === 'Sustained') {\r\n            data.data.duration = 'sustained';\r\n        } else if (duration === 'Permanent') {\r\n            data.data.duration = 'permanent';\r\n        } else {\r\n              data.data.duration = 'special';\r\n        }\r\n\r\n        let range = ImportHelper.StringValue(jsonData, 'range');\r\n        if (range === 'T') {\r\n            data.data.range = 'touch';\r\n        } else if (range === 'LOS') {\r\n            data.data.range = 'los';\r\n        } else if (range === 'LOS (A)') {\r\n            data.data.range = 'los_a';\r\n        } else if (range === 'Self') {\r\n           data.data.range = 'self';\r\n        } else {\r\n          data.data.range = 'special';\r\n        }\r\n\r\n        let type = ImportHelper.StringValue(jsonData, 'type');\r\n        if (type === 'P') {\r\n            data.data.powerType = 'physical';\r\n        } else if (type === 'M') {\r\n            data.data.powerType = 'mana';\r\n        }\r\n\r\n        if (jsonTranslation) {\r\n            const origName = ImportHelper.StringValue(jsonData, 'name');\r\n            data.name = ImportHelper.MapNameToTranslation(jsonTranslation, origName);\r\n            data.data.description.source = `${ImportHelper.StringValue(jsonData, 'source')} ${ImportHelper.MapNameToPageSource(jsonTranslation, origName)}`;\r\n        }\r\n\r\n        return data;\r\n    }\r\n}\r\n","import { Parser } from '../Parser';\r\nimport { ImportHelper } from '../../helper/ImportHelper';\r\nimport SR5ItemType = Shadowrun.SR5ItemType;\r\n\r\nexport abstract class ItemParserBase<TResult extends SR5ItemType> extends Parser<TResult> {\r\n    Parse(jsonData: object, data: TResult, jsonTranslation?: object): TResult {\r\n        data.name = ImportHelper.StringValue(jsonData, 'name');\r\n\r\n        data.data.description.source = `${ImportHelper.StringValue(jsonData, 'source')} ${ImportHelper.StringValue(jsonData, 'page')}`;\r\n\r\n        if (jsonTranslation) {\r\n            const origName = ImportHelper.StringValue(jsonData, 'name');\r\n            data.name = ImportHelper.MapNameToTranslation(jsonTranslation, origName);\r\n            data.data.description.source = `${ImportHelper.StringValue(jsonData, 'source')} ${ImportHelper.MapNameToPageSource(jsonTranslation, origName)}`;\r\n        }\r\n\r\n        return data;\r\n    }\r\n}\r\n","import SR5ItemType = Shadowrun.SR5ItemType;\r\nimport { ItemParserBase } from './ItemParserBase';\r\nimport { ImportHelper } from '../../helper/ImportHelper';\r\nimport Technology = Shadowrun.Technology;\r\n\r\nexport abstract class TechnologyItemParserBase<TResult extends Technology & SR5ItemType> extends ItemParserBase<TResult> {\r\n    Parse(jsonData: object, data: TResult, jsonTranslation?: object): TResult {\r\n        data = super.Parse(jsonData, data, jsonTranslation);\r\n\r\n        data.data.technology.availability = ImportHelper.StringValue(jsonData, 'avail', '0');\r\n        data.data.technology.cost = ImportHelper.IntValue(jsonData, 'cost', 0);\r\n        data.data.technology.rating = ImportHelper.IntValue(jsonData, 'rating', 0);\r\n\r\n        return data;\r\n    }\r\n}\r\n","import Mod = Shadowrun.Modification;\r\nimport { ImportHelper } from '../../helper/ImportHelper';\r\nimport MountType = Shadowrun.MountType;\r\nimport { TechnologyItemParserBase } from '../item/TechnologyItemParserBase';\r\n\r\nexport class ModParserBase extends TechnologyItemParserBase<Mod> {\r\n    Parse(jsonData: object, data: Mod): Mod {\r\n        data = super.Parse(jsonData, data);\r\n\r\n        data.data.type = 'weapon';\r\n\r\n        data.data.mount_point = ImportHelper.StringValue(jsonData, 'mount') as MountType;\r\n\r\n        data.data.rc = ImportHelper.IntValue(jsonData, 'rc', 0);\r\n        data.data.accuracy = ImportHelper.IntValue(jsonData, 'accuracy', 0);\r\n\r\n        data.data.technology.conceal.base = ImportHelper.IntValue(jsonData, 'conceal', 0);\r\n\r\n        return data;\r\n    }\r\n}\r\n","import { ImportHelper } from '../../helper/ImportHelper';\r\nimport Quality = Shadowrun.Quality;\r\nimport { ItemParserBase } from '../item/ItemParserBase';\r\n\r\nexport class QualityParserBase extends ItemParserBase<Quality> {\r\n    public Parse(jsonData: object, data: Quality, jsonTranslation?): Quality {\r\n        data.name = ImportHelper.StringValue(jsonData, 'name');\r\n\r\n        data.data.description.source = `${ImportHelper.StringValue(jsonData, 'source')} ${ImportHelper.StringValue(jsonData, 'page')}`;\r\n\r\n        data.data.type = ImportHelper.StringValue(jsonData, 'category') === 'Positive' ? 'positive' : 'negative';\r\n\r\n        if (jsonTranslation) {\r\n            const origName = ImportHelper.StringValue(jsonData, 'name');\r\n            data.name = ImportHelper.MapNameToTranslation(jsonTranslation, origName);\r\n            data.data.description.source = `${ImportHelper.StringValue(jsonData, 'source')} ${ImportHelper.MapNameToPageSource(jsonTranslation, origName)}`;\r\n        }\r\n\r\n        return data;\r\n    }\r\n}\r\n","import { SpellParserBase } from './SpellParserBase';\r\nimport { ImportHelper } from '../../helper/ImportHelper';\r\n\r\nexport class CombatSpellParser extends SpellParserBase {\r\n    Parse(jsonData: object, data: Shadowrun.Spell, jsonTranslation?: object): Shadowrun.Spell {\r\n        data = super.Parse(jsonData, data, jsonTranslation);\r\n\r\n        let descriptor = ImportHelper.StringValue(jsonData, 'descriptor');\r\n        // A few spells have a missing descriptor instead of an empty string.\r\n        // The field is <descriptor /> rather than <descriptor></descriptor>\r\n        // which gets imported as undefined rather than empty string (sigh)\r\n        // Rather than refactor our ImportHelper we'll handle it in here.\r\n        if (descriptor === undefined) {\r\n            descriptor = '';\r\n        }\r\n\r\n        data.data.combat.type = descriptor.includes('Indirect') ? 'indirect' : 'direct';\r\n        if (data.data.combat.type === 'direct') {\r\n            data.data.action.opposed.type = 'defense';\r\n            switch (data.data.type) {\r\n                case 'physical':\r\n                    data.data.action.opposed.attribute = 'body';\r\n                    break;\r\n                case 'mana':\r\n                    data.data.action.opposed.attribute = 'willpower';\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        } else if (data.data.combat.type === 'indirect') {\r\n            data.data.action.opposed.type = 'defense';\r\n        }\r\n\r\n        return data;\r\n    }\r\n}\r\n","import { SpellParserBase } from './SpellParserBase';\r\nimport { ImportHelper } from '../../helper/ImportHelper';\r\n\r\nexport class DetectionSpellImporter extends SpellParserBase {\r\n    Parse(jsonData: object, data: Shadowrun.Spell, jsonTranslation?: object): Shadowrun.Spell {\r\n        data = super.Parse(jsonData, data, jsonTranslation);\r\n\r\n        let descriptor = ImportHelper.StringValue(jsonData, 'descriptor');\r\n        // A few spells have a missing descriptor instead of an empty string.\r\n        // The field is <descriptor /> rather than <descriptor></descriptor>\r\n        // which gets imported as undefined rather than empty string (sigh)\r\n        // Rather than refactor our ImportHelper we'll handle it in here.\r\n        if (descriptor === undefined) {\r\n            descriptor = '';\r\n        }\r\n\r\n        data.data.detection.passive = descriptor.includes('Passive');\r\n        if (!data.data.detection.passive) {\r\n            data.data.action.opposed.type = 'custom';\r\n            data.data.action.opposed.attribute = 'willpower';\r\n            data.data.action.opposed.attribute2 = 'logic';\r\n        }\r\n\r\n        data.data.detection.extended = descriptor.includes('Extended');\r\n\r\n        if (descriptor.includes('Psychic')) {\r\n            data.data.detection.type = 'psychic';\r\n        } else if (descriptor.includes('Directional')) {\r\n            data.data.detection.type = 'directional';\r\n        } else if (descriptor.includes('Area')) {\r\n            data.data.detection.type = 'area';\r\n        }\r\n\r\n        return data;\r\n    }\r\n}\r\n","import { SpellParserBase } from './SpellParserBase';\r\nimport { ImportHelper } from '../../helper/ImportHelper';\r\n\r\nexport class IllusionSpellParser extends SpellParserBase {\r\n    Parse(jsonData: object, data: Shadowrun.Spell, jsonTranslation?: object): Shadowrun.Spell {\r\n        data = super.Parse(jsonData, data, jsonTranslation);\r\n\r\n        let descriptor = ImportHelper.StringValue(jsonData, 'descriptor');\r\n        // A few spells have a missing descriptor instead of an empty string.\r\n        // The field is <descriptor /> rather than <descriptor></descriptor>\r\n        // which gets imported as undefined rather than empty string (sigh)\r\n        // Rather than refactor our ImportHelper we'll handle it in here.\r\n        if (descriptor === undefined) {\r\n            descriptor = '';\r\n        }\r\n\r\n        if (data.data.type === 'mana') {\r\n            data.data.action.opposed.type = 'custom';\r\n            data.data.action.opposed.attribute = 'logic';\r\n            data.data.action.opposed.attribute2 = 'willpower';\r\n        } else if (data.data.type === 'physical') {\r\n            data.data.action.opposed.type = 'custom';\r\n            data.data.action.opposed.attribute = 'intuition';\r\n            data.data.action.opposed.attribute2 = 'logic';\r\n        }\r\n\r\n        return data;\r\n    }\r\n}\r\n","import { SpellParserBase } from './SpellParserBase';\r\nimport { ImportHelper } from '../../helper/ImportHelper';\r\nimport Spell = Shadowrun.Spell;\r\n\r\nexport class ManipulationSpellParser extends SpellParserBase {\r\n    Parse(jsonData: object, data: Spell, jsonTranslation?: object): Spell {\r\n        data = super.Parse(jsonData, data, jsonTranslation);\r\n\r\n        let descriptor = ImportHelper.StringValue(jsonData, 'descriptor');\r\n        // A few spells have a missing descriptor instead of an empty string.\r\n        // The field is <descriptor /> rather than <descriptor></descriptor>\r\n        // which gets imported as undefined rather than empty string (sigh)\r\n        // Rather than refactor our ImportHelper we'll handle it in here.\r\n        if (descriptor === undefined) {\r\n            descriptor = '';\r\n        }\r\n\r\n        data.data.manipulation.environmental = descriptor.includes('Environmental');\r\n        // Generally no resistance roll.\r\n\r\n        data.data.manipulation.mental = descriptor.includes('Mental');\r\n        if (data.data.manipulation.mental) {\r\n            data.data.action.opposed.type = 'custom';\r\n            data.data.action.opposed.attribute = 'logic';\r\n            data.data.action.opposed.attribute2 = 'willpower';\r\n        }\r\n\r\n        data.data.manipulation.physical = descriptor.includes('Physical');\r\n        if (data.data.manipulation.physical) {\r\n            data.data.action.opposed.type = 'custom';\r\n            data.data.action.opposed.attribute = 'body';\r\n            data.data.action.opposed.attribute2 = 'strength';\r\n        }\r\n        data.data.manipulation.damaging = descriptor.includes('Damaging');\r\n        if (data.data.manipulation.damaging) {\r\n            data.data.action.opposed.type = 'soak';\r\n        }\r\n\r\n        return data;\r\n    }\r\n}\r\n","import { ImportHelper } from '../../helper/ImportHelper';\r\nimport Spell = Shadowrun.Spell;\r\nimport SpellCateogry = Shadowrun.SpellCateogry;\r\nimport { ItemParserBase } from '../item/ItemParserBase';\r\n\r\nexport class SpellParserBase extends ItemParserBase<Spell> {\r\n    public Parse(jsonData: object, data: Spell, jsonTranslation?: object): Spell {\r\n        data.name = ImportHelper.StringValue(jsonData, 'name');\r\n\r\n        data.data.description.source = `${ImportHelper.StringValue(jsonData, 'source')} ${ImportHelper.StringValue(jsonData, 'page')}`;\r\n        data.data.category = ImportHelper.StringValue(jsonData, 'category').toLowerCase() as SpellCateogry;\r\n\r\n        let damage = ImportHelper.StringValue(jsonData, 'damage');\r\n        if (damage === 'P') {\r\n            data.data.action.damage.type.base = 'physical';\r\n            data.data.action.damage.type.value = 'physical';\r\n        } else if (damage === 'S') {\r\n            data.data.action.damage.type.base = 'stun';\r\n            data.data.action.damage.type.value = 'stun';\r\n        }\r\n\r\n        let duration = ImportHelper.StringValue(jsonData, 'duration');\r\n        if (duration === 'I') {\r\n            data.data.duration = 'instant';\r\n        } else if (duration === 'S') {\r\n            data.data.duration = 'sustained';\r\n        } else if (duration === 'P') {\r\n            data.data.duration = 'permanent';\r\n        }\r\n\r\n        let drain = ImportHelper.StringValue(jsonData, 'dv');\r\n        if (drain.includes('+') || drain.includes('-')) {\r\n            data.data.drain = parseInt(drain.substring(1, drain.length));\r\n        }\r\n\r\n        let range = ImportHelper.StringValue(jsonData, 'range');\r\n        if (range === 'T') {\r\n            data.data.range = 'touch';\r\n        } else if (range === 'LOS') {\r\n            data.data.range = 'los';\r\n        } else if (range === 'LOS (A)') {\r\n            data.data.range = 'los_a';\r\n        }\r\n\r\n        let type = ImportHelper.StringValue(jsonData, 'type');\r\n        if (type === 'P') {\r\n            data.data.type = 'physical';\r\n        } else if (type === 'M') {\r\n            data.data.type = 'mana';\r\n        }\r\n\r\n        if (jsonTranslation) {\r\n            const origName = ImportHelper.StringValue(jsonData, 'name');\r\n            data.name = ImportHelper.MapNameToTranslation(jsonTranslation, origName);\r\n            data.data.description.source = `${ImportHelper.StringValue(jsonData, 'source')} ${ImportHelper.MapNameToPageSource(jsonTranslation, origName)}`;\r\n        }\r\n\r\n        return data;\r\n    }\r\n}\r\n","import { ImportHelper } from '../../helper/ImportHelper';\r\nimport { TechnologyItemParserBase } from '../item/TechnologyItemParserBase';\r\nimport Cyberware = Shadowrun.Cyberware;\r\nimport Ware = Shadowrun.Ware;\r\n\r\nexport class CyberwareParser extends TechnologyItemParserBase<Ware> {\r\n    Parse(jsonData: object, data: Ware, jsonTranslation?: object): Ware {\r\n        data = super.Parse(jsonData, data, jsonTranslation);\r\n\r\n        const essence = ImportHelper.StringValue(jsonData, 'ess', '0').match(/[0-9]\\.?[0-9]*/g);\r\n        if (essence !== null) {\r\n            data.data.essence = parseFloat(essence[0]);\r\n        }\r\n\r\n        const capacity = ImportHelper.StringValue(jsonData, 'capacity', '0').match(/[0-9]+/g);\r\n        if (capacity !== null) {\r\n            data.data.capacity = parseInt(capacity[0]);\r\n        }\r\n\r\n        return data;\r\n    }\r\n}\r\n","import { ImportHelper } from '../../helper/ImportHelper';\r\nimport { WeaponParserBase } from './WeaponParserBase';\r\nimport ActorAttribute = Shadowrun.ActorAttribute;\r\nimport DamageData = Shadowrun.DamageData;\r\nimport DamageType = Shadowrun.DamageType;\r\nimport Weapon = Shadowrun.Weapon;\r\nimport {DefaultValues} from \"../../../dataTemplates\";\r\n\r\nexport class MeleeParser extends WeaponParserBase {\r\n    GetDamage(jsonData: object): DamageData {\r\n        let jsonDamage = ImportHelper.StringValue(jsonData, 'damage');\r\n        let damageCode: any = jsonDamage.match(/(STR)([+-]?)([1-9]*)\\)([PS])/g)?.[0];\r\n\r\n        if (damageCode == null) {\r\n            return DefaultValues.damageData();\r\n        }\r\n\r\n        let damageBase = 0;\r\n        let damageAp = ImportHelper.IntValue(jsonData, 'ap', 0);\r\n\r\n        let splitDamageCode = damageCode.split(')');\r\n        let damageType = splitDamageCode[1].includes('P') ? 'physical' : 'stun';\r\n\r\n        let splitBaseCode = damageCode.includes('+') ? splitDamageCode[0].split('+') : splitDamageCode[0].split('-');\r\n        if (splitDamageCode[0].includes('+') || splitDamageCode[0].includes('-')) {\r\n            damageBase = parseInt(splitBaseCode[1], 0);\r\n        }\r\n        let damageAttribute = damageCode.includes('STR') ? 'strength' : '';\r\n\r\n        const partialDamageData = {\r\n            type: {\r\n                base: damageType as DamageType,\r\n                value: damageType as DamageType,\r\n            },\r\n            base: damageBase,\r\n            value: damageBase,\r\n            ap: {\r\n                base: damageAp,\r\n                value: damageAp,\r\n                mod: [],\r\n            },\r\n            attribute: damageAttribute as ActorAttribute,\r\n        }\r\n        return DefaultValues.damageData(partialDamageData);\r\n    }\r\n\r\n    Parse(jsonData: object, data: Weapon, jsonTranslation?: object): Weapon {\r\n        data = super.Parse(jsonData, data, jsonTranslation);\r\n\r\n        data.data.melee.reach = ImportHelper.IntValue(jsonData, 'reach');\r\n\r\n        return data;\r\n    }\r\n}\r\n","import { ImportHelper } from '../../helper/ImportHelper';\r\nimport { WeaponParserBase } from './WeaponParserBase';\r\nimport { Constants } from '../../importer/Constants';\r\nimport DamageData = Shadowrun.DamageData;\r\nimport DamageType = Shadowrun.DamageType;\r\nimport Weapon = Shadowrun.Weapon;\r\nimport {DefaultValues} from \"../../../dataTemplates\";\r\n\r\nexport class RangedParser extends WeaponParserBase {\r\n    public GetDamage(jsonData: object): DamageData {\r\n        let jsonDamage = ImportHelper.StringValue(jsonData, 'damage');\r\n        let damageCode = jsonDamage.match(/[0-9]+[PS]/g)?.[0];\r\n\r\n        if (damageCode == null) {\r\n            return DefaultValues.damageData();\r\n        }\r\n\r\n        let damageType = damageCode.includes('P') ? 'physical' : 'stun';\r\n        let damageAmount = parseInt(damageCode.replace(damageType[0].toUpperCase(), ''));\r\n        let damageAp = ImportHelper.IntValue(jsonData, 'ap', 0);\r\n\r\n        const partialDamageData = {\r\n            type: {\r\n                base: damageType as DamageType,\r\n                value: damageType as DamageType,\r\n            },\r\n            base: damageAmount,\r\n            value: damageAmount,\r\n            ap: {\r\n                base: damageAp,\r\n                value: damageAp,\r\n                mod: []\r\n            }\r\n        }\r\n        return DefaultValues.damageData(partialDamageData);\r\n    }\r\n\r\n    protected GetAmmo(weaponJson: object) {\r\n        let jsonAmmo = ImportHelper.StringValue(weaponJson, 'ammo');\r\n        let match = jsonAmmo.match(/([0-9]+)/g)?.[0];\r\n        return match !== undefined ? parseInt(match) : 0;\r\n    }\r\n\r\n    Parse(jsonData: object, data: Weapon, jsonTranslation?: object): Weapon {\r\n        data = super.Parse(jsonData, data, jsonTranslation);\r\n\r\n        data.data.range.rc.base = ImportHelper.IntValue(jsonData, 'rc');\r\n        data.data.range.rc.value = ImportHelper.IntValue(jsonData, 'rc');\r\n\r\n        if (jsonData.hasOwnProperty('range')) {\r\n            data.data.range.ranges = Constants.WEAPON_RANGES[ImportHelper.StringValue(jsonData, 'range')];\r\n        } else {\r\n            data.data.range.ranges = Constants.WEAPON_RANGES[ImportHelper.StringValue(jsonData, 'category')];\r\n        }\r\n\r\n        data.data.ammo.current.value = this.GetAmmo(jsonData);\r\n        data.data.ammo.current.max = this.GetAmmo(jsonData);\r\n\r\n        data.data.range.modes.single_shot = ImportHelper.StringValue(jsonData, 'mode').includes('SS');\r\n        data.data.range.modes.semi_auto = ImportHelper.StringValue(jsonData, 'mode').includes('SA');\r\n        data.data.range.modes.burst_fire = ImportHelper.StringValue(jsonData, 'mode').includes('BF');\r\n        data.data.range.modes.full_auto = ImportHelper.StringValue(jsonData, 'mode').includes('FA');\r\n\r\n        return data;\r\n    }\r\n}\r\n","import { ImportHelper } from '../../helper/ImportHelper';\r\nimport { WeaponParserBase } from './WeaponParserBase';\r\nimport { Constants } from '../../importer/Constants';\r\nimport BlastData = Shadowrun.BlastData;\r\nimport ActorAttribute = Shadowrun.ActorAttribute;\r\nimport DamageData = Shadowrun.DamageData;\r\nimport DamageType = Shadowrun.DamageType;\r\nimport Weapon = Shadowrun.Weapon;\r\nimport {DefaultValues} from \"../../../dataTemplates\";\r\n\r\nexport class ThrownParser extends WeaponParserBase {\r\n    public GetDamage(jsonData: object): DamageData {\r\n        let jsonDamage = ImportHelper.StringValue(jsonData, 'damage');\r\n\r\n        let damageAmount = 0;\r\n        let damageType = 'physical';\r\n        let damageAttribute = '';\r\n\r\n        //STR scaling weapons like the boomerang\r\n        if (jsonDamage.includes('STR')) {\r\n            damageAttribute = 'strength';\r\n\r\n            let damageMatch = jsonDamage.match(/((STR)([+-])[0-9]\\)[PS])/g)?.[0];\r\n            if (damageMatch !== undefined) {\r\n                let amountMatch = damageMatch.match(/-?[0-9]+/g)?.[0];\r\n                damageAmount = amountMatch !== undefined ? parseInt(amountMatch) : 0;\r\n            }\r\n        } else {\r\n            let damageMatch = jsonDamage.match(/([0-9]+[PS])/g)?.[0];\r\n\r\n            if (damageMatch !== undefined) {\r\n                let amountMatch = damageMatch.match(/[0-9]+/g)?.[0];\r\n                if (amountMatch !== undefined) {\r\n                    damageAmount = parseInt(amountMatch);\r\n                }\r\n            } else {\r\n                const partialDamageData = {\r\n                    type: {\r\n                        base: 'physical' as DamageType,\r\n                        value: 'physical' as DamageType\r\n                    }\r\n                }\r\n                return DefaultValues.damageData(partialDamageData);\r\n            }\r\n        }\r\n        damageType = jsonDamage.includes('P') ? 'physical' : 'stun';\r\n\r\n        let damageAp = ImportHelper.IntValue(jsonData, 'ap', 0);\r\n\r\n        const partialDamageData = {\r\n            type: {\r\n                base: damageType as DamageType,\r\n                value: damageType as DamageType,\r\n            },\r\n            base: damageAmount,\r\n            value: damageAmount,\r\n            ap: {\r\n                base: damageAp,\r\n                value: damageAp,\r\n                mod: [],\r\n            },\r\n            attribute: damageAttribute as ActorAttribute,\r\n        }\r\n        return DefaultValues.damageData(partialDamageData);\r\n    }\r\n\r\n    public GetBlast(jsonData: object, data: Weapon): BlastData {\r\n        let blastData: BlastData = {\r\n            radius: 0,\r\n            dropoff: 0,\r\n        };\r\n\r\n        let blastCode = ImportHelper.StringValue(jsonData, 'damage');\r\n\r\n        let radiusMatch = blastCode.match(/([0-9]+m)/)?.[0];\r\n        if (radiusMatch !== undefined) {\r\n            radiusMatch = radiusMatch.match(/[0-9]+/)?.[0];\r\n            if (radiusMatch !== undefined) {\r\n                blastData.radius = parseInt(radiusMatch);\r\n            }\r\n        }\r\n\r\n        let dropoffMatch = blastCode.match(/(-[0-9]+\\/m)/)?.[0];\r\n        if (dropoffMatch !== undefined) {\r\n            dropoffMatch = dropoffMatch.match(/-[0-9]+/)?.[0];\r\n            if (dropoffMatch !== undefined) {\r\n                blastData.dropoff = parseInt(dropoffMatch);\r\n            }\r\n        }\r\n\r\n        if (blastData.dropoff && !blastData.radius) {\r\n            blastData.radius = -(data.data.action.damage.base / blastData.dropoff);\r\n        }\r\n\r\n        return blastData;\r\n    }\r\n\r\n    Parse(jsonData: object, data: Weapon, jsonTranslation?: object): Weapon {\r\n        data = super.Parse(jsonData, data, jsonTranslation);\r\n\r\n        if (jsonData.hasOwnProperty('range')) {\r\n            data.data.thrown.ranges = Constants.WEAPON_RANGES[ImportHelper.StringValue(jsonData, 'range')];\r\n        } else {\r\n            data.data.thrown.ranges = Constants.WEAPON_RANGES[ImportHelper.StringValue(jsonData, 'category')];\r\n        }\r\n\r\n        data.data.thrown.blast = this.GetBlast(jsonData, data);\r\n\r\n        return data;\r\n    }\r\n}\r\n","import { ImportHelper } from '../../helper/ImportHelper';\r\nimport { Constants } from '../../importer/Constants';\r\nimport DamageData = Shadowrun.DamageData;\r\nimport Weapon = Shadowrun.Weapon;\r\nimport WeaponCategory = Shadowrun.WeaponCategory;\r\nimport SkillName = Shadowrun.SkillName;\r\nimport { TechnologyItemParserBase } from '../item/TechnologyItemParserBase';\r\n\r\nexport abstract class WeaponParserBase extends TechnologyItemParserBase<Weapon> {\r\n    public abstract GetDamage(jsonData: object): DamageData;\r\n\r\n    protected GetSkill(weaponJson: object): SkillName {\r\n        if (weaponJson.hasOwnProperty('useskill')) {\r\n            let jsonSkill = ImportHelper.StringValue(weaponJson, 'useskill');\r\n            if (Constants.MAP_CATEGORY_TO_SKILL.hasOwnProperty(jsonSkill)) {\r\n                return Constants.MAP_CATEGORY_TO_SKILL[jsonSkill];\r\n            }\r\n            return jsonSkill.replace(/[\\s\\-]/g, '_').toLowerCase();\r\n        } else {\r\n            let category = ImportHelper.StringValue(weaponJson, 'category');\r\n            if (Constants.MAP_CATEGORY_TO_SKILL.hasOwnProperty(category)) {\r\n                return Constants.MAP_CATEGORY_TO_SKILL[category];\r\n            }\r\n\r\n            let type = ImportHelper.StringValue(weaponJson, 'type').toLowerCase();\r\n            return type === 'ranged' ? 'exotic_range' : 'exotic_melee';\r\n        }\r\n    }\r\n\r\n    public static GetWeaponType(weaponJson: object): WeaponCategory {\r\n        let type = ImportHelper.StringValue(weaponJson, 'type');\r\n        //melee is the least specific, all melee entries are accurate\r\n        if (type === 'Melee') {\r\n            return 'melee';\r\n        } else {\r\n            // skill takes priorities over category\r\n            if (weaponJson.hasOwnProperty('useskill')) {\r\n                let skill = ImportHelper.StringValue(weaponJson, 'useskill');\r\n                if (skill === 'Throwing Weapons') return 'thrown';\r\n            }\r\n\r\n            // category is the fallback\r\n            let category = ImportHelper.StringValue(weaponJson, 'category');\r\n            if (category === 'Throwing Weapons') return 'thrown';\r\n            // ranged is everything else\r\n            return 'range';\r\n        }\r\n    }\r\n\r\n    public Parse(jsonData: object, data: Weapon, jsonTranslation?: object): Weapon {\r\n        data = super.Parse(jsonData, data, jsonTranslation);\r\n\r\n        let category = ImportHelper.StringValue(jsonData, 'category');\r\n        // A single item does not meet normal rules, thanks Chummer!\r\n        // TODO: Check these rules after localization using a generic, non-english approach.\r\n        if (category === 'Hold-outs') {\r\n            category = 'Holdouts';\r\n        }\r\n\r\n        data.data.category = WeaponParserBase.GetWeaponType(jsonData);\r\n        data.data.subcategory = category.toLowerCase();\r\n\r\n        data.data.action.skill = this.GetSkill(jsonData);\r\n        data.data.action.damage = this.GetDamage(jsonData);\r\n\r\n        data.data.action.limit.value = ImportHelper.IntValue(jsonData, 'accuracy');\r\n        data.data.action.limit.base = ImportHelper.IntValue(jsonData, 'accuracy');\r\n\r\n        data.data.technology.conceal.base = ImportHelper.IntValue(jsonData, 'conceal');\r\n\r\n        return data;\r\n    }\r\n}\r\n","import { Helpers } from '../helpers';\r\nimport DeviceData = Shadowrun.DeviceData;\r\nimport { SR5Item } from './SR5Item';\r\nimport AmmoData = Shadowrun.AmmoData;\r\n\r\nexport const ChatData = {\r\n    action: (data, labels, props) => {\r\n        if (data.action) {\r\n            const labelStringList: string[] = [];\r\n            if (data.action.skill) {\r\n                labelStringList.push(Helpers.label(data.action.skill));\r\n                labelStringList.push(Helpers.label(data.action.attribute));\r\n            } else if (data.action.attribute2) {\r\n                labelStringList.push(Helpers.label(data.action.attribute));\r\n                labelStringList.push(Helpers.label(data.action.attribute2));\r\n            } else if (data.action.attribute) {\r\n                labelStringList.push(Helpers.label(data.action.attribute));\r\n            }\r\n            if (data.action.mod) {\r\n                labelStringList.push(`${game.i18n.localize('SR5.ItemMod')} (${data.action.mod})`);\r\n                // TODO when all mods are modlists\r\n                // Object.entries(data.action.mod).forEach(([key, value]) =>\r\n                //     labelStringList.push(`${game.i18n.localize(key)} (${value})`)\r\n                // );\r\n            }\r\n            if (labelStringList.length) {\r\n                labels.roll = labelStringList.join(' + ');\r\n            }\r\n\r\n            if (data.action.opposed.type) {\r\n                const { opposed } = data.action;\r\n                if (opposed.type !== 'custom') labels.opposedRoll = `vs. ${Helpers.label(opposed.type)}`;\r\n                else if (opposed.skill) labels.opposedRoll = `vs. ${Helpers.label(opposed.skill)}+${Helpers.label(opposed.attribute)}`;\r\n                else if (opposed.attribute2) labels.opposedRoll = `vs. ${Helpers.label(opposed.attribute)}+${Helpers.label(opposed.attribute2)}`;\r\n                else if (opposed.attribute) labels.opposedRoll = `vs. ${Helpers.label(opposed.attribute)}`;\r\n            }\r\n\r\n            // setup action props\r\n            // go in order of \"Limit/Accuracy\" \"Damage\" \"AP\"\r\n            // don't add action type if set to 'varies' or 'none' as that's pretty much useless info\r\n            if (data.action.type !== '' && data.action.type !== 'varies' && data.action.type !== 'none') {\r\n                props.push(`${Helpers.label(data.action.type)} Action`);\r\n            }\r\n            if (data.action.limit) {\r\n                const { limit } = data.action;\r\n                const attribute = limit.attribute ? `${game.i18n.localize(CONFIG.SR5.limits[limit.attribute])}` : '';\r\n                const limitVal = limit.value ? limit.value : '';\r\n                let limitStr = '';\r\n                if (attribute) {\r\n                    limitStr += attribute;\r\n                }\r\n                if (limitVal) {\r\n                    if (attribute) {\r\n                        limitStr += ' + ';\r\n                    }\r\n                    limitStr += limitVal;\r\n                }\r\n\r\n                if (limitStr) {\r\n                    props.push(`Limit ${limitStr}`);\r\n                }\r\n            }\r\n            if (data.action.damage.type.value) {\r\n                const { damage } = data.action;\r\n                let damageString = '';\r\n                let elementString = '';\r\n                const attribute = damage.attribute ? `${game.i18n.localize(CONFIG.SR5.attributes[damage.attribute])} + ` : '';\r\n                if (damage.value || attribute) {\r\n                    const type = damage.type.value ? damage.type.value.toUpperCase().charAt(0) : '';\r\n                    damageString = `DV ${attribute}${damage.value}${type}`;\r\n                }\r\n                if (damage.element.value) {\r\n                    // if we have a damage value and are electric, follow the convention of (e) after\r\n                    if (damage.value) {\r\n                        if (damage.element.value === 'electricity') {\r\n                            damageString += ' (e)';\r\n                        } else {\r\n                            elementString = Helpers.label(damage.element.value);\r\n                        }\r\n                    } else {\r\n                        elementString = Helpers.label(damage.element.value);\r\n                    }\r\n                }\r\n                if (damageString) props.push(damageString);\r\n                if (elementString) props.push(elementString);\r\n                if (damage.ap && damage.ap.value) props.push(`AP ${damage.ap.value}`);\r\n            }\r\n        }\r\n    },\r\n    sin: (data, labels, props) => {\r\n        props.push(`Rating ${data.technology.rating}`);\r\n        data.licenses.forEach((license) => {\r\n            props.push(`${license.name} R${license.rtg}`);\r\n        });\r\n    },\r\n\r\n    contact: (data, labels, props) => {\r\n        props.push(data.type);\r\n        props.push(`${game.i18n.localize('SR5.Connection')} ${data.connection}`);\r\n        props.push(`${game.i18n.localize('SR5.Loyalty')} ${data.loyalty}`);\r\n        if (data.blackmail) {\r\n            props.push(`${game.i18n.localize('SR5.Blackmail')}`);\r\n        }\r\n        if (data.family) {\r\n            props.push(game.i18n.localize('SR5.Family'));\r\n        }\r\n    },\r\n\r\n    lifestyle: (data, labels, props) => {\r\n        props.push(Helpers.label(data.type));\r\n        if (data.cost) props.push(`¥${data.cost}`);\r\n        if (data.comforts) props.push(`Comforts ${data.comforts}`);\r\n        if (data.security) props.push(`Security ${data.security}`);\r\n        if (data.neighborhood) props.push(`Neighborhood ${data.neighborhood}`);\r\n        if (data.guests) props.push(`Guests ${data.guests}`);\r\n    },\r\n\r\n    adept_power: (data, labels, props) => {\r\n        ChatData.action(data, labels, props);\r\n        props.push(`PP ${data.pp}`);\r\n        props.push(Helpers.label(data.type));\r\n    },\r\n\r\n    armor: (data, labels, props) => {\r\n        if (data.armor) {\r\n            if (data.armor.value) props.push(`Armor ${data.armor.mod ? '+' : ''}${data.armor.value}`);\r\n            if (data.armor.acid) props.push(`Acid ${data.armor.acid}`);\r\n            if (data.armor.cold) props.push(`Cold ${data.armor.cold}`);\r\n            if (data.armor.fire) props.push(`Fire ${data.armor.fire}`);\r\n            if (data.armor.electricity) props.push(`Electricity ${data.armor.electricity}`);\r\n            if (data.armor.radiation) props.push(`Radiation ${data.armor.radiation}`);\r\n        }\r\n    },\r\n\r\n    ammo: (data, labels, props) => {\r\n        if (data.damageType) props.push(`${game.i18n.localize(\"SR5.DamageType\")} ${data.damageType}`);\r\n        if (data.damage) props.push(`${game.i18n.localize(\"SR5.DamageValue\")} ${data.damage}`);\r\n        if (data.element) props.push(`${game.i18n.localize(\"SR5.Element\")} ${data.element}`);\r\n        if (data.ap) props.push(`${game.i18n.localize(\"SR5.AP\")} ${data.ap}`);\r\n        if (data.blast.radius) props.push(`${game.i18n.localize('SR5.BlastRadius')} ${data.blast.radius}m`);\r\n        if (data.blast.dropoff) props.push(`${game.i18n.localize('SR5.Dropoff')} ${data.blast.dropoff}/m`);\r\n    },\r\n\r\n    program: (data, labels, props) => {\r\n        props.push(game.i18n.localize(CONFIG.SR5.programTypes[data.type]));\r\n    },\r\n\r\n    complex_form: (data, labels, props) => {\r\n        ChatData.action(data, labels, props);\r\n        props.push(Helpers.label(data.target), Helpers.label(data.duration));\r\n        const { fade } = data;\r\n        if (fade > 0) props.push(`Fade L+${fade}`);\r\n        else if (fade < 0) props.push(`Fade L${fade}`);\r\n        else props.push('Fade L');\r\n    },\r\n\r\n    cyberware: (data, labels, props) => {\r\n        ChatData.action(data, labels, props);\r\n        ChatData.armor(data, labels, props);\r\n        if (data.essence) props.push(`Ess ${data.essence}`);\r\n    },\r\n\r\n    bioware: (data, labels, props) => {\r\n        ChatData.action(data, labels, props);\r\n        ChatData.armor(data, labels, props);\r\n        if (data.essence) props.push(`Ess ${data.essence}`);\r\n    },\r\n\r\n    device: (data: DeviceData, labels, props) => {\r\n        if (data.technology && data.technology.rating) props.push(`Rating ${data.technology.rating}`);\r\n        if (data.category === 'cyberdeck') {\r\n            for (const attN of Object.values(data.atts)) {\r\n                props.push(`${Helpers.label(attN.att)} ${attN.value}`);\r\n            }\r\n        }\r\n    },\r\n\r\n    equipment: (data, labels, props) => {\r\n        if (data.technology && data.technology.rating) props.push(`Rating ${data.technology.rating}`);\r\n    },\r\n\r\n    quality: (data, labels, props) => {\r\n        ChatData.action(data, labels, props);\r\n        props.push(Helpers.label(data.type));\r\n    },\r\n\r\n    sprite_power: (data, labels, props) => {\r\n        // add action data\r\n        ChatData.action(data, labels, props);\r\n    },\r\n\r\n    critter_power: (data, labels, props) => {\r\n        // power type\r\n        props.push(game.i18n.localize(CONFIG.SR5.critterPower.types[data.powerType]));\r\n        // duration\r\n        props.push(game.i18n.localize(CONFIG.SR5.critterPower.durations[data.duration]));\r\n        // range\r\n        props.push(game.i18n.localize(CONFIG.SR5.critterPower.ranges[data.range]));\r\n\r\n        // add action data\r\n        ChatData.action(data, labels, props);\r\n    },\r\n\r\n    // add properties for spell data, follow order in book\r\n    spell: (data, labels, props) => {\r\n        // first category and type\r\n        props.push(Helpers.label(data.category), Helpers.label(data.type));\r\n\r\n        // add subtype tags\r\n        if (data.category === 'combat') {\r\n            props.push(Helpers.label(data.combat.type));\r\n        } else if (data.category === 'health') {\r\n        } else if (data.category === 'illusion') {\r\n            props.push(data.illusion.type);\r\n            props.push(data.illusion.sense);\r\n        } else if (data.category === 'manipulation') {\r\n            if (data.manipulation.damaging) props.push('Damaging');\r\n            if (data.manipulation.mental) props.push('Mental');\r\n            if (data.manipulation.environmental) props.push('Environmental');\r\n            if (data.manipulation.physical) props.push('Physical');\r\n        } else if (data.category === 'detection') {\r\n            props.push(data.illusion.type);\r\n            props.push(data.illusion.passive ? 'Passive' : 'Active');\r\n            if (data.illusion.extended) props.push('Extended');\r\n        }\r\n        // add range\r\n        props.push(Helpers.label(data.range));\r\n\r\n        // add action data\r\n        ChatData.action(data, labels, props);\r\n\r\n        // add duration data\r\n        props.push(Helpers.label(data.duration));\r\n\r\n        // add drain data\r\n        const { drain } = data;\r\n        if (drain > 0) props.push(`Drain F+${drain}`);\r\n        else if (drain < 0) props.push(`Drain F${drain}`);\r\n        else props.push('Drain F');\r\n\r\n        labels.roll = 'Cast';\r\n    },\r\n\r\n    weapon: (data, labels, props, item: SR5Item) => {\r\n        ChatData.action(data, labels, props);\r\n        for (let i = 0; i < props.length; i++) {\r\n            const prop = props[i];\r\n            if (prop.includes('Limit')) {\r\n                props[i] = prop.replace('Limit', 'Accuracy');\r\n            }\r\n        }\r\n\r\n        const equippedAmmo = item.getEquippedAmmo();\r\n        if (equippedAmmo && data.ammo && data.ammo.current?.max) {\r\n            if (equippedAmmo) {\r\n                const ammoData = equippedAmmo.data.data as AmmoData;\r\n                const { current, spare_clips } = data.ammo;\r\n                if (equippedAmmo.name) props.push(`${equippedAmmo.name} (${current.value}/${current.max})`);\r\n                if (ammoData.blast.radius) props.push(`${game.i18n.localize('SR5.BlastRadius')} ${ammoData.blast.radius}m`);\r\n                if (ammoData.blast.dropoff) props.push(`${game.i18n.localize('SR5.Dropoff')} $ammoData.blast.dropoff}/m`);\r\n                if (spare_clips && spare_clips.max) props.push(`${game.i18n.localize('SR5.SpareClips')} (${spare_clips.value}/${spare_clips.max})`);\r\n            }\r\n        }\r\n\r\n        if (data.technology?.conceal?.value) {\r\n            props.push(`${game.i18n.localize('SR5.Conceal')} ${data.technology.conceal.value}`);\r\n        }\r\n\r\n        if (data.category === 'range') {\r\n            if (data.range.rc) {\r\n                let rcString = `${game.i18n.localize('SR5.RecoilCompensation')} ${data.range.rc.value}`;\r\n                if (item?.actor) {\r\n                    rcString += ` (${game.i18n.localize('SR5.Total')} ${item.actor.getRecoilCompensation()})`;\r\n                }\r\n                props.push(rcString);\r\n            }\r\n            if (data.range.modes) {\r\n                const newModes: string[] = [];\r\n                const { modes } = data.range;\r\n                if (modes.single_shot) newModes.push('SR5.WeaponModeSingleShotShort');\r\n                if (modes.semi_auto) newModes.push('SR5.WeaponModeSemiAutoShort');\r\n                if (modes.burst_fire) newModes.push('SR5.WeaponModeBurstFireShort');\r\n                if (modes.full_auto) newModes.push('SR5.WeaponModeFullAutoShort');\r\n                props.push(newModes.map((m) => game.i18n.localize(m)).join('/'));\r\n            }\r\n            if (data.range.ranges) props.push(Array.from(Object.values(data.range.ranges)).join('/'));\r\n        } else if (data.category === 'melee') {\r\n            if (data.melee.reach) {\r\n                const reachString = `${game.i18n.localize('SR5.Reach')} ${data.melee.reach}`;\r\n                // find accuracy in props and insert ourselves after it\r\n                const accIndex = props.findIndex((p) => p.includes('Accuracy'));\r\n                if (accIndex > -1) {\r\n                    props.splice(accIndex + 1, 0, reachString);\r\n                } else {\r\n                    props.push(reachString);\r\n                }\r\n            }\r\n        } else if (data.category === 'thrown') {\r\n            const { blast } = data.thrown;\r\n            if (blast?.radius) props.push(`${game.i18n.localize('SR5.BlastRadius')} ${blast.radius}m`);\r\n            if (blast?.dropoff) props.push(`${game.i18n.localize('SR5.Dropoff')} ${blast.dropoff}/m`);\r\n\r\n            if (data.thrown.ranges) {\r\n                const mult = data.thrown.ranges.attribute && item?.actor ? item.actor.data.data.attributes[data.thrown.ranges.attribute].value : 1;\r\n                const ranges = [data.thrown.ranges.short, data.thrown.ranges.medium, data.thrown.ranges.long, data.thrown.ranges.extreme];\r\n                props.push(ranges.map((v) => v * mult).join('/'));\r\n            }\r\n        }\r\n\r\n        const equippedMods = item.getEquippedMods();\r\n        if (equippedMods) {\r\n            equippedMods.forEach((mod) => {\r\n                props.push(`${mod.name}`);\r\n            });\r\n        }\r\n    },\r\n};\r\n","/**\r\n * Handle all things related to the action template (template.json)\r\n */\r\nimport {SR5Actor} from \"../actor/SR5Actor\";\r\nimport DamageData = Shadowrun.DamageData;\r\nimport {Helpers} from \"../helpers\";\r\nimport FormulaOperator = Shadowrun.FormulaOperator;\r\n\r\nexport class ItemAction {\r\n    static calcDamage(damage: DamageData, actor: SR5Actor): DamageData {\r\n        // Avoid manipulation on original data, which might come from database values.\r\n        damage = duplicate(damage);\r\n\r\n        const attribute = actor.findAttribute(damage.attribute);\r\n\r\n        if (!attribute) return damage;\r\n\r\n        damage.base = ItemAction._applyFormulaOperatorToValues(damage.base, attribute.value, damage.base_formula_operator);\r\n\r\n        // Rather reduce damage to the next full decimal.\r\n        damage.base = Helpers.applyValueRange(Math.floor(damage.base), {min: 0});\r\n        damage.value = damage.base;\r\n\r\n        return damage;\r\n    }\r\n\r\n    /** Calculate the result of operating on two values with basic formula operators.\r\n     *\r\n     * @param base The basic value operated opon.\r\n     * @param value The value doing the operation with. If order is important, this value will be after the operator.\r\n     * @param operator A formula operator (basic) to be used within a simple calculation.\r\n     */\r\n    static _applyFormulaOperatorToValues(base: number, value: number, operator:FormulaOperator): number {\r\n        switch (operator) {\r\n            case \"add\":\r\n                return base + value;\r\n            case \"subtract\":\r\n                return base - value;\r\n            case \"multiply\":\r\n                return base * value;\r\n            case \"divide\":\r\n                return base / value;\r\n            default:\r\n                console.error(`Unsupported base damage formula operator: '${operator}' used. Falling back to 'add'.`);\r\n                return base + value;\r\n        }\r\n    }\r\n}","import {Helpers} from '../helpers';\r\nimport {SR5Actor} from '../actor/SR5Actor';\r\nimport {ActionTestData, ShadowrunItemDialog} from '../apps/dialogs/ShadowrunItemDialog';\r\nimport {ChatData} from './ChatData';\r\nimport {ShadowrunRoll, ShadowrunRoller, Test} from '../rolls/ShadowrunRoller';\r\nimport {createItemChatMessage} from '../chat';\r\nimport {DEFAULT_ROLL_NAME, FLAGS, SYSTEM_NAME} from '../constants';\r\nimport {SR5ItemDataWrapper} from './SR5ItemDataWrapper';\r\nimport {PartsList} from '../parts/PartsList';\r\nimport ModList = Shadowrun.ModList;\r\nimport AttackData = Shadowrun.AttackData;\r\nimport AttributeField = Shadowrun.AttributeField;\r\nimport SkillField = Shadowrun.SkillField;\r\nimport LimitField = Shadowrun.LimitField;\r\nimport FireModeData = Shadowrun.FireModeData;\r\nimport SpellForceData = Shadowrun.SpellForceData;\r\nimport ComplexFormLevelData = Shadowrun.ComplexFormLevelData;\r\nimport FireRangeData = Shadowrun.FireRangeData;\r\nimport BlastData = Shadowrun.BlastData;\r\nimport ConditionData = Shadowrun.ConditionData;\r\nimport SR5ItemType = Shadowrun.SR5ItemType;\r\nimport ActionRollData = Shadowrun.ActionRollData;\r\nimport DamageData = Shadowrun.DamageData;\r\nimport DefenseRollOptions = Shadowrun.DefenseRollOptions;\r\nimport SpellDefenseOptions = Shadowrun.SpellDefenseOptions;\r\nimport SpellData = Shadowrun.SpellData;\r\nimport WeaponData = Shadowrun.WeaponData;\r\nimport AmmoData = Shadowrun.AmmoData;\r\nimport TechnologyPartData = Shadowrun.TechnologyPartData;\r\nimport Sin = Shadowrun.Sin;\r\nimport Weapon = Shadowrun.Weapon;\r\nimport Ammo = Shadowrun.Ammo;\r\nimport TechnologyData = Shadowrun.TechnologyData;\r\nimport RangeWeaponData = Shadowrun.RangeWeaponData;\r\nimport SpellRange = Shadowrun.SpellRange;\r\nimport CritterPowerRange = Shadowrun.CritterPowerRange;\r\nimport AdeptPower = Shadowrun.AdeptPower;\r\nimport Modification = Shadowrun.Modification;\r\nimport Action = Shadowrun.Action;\r\nimport Armor = Shadowrun.Armor;\r\nimport ComplexForm = Shadowrun.ComplexForm;\r\nimport Contact = Shadowrun.Contact;\r\nimport CritterPower = Shadowrun.CritterPower;\r\nimport Cyberware = Shadowrun.Cyberware;\r\nimport Device = Shadowrun.Device;\r\nimport Equipment = Shadowrun.Equipment;\r\nimport Lifestyle = Shadowrun.Lifestyle;\r\nimport Program = Shadowrun.Program;\r\nimport Quality = Shadowrun.Quality;\r\nimport Spell = Shadowrun.Spell;\r\nimport SpritePower = Shadowrun.SpritePower;\r\nimport {ItemAction} from \"./ItemAction\";\r\nimport {SkillFlow} from \"../actor/SkillFlow\";\r\n\r\nexport class SR5Item extends Item {\r\n    // NOTE: In contrast to SR5Actor we can only type Item.data as the typing structure for ItemData doesn't have\r\n    //       monolithic Item.data.data typing (SR5ActorData) but only one for each Item type. Therefore we can't\r\n    //       do extends Item<SR5ItemData> as we can with the SR5Actor class.\r\n    data: SR5ItemType;\r\n    items: SR5Item[];\r\n\r\n    labels: {} = {};\r\n\r\n\r\n    get actor(): SR5Actor {\r\n        return super.actor as SR5Actor;\r\n    }\r\n\r\n    private get wrapper(): SR5ItemDataWrapper {\r\n        // we need to cast here to unknown first to make ts happy\r\n        return new SR5ItemDataWrapper((this.data as unknown) as SR5ItemType);\r\n    }\r\n\r\n    // Flag Functions\r\n    getLastFireMode(): FireModeData {\r\n        return this.getFlag(SYSTEM_NAME, FLAGS.LastFireMode) || { value: 0 };\r\n    }\r\n    async setLastFireMode(fireMode: FireModeData) {\r\n        return this.setFlag(SYSTEM_NAME, FLAGS.LastFireMode, fireMode);\r\n    }\r\n    getLastSpellForce(): SpellForceData {\r\n        return this.getFlag(SYSTEM_NAME, FLAGS.LastSpellForce) || { value: 0 };\r\n    }\r\n    async setLastSpellForce(force: SpellForceData) {\r\n        return this.setFlag(SYSTEM_NAME, FLAGS.LastSpellForce, force);\r\n    }\r\n    getLastComplexFormLevel(): ComplexFormLevelData {\r\n        return this.getFlag(SYSTEM_NAME, FLAGS.LastComplexFormLevel) || { value: 0 };\r\n    }\r\n    async setLastComplexFormLevel(level: ComplexFormLevelData) {\r\n        return this.setFlag(SYSTEM_NAME, FLAGS.LastComplexFormLevel, level);\r\n    }\r\n    getLastFireRangeMod(): FireRangeData {\r\n        return this.getFlag(SYSTEM_NAME, FLAGS.LastFireRange) || { value: 0 };\r\n    }\r\n    async setLastFireRangeMod(environmentalMod: FireRangeData) {\r\n        return this.setFlag(SYSTEM_NAME, FLAGS.LastFireRange, environmentalMod);\r\n    }\r\n\r\n    /**\r\n     * Return an Array of the Embedded Item Data\r\n     * TODO properly type this\r\n     */\r\n    getEmbeddedItems(): any[] {\r\n        let items = this.getFlag(SYSTEM_NAME, FLAGS.EmbeddedItems);\r\n\r\n        items = items ? items : [];\r\n\r\n        // moved this \"hotfix\" to here so that everywhere that accesses the flag just gets an array -- Shawn\r\n        if (items && !Array.isArray(items)) {\r\n            items = Helpers.convertIndexedObjectToArray(items);\r\n        }\r\n\r\n        // Manually map wrongly converted array fields...\r\n        items = items.map(item => {\r\n            if (item.effects && !Array.isArray(item.effects)) {\r\n                item.effects = Helpers.convertIndexedObjectToArray(item.effects);\r\n            }\r\n            return item;\r\n        });\r\n\r\n        return items;\r\n    }\r\n\r\n    /**\r\n     * Set the embedded item data\r\n     * @param items\r\n     */\r\n    async setEmbeddedItems(items: any[]) {\r\n        // clear the flag first to remove the previous items - if we don't do this then it doesn't actually \"delete\" any items\r\n        // await this.unsetFlag(SYSTEM_NAME, 'embeddedItems');\r\n        await this.setFlag(SYSTEM_NAME, FLAGS.EmbeddedItems, items);\r\n    }\r\n\r\n    async clearEmbeddedItems() {\r\n        await this.unsetFlag(SYSTEM_NAME, FLAGS.EmbeddedItems);\r\n    }\r\n\r\n    /** Overwrite to allow for options param to be skipped.\r\n     */\r\n    async update(data, options?): Promise<this> {\r\n        return super.update(data, options);\r\n    }\r\n\r\n    get hasOpposedRoll(): boolean {\r\n        const action = this.getAction();\r\n        if (!action) return false;\r\n        return !!action.opposed.type;\r\n    }\r\n\r\n    get hasRoll(): boolean {\r\n        const action = this.getAction();\r\n        return !!(action && action.type !== '' && (action.skill || action.attribute || action.attribute2 || action.dice_pool_mod));\r\n    }\r\n    get hasTemplate(): boolean {\r\n        return this.isAreaOfEffect();\r\n    }\r\n\r\n    /**\r\n     * PREPARE DATA CANNOT PULL FROM this.actor at ALL\r\n     * - as of foundry v0.7.4, actor data isn't prepared by the time we prepare items\r\n     * - this caused issues with Actions that have a Limit or Damage attribute and so those were moved\r\n     */\r\n    prepareData() {\r\n        super.prepareData();\r\n\r\n        // Description labels might have changed since last data prep.\r\n        this.labels = {};\r\n\r\n        if (this.data.type === 'sin') {\r\n            if (typeof this.data.data.licenses === 'object') {\r\n                //@ts-ignore // taMiF: This seems to be a hacky solution to some internal or Foundry issue with reading\r\n                //                      a object/HashMap when an array/iterable was expected\r\n                this.data.data.licenses = Object.values(this.data.data.licenses);\r\n            }\r\n        }\r\n        const equippedMods = this.getEquippedMods();\r\n        const equippedAmmo = this.getEquippedAmmo();\r\n\r\n        const technology = this.getTechnology();\r\n        if (technology) {\r\n            // taMiF: This migration code could be needed for items imported from an older compendium?\r\n            if (technology.condition_monitor === undefined) {\r\n                technology.condition_monitor = { value: 0, max: 0, label: '' };\r\n            }\r\n            // Rating might be a string.\r\n            const rating = typeof technology.rating === 'string' ? 0 : technology.rating;\r\n            technology.condition_monitor.max = 8 + Math.ceil(rating / 2);\r\n\r\n            // Calculate conceal data.\r\n            if (!technology.conceal) technology.conceal = {base: 0, value: 0, mod: []};\r\n\r\n            const concealParts = new PartsList<number>();\r\n            equippedMods.forEach((mod) => {\r\n                const technology = mod.getTechnology();\r\n\r\n                if (technology && technology.conceal.value) {\r\n                    concealParts.addUniquePart(mod.name, technology.conceal.value);\r\n                }\r\n            });\r\n\r\n            technology.conceal.mod = concealParts.list;\r\n            technology.conceal.value = Helpers.calcTotal(technology.conceal);\r\n        }\r\n\r\n        const action = this.getAction();\r\n        if (action) {\r\n            action.alt_mod = 0;\r\n            action.limit.mod = [];\r\n            action.damage.mod = [];\r\n            action.damage.ap.mod = [];\r\n            action.dice_pool_mod = [];\r\n\r\n            // @ts-ignore\r\n            // Due to faulty template value items without a set operator will have a operator literal instead since 0.7.10.\r\n            if (action.damage.base_formula_operator === '+') {\r\n                action.damage.base_formula_operator = 'add';\r\n            }\r\n\r\n            // handle overrides from mods\r\n            const limitParts = new PartsList(action.limit.mod);\r\n            const dpParts = new PartsList(action.dice_pool_mod);\r\n            equippedMods.forEach((mod) => {\r\n                const modification = mod.asModificationData();\r\n                if (!modification) return;\r\n\r\n                if (modification.data.accuracy) {\r\n                    limitParts.addUniquePart(mod.name, modification.data.accuracy);\r\n                }\r\n                if (modification.data.dice_pool) {\r\n                    dpParts.addUniquePart(mod.name, modification.data.dice_pool);\r\n                }\r\n            });\r\n\r\n\r\n\r\n            if (equippedAmmo) {\r\n                const ammoData = equippedAmmo.data.data as AmmoData;\r\n                // add mods to damage from ammo\r\n                action.damage.mod = PartsList.AddUniquePart(action.damage.mod, equippedAmmo.name, ammoData.damage);\r\n                // add mods to ap from ammo\r\n                action.damage.ap.mod = PartsList.AddUniquePart(action.damage.ap.mod, equippedAmmo.name, ammoData.ap);\r\n\r\n                // override element\r\n                if (ammoData.element) {\r\n                    action.damage.element.value = ammoData.element;\r\n                } else {\r\n                    action.damage.element.value = action.damage.element.base;\r\n                }\r\n\r\n                // override damage type\r\n                if (ammoData.damageType) {\r\n                    action.damage.type.value = ammoData.damageType;\r\n                } else {\r\n                    action.damage.type.value = action.damage.type.base;\r\n                }\r\n            } else {\r\n                // set value if we don't have item overrides\r\n                action.damage.element.value = action.damage.element.base;\r\n                action.damage.type.value = action.damage.type.base;\r\n            }\r\n\r\n            // once all damage mods have been accounted for, sum base and mod to value\r\n            action.damage.value = Helpers.calcTotal(action.damage);\r\n            action.damage.ap.value = Helpers.calcTotal(action.damage.ap);\r\n\r\n            action.limit.value = Helpers.calcTotal(action.limit);\r\n        }\r\n\r\n        const range = this.getWeaponRange();\r\n        if (range) {\r\n            if (range.rc) {\r\n                const rangeParts = new PartsList();\r\n                equippedMods.forEach((mod) => {\r\n                    //@ts-ignore // TypeScript doesn't like this.data.data Item.Data<DataType> possibly being all the things.\r\n                    if (mod.data.data.rc) rangeParts.addUniquePart(mod.name, mod.data.data.rc);\r\n                    // handle overrides from ammo\r\n                });\r\n                //@ts-ignore // TypeScript doesn't like this.data.data Item.Data<DataType> possibly being all the things.\r\n                range.rc.mod = rangeParts.list;\r\n                //@ts-ignore // TypeScript doesn't like this.data.data Item.Data<DataType> possibly being all the things.\r\n                if (range.rc) range.rc.value = Helpers.calcTotal(range.rc);\r\n            }\r\n        }\r\n\r\n        const adeptPower = this.asAdeptPowerData();\r\n        if (adeptPower) {\r\n            adeptPower.data.type = adeptPower.data.action.type ? 'active' : 'passive';\r\n        }\r\n    }\r\n\r\n    async postItemCard() {\r\n        const tests =  this.getActionTests();\r\n        const options = {\r\n            actor: this.actor,\r\n            description: this.getChatData(),\r\n            item: this,\r\n            previewTemplate: this.hasTemplate,\r\n            tests\r\n        };\r\n        return await createItemChatMessage(options);\r\n    }\r\n\r\n    async castAction(event?) {\r\n        if (!this.actor) return;\r\n\r\n        const dontRollTest = event?.shiftKey || !this.hasRoll;\r\n        if (dontRollTest) return await this.postItemCard();\r\n\r\n        const dialog = await ShadowrunItemDialog.create(this, event);\r\n        // Some items might not have an additional dialog.\r\n        if (!dialog) return await this.rollTest(event);\r\n\r\n        const actionTestData = await dialog.select();\r\n        if (dialog.canceled) return;\r\n\r\n        return await this.rollTest(event, actionTestData);\r\n}\r\n\r\n    getChatData(htmlOptions?) {\r\n        const data = duplicate(this.data.data);\r\n        const { labels } = this;\r\n        //@ts-ignore // This is a hacky monkey patch solution to add a property to the item data\r\n        //              that's not actually defined in any SR5Item typing.\r\n        if (!data.description) data.description = {};\r\n        // TextEditor.enrichHTML will return null as a string, making later handling difficult.\r\n        if (!data.description.value) data.description.value = '';\r\n\r\n        data.description.value = TextEditor.enrichHTML(data.description.value, htmlOptions);\r\n\r\n        const props = [];\r\n        const func = ChatData[this.data.type];\r\n        if (func) func(duplicate(data), labels, props, this);\r\n\r\n        //@ts-ignore // This is a hacky monkey patch solution to add a property to the item data\r\n        //              that's not actually defined in any SR5Item typing.\r\n        data.properties = props.filter((p) => !!p);\r\n\r\n        return data;\r\n    }\r\n\r\n    getActionTestName(): string {\r\n        const testName = this.getRollName();\r\n        return testName ? testName :  game.i18n.localize('SR5.Action');\r\n    }\r\n\r\n    getOpposedTestName(): string {\r\n        let name = '';\r\n        const action = this.getAction();\r\n        if (action && action.opposed.type) {\r\n            const { opposed } = action;\r\n            if (opposed.type !== 'custom') {\r\n                name = `${Helpers.label(opposed.type)}`;\r\n            } else if (opposed.skill) {\r\n                name = `${Helpers.label(opposed.skill)}+${Helpers.label(opposed.attribute)}`;\r\n            } else if (opposed.attribute2) {\r\n                name = `${Helpers.label(opposed.attribute)}+${Helpers.label(opposed.attribute2)}`;\r\n            } else if (opposed.attribute) {\r\n                name = `${Helpers.label(opposed.attribute)}`;\r\n            }\r\n        }\r\n\r\n        const mod = this.getOpposedTestModifier();\r\n        if (mod) name += ` ${mod}`;\r\n        return name;\r\n    }\r\n\r\n    getOpposedTestMod(): PartsList<number> {\r\n        const parts = new PartsList<number>();\r\n        if (this.hasDefenseTest()) {\r\n            if (this.isAreaOfEffect()) {\r\n                parts.addUniquePart('SR5.Aoe', -2);\r\n            }\r\n            if (this.isRangedWeapon()) {\r\n                const fireModeData = this.getLastFireMode();\r\n                if (fireModeData?.defense) {\r\n                    if (fireModeData.defense !== 'SR5.DuckOrCover') {\r\n                        const fireMode = +fireModeData.defense;\r\n                        parts.addUniquePart('SR5.FireMode', fireMode);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return parts;\r\n    }\r\n\r\n    getOpposedTestModifier(): string {\r\n        const testMod = this.getOpposedTestMod();\r\n        const total = testMod.total;\r\n        if (total) return `(${total})`;\r\n        else {\r\n            if (this.isRangedWeapon()) {\r\n                const fireModeData = this.getLastFireMode();\r\n                if (fireModeData?.defense) {\r\n                    if (fireModeData.defense === 'SR5.DuckOrCover') {\r\n                        return game.i18n.localize('SR5.DuckOrCover');\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return '';\r\n    }\r\n\r\n     getBlastData(actionTestData?: ActionTestData): BlastData | undefined {\r\n        if (this.isSpell() && this.isAreaOfEffect()) {\r\n            const data = this.data.data as SpellData;\r\n\r\n            // By default spell distance is equal to it's Force.\r\n            let distance = this.getLastSpellForce().value;\r\n\r\n            // Except for predefined user test selection.\r\n            if (actionTestData?.spell) {\r\n                distance = actionTestData.spell.force;\r\n            }\r\n\r\n            // Extended spells have a longer range.\r\n            // TODO: data.extended is not defined in typing. It only exists under data.detection or data.action\r\n            // @ts-ignore\r\n            if (data.extended) distance *= 10;\r\n            const dropoff = 0;\r\n\r\n            return {\r\n                radius: distance,\r\n                dropoff\r\n            }\r\n\r\n        } else if (this.isGrenade()) {\r\n            const data = this.data.data as WeaponData;\r\n\r\n            const distance = data.thrown.blast.radius;\r\n            const dropoff = data.thrown.blast.dropoff;\r\n\r\n            return {\r\n                radius: distance,\r\n                dropoff\r\n            }\r\n\r\n        } else if (this.hasExplosiveAmmo()) {\r\n            const ammo = this.getEquippedAmmo();\r\n            const ammoData = ammo.data as Ammo;\r\n            const distance = ammoData.data.blast.radius;\r\n            const dropoff = ammoData.data.blast.dropoff;\r\n\r\n            return {\r\n                radius: distance,\r\n                dropoff\r\n            };\r\n        }\r\n    }\r\n\r\n    getEquippedAmmo(): SR5Item {\r\n        const equippedAmmos = (this.items || []).filter((item) =>\r\n            item.isAmmo() &&\r\n            item.isEquipped());\r\n\r\n        // Cast Typing isn't a mistake, so long as isAmmo is filtered.\r\n        return equippedAmmos[0];\r\n    }\r\n\r\n    getEquippedMods(): SR5Item[] {\r\n        return (this.items || []).filter((item) =>\r\n            item.isWeaponModification() &&\r\n            item.isEquipped());\r\n    }\r\n\r\n    hasExplosiveAmmo(): boolean {\r\n        const ammo = this.getEquippedAmmo();\r\n        if (!ammo) return false;\r\n        const data = ammo.data.data as AmmoData;\r\n        return data.blast.radius > 0;\r\n    }\r\n\r\n    async equipWeaponMod(iid) {\r\n        const mod = this.getOwnedItem(iid);\r\n        if (mod) {\r\n            const dupData = duplicate(mod.data);\r\n            const data = dupData.data as TechnologyPartData;\r\n            data.technology.equipped = !data.technology.equipped;\r\n            await this.updateOwnedItem(dupData);\r\n        }\r\n    }\r\n\r\n    hasAmmo(): boolean {\r\n        return this.wrapper.hasAmmo();\r\n    }\r\n\r\n    async useAmmo(fireMode) {\r\n        const weapon = duplicate(this.asWeaponData());\r\n        if (weapon) {\r\n            const { ammo } = weapon.data;\r\n            ammo.current.value = Math.max(0, ammo.current.value - fireMode);\r\n\r\n            return await this.update(weapon);\r\n        }\r\n    }\r\n\r\n    async reloadAmmo() {\r\n        const data = duplicate(this.asWeaponData());\r\n\r\n        if (!data) return;\r\n\r\n        const { ammo } = data.data;\r\n        const diff = ammo.current.max - ammo.current.value;\r\n        ammo.current.value = ammo.current.max;\r\n\r\n        if (ammo.spare_clips) {\r\n            ammo.spare_clips.value = Math.max(0, ammo.spare_clips.value - 1);\r\n        }\r\n\r\n        await this.update(data);\r\n\r\n        const newAmmunition = (this.items || [])\r\n            .filter((i) => i.data.type === 'ammo')\r\n            .reduce((acc: Entity.Data[], item) => {\r\n                const ammoData = item.asAmmoData();\r\n\r\n                if (ammoData && ammoData.data.technology.equipped) {\r\n                    const { technology } = ammoData.data;\r\n                    const qty = typeof technology.quantity === 'string' ? 0 : technology.quantity;\r\n                    technology.quantity = Math.max(0, qty - diff);\r\n                    acc.push(item.data);\r\n                }\r\n                return acc;\r\n            }, []);\r\n\r\n        if (newAmmunition && newAmmunition.length) {\r\n            await this.updateOwnedItem(newAmmunition);\r\n        }\r\n    }\r\n\r\n    async equipAmmo(iid) {\r\n        // only allow ammo that was just clicked to be equipped\r\n        const ammo = this.items\r\n            .filter((item) => item.type === 'ammo')\r\n            .map((item) => {\r\n                const ownedItem = this.getOwnedItem(item._id);\r\n                const ammoData = ownedItem?.asAmmoData();\r\n\r\n                if (ownedItem && ammoData) {\r\n                    ammoData.data.technology.equipped = iid === item._id;\r\n                    return ownedItem.data;\r\n                }\r\n            });\r\n        await this.updateOwnedItem(ammo);\r\n    }\r\n\r\n    async addNewLicense() {\r\n        const sin = duplicate(this.asSinData());\r\n        if (!sin) return;\r\n\r\n        // NOTE: This might be related to Foundry data serialization sometimes returning arrays as ordered HashMaps...\r\n        if (typeof sin.data.licenses === 'object') {\r\n            // @ts-ignore\r\n            sin.data.licenses = Object.values(sin.data.licenses);\r\n        }\r\n\r\n        sin.data.licenses.push({\r\n            name: '',\r\n            rtg: '',\r\n            description: '',\r\n        });\r\n\r\n        await this.update(sin);\r\n    }\r\n\r\n    getRollPartsList(): ModList<number> {\r\n        // we only have a roll if we have an action or an actor\r\n        const action = this.getAction();\r\n        if (!action || !this.actor) return [];\r\n\r\n        const parts = new PartsList(duplicate(this.getModifierList()));\r\n\r\n        const skill = this.actor.findActiveSkill(this.getActionSkill());\r\n        const attribute = this.actor.findAttribute(this.getActionAttribute());\r\n        const attribute2 = this.actor.findAttribute(this.getActionAttribute2());\r\n\r\n        if (attribute && attribute.label) parts.addPart(attribute.label, attribute.value);\r\n\r\n        // if we have a valid skill, don't look for a second attribute\r\n        if (skill) {\r\n            parts.addUniquePart(skill.label || skill.name, skill.value);\r\n            SkillFlow.handleDefaulting(skill, parts);\r\n        }\r\n        else if (attribute2 && attribute2.label) {\r\n            parts.addPart(attribute2.label, attribute2.value);\r\n        }\r\n\r\n        const spec = this.getActionSpecialization();\r\n        if (spec) parts.addUniquePart(spec, 2);\r\n\r\n        //@ts-ignore parseInt does allow for number type parameter.\r\n        const mod = parseInt(this.data.data.action.mod || 0);\r\n        if (mod) parts.addUniquePart('SR5.ItemMod', mod);\r\n\r\n        const atts: (AttributeField | SkillField)[] | boolean = [];\r\n        if (attribute !== undefined) atts.push(attribute);\r\n        if (attribute2 !== undefined) atts.push(attribute2);\r\n        if (skill !== undefined) atts.push(skill);\r\n        // add global parts from actor\r\n        this.actor._addGlobalParts(parts);\r\n        this.actor._addMatrixParts(parts, atts);\r\n        this._addWeaponParts(parts);\r\n\r\n        return parts.list;\r\n    }\r\n\r\n    calculateRecoil() {\r\n        const lastFireMode = this.getLastFireMode();\r\n        if (!lastFireMode) return 0;\r\n        if (lastFireMode.value === 20) return 0;\r\n        return Math.min(this.getRecoilCompensation(true) - (this.getLastFireMode()?.value || 0), 0);\r\n    }\r\n\r\n    _addWeaponParts(parts: PartsList<number>) {\r\n        if (this.isRangedWeapon()) {\r\n            const recoil = this.calculateRecoil();\r\n            if (recoil) parts.addUniquePart('SR5.Recoil', recoil);\r\n        }\r\n    }\r\n\r\n    isSin(): boolean {\r\n        return this.wrapper.isSin();\r\n    }\r\n\r\n    asSinData(): Sin | undefined {\r\n        if (this.isSin()) {\r\n            return this.data as Sin;\r\n        }\r\n    }\r\n\r\n    isLifestyle(): boolean {\r\n        return this.wrapper.isLifestyle();\r\n    }\r\n\r\n    asLifestyleData(): Lifestyle | undefined {\r\n        if (this.isLifestyle()) {\r\n            return this.data as Lifestyle;\r\n        }\r\n    }\r\n\r\n    isAmmo(): boolean {\r\n        return this.wrapper.isAmmo();\r\n    }\r\n\r\n    asAmmoData(): Ammo | undefined {\r\n        if (this.isAmmo()) {\r\n            return this.data as Ammo;\r\n        }\r\n    }\r\n\r\n    isModification(): boolean {\r\n        return this.wrapper.isModification();\r\n    }\r\n\r\n    asModificationData(): Modification | undefined {\r\n        if (this.isModification()) {\r\n            return this.data as Modification;\r\n        }\r\n    }\r\n\r\n    isWeaponModification(): boolean {\r\n        return this.wrapper.isWeaponModification();\r\n    }\r\n\r\n    isArmorModification(): boolean {\r\n        return this.wrapper.isArmorModification();\r\n    }\r\n\r\n    isProgram(): boolean {\r\n        return this.wrapper.isProgram();\r\n    }\r\n\r\n    asProgramData(): Program | undefined {\r\n        if (this.isProgram()) {\r\n            return this.data as Program;\r\n        }\r\n    }\r\n\r\n    isQuality(): boolean {\r\n        return this.wrapper.isQuality();\r\n    }\r\n\r\n    asQualityData(): Quality | undefined {\r\n        if (this.isQuality()) {\r\n            return this.data as Quality;\r\n        }\r\n    }\r\n\r\n    isAdeptPower(): boolean {\r\n        return this.data.type === 'adept_power';\r\n    }\r\n\r\n    asAdeptPowerData(): AdeptPower|undefined {\r\n        if (this.isAdeptPower())\r\n            return this.data as AdeptPower;\r\n    }\r\n\r\n    async removeLicense(index) {\r\n        const data = duplicate(this.asSinData());\r\n        if (data) {\r\n            data.data.licenses.splice(index, 1);\r\n            await this.update(data);\r\n        }\r\n    }\r\n\r\n    isAction(): boolean {\r\n        return this.wrapper.isAction();\r\n    }\r\n\r\n    asActionData(): Action | undefined {\r\n        if (this.isAction()) {\r\n            return this.data as Action;\r\n        }\r\n    }\r\n\r\n\r\n\r\n    async rollOpposedTest(target: SR5Actor, attack: AttackData, event):  Promise<ShadowrunRoll | undefined> {\r\n        const options = {\r\n            event,\r\n            fireModeDefense: 0,\r\n            cover: false,\r\n            attack\r\n        };\r\n\r\n        const parts = this.getOpposedTestMod();\r\n        const action = this.getAction();\r\n        if (!action) return;\r\n\r\n        const { opposed } = action;\r\n\r\n        if (opposed.type === 'defense') {\r\n            return await this.rollDefense(target, options);\r\n\r\n        } else if (opposed.type === 'soak') {\r\n            options['damage'] = attack?.damage;\r\n            options['attackerHits'] = attack?.hits;\r\n            return await target.rollSoak(options, parts.list);\r\n\r\n        } else if (opposed.type === 'armor') {\r\n            return target.rollArmor(options);\r\n\r\n        } else if (opposed.skill && opposed.attribute) {\r\n            const skill = target.getSkill(opposed.skill);\r\n\r\n            if (!skill) {\r\n                ui.notifications.error(game.i18n.localize(\"SR5.Errors.MissingSkill\"));\r\n                return;\r\n            }\r\n\r\n            return target.rollSkill(skill, {\r\n                ...options,\r\n                attribute: opposed.attribute,\r\n            });\r\n\r\n        } else if (opposed.attribute && opposed.attribute2) {\r\n            return target.rollTwoAttributes([opposed.attribute, opposed.attribute2], options);\r\n\r\n        } else if (opposed.attribute) {\r\n            return target.rollSingleAttribute(opposed.attribute, options);\r\n\r\n        }\r\n    }\r\n\r\n    async rollTestType(type: string, attack: AttackData, event, target: SR5Actor) {\r\n        if (type === 'opposed') {\r\n            await this.rollOpposedTest(target, attack, event);\r\n        }\r\n        if (type === 'action') {\r\n            await this.castAction(event);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Rolls a test using the latest stored data on the item (force, fireMode, level)\r\n     * @param event - mouse event\r\n     * @param actionTestData\r\n     * @param options - any additional roll options to pass along - note that currently the Item will overwrite -- WIP\r\n     */\r\n    async rollTest(event, actionTestData?: ActionTestData): Promise<ShadowrunRoll | undefined> {\r\n\r\n        const roll = await ShadowrunRoller.itemRoll(event, this, actionTestData);\r\n        if (!roll) return;\r\n\r\n        await ShadowrunRoller.resultingItemRolls(event, this, actionTestData);\r\n\r\n        return roll;\r\n    }\r\n\r\n    static getItemFromMessage(html): SR5Item | undefined {\r\n        const card = html.find('.chat-card');\r\n        let actor;\r\n        const tokenKey = card.data('tokenId');\r\n        if (tokenKey) {\r\n            const [sceneId, tokenId] = tokenKey.split('.');\r\n            let token;\r\n            if (sceneId === canvas?.scene._id) token = canvas.tokens.get(tokenId);\r\n            else {\r\n                const scene: Scene = game.scenes.get(sceneId);\r\n                if (!scene) return;\r\n                // @ts-ignore\r\n                const tokenData = scene.data.tokens.find((t) => t.id === Number(tokenId));\r\n                if (tokenData) token = new Token(tokenData);\r\n            }\r\n            if (!token) return;\r\n            actor = Actor.fromToken(token);\r\n        } else actor = game.actors.get(card.data('actorId'));\r\n\r\n        if (!actor) return;\r\n        const itemId = card.data('itemId');\r\n        return actor.getOwnedItem(itemId);\r\n    }\r\n\r\n    static getTargets() {\r\n        const { character } = game.user;\r\n        const { controlled } = canvas.tokens;\r\n        const targets = controlled.reduce((arr, t) => (t.actor ? arr.concat([t.actor]) : arr), []);\r\n        if (character && controlled.length === 0) targets.push(character);\r\n        if (!targets.length) throw new Error(`You must designate a specific Token as the roll target`);\r\n        return targets;\r\n    }\r\n\r\n    getActionTests(): Test[] {\r\n        if (!this.hasRoll) return []\r\n\r\n        return [{\r\n            label: this.getActionTestName(),\r\n            type: 'action',\r\n        }];\r\n    }\r\n\r\n    getOpposedTests(): Test[] {\r\n        if (!this.hasOpposedRoll) {\r\n            return [];\r\n        }\r\n        return [{\r\n            label: this.getOpposedTestName(),\r\n            type: 'opposed',\r\n        }];\r\n    }\r\n\r\n    /**\r\n     * Create an item in this item\r\n     * @param itemData\r\n     * @param options\r\n     */\r\n    async createOwnedItem(itemData, options = {}) {\r\n        if (!Array.isArray(itemData)) itemData = [itemData];\r\n        // weapons accept items\r\n        if (this.type === 'weapon') {\r\n            const currentItems = duplicate(this.getEmbeddedItems());\r\n\r\n            itemData.forEach((ogItem) => {\r\n                const item = duplicate(ogItem);\r\n                item._id = randomID(16);\r\n                if (item.type === 'ammo' || item.type === 'modification') {\r\n                    if (item?.data?.technology?.equipped) {\r\n                        item.data.technology.equipped = false;\r\n                    }\r\n                    currentItems.push(item);\r\n                }\r\n            });\r\n\r\n            await this.setEmbeddedItems(currentItems);\r\n        }\r\n        await this.prepareEmbeddedEntities();\r\n        await this.prepareData();\r\n        await this.render(false);\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Prepare embeddedItems\r\n     */\r\n    prepareEmbeddedEntities() {\r\n        super.prepareEmbeddedEntities();\r\n        let items = this.getEmbeddedItems();\r\n\r\n        // Templates and further logic need a items HashMap, yet the flag provides an array.\r\n        if (items) {\r\n\r\n            const existing = (this.items || []).reduce((object, i) => {\r\n                object[i.id] = i;\r\n                return object;\r\n            }, {});\r\n\r\n            // Merge possible changes / new items from the flag into the current item instance.\r\n            this.items = items.map((item) => {\r\n                if (item._id in existing) {\r\n                    const currentItem = existing[item._id];\r\n\r\n                    // Patch .data isn't really anymore but do it for consistency.\r\n                    // Patch ._data is needed for Item.prepareData to work, as it's simply duplicating _data over data.\r\n                    // Otherwise old item data will be used for value preparation.\r\n                    currentItem.data = item;\r\n                    currentItem._data = item;\r\n                    currentItem.prepareData();\r\n                    return currentItem;\r\n\r\n                } else {\r\n                    // dirty things done here\r\n                    // @ts-ignore\r\n                    return Item.createOwned(item, this);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    getOwnedItem(itemId): SR5Item | undefined {\r\n        const items = this.items;\r\n        if (!items) return;\r\n        return items.find((i) => i._id === itemId);\r\n    }\r\n\r\n    async updateOwnedItem(changes) {\r\n        const items = duplicate(this.getEmbeddedItems());\r\n        if (!items) return;\r\n        changes = Array.isArray(changes) ? changes : [changes];\r\n        if (!changes || changes.length === 0) return;\r\n        changes.forEach((itemChanges) => {\r\n            const index = items.findIndex((i) => i._id === itemChanges._id);\r\n            if (index === -1) return;\r\n            const item = items[index];\r\n            if (item) {\r\n                itemChanges = expandObject(itemChanges);\r\n                mergeObject(item, itemChanges);\r\n                items[index] = item;\r\n                // this.items[index].data = items[index];\r\n            }\r\n        });\r\n\r\n        await this.setEmbeddedItems(items);\r\n        await this.prepareEmbeddedEntities();\r\n        await this.prepareData();\r\n        await this.render(false);\r\n        return true;\r\n    }\r\n\r\n    async updateEmbeddedEntity(embeddedName: string, updateData: object | object[], options?: object) {\r\n        await this.updateOwnedItem(updateData);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Remove an owned item\r\n     * @param deleted\r\n     * @returns {Promise<boolean>}\r\n     */\r\n    async deleteOwnedItem(deleted) {\r\n        const items = duplicate(this.getEmbeddedItems());\r\n        if (!items) return;\r\n\r\n        const idx = items.findIndex((i) => i._id === deleted || Number(i._id) === deleted);\r\n        if (idx === -1) throw new Error(`Shadowrun5e | Couldn't find owned item ${deleted}`);\r\n        items.splice(idx, 1);\r\n        // we need to clear the items when one is deleted or it won't actually be deleted\r\n        await this.clearEmbeddedItems();\r\n        await this.setEmbeddedItems(items);\r\n        await this.prepareEmbeddedEntities();\r\n        await this.prepareData();\r\n        await this.render(false);\r\n        return true;\r\n    }\r\n\r\n    async openPdfSource() {\r\n        // Check for PDFoundry module hook: https://github.com/Djphoenix719/PDFoundry\r\n        if (!ui['PDFoundry']) {\r\n            ui.notifications.warn(game.i18n.localize('SR5.DIALOG.MissingModuleContent'));\r\n            return;\r\n        }\r\n\r\n        const source = this.getBookSource();\r\n        if (source === '') {\r\n            // @ts-ignore\r\n            ui.notifications.error(game.i18n.localize('SR5.SourceFieldEmptyError'));\r\n        }\r\n        // TODO open PDF to correct location\r\n        // parse however you need, all \"buttons\" will lead to this function\r\n        const [code, page] = source.split(' ');\r\n\r\n        //@ts-ignore\r\n        ui.PDFoundry.openPDFByCode(code, { page: parseInt(page) });\r\n    }\r\n\r\n    _canDealDamage(): boolean {\r\n        // NOTE: Double negation to force boolean comparison casting.\r\n        const action = this.getAction();\r\n        if (!action) return false;\r\n        return !!action.damage.type.base;\r\n    }\r\n\r\n    getAction(): ActionRollData|undefined {\r\n        return this.wrapper.getAction();\r\n    }\r\n\r\n    getExtended(): boolean {\r\n        const action = this.getAction();\r\n        if (!action) return false;\r\n        return action.extended;\r\n    }\r\n\r\n    getTechnology(): TechnologyData|undefined {\r\n        return this.wrapper.getTechnology();\r\n    }\r\n\r\n    getRange(): CritterPowerRange|SpellRange|RangeWeaponData|undefined {\r\n        return this.wrapper.getRange();\r\n    }\r\n\r\n    getWeaponRange(): RangeWeaponData|undefined {\r\n        if (this.isRangedWeapon())\r\n            return this.getRange() as RangeWeaponData;\r\n    }\r\n\r\n    getAttackData(hits: number, actionTestData?: ActionTestData): AttackData | undefined {\r\n        if (!this._canDealDamage()) {\r\n            return;\r\n        }\r\n\r\n        const action = this.getAction();\r\n        if (!action) return;\r\n\r\n        const damage = ItemAction.calcDamage(action.damage, this.actor);\r\n\r\n        const data: AttackData = {\r\n            hits,\r\n            damage,\r\n        };\r\n\r\n        // Modify action damage by spell damage.\r\n        if (this.isCombatSpell() && actionTestData?.spell) {\r\n            const force = actionTestData.spell.force;\r\n            const damageParts = new PartsList(data.damage.mod);\r\n            const spellDamage = this.getSpellDamage(force, hits);\r\n\r\n            if (spellDamage) {\r\n                data.force = force;\r\n                data.damage.base = spellDamage.base;\r\n                data.damage.value = spellDamage.base + damageParts.total;\r\n                data.damage.ap.value = -spellDamage.ap.value + damageParts.total;\r\n                data.damage.ap.base = -spellDamage.ap.value;\r\n            }\r\n        }\r\n\r\n        if (this.isComplexForm() && actionTestData?.complexForm) {\r\n            data.level = actionTestData.complexForm.level;\r\n        }\r\n\r\n        if (this.isMeleeWeapon()) {\r\n            data.reach = this.getReach();\r\n            data.accuracy = this.getActionLimit();\r\n        }\r\n\r\n        if (this.isRangedWeapon()) {\r\n            data.fireMode = actionTestData?.rangedWeapon?.fireMode;\r\n            data.accuracy = this.getActionLimit();\r\n        }\r\n\r\n        const blastData = this.getBlastData(actionTestData);\r\n        if (blastData) data.blast = blastData;\r\n\r\n        return data;\r\n    }\r\n\r\n    getRollName(): string {\r\n        if (this.isRangedWeapon()) {\r\n            return game.i18n.localize('SR5.RangeWeaponAttack');\r\n        }\r\n        if (this.isMeleeWeapon()) {\r\n            return game.i18n.localize('SR5.MeleeWeaponAttack');\r\n        }\r\n        if (this.isCombatSpell()) {\r\n            return game.i18n.localize('SR5.SpellAttack');\r\n        }\r\n        if (this.isSpell()) {\r\n            return game.i18n.localize('SR5.SpellCast');\r\n        }\r\n        if (this.hasRoll) {\r\n            return this.name\r\n        }\r\n\r\n        return DEFAULT_ROLL_NAME;\r\n    }\r\n\r\n    getLimit(): LimitField | undefined {\r\n        // @ts-ignore // TODO: This should use this.getAction(). However action.limit doesn't contain label field.\r\n        const limit = duplicate(this.data.data.action?.limit);\r\n        if (!limit) return undefined;\r\n        // go through and set the label correctly\r\n        if (this.data.type === 'weapon') {\r\n            limit.label = 'SR5.Accuracy';\r\n        } else if (limit?.attribute) {\r\n            limit.label = CONFIG.SR5.limits[limit.attribute];\r\n        } else if (this.isSpell()) {\r\n            limit.value = this.getLastSpellForce().value;\r\n            limit.label = 'SR5.Force';\r\n        } else if (this.isComplexForm()) {\r\n            limit.value = this.getLastComplexFormLevel().value;\r\n            limit.label = 'SR5.Level';\r\n        } else {\r\n            limit.label = 'SR5.Limit';\r\n        }\r\n\r\n        // adjust limit value for actor data\r\n        if (limit.attribute) {\r\n            const att = this.actor.findLimit(limit.attribute);\r\n            if (att) {\r\n                limit.mod = PartsList.AddUniquePart(limit.mod, att.label, att.value);\r\n                Helpers.calcTotal(limit);\r\n            }\r\n        }\r\n\r\n        return limit;\r\n    }\r\n\r\n    /**\r\n     * Override setFlag to remove the 'SR5.' from keys in modlists, otherwise it handles them as embedded keys\r\n     * @param scope\r\n     * @param key\r\n     * @param value\r\n     */\r\n    setFlag(scope: string, key: string, value: any): Promise<Entity> {\r\n        const newValue = Helpers.onSetFlag(value);\r\n        return super.setFlag(scope, key, newValue);\r\n    }\r\n\r\n    /**\r\n     * Override getFlag to add back the 'SR5.' keys correctly to be handled\r\n     * @param scope\r\n     * @param key\r\n     */\r\n    getFlag(scope: string, key: string): any {\r\n        const data = super.getFlag(scope, key);\r\n        return Helpers.onGetFlag(data);\r\n    }\r\n\r\n    /**\r\n     * Passthrough functions\r\n     */\r\n    isAreaOfEffect(): boolean {\r\n        return this.wrapper.isAreaOfEffect();\r\n    }\r\n\r\n    isArmor(): boolean {\r\n        return this.wrapper.isArmor();\r\n    }\r\n\r\n    asArmorData(): Armor | undefined {\r\n        if (this.isArmor()) {\r\n            return this.data as Armor;\r\n        }\r\n    }\r\n\r\n    hasArmorBase(): boolean {\r\n        return this.wrapper.hasArmorBase();\r\n    }\r\n\r\n    hasArmorAccessory(): boolean {\r\n        return this.wrapper.hasArmorAccessory();\r\n    }\r\n\r\n    hasArmor(): boolean {\r\n        return this.wrapper.hasArmor();\r\n    }\r\n\r\n    isGrenade(): boolean {\r\n        return this.wrapper.isGrenade();\r\n    }\r\n\r\n    isWeapon(): boolean {\r\n        return this.wrapper.isWeapon();\r\n    }\r\n\r\n    asWeaponData(): Weapon | undefined {\r\n        if (this.wrapper.isWeapon()) {\r\n            return this.data as Weapon;\r\n        }\r\n    }\r\n\r\n    isCyberware(): boolean {\r\n        return this.wrapper.isCyberware();\r\n    }\r\n\r\n    asCyberwareData(): Cyberware | undefined {\r\n        if (this.isCyberware()) {\r\n            return this.data as Cyberware;\r\n        }\r\n    }\r\n\r\n    isCombatSpell(): boolean {\r\n        return this.wrapper.isCombatSpell();\r\n    }\r\n\r\n    isDirectCombatSpell(): boolean {\r\n        return this.wrapper.isDirectCombatSpell();\r\n    }\r\n\r\n    isIndirectCombatSpell(): boolean {\r\n        return this.wrapper.isIndirectCombatSpell();\r\n    }\r\n\r\n    isManaSpell(): boolean {\r\n        return this.wrapper.isManaSpell();\r\n    }\r\n\r\n    isPhysicalSpell(): boolean {\r\n        return this.wrapper.isPhysicalSpell();\r\n    }\r\n\r\n    isRangedWeapon(): boolean {\r\n        return this.wrapper.isRangedWeapon();\r\n    }\r\n\r\n    isSpell(): boolean {\r\n        return this.wrapper.isSpell();\r\n    }\r\n\r\n    asSpellData(): Spell | undefined {\r\n        if (this.isSpell()) {\r\n            return this.data as Spell;\r\n        }\r\n    }\r\n\r\n    isSpritePower(): boolean {\r\n        return this.wrapper.isSpritePower();\r\n    }\r\n\r\n    asSpritePowerData(): SpritePower | undefined {\r\n        if (this.isSpritePower()) {\r\n            return this.data as SpritePower;\r\n        }\r\n    }\r\n\r\n    isBioware(): boolean {\r\n        return this.wrapper.isBioware();\r\n    }\r\n\r\n    isComplexForm(): boolean {\r\n        return this.wrapper.isComplexForm();\r\n    }\r\n\r\n    asComplexFormData(): ComplexForm | undefined {\r\n        if (this.isComplexForm()) {\r\n            return this.data as ComplexForm;\r\n        }\r\n    }\r\n\r\n    isContact(): boolean {\r\n        return this.wrapper.isContact();\r\n    }\r\n\r\n    asContactData(): Contact | undefined {\r\n        if (this.isContact()) {\r\n            return this.data as Contact;\r\n        }\r\n    }\r\n\r\n    isCritterPower(): boolean {\r\n        return this.wrapper.isCritterPower();\r\n    }\r\n\r\n    asCritterPowerData(): CritterPower | undefined {\r\n        if (this.isCritterPower()) {\r\n            return this.data as CritterPower;\r\n        }\r\n    }\r\n\r\n    isMeleeWeapon(): boolean {\r\n        return this.wrapper.isMeleeWeapon();\r\n    }\r\n\r\n    isDevice(): boolean {\r\n        return this.wrapper.isDevice();\r\n    }\r\n\r\n    asDeviceData(): Device | undefined {\r\n        if (this.isDevice()) {\r\n            return this.data as Device;\r\n        }\r\n    }\r\n\r\n    isEquipment(): boolean {\r\n        return this.wrapper.isEquipment();\r\n    }\r\n\r\n    asEquipmentData(): Equipment | undefined {\r\n        if (this.isEquipment()) {\r\n            return this.data as Equipment;\r\n        }\r\n    }\r\n\r\n    isEquipped(): boolean {\r\n        return this.wrapper.isEquipped();\r\n    }\r\n\r\n    isCyberdeck(): boolean {\r\n        return this.wrapper.isCyberdeck();\r\n    }\r\n\r\n    getBookSource(): string {\r\n        return this.wrapper.getBookSource();\r\n    }\r\n\r\n    getConditionMonitor(): ConditionData {\r\n        return this.wrapper.getConditionMonitor();\r\n    }\r\n\r\n    getRating(): number {\r\n        return this.wrapper.getRating();\r\n    }\r\n\r\n    getArmorValue(): number {\r\n        return this.wrapper.getArmorValue();\r\n    }\r\n\r\n    getArmorElements(): { [key: string]: number } {\r\n        return this.wrapper.getArmorElements();\r\n    }\r\n\r\n    getEssenceLoss(): number {\r\n        return this.wrapper.getEssenceLoss();\r\n    }\r\n\r\n    getASDF() {\r\n        return this.wrapper.getASDF();\r\n    }\r\n\r\n    getActionSkill(): string | undefined {\r\n        return this.wrapper.getActionSkill();\r\n    }\r\n\r\n    getActionAttribute(): string | undefined {\r\n        return this.wrapper.getActionAttribute();\r\n    }\r\n\r\n    getActionAttribute2(): string | undefined {\r\n        return this.wrapper.getActionAttribute2();\r\n    }\r\n\r\n    getActionLimit(): number | undefined {\r\n        let limit = this.wrapper.getActionLimit();\r\n        // get the limit modifiers from the actor if we have them\r\n        const action = this.wrapper.getAction();\r\n        if (action?.limit.attribute && limit && this.actor) {\r\n            const { attribute } = action.limit;\r\n            const att = this.actor.findAttribute(attribute);\r\n            if (att) {\r\n                limit += att.value;\r\n            }\r\n        }\r\n        return limit;\r\n    }\r\n\r\n    getModifierList(): ModList<number> {\r\n        return this.wrapper.getModifierList();\r\n    }\r\n\r\n    getActionSpecialization(): string | undefined {\r\n        return this.wrapper.getActionSpecialization();\r\n    }\r\n\r\n    getDrain(): number {\r\n        return this.wrapper.getDrain();\r\n    }\r\n\r\n    getFade(): number {\r\n        return this.wrapper.getFade();\r\n    }\r\n\r\n    getRecoilCompensation(includeActor: boolean = true): number {\r\n        let rc = this.wrapper.getRecoilCompensation();\r\n        if (includeActor && this.actor) {\r\n            rc += this.actor.getRecoilCompensation();\r\n        }\r\n        return rc;\r\n    }\r\n\r\n    getReach(): number {\r\n        if (this.isMeleeWeapon()) {\r\n            const data = this.data.data as WeaponData;\r\n            return data.melee.reach ?? 0;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    getCondition(): ConditionData|undefined {\r\n        const technology = this.getTechnology();\r\n        if (technology && \"condition_monitor\" in technology)\r\n            return technology.condition_monitor;\r\n    }\r\n\r\n    hasDefenseTest(): boolean {\r\n        if (!this.hasOpposedRoll) return false;\r\n        const action = this.getAction();\r\n        if (!action) return false;\r\n        return action.opposed.type === 'defense';\r\n    }\r\n\r\n    /** Use this method to get the base damage of spell, before any opposing action\r\n     *\r\n     * NOTE: This will NOT give you modified damage for direct combat spells\r\n     */\r\n    getSpellDamage(force: number, hits: number): DamageData|undefined {\r\n        if (!this.isCombatSpell()) return;\r\n\r\n        const action = this.getAction();\r\n        if (!action) return;\r\n\r\n        if (this.isDirectCombatSpell()) {\r\n            const damage = hits;\r\n\r\n            return Helpers.createDamageData(damage, action.damage.type.value);\r\n        } else if (this.isIndirectCombatSpell()) {\r\n            const damage = force;\r\n            const ap = -force;\r\n\r\n            return Helpers.createDamageData(damage, action.damage.type.value, -ap)\r\n        }\r\n    }\r\n\r\n    // TODO: Move into a rule section.\r\n    async rollDefense(target: SR5Actor, options: DefenseRollOptions): Promise<ShadowrunRoll | undefined> {\r\n        // TODO: Maybe move into defense methods and give the actor access to the item.\r\n        const opposedParts = this.getOpposedTestMod();\r\n\r\n        if (this.isWeapon()) {\r\n            options.cover = true;\r\n            if (options.attack?.fireMode?.defense) {\r\n                options.fireModeDefense = +options.attack.fireMode.defense;\r\n            }\r\n\r\n            return await target.rollAttackDefense(options, opposedParts.list);\r\n        }\r\n\r\n        if (this.isDirectCombatSpell()) {\r\n            return await target.rollDirectSpellDefense(this, options as SpellDefenseOptions);\r\n        }\r\n\r\n        if (this.isIndirectCombatSpell()) {\r\n            return await target.rollIndirectSpellDefense(this, options as SpellDefenseOptions);\r\n        }\r\n    }\r\n\r\n    /** Should environmental modifiers apply an action by this item?\r\n     */\r\n    applyEnvironmentalModifiers(): boolean {\r\n        if (this.isRangedWeapon()) return true;\r\n        if (this.isMeleeWeapon()) return true;\r\n        if (this.isIndirectCombatSpell()) return true;\r\n\r\n        return false;\r\n    }\r\n}\r\n","import { DataWrapper } from '../dataWrappers/DataWrapper';\r\nimport SR5ItemType = Shadowrun.SR5ItemType;\r\nimport ConditionData = Shadowrun.ConditionData;\r\nimport ModList = Shadowrun.ModList;\r\nimport SR5ItemDataPartial = Shadowrun.SR5ItemDataPartial;\r\nimport ActionRollData = Shadowrun.ActionRollData;\r\nimport SpellData = Shadowrun.SpellData;\r\nimport SinData = Shadowrun.SinData;\r\nimport Sin = Shadowrun.Sin;\r\nimport SR5ItemData = Shadowrun.SR5ItemData;\r\nimport ActionPartData = Shadowrun.ActionPartData;\r\nimport Weapon = Shadowrun.Weapon;\r\nimport Modification = Shadowrun.Modification;\r\nimport TechnologyData = Shadowrun.TechnologyData;\r\nimport CritterPowerRange = Shadowrun.CritterPowerRange;\r\nimport SpellRange = Shadowrun.SpellRange;\r\nimport RangeWeaponData = Shadowrun.RangeWeaponData;\r\n\r\nexport class SR5ItemDataWrapper extends DataWrapper<SR5ItemType> {\r\n    getType() {\r\n        return this.data.type;\r\n    }\r\n    getData(): SR5ItemDataPartial {\r\n        return (this.data.data as unknown) as SR5ItemDataPartial;\r\n    }\r\n\r\n    isAreaOfEffect(): boolean {\r\n        // TODO figure out how to detect explosive ammo\r\n        return this.isGrenade() || (this.isSpell() && this.getData().range === 'los_a'); //|| this.hasExplosiveAmmo();\r\n    }\r\n\r\n    /** Should only be used to check for actual armor item type.\r\n     * NOTE: Should you only care about a possible armor value use couldHaveArmor instead.\r\n     */\r\n    isArmor(): boolean {\r\n        return this.data.type === 'armor';\r\n    }\r\n\r\n    /** Will give an indicator if an item provides an armor value, without locking into only the Armor item type.\r\n     * NOTE: Should you only care about the armor item type use isArmor instead.\r\n     */\r\n    couldHaveArmor(): boolean {\r\n        const armor = this.getData().armor;\r\n        return this.isArmor() || armor !== undefined;\r\n    }\r\n\r\n    hasArmorBase(): boolean {\r\n        return this.hasArmor() && !this.getData().armor?.mod;\r\n    }\r\n\r\n    hasArmorAccessory(): boolean {\r\n        return this.hasArmor() && (this.getData().armor?.mod ?? false);\r\n    }\r\n\r\n    hasArmor(): boolean {\r\n        return this.getArmorValue() > 0;\r\n    }\r\n\r\n    isGrenade(): boolean {\r\n        return this.isThrownWeapon() && (this.getData().thrown?.blast.radius ?? 0) > 0;\r\n    }\r\n\r\n    isThrownWeapon(): boolean {\r\n        return this.isWeapon() && this.getData().category === 'thrown';\r\n    }\r\n\r\n    isWeapon(): boolean {\r\n        return this.data.type === 'weapon';\r\n    }\r\n\r\n    isModification(): boolean {\r\n        return this.data.type === 'modification';\r\n    }\r\n\r\n    isWeaponModification(): boolean {\r\n        if (!this.isModification()) return false;\r\n        const modification = this.data as Modification;\r\n        return modification.data.type === 'weapon';\r\n    }\r\n\r\n    isArmorModification(): boolean {\r\n        if (!this.isModification()) return false;\r\n        const modification = this.data as Modification;\r\n        return modification.data.type === 'armor';\r\n    }\r\n\r\n    isProgram(): boolean {\r\n        return this.data.type === 'program';\r\n    }\r\n\r\n    isQuality(): boolean {\r\n        return this.data.type === 'quality';\r\n    }\r\n\r\n    isAmmo(): boolean {\r\n        return this.data.type === 'ammo';\r\n    }\r\n\r\n    isCyberware(): boolean {\r\n        return this.data.type === 'cyberware';\r\n    }\r\n\r\n    isBioware(): boolean {\r\n        return this.data.type === 'bioware';\r\n    }\r\n\r\n    isBodyware(): boolean {\r\n        return this.isCyberware() || this.isBioware();\r\n    }\r\n\r\n    isCombatSpell(): boolean {\r\n        return this.isSpell() && this.getData().category === 'combat';\r\n    }\r\n\r\n    isDirectCombatSpell(): boolean {\r\n        if (!this.isCombatSpell()) return false;\r\n        return this.getData()?.combat?.type === 'direct';\r\n    }\r\n\r\n    isIndirectCombatSpell(): boolean {\r\n        if (!this.isCombatSpell()) return false;\r\n        return this.getData()?.combat?.type === 'indirect';\r\n    }\r\n\r\n    isManaSpell(): boolean {\r\n        if (!this.isSpell()) return false;\r\n        // Cast as partial spelldata due to conflicting .type between differing item types.\r\n        const spellData = this.getData() as Partial<SpellData>;\r\n        return spellData.type === 'mana';\r\n    }\r\n\r\n    isPhysicalSpell(): boolean {\r\n        if (!this.isSpell()) return false;\r\n        // Cast as partial spelldata due to conflicting .type between differing item types.\r\n        const spellData = this.getData() as Partial<SpellData>;\r\n        return spellData.type === 'physical';\r\n    }\r\n\r\n    isRangedWeapon(): boolean {\r\n        return this.isWeapon() && this.getData().category === 'range';\r\n    }\r\n\r\n    isSpell(): boolean {\r\n        return this.data.type === 'spell';\r\n    }\r\n\r\n    isSpritePower(): boolean {\r\n        return this.data.type === 'sprite_power';\r\n    }\r\n\r\n    isComplexForm(): boolean {\r\n        return this.data.type === 'complex_form';\r\n    }\r\n\r\n    isContact(): boolean {\r\n        return this.data.type === 'contact';\r\n    }\r\n\r\n    isCritterPower(): boolean {\r\n        return this.data.type === 'critter_power';\r\n    }\r\n\r\n    isMeleeWeapon(): boolean {\r\n        return this.data.type === 'weapon' && this.getData().category === 'melee';\r\n    }\r\n\r\n    isDevice(): boolean {\r\n        return this.data.type === 'device';\r\n    }\r\n\r\n    isEquipment(): boolean {\r\n        return this.data.type === 'equipment';\r\n    }\r\n\r\n    isEquipped(): boolean {\r\n        return this.getData().technology?.equipped || false;\r\n    }\r\n\r\n    isCyberdeck(): boolean {\r\n        return this.isDevice() && this.getData().category === 'cyberdeck';\r\n    }\r\n\r\n    isSin(): boolean {\r\n        return this.data.type === 'sin';\r\n    }\r\n\r\n    isLifestyle(): boolean {\r\n        return this.data.type === 'lifestyle';\r\n    }\r\n\r\n    getId(): string {\r\n        return this.data._id;\r\n    }\r\n\r\n    getBookSource(): string {\r\n        return this.getData().description?.source ?? '';\r\n    }\r\n\r\n    getConditionMonitor(): ConditionData {\r\n        return this.getData().technology?.condition_monitor ?? { value: 0, max: 0, label: '' };\r\n    }\r\n\r\n    getRating(): number {\r\n        return this.getData().technology?.rating || 0;\r\n    }\r\n\r\n    getArmorValue(): number {\r\n        return this.getData()?.armor?.value ?? 0;\r\n    }\r\n\r\n    getArmorElements(): { [key: string]: number } {\r\n        // TODO clean this up\r\n        const { fire, electricity, cold, acid } = this.getData().armor || {};\r\n        return { fire: fire ?? 0, electricity: electricity ?? 0, cold: cold ?? 0, acid: acid ?? 0 };\r\n    }\r\n\r\n    getName(): string {\r\n        return this.data.name;\r\n    }\r\n\r\n    getEssenceLoss(): number {\r\n        return this.getData()?.essence ?? 0;\r\n    }\r\n\r\n    getAmmo() {\r\n        return this.getData().ammo;\r\n    }\r\n\r\n    getASDF() {\r\n        if (!this.isDevice()) return undefined;\r\n\r\n        // matrix attributes are set up as an object\r\n        const matrix = {\r\n            attack: {\r\n                value: 0,\r\n                device_att: '',\r\n            },\r\n            sleaze: {\r\n                value: 0,\r\n                device_att: '',\r\n            },\r\n            data_processing: {\r\n                value: this.getRating(),\r\n                device_att: '',\r\n            },\r\n            firewall: {\r\n                value: this.getRating(),\r\n                device_att: '',\r\n            },\r\n        };\r\n\r\n        if (this.isCyberdeck()) {\r\n            /**\r\n             * {\r\n             *     attN: {\r\n             *         value: number,\r\n             *         att: string (the ASDF attribute)\r\n             *     }\r\n             * }\r\n             */\r\n            const atts: { [key: string]: { value: number; att: string } } | undefined = this.getData().atts;\r\n            if (atts) {\r\n                for (let [key, att] of Object.entries(atts)) {\r\n                    matrix[att.att].value = att.value;\r\n                    matrix[att.att].device_att = key;\r\n                }\r\n            }\r\n        }\r\n\r\n        return matrix;\r\n    }\r\n\r\n    getQuantity(): number | undefined {\r\n        return this.getData()?.technology?.quantity || 1;\r\n    }\r\n\r\n    isAction(): boolean {\r\n        return this.data.type === 'action';\r\n    }\r\n\r\n    getAction(): ActionRollData|undefined {\r\n        return this.getData().action;\r\n    }\r\n\r\n    getActionDicePoolMod(): number | undefined {\r\n        return this.getData().action?.mod;\r\n    }\r\n\r\n    getLimitAttribute(): string | undefined {\r\n        return this.getData().action?.limit?.attribute;\r\n    }\r\n\r\n    getActionSkill(): string | undefined {\r\n        return this.getData().action?.skill;\r\n    }\r\n\r\n    getActionAttribute(): string | undefined {\r\n        return this.getData().action?.attribute;\r\n    }\r\n\r\n    getActionAttribute2(): string | undefined {\r\n        return this.getData().action?.attribute2;\r\n    }\r\n\r\n    getActionLimit(): number | undefined {\r\n        return this.getData().action?.limit?.value;\r\n    }\r\n\r\n    getModifierList(): ModList<number> {\r\n        return this.getData().action?.dice_pool_mod || [];\r\n    }\r\n\r\n    getActionSpecialization(): string | undefined {\r\n        if (this.getData().action?.spec) return 'SR5.Specialization';\r\n        return undefined;\r\n    }\r\n\r\n    getDrain(): number {\r\n        return this.getData().drain || 0;\r\n    }\r\n\r\n    getFade(): number {\r\n        return this.getData().fade || 0;\r\n    }\r\n\r\n    getRecoilCompensation(): number {\r\n        if (!this.isRangedWeapon()) return 0;\r\n        const base = this.getData()?.range?.rc.value ?? '0';\r\n        return Number(base);\r\n    }\r\n\r\n    getReach(): number {\r\n        if (this.isMeleeWeapon()) {\r\n            return this.getData().melee?.reach ?? 0;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    getTechnology(): TechnologyData|undefined {\r\n        if (\"technology\" in this.data.data)\r\n            return this.data.data.technology;\r\n    }\r\n\r\n    getRange(): CritterPowerRange|SpellRange|RangeWeaponData|undefined {\r\n        if (!(\"range\" in this.data.data)) return;\r\n\r\n        if (this.data.type === 'critter_power')\r\n            return this.data.data.range as CritterPowerRange;\r\n\r\n        if (this.data.type === 'spell')\r\n            return this.data.data.range as SpellRange;\r\n\r\n        if (this.data.type === 'weapon')\r\n            return this.data.data.range as RangeWeaponData;\r\n    }\r\n\r\n    hasDefenseTest(): boolean {\r\n        return this.getData().action?.opposed?.type === 'defense';\r\n    }\r\n\r\n    hasAmmo(): boolean {\r\n        const ammo = this.getAmmo();\r\n        return !!ammo\r\n    }\r\n}\r\n","import { Helpers } from '../helpers';\r\nimport { SR5Item } from './SR5Item';\r\nimport SR5ActorSheetData = Shadowrun.SR5ActorSheetData;\r\n\r\n/**\r\n * Extend the basic ItemSheet with some very simple modifications\r\n */\r\nexport class SR5ItemSheet extends ItemSheet<{}, SR5Item> {\r\n    private _shownDesc: any[];\r\n    private _scroll: string;\r\n    constructor(...args) {\r\n        super(...args);\r\n        this._shownDesc = [];\r\n    }\r\n\r\n    getEmbeddedItems() {\r\n        return this.item.items || [];\r\n    }\r\n\r\n    /**\r\n     * Extend and override the default options used by the Simple Item Sheet\r\n     * @returns {Object}\r\n     */\r\n    static get defaultOptions() {\r\n        return mergeObject(super.defaultOptions, {\r\n            classes: ['sr5', 'sheet', 'item'],\r\n            width: 650,\r\n            height: 450,\r\n            tabs: [{ navSelector: '.tabs', contentSelector: '.sheetbody' }],\r\n        });\r\n    }\r\n\r\n    get template() {\r\n        const path = 'systems/shadowrun5e/dist/templates/item/';\r\n        return `${path}${this.item.data.type}.html`;\r\n    }\r\n\r\n    /* -------------------------------------------- */\r\n\r\n    /**\r\n     * Prepare data for rendering the Item sheet\r\n     * The prepared data object contains both the actor data as well as additional sheet options\r\n     */\r\n    getData() {\r\n        const data = super.getData();\r\n        const itemData = data.data;\r\n\r\n        if (itemData.action) {\r\n            try {\r\n                const { action } = itemData;\r\n                if (action.mod === 0) delete action.mod;\r\n                if (action.limit === 0) delete action.limit;\r\n                if (action.damage) {\r\n                    if (action.damage.mod === 0) delete action.damage.mod;\r\n                    if (action.damage.ap.mod === 0) delete action.damage.ap.mod;\r\n                }\r\n                if (action.limit) {\r\n                    if (action.limit.mod === 0) delete action.limit.mod;\r\n                }\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n\r\n        if (itemData.technology) {\r\n            try {\r\n                const tech = itemData.technology;\r\n                if (tech.rating === 0) delete tech.rating;\r\n                if (tech.quantity === 0) delete tech.quantity;\r\n                if (tech.cost === 0) delete tech.cost;\r\n            } catch (e) {\r\n                console.log(e);\r\n            }\r\n        }\r\n\r\n        data['config'] = CONFIG.SR5;\r\n        const items = this.getEmbeddedItems();\r\n        const [ammunition, weaponMods, armorMods] = items.reduce(\r\n            (parts: [Item.Data[], Item.Data[], Item.Data[]], item: SR5Item) => {\r\n                if (item.type === 'ammo') parts[0].push(item.data);\r\n                if (item.type === 'modification' && \"type\" in item.data.data && item.data.data.type === 'weapon') parts[1].push(item.data);\r\n                if (item.type === 'modification' && \"type\" in item.data.data && item.data.data.type === 'armor') parts[2].push(item.data);\r\n                return parts;\r\n            },\r\n            [[], [], []],\r\n        );\r\n        data['ammunition'] = ammunition;\r\n        data['weaponMods'] = weaponMods;\r\n        data['armorMods'] = armorMods;\r\n        // TODO set to the proper boolean for if the source PDF can be accessed\r\n        // I'm thinking maybe check for the mod being installed?\r\n        data['hasSourcePdfAvailable'] = true;\r\n        data['activeSkills'] = this._getActiveSkillsForSelect();\r\n\r\n        return data;\r\n    }\r\n\r\n    _getActiveSkillsForSelect() {\r\n        if (!this.item.actor) return CONFIG.SR5.activeSkills;\r\n        const activeSkills = Helpers.sortSkills(this.item.actor.getActiveSkills());\r\n\r\n        const activeSkillsForSelect = {};\r\n        for (const [id, skill] of Object.entries(activeSkills)) {\r\n            // Legacy skills have no name, but their name is their id!\r\n            // Custom skills have a name and their id is random.\r\n            const key = skill.name || id;\r\n            const label = skill.label || skill.name;\r\n            activeSkillsForSelect[key] = label;\r\n        }\r\n\r\n        return activeSkillsForSelect;\r\n    }\r\n\r\n    /* -------------------------------------------- */\r\n\r\n    /**\r\n     * Activate event listeners using the prepared sheet HTML\r\n     * @param html -  The prepared HTML object ready to be rendered into the DOM\r\n     */\r\n    activateListeners(html) {\r\n        super.activateListeners(html);\r\n        if (this.item.type === 'weapon') {\r\n            //@ts-ignore // TODO: Somehow Jquery doesn't have drag/drop in typing\r\n            this.form.ondragover = (event) => this._onDragOver(event);\r\n            //@ts-ignore // TODO: Somehow Jquery doesn't have drag/drop in typing\r\n            this.form.ondrop = (event) => this._onDrop(event);\r\n        }\r\n        html.find('.add-new-ammo').click(this._onAddNewAmmo.bind(this));\r\n        html.find('.ammo-equip').click(this._onAmmoEquip.bind(this));\r\n        html.find('.ammo-delete').click(this._onAmmoRemove.bind(this));\r\n        html.find('.ammo-reload').click(this._onAmmoReload.bind(this));\r\n\r\n        html.find('.edit-item').click(this._onEditItem.bind(this));\r\n\r\n        html.find('.add-new-mod').click(this._onAddWeaponMod.bind(this));\r\n        html.find('.mod-equip').click(this._onWeaponModEquip.bind(this));\r\n        html.find('.mod-delete').click(this._onWeaponModRemove.bind(this));\r\n\r\n        html.find('.add-new-license').click(this._onAddLicense.bind(this));\r\n        html.find('.license-delete').on('click', this._onRemoveLicense.bind(this));\r\n\r\n        html.find('.open-source-pdf').on('click', this._onOpenSourcePdf.bind(this));\r\n\r\n        html.find('.has-desc').click((event) => {\r\n            event.preventDefault();\r\n            const item = $(event.currentTarget).parents('.list-item');\r\n            const iid = $(item).data().item;\r\n            const field = item.next();\r\n            field.toggle();\r\n            if (iid) {\r\n                if (field.is(':visible')) this._shownDesc.push(iid);\r\n                else this._shownDesc = this._shownDesc.filter((val) => val !== iid);\r\n            }\r\n        });\r\n\r\n        html.find('.hidden').hide();\r\n    }\r\n\r\n    _onDragOver(event) {\r\n        event.preventDefault();\r\n        return false;\r\n    }\r\n\r\n    async _onDrop(event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        let data;\r\n        try {\r\n            data = JSON.parse(event.dataTransfer.getData('text/plain'));\r\n            if (data.type !== 'Item') {\r\n                console.log('Shadowrun5e | Can only drop Items');\r\n            }\r\n        } catch (err) {\r\n            console.log('Shadowrun5e | drop error');\r\n        }\r\n        let item;\r\n        // Case 1 - Data explicitly provided\r\n        if (data.data) {\r\n            // TODO test\r\n            if (this.item.isOwned && data.actorId === this.item.actor?._id && data.data._id === this.item._id) {\r\n                console.log('Shadowrun5e | Cant drop item on itself');\r\n                // @ts-ignore\r\n                ui.notifications.error('Are you trying to break the game??');\r\n            }\r\n            item = data;\r\n        } else if (data.pack) {\r\n            console.log(data);\r\n            // Case 2 - From a Compendium Pack\r\n            // TODO test\r\n            item = await this._getItemFromCollection(data.pack, data.id);\r\n        } else {\r\n            // Case 3 - From a World Entity\r\n            item = game.items.get(data.id);\r\n        }\r\n\r\n        this.item.createOwnedItem(item.data);\r\n    }\r\n\r\n    _getItemFromCollection(collection, itemId) {\r\n        const pack = game.packs.find((p) => p.collection === collection);\r\n        return pack.getEntity(itemId);\r\n    }\r\n\r\n    _eventId(event) {\r\n        event.preventDefault();\r\n        return event.currentTarget.closest('.list-item').dataset.itemId;\r\n    }\r\n\r\n    async _onOpenSourcePdf(event) {\r\n        event.preventDefault();\r\n        await this.item.openPdfSource();\r\n    }\r\n\r\n    async _onEditItem(event) {\r\n        const item = this.item.getOwnedItem(this._eventId(event));\r\n        if (item) {\r\n            item.sheet.render(true);\r\n        }\r\n    }\r\n\r\n    async _onAddLicense(event) {\r\n        event.preventDefault();\r\n        await this.item.addNewLicense();\r\n    }\r\n\r\n    async _onRemoveLicense(event) {\r\n        event.preventDefault();\r\n        const index = event.currentTarget.dataset.index;\r\n        if (index >= 0) await this.item.removeLicense(index);\r\n    }\r\n\r\n    async _onWeaponModRemove(event) {\r\n        await this._onOwnedItemRemove(event);\r\n    }\r\n\r\n    async _onWeaponModEquip(event) {\r\n        await this.item.equipWeaponMod(this._eventId(event));\r\n    }\r\n\r\n    async _onAddWeaponMod(event) {\r\n        event.preventDefault();\r\n        const type = 'modification';\r\n        const itemData = {\r\n            name: `New ${Helpers.label(type)}`,\r\n            type: type,\r\n            data: duplicate(game.system.model.Item.modification),\r\n        };\r\n        itemData.data.type = 'weapon';\r\n        // @ts-ignore\r\n        const item = Item.createOwned(itemData, this.item);\r\n        await this.item.createOwnedItem(item.data);\r\n    }\r\n\r\n    async _onAmmoReload(event) {\r\n        event.preventDefault();\r\n        await this.item.reloadAmmo();\r\n    }\r\n\r\n    async _onAmmoRemove(event) {\r\n        await this._onOwnedItemRemove(event);\r\n    }\r\n\r\n    async _onAmmoEquip(event) {\r\n        await this.item.equipAmmo(this._eventId(event));\r\n    }\r\n\r\n    async _onAddNewAmmo(event) {\r\n        event.preventDefault();\r\n        const type = 'ammo';\r\n        const itemData = {\r\n            name: `New ${Helpers.label(type)}`,\r\n            type: type,\r\n            data: duplicate(game.system.model.Item.ammo),\r\n        };\r\n        // @ts-ignore\r\n        const item = Item.createOwned(itemData, this.item);\r\n        await this.item.createOwnedItem(item.data);\r\n    }\r\n\r\n    async _onOwnedItemRemove(event) {\r\n         event.preventDefault();\r\n\r\n        const userConsented = await Helpers.confirmDeletion();\r\n        if (!userConsented) return;\r\n\r\n        await this.item.deleteOwnedItem(this._eventId(event));\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    _findActiveList() {\r\n        return $(this.element).find('.tab.active .scroll-area');\r\n    }\r\n\r\n    /** This is needed to circumvent Application.close setting closed state early, due to it's async animation\r\n     * - The length of the closing animation can't be longer then any await time in the closing cycle\r\n     * - FormApplication._onSubmit will otherwise set ._state to RENDERED even if the Application window has closed already\r\n     * - Subsequent render calls then will show the window again, due to it's state\r\n     *\r\n     * @private\r\n     */\r\n    private fixStaleRenderedState() {\r\n        if (this._state === Application.RENDER_STATES.RENDERED && ui.windows[this.appId] === undefined) {\r\n            console.warn(`SR5ItemSheet app for ${this.entity.name} is set as RENDERED but has no window registered. Fixing app internal render state. This is a known bug.`);\r\n            // Hotfixing instead of this.close() since FormApplication.close() expects form elements, which don't exist anymore.\r\n            this._state = Application.RENDER_STATES.CLOSED;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    async _render(force = false, options = {}) {\r\n        // NOTE: This is for a timing bug. See function doc for code removal. Good luck, there be dragons here. - taM\r\n        this.fixStaleRenderedState();\r\n\r\n        this._saveScrollPositions();\r\n        await super._render(force, options);\r\n        this._restoreScrollPositions();\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    _restoreScrollPositions() {\r\n        const activeList = this._findActiveList();\r\n        if (activeList.length && this._scroll != null) {\r\n            activeList.prop('scrollTop', this._scroll);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    _saveScrollPositions() {\r\n        const activeList = this._findActiveList();\r\n        if (activeList.length) {\r\n            this._scroll = activeList.prop('scrollTop');\r\n        }\r\n    }\r\n}\r\n","/**\r\n * Create a Macro from an Item drop.\r\n * Get an existing item macro if one exists, otherwise create a new one.\r\n * @param {Object} item     The item data\r\n * @param {number} slot     The hotbar slot to use\r\n * @returns {Promise}\r\n */\r\nexport async function createItemMacro(item, slot) {\r\n    const command = `game.shadowrun5e.rollItemMacro(\"${item.name}\");`;\r\n    let macro = game.macros.entities.find((m) => m.name === item.name);\r\n    if (!macro) {\r\n        macro = (await Macro.create(\r\n            {\r\n                name: item.name,\r\n                type: 'script',\r\n                img: item.img,\r\n                command: command,\r\n                flags: { 'shadowrun5e.itemMacro': true },\r\n            },\r\n            { displaySheet: false },\r\n        )) as Macro;\r\n    }\r\n    if (macro) game.user.assignHotbarMacro(macro, slot);\r\n}\r\n\r\n/**\r\n * Create a Macro from an Item drop.\r\n * Get an existing item macro if one exists, otherwise create a new one.\r\n * @param {string} itemName\r\n * @return {Promise}\r\n */\r\nexport function rollItemMacro(itemName) {\r\n    const speaker = ChatMessage.getSpeaker();\r\n    let actor;\r\n    if (speaker.token) actor = game.actors.tokens[speaker.token];\r\n    if (!actor) actor = game.actors.get(speaker.actor);\r\n    const item = actor ? actor.items.find((i) => i.name === itemName) : null;\r\n    if (!item) {\r\n        // @ts-ignore\r\n        return ui.notifications.warn(`Your controlled Actor does not have an item named ${itemName}`);\r\n    }\r\n\r\n    return item.castAction();\r\n}","import { HandlebarManager } from './handlebars/HandlebarManager';\r\nimport {HooksManager} from \"./hooks\";\r\n\r\n/* -------------------------------------------- */\r\n/*  Foundry VTT Initialization                  */\r\n/* -------------------------------------------- */\r\n\r\n\r\nHooksManager.registerHooks();\r\nHandlebarManager.registerHelpers();","import { VersionMigration } from './VersionMigration';\r\nimport { LegacyMigration } from './versions/LegacyMigration';\r\nimport { Version0_6_5 } from './versions/Version0_6_5';\r\nimport { Version0_6_10 } from './versions/Version0_6_10';\r\nimport {Version0_7_2} from \"./versions/Version0_7_2\";\r\n\r\ntype VersionDefinition = {\r\n    versionNumber: string;\r\n    migration: VersionMigration;\r\n};\r\nexport class Migrator {\r\n    // Map of all version migrations to their target version numbers.\r\n    private static readonly s_Versions: VersionDefinition[] = [\r\n        { versionNumber: LegacyMigration.TargetVersion, migration: new LegacyMigration() },\r\n        { versionNumber: Version0_6_5.TargetVersion, migration: new Version0_6_5() },\r\n        { versionNumber: Version0_6_10.TargetVersion, migration: new Version0_6_10() },\r\n        { versionNumber: Version0_7_2.TargetVersion, migration: new Version0_7_2() },\r\n    ];\r\n\r\n    //TODO: Call on Init()\r\n    public static async BeginMigration() {\r\n        let currentVersion = game.settings.get(VersionMigration.MODULE_NAME, VersionMigration.KEY_DATA_VERSION);\r\n        if (currentVersion === undefined || currentVersion === null) {\r\n            currentVersion = VersionMigration.NO_VERSION;\r\n        }\r\n\r\n        const migrations = Migrator.s_Versions.filter(({ versionNumber }) => {\r\n            // if versionNUmber is greater than currentVersion, we need to apply this migration\r\n            return this.compareVersion(versionNumber, currentVersion) === 1;\r\n        });\r\n\r\n        // No migrations are required, exit.\r\n        if (migrations.length === 0) {\r\n            return;\r\n        }\r\n\r\n        const localizedWarningTitle = game.i18n.localize('SR5.MIGRATION.WarningTitle');\r\n        const localizedWarningHeader = game.i18n.localize('SR5.MIGRATION.WarningHeader');\r\n        const localizedWarningRequired = game.i18n.localize('SR5.MIGRATION.WarningRequired');\r\n        const localizedWarningDescription = game.i18n.localize('SR5.MIGRATION.WarningDescription');\r\n        const localizedWarningBackup = game.i18n.localize('SR5.MIGRATION.WarningBackup');\r\n        const localizedWarningBegin = game.i18n.localize('SR5.MIGRATION.BeginMigration');\r\n\r\n        const d = new Dialog({\r\n            title: localizedWarningTitle,\r\n            content:\r\n                `<h2 style=\"color: red; text-align: center\">${localizedWarningHeader}</h2>` +\r\n                `<p style=\"text-align: center\"><i>${localizedWarningRequired}</i></p>` +\r\n                `<p>${localizedWarningDescription}</p>` +\r\n                `<h3 style=\"color: red\">${localizedWarningBackup}</h3>`,\r\n            buttons: {\r\n                ok: {\r\n                    label: localizedWarningBegin,\r\n                    callback: () => this.migrate(migrations),\r\n                },\r\n            },\r\n            default: 'ok',\r\n        });\r\n        d.render(true);\r\n    }\r\n\r\n    private static async migrate(migrations: VersionDefinition[]) {\r\n        // we want to apply migrations in ascending order until we're up to the latest\r\n        migrations.sort((a, b) => {\r\n            return this.compareVersion(a.versionNumber, b.versionNumber);\r\n        });\r\n\r\n        await this.migrateWorld(game, migrations);\r\n        await this.migrateCompendium(game, migrations);\r\n\r\n        const localizedWarningTitle = game.i18n.localize('SR5.MIGRATION.SuccessTitle');\r\n        const localizedWarningHeader = game.i18n.localize('SR5.MIGRATION.SuccessHeader');\r\n        const localizedSuccessDescription = game.i18n.localize('SR5.MIGRATION.SuccessDescription');\r\n        const localizedSuccessPacksInfo = game.i18n.localize('SR5.MIGRATION.SuccessPacksInfo');\r\n        const localizedSuccessConfirm = game.i18n.localize('SR5.MIGRATION.SuccessConfirm');\r\n        const packsDialog = new Dialog({\r\n            title: localizedWarningTitle,\r\n            content:\r\n                `<h2 style=\"text-align: center; color: green\">${localizedWarningHeader}</h2>` +\r\n                `<p>${localizedSuccessDescription}</p>` +\r\n                `<p style=\"text-align: center\"><i>${localizedSuccessPacksInfo}</i></p>`,\r\n            buttons: {\r\n                ok: {\r\n                    icon: '<i class=\"fas fa-check\"></i>',\r\n                    label: localizedSuccessConfirm,\r\n                },\r\n            },\r\n            default: 'ok',\r\n        });\r\n        packsDialog.render(true);\r\n    }\r\n\r\n    /**\r\n     * Migrate all world objects\r\n     * @param game\r\n     * @param migrations\r\n     */\r\n    private static async migrateWorld(game: Game, migrations: VersionDefinition[]) {\r\n        // Run the migrations in order\r\n        for (const { migration } of migrations) {\r\n            await migration.Migrate(game);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Iterate over all world compendium packs\r\n     * @param game Game that will be migrated\r\n     * @param migrations Instances of the version migration\r\n     */\r\n    private static async migrateCompendium(game: Game, migrations: VersionDefinition[]) {\r\n        // Migrate World Compendium Packs\r\n        const packs = game.packs.filter((pack) => pack.metadata.package === 'world' && ['Actor', 'Item', 'Scene'].includes(pack.metadata.entity));\r\n\r\n        // Run the migrations in order on each pack.\r\n        for (const pack of packs) {\r\n            for (const { migration } of migrations) {\r\n                await migration.MigrateCompendiumPack(pack);\r\n            }\r\n        }\r\n    }\r\n\r\n    // found at: https://helloacm.com/the-javascript-function-to-compare-version-number-strings/\r\n    // updated for typescript\r\n    /**\r\n     * compare two version numbers, returns 1 if v1 > v2, -1 if v1 < v2, 0 if equal\r\n     * @param v1\r\n     * @param v2\r\n     */\r\n    public static compareVersion(v1: string, v2: string) {\r\n        const s1 = v1.split('.').map((s) => parseInt(s, 10));\r\n        const s2 = v2.split('.').map((s) => parseInt(s, 10));\r\n        const k = Math.min(v1.length, v2.length);\r\n        for (let i = 0; i < k; ++i) {\r\n            if (s1[i] > s2[i]) return 1;\r\n            if (s1[i] < s2[i]) return -1;\r\n        }\r\n        return v1.length === v2.length ? 0 : v1.length < v2.length ? -1 : 1;\r\n    }\r\n}\r\n","import { SR5Actor } from '../actor/SR5Actor';\r\n\r\n/**\r\n * Converts a game's data model from source version to a target version.\r\n * Extending classes are only required to handle items, actors, and scenes,\r\n *  other methods are implementable purely for convenience and atomicity.\r\n */\r\nexport abstract class VersionMigration {\r\n    static readonly MODULE_NAME = 'shadowrun5e';\r\n    static readonly KEY_DATA_VERSION = 'systemMigrationVersion';\r\n    static readonly NO_VERSION = '0';\r\n\r\n    private m_Abort: boolean = false;\r\n    private m_AbortReason: string;\r\n\r\n    /**\r\n     * The allowed version this migrator should be able to operate on.\r\n     */\r\n    public abstract get SourceVersion(): string;\r\n    /**\r\n     * The resulting version this migrator will produce.\r\n     */\r\n    public abstract get TargetVersion(): string;\r\n\r\n    public get SourceVersionFriendlyName(): string {\r\n        return `v${this.SourceVersion}`;\r\n    }\r\n    public get TargetVersionFriendlyName(): string {\r\n        return `v${this.TargetVersion}`;\r\n    }\r\n\r\n    /**\r\n     * Flag the migration to be aborted.\r\n     * @param reason The reason that the migration must be aborted, to be displayed\r\n     *  to the user and returned from the migration call.\r\n     */\r\n    protected abort(reason: string): void {\r\n        this.m_Abort = true;\r\n        this.m_AbortReason = reason;\r\n        // @ts-ignore\r\n        ui.notifications.error(`Data migration has been aborted: ${reason}`, { permanent: true });\r\n    }\r\n\r\n    /**\r\n     * Begin migration for the specified game.\r\n     * @param game The world that should be migrated.\r\n     */\r\n    public async Migrate(game: Game) {\r\n        // @ts-ignore TODO Unignore when Foundry Types updates\r\n        ui.notifications.info(`${game.i18n.localize('SR5.MIGRATION.BeginNotification')} ${this.SourceVersionFriendlyName} -> ${this.TargetVersionFriendlyName}.`);\r\n        // @ts-ignore TODO Unignore when Foundry Types updates\r\n        ui.notifications.warn(game.i18n.localize('SR5.MIGRATION.DoNotCloseNotification'), {\r\n            permanent: true,\r\n        });\r\n\r\n        // Map of entities to update, store until later to reduce chance of partial updates\r\n        // which may result in impossible game states.\r\n        const entityUpdates: Map<Entity, EntityUpdate> = new Map<Entity, EntityUpdate>();\r\n\r\n        // Migrate World Items\r\n        await this.PreMigrateItemData(game, entityUpdates);\r\n        if (this.m_Abort) {\r\n            return Promise.reject(this.m_AbortReason);\r\n        }\r\n        await this.IterateItems(game, entityUpdates);\r\n        await this.PostMigrateItemData(game, entityUpdates);\r\n        if (this.m_Abort) {\r\n            return Promise.reject(this.m_AbortReason);\r\n        }\r\n\r\n        // Migrate World Actors\r\n        await this.PreMigrateActorData(game, entityUpdates);\r\n        if (this.m_Abort) {\r\n            return Promise.reject(this.m_AbortReason);\r\n        }\r\n        await this.IterateActors(game, entityUpdates);\r\n        await this.PostMigrateActorData(game, entityUpdates);\r\n        if (this.m_Abort) {\r\n            return Promise.reject(this.m_AbortReason);\r\n        }\r\n\r\n        // Migrate Actor Tokens\r\n        await this.PreMigrateSceneData(game, entityUpdates);\r\n        if (this.m_Abort) {\r\n            return Promise.reject(this.m_AbortReason);\r\n        }\r\n        await this.IterateScenes(game, entityUpdates);\r\n        await this.PostMigrateSceneData(game, entityUpdates);\r\n        if (this.m_Abort) {\r\n            return Promise.reject(this.m_AbortReason);\r\n        }\r\n\r\n        // Apply the updates, this should *always* work, now that parsing is complete.\r\n        await this.Apply(entityUpdates);\r\n\r\n        await game.settings.set(VersionMigration.MODULE_NAME, VersionMigration.KEY_DATA_VERSION, this.TargetVersion);\r\n        // @ts-ignore TODO Unignore when Foundry Types updates\r\n        ui.notifications.info(`${game.i18n.localize('SR5.MIGRATION.SuccessNotification')} ${this.TargetVersion}.`, { permanent: true });\r\n    }\r\n\r\n    /**\r\n     * Applies the specified mapping of entities, iteratively updating each.\r\n     * @param entityUpdates A mapping of entity updateData pairs.\r\n     */\r\n    protected async Apply(entityUpdates: Map<Entity, EntityUpdate>) {\r\n        for (const [entity, { updateData, embeddedItems }] of entityUpdates) {\r\n            if (embeddedItems !== null) {\r\n                const actor = entity as SR5Actor;\r\n                await actor.updateOwnedItem(embeddedItems);\r\n            }\r\n            await entity.update(updateData, { enforceTypes: false });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Iterate through all scenes and migrate each if needed.\r\n     * @param game\r\n     * @param entityUpdates\r\n     */\r\n    protected async IterateScenes(game: Game, entityUpdates: Map<Entity, EntityUpdate>) {\r\n        //@ts-ignore  // TypeScript expects entries (Collection.entries) to be a call, yet it's a get property.\r\n        for (const scene of game.scenes.entries) {\r\n            try {\r\n                if (!(await this.ShouldMigrateSceneData(scene))) {\r\n                    continue;\r\n                }\r\n\r\n                if (scene._id === 'MAwSFhlXRipixOWw') {\r\n                    console.log('Scene Pre-Update');\r\n                    console.log(scene);\r\n                }\r\n\r\n                console.log(`Migrating Scene entity ${scene.name}`);\r\n                const updateData = await this.MigrateSceneData(duplicate(scene.data));\r\n\r\n                let hasTokenUpdates = false;\r\n                updateData.tokens = await Promise.all(\r\n                    // @ts-ignore\r\n                    scene.data.tokens.map(async (token) => {\r\n                        if (isObjectEmpty(token.actorData)) {\r\n                            return token;\r\n                        }\r\n\r\n                        let tokenDataUpdate = await this.MigrateActorData(token.actorData);\r\n                        if (!isObjectEmpty(tokenDataUpdate)) {\r\n                            hasTokenUpdates = true;\r\n                            tokenDataUpdate['_id'] = token._id;\r\n\r\n                            const newToken = duplicate(token);\r\n                            newToken.actorData = await mergeObject(token.actorData, tokenDataUpdate, {\r\n                                enforceTypes: false,\r\n                                inplace: false,\r\n                            });\r\n                            console.log(newToken);\r\n                            return newToken;\r\n                        } else {\r\n                            return token;\r\n                        }\r\n                    }),\r\n                );\r\n                if (scene._id === 'MAwSFhlXRipixOWw') {\r\n                    console.log('Scene Pre-Update');\r\n                    console.log(scene);\r\n                }\r\n\r\n                if (isObjectEmpty(updateData)) {\r\n                    continue;\r\n                }\r\n\r\n                expandObject(updateData);\r\n                entityUpdates.set(scene, {\r\n                    updateData,\r\n                    embeddedItems: null,\r\n                });\r\n            } catch (error) {\r\n                console.error(error);\r\n                return Promise.reject(error);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Iterate through all items and migrate each if needed.\r\n     * @param game The game to be updated.\r\n     * @param entityUpdates The current map of entity updates.\r\n     */\r\n    protected async IterateItems(game: Game, entityUpdates: Map<Entity, EntityUpdate>) {\r\n        for (const item of game.items.entities) {\r\n            try {\r\n                if (!(await this.ShouldMigrateItemData(item.data))) {\r\n                    continue;\r\n                }\r\n\r\n                console.log(`Migrating Item: ${item.name}`);\r\n                const updateData = await this.MigrateItemData(item.data);\r\n\r\n                if (isObjectEmpty(updateData)) {\r\n                    continue;\r\n                }\r\n\r\n                expandObject(updateData);\r\n                entityUpdates.set(item, {\r\n                    updateData,\r\n                    embeddedItems: null,\r\n                });\r\n            } catch (error) {\r\n                console.error(error);\r\n                return Promise.reject(error);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Iterate through all actors and migrate each if needed.\r\n     * @param game The game to be updated.\r\n     * @param entityUpdates The current map of entity updates.\r\n     */\r\n    protected async IterateActors(game: Game, entityUpdates: Map<Entity, EntityUpdate>) {\r\n        for (const actor of game.actors.entities) {\r\n            try {\r\n                if (!(await this.ShouldMigrateActorData(actor.data))) {\r\n                    continue;\r\n                }\r\n\r\n                console.log(`Migrating Actor ${actor.name}`);\r\n                console.log(actor);\r\n                const updateData = await this.MigrateActorData(duplicate(actor.data));\r\n                console.log(updateData);\r\n                let items = [];\r\n                if (updateData.items) {\r\n                    items = updateData.items;\r\n                    delete updateData.items;\r\n                }\r\n\r\n                expandObject(updateData);\r\n\r\n                entityUpdates.set(actor, {\r\n                    updateData,\r\n                    embeddedItems: items,\r\n                });\r\n            } catch (error) {\r\n                console.error(error);\r\n                return Promise.reject(error);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Iterate over an actor's items, updating those that need updating.\r\n     * @param actorData The actor to iterate over\r\n     * @param updateData The existing update data to merge into\r\n     */\r\n    protected async IterateActorItems(actorData: Actor.Data, updateData) {\r\n        let hasItemUpdates = false;\r\n        // @ts-ignore\r\n        if (actorData.items !== undefined) {\r\n            const items = await Promise.all(\r\n                // @ts-ignore\r\n                actorData.items.map(async (item) => {\r\n                    let itemUpdate = await this.MigrateItemData(item);\r\n\r\n                    if (!isObjectEmpty(itemUpdate)) {\r\n                        hasItemUpdates = true;\r\n                        itemUpdate['_id'] = item._id;\r\n                        return await mergeObject(item, itemUpdate, {\r\n                            enforceTypes: false,\r\n                            inplace: false,\r\n                        });\r\n                    } else {\r\n                        return item;\r\n                    }\r\n                }),\r\n            );\r\n            if (hasItemUpdates) {\r\n                updateData.items = items;\r\n            }\r\n        }\r\n\r\n        return updateData;\r\n    }\r\n\r\n    /**\r\n     * Check if a scene requires updates.\r\n     * @param scene The scene to check.\r\n     * @return A promise that resolves true or false.\r\n     */\r\n    protected async ShouldMigrateSceneData(scene: Scene): Promise<boolean> {\r\n        return false;\r\n    }\r\n    /**\r\n     * Migrate the specified scene's data.\r\n     * @param scene The scene to migrate.\r\n     * @return A promise that resolves with the update data.\r\n     */\r\n    protected async MigrateSceneData(scene: any): Promise<any> {\r\n        return {};\r\n    }\r\n    /**\r\n     * Do something right before scene data is migrated.\r\n     * @param game The game to be updated.\r\n     * @param entityUpdates The current map of entity updates.\r\n     */\r\n    protected async PreMigrateSceneData(game: Game, entityUpdates: Map<Entity, EntityUpdate>): Promise<void> {}\r\n    /**\r\n     * Do something right before scene data is migrated.\r\n     * @param game The game to be updated.\r\n     * @param entityUpdates The current map of entity updates.\r\n     */\r\n    protected async PostMigrateSceneData(game: Game, entityUpdates: Map<Entity, EntityUpdate>): Promise<void> {}\r\n\r\n    /**\r\n     * Check if an item requires updates.\r\n     * @param item The item to check.\r\n     * @return A promise that resolves true or false.\r\n     */\r\n    protected async ShouldMigrateItemData(item: Entity.Data): Promise<boolean> {\r\n        return false;\r\n    }\r\n    /**\r\n     * Migrate the specified item's data.\r\n     * @param item The item to migrate.\r\n     * @return A promise that resolves with the update data.\r\n     */\r\n    protected async MigrateItemData(item: Entity.Data): Promise<any> {\r\n        return {};\r\n    }\r\n    /**\r\n     * Do something right before item data is migrated.\r\n     * @param game The game to be updated.\r\n     * @param entityUpdates The current map of entity updates.\r\n     */\r\n    protected async PreMigrateItemData(game: Game, entityUpdates: Map<Entity, EntityUpdate>): Promise<void> {}\r\n    /**\r\n     * Do something right before item data is migrated.\r\n     * @param game The game to be updated.\r\n     * @param entityUpdates The current map of entity updates.\r\n     */\r\n    protected async PostMigrateItemData(game: Game, entityUpdates: Map<Entity, EntityUpdate>): Promise<void> {}\r\n\r\n    /**\r\n     * Check if an actor requires updates.\r\n     * @param actor The actor to check.\r\n     * @return A promise that resolves true or false.\r\n     */\r\n    protected async ShouldMigrateActorData(actor: Actor.Data): Promise<boolean> {\r\n        return false;\r\n    }\r\n    /**\r\n     * Migrate the specified actor's data.\r\n     * @param actor The actor to migrate.\r\n     * @return A promise that resolves with the update data.\r\n     */\r\n    protected async MigrateActorData(actor: Actor.Data): Promise<any> {\r\n        return {};\r\n    }\r\n    /**\r\n     * Do something right before actor data is migrated.\r\n     * @param game The game to be updated.\r\n     * @param entityUpdates The current map of entity updates.\r\n     */\r\n    protected async PreMigrateActorData(game: Game, entityUpdates: Map<Entity, EntityUpdate>): Promise<void> {}\r\n    /**\r\n     * Do something right after actor data is migrated.\r\n     * @param game The game to be updated.\r\n     * @param entityUpdates The current map of entity updates.\r\n     */\r\n    protected async PostMigrateActorData(game: Game, entityUpdates: Map<Entity, EntityUpdate>): Promise<void> {}\r\n\r\n    /**\r\n     * Migrate a compendium pack\r\n     * @param pack\r\n     */\r\n    public async MigrateCompendiumPack(pack: Compendium) {\r\n        const entity = pack.metadata.entity;\r\n        if (!['Actor', 'Item', 'Scene'].includes(entity)) return;\r\n\r\n        // Begin by requesting server-side data model migration and get the migrated content\r\n        await pack.migrate({});\r\n        const content = await pack.getContent();\r\n\r\n        // Iterate over compendium entries - applying fine-tuned migration functions\r\n        for (let ent of content) {\r\n            try {\r\n                let updateData: any = null;\r\n                if (entity === 'Item') {\r\n                    updateData = await this.MigrateItemData(ent.data);\r\n\r\n                    if (isObjectEmpty(updateData)) {\r\n                        continue;\r\n                    }\r\n\r\n                    expandObject(updateData);\r\n                    updateData['_id'] = ent._id;\r\n                    await pack.updateEntity(updateData);\r\n                    // TODO: Uncomment when foundry allows embeddeds to be updated in packs\r\n                    // } else if (entity === 'Actor') {\r\n                    //     updateData = await this.MigrateActorData(ent.data);\r\n                    //\r\n                    //     if (isObjectEmpty(updateData)) {\r\n                    //         continue;\r\n                    //     }\r\n                    //\r\n                    //     updateData['_id'] = ent._id;\r\n                    //     await pack.updateEntity(updateData);\r\n                } else if (entity === 'Scene') {\r\n                    updateData = await this.MigrateSceneData(ent.data);\r\n\r\n                    if (isObjectEmpty(updateData)) {\r\n                        continue;\r\n                    }\r\n\r\n                    expandObject(updateData);\r\n                    updateData['_id'] = ent._id;\r\n                    await pack.updateEntity(updateData);\r\n                }\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        }\r\n        console.log(`Migrated all ${entity} entities from Compendium ${pack.collection}`);\r\n    }\r\n}\r\n\r\ntype EntityUpdate = {\r\n    updateData: any;\r\n    embeddedItems: null | any[];\r\n};\r\n","import { VersionMigration } from '../VersionMigration';\r\n\r\n/**\r\n * Migrates the data model for Legacy migrations prior to 0.6.4\r\n */\r\nexport class LegacyMigration extends VersionMigration {\r\n    get SourceVersion(): string {\r\n        return '0';\r\n    }\r\n    get TargetVersion(): string {\r\n        return LegacyMigration.TargetVersion;\r\n    }\r\n    static get TargetVersion(): string {\r\n        return '0.6.4';\r\n    }\r\n\r\n    protected async MigrateActorData(actorData: Actor.Data): Promise<any> {\r\n        let updateData: any = {};\r\n        LegacyMigration.migrateActorOverflow(actorData, updateData);\r\n        LegacyMigration.migrateActorSkills(actorData, updateData);\r\n\r\n        updateData = await this.IterateActorItems(actorData, updateData);\r\n\r\n        return updateData;\r\n    }\r\n\r\n    protected async MigrateItemData(item: Entity.Data): Promise<any> {\r\n        const updateData = {};\r\n        LegacyMigration.migrateDamageTypeAndElement(item, updateData);\r\n        LegacyMigration.migrateItemsAddActions(item, updateData);\r\n        LegacyMigration.migrateActorOverflow(item, updateData);\r\n        LegacyMigration.migrateItemsAddCapacity(item, updateData);\r\n        LegacyMigration.migrateItemsAmmo(item, updateData);\r\n        LegacyMigration.migrateItemsConceal(item, updateData);\r\n        return updateData;\r\n    }\r\n\r\n    protected async MigrateSceneData(scene: any): Promise<any> {\r\n        return {};\r\n    }\r\n\r\n    protected async ShouldMigrateActorData(actorData: Actor.Data): Promise<boolean> {\r\n        return true;\r\n    }\r\n\r\n    protected async ShouldMigrateItemData(item: Entity.Data): Promise<boolean> {\r\n        return true;\r\n    }\r\n\r\n    protected async ShouldMigrateSceneData(scene: Scene): Promise<boolean> {\r\n        // @ts-ignore\r\n        return scene.data.tokens?.length > 0;\r\n    }\r\n\r\n    /**\r\n     * Migrate actor overflow from an integer to an object\r\n     * - it wasn't even displayed before so we know it is 0\r\n     * @param actorData\r\n     * @param updateData\r\n     */\r\n    private static migrateActorOverflow(actorData, updateData) {\r\n        if (getProperty(actorData.data, 'track.physical.overflow') === 0) {\r\n            updateData['data.track.physical.overflow.value'] = 0;\r\n            updateData['data.track.physical.overflow.max'] = 0;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Migrate actor skills specializations to be a list instead of string\r\n     * @param actorData\r\n     * @param updateData\r\n     */\r\n    private static migrateActorSkills(actorData, updateData) {\r\n        if (!actorData.data?.skills?.active) return;\r\n        const splitRegex = /[,\\/|.]+/;\r\n\r\n        const reducer = (running, [key, val]) => {\r\n            if (!Array.isArray(val.specs) && val.specs) {\r\n                running[key] = {\r\n                    specs: val.specs.split(splitRegex).filter((s) => s !== ''),\r\n                };\r\n            }\r\n            return running;\r\n        };\r\n\r\n        if (actorData.data.skills) {\r\n            updateData['data.skills.active'] = Object.entries(actorData.data.skills.active).reduce(reducer, {});\r\n            if (actorData.data.skills.knowledge) {\r\n                updateData['data.skills.knowledge.street.value'] = Object.entries(actorData.data.skills?.knowledge?.street?.value).reduce(reducer, {});\r\n                updateData['data.skills.knowledge.professional.value'] = Object.entries(actorData.data.skills?.knowledge?.professional?.value).reduce(reducer, {});\r\n                updateData['data.skills.knowledge.academic.value'] = Object.entries(actorData.data.skills?.knowledge?.academic?.value).reduce(reducer, {});\r\n                updateData['data.skills.knowledge.interests.value'] = Object.entries(actorData.data.skills?.knowledge?.interests?.value).reduce(reducer, {});\r\n            }\r\n            if (actorData.data.skills.language) {\r\n                updateData['data.skills.language.value'] = Object.entries(actorData.data.skills?.language?.value).reduce(reducer, {});\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param item\r\n     * @param updateData\r\n     */\r\n    private static migrateDamageTypeAndElement(item, updateData) {\r\n        // console.log('Migrating Damage and Elements');\r\n        if (item.data.action) {\r\n            const action = item.data.action;\r\n            if (typeof action.damage.type === 'string') {\r\n                updateData['data.action.damage.type.base'] = item.data.action.damage.type;\r\n            }\r\n            if (typeof action.damage.element === 'string') {\r\n                updateData['data.action.damage.element.base'] = item.data.action.damage.element;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Migrate ammo from ranged weapons only to all weapons\r\n     * @param item\r\n     * @param updateData\r\n     */\r\n    private static migrateItemsAmmo(item, updateData) {\r\n        // console.log('Migrating Ammo');\r\n        if (item.type === 'weapon' && item.data.ammo === undefined) {\r\n            let currentAmmo = { value: 0, max: 0 };\r\n            if (item.data.category === 'range' && item.data.range && item.data.range.ammo) {\r\n                // copy over ammo count\r\n                const oldAmmo = item.data.range.ammo;\r\n                currentAmmo.value = oldAmmo.value;\r\n                currentAmmo.max = oldAmmo.max;\r\n            }\r\n            updateData['data.ammo'] = {\r\n                spare_clips: {\r\n                    value: 0,\r\n                    max: 0,\r\n                },\r\n                current: {\r\n                    value: currentAmmo.value,\r\n                    max: currentAmmo.max,\r\n                },\r\n            };\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Migrate conceal name\r\n     * @param item\r\n     * @param updateData\r\n     */\r\n    private static migrateItemsConceal(item, updateData) {\r\n        if (item.data.technology?.concealability !== undefined) {\r\n            updateData['data.technology.conceal'] = {\r\n                base: item.data.technology.concealability,\r\n            };\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Add capacity to items\r\n     * @param item\r\n     * @param updateData\r\n     */\r\n    private static migrateItemsAddCapacity(item, updateData) {\r\n        if (['cyberware'].includes(item.type)) {\r\n            if (item.data.capacity === undefined) {\r\n                updateData.data.capacity = 0;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Add actions to needed items\r\n     * @param item\r\n     * @param updateData\r\n     */\r\n    private static migrateItemsAddActions(item, updateData) {\r\n        if (['quality', 'cyberware'].includes(item.type)) {\r\n            if (item.data.action === undefined) {\r\n                const action = {\r\n                    type: '',\r\n                    category: '',\r\n                    attribute: '',\r\n                    attribute2: '',\r\n                    skill: '',\r\n                    spec: false,\r\n                    mod: 0,\r\n                    limit: {\r\n                        value: 0,\r\n                        attribute: '',\r\n                    },\r\n                    extended: false,\r\n                    damage: {\r\n                        type: '',\r\n                        element: '',\r\n                        value: 0,\r\n                        ap: {\r\n                            value: 0,\r\n                        },\r\n                        attribute: '',\r\n                    },\r\n                    opposed: {\r\n                        type: '',\r\n                        attribute: '',\r\n                        attribute2: '',\r\n                        skill: '',\r\n                        mod: 0,\r\n                        description: '',\r\n                    },\r\n                };\r\n                if (!updateData.data) updateData.data = {};\r\n                updateData.data.action = action;\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { VersionMigration } from '../VersionMigration';\r\nimport SR5ActorType = Shadowrun.SR5ActorType;\r\n\r\n/**\r\n * Add default value of willpower to the full_defense_attribute field\r\n */\r\nexport class Version0_6_10 extends VersionMigration {\r\n    get SourceVersion(): string {\r\n        return '0.6.9';\r\n    }\r\n    get TargetVersion(): string {\r\n        return Version0_6_10.TargetVersion;\r\n    }\r\n    static get TargetVersion(): string {\r\n        return '0.6.10';\r\n    }\r\n\r\n    protected async MigrateActorData(actorData: SR5ActorType): Promise<any> {\r\n        if (actorData.data?.attributes?.edge === undefined) return {};\r\n        return {\r\n            data: {\r\n                attributes: {\r\n                    edge: {\r\n                        base: actorData.data.attributes.edge.max,\r\n                        value: actorData.data.attributes.edge.max,\r\n                        uses: actorData.data.attributes.edge.value,\r\n                    },\r\n                },\r\n            },\r\n        };\r\n    }\r\n\r\n    protected async ShouldMigrateActorData(actorData: SR5ActorType): Promise<boolean> {\r\n        return actorData.data.attributes.edge?.uses === undefined;\r\n    }\r\n\r\n    protected async ShouldMigrateSceneData(scene: Scene): Promise<boolean> {\r\n        // @ts-ignore\r\n        return scene.data.tokens?.length > 0;\r\n    }\r\n}\r\n","import { VersionMigration } from '../VersionMigration';\r\n\r\n/**\r\n * Add default value of willpower to the full_defense_attribute field\r\n */\r\nexport class Version0_6_5 extends VersionMigration {\r\n    get SourceVersion(): string {\r\n        return '0.6.4';\r\n    }\r\n    get TargetVersion(): string {\r\n        return Version0_6_5.TargetVersion;\r\n    }\r\n    static get TargetVersion(): string {\r\n        return '0.6.5';\r\n    }\r\n\r\n    protected async MigrateActorData(actorData: Actor.Data): Promise<any> {\r\n        let updateData: any = {};\r\n        if (updateData.data === undefined) updateData.data = {};\r\n        updateData.data.full_defense_attribute = 'willpower';\r\n        return updateData;\r\n    }\r\n\r\n    protected async ShouldMigrateActorData(actorData: any): Promise<boolean> {\r\n        return actorData.data.full_defense_attribute === undefined;\r\n    }\r\n\r\n    protected async ShouldMigrateSceneData(scene: Scene): Promise<boolean> {\r\n        // @ts-ignore\r\n        return scene.data.tokens?.length > 0;\r\n    }\r\n}\r\n","// TODO: How to trigger test migration.\r\n// TODO: How to test migration results?\r\n\r\n\r\nimport {VersionMigration} from \"../VersionMigration\";\r\nimport {SR5} from \"../../config\";\r\nimport SR5ActorBase = Shadowrun.SR5ActorBase;\r\n\r\n/** NPC / Grunt feature set\r\n * - Add npc character data.\r\n * - Add track disabled feature\r\n */\r\nexport class Version0_7_2 extends VersionMigration {\r\n    get SourceVersion(): string {\r\n        return '0.7.1';\r\n    }\r\n\r\n    get TargetVersion(): string {\r\n        return Version0_7_2.TargetVersion;\r\n    }\r\n\r\n    static get TargetVersion(): string {\r\n        return '0.7.2';\r\n    }\r\n\r\n    static NoNPCDataForCharacter(actorData: SR5ActorBase): boolean {\r\n        // Use in operator since TypeScript can handle that for union types instead of property usage.\r\n        return actorData.type === 'character' && (\r\n            !(\"is_npc\" in actorData?.data) ||\r\n            !(\"npc\" in actorData?.data)\r\n        );\r\n    }\r\n\r\n    static UnsupportedMetatype(actorData: SR5ActorBase): boolean {\r\n        // TODO: Check on CharacterActorData.metatype typing (see ts-ignore)\r\n        //@ts-ignore // in-operator doesn't work here, as the underlying typing for metatype will result in string | number | undefined\r\n        const type = actorData.data.metatype?.toLowerCase() ?? '';\r\n        return actorData.type === 'character' &&\r\n            SR5.character.types.hasOwnProperty(type);\r\n    }\r\n\r\n    protected async MigrateActorData(actorData: SR5ActorBase): Promise<any> {\r\n        const updateData: {\r\n            data?: object,\r\n            attributes?: object\r\n        } = {};\r\n\r\n        if (Version0_7_2.UnsupportedMetatype(actorData)) {\r\n            // TODO: Check on CharacterActorData.metatype typing (see ts-ignore)\r\n            //@ts-ignore // in-operator doesn't work here, as the underlying typing for metatype will result in string | number | undefined\r\n            const type = actorData.data.metatype?.toLowerCase() ?? '';\r\n            // TODO: What to do with custom metatypes?\r\n            const metatypeData = {metatype: SR5.character.types.hasOwnProperty(type) ? type : 'human'};\r\n            updateData.data = {...updateData.data, ...metatypeData};\r\n        }\r\n\r\n        if (Version0_7_2.NoNPCDataForCharacter(actorData)) {\r\n            updateData.data = updateData.data ? updateData.data : {};\r\n            const npcData = {\r\n                is_npc: false,\r\n                npc: {\r\n                    is_grunt: false,\r\n                    professional_rating: 0\r\n                }\r\n            }\r\n            updateData.data = {...updateData.data, ...npcData};\r\n        }\r\n\r\n        return updateData;\r\n    }\r\n\r\n    protected async ShouldMigrateActorData(actorData: SR5ActorBase): Promise<boolean> {\r\n        return Version0_7_2.UnsupportedMetatype(actorData) || Version0_7_2.NoNPCDataForCharacter(actorData);\r\n    }\r\n}","import ModList = Shadowrun.ModList;\r\nimport ModListEntry = Shadowrun.ModListEntry;\r\n\r\nexport class PartsList<TType> {\r\n    get list(): ModList<TType> {\r\n        return this._list.slice();\r\n    }\r\n\r\n    get length(): number {\r\n        return this._list.length;\r\n    }\r\n\r\n    get total(): number {\r\n        let total = 0;\r\n        for (const part of this._list) {\r\n            if (typeof part.value === 'number') {\r\n                total += part.value;\r\n            }\r\n        }\r\n        return total;\r\n    }\r\n\r\n    get isEmpty(): boolean {\r\n        return this.length === 0;\r\n    }\r\n\r\n    getPartValue(name: string): TType | undefined {\r\n        return this._list.find((part) => part.name === name)?.value;\r\n    }\r\n\r\n    clear(): void {\r\n        this._list.length = 0;\r\n    }\r\n\r\n    private _list: ModList<TType>;\r\n\r\n    constructor(parts?: ModList<TType>) {\r\n        let actualParts = [] as ModList<TType>;\r\n        if (parts) {\r\n            if (Array.isArray(parts)) {\r\n                actualParts = parts;\r\n            } else if (typeof parts === 'object') {\r\n                for (const [name, value] of Object.entries(parts)) {\r\n                    if (value !== null && value !== undefined) {\r\n                        // if it's a number, we are dealing with an array as an object\r\n                        if (!isNaN(Number(name)) && typeof value === 'object') {\r\n                            actualParts.push({\r\n                                name: (value as ModListEntry<TType>).name,\r\n                                value: (value as ModListEntry<TType>).value,\r\n                            });\r\n                        } else {\r\n                            actualParts.push({\r\n                                name,\r\n                                value,\r\n                            } as ModListEntry<TType>);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this._list = actualParts;\r\n    }\r\n\r\n    addPart(name: string, value: TType): void {\r\n        this._list.push({\r\n            name,\r\n            value,\r\n        });\r\n    }\r\n\r\n    addUniquePart(name: string, value?: TType, overwrite = true): void {\r\n        const index = this._list.findIndex((part) => part.name === name);\r\n        if (index > -1) {\r\n            // if we exist and should've overwrite, return\r\n            if (!overwrite) return;\r\n\r\n            this._list.splice(index, 1);\r\n            // if we are passed undefined, remove the value\r\n            if (value === undefined || value === null) return;\r\n            // recursively go through until we no longer have a part of this name\r\n            this.addUniquePart(name, value);\r\n        } else if (value) {\r\n            this.addPart(name, value);\r\n        }\r\n    }\r\n\r\n    removePart(name: string): boolean {\r\n        const index = this._list.findIndex((part) => part.name === name);\r\n        if (index > -1) {\r\n            this._list.splice(index, 1);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    getMessageOutput() {\r\n        return this.list;\r\n    }\r\n\r\n    static AddUniquePart<TType>(list: ModList<TType>, name: string, value: TType, overwrite = true): ModList<TType> {\r\n        const parts = new PartsList(list);\r\n        parts.addUniquePart(name, value, overwrite);\r\n        return parts._list;\r\n    }\r\n\r\n    static Total(list: ModList<number>) {\r\n        const parts = new PartsList(list);\r\n        return parts.total;\r\n    }\r\n}\r\n","import ModList = Shadowrun.ModList;\r\nimport RollEvent = Shadowrun.RollEvent;\r\nimport BaseValuePair = Shadowrun.BaseValuePair;\r\nimport LabelField = Shadowrun.LabelField;\r\nimport AttackData = Shadowrun.AttackData;\r\nimport DamageData = Shadowrun.DamageData;\r\nimport { Helpers } from '../helpers';\r\nimport { SR5Actor } from '../actor/SR5Actor';\r\nimport { SR5Item } from '../item/SR5Item';\r\nimport {\r\n    createRollChatMessage, createTargetChatMessage, RollTargetChatMessage,\r\n    TargetChatMessageOptions\r\n} from '../chat';\r\nimport {CORE_FLAGS, CORE_NAME, DEFAULT_ROLL_NAME, FLAGS, SR, SYSTEM_NAME} from '../constants';\r\nimport { PartsList } from '../parts/PartsList';\r\nimport {ActionTestData} from \"../apps/dialogs/ShadowrunItemDialog\";\r\nimport BlastData = Shadowrun.BlastData;\r\nimport FireModeData = Shadowrun.FireModeData;\r\nimport DrainData = Shadowrun.DrainData;\r\nimport {ShadowrunTestDialog} from \"../apps/dialogs/ShadowrunTestDialog\";\r\nimport ModifiedDamageData = Shadowrun.ModifiedDamageData;\r\nimport LimitField = Shadowrun.LimitField;\r\nimport CombatData = Shadowrun.CombatData;\r\n\r\n// item, actor, dicePool, attack, defense, spell, form\r\nexport type Test =  {\r\n    label: string;\r\n    type: string;\r\n}\r\n\r\nexport interface TestDialogData {\r\n    parts: PartsList<number>\r\n    limit: number\r\n    wounds: boolean\r\n    extended: boolean\r\n    rollMode: keyof typeof CONFIG.Dice.rollModes;\r\n}\r\n\r\ninterface RollProps {\r\n    parts?: ModList<number>,\r\n    limit?: any,\r\n    explodeSixes?: boolean\r\n}\r\n\r\n// TODO: Separate into 'roll data' and 'template data', which only passes through but isn't used.\r\nexport interface BasicRollProps {\r\n    parts?: ModList<number>;\r\n    limit?: LimitField;\r\n    explodeSixes?: boolean;\r\n    title?: string;\r\n    actor?: SR5Actor;\r\n    target?: Token;\r\n    item?: SR5Item;\r\n    // Personal attack\r\n    attack?: AttackData\r\n    // Incoming attack for a defense test\r\n    incomingAttack?: AttackData;\r\n    damage?: ModifiedDamageData;\r\n    tests?: Test[];\r\n    description?: object;\r\n    previewTemplate?: boolean;\r\n    hideRollMessage?: boolean;\r\n    rollMode?: keyof typeof CONFIG.Dice.rollModes;\r\n    combat?: CombatData\r\n}\r\n\r\n/** Provide a clear interface of which value are guaranteed to be defined.\r\n     */\r\nexport interface BasicRollPropsDefaulted extends BasicRollProps {\r\n    title: string\r\n    parts: ModList<number>\r\n    explodeSixes: boolean\r\n    hideRollMessage: boolean\r\n    previewTemplate: boolean\r\n    rollMode: keyof typeof CONFIG.Dice.rollModes\r\n}\r\n\r\nexport interface RollDialogOptions {\r\n    environmental?: number\r\n    pool?: boolean\r\n    extended?: boolean\r\n    limit?: boolean\r\n    wounds?: boolean\r\n}\r\n\r\nexport interface AdvancedRollProps extends BasicRollProps {\r\n    event?: RollEvent;\r\n    extended?: boolean;\r\n    wounds?: boolean;\r\n    after?: (roll: Roll | undefined) => void;\r\n    attack?: AttackData;\r\n    fireMode?: FireModeData\r\n    combat?: CombatData\r\n}\r\n\r\n/** Provide a clear interface of which value are guaranteed to be defined.\r\n     */\r\nexport interface AdvancedRollPropsDefaulted extends AdvancedRollProps {\r\n    parts: ModList<number>\r\n    wounds: boolean\r\n}\r\n\r\ntype ShadowrunRollData = {\r\n    limit: number\r\n    threshold: number\r\n    parts: ModList<number>\r\n    explodeSixes: boolean\r\n}\r\nexport class ShadowrunRoll extends Roll {\r\n    data: ShadowrunRollData\r\n    // add class Roll to the json so dice-so-nice works\r\n    toJSON(): any {\r\n        const data = super.toJSON();\r\n        data.class = 'Roll';\r\n        return data;\r\n    }\r\n\r\n    get sides(): number[] {\r\n        //@ts-ignore\r\n        // 0.7.x foundryVTT\r\n        if (this.terms) {\r\n            //@ts-ignore\r\n            return this.terms[0].results.map(result => result.result);\r\n        }\r\n\r\n        //@ts-ignore\r\n        // 0.6.x foundryVTT\r\n        return this.parts[0].rolls.map(roll => roll.roll);\r\n    }\r\n\r\n    get limit(): number {\r\n        return this.data.limit;\r\n    }\r\n\r\n    get threshold(): number {\r\n        return this.data.threshold;\r\n    }\r\n\r\n    get parts(): ModList<number> {\r\n        return this.data.parts;\r\n    }\r\n\r\n    get explodeSixes(): boolean {\r\n        return this.data.explodeSixes;\r\n    }\r\n\r\n    count(side: number): number {\r\n        const results = this.sides;\r\n        return results.reduce((counted, result) => result === side ? counted + 1 : counted, 0);\r\n    }\r\n\r\n    get hits(): number {\r\n        return this.total;\r\n    }\r\n\r\n    get pool(): number {\r\n        //@ts-ignore\r\n        // 0.7.x foundryVTT\r\n        if (this.terms) {\r\n            //@ts-ignore\r\n            return this.dice[0].number;\r\n        }\r\n\r\n        //@ts-ignore\r\n        // 0.6.x foundryVTT\r\n        return this.parts[0].rolls.length;\r\n    }\r\n\r\n    get glitched(): boolean {\r\n        let glitched = 0;\r\n        SR.die.glitch.forEach(die => glitched += this.count(die));\r\n        return glitched > Math.floor(this.pool / 2);\r\n    }\r\n}\r\n\r\nexport class ShadowrunRoller {\r\n    static async itemRoll(event, item: SR5Item, actionTestData?: ActionTestData): Promise<ShadowrunRoll | undefined> {\r\n        // Create common data for all item types.\r\n        const title = item.getRollName();\r\n        const actor = item.actor;\r\n        const attack =  item.getAttackData(0, actionTestData);\r\n        const parts = item.getRollPartsList();\r\n        const limit = item.getLimit();\r\n        const extended = item.getExtended();\r\n        const previewTemplate = item.hasTemplate;\r\n        const description = item.getChatData();\r\n        const tests = item.getOpposedTests();\r\n        const modifiers = await actor.getModifiers();\r\n\r\n        // Prepare the roll and dialog.\r\n        const advancedRollProps = {\r\n            hideRollMessage: true,\r\n            event: event,\r\n            actor,\r\n            parts,\r\n            limit,\r\n            extended,\r\n            tests\r\n        } as AdvancedRollProps;\r\n\r\n\r\n        // Reset dialog options to default values and set each according to item types.\r\n        const advancedDialogOptions = {\r\n            environmental: 0,\r\n        } as RollDialogOptions;\r\n        if (item.applyEnvironmentalModifiers()) {\r\n            advancedDialogOptions.environmental = modifiers.environmental.total;\r\n        }\r\n\r\n        const roll = await ShadowrunRoller.advancedRoll(advancedRollProps, advancedDialogOptions);\r\n\r\n        if (!roll) return;\r\n\r\n        if (attack) {\r\n            attack.hits = roll.hits;\r\n        }\r\n\r\n        // TODO: Separation of concerns. 'Roller' should only roll and prepare to roll.\r\n        //       Rules should be handled elsewhere. Attack Handler? Ranged, Melee, DirectSpell, IndirectSpell...\r\n        if (attack && item.isCombatSpell()) {\r\n            const spellAttack = item.getAttackData(roll.hits, actionTestData);\r\n            if (spellAttack) attack.damage = spellAttack.damage;\r\n        }\r\n\r\n\r\n        // Handle user targeting for for targeted messages and display.\r\n        const targets: Token[] = Helpers.getUserTargets();\r\n        // Allow for direct defense without token selection for ONE token targeted.\r\n        const target = targets.length === 1 ? targets[0] : undefined;\r\n\r\n        const rollChatOptions = {title, roll, actor, item, attack, previewTemplate, targets, target, description, tests};\r\n        await createRollChatMessage(rollChatOptions);\r\n\r\n        if (tests) {\r\n            const targetChatOptions = {actor, item, tests, roll, attack}\r\n            await ShadowrunRoller.targetsChatMessages(targets, targetChatOptions);\r\n        }\r\n\r\n        return roll;\r\n    }\r\n\r\n    static async resultingItemRolls(event, item: SR5Item, actionTestData? : ActionTestData) {\r\n        // Cast resulting tests from above Success Test depending on item type.\r\n        if (item.isComplexForm() && actionTestData?.complexForm) {\r\n            const level = actionTestData.complexForm.level;\r\n            const fade = item.getFade() + level;\r\n            const minFade = 2;\r\n            const totalFade = Math.max(fade, minFade);\r\n            await item.actor.rollFade({ event }, totalFade);\r\n        }\r\n        else if (item.isSpell()) {\r\n            // if (item.isCombatSpell() && roll) {\r\n            //     // TODO: isCombatSpell and roll does something but isn't handled.\r\n            // }\r\n            if (actionTestData?.spell) {\r\n                const force = actionTestData.spell.force;\r\n                const reckless = actionTestData.spell.reckless;\r\n                const drain = item.getDrain() + force + (reckless ? 3 : 0);\r\n                const minDrain = 2;\r\n                const totalDrain = Math.max(drain, minDrain);\r\n\r\n                await item.actor.rollDrain({ event }, totalDrain);\r\n            }\r\n        }\r\n        else if (item.isWeapon()) {\r\n            if (item.hasAmmo() && actionTestData?.rangedWeapon) {\r\n                const fireMode = actionTestData.rangedWeapon.fireMode.value || 1;\r\n                await item.useAmmo(fireMode);\r\n            }\r\n        }\r\n    }\r\n\r\n    static shadowrunFormula({\r\n        parts: partsProps,\r\n        limit,\r\n        explode,\r\n    }: {\r\n        parts: ModList<number>;\r\n        limit?: BaseValuePair<number> & LabelField;\r\n        explode?: boolean;\r\n    }): string {\r\n        const parts = new PartsList(partsProps);\r\n        const count = parts.total;\r\n        if (count <= 0) {\r\n            ui.notifications.warn(game.i18n.localize('SR5.RollOneDie'));\r\n            return '0d6cs>=5';\r\n        }\r\n        let formula = `${count}d6`;\r\n        if (explode) {\r\n            formula += 'x6';\r\n        }\r\n        if (limit?.value) {\r\n            formula += `kh${limit.value}`;\r\n        }\r\n        formula += 'cs>=5';\r\n        return formula;\r\n    }\r\n\r\n    static roll(props: RollProps): ShadowrunRoll|undefined {\r\n        const parts = new PartsList(props.parts);\r\n\r\n        // Prepare SR Success Test with foundry formula.\r\n        const formulaOptions = { parts: parts.list, limit: props.limit, explode: props.explodeSixes };\r\n        const formula = this.shadowrunFormula(formulaOptions);\r\n        if (!formula) {\r\n            return;\r\n        }\r\n\r\n        // Execute the Success Test.\r\n        const rollData = {parts: parts.list, limit: props.limit, explodeSixes: props.explodeSixes};\r\n        const roll = new ShadowrunRoll(formula, rollData);\r\n\r\n        // Return roll reference instead roll() return to avoid typing issues.\r\n        roll.roll();\r\n\r\n        return roll;\r\n    }\r\n\r\n    static async basicRoll(basicProps: BasicRollProps): Promise<ShadowrunRoll | undefined> {\r\n        const props = ShadowrunRoller.basicRollPropsDefaults(basicProps);\r\n\r\n        const roll = await ShadowrunRoller.roll({parts: props.parts, limit: props.limit, explodeSixes: props.explodeSixes});\r\n        if (!roll) return;\r\n\r\n        if (!props.hideRollMessage) {\r\n            await ShadowrunRoller.rollChatMessage(roll, props);\r\n        }\r\n\r\n        return roll;\r\n    }\r\n\r\n    /** Provide a clear interface of which value are guaranteed to be defined.\r\n     */\r\n    static basicRollPropsDefaults(props: BasicRollProps): BasicRollPropsDefaulted {\r\n        props.title = props.title ?? DEFAULT_ROLL_NAME;\r\n        props.parts = props.parts ?? [];\r\n        props.explodeSixes = props.explodeSixes ?? false;\r\n        props.hideRollMessage = props.hideRollMessage ?? false;\r\n        props.rollMode = props.rollMode ?? CONFIG.Dice.rollModes.roll;\r\n        props.previewTemplate = props.previewTemplate ?? false;\r\n\r\n        return {...props} as BasicRollPropsDefaulted;\r\n    }\r\n\r\n    /** Provide a clear interface of which value are guaranteed to be defined.\r\n     */\r\n    static advancedRollPropsDefaults(props: AdvancedRollProps): AdvancedRollPropsDefaulted {\r\n        props.parts = props.parts ?? [];\r\n        props.wounds = props.wounds ?? true;\r\n\r\n        return {...props} as AdvancedRollPropsDefaulted;\r\n    }\r\n\r\n    /**\r\n     * Prompt a roll for the user\r\n     */\r\n    static promptRoll(): Promise<ShadowrunRoll | undefined> {\r\n        const value = game.user.getFlag(SYSTEM_NAME, FLAGS.LastRollPromptValue) || 0;\r\n        const parts = [{ name: 'SR5.LastRoll', value }];\r\n        const advancedRollProps = { parts, title: game.i18n.localize(\"SR5.Test\")} as AdvancedRollProps;\r\n        const dialogOptions = { pool: true }\r\n        return ShadowrunRoller.advancedRoll(advancedRollProps, dialogOptions);\r\n    }\r\n\r\n    /**\r\n     * Start an advanced roll\r\n     * - Prompts the user for modifiers\r\n     */\r\n    static async advancedRoll(advancedProps: AdvancedRollProps, dialogOptions?: RollDialogOptions): Promise<ShadowrunRoll | undefined> {\r\n        // Remove after roll callback as to not move it further into other function calls.\r\n        const {after} = advancedProps;\r\n\r\n        const props = ShadowrunRoller.advancedRollPropsDefaults(advancedProps);\r\n\r\n        // remove limits if game settings is set\r\n        if (!game.settings.get(SYSTEM_NAME, FLAGS.ApplyLimits)) {\r\n            delete props.limit;\r\n        } else {\r\n            ShadowrunRoller._errorOnInvalidLimit(props.limit);\r\n        }\r\n\r\n        // Ask user for additional, general success test role modifiers.\r\n        const testDialogOptions = {\r\n            title: props.title,\r\n            dialogOptions,\r\n            extended: props.extended,\r\n            limit: props.limit,\r\n            wounds: props.wounds,\r\n        };\r\n\r\n        const testDialog = await ShadowrunTestDialog.create(props.actor, testDialogOptions, props.parts);\r\n        const testData = await testDialog.select();\r\n\r\n        if (testDialog.canceled) return;\r\n\r\n\r\n        // Prepare Test Roll.\r\n        const basicRollProps = {...props} as BasicRollPropsDefaulted;\r\n        // basicRollProps.wounds = testData.wounds;\r\n        // basicRollProps.dialogOptions = testData.dialogOptions;\r\n        basicRollProps.rollMode = testData.rollMode;\r\n        // TODO: This is needed a hotfix... basicRoll is used secondChance and pushTheLimit chat actions.\r\n        //       If those are handled by advancedRoll (without a dialog) basicRoll message creation can be removed\r\n        //       and this line as well...\r\n        basicRollProps.hideRollMessage = true;\r\n\r\n\r\n        if (testDialog.selectedButton === 'edge' && props.actor) {\r\n            await ShadowrunRoller.handleExplodingSixes(props.actor, basicRollProps, testData);\r\n        }\r\n\r\n        // Build basic roll parts as the LAST step, to avoid missing any parts.\r\n        basicRollProps.parts = testData.parts.list;\r\n\r\n        // Execute Test roll...\r\n        const roll = await this.basicRoll(basicRollProps);\r\n        if (!roll) return;\r\n\r\n\r\n        if (!props.hideRollMessage) {\r\n            await ShadowrunRoller.rollChatMessage(roll, basicRollProps);\r\n        }\r\n\r\n\r\n        if (testData.extended) {\r\n            ShadowrunRoller.handleExtendedRoll(props, testData);\r\n        }\r\n\r\n\r\n        // Call any provided callbacks to be executed after this roll.\r\n        if (after) await after(roll);\r\n\r\n        return roll;\r\n    }\r\n\r\n    static async rollChatMessage(roll: ShadowrunRoll, props: BasicRollPropsDefaulted) {\r\n        const {actor, target, item, rollMode, description, title, previewTemplate, attack, incomingAttack, damage, tests, combat} = props;\r\n        const rollChatMessageOptions = {roll, actor, target, item, rollMode, description, title, previewTemplate, attack, incomingAttack, damage, tests, combat};\r\n        await createRollChatMessage(rollChatMessageOptions);\r\n    }\r\n\r\n    /** Send a message to the specific targeted player given.\r\n     *\r\n     * Use targetsChatMessages for a simple way to send to all active player targets.\r\n     *\r\n     * Should a target have multiple user owners, each will get a message.\r\n     *\r\n     * @param options\r\n     */\r\n    static async targetChatMessage(options: RollTargetChatMessage) {\r\n        if (!game.settings.get(SYSTEM_NAME, FLAGS.WhisperOpposedTestsToTargetedPlayers)) return;\r\n\r\n        const rollMode = options.rollMode ?? game.settings.get(CORE_NAME, CORE_FLAGS.RollMode);\r\n        if (rollMode === 'roll') return;\r\n\r\n        // @ts-ignore // Token.actor is of type Actor instead of SR5Actor\r\n        const users = options.target.actor.getActivePlayerOwners();\r\n\r\n        for (const user of users) {\r\n            if (user.isGM) continue;\r\n            if (user === game.user) continue;\r\n\r\n            const targetChatMessage = {\r\n                actor: options.actor, target: options.target, targets: [options.target], item: options.item,\r\n                tests: options.tests, whisperTo: user, attack: options.attack\r\n            } as TargetChatMessageOptions;\r\n            await createTargetChatMessage(targetChatMessage);\r\n        }\r\n    }\r\n\r\n    /** Send messages to ALL targets, no matter if specifically targeted in a action dialog.\r\n     *\r\n     * This can cause for multiple target whispers to happen, even if the active player only selected one\r\n     * during, for example, the ranged weapon dialog (which gives a selection and returns one)\r\n     *\r\n     *\r\n     * @param options\r\n     */\r\n    static async targetsChatMessages(targets: Token[], options: RollTargetChatMessage) {\r\n        if (!game.settings.get(SYSTEM_NAME, FLAGS.WhisperOpposedTestsToTargetedPlayers)) return;\r\n\r\n        targets.forEach(target => {\r\n            // @ts-ignore // Token.actor is of type Actor instead of SR5Actor\r\n            if (!target.actor.hasActivePlayerOwner()) return;\r\n\r\n            options = {...options, target};\r\n            ShadowrunRoller.targetChatMessage(options);\r\n        })\r\n    }\r\n\r\n    static _errorOnInvalidLimit(limit?: LimitField) {\r\n        if (limit && limit.value < 0) {\r\n            ui.notifications.error(game.i18n.localize('SR5.Warnings.NegativeLimitValue'));\r\n        }\r\n    }\r\n\r\n    static handleExtendedRoll(advancedProps: AdvancedRollPropsDefaulted, testData: TestDialogData) {\r\n        const currentExtended = testData.parts.getPartValue('SR5.Extended') ?? 0;\r\n        testData.parts.addUniquePart('SR5.Extended', currentExtended - 1);\r\n\r\n        // Prepare the next, extended test roll.\r\n        advancedProps.parts = testData.parts.list;\r\n        advancedProps.extended = true;\r\n        const delayInMs = 400;\r\n        setTimeout(() => this.advancedRoll(advancedProps), delayInMs);\r\n    }\r\n\r\n    static async handleExplodingSixes(actor: SR5Actor, basicProps: BasicRollProps, testData: TestDialogData) {\r\n        basicProps.explodeSixes = true;\r\n        delete basicProps.limit;\r\n        testData.parts.addUniquePart('SR5.PushTheLimit', actor.getEdge().value);\r\n\r\n        await actor.useEdge();\r\n    }\r\n}\r\n","// game settings for shadowrun 5e\r\n\r\nimport { VersionMigration } from './migrator/VersionMigration';\r\nimport { FLAGS, SYSTEM_NAME } from './constants';\r\n\r\nexport const registerSystemSettings = () => {\r\n    /**\r\n     * Register diagonal movement rule setting\r\n     */\r\n    game.settings.register(SYSTEM_NAME, 'diagonalMovement', {\r\n        name: 'SETTINGS.DiagonalMovementName',\r\n        hint: 'SETTINGS.DiagonalMovementDescription',\r\n        scope: 'world',\r\n        config: true,\r\n        type: String,\r\n        default: '1-2-1',\r\n        choices: {\r\n            '1-1-1': 'SETTINGS.IgnoreDiagonal',\r\n            '1-2-1': 'SETTINGS.EstimateDiagonal',\r\n            'EUCL': 'SETTINGS.Euclidean',\r\n        },\r\n        onChange: (rule) => (canvas.grid.diagonalRule = rule),\r\n    });\r\n\r\n    /**\r\n     * Default limit behavior\r\n     */\r\n    game.settings.register(SYSTEM_NAME, 'applyLimits', {\r\n        name: 'SETTINGS.ApplyLimitsName',\r\n        hint: 'SETTINGS.ApplyLimitsDescription',\r\n        scope: 'world',\r\n        config: true,\r\n        type: Boolean,\r\n        default: true,\r\n    });\r\n\r\n    game.settings.register(SYSTEM_NAME, 'displayDefaultRollCard', {\r\n        name: 'SETTINGS.DisplayDefaultRollCardName',\r\n        hint: 'SETTINGS.DisplayDefaultRollCardDescription',\r\n        scope: 'user',\r\n        config: true,\r\n        type: Boolean,\r\n        default: false,\r\n    });\r\n\r\n    /**\r\n     * Track system version upon which a migration was last applied\r\n     */\r\n    game.settings.register(SYSTEM_NAME, VersionMigration.KEY_DATA_VERSION, {\r\n        name: 'System Data Version.',\r\n        scope: 'world',\r\n        config: false,\r\n        type: String,\r\n        default: '0',\r\n    });\r\n\r\n    game.settings.register(SYSTEM_NAME, FLAGS.ShowGlitchAnimation, {\r\n        name: 'SETTINGS.ShowGlitchAnimationName',\r\n        hint: 'SETTINGS.ShowGlitchAnimationDescription',\r\n        scope: 'user',\r\n        config: true,\r\n        type: Boolean,\r\n        default: true,\r\n    });\r\n\r\n    game.settings.register(SYSTEM_NAME, FLAGS.ShowTokenNameForChatOutput, {\r\n        name: 'SETTINGS.ShowTokenNameForChatOutputName',\r\n        hint: 'SETTINGS.ShowTokenNameForChatOutputDescription',\r\n        scope: 'world',\r\n        config: true,\r\n        type: Boolean,\r\n        default: true,\r\n    });\r\n\r\n    game.settings.register(SYSTEM_NAME, FLAGS.WhisperOpposedTestsToTargetedPlayers, {\r\n        name: 'SETTINGS.WhisperOpposedTestsToTargetedPlayers',\r\n        hint: 'SETTINGS.WhisperOpposedTestsToTargetedPlayersDescription',\r\n        scope: 'world',\r\n        config: true,\r\n        type: Boolean,\r\n        default: true,\r\n    });\r\n\r\n    game.settings.register(SYSTEM_NAME, FLAGS.OnlyAllowRollOnDefaultableSkills, {\r\n         name: 'SETTINGS.OnlyAllowRollOnDefaultableSkills',\r\n        hint: 'SETTINGS.OnlyAllowRollOnDefaultableSkillsDescription',\r\n        scope: 'world',\r\n        config: true,\r\n        type: Boolean,\r\n        default: true,\r\n    });\r\n\r\n    game.settings.register(SYSTEM_NAME, FLAGS.ShowSkillsWithDetails, {\r\n         name: 'SETTINGS.ShowSkillsWithDetails',\r\n        hint: 'SETTINGS.ShowSkillsWithDetailsDescription',\r\n        scope: 'user',\r\n        config: true,\r\n        type: Boolean,\r\n        default: true,\r\n    });\r\n\r\n    game.settings.register(SYSTEM_NAME, FLAGS.OnlyAutoRollNPCInCombat, {\r\n         name: 'SETTINGS.OnlyAutoRollNPCInCombat',\r\n        hint: 'SETTINGS.OnlyAutoRollNPCInCombatDescription',\r\n        scope: 'world',\r\n        config: true,\r\n        type: Boolean,\r\n        default: true,\r\n    });\r\n};\r\n","import {SR} from \"../constants\";\r\n\r\nexport class CombatRules {\r\n    static iniOrderCanDoAnotherPass(scores: number[]): boolean {\r\n        for (const score of scores) {\r\n            if (CombatRules.iniScoreCanDoAnotherPass(score)) return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Check if there is another initiative pass possible with the given score.\r\n     * @param score\r\n     * @return true means another initiative pass is possible\r\n     */\r\n    static iniScoreCanDoAnotherPass(score: number): boolean {\r\n        return CombatRules.reduceIniResultAfterPass(score) > 0;\r\n    }\r\n    /**\r\n     * Reduce the given initiative score according to @PDF SR5#159\r\n     * @param score This given score can't be reduced under zero.\r\n     */\r\n    static reduceIniResultAfterPass(score: number): number {\r\n        return Math.max(score + SR.combat.INI_RESULT_MOD_AFTER_INI_PASS, 0);\r\n    }\r\n\r\n    /**\r\n     * Reduce the initiative score according to the current initiative pass @PDF SR5#160.\r\n     * @param score\r\n     * @param pass The current initiative pass. Each combat round starts at the initiative pass of 1.\r\n     */\r\n    static reduceIniOnLateSpawn(score: number, pass: number): number {\r\n        // Assure valid score ranges.\r\n        // Shift initiative pass value range from min 1 to min 0 for multiplication.\r\n        pass = Math.max(pass - 1, 0);\r\n        score = Math.max(score, 0);\r\n\r\n        // Reduce the new score according to. NOTE: Modifier is negative\r\n        const reducedScore = score + pass * SR.combat.INI_RESULT_MOD_AFTER_INI_PASS;\r\n        return Math.max(reducedScore, 0);\r\n    }\r\n}","import {FLAGS, SR, SYSTEM_NAME} from \"../constants\";\r\nimport SituationModifiers = Shadowrun.SituationModifiers;\r\nimport EnvironmentalModifiers = Shadowrun.EnvironmentalModifiers;\r\nimport EnvironmentalModifierLevels = Shadowrun.EnvironmentalModifierLevels;\r\nimport EnvironmentalModifierCategories = Shadowrun.EnvironmentalModifierCategories;\r\n\r\nexport class Modifiers {\r\n    data: SituationModifiers;\r\n\r\n    constructor(data: SituationModifiers) {\r\n        // Fail gracefully for no modifiers given.\r\n        // This can happen as Foundry returns empty objects for no flags set.\r\n        if (typeof data !== 'object' || !data.environmental) {\r\n            data = Modifiers.getDefaultModifiers();\r\n        }\r\n\r\n        // Duplicate data to avoid cross talk between different entities over different Modifier instances.\r\n        this.data = duplicate(data);\r\n    }\r\n\r\n    get hasActiveEnvironmental(): boolean {\r\n        return Object.keys(this.environmental.active).length > 0;\r\n    }\r\n\r\n    get modifiers(): SituationModifiers {\r\n        return this.data;\r\n    }\r\n\r\n    set modifiers(modifiers: SituationModifiers) {\r\n        this.data = modifiers;\r\n    }\r\n\r\n    get environmental(): EnvironmentalModifiers {\r\n        return this.data.environmental;\r\n    }\r\n\r\n    set environmental(modifiers: EnvironmentalModifiers) {\r\n        this.data.environmental = modifiers;\r\n    }\r\n\r\n    _matchingActiveEnvironmental(category: keyof EnvironmentalModifierCategories, level: number): boolean {\r\n        return this.environmental.active[category] === level;\r\n    }\r\n\r\n    _setEnvironmentalCategoryActive(category: keyof EnvironmentalModifierCategories, level: number) {\r\n        this.environmental.active[category] = level;\r\n    }\r\n\r\n    _setEnvironmentalCategoryInactive(category: keyof EnvironmentalModifierCategories) {\r\n        delete this.environmental.active[category];\r\n    }\r\n\r\n    _disableEnvironmentalOverwrite() {\r\n        this._setEnvironmentalCategoryInactive('value');\r\n    }\r\n\r\n    /** Actiavte a environmental modifier category (wind) with a value and recalculate the total modifier\r\n     *\r\n     * @param category\r\n     * @param level\r\n     */\r\n    activateEnvironmentalCategory(category: keyof EnvironmentalModifierCategories, level: number) {\r\n        if (!this._environmentalCategoryIsOverwrite(category)) {\r\n            this._disableEnvironmentalOverwrite();\r\n        }\r\n\r\n        this._setEnvironmentalCategoryActive(category, level);\r\n        this.calcEnvironmentalTotal();\r\n    }\r\n\r\n    toggleEnvironmentalCategory(category: keyof EnvironmentalModifierCategories, level: number) {\r\n        if (this._matchingActiveEnvironmental(category, level)) {\r\n            this._setEnvironmentalCategoryInactive(category);\r\n        } else if (this._environmentalCategoryIsOverwrite(category)) {\r\n            this._setEnvironmentalOverwriteActive(level);\r\n        } else {\r\n            this._setEnvironmentalCategoryActive(category, level);\r\n        }\r\n\r\n        // Remove a lingering overwrite if anything is set active.\r\n        if (!this._environmentalCategoryIsOverwrite(category)) {\r\n            this._setEnvironmentalOverwriteInactive();\r\n        }\r\n\r\n        this.calcEnvironmentalTotal();\r\n    }\r\n\r\n    calcEnvironmentalTotal() {\r\n        // Manual selection will overwrite all else...\r\n        if (this.hasActiveEnvironmentalOverwrite) {\r\n            const modifier = this._activeEnvironmentalOverwrite;\r\n\r\n            if (modifier === undefined) {\r\n                console.error('An active overwrite modifier was returned as undefined');\r\n                return;\r\n            }\r\n\r\n            this._resetEnvironmental();\r\n            this._setEnvironmentalOverwriteActive(modifier);\r\n            this._setEnvironmentalTotal(modifier);\r\n\r\n        } else {\r\n            // Calculation based on active modifier categories, excluding manual overwrite.\r\n            const activeCategories = Object.entries(this.environmental.active).filter(([category, level]) => category !== 'value');\r\n            // Should an active category miss a level set, ignore and fail gracefully.\r\n            const activeLevels = activeCategories.map(([category, level]) => level ? level : 0);\r\n\r\n            const count = this._countActiveModifierLevels(activeLevels);\r\n\r\n            const modifiers = Modifiers.getEnvironmentalModifierLevels();\r\n\r\n            if (count.extreme > 0 || count.heavy >= 2) {\r\n                this._setEnvironmentalTotal(modifiers.extreme);\r\n            }\r\n            else if (count.heavy === 1 || count.moderate >= 2) {\r\n                this._setEnvironmentalTotal(modifiers.heavy);\r\n            }\r\n            else if (count.moderate === 1 || count.light >= 2) {\r\n                this._setEnvironmentalTotal(modifiers.moderate);\r\n            }\r\n            else if (count.light === 1) {\r\n                this._setEnvironmentalTotal(modifiers.light);\r\n            } else {\r\n                this._setEnvironmentalTotal(modifiers.good);\r\n            }\r\n        }\r\n    }\r\n\r\n    static async clearOnEntity(entity: Entity): Promise<Modifiers> {\r\n        await entity.unsetFlag(SYSTEM_NAME, FLAGS.Modifier);\r\n        return new Modifiers(Modifiers.getDefaultModifiers());\r\n    }\r\n\r\n    static async clearEnvironmentalOnEntity(entity: Entity): Promise<Modifiers> {\r\n        const modifiers = await Modifiers.getModifiersFromEntity(entity);\r\n\r\n        modifiers.data.environmental = Modifiers.getDefaultEnvironmentalModifiers();\r\n\r\n        await Modifiers.setModifiersOnEntity(entity, modifiers.data);\r\n\r\n        return modifiers;\r\n    }\r\n\r\n    _environmentalCategoryIsOverwrite(category: keyof EnvironmentalModifierCategories): boolean {\r\n        return category === 'value';\r\n    }\r\n\r\n    _resetEnvironmental() {\r\n        Object.keys(this.environmental.active).forEach(category => delete this.environmental.active[category]);\r\n    }\r\n\r\n    _setEnvironmentalOverwriteActive(value: number) {\r\n        this._resetEnvironmental();\r\n        this._setEnvironmentalCategoryActive('value', value);\r\n    }\r\n\r\n    _setEnvironmentalOverwriteInactive() {\r\n        this._setEnvironmentalCategoryInactive('value');\r\n    }\r\n\r\n    _setEnvironmentalTotal(value: number) {\r\n        this.environmental.total = value;\r\n    }\r\n\r\n    get _activeEnvironmentalOverwrite(): number|undefined {\r\n        return this.modifiers.environmental.active.value;\r\n    }\r\n\r\n    get hasActiveEnvironmentalOverwrite(): boolean {\r\n        return this.environmental.active.value !== undefined;\r\n    }\r\n\r\n    /** Count the amount each level (modifier value) appears in the array of modifiers\r\n     *\r\n     * @param values Active environmental modifiers\r\n     */\r\n    _countActiveModifierLevels(values: Number[]) {\r\n        const modifiers = Modifiers.getEnvironmentalModifierLevels();\r\n\r\n        return {\r\n            light: values.reduce((count: number, value: number) => (value === modifiers.light ? count + 1 : count), 0),\r\n            moderate: values.reduce((count: number, value: number) => (value === modifiers.moderate ? count + 1 : count), 0),\r\n            heavy: values.reduce((count: number, value: number) => (value === modifiers.heavy ? count + 1 : count), 0),\r\n            extreme: values.reduce((count: number, value: number) => (value === modifiers.extreme ? count + 1 : count), 0)\r\n        }\r\n    }\r\n\r\n    static getDefaultEnvironmentalModifiers(): EnvironmentalModifiers  {\r\n        return {\r\n            total: 0,\r\n            active: {}\r\n        }\r\n    }\r\n\r\n    static getDefaultModifiers(): SituationModifiers {\r\n        return {\r\n            environmental: Modifiers.getDefaultEnvironmentalModifiers()\r\n        }\r\n    }\r\n\r\n    static getEnvironmentalModifierLevels(): EnvironmentalModifierLevels {\r\n        return SR.combat.environmental.levels;\r\n    }\r\n\r\n    static async getModifiersFromEntity(entity: Entity): Promise<Modifiers> {\r\n        const data = await entity.getFlag(SYSTEM_NAME, FLAGS.Modifier);\r\n\r\n        return new Modifiers(data);\r\n    }\r\n\r\n    static async setModifiersOnEntity(entity: Entity, modifiers: SituationModifiers) {\r\n        // TODO: Ask league about unsetFlag behavoir...\r\n        // NOTE: Check if JSON stringifier works or not.\r\n        await entity.unsetFlag(SYSTEM_NAME, FLAGS.Modifier);\r\n        await entity.setFlag(SYSTEM_NAME, FLAGS.Modifier, modifiers);\r\n    }\r\n}","import { SR5Item } from './item/SR5Item';\r\n\r\nexport type ShadowrunTemplateData = {\r\n    t: string;\r\n    user: User | string;\r\n    distance: number;\r\n    x: number;\r\n    y: number;\r\n    fillColor: string;\r\n    direction: number;\r\n};\r\n\r\nexport default // @ts-ignore\r\nclass Template extends MeasuredTemplate {\r\n    data: ShadowrunTemplateData;\r\n    x: number;\r\n    y: number;\r\n    item?: SR5Item;\r\n    onComplete?: () => void;\r\n\r\n    static fromItem(item: SR5Item, onComplete?: () => void): Template | undefined {\r\n        const templateShape = 'circle';\r\n\r\n        const templateData = {\r\n            t: templateShape,\r\n            user: game.user._id,\r\n            direction: 0,\r\n            x: 0,\r\n            y: 0,\r\n            // @ts-ignore\r\n            fillColor: game.user.color,\r\n        };\r\n        const blast = item.getBlastData();\r\n        templateData['distance'] = blast?.radius;\r\n        templateData['dropoff'] = blast?.dropoff;\r\n\r\n        // @ts-ignore\r\n        const template = new this(templateData);\r\n        template.item = item;\r\n        template.onComplete = onComplete;\r\n        return template;\r\n    }\r\n\r\n    drawPreview() {\r\n        const initialLayer = canvas.activeLayer;\r\n        // @ts-ignore\r\n        this.draw();\r\n        // @ts-ignore\r\n        this.layer.activate();\r\n        // @ts-ignore\r\n        this.layer.preview.addChild(this);\r\n        this.activatePreviewListeners(initialLayer);\r\n    }\r\n\r\n    activatePreviewListeners(initialLayer: CanvasLayer) {\r\n        const handlers = {};\r\n        let moveTime = 0;\r\n\r\n        // Update placement (mouse-move)\r\n        handlers['mm'] = (event) => {\r\n            event.stopPropagation();\r\n            let now = Date.now(); // Apply a 20ms throttle\r\n            if (now - moveTime <= 20) return;\r\n            const center = event.data.getLocalPosition(this.layer);\r\n            const snapped = canvas.grid.getSnappedPosition(center.x, center.y, 2);\r\n            this.data.x = snapped.x;\r\n            this.data.y = snapped.y;\r\n            // @ts-ignore\r\n            this.refresh();\r\n            moveTime = now;\r\n        };\r\n\r\n        // Cancel the workflow (right-click)\r\n        handlers['rc'] = () => {\r\n            this.layer.preview.removeChildren();\r\n            canvas.stage.off('mousemove', handlers['mm']);\r\n            canvas.stage.off('mousedown', handlers['lc']);\r\n            canvas.app.view.oncontextmenu = null;\r\n            canvas.app.view.onwheel = null;\r\n            initialLayer.activate();\r\n\r\n            if (this.onComplete) this.onComplete();\r\n        };\r\n\r\n        // Confirm the workflow (left-click)\r\n        handlers['lc'] = (event) => {\r\n            handlers['rc'](event);\r\n\r\n            // Confirm final snapped position\r\n            const destination = canvas.grid.getSnappedPosition(this.x, this.y, 2);\r\n            this.data.x = destination.x;\r\n            this.data.y = destination.y;\r\n\r\n            // Create the template\r\n            canvas.scene.createEmbeddedEntity('MeasuredTemplate', this.data);\r\n        };\r\n\r\n        // Rotate the template by 3 degree increments (mouse-wheel)\r\n        handlers['mw'] = (event) => {\r\n            if (event.ctrlKey) event.preventDefault(); // Avoid zooming the browser window\r\n            event.stopPropagation();\r\n            let delta = canvas.grid.type > CONST.GRID_TYPES.SQUARE ? 30 : 15;\r\n            let snap = event.shiftKey ? delta : 5;\r\n            this.data.direction += snap * Math.sign(event.deltaY);\r\n            // @ts-ignore\r\n            this.refresh();\r\n        };\r\n\r\n        // Activate listeners\r\n        canvas.stage.on('mousemove', handlers['mm']);\r\n        canvas.stage.on('mousedown', handlers['lc']);\r\n        canvas.app.view.oncontextmenu = handlers['rc'];\r\n        canvas.app.view.onwheel = handlers['mw'];\r\n    }\r\n}\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3luY1RvR2VuZXJhdG9yLmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2suanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcy5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5LmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZ2V0LmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZ2V0UHJvdG90eXBlT2YuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbmhlcml0cy5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4uanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9zZXRQcm90b3R5cGVPZi5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3N1cGVyUHJvcEJhc2UuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy90eXBlb2YuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiLCJub2RlX21vZHVsZXMvYmFzZTY0LWpzL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2Jyb3dzZXItcmVzb2x2ZS9lbXB0eS5qcyIsIm5vZGVfbW9kdWxlcy9idWZmZXIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvY29yZS11dGlsLWlzL2xpYi91dGlsLmpzIiwibm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanMiLCJub2RlX21vZHVsZXMvaWVlZTc1NC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9pbmhlcml0cy9pbmhlcml0c19icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL2lzLWJ1ZmZlci9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9pc2FycmF5L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3Byb2Nlc3MtbmV4dGljay1hcmdzL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vZHVwbGV4LWJyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX2R1cGxleC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanMiLCJub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX3JlYWRhYmxlLmpzIiwibm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV90cmFuc2Zvcm0uanMiLCJub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX3dyaXRhYmxlLmpzIiwibm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIvaW50ZXJuYWwvc3RyZWFtcy9CdWZmZXJMaXN0LmpzIiwibm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIvaW50ZXJuYWwvc3RyZWFtcy9kZXN0cm95LmpzIiwibm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIvaW50ZXJuYWwvc3RyZWFtcy9zdHJlYW0tYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vcGFzc3Rocm91Z2guanMiLCJub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL3JlYWRhYmxlLWJyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL3RyYW5zZm9ybS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vd3JpdGFibGUtYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9yZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiLCJub2RlX21vZHVsZXMvc2FmZS1idWZmZXIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvc2F4L2xpYi9zYXguanMiLCJub2RlX21vZHVsZXMvc3RyZWFtLWJyb3dzZXJpZnkvaW5kZXguanMiLCJub2RlX21vZHVsZXMvc3RyaW5nX2RlY29kZXIvbGliL3N0cmluZ19kZWNvZGVyLmpzIiwibm9kZV9tb2R1bGVzL3RpbWVycy1icm93c2VyaWZ5L21haW4uanMiLCJub2RlX21vZHVsZXMvdXRpbC1kZXByZWNhdGUvYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy94bWwyanMvbGliL2JvbS5qcyIsIm5vZGVfbW9kdWxlcy94bWwyanMvbGliL2J1aWxkZXIuanMiLCJub2RlX21vZHVsZXMveG1sMmpzL2xpYi9kZWZhdWx0cy5qcyIsIm5vZGVfbW9kdWxlcy94bWwyanMvbGliL3BhcnNlci5qcyIsIm5vZGVfbW9kdWxlcy94bWwyanMvbGliL3Byb2Nlc3NvcnMuanMiLCJub2RlX21vZHVsZXMveG1sMmpzL2xpYi94bWwyanMuanMiLCJub2RlX21vZHVsZXMveG1sYnVpbGRlci9saWIvRG9jdW1lbnRQb3NpdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9Ob2RlVHlwZS5qcyIsIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9VdGlsaXR5LmpzIiwibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1dyaXRlclN0YXRlLmpzIiwibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTEF0dHJpYnV0ZS5qcyIsIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxDRGF0YS5qcyIsIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxDaGFyYWN0ZXJEYXRhLmpzIiwibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTENvbW1lbnQuanMiLCJub2RlX21vZHVsZXMveG1sYnVpbGRlci9saWIvWE1MRE9NQ29uZmlndXJhdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxET01FcnJvckhhbmRsZXIuanMiLCJub2RlX21vZHVsZXMveG1sYnVpbGRlci9saWIvWE1MRE9NSW1wbGVtZW50YXRpb24uanMiLCJub2RlX21vZHVsZXMveG1sYnVpbGRlci9saWIvWE1MRE9NU3RyaW5nTGlzdC5qcyIsIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxEVERBdHRMaXN0LmpzIiwibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTERUREVsZW1lbnQuanMiLCJub2RlX21vZHVsZXMveG1sYnVpbGRlci9saWIvWE1MRFRERW50aXR5LmpzIiwibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTERURE5vdGF0aW9uLmpzIiwibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTERlY2xhcmF0aW9uLmpzIiwibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTERvY1R5cGUuanMiLCJub2RlX21vZHVsZXMveG1sYnVpbGRlci9saWIvWE1MRG9jdW1lbnQuanMiLCJub2RlX21vZHVsZXMveG1sYnVpbGRlci9saWIvWE1MRG9jdW1lbnRDQi5qcyIsIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxEdW1teS5qcyIsIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxFbGVtZW50LmpzIiwibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTE5hbWVkTm9kZU1hcC5qcyIsIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxOb2RlLmpzIiwibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTE5vZGVMaXN0LmpzIiwibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxSYXcuanMiLCJub2RlX21vZHVsZXMveG1sYnVpbGRlci9saWIvWE1MU3RyZWFtV3JpdGVyLmpzIiwibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTFN0cmluZ1dyaXRlci5qcyIsIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxTdHJpbmdpZmllci5qcyIsIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxUZXh0LmpzIiwibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTFdyaXRlckJhc2UuanMiLCJub2RlX21vZHVsZXMveG1sYnVpbGRlci9saWIvaW5kZXguanMiLCJzcmMvbW9kdWxlL2FjdG9yL0RhbWFnZUFwcGxpY2F0aW9uRmxvdy50cyIsInNyYy9tb2R1bGUvYWN0b3IvU1I1QWN0b3IudHMiLCJzcmMvbW9kdWxlL2FjdG9yL1NSNUFjdG9yU2hlZXQudHMiLCJzcmMvbW9kdWxlL2FjdG9yL1NraWxsRmxvdy50cyIsInNyYy9tb2R1bGUvYWN0b3IvU2tpbGxSdWxlcy50cyIsInNyYy9tb2R1bGUvYWN0b3IvU29ha0Zsb3cudHMiLCJzcmMvbW9kdWxlL2FjdG9yL1NvYWtSdWxlcy50cyIsInNyYy9tb2R1bGUvYWN0b3IvcHJlcC9BY3RvclByZXBGYWN0b3J5LnRzIiwic3JjL21vZHVsZS9hY3Rvci9wcmVwL0Jhc2VBY3RvclByZXAudHMiLCJzcmMvbW9kdWxlL2FjdG9yL3ByZXAvQ2hhcmFjdGVyUHJlcC50cyIsInNyYy9tb2R1bGUvYWN0b3IvcHJlcC9Dcml0dGVyUHJlcC50cyIsInNyYy9tb2R1bGUvYWN0b3IvcHJlcC9TcGlyaXRQcmVwLnRzIiwic3JjL21vZHVsZS9hY3Rvci9wcmVwL1Nwcml0ZVByZXAudHMiLCJzcmMvbW9kdWxlL2FjdG9yL3ByZXAvVmVoaWNsZVByZXAudHMiLCJzcmMvbW9kdWxlL2FjdG9yL3ByZXAvZnVuY3Rpb25zL0F0dHJpYnV0ZXNQcmVwLnRzIiwic3JjL21vZHVsZS9hY3Rvci9wcmVwL2Z1bmN0aW9ucy9Db25kaXRpb25Nb25pdG9yc1ByZXAudHMiLCJzcmMvbW9kdWxlL2FjdG9yL3ByZXAvZnVuY3Rpb25zL0luaXRpYXRpdmVQcmVwLnRzIiwic3JjL21vZHVsZS9hY3Rvci9wcmVwL2Z1bmN0aW9ucy9JdGVtUHJlcC50cyIsInNyYy9tb2R1bGUvYWN0b3IvcHJlcC9mdW5jdGlvbnMvTGltaXRzUHJlcC50cyIsInNyYy9tb2R1bGUvYWN0b3IvcHJlcC9mdW5jdGlvbnMvTWF0cml4UHJlcC50cyIsInNyYy9tb2R1bGUvYWN0b3IvcHJlcC9mdW5jdGlvbnMvTW9kaWZpZXJzUHJlcC50cyIsInNyYy9tb2R1bGUvYWN0b3IvcHJlcC9mdW5jdGlvbnMvTW92ZW1lbnRQcmVwLnRzIiwic3JjL21vZHVsZS9hY3Rvci9wcmVwL2Z1bmN0aW9ucy9OUENQcmVwLnRzIiwic3JjL21vZHVsZS9hY3Rvci9wcmVwL2Z1bmN0aW9ucy9Ta2lsbHNQcmVwLnRzIiwic3JjL21vZHVsZS9hY3Rvci9wcmVwL2Z1bmN0aW9ucy9Xb3VuZHNQcmVwLnRzIiwic3JjL21vZHVsZS9hcHBzL0NoYW5nZWxvZ0FwcGxpY2F0aW9uLnRzIiwic3JjL21vZHVsZS9hcHBzL0Vudk1vZGlmaWVyc0FwcGxpY2F0aW9uLnRzIiwic3JjL21vZHVsZS9hcHBzL2NoYXJhY3RlckltcG9ydC9Bcm1vclBhcnNlci5qcyIsInNyYy9tb2R1bGUvYXBwcy9jaGFyYWN0ZXJJbXBvcnQvQmFzZVBhcnNlckZ1bmN0aW9ucy5qcyIsInNyYy9tb2R1bGUvYXBwcy9jaGFyYWN0ZXJJbXBvcnQvQ2hhcmFjdGVySW1wb3J0ZXIuanMiLCJzcmMvbW9kdWxlL2FwcHMvY2hhcmFjdGVySW1wb3J0L0NoYXJhY3RlckluZm9VcGRhdGVyLmpzIiwic3JjL21vZHVsZS9hcHBzL2NoYXJhY3RlckltcG9ydC9Db250YWN0UGFyc2VyLmpzIiwic3JjL21vZHVsZS9hcHBzL2NoYXJhY3RlckltcG9ydC9DeWJlcndhcmVQYXJzZXIuanMiLCJzcmMvbW9kdWxlL2FwcHMvY2hhcmFjdGVySW1wb3J0L0l0ZW1zUGFyc2VyLmpzIiwic3JjL21vZHVsZS9hcHBzL2NoYXJhY3RlckltcG9ydC9MaWZlc3R5bGVQYXJzZXIuanMiLCJzcmMvbW9kdWxlL2FwcHMvY2hhcmFjdGVySW1wb3J0L1Bvd2VyUGFyc2VyLmpzIiwic3JjL21vZHVsZS9hcHBzL2NoYXJhY3RlckltcG9ydC9RdWFsaXR5UGFyc2VyLmpzIiwic3JjL21vZHVsZS9hcHBzL2NoYXJhY3RlckltcG9ydC9TcGVsbFBhcnNlci5qcyIsInNyYy9tb2R1bGUvYXBwcy9jaGFyYWN0ZXJJbXBvcnQvV2VhcG9uUGFyc2VyLmpzIiwic3JjL21vZHVsZS9hcHBzL2NoYXJhY3RlckltcG9ydC9nZWFySW1wb3J0L0FtbW9QYXJzZXIudHMiLCJzcmMvbW9kdWxlL2FwcHMvY2hhcmFjdGVySW1wb3J0L2dlYXJJbXBvcnQvQmFzZUdlYXJQYXJzZXIudHMiLCJzcmMvbW9kdWxlL2FwcHMvY2hhcmFjdGVySW1wb3J0L2dlYXJJbXBvcnQvRGV2aWNlUGFyc2VyLnRzIiwic3JjL21vZHVsZS9hcHBzL2NoYXJhY3RlckltcG9ydC9nZWFySW1wb3J0L0dlYXJzUGFyc2VyLnRzIiwic3JjL21vZHVsZS9hcHBzL2NoYXJhY3RlckltcG9ydC9nZWFySW1wb3J0L1BhcnNlclNlbGVjdG9yLnRzIiwic3JjL21vZHVsZS9hcHBzL2NoYXJhY3RlckltcG9ydC9nZWFySW1wb3J0L1Byb2dyYW1QYXJzZXIudHMiLCJzcmMvbW9kdWxlL2FwcHMvY2hhcmFjdGVySW1wb3J0L2dlYXJJbXBvcnQvU2luUGFyc2VyLnRzIiwic3JjL21vZHVsZS9hcHBzL2NodW1tZXItaW1wb3J0LWZvcm0uanMiLCJzcmMvbW9kdWxlL2FwcHMvZGlhbG9ncy9EYW1hZ2VBcHBsaWNhdGlvbkRpYWxvZy50cyIsInNyYy9tb2R1bGUvYXBwcy9kaWFsb2dzL0RlbGV0ZUNvbmZpcm1hdGlvbkRpYWxvZy50cyIsInNyYy9tb2R1bGUvYXBwcy9kaWFsb2dzL0Zvcm1EaWFsb2cudHMiLCJzcmMvbW9kdWxlL2FwcHMvZGlhbG9ncy9TaGFkb3dydW5BY3RvckRpYWxvZ3MudHMiLCJzcmMvbW9kdWxlL2FwcHMvZGlhbG9ncy9TaGFkb3dydW5JdGVtRGlhbG9nLnRzIiwic3JjL21vZHVsZS9hcHBzL2RpYWxvZ3MvU2hhZG93cnVuVGVzdERpYWxvZy50cyIsInNyYy9tb2R1bGUvYXBwcy9nbXRvb2xzL092ZXJ3YXRjaFNjb3JlVHJhY2tlci5qcyIsInNyYy9tb2R1bGUvYXBwcy9za2lsbHMvS25vd2xlZGdlU2tpbGxFZGl0Rm9ybS50cyIsInNyYy9tb2R1bGUvYXBwcy9za2lsbHMvTGFuZ3VhZ2VTa2lsbEVkaXRGb3JtLnRzIiwic3JjL21vZHVsZS9hcHBzL3NraWxscy9Ta2lsbEVkaXRGb3JtLnRzIiwic3JjL21vZHVsZS9jYW52YXMudHMiLCJzcmMvbW9kdWxlL2NoYXQudHMiLCJzcmMvbW9kdWxlL2NvbWJhdC9TUjVDb21iYXQudHMiLCJzcmMvbW9kdWxlL2NvbmZpZy50cyIsInNyYy9tb2R1bGUvY29uc3RhbnRzLnRzIiwic3JjL21vZHVsZS9kYXRhVGVtcGxhdGVzLnRzIiwic3JjL21vZHVsZS9kYXRhV3JhcHBlcnMvRGF0YVdyYXBwZXIudHMiLCJzcmMvbW9kdWxlL2hhbmRsZWJhcnMvQXBwSGVscGVycy50cyIsInNyYy9tb2R1bGUvaGFuZGxlYmFycy9CYXNpY0hlbHBlcnMudHMiLCJzcmMvbW9kdWxlL2hhbmRsZWJhcnMvSGFuZGxlYmFyTWFuYWdlci50cyIsInNyYy9tb2R1bGUvaGFuZGxlYmFycy9IYW5kbGViYXJUZW1wbGF0ZXMudHMiLCJzcmMvbW9kdWxlL2hhbmRsZWJhcnMvSXRlbUxpbmVIZWxwZXJzLnRzIiwic3JjL21vZHVsZS9oYW5kbGViYXJzL1JvbGxBbmRMYWJlbEhlbHBlcnMudHMiLCJzcmMvbW9kdWxlL2hhbmRsZWJhcnMvU2tpbGxMaW5lSGVscGVycy50cyIsInNyYy9tb2R1bGUvaGVscGVycy50cyIsInNyYy9tb2R1bGUvaG9va3MudHMiLCJzcmMvbW9kdWxlL2ltcG9ydGVyL2FwcHMvaW1wb3J0LWZvcm0udHMiLCJzcmMvbW9kdWxlL2ltcG9ydGVyL2hlbHBlci9JbXBvcnRIZWxwZXIudHMiLCJzcmMvbW9kdWxlL2ltcG9ydGVyL2hlbHBlci9JbXBvcnRTdHJhdGVneS50cyIsInNyYy9tb2R1bGUvaW1wb3J0ZXIvaGVscGVyL0pTT05TdHJhdGVneS50cyIsInNyYy9tb2R1bGUvaW1wb3J0ZXIvaGVscGVyL1hNTFN0cmF0ZWd5LnRzIiwic3JjL21vZHVsZS9pbXBvcnRlci9pbXBvcnRlci9BbW1vSW1wb3J0ZXIudHMiLCJzcmMvbW9kdWxlL2ltcG9ydGVyL2ltcG9ydGVyL0FybW9ySW1wb3J0ZXIudHMiLCJzcmMvbW9kdWxlL2ltcG9ydGVyL2ltcG9ydGVyL0NvbXBsZXhGb3JtSW1wb3J0ZXIudHMiLCJzcmMvbW9kdWxlL2ltcG9ydGVyL2ltcG9ydGVyL0NvbnN0YW50cy50cyIsInNyYy9tb2R1bGUvaW1wb3J0ZXIvaW1wb3J0ZXIvQ3JpdHRlclBvd2VySW1wb3J0ZXIudHMiLCJzcmMvbW9kdWxlL2ltcG9ydGVyL2ltcG9ydGVyL0RhdGFJbXBvcnRlci50cyIsInNyYy9tb2R1bGUvaW1wb3J0ZXIvaW1wb3J0ZXIvRGV2aWNlSW1wb3J0ZXIudHMiLCJzcmMvbW9kdWxlL2ltcG9ydGVyL2ltcG9ydGVyL0VxdWlwbWVudEltcG9ydGVyLnRzIiwic3JjL21vZHVsZS9pbXBvcnRlci9pbXBvcnRlci9Nb2RJbXBvcnRlci50cyIsInNyYy9tb2R1bGUvaW1wb3J0ZXIvaW1wb3J0ZXIvUXVhbGl0eUltcG9ydGVyLnRzIiwic3JjL21vZHVsZS9pbXBvcnRlci9pbXBvcnRlci9TcGVsbEltcG9ydGVyLnRzIiwic3JjL21vZHVsZS9pbXBvcnRlci9pbXBvcnRlci9XYXJlSW1wb3J0ZXIudHMiLCJzcmMvbW9kdWxlL2ltcG9ydGVyL2ltcG9ydGVyL1dlYXBvbkltcG9ydGVyLnRzIiwic3JjL21vZHVsZS9pbXBvcnRlci9wYXJzZXIvUGFyc2VyLnRzIiwic3JjL21vZHVsZS9pbXBvcnRlci9wYXJzZXIvUGFyc2VyTWFwLnRzIiwic3JjL21vZHVsZS9pbXBvcnRlci9wYXJzZXIvYXJtb3IvQXJtb3JQYXJzZXJCYXNlLnRzIiwic3JjL21vZHVsZS9pbXBvcnRlci9wYXJzZXIvY29tcGxleC1mb3JtL0NvbXBsZXhGb3JtUGFyc2VyQmFzZS50cyIsInNyYy9tb2R1bGUvaW1wb3J0ZXIvcGFyc2VyL2NyaXR0ZXItcG93ZXIvQ3JpdHRlclBvd2VyUGFyc2VyQmFzZS50cyIsInNyYy9tb2R1bGUvaW1wb3J0ZXIvcGFyc2VyL2l0ZW0vSXRlbVBhcnNlckJhc2UudHMiLCJzcmMvbW9kdWxlL2ltcG9ydGVyL3BhcnNlci9pdGVtL1RlY2hub2xvZ3lJdGVtUGFyc2VyQmFzZS50cyIsInNyYy9tb2R1bGUvaW1wb3J0ZXIvcGFyc2VyL21vZC9Nb2RQYXJzZXJCYXNlLnRzIiwic3JjL21vZHVsZS9pbXBvcnRlci9wYXJzZXIvcXVhbGl0eS9RdWFsaXR5UGFyc2VyQmFzZS50cyIsInNyYy9tb2R1bGUvaW1wb3J0ZXIvcGFyc2VyL3NwZWxsL0NvbWJhdFNwZWxsUGFyc2VyLnRzIiwic3JjL21vZHVsZS9pbXBvcnRlci9wYXJzZXIvc3BlbGwvRGV0ZWN0aW9uU3BlbGxJbXBvcnRlci50cyIsInNyYy9tb2R1bGUvaW1wb3J0ZXIvcGFyc2VyL3NwZWxsL0lsbHVzaW9uU3BlbGxQYXJzZXIudHMiLCJzcmMvbW9kdWxlL2ltcG9ydGVyL3BhcnNlci9zcGVsbC9NYW5pcHVsYXRpb25TcGVsbFBhcnNlci50cyIsInNyYy9tb2R1bGUvaW1wb3J0ZXIvcGFyc2VyL3NwZWxsL1NwZWxsUGFyc2VyQmFzZS50cyIsInNyYy9tb2R1bGUvaW1wb3J0ZXIvcGFyc2VyL3dhcmUvQ3liZXJ3YXJlUGFyc2VyLnRzIiwic3JjL21vZHVsZS9pbXBvcnRlci9wYXJzZXIvd2VhcG9uL01lbGVlUGFyc2VyLnRzIiwic3JjL21vZHVsZS9pbXBvcnRlci9wYXJzZXIvd2VhcG9uL1JhbmdlZFBhcnNlci50cyIsInNyYy9tb2R1bGUvaW1wb3J0ZXIvcGFyc2VyL3dlYXBvbi9UaHJvd25QYXJzZXIudHMiLCJzcmMvbW9kdWxlL2ltcG9ydGVyL3BhcnNlci93ZWFwb24vV2VhcG9uUGFyc2VyQmFzZS50cyIsInNyYy9tb2R1bGUvaXRlbS9DaGF0RGF0YS50cyIsInNyYy9tb2R1bGUvaXRlbS9JdGVtQWN0aW9uLnRzIiwic3JjL21vZHVsZS9pdGVtL1NSNUl0ZW0udHMiLCJzcmMvbW9kdWxlL2l0ZW0vU1I1SXRlbURhdGFXcmFwcGVyLnRzIiwic3JjL21vZHVsZS9pdGVtL1NSNUl0ZW1TaGVldC50cyIsInNyYy9tb2R1bGUvbWFjcm9zLnRzIiwic3JjL21vZHVsZS9tYWluLnRzIiwic3JjL21vZHVsZS9taWdyYXRvci9NaWdyYXRvci50cyIsInNyYy9tb2R1bGUvbWlncmF0b3IvVmVyc2lvbk1pZ3JhdGlvbi50cyIsInNyYy9tb2R1bGUvbWlncmF0b3IvdmVyc2lvbnMvTGVnYWN5TWlncmF0aW9uLnRzIiwic3JjL21vZHVsZS9taWdyYXRvci92ZXJzaW9ucy9WZXJzaW9uMF82XzEwLnRzIiwic3JjL21vZHVsZS9taWdyYXRvci92ZXJzaW9ucy9WZXJzaW9uMF82XzUudHMiLCJzcmMvbW9kdWxlL21pZ3JhdG9yL3ZlcnNpb25zL1ZlcnNpb24wXzdfMi50cyIsInNyYy9tb2R1bGUvcGFydHMvUGFydHNMaXN0LnRzIiwic3JjL21vZHVsZS9yb2xscy9TaGFkb3dydW5Sb2xsZXIudHMiLCJzcmMvbW9kdWxlL3NldHRpbmdzLnRzIiwic3JjL21vZHVsZS9zcjUvQ29tYmF0LnRzIiwic3JjL21vZHVsZS9zcjUvTW9kaWZpZXJzLnRzIiwic3JjL21vZHVsZS90ZW1wbGF0ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hCQTtBQUNBOztBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4SkE7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDanZEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUMzR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4TEE7QUFDQTs7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQzEvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3JOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUM5cUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pFQTtBQUNBOztBQ0RBO0FBQ0E7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBOztBQ0RBO0FBQ0E7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1dUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDOURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQzdoREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdlNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQzNFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDbkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3WEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25GQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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LENBQUMsQ0FBQztpQkFDL0MsSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLGFBQWE7Z0JBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztpQkFDbkQsSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLFFBQVE7Z0JBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztpQkFDOUMsSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLGNBQWM7Z0JBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztpQkFDcEQsSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLFdBQVc7Z0JBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztpQkFDakQsSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLFNBQVM7Z0JBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztpQkFDL0MsSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLEtBQUs7Z0JBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztpQkFDM0MsSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLFNBQVM7Z0JBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztpQkFDL0MsSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLGVBQWU7Z0JBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztpQkFDdEQsSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLGNBQWM7Z0JBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztpQkFDckQsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLFFBQVEs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QUcsQ0FBQztZQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxJQUFJLEVBQUUsQ0FBQyxDQUFDOztZQUMxQyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFFRCxTQUFTLEVBQUUsQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxFQUFFO1FBQy9CLGdCQUFRLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDckMsZ0JBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztRQUNwQyxJQUFJLElBQUksQ0FBQyxPQUFPO1lBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDO0lBQ3hELENBQUM7SUFFRCxPQUFPLEVBQUUsQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxFQUFFO1FBQzdCLGdCQUFRLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDckMsZ0JBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztRQUNwQyxJQUFJLElBQUksQ0FBQyxPQUFPO1lBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDO0lBQ3hELENBQUM7SUFFRCxNQUFNLEVBQUUsQ0FBQyxJQUFnQixFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsRUFBRTtRQUN4QyxJQUFJLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNO1lBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxVQUFVLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztRQUM5RixJQUFJLElBQUksQ0FBQyxRQUFRLEtBQUssV0FBVyxFQUFFO1lBQy9CLEtBQUssTUFB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SSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDdEQsYUFBYTtZQUNiLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNuQixDQUFDLENBQUM7UUFFRixxQkFBcUI7UUFDckIsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsV0FBVyxFQUFFLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQzdDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLFdBQVcsRUFBRSxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUM3QyxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxhQUFhLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQy9DLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE9BQU8sR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0MsQ0FBQztDQUNKO0FBdEdELDJCQXNHQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikge1xuICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuICB9XG5cbiAgcmV0dXJuIHNlbGY7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2Fzc2VydFRoaXNJbml0aWFsaXplZDsiLCJmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7XG4gIHRyeSB7XG4gICAgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpO1xuICAgIHZhciB2YWx1ZSA9IGluZm8udmFsdWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVqZWN0KGVycm9yKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoaW5mby5kb25lKSB7XG4gICAgcmVzb2x2ZSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7XG5cbiAgICAgIGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJuZXh0XCIsIHZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gX3Rocm93KGVycikge1xuICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIFwidGhyb3dcIiwgZXJyKTtcbiAgICAgIH1cblxuICAgICAgX25leHQodW5kZWZpbmVkKTtcbiAgICB9KTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfYXN5bmNUb0dlbmVyYXRvcjsiLCJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9jbGFzc0NhbGxDaGVjazsiLCJmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICByZXR1cm4gQ29uc3RydWN0b3I7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2NyZWF0ZUNsYXNzOyIsImZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHtcbiAgaWYgKGtleSBpbiBvYmopIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIG9ialtrZXldID0gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gb2JqO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9kZWZpbmVQcm9wZXJ0eTsiLCJ2YXIgc3VwZXJQcm9wQmFzZSA9IHJlcXVpcmUoXCIuL3N1cGVyUHJvcEJhc2VcIik7XG5cbmZ1bmN0aW9uIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHtcbiAgaWYgKHR5cGVvZiBSZWZsZWN0ICE9PSBcInVuZGVmaW5lZFwiICYmIFJlZmxlY3QuZ2V0KSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBfZ2V0ID0gUmVmbGVjdC5nZXQ7XG4gIH0gZWxzZSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBfZ2V0ID0gZnVuY3Rpb24gX2dldCh0YXJnZXQsIHByb3BlcnR5LCByZWNlaXZlcikge1xuICAgICAgdmFyIGJhc2UgPSBzdXBlclByb3BCYXNlKHRhcmdldCwgcHJvcGVydHkpO1xuICAgICAgaWYgKCFiYXNlKSByZXR1cm47XG4gICAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYmFzZSwgcHJvcGVydHkpO1xuXG4gICAgICBpZiAoZGVzYy5nZXQpIHtcbiAgICAgICAgcmV0dXJuIGRlc2MuZ2V0LmNhbGwocmVjZWl2ZXIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGVzYy52YWx1ZTtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIgfHwgdGFyZ2V0KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfZ2V0OyIsImZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHtcbiAgICByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pO1xuICB9O1xuICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9nZXRQcm90b3R5cGVPZjsiLCJ2YXIgc2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKFwiLi9zZXRQcm90b3R5cGVPZlwiKTtcblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7XG4gIH1cblxuICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgdmFsdWU6IHN1YkNsYXNzLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9XG4gIH0pO1xuICBpZiAoc3VwZXJDbGFzcykgc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9pbmhlcml0czsiLCJmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDoge1xuICAgIFwiZGVmYXVsdFwiOiBvYmpcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0OyIsInZhciBfdHlwZW9mID0gcmVxdWlyZShcIi4uL2hlbHBlcnMvdHlwZW9mXCIpO1xuXG52YXIgYXNzZXJ0VGhpc0luaXRpYWxpemVkID0gcmVxdWlyZShcIi4vYXNzZXJ0VGhpc0luaXRpYWxpemVkXCIpO1xuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG4gIGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7XG4gICAgcmV0dXJuIGNhbGw7XG4gIH1cblxuICByZXR1cm4gYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuOyIsImZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gICAgby5fX3Byb3RvX18gPSBwO1xuICAgIHJldHVybiBvO1xuICB9O1xuXG4gIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3NldFByb3RvdHlwZU9mOyIsInZhciBnZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoXCIuL2dldFByb3RvdHlwZU9mXCIpO1xuXG5mdW5jdGlvbiBfc3VwZXJQcm9wQmFzZShvYmplY3QsIHByb3BlcnR5KSB7XG4gIHdoaWxlICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpKSB7XG4gICAgb2JqZWN0ID0gZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTtcbiAgICBpZiAob2JqZWN0ID09PSBudWxsKSBicmVhaztcbiAgfVxuXG4gIHJldHVybiBvYmplY3Q7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3N1cGVyUHJvcEJhc2U7IiwiZnVuY3Rpb24gX3R5cGVvZihvYmopIHtcbiAgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiO1xuXG4gIGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikge1xuICAgIG1vZHVsZS5leHBvcnRzID0gX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIG9iajtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIG1vZHVsZS5leHBvcnRzID0gX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIF90eXBlb2Yob2JqKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfdHlwZW9mOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInJlZ2VuZXJhdG9yLXJ1bnRpbWVcIik7XG4iLCIndXNlIHN0cmljdCdcblxuZXhwb3J0cy5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aFxuZXhwb3J0cy50b0J5dGVBcnJheSA9IHRvQnl0ZUFycmF5XG5leHBvcnRzLmZyb21CeXRlQXJyYXkgPSBmcm9tQnl0ZUFycmF5XG5cbnZhciBsb29rdXAgPSBbXVxudmFyIHJldkxvb2t1cCA9IFtdXG52YXIgQXJyID0gdHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnID8gVWludDhBcnJheSA6IEFycmF5XG5cbnZhciBjb2RlID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nXG5mb3IgKHZhciBpID0gMCwgbGVuID0gY29kZS5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICBsb29rdXBbaV0gPSBjb2RlW2ldXG4gIHJldkxvb2t1cFtjb2RlLmNoYXJDb2RlQXQoaSldID0gaVxufVxuXG4vLyBTdXBwb3J0IGRlY29kaW5nIFVSTC1zYWZlIGJhc2U2NCBzdHJpbmdzLCBhcyBOb2RlLmpzIGRvZXMuXG4vLyBTZWU6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Jhc2U2NCNVUkxfYXBwbGljYXRpb25zXG5yZXZMb29rdXBbJy0nLmNoYXJDb2RlQXQoMCldID0gNjJcbnJldkxvb2t1cFsnXycuY2hhckNvZGVBdCgwKV0gPSA2M1xuXG5mdW5jdGlvbiBnZXRMZW5zIChiNjQpIHtcbiAgdmFyIGxlbiA9IGI2NC5sZW5ndGhcblxuICBpZiAobGVuICUgNCA+IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDQnKVxuICB9XG5cbiAgLy8gVHJpbSBvZmYgZXh0cmEgYnl0ZXMgYWZ0ZXIgcGxhY2Vob2xkZXIgYnl0ZXMgYXJlIGZvdW5kXG4gIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2JlYXRnYW1taXQvYmFzZTY0LWpzL2lzc3Vlcy80MlxuICB2YXIgdmFsaWRMZW4gPSBiNjQuaW5kZXhPZignPScpXG4gIGlmICh2YWxpZExlbiA9PT0gLTEpIHZhbGlkTGVuID0gbGVuXG5cbiAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IHZhbGlkTGVuID09PSBsZW5cbiAgICA/IDBcbiAgICA6IDQgLSAodmFsaWRMZW4gJSA0KVxuXG4gIHJldHVybiBbdmFsaWRMZW4sIHBsYWNlSG9sZGVyc0xlbl1cbn1cblxuLy8gYmFzZTY0IGlzIDQvMyArIHVwIHRvIHR3byBjaGFyYWN0ZXJzIG9mIHRoZSBvcmlnaW5hbCBkYXRhXG5mdW5jdGlvbiBieXRlTGVuZ3RoIChiNjQpIHtcbiAgdmFyIGxlbnMgPSBnZXRMZW5zKGI2NClcbiAgdmFyIHZhbGlkTGVuID0gbGVuc1swXVxuICB2YXIgcGxhY2VIb2xkZXJzTGVuID0gbGVuc1sxXVxuICByZXR1cm4gKCh2YWxpZExlbiArIHBsYWNlSG9sZGVyc0xlbikgKiAzIC8gNCkgLSBwbGFjZUhvbGRlcnNMZW5cbn1cblxuZnVuY3Rpb24gX2J5dGVMZW5ndGggKGI2NCwgdmFsaWRMZW4sIHBsYWNlSG9sZGVyc0xlbikge1xuICByZXR1cm4gKCh2YWxpZExlbiArIHBsYWNlSG9sZGVyc0xlbikgKiAzIC8gNCkgLSBwbGFjZUhvbGRlcnNMZW5cbn1cblxuZnVuY3Rpb24gdG9CeXRlQXJyYXkgKGI2NCkge1xuICB2YXIgdG1wXG4gIHZhciBsZW5zID0gZ2V0TGVucyhiNjQpXG4gIHZhciB2YWxpZExlbiA9IGxlbnNbMF1cbiAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IGxlbnNbMV1cblxuICB2YXIgYXJyID0gbmV3IEFycihfYnl0ZUxlbmd0aChiNjQsIHZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW4pKVxuXG4gIHZhciBjdXJCeXRlID0gMFxuXG4gIC8vIGlmIHRoZXJlIGFyZSBwbGFjZWhvbGRlcnMsIG9ubHkgZ2V0IHVwIHRvIHRoZSBsYXN0IGNvbXBsZXRlIDQgY2hhcnNcbiAgdmFyIGxlbiA9IHBsYWNlSG9sZGVyc0xlbiA+IDBcbiAgICA/IHZhbGlkTGVuIC0gNFxuICAgIDogdmFsaWRMZW5cblxuICB2YXIgaVxuICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpICs9IDQpIHtcbiAgICB0bXAgPVxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTgpIHxcbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA8PCAxMikgfFxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildIDw8IDYpIHxcbiAgICAgIHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMyldXG4gICAgYXJyW2N1ckJ5dGUrK10gPSAodG1wID4+IDE2KSAmIDB4RkZcbiAgICBhcnJbY3VyQnl0ZSsrXSA9ICh0bXAgPj4gOCkgJiAweEZGXG4gICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAweEZGXG4gIH1cblxuICBpZiAocGxhY2VIb2xkZXJzTGVuID09PSAyKSB7XG4gICAgdG1wID1cbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDIpIHxcbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA+PiA0KVxuICAgIGFycltjdXJCeXRlKytdID0gdG1wICYgMHhGRlxuICB9XG5cbiAgaWYgKHBsYWNlSG9sZGVyc0xlbiA9PT0gMSkge1xuICAgIHRtcCA9XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxMCkgfFxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDQpIHxcbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDIpXSA+PiAyKVxuICAgIGFycltjdXJCeXRlKytdID0gKHRtcCA+PiA4KSAmIDB4RkZcbiAgICBhcnJbY3VyQnl0ZSsrXSA9IHRtcCAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBhcnJcbn1cblxuZnVuY3Rpb24gdHJpcGxldFRvQmFzZTY0IChudW0pIHtcbiAgcmV0dXJuIGxvb2t1cFtudW0gPj4gMTggJiAweDNGXSArXG4gICAgbG9va3VwW251bSA+PiAxMiAmIDB4M0ZdICtcbiAgICBsb29rdXBbbnVtID4+IDYgJiAweDNGXSArXG4gICAgbG9va3VwW251bSAmIDB4M0ZdXG59XG5cbmZ1bmN0aW9uIGVuY29kZUNodW5rICh1aW50OCwgc3RhcnQsIGVuZCkge1xuICB2YXIgdG1wXG4gIHZhciBvdXRwdXQgPSBbXVxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkgKz0gMykge1xuICAgIHRtcCA9XG4gICAgICAoKHVpbnQ4W2ldIDw8IDE2KSAmIDB4RkYwMDAwKSArXG4gICAgICAoKHVpbnQ4W2kgKyAxXSA8PCA4KSAmIDB4RkYwMCkgK1xuICAgICAgKHVpbnQ4W2kgKyAyXSAmIDB4RkYpXG4gICAgb3V0cHV0LnB1c2godHJpcGxldFRvQmFzZTY0KHRtcCkpXG4gIH1cbiAgcmV0dXJuIG91dHB1dC5qb2luKCcnKVxufVxuXG5mdW5jdGlvbiBmcm9tQnl0ZUFycmF5ICh1aW50OCkge1xuICB2YXIgdG1wXG4gIHZhciBsZW4gPSB1aW50OC5sZW5ndGhcbiAgdmFyIGV4dHJhQnl0ZXMgPSBsZW4gJSAzIC8vIGlmIHdlIGhhdmUgMSBieXRlIGxlZnQsIHBhZCAyIGJ5dGVzXG4gIHZhciBwYXJ0cyA9IFtdXG4gIHZhciBtYXhDaHVua0xlbmd0aCA9IDE2MzgzIC8vIG11c3QgYmUgbXVsdGlwbGUgb2YgM1xuXG4gIC8vIGdvIHRocm91Z2ggdGhlIGFycmF5IGV2ZXJ5IHRocmVlIGJ5dGVzLCB3ZSdsbCBkZWFsIHdpdGggdHJhaWxpbmcgc3R1ZmYgbGF0ZXJcbiAgZm9yICh2YXIgaSA9IDAsIGxlbjIgPSBsZW4gLSBleHRyYUJ5dGVzOyBpIDwgbGVuMjsgaSArPSBtYXhDaHVua0xlbmd0aCkge1xuICAgIHBhcnRzLnB1c2goZW5jb2RlQ2h1bmsoXG4gICAgICB1aW50OCwgaSwgKGkgKyBtYXhDaHVua0xlbmd0aCkgPiBsZW4yID8gbGVuMiA6IChpICsgbWF4Q2h1bmtMZW5ndGgpXG4gICAgKSlcbiAgfVxuXG4gIC8vIHBhZCB0aGUgZW5kIHdpdGggemVyb3MsIGJ1dCBtYWtlIHN1cmUgdG8gbm90IGZvcmdldCB0aGUgZXh0cmEgYnl0ZXNcbiAgaWYgKGV4dHJhQnl0ZXMgPT09IDEpIHtcbiAgICB0bXAgPSB1aW50OFtsZW4gLSAxXVxuICAgIHBhcnRzLnB1c2goXG4gICAgICBsb29rdXBbdG1wID4+IDJdICtcbiAgICAgIGxvb2t1cFsodG1wIDw8IDQpICYgMHgzRl0gK1xuICAgICAgJz09J1xuICAgIClcbiAgfSBlbHNlIGlmIChleHRyYUJ5dGVzID09PSAyKSB7XG4gICAgdG1wID0gKHVpbnQ4W2xlbiAtIDJdIDw8IDgpICsgdWludDhbbGVuIC0gMV1cbiAgICBwYXJ0cy5wdXNoKFxuICAgICAgbG9va3VwW3RtcCA+PiAxMF0gK1xuICAgICAgbG9va3VwWyh0bXAgPj4gNCkgJiAweDNGXSArXG4gICAgICBsb29rdXBbKHRtcCA8PCAyKSAmIDB4M0ZdICtcbiAgICAgICc9J1xuICAgIClcbiAgfVxuXG4gIHJldHVybiBwYXJ0cy5qb2luKCcnKVxufVxuIiwiIiwiLyohXG4gKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci5cbiAqXG4gKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8aHR0cHM6Ly9mZXJvc3Mub3JnPlxuICogQGxpY2Vuc2UgIE1JVFxuICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xuXG4ndXNlIHN0cmljdCdcblxudmFyIGJhc2U2NCA9IHJlcXVpcmUoJ2Jhc2U2NC1qcycpXG52YXIgaWVlZTc1NCA9IHJlcXVpcmUoJ2llZWU3NTQnKVxuXG5leHBvcnRzLkJ1ZmZlciA9IEJ1ZmZlclxuZXhwb3J0cy5TbG93QnVmZmVyID0gU2xvd0J1ZmZlclxuZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFUyA9IDUwXG5cbnZhciBLX01BWF9MRU5HVEggPSAweDdmZmZmZmZmXG5leHBvcnRzLmtNYXhMZW5ndGggPSBLX01BWF9MRU5HVEhcblxuLyoqXG4gKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOlxuICogICA9PT0gdHJ1ZSAgICBVc2UgVWludDhBcnJheSBpbXBsZW1lbnRhdGlvbiAoZmFzdGVzdClcbiAqICAgPT09IGZhbHNlICAgUHJpbnQgd2FybmluZyBhbmQgcmVjb21tZW5kIHVzaW5nIGBidWZmZXJgIHY0Lnggd2hpY2ggaGFzIGFuIE9iamVjdFxuICogICAgICAgICAgICAgICBpbXBsZW1lbnRhdGlvbiAobW9zdCBjb21wYXRpYmxlLCBldmVuIElFNilcbiAqXG4gKiBCcm93c2VycyB0aGF0IHN1cHBvcnQgdHlwZWQgYXJyYXlzIGFyZSBJRSAxMCssIEZpcmVmb3ggNCssIENocm9tZSA3KywgU2FmYXJpIDUuMSssXG4gKiBPcGVyYSAxMS42KywgaU9TIDQuMisuXG4gKlxuICogV2UgcmVwb3J0IHRoYXQgdGhlIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB0eXBlZCBhcnJheXMgaWYgdGhlIGFyZSBub3Qgc3ViY2xhc3NhYmxlXG4gKiB1c2luZyBfX3Byb3RvX18uIEZpcmVmb3ggNC0yOSBsYWNrcyBzdXBwb3J0IGZvciBhZGRpbmcgbmV3IHByb3BlcnRpZXMgdG8gYFVpbnQ4QXJyYXlgXG4gKiAoU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02OTU0MzgpLiBJRSAxMCBsYWNrcyBzdXBwb3J0XG4gKiBmb3IgX19wcm90b19fIGFuZCBoYXMgYSBidWdneSB0eXBlZCBhcnJheSBpbXBsZW1lbnRhdGlvbi5cbiAqL1xuQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgPSB0eXBlZEFycmF5U3VwcG9ydCgpXG5cbmlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgdHlwZW9mIGNvbnNvbGUuZXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgY29uc29sZS5lcnJvcihcbiAgICAnVGhpcyBicm93c2VyIGxhY2tzIHR5cGVkIGFycmF5IChVaW50OEFycmF5KSBzdXBwb3J0IHdoaWNoIGlzIHJlcXVpcmVkIGJ5ICcgK1xuICAgICdgYnVmZmVyYCB2NS54LiBVc2UgYGJ1ZmZlcmAgdjQueCBpZiB5b3UgcmVxdWlyZSBvbGQgYnJvd3NlciBzdXBwb3J0LidcbiAgKVxufVxuXG5mdW5jdGlvbiB0eXBlZEFycmF5U3VwcG9ydCAoKSB7XG4gIC8vIENhbiB0eXBlZCBhcnJheSBpbnN0YW5jZXMgY2FuIGJlIGF1Z21lbnRlZD9cbiAgdHJ5IHtcbiAgICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoMSlcbiAgICBhcnIuX19wcm90b19fID0geyBfX3Byb3RvX186IFVpbnQ4QXJyYXkucHJvdG90eXBlLCBmb286IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDQyIH0gfVxuICAgIHJldHVybiBhcnIuZm9vKCkgPT09IDQyXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoQnVmZmVyLnByb3RvdHlwZSwgJ3BhcmVudCcsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIodGhpcykpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5idWZmZXJcbiAgfVxufSlcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1ZmZlci5wcm90b3R5cGUsICdvZmZzZXQnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIGlmICghQnVmZmVyLmlzQnVmZmVyKHRoaXMpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldFxuICB9XG59KVxuXG5mdW5jdGlvbiBjcmVhdGVCdWZmZXIgKGxlbmd0aCkge1xuICBpZiAobGVuZ3RoID4gS19NQVhfTEVOR1RIKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBcIicgKyBsZW5ndGggKyAnXCIgaXMgaW52YWxpZCBmb3Igb3B0aW9uIFwic2l6ZVwiJylcbiAgfVxuICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZVxuICB2YXIgYnVmID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKVxuICBidWYuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICByZXR1cm4gYnVmXG59XG5cbi8qKlxuICogVGhlIEJ1ZmZlciBjb25zdHJ1Y3RvciByZXR1cm5zIGluc3RhbmNlcyBvZiBgVWludDhBcnJheWAgdGhhdCBoYXZlIHRoZWlyXG4gKiBwcm90b3R5cGUgY2hhbmdlZCB0byBgQnVmZmVyLnByb3RvdHlwZWAuIEZ1cnRoZXJtb3JlLCBgQnVmZmVyYCBpcyBhIHN1YmNsYXNzIG9mXG4gKiBgVWludDhBcnJheWAsIHNvIHRoZSByZXR1cm5lZCBpbnN0YW5jZXMgd2lsbCBoYXZlIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBtZXRob2RzXG4gKiBhbmQgdGhlIGBVaW50OEFycmF5YCBtZXRob2RzLiBTcXVhcmUgYnJhY2tldCBub3RhdGlvbiB3b3JrcyBhcyBleHBlY3RlZCAtLSBpdFxuICogcmV0dXJucyBhIHNpbmdsZSBvY3RldC5cbiAqXG4gKiBUaGUgYFVpbnQ4QXJyYXlgIHByb3RvdHlwZSByZW1haW5zIHVubW9kaWZpZWQuXG4gKi9cblxuZnVuY3Rpb24gQnVmZmVyIChhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICAvLyBDb21tb24gY2FzZS5cbiAgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInKSB7XG4gICAgaWYgKHR5cGVvZiBlbmNvZGluZ09yT2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgJ1RoZSBcInN0cmluZ1wiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBzdHJpbmcuIFJlY2VpdmVkIHR5cGUgbnVtYmVyJ1xuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gYWxsb2NVbnNhZmUoYXJnKVxuICB9XG4gIHJldHVybiBmcm9tKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxufVxuXG4vLyBGaXggc3ViYXJyYXkoKSBpbiBFUzIwMTYuIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvcHVsbC85N1xuaWYgKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC5zcGVjaWVzICE9IG51bGwgJiZcbiAgICBCdWZmZXJbU3ltYm9sLnNwZWNpZXNdID09PSBCdWZmZXIpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1ZmZlciwgU3ltYm9sLnNwZWNpZXMsIHtcbiAgICB2YWx1ZTogbnVsbCxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgd3JpdGFibGU6IGZhbHNlXG4gIH0pXG59XG5cbkJ1ZmZlci5wb29sU2l6ZSA9IDgxOTIgLy8gbm90IHVzZWQgYnkgdGhpcyBpbXBsZW1lbnRhdGlvblxuXG5mdW5jdGlvbiBmcm9tICh2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGZyb21TdHJpbmcodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQpXG4gIH1cblxuICBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KHZhbHVlKSkge1xuICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKHZhbHVlKVxuICB9XG5cbiAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoXG4gICAgICAnVGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgb25lIG9mIHR5cGUgc3RyaW5nLCBCdWZmZXIsIEFycmF5QnVmZmVyLCBBcnJheSwgJyArXG4gICAgICAnb3IgQXJyYXktbGlrZSBPYmplY3QuIFJlY2VpdmVkIHR5cGUgJyArICh0eXBlb2YgdmFsdWUpXG4gICAgKVxuICB9XG5cbiAgaWYgKGlzSW5zdGFuY2UodmFsdWUsIEFycmF5QnVmZmVyKSB8fFxuICAgICAgKHZhbHVlICYmIGlzSW5zdGFuY2UodmFsdWUuYnVmZmVyLCBBcnJheUJ1ZmZlcikpKSB7XG4gICAgcmV0dXJuIGZyb21BcnJheUJ1ZmZlcih2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxuICB9XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgJ1RoZSBcInZhbHVlXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgb2YgdHlwZSBudW1iZXIuIFJlY2VpdmVkIHR5cGUgbnVtYmVyJ1xuICAgIClcbiAgfVxuXG4gIHZhciB2YWx1ZU9mID0gdmFsdWUudmFsdWVPZiAmJiB2YWx1ZS52YWx1ZU9mKClcbiAgaWYgKHZhbHVlT2YgIT0gbnVsbCAmJiB2YWx1ZU9mICE9PSB2YWx1ZSkge1xuICAgIHJldHVybiBCdWZmZXIuZnJvbSh2YWx1ZU9mLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG4gIH1cblxuICB2YXIgYiA9IGZyb21PYmplY3QodmFsdWUpXG4gIGlmIChiKSByZXR1cm4gYlxuXG4gIGlmICh0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9QcmltaXRpdmUgIT0gbnVsbCAmJlxuICAgICAgdHlwZW9mIHZhbHVlW1N5bWJvbC50b1ByaW1pdGl2ZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gQnVmZmVyLmZyb20oXG4gICAgICB2YWx1ZVtTeW1ib2wudG9QcmltaXRpdmVdKCdzdHJpbmcnKSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoXG4gICAgKVxuICB9XG5cbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAnVGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgb25lIG9mIHR5cGUgc3RyaW5nLCBCdWZmZXIsIEFycmF5QnVmZmVyLCBBcnJheSwgJyArXG4gICAgJ29yIEFycmF5LWxpa2UgT2JqZWN0LiBSZWNlaXZlZCB0eXBlICcgKyAodHlwZW9mIHZhbHVlKVxuICApXG59XG5cbi8qKlxuICogRnVuY3Rpb25hbGx5IGVxdWl2YWxlbnQgdG8gQnVmZmVyKGFyZywgZW5jb2RpbmcpIGJ1dCB0aHJvd3MgYSBUeXBlRXJyb3JcbiAqIGlmIHZhbHVlIGlzIGEgbnVtYmVyLlxuICogQnVmZmVyLmZyb20oc3RyWywgZW5jb2RpbmddKVxuICogQnVmZmVyLmZyb20oYXJyYXkpXG4gKiBCdWZmZXIuZnJvbShidWZmZXIpXG4gKiBCdWZmZXIuZnJvbShhcnJheUJ1ZmZlclssIGJ5dGVPZmZzZXRbLCBsZW5ndGhdXSlcbiAqKi9cbkJ1ZmZlci5mcm9tID0gZnVuY3Rpb24gKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGZyb20odmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbn1cblxuLy8gTm90ZTogQ2hhbmdlIHByb3RvdHlwZSAqYWZ0ZXIqIEJ1ZmZlci5mcm9tIGlzIGRlZmluZWQgdG8gd29ya2Fyb3VuZCBDaHJvbWUgYnVnOlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvcHVsbC8xNDhcbkJ1ZmZlci5wcm90b3R5cGUuX19wcm90b19fID0gVWludDhBcnJheS5wcm90b3R5cGVcbkJ1ZmZlci5fX3Byb3RvX18gPSBVaW50OEFycmF5XG5cbmZ1bmN0aW9uIGFzc2VydFNpemUgKHNpemUpIHtcbiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wic2l6ZVwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBudW1iZXInKVxuICB9IGVsc2UgaWYgKHNpemUgPCAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBcIicgKyBzaXplICsgJ1wiIGlzIGludmFsaWQgZm9yIG9wdGlvbiBcInNpemVcIicpXG4gIH1cbn1cblxuZnVuY3Rpb24gYWxsb2MgKHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG4gIGFzc2VydFNpemUoc2l6ZSlcbiAgaWYgKHNpemUgPD0gMCkge1xuICAgIHJldHVybiBjcmVhdGVCdWZmZXIoc2l6ZSlcbiAgfVxuICBpZiAoZmlsbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gT25seSBwYXkgYXR0ZW50aW9uIHRvIGVuY29kaW5nIGlmIGl0J3MgYSBzdHJpbmcuIFRoaXNcbiAgICAvLyBwcmV2ZW50cyBhY2NpZGVudGFsbHkgc2VuZGluZyBpbiBhIG51bWJlciB0aGF0IHdvdWxkXG4gICAgLy8gYmUgaW50ZXJwcmV0dGVkIGFzIGEgc3RhcnQgb2Zmc2V0LlxuICAgIHJldHVybiB0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnXG4gICAgICA/IGNyZWF0ZUJ1ZmZlcihzaXplKS5maWxsKGZpbGwsIGVuY29kaW5nKVxuICAgICAgOiBjcmVhdGVCdWZmZXIoc2l6ZSkuZmlsbChmaWxsKVxuICB9XG4gIHJldHVybiBjcmVhdGVCdWZmZXIoc2l6ZSlcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG4gKiBhbGxvYyhzaXplWywgZmlsbFssIGVuY29kaW5nXV0pXG4gKiovXG5CdWZmZXIuYWxsb2MgPSBmdW5jdGlvbiAoc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGFsbG9jKHNpemUsIGZpbGwsIGVuY29kaW5nKVxufVxuXG5mdW5jdGlvbiBhbGxvY1Vuc2FmZSAoc2l6ZSkge1xuICBhc3NlcnRTaXplKHNpemUpXG4gIHJldHVybiBjcmVhdGVCdWZmZXIoc2l6ZSA8IDAgPyAwIDogY2hlY2tlZChzaXplKSB8IDApXG59XG5cbi8qKlxuICogRXF1aXZhbGVudCB0byBCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqICovXG5CdWZmZXIuYWxsb2NVbnNhZmUgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICByZXR1cm4gYWxsb2NVbnNhZmUoc2l6ZSlcbn1cbi8qKlxuICogRXF1aXZhbGVudCB0byBTbG93QnVmZmVyKG51bSksIGJ5IGRlZmF1bHQgY3JlYXRlcyBhIG5vbi16ZXJvLWZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG4gKi9cbkJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICByZXR1cm4gYWxsb2NVbnNhZmUoc2l6ZSlcbn1cblxuZnVuY3Rpb24gZnJvbVN0cmluZyAoc3RyaW5nLCBlbmNvZGluZykge1xuICBpZiAodHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJyB8fCBlbmNvZGluZyA9PT0gJycpIHtcbiAgICBlbmNvZGluZyA9ICd1dGY4J1xuICB9XG5cbiAgaWYgKCFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gIH1cblxuICB2YXIgbGVuZ3RoID0gYnl0ZUxlbmd0aChzdHJpbmcsIGVuY29kaW5nKSB8IDBcbiAgdmFyIGJ1ZiA9IGNyZWF0ZUJ1ZmZlcihsZW5ndGgpXG5cbiAgdmFyIGFjdHVhbCA9IGJ1Zi53cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuXG4gIGlmIChhY3R1YWwgIT09IGxlbmd0aCkge1xuICAgIC8vIFdyaXRpbmcgYSBoZXggc3RyaW5nLCBmb3IgZXhhbXBsZSwgdGhhdCBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMgd2lsbFxuICAgIC8vIGNhdXNlIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGZpcnN0IGludmFsaWQgY2hhcmFjdGVyIHRvIGJlIGlnbm9yZWQuIChlLmcuXG4gICAgLy8gJ2FieHhjZCcgd2lsbCBiZSB0cmVhdGVkIGFzICdhYicpXG4gICAgYnVmID0gYnVmLnNsaWNlKDAsIGFjdHVhbClcbiAgfVxuXG4gIHJldHVybiBidWZcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5TGlrZSAoYXJyYXkpIHtcbiAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCA8IDAgPyAwIDogY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMFxuICB2YXIgYnVmID0gY3JlYXRlQnVmZmVyKGxlbmd0aClcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIGJ1ZltpXSA9IGFycmF5W2ldICYgMjU1XG4gIH1cbiAgcmV0dXJuIGJ1ZlxufVxuXG5mdW5jdGlvbiBmcm9tQXJyYXlCdWZmZXIgKGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpIHtcbiAgaWYgKGJ5dGVPZmZzZXQgPCAwIHx8IGFycmF5LmJ5dGVMZW5ndGggPCBieXRlT2Zmc2V0KSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1wib2Zmc2V0XCIgaXMgb3V0c2lkZSBvZiBidWZmZXIgYm91bmRzJylcbiAgfVxuXG4gIGlmIChhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCArIChsZW5ndGggfHwgMCkpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJsZW5ndGhcIiBpcyBvdXRzaWRlIG9mIGJ1ZmZlciBib3VuZHMnKVxuICB9XG5cbiAgdmFyIGJ1ZlxuICBpZiAoYnl0ZU9mZnNldCA9PT0gdW5kZWZpbmVkICYmIGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgYnVmID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXkpXG4gIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBidWYgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldClcbiAgfSBlbHNlIHtcbiAgICBidWYgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKVxuICB9XG5cbiAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2VcbiAgYnVmLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgcmV0dXJuIGJ1ZlxufVxuXG5mdW5jdGlvbiBmcm9tT2JqZWN0IChvYmopIHtcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihvYmopKSB7XG4gICAgdmFyIGxlbiA9IGNoZWNrZWQob2JqLmxlbmd0aCkgfCAwXG4gICAgdmFyIGJ1ZiA9IGNyZWF0ZUJ1ZmZlcihsZW4pXG5cbiAgICBpZiAoYnVmLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGJ1ZlxuICAgIH1cblxuICAgIG9iai5jb3B5KGJ1ZiwgMCwgMCwgbGVuKVxuICAgIHJldHVybiBidWZcbiAgfVxuXG4gIGlmIChvYmoubGVuZ3RoICE9PSB1bmRlZmluZWQpIHtcbiAgICBpZiAodHlwZW9mIG9iai5sZW5ndGggIT09ICdudW1iZXInIHx8IG51bWJlcklzTmFOKG9iai5sZW5ndGgpKSB7XG4gICAgICByZXR1cm4gY3JlYXRlQnVmZmVyKDApXG4gICAgfVxuICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKG9iailcbiAgfVxuXG4gIGlmIChvYmoudHlwZSA9PT0gJ0J1ZmZlcicgJiYgQXJyYXkuaXNBcnJheShvYmouZGF0YSkpIHtcbiAgICByZXR1cm4gZnJvbUFycmF5TGlrZShvYmouZGF0YSlcbiAgfVxufVxuXG5mdW5jdGlvbiBjaGVja2VkIChsZW5ndGgpIHtcbiAgLy8gTm90ZTogY2Fubm90IHVzZSBgbGVuZ3RoIDwgS19NQVhfTEVOR1RIYCBoZXJlIGJlY2F1c2UgdGhhdCBmYWlscyB3aGVuXG4gIC8vIGxlbmd0aCBpcyBOYU4gKHdoaWNoIGlzIG90aGVyd2lzZSBjb2VyY2VkIHRvIHplcm8uKVxuICBpZiAobGVuZ3RoID49IEtfTUFYX0xFTkdUSCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICdzaXplOiAweCcgKyBLX01BWF9MRU5HVEgudG9TdHJpbmcoMTYpICsgJyBieXRlcycpXG4gIH1cbiAgcmV0dXJuIGxlbmd0aCB8IDBcbn1cblxuZnVuY3Rpb24gU2xvd0J1ZmZlciAobGVuZ3RoKSB7XG4gIGlmICgrbGVuZ3RoICE9IGxlbmd0aCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGVxZXFlcVxuICAgIGxlbmd0aCA9IDBcbiAgfVxuICByZXR1cm4gQnVmZmVyLmFsbG9jKCtsZW5ndGgpXG59XG5cbkJ1ZmZlci5pc0J1ZmZlciA9IGZ1bmN0aW9uIGlzQnVmZmVyIChiKSB7XG4gIHJldHVybiBiICE9IG51bGwgJiYgYi5faXNCdWZmZXIgPT09IHRydWUgJiZcbiAgICBiICE9PSBCdWZmZXIucHJvdG90eXBlIC8vIHNvIEJ1ZmZlci5pc0J1ZmZlcihCdWZmZXIucHJvdG90eXBlKSB3aWxsIGJlIGZhbHNlXG59XG5cbkJ1ZmZlci5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYSwgYikge1xuICBpZiAoaXNJbnN0YW5jZShhLCBVaW50OEFycmF5KSkgYSA9IEJ1ZmZlci5mcm9tKGEsIGEub2Zmc2V0LCBhLmJ5dGVMZW5ndGgpXG4gIGlmIChpc0luc3RhbmNlKGIsIFVpbnQ4QXJyYXkpKSBiID0gQnVmZmVyLmZyb20oYiwgYi5vZmZzZXQsIGIuYnl0ZUxlbmd0aClcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYSkgfHwgIUJ1ZmZlci5pc0J1ZmZlcihiKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAnVGhlIFwiYnVmMVwiLCBcImJ1ZjJcIiBhcmd1bWVudHMgbXVzdCBiZSBvbmUgb2YgdHlwZSBCdWZmZXIgb3IgVWludDhBcnJheSdcbiAgICApXG4gIH1cblxuICBpZiAoYSA9PT0gYikgcmV0dXJuIDBcblxuICB2YXIgeCA9IGEubGVuZ3RoXG4gIHZhciB5ID0gYi5sZW5ndGhcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gTWF0aC5taW4oeCwgeSk7IGkgPCBsZW47ICsraSkge1xuICAgIGlmIChhW2ldICE9PSBiW2ldKSB7XG4gICAgICB4ID0gYVtpXVxuICAgICAgeSA9IGJbaV1cbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgaWYgKHggPCB5KSByZXR1cm4gLTFcbiAgaWYgKHkgPCB4KSByZXR1cm4gMVxuICByZXR1cm4gMFxufVxuXG5CdWZmZXIuaXNFbmNvZGluZyA9IGZ1bmN0aW9uIGlzRW5jb2RpbmcgKGVuY29kaW5nKSB7XG4gIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgY2FzZSAnaGV4JzpcbiAgICBjYXNlICd1dGY4JzpcbiAgICBjYXNlICd1dGYtOCc6XG4gICAgY2FzZSAnYXNjaWknOlxuICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgY2FzZSAnYmluYXJ5JzpcbiAgICBjYXNlICdiYXNlNjQnOlxuICAgIGNhc2UgJ3VjczInOlxuICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICBjYXNlICd1dGYxNmxlJzpcbiAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5CdWZmZXIuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0IChsaXN0LCBsZW5ndGgpIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGxpc3QpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJylcbiAgfVxuXG4gIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBCdWZmZXIuYWxsb2MoMClcbiAgfVxuXG4gIHZhciBpXG4gIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGxlbmd0aCA9IDBcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7ICsraSkge1xuICAgICAgbGVuZ3RoICs9IGxpc3RbaV0ubGVuZ3RoXG4gICAgfVxuICB9XG5cbiAgdmFyIGJ1ZmZlciA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShsZW5ndGgpXG4gIHZhciBwb3MgPSAwXG4gIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgdmFyIGJ1ZiA9IGxpc3RbaV1cbiAgICBpZiAoaXNJbnN0YW5jZShidWYsIFVpbnQ4QXJyYXkpKSB7XG4gICAgICBidWYgPSBCdWZmZXIuZnJvbShidWYpXG4gICAgfVxuICAgIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpXG4gICAgfVxuICAgIGJ1Zi5jb3B5KGJ1ZmZlciwgcG9zKVxuICAgIHBvcyArPSBidWYubGVuZ3RoXG4gIH1cbiAgcmV0dXJuIGJ1ZmZlclxufVxuXG5mdW5jdGlvbiBieXRlTGVuZ3RoIChzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIoc3RyaW5nKSkge1xuICAgIHJldHVybiBzdHJpbmcubGVuZ3RoXG4gIH1cbiAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhzdHJpbmcpIHx8IGlzSW5zdGFuY2Uoc3RyaW5nLCBBcnJheUJ1ZmZlcikpIHtcbiAgICByZXR1cm4gc3RyaW5nLmJ5dGVMZW5ndGhcbiAgfVxuICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgJ1RoZSBcInN0cmluZ1wiIGFyZ3VtZW50IG11c3QgYmUgb25lIG9mIHR5cGUgc3RyaW5nLCBCdWZmZXIsIG9yIEFycmF5QnVmZmVyLiAnICtcbiAgICAgICdSZWNlaXZlZCB0eXBlICcgKyB0eXBlb2Ygc3RyaW5nXG4gICAgKVxuICB9XG5cbiAgdmFyIGxlbiA9IHN0cmluZy5sZW5ndGhcbiAgdmFyIG11c3RNYXRjaCA9IChhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gPT09IHRydWUpXG4gIGlmICghbXVzdE1hdGNoICYmIGxlbiA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBVc2UgYSBmb3IgbG9vcCB0byBhdm9pZCByZWN1cnNpb25cbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gbGVuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gbGVuICogMlxuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGxlbiA+Pj4gMVxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgcmV0dXJuIGJhc2U2NFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkge1xuICAgICAgICAgIHJldHVybiBtdXN0TWF0Y2ggPyAtMSA6IHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoIC8vIGFzc3VtZSB1dGY4XG4gICAgICAgIH1cbiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cbkJ1ZmZlci5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aFxuXG5mdW5jdGlvbiBzbG93VG9TdHJpbmcgKGVuY29kaW5nLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG5cbiAgLy8gTm8gbmVlZCB0byB2ZXJpZnkgdGhhdCBcInRoaXMubGVuZ3RoIDw9IE1BWF9VSU5UMzJcIiBzaW5jZSBpdCdzIGEgcmVhZC1vbmx5XG4gIC8vIHByb3BlcnR5IG9mIGEgdHlwZWQgYXJyYXkuXG5cbiAgLy8gVGhpcyBiZWhhdmVzIG5laXRoZXIgbGlrZSBTdHJpbmcgbm9yIFVpbnQ4QXJyYXkgaW4gdGhhdCB3ZSBzZXQgc3RhcnQvZW5kXG4gIC8vIHRvIHRoZWlyIHVwcGVyL2xvd2VyIGJvdW5kcyBpZiB0aGUgdmFsdWUgcGFzc2VkIGlzIG91dCBvZiByYW5nZS5cbiAgLy8gdW5kZWZpbmVkIGlzIGhhbmRsZWQgc3BlY2lhbGx5IGFzIHBlciBFQ01BLTI2MiA2dGggRWRpdGlvbixcbiAgLy8gU2VjdGlvbiAxMy4zLjMuNyBSdW50aW1lIFNlbWFudGljczogS2V5ZWRCaW5kaW5nSW5pdGlhbGl6YXRpb24uXG4gIGlmIChzdGFydCA9PT0gdW5kZWZpbmVkIHx8IHN0YXJ0IDwgMCkge1xuICAgIHN0YXJ0ID0gMFxuICB9XG4gIC8vIFJldHVybiBlYXJseSBpZiBzdGFydCA+IHRoaXMubGVuZ3RoLiBEb25lIGhlcmUgdG8gcHJldmVudCBwb3RlbnRpYWwgdWludDMyXG4gIC8vIGNvZXJjaW9uIGZhaWwgYmVsb3cuXG4gIGlmIChzdGFydCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICBpZiAoZW5kID09PSB1bmRlZmluZWQgfHwgZW5kID4gdGhpcy5sZW5ndGgpIHtcbiAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICB9XG5cbiAgaWYgKGVuZCA8PSAwKSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICAvLyBGb3JjZSBjb2Vyc2lvbiB0byB1aW50MzIuIFRoaXMgd2lsbCBhbHNvIGNvZXJjZSBmYWxzZXkvTmFOIHZhbHVlcyB0byAwLlxuICBlbmQgPj4+PSAwXG4gIHN0YXJ0ID4+Pj0gMFxuXG4gIGlmIChlbmQgPD0gc3RhcnQpIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG5cbiAgd2hpbGUgKHRydWUpIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGxhdGluMVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9IChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuXG4vLyBUaGlzIHByb3BlcnR5IGlzIHVzZWQgYnkgYEJ1ZmZlci5pc0J1ZmZlcmAgKGFuZCB0aGUgYGlzLWJ1ZmZlcmAgbnBtIHBhY2thZ2UpXG4vLyB0byBkZXRlY3QgYSBCdWZmZXIgaW5zdGFuY2UuIEl0J3Mgbm90IHBvc3NpYmxlIHRvIHVzZSBgaW5zdGFuY2VvZiBCdWZmZXJgXG4vLyByZWxpYWJseSBpbiBhIGJyb3dzZXJpZnkgY29udGV4dCBiZWNhdXNlIHRoZXJlIGNvdWxkIGJlIG11bHRpcGxlIGRpZmZlcmVudFxuLy8gY29waWVzIG9mIHRoZSAnYnVmZmVyJyBwYWNrYWdlIGluIHVzZS4gVGhpcyBtZXRob2Qgd29ya3MgZXZlbiBmb3IgQnVmZmVyXG4vLyBpbnN0YW5jZXMgdGhhdCB3ZXJlIGNyZWF0ZWQgZnJvbSBhbm90aGVyIGNvcHkgb2YgdGhlIGBidWZmZXJgIHBhY2thZ2UuXG4vLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyL2lzc3Vlcy8xNTRcbkJ1ZmZlci5wcm90b3R5cGUuX2lzQnVmZmVyID0gdHJ1ZVxuXG5mdW5jdGlvbiBzd2FwIChiLCBuLCBtKSB7XG4gIHZhciBpID0gYltuXVxuICBiW25dID0gYlttXVxuICBiW21dID0gaVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXAxNiA9IGZ1bmN0aW9uIHN3YXAxNiAoKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBpZiAobGVuICUgMiAhPT0gMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMTYtYml0cycpXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMikge1xuICAgIHN3YXAodGhpcywgaSwgaSArIDEpXG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zd2FwMzIgPSBmdW5jdGlvbiBzd2FwMzIgKCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgaWYgKGxlbiAlIDQgIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDMyLWJpdHMnKVxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDQpIHtcbiAgICBzd2FwKHRoaXMsIGksIGkgKyAzKVxuICAgIHN3YXAodGhpcywgaSArIDEsIGkgKyAyKVxuICB9XG4gIHJldHVybiB0aGlzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc3dhcDY0ID0gZnVuY3Rpb24gc3dhcDY0ICgpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSA4ICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA2NC1iaXRzJylcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA4KSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgNylcbiAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgNilcbiAgICBzd2FwKHRoaXMsIGkgKyAyLCBpICsgNSlcbiAgICBzd2FwKHRoaXMsIGkgKyAzLCBpICsgNClcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcgKCkge1xuICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGhcbiAgaWYgKGxlbmd0aCA9PT0gMCkgcmV0dXJuICcnXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIDAsIGxlbmd0aClcbiAgcmV0dXJuIHNsb3dUb1N0cmluZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUudG9Mb2NhbGVTdHJpbmcgPSBCdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nXG5cbkJ1ZmZlci5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzIChiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJylcbiAgaWYgKHRoaXMgPT09IGIpIHJldHVybiB0cnVlXG4gIHJldHVybiBCdWZmZXIuY29tcGFyZSh0aGlzLCBiKSA9PT0gMFxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0ICgpIHtcbiAgdmFyIHN0ciA9ICcnXG4gIHZhciBtYXggPSBleHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTXG4gIHN0ciA9IHRoaXMudG9TdHJpbmcoJ2hleCcsIDAsIG1heCkucmVwbGFjZSgvKC57Mn0pL2csICckMSAnKS50cmltKClcbiAgaWYgKHRoaXMubGVuZ3RoID4gbWF4KSBzdHIgKz0gJyAuLi4gJ1xuICByZXR1cm4gJzxCdWZmZXIgJyArIHN0ciArICc+J1xufVxuXG5CdWZmZXIucHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlICh0YXJnZXQsIHN0YXJ0LCBlbmQsIHRoaXNTdGFydCwgdGhpc0VuZCkge1xuICBpZiAoaXNJbnN0YW5jZSh0YXJnZXQsIFVpbnQ4QXJyYXkpKSB7XG4gICAgdGFyZ2V0ID0gQnVmZmVyLmZyb20odGFyZ2V0LCB0YXJnZXQub2Zmc2V0LCB0YXJnZXQuYnl0ZUxlbmd0aClcbiAgfVxuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcih0YXJnZXQpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICdUaGUgXCJ0YXJnZXRcIiBhcmd1bWVudCBtdXN0IGJlIG9uZSBvZiB0eXBlIEJ1ZmZlciBvciBVaW50OEFycmF5LiAnICtcbiAgICAgICdSZWNlaXZlZCB0eXBlICcgKyAodHlwZW9mIHRhcmdldClcbiAgICApXG4gIH1cblxuICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHN0YXJ0ID0gMFxuICB9XG4gIGlmIChlbmQgPT09IHVuZGVmaW5lZCkge1xuICAgIGVuZCA9IHRhcmdldCA/IHRhcmdldC5sZW5ndGggOiAwXG4gIH1cbiAgaWYgKHRoaXNTdGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpc1N0YXJ0ID0gMFxuICB9XG4gIGlmICh0aGlzRW5kID09PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzRW5kID0gdGhpcy5sZW5ndGhcbiAgfVxuXG4gIGlmIChzdGFydCA8IDAgfHwgZW5kID4gdGFyZ2V0Lmxlbmd0aCB8fCB0aGlzU3RhcnQgPCAwIHx8IHRoaXNFbmQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdvdXQgb2YgcmFuZ2UgaW5kZXgnKVxuICB9XG5cbiAgaWYgKHRoaXNTdGFydCA+PSB0aGlzRW5kICYmIHN0YXJ0ID49IGVuZCkge1xuICAgIHJldHVybiAwXG4gIH1cbiAgaWYgKHRoaXNTdGFydCA+PSB0aGlzRW5kKSB7XG4gICAgcmV0dXJuIC0xXG4gIH1cbiAgaWYgKHN0YXJ0ID49IGVuZCkge1xuICAgIHJldHVybiAxXG4gIH1cblxuICBzdGFydCA+Pj49IDBcbiAgZW5kID4+Pj0gMFxuICB0aGlzU3RhcnQgPj4+PSAwXG4gIHRoaXNFbmQgPj4+PSAwXG5cbiAgaWYgKHRoaXMgPT09IHRhcmdldCkgcmV0dXJuIDBcblxuICB2YXIgeCA9IHRoaXNFbmQgLSB0aGlzU3RhcnRcbiAgdmFyIHkgPSBlbmQgLSBzdGFydFxuICB2YXIgbGVuID0gTWF0aC5taW4oeCwgeSlcblxuICB2YXIgdGhpc0NvcHkgPSB0aGlzLnNsaWNlKHRoaXNTdGFydCwgdGhpc0VuZClcbiAgdmFyIHRhcmdldENvcHkgPSB0YXJnZXQuc2xpY2Uoc3RhcnQsIGVuZClcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgaWYgKHRoaXNDb3B5W2ldICE9PSB0YXJnZXRDb3B5W2ldKSB7XG4gICAgICB4ID0gdGhpc0NvcHlbaV1cbiAgICAgIHkgPSB0YXJnZXRDb3B5W2ldXG4gICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIGlmICh4IDwgeSkgcmV0dXJuIC0xXG4gIGlmICh5IDwgeCkgcmV0dXJuIDFcbiAgcmV0dXJuIDBcbn1cblxuLy8gRmluZHMgZWl0aGVyIHRoZSBmaXJzdCBpbmRleCBvZiBgdmFsYCBpbiBgYnVmZmVyYCBhdCBvZmZzZXQgPj0gYGJ5dGVPZmZzZXRgLFxuLy8gT1IgdGhlIGxhc3QgaW5kZXggb2YgYHZhbGAgaW4gYGJ1ZmZlcmAgYXQgb2Zmc2V0IDw9IGBieXRlT2Zmc2V0YC5cbi8vXG4vLyBBcmd1bWVudHM6XG4vLyAtIGJ1ZmZlciAtIGEgQnVmZmVyIHRvIHNlYXJjaFxuLy8gLSB2YWwgLSBhIHN0cmluZywgQnVmZmVyLCBvciBudW1iZXJcbi8vIC0gYnl0ZU9mZnNldCAtIGFuIGluZGV4IGludG8gYGJ1ZmZlcmA7IHdpbGwgYmUgY2xhbXBlZCB0byBhbiBpbnQzMlxuLy8gLSBlbmNvZGluZyAtIGFuIG9wdGlvbmFsIGVuY29kaW5nLCByZWxldmFudCBpcyB2YWwgaXMgYSBzdHJpbmdcbi8vIC0gZGlyIC0gdHJ1ZSBmb3IgaW5kZXhPZiwgZmFsc2UgZm9yIGxhc3RJbmRleE9mXG5mdW5jdGlvbiBiaWRpcmVjdGlvbmFsSW5kZXhPZiAoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHtcbiAgLy8gRW1wdHkgYnVmZmVyIG1lYW5zIG5vIG1hdGNoXG4gIGlmIChidWZmZXIubGVuZ3RoID09PSAwKSByZXR1cm4gLTFcblxuICAvLyBOb3JtYWxpemUgYnl0ZU9mZnNldFxuICBpZiAodHlwZW9mIGJ5dGVPZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgZW5jb2RpbmcgPSBieXRlT2Zmc2V0XG4gICAgYnl0ZU9mZnNldCA9IDBcbiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0ID4gMHg3ZmZmZmZmZikge1xuICAgIGJ5dGVPZmZzZXQgPSAweDdmZmZmZmZmXG4gIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA8IC0weDgwMDAwMDAwKSB7XG4gICAgYnl0ZU9mZnNldCA9IC0weDgwMDAwMDAwXG4gIH1cbiAgYnl0ZU9mZnNldCA9ICtieXRlT2Zmc2V0IC8vIENvZXJjZSB0byBOdW1iZXIuXG4gIGlmIChudW1iZXJJc05hTihieXRlT2Zmc2V0KSkge1xuICAgIC8vIGJ5dGVPZmZzZXQ6IGl0IGl0J3MgdW5kZWZpbmVkLCBudWxsLCBOYU4sIFwiZm9vXCIsIGV0Yywgc2VhcmNoIHdob2xlIGJ1ZmZlclxuICAgIGJ5dGVPZmZzZXQgPSBkaXIgPyAwIDogKGJ1ZmZlci5sZW5ndGggLSAxKVxuICB9XG5cbiAgLy8gTm9ybWFsaXplIGJ5dGVPZmZzZXQ6IG5lZ2F0aXZlIG9mZnNldHMgc3RhcnQgZnJvbSB0aGUgZW5kIG9mIHRoZSBidWZmZXJcbiAgaWYgKGJ5dGVPZmZzZXQgPCAwKSBieXRlT2Zmc2V0ID0gYnVmZmVyLmxlbmd0aCArIGJ5dGVPZmZzZXRcbiAgaWYgKGJ5dGVPZmZzZXQgPj0gYnVmZmVyLmxlbmd0aCkge1xuICAgIGlmIChkaXIpIHJldHVybiAtMVxuICAgIGVsc2UgYnl0ZU9mZnNldCA9IGJ1ZmZlci5sZW5ndGggLSAxXG4gIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA8IDApIHtcbiAgICBpZiAoZGlyKSBieXRlT2Zmc2V0ID0gMFxuICAgIGVsc2UgcmV0dXJuIC0xXG4gIH1cblxuICAvLyBOb3JtYWxpemUgdmFsXG4gIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgIHZhbCA9IEJ1ZmZlci5mcm9tKHZhbCwgZW5jb2RpbmcpXG4gIH1cblxuICAvLyBGaW5hbGx5LCBzZWFyY2ggZWl0aGVyIGluZGV4T2YgKGlmIGRpciBpcyB0cnVlKSBvciBsYXN0SW5kZXhPZlxuICBpZiAoQnVmZmVyLmlzQnVmZmVyKHZhbCkpIHtcbiAgICAvLyBTcGVjaWFsIGNhc2U6IGxvb2tpbmcgZm9yIGVtcHR5IHN0cmluZy9idWZmZXIgYWx3YXlzIGZhaWxzXG4gICAgaWYgKHZhbC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAtMVxuICAgIH1cbiAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKVxuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgdmFsID0gdmFsICYgMHhGRiAvLyBTZWFyY2ggZm9yIGEgYnl0ZSB2YWx1ZSBbMC0yNTVdXG4gICAgaWYgKHR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBpZiAoZGlyKSB7XG4gICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2YuY2FsbChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldClcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycmF5SW5kZXhPZihidWZmZXIsIFsgdmFsIF0sIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpXG4gIH1cblxuICB0aHJvdyBuZXcgVHlwZUVycm9yKCd2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXInKVxufVxuXG5mdW5jdGlvbiBhcnJheUluZGV4T2YgKGFyciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7XG4gIHZhciBpbmRleFNpemUgPSAxXG4gIHZhciBhcnJMZW5ndGggPSBhcnIubGVuZ3RoXG4gIHZhciB2YWxMZW5ndGggPSB2YWwubGVuZ3RoXG5cbiAgaWYgKGVuY29kaW5nICE9PSB1bmRlZmluZWQpIHtcbiAgICBlbmNvZGluZyA9IFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgIGlmIChlbmNvZGluZyA9PT0gJ3VjczInIHx8IGVuY29kaW5nID09PSAndWNzLTInIHx8XG4gICAgICAgIGVuY29kaW5nID09PSAndXRmMTZsZScgfHwgZW5jb2RpbmcgPT09ICd1dGYtMTZsZScpIHtcbiAgICAgIGlmIChhcnIubGVuZ3RoIDwgMiB8fCB2YWwubGVuZ3RoIDwgMikge1xuICAgICAgICByZXR1cm4gLTFcbiAgICAgIH1cbiAgICAgIGluZGV4U2l6ZSA9IDJcbiAgICAgIGFyckxlbmd0aCAvPSAyXG4gICAgICB2YWxMZW5ndGggLz0gMlxuICAgICAgYnl0ZU9mZnNldCAvPSAyXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZCAoYnVmLCBpKSB7XG4gICAgaWYgKGluZGV4U2l6ZSA9PT0gMSkge1xuICAgICAgcmV0dXJuIGJ1ZltpXVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYnVmLnJlYWRVSW50MTZCRShpICogaW5kZXhTaXplKVxuICAgIH1cbiAgfVxuXG4gIHZhciBpXG4gIGlmIChkaXIpIHtcbiAgICB2YXIgZm91bmRJbmRleCA9IC0xXG4gICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA8IGFyckxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAocmVhZChhcnIsIGkpID09PSByZWFkKHZhbCwgZm91bmRJbmRleCA9PT0gLTEgPyAwIDogaSAtIGZvdW5kSW5kZXgpKSB7XG4gICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSkgZm91bmRJbmRleCA9IGlcbiAgICAgICAgaWYgKGkgLSBmb3VuZEluZGV4ICsgMSA9PT0gdmFsTGVuZ3RoKSByZXR1cm4gZm91bmRJbmRleCAqIGluZGV4U2l6ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGZvdW5kSW5kZXggIT09IC0xKSBpIC09IGkgLSBmb3VuZEluZGV4XG4gICAgICAgIGZvdW5kSW5kZXggPSAtMVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoYnl0ZU9mZnNldCArIHZhbExlbmd0aCA+IGFyckxlbmd0aCkgYnl0ZU9mZnNldCA9IGFyckxlbmd0aCAtIHZhbExlbmd0aFxuICAgIGZvciAoaSA9IGJ5dGVPZmZzZXQ7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB2YXIgZm91bmQgPSB0cnVlXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHZhbExlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmIChyZWFkKGFyciwgaSArIGopICE9PSByZWFkKHZhbCwgaikpIHtcbiAgICAgICAgICBmb3VuZCA9IGZhbHNlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGZvdW5kKSByZXR1cm4gaVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiAtMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluY2x1ZGVzID0gZnVuY3Rpb24gaW5jbHVkZXMgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIHRoaXMuaW5kZXhPZih2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSAhPT0gLTFcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gaW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuICByZXR1cm4gYmlkaXJlY3Rpb25hbEluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgdHJ1ZSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5sYXN0SW5kZXhPZiA9IGZ1bmN0aW9uIGxhc3RJbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBmYWxzZSlcbn1cblxuZnVuY3Rpb24gaGV4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICBvZmZzZXQgPSBOdW1iZXIob2Zmc2V0KSB8fCAwXG4gIHZhciByZW1haW5pbmcgPSBidWYubGVuZ3RoIC0gb2Zmc2V0XG4gIGlmICghbGVuZ3RoKSB7XG4gICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gIH0gZWxzZSB7XG4gICAgbGVuZ3RoID0gTnVtYmVyKGxlbmd0aClcbiAgICBpZiAobGVuZ3RoID4gcmVtYWluaW5nKSB7XG4gICAgICBsZW5ndGggPSByZW1haW5pbmdcbiAgICB9XG4gIH1cblxuICB2YXIgc3RyTGVuID0gc3RyaW5nLmxlbmd0aFxuXG4gIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7XG4gICAgbGVuZ3RoID0gc3RyTGVuIC8gMlxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KVxuICAgIGlmIChudW1iZXJJc05hTihwYXJzZWQpKSByZXR1cm4gaVxuICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHBhcnNlZFxuICB9XG4gIHJldHVybiBpXG59XG5cbmZ1bmN0aW9uIHV0ZjhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGFzY2lpV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcihhc2NpaVRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gbGF0aW4xV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYXNjaWlXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGJhc2U2NFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiB1Y3MyV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcih1dGYxNmxlVG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gd3JpdGUgKHN0cmluZywgb2Zmc2V0LCBsZW5ndGgsIGVuY29kaW5nKSB7XG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcpXG4gIGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkge1xuICAgIGVuY29kaW5nID0gJ3V0ZjgnXG4gICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcbiAgICBvZmZzZXQgPSAwXG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgZW5jb2RpbmcgPSBvZmZzZXRcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICAgIG9mZnNldCA9IDBcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgb2Zmc2V0WywgbGVuZ3RoXVssIGVuY29kaW5nXSlcbiAgfSBlbHNlIGlmIChpc0Zpbml0ZShvZmZzZXQpKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gICAgaWYgKGlzRmluaXRlKGxlbmd0aCkpIHtcbiAgICAgIGxlbmd0aCA9IGxlbmd0aCA+Pj4gMFxuICAgICAgaWYgKGVuY29kaW5nID09PSB1bmRlZmluZWQpIGVuY29kaW5nID0gJ3V0ZjgnXG4gICAgfSBlbHNlIHtcbiAgICAgIGVuY29kaW5nID0gbGVuZ3RoXG4gICAgICBsZW5ndGggPSB1bmRlZmluZWRcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ0J1ZmZlci53cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXRbLCBsZW5ndGhdKSBpcyBubyBsb25nZXIgc3VwcG9ydGVkJ1xuICAgIClcbiAgfVxuXG4gIHZhciByZW1haW5pbmcgPSB0aGlzLmxlbmd0aCAtIG9mZnNldFxuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmdcblxuICBpZiAoKHN0cmluZy5sZW5ndGggPiAwICYmIChsZW5ndGggPCAwIHx8IG9mZnNldCA8IDApKSB8fCBvZmZzZXQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpXG4gIH1cblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG4gIGZvciAoOzspIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGxhdGluMVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIC8vIFdhcm5pbmc6IG1heExlbmd0aCBub3QgdGFrZW4gaW50byBhY2NvdW50IGluIGJhc2U2NFdyaXRlXG4gICAgICAgIHJldHVybiBiYXNlNjRXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdWNzMldyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTiAoKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ0J1ZmZlcicsXG4gICAgZGF0YTogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyIHx8IHRoaXMsIDApXG4gIH1cbn1cblxuZnVuY3Rpb24gYmFzZTY0U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICBpZiAoc3RhcnQgPT09IDAgJiYgZW5kID09PSBidWYubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1ZilcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmLnNsaWNlKHN0YXJ0LCBlbmQpKVxuICB9XG59XG5cbmZ1bmN0aW9uIHV0ZjhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcbiAgdmFyIHJlcyA9IFtdXG5cbiAgdmFyIGkgPSBzdGFydFxuICB3aGlsZSAoaSA8IGVuZCkge1xuICAgIHZhciBmaXJzdEJ5dGUgPSBidWZbaV1cbiAgICB2YXIgY29kZVBvaW50ID0gbnVsbFxuICAgIHZhciBieXRlc1BlclNlcXVlbmNlID0gKGZpcnN0Qnl0ZSA+IDB4RUYpID8gNFxuICAgICAgOiAoZmlyc3RCeXRlID4gMHhERikgPyAzXG4gICAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4QkYpID8gMlxuICAgICAgICAgIDogMVxuXG4gICAgaWYgKGkgKyBieXRlc1BlclNlcXVlbmNlIDw9IGVuZCkge1xuICAgICAgdmFyIHNlY29uZEJ5dGUsIHRoaXJkQnl0ZSwgZm91cnRoQnl0ZSwgdGVtcENvZGVQb2ludFxuXG4gICAgICBzd2l0Y2ggKGJ5dGVzUGVyU2VxdWVuY2UpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGlmIChmaXJzdEJ5dGUgPCAweDgwKSB7XG4gICAgICAgICAgICBjb2RlUG9pbnQgPSBmaXJzdEJ5dGVcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHgxRikgPDwgMHg2IHwgKHNlY29uZEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4QyB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKHRoaXJkQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0ZGICYmICh0ZW1wQ29kZVBvaW50IDwgMHhEODAwIHx8IHRlbXBDb2RlUG9pbnQgPiAweERGRkYpKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXVxuICAgICAgICAgIGZvdXJ0aEJ5dGUgPSBidWZbaSArIDNdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwICYmIChmb3VydGhCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweDEyIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweEMgfCAodGhpcmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKGZvdXJ0aEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweEZGRkYgJiYgdGVtcENvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvZGVQb2ludCA9PT0gbnVsbCkge1xuICAgICAgLy8gd2UgZGlkIG5vdCBnZW5lcmF0ZSBhIHZhbGlkIGNvZGVQb2ludCBzbyBpbnNlcnQgYVxuICAgICAgLy8gcmVwbGFjZW1lbnQgY2hhciAoVStGRkZEKSBhbmQgYWR2YW5jZSBvbmx5IDEgYnl0ZVxuICAgICAgY29kZVBvaW50ID0gMHhGRkZEXG4gICAgICBieXRlc1BlclNlcXVlbmNlID0gMVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7XG4gICAgICAvLyBlbmNvZGUgdG8gdXRmMTYgKHN1cnJvZ2F0ZSBwYWlyIGRhbmNlKVxuICAgICAgY29kZVBvaW50IC09IDB4MTAwMDBcbiAgICAgIHJlcy5wdXNoKGNvZGVQb2ludCA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMClcbiAgICAgIGNvZGVQb2ludCA9IDB4REMwMCB8IGNvZGVQb2ludCAmIDB4M0ZGXG4gICAgfVxuXG4gICAgcmVzLnB1c2goY29kZVBvaW50KVxuICAgIGkgKz0gYnl0ZXNQZXJTZXF1ZW5jZVxuICB9XG5cbiAgcmV0dXJuIGRlY29kZUNvZGVQb2ludHNBcnJheShyZXMpXG59XG5cbi8vIEJhc2VkIG9uIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIyNzQ3MjcyLzY4MDc0MiwgdGhlIGJyb3dzZXIgd2l0aFxuLy8gdGhlIGxvd2VzdCBsaW1pdCBpcyBDaHJvbWUsIHdpdGggMHgxMDAwMCBhcmdzLlxuLy8gV2UgZ28gMSBtYWduaXR1ZGUgbGVzcywgZm9yIHNhZmV0eVxudmFyIE1BWF9BUkdVTUVOVFNfTEVOR1RIID0gMHgxMDAwXG5cbmZ1bmN0aW9uIGRlY29kZUNvZGVQb2ludHNBcnJheSAoY29kZVBvaW50cykge1xuICB2YXIgbGVuID0gY29kZVBvaW50cy5sZW5ndGhcbiAgaWYgKGxlbiA8PSBNQVhfQVJHVU1FTlRTX0xFTkdUSCkge1xuICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgY29kZVBvaW50cykgLy8gYXZvaWQgZXh0cmEgc2xpY2UoKVxuICB9XG5cbiAgLy8gRGVjb2RlIGluIGNodW5rcyB0byBhdm9pZCBcImNhbGwgc3RhY2sgc2l6ZSBleGNlZWRlZFwiLlxuICB2YXIgcmVzID0gJydcbiAgdmFyIGkgPSAwXG4gIHdoaWxlIChpIDwgbGVuKSB7XG4gICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoXG4gICAgICBTdHJpbmcsXG4gICAgICBjb2RlUG9pbnRzLnNsaWNlKGksIGkgKz0gTUFYX0FSR1VNRU5UU19MRU5HVEgpXG4gICAgKVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuZnVuY3Rpb24gYXNjaWlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXQgPSAnJ1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0gJiAweDdGKVxuICB9XG4gIHJldHVybiByZXRcbn1cblxuZnVuY3Rpb24gbGF0aW4xU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgcmV0ID0gJydcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKVxuICB9XG4gIHJldHVybiByZXRcbn1cblxuZnVuY3Rpb24gaGV4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgbGVuID0gYnVmLmxlbmd0aFxuXG4gIGlmICghc3RhcnQgfHwgc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgaWYgKCFlbmQgfHwgZW5kIDwgMCB8fCBlbmQgPiBsZW4pIGVuZCA9IGxlblxuXG4gIHZhciBvdXQgPSAnJ1xuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIG91dCArPSB0b0hleChidWZbaV0pXG4gIH1cbiAgcmV0dXJuIG91dFxufVxuXG5mdW5jdGlvbiB1dGYxNmxlU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgYnl0ZXMgPSBidWYuc2xpY2Uoc3RhcnQsIGVuZClcbiAgdmFyIHJlcyA9ICcnXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1tpXSArIChieXRlc1tpICsgMV0gKiAyNTYpKVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uIHNsaWNlIChzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBzdGFydCA9IH5+c3RhcnRcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB+fmVuZFxuXG4gIGlmIChzdGFydCA8IDApIHtcbiAgICBzdGFydCArPSBsZW5cbiAgICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgfSBlbHNlIGlmIChzdGFydCA+IGxlbikge1xuICAgIHN0YXJ0ID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgMCkge1xuICAgIGVuZCArPSBsZW5cbiAgICBpZiAoZW5kIDwgMCkgZW5kID0gMFxuICB9IGVsc2UgaWYgKGVuZCA+IGxlbikge1xuICAgIGVuZCA9IGxlblxuICB9XG5cbiAgaWYgKGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIHZhciBuZXdCdWYgPSB0aGlzLnN1YmFycmF5KHN0YXJ0LCBlbmQpXG4gIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlXG4gIG5ld0J1Zi5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIHJldHVybiBuZXdCdWZcbn1cblxuLypcbiAqIE5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYnVmZmVyIGlzbid0IHRyeWluZyB0byB3cml0ZSBvdXQgb2YgYm91bmRzLlxuICovXG5mdW5jdGlvbiBjaGVja09mZnNldCAob2Zmc2V0LCBleHQsIGxlbmd0aCkge1xuICBpZiAoKG9mZnNldCAlIDEpICE9PSAwIHx8IG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdvZmZzZXQgaXMgbm90IHVpbnQnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gbGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRMRSA9IGZ1bmN0aW9uIHJlYWRVSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiByZWFkVUludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcbiAgfVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF1cbiAgdmFyIG11bCA9IDFcbiAgd2hpbGUgKGJ5dGVMZW5ndGggPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXSAqIG11bFxuICB9XG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OCA9IGZ1bmN0aW9uIHJlYWRVSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkJFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCA4KSB8IHRoaXNbb2Zmc2V0ICsgMV1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyTEUgPSBmdW5jdGlvbiByZWFkVUludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICgodGhpc1tvZmZzZXRdKSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikpICtcbiAgICAgICh0aGlzW29mZnNldCArIDNdICogMHgxMDAwMDAwKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSAqIDB4MTAwMDAwMCkgK1xuICAgICgodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICB0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRMRSA9IGZ1bmN0aW9uIHJlYWRJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXG4gIH1cbiAgbXVsICo9IDB4ODBcblxuICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50QkUgPSBmdW5jdGlvbiByZWFkSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoXG4gIHZhciBtdWwgPSAxXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0taV1cbiAgd2hpbGUgKGkgPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1pXSAqIG11bFxuICB9XG4gIG11bCAqPSAweDgwXG5cbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDggPSBmdW5jdGlvbiByZWFkSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgaWYgKCEodGhpc1tvZmZzZXRdICYgMHg4MCkpIHJldHVybiAodGhpc1tvZmZzZXRdKVxuICByZXR1cm4gKCgweGZmIC0gdGhpc1tvZmZzZXRdICsgMSkgKiAtMSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcbiAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkJFID0gZnVuY3Rpb24gcmVhZEludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIDFdIHwgKHRoaXNbb2Zmc2V0XSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyTEUgPSBmdW5jdGlvbiByZWFkSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDNdIDw8IDI0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkJFID0gZnVuY3Rpb24gcmVhZEludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgMjQpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAzXSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRMRSA9IGZ1bmN0aW9uIHJlYWRGbG9hdExFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgMjMsIDQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0QkUgPSBmdW5jdGlvbiByZWFkRmxvYXRCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCAyMywgNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlTEUgPSBmdW5jdGlvbiByZWFkRG91YmxlTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCA1MiwgOClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlQkUgPSBmdW5jdGlvbiByZWFkRG91YmxlQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgNTIsIDgpXG59XG5cbmZ1bmN0aW9uIGNoZWNrSW50IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJidWZmZXJcIiBhcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJylcbiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJ2YWx1ZVwiIGFyZ3VtZW50IGlzIG91dCBvZiBib3VuZHMnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbWF4Qnl0ZXMgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCkgLSAxXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbWF4Qnl0ZXMsIDApXG4gIH1cblxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludEJFID0gZnVuY3Rpb24gd3JpdGVVSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIG1heEJ5dGVzID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpIC0gMVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKVxuICB9XG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuICB2YXIgbXVsID0gMVxuICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVVSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4ZmYsIDApXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcbiAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcbiAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcbiAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIGxpbWl0ID0gTWF0aC5wb3coMiwgKDggKiBieXRlTGVuZ3RoKSAtIDEpXG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcbiAgfVxuXG4gIHZhciBpID0gMFxuICB2YXIgbXVsID0gMVxuICB2YXIgc3ViID0gMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgLSAxXSAhPT0gMCkge1xuICAgICAgc3ViID0gMVxuICAgIH1cbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsICg4ICogYnl0ZUxlbmd0aCkgLSAxKVxuXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXG4gIH1cblxuICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxXG4gIHZhciBtdWwgPSAxXG4gIHZhciBzdWIgPSAwXG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgaWYgKHZhbHVlIDwgMCAmJiBzdWIgPT09IDAgJiYgdGhpc1tvZmZzZXQgKyBpICsgMV0gIT09IDApIHtcbiAgICAgIHN1YiA9IDFcbiAgICB9XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDggPSBmdW5jdGlvbiB3cml0ZUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweDdmLCAtMHg4MClcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmICsgdmFsdWUgKyAxXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG4gIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5mdW5jdGlvbiBjaGVja0lFRUU3NTQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikge1xuICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG4gIGlmIChvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuZnVuY3Rpb24gd3JpdGVGbG9hdCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgNCwgMy40MDI4MjM0NjYzODUyODg2ZSszOCwgLTMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgpXG4gIH1cbiAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgMjMsIDQpXG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdExFID0gZnVuY3Rpb24gd3JpdGVGbG9hdExFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0QkUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcbn1cblxuZnVuY3Rpb24gd3JpdGVEb3VibGUgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDgsIDEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4LCAtMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgpXG4gIH1cbiAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgNTIsIDgpXG4gIHJldHVybiBvZmZzZXQgKyA4XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVMRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUJFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcbn1cblxuLy8gY29weSh0YXJnZXRCdWZmZXIsIHRhcmdldFN0YXJ0PTAsIHNvdXJjZVN0YXJ0PTAsIHNvdXJjZUVuZD1idWZmZXIubGVuZ3RoKVxuQnVmZmVyLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gY29weSAodGFyZ2V0LCB0YXJnZXRTdGFydCwgc3RhcnQsIGVuZCkge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcih0YXJnZXQpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdhcmd1bWVudCBzaG91bGQgYmUgYSBCdWZmZXInKVxuICBpZiAoIXN0YXJ0KSBzdGFydCA9IDBcbiAgaWYgKCFlbmQgJiYgZW5kICE9PSAwKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAodGFyZ2V0U3RhcnQgPj0gdGFyZ2V0Lmxlbmd0aCkgdGFyZ2V0U3RhcnQgPSB0YXJnZXQubGVuZ3RoXG4gIGlmICghdGFyZ2V0U3RhcnQpIHRhcmdldFN0YXJ0ID0gMFxuICBpZiAoZW5kID4gMCAmJiBlbmQgPCBzdGFydCkgZW5kID0gc3RhcnRcblxuICAvLyBDb3B5IDAgYnl0ZXM7IHdlJ3JlIGRvbmVcbiAgaWYgKGVuZCA9PT0gc3RhcnQpIHJldHVybiAwXG4gIGlmICh0YXJnZXQubGVuZ3RoID09PSAwIHx8IHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gMFxuXG4gIC8vIEZhdGFsIGVycm9yIGNvbmRpdGlvbnNcbiAgaWYgKHRhcmdldFN0YXJ0IDwgMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzJylcbiAgfVxuICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcbiAgaWYgKGVuZCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VFbmQgb3V0IG9mIGJvdW5kcycpXG5cbiAgLy8gQXJlIHdlIG9vYj9cbiAgaWYgKGVuZCA+IHRoaXMubGVuZ3RoKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAodGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0IDwgZW5kIC0gc3RhcnQpIHtcbiAgICBlbmQgPSB0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgKyBzdGFydFxuICB9XG5cbiAgdmFyIGxlbiA9IGVuZCAtIHN0YXJ0XG5cbiAgaWYgKHRoaXMgPT09IHRhcmdldCAmJiB0eXBlb2YgVWludDhBcnJheS5wcm90b3R5cGUuY29weVdpdGhpbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIC8vIFVzZSBidWlsdC1pbiB3aGVuIGF2YWlsYWJsZSwgbWlzc2luZyBmcm9tIElFMTFcbiAgICB0aGlzLmNvcHlXaXRoaW4odGFyZ2V0U3RhcnQsIHN0YXJ0LCBlbmQpXG4gIH0gZWxzZSBpZiAodGhpcyA9PT0gdGFyZ2V0ICYmIHN0YXJ0IDwgdGFyZ2V0U3RhcnQgJiYgdGFyZ2V0U3RhcnQgPCBlbmQpIHtcbiAgICAvLyBkZXNjZW5kaW5nIGNvcHkgZnJvbSBlbmRcbiAgICBmb3IgKHZhciBpID0gbGVuIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIFVpbnQ4QXJyYXkucHJvdG90eXBlLnNldC5jYWxsKFxuICAgICAgdGFyZ2V0LFxuICAgICAgdGhpcy5zdWJhcnJheShzdGFydCwgZW5kKSxcbiAgICAgIHRhcmdldFN0YXJ0XG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIGxlblxufVxuXG4vLyBVc2FnZTpcbi8vICAgIGJ1ZmZlci5maWxsKG51bWJlclssIG9mZnNldFssIGVuZF1dKVxuLy8gICAgYnVmZmVyLmZpbGwoYnVmZmVyWywgb2Zmc2V0WywgZW5kXV0pXG4vLyAgICBidWZmZXIuZmlsbChzdHJpbmdbLCBvZmZzZXRbLCBlbmRdXVssIGVuY29kaW5nXSlcbkJ1ZmZlci5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uIGZpbGwgKHZhbCwgc3RhcnQsIGVuZCwgZW5jb2RpbmcpIHtcbiAgLy8gSGFuZGxlIHN0cmluZyBjYXNlczpcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgaWYgKHR5cGVvZiBzdGFydCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVuY29kaW5nID0gc3RhcnRcbiAgICAgIHN0YXJ0ID0gMFxuICAgICAgZW5kID0gdGhpcy5sZW5ndGhcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbmQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBlbmNvZGluZyA9IGVuZFxuICAgICAgZW5kID0gdGhpcy5sZW5ndGhcbiAgICB9XG4gICAgaWYgKGVuY29kaW5nICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZW5jb2RpbmcgbXVzdCBiZSBhIHN0cmluZycpXG4gICAgfVxuICAgIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnICYmICFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICB9XG4gICAgaWYgKHZhbC5sZW5ndGggPT09IDEpIHtcbiAgICAgIHZhciBjb2RlID0gdmFsLmNoYXJDb2RlQXQoMClcbiAgICAgIGlmICgoZW5jb2RpbmcgPT09ICd1dGY4JyAmJiBjb2RlIDwgMTI4KSB8fFxuICAgICAgICAgIGVuY29kaW5nID09PSAnbGF0aW4xJykge1xuICAgICAgICAvLyBGYXN0IHBhdGg6IElmIGB2YWxgIGZpdHMgaW50byBhIHNpbmdsZSBieXRlLCB1c2UgdGhhdCBudW1lcmljIHZhbHVlLlxuICAgICAgICB2YWwgPSBjb2RlXG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgdmFsID0gdmFsICYgMjU1XG4gIH1cblxuICAvLyBJbnZhbGlkIHJhbmdlcyBhcmUgbm90IHNldCB0byBhIGRlZmF1bHQsIHNvIGNhbiByYW5nZSBjaGVjayBlYXJseS5cbiAgaWYgKHN0YXJ0IDwgMCB8fCB0aGlzLmxlbmd0aCA8IHN0YXJ0IHx8IHRoaXMubGVuZ3RoIDwgZW5kKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ091dCBvZiByYW5nZSBpbmRleCcpXG4gIH1cblxuICBpZiAoZW5kIDw9IHN0YXJ0KSB7XG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIHN0YXJ0ID0gc3RhcnQgPj4+IDBcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyB0aGlzLmxlbmd0aCA6IGVuZCA+Pj4gMFxuXG4gIGlmICghdmFsKSB2YWwgPSAwXG5cbiAgdmFyIGlcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgICAgdGhpc1tpXSA9IHZhbFxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgYnl0ZXMgPSBCdWZmZXIuaXNCdWZmZXIodmFsKVxuICAgICAgPyB2YWxcbiAgICAgIDogQnVmZmVyLmZyb20odmFsLCBlbmNvZGluZylcbiAgICB2YXIgbGVuID0gYnl0ZXMubGVuZ3RoXG4gICAgaWYgKGxlbiA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIHZhbHVlIFwiJyArIHZhbCArXG4gICAgICAgICdcIiBpcyBpbnZhbGlkIGZvciBhcmd1bWVudCBcInZhbHVlXCInKVxuICAgIH1cbiAgICBmb3IgKGkgPSAwOyBpIDwgZW5kIC0gc3RhcnQ7ICsraSkge1xuICAgICAgdGhpc1tpICsgc3RhcnRdID0gYnl0ZXNbaSAlIGxlbl1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpc1xufVxuXG4vLyBIRUxQRVIgRlVOQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09XG5cbnZhciBJTlZBTElEX0JBU0U2NF9SRSA9IC9bXisvMC05QS1aYS16LV9dL2dcblxuZnVuY3Rpb24gYmFzZTY0Y2xlYW4gKHN0cikge1xuICAvLyBOb2RlIHRha2VzIGVxdWFsIHNpZ25zIGFzIGVuZCBvZiB0aGUgQmFzZTY0IGVuY29kaW5nXG4gIHN0ciA9IHN0ci5zcGxpdCgnPScpWzBdXG4gIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcXG4gYW5kIFxcdCBmcm9tIHRoZSBzdHJpbmcsIGJhc2U2NC1qcyBkb2VzIG5vdFxuICBzdHIgPSBzdHIudHJpbSgpLnJlcGxhY2UoSU5WQUxJRF9CQVNFNjRfUkUsICcnKVxuICAvLyBOb2RlIGNvbnZlcnRzIHN0cmluZ3Mgd2l0aCBsZW5ndGggPCAyIHRvICcnXG4gIGlmIChzdHIubGVuZ3RoIDwgMikgcmV0dXJuICcnXG4gIC8vIE5vZGUgYWxsb3dzIGZvciBub24tcGFkZGVkIGJhc2U2NCBzdHJpbmdzIChtaXNzaW5nIHRyYWlsaW5nID09PSksIGJhc2U2NC1qcyBkb2VzIG5vdFxuICB3aGlsZSAoc3RyLmxlbmd0aCAlIDQgIT09IDApIHtcbiAgICBzdHIgPSBzdHIgKyAnPSdcbiAgfVxuICByZXR1cm4gc3RyXG59XG5cbmZ1bmN0aW9uIHRvSGV4IChuKSB7XG4gIGlmIChuIDwgMTYpIHJldHVybiAnMCcgKyBuLnRvU3RyaW5nKDE2KVxuICByZXR1cm4gbi50b1N0cmluZygxNilcbn1cblxuZnVuY3Rpb24gdXRmOFRvQnl0ZXMgKHN0cmluZywgdW5pdHMpIHtcbiAgdW5pdHMgPSB1bml0cyB8fCBJbmZpbml0eVxuICB2YXIgY29kZVBvaW50XG4gIHZhciBsZW5ndGggPSBzdHJpbmcubGVuZ3RoXG4gIHZhciBsZWFkU3Vycm9nYXRlID0gbnVsbFxuICB2YXIgYnl0ZXMgPSBbXVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICBjb2RlUG9pbnQgPSBzdHJpbmcuY2hhckNvZGVBdChpKVxuXG4gICAgLy8gaXMgc3Vycm9nYXRlIGNvbXBvbmVudFxuICAgIGlmIChjb2RlUG9pbnQgPiAweEQ3RkYgJiYgY29kZVBvaW50IDwgMHhFMDAwKSB7XG4gICAgICAvLyBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuICAgICAgaWYgKCFsZWFkU3Vycm9nYXRlKSB7XG4gICAgICAgIC8vIG5vIGxlYWQgeWV0XG4gICAgICAgIGlmIChjb2RlUG9pbnQgPiAweERCRkYpIHtcbiAgICAgICAgICAvLyB1bmV4cGVjdGVkIHRyYWlsXG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfSBlbHNlIGlmIChpICsgMSA9PT0gbGVuZ3RoKSB7XG4gICAgICAgICAgLy8gdW5wYWlyZWQgbGVhZFxuICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICAvLyB2YWxpZCBsZWFkXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcblxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyAyIGxlYWRzIGluIGEgcm93XG4gICAgICBpZiAoY29kZVBvaW50IDwgMHhEQzAwKSB7XG4gICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIHZhbGlkIHN1cnJvZ2F0ZSBwYWlyXG4gICAgICBjb2RlUG9pbnQgPSAobGVhZFN1cnJvZ2F0ZSAtIDB4RDgwMCA8PCAxMCB8IGNvZGVQb2ludCAtIDB4REMwMCkgKyAweDEwMDAwXG4gICAgfSBlbHNlIGlmIChsZWFkU3Vycm9nYXRlKSB7XG4gICAgICAvLyB2YWxpZCBibXAgY2hhciwgYnV0IGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICB9XG5cbiAgICBsZWFkU3Vycm9nYXRlID0gbnVsbFxuXG4gICAgLy8gZW5jb2RlIHV0ZjhcbiAgICBpZiAoY29kZVBvaW50IDwgMHg4MCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAxKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKGNvZGVQb2ludClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4ODAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgfCAweEMwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAzKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDIHwgMHhFMCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMTAwMDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gNCkgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4MTIgfCAweEYwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvZGUgcG9pbnQnKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBieXRlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVRvQnl0ZXMgKHN0cikge1xuICB2YXIgYnl0ZUFycmF5ID0gW11cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHtcbiAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi5cbiAgICBieXRlQXJyYXkucHVzaChzdHIuY2hhckNvZGVBdChpKSAmIDB4RkYpXG4gIH1cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykge1xuICB2YXIgYywgaGksIGxvXG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkge1xuICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuXG4gICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpXG4gICAgaGkgPSBjID4+IDhcbiAgICBsbyA9IGMgJSAyNTZcbiAgICBieXRlQXJyYXkucHVzaChsbylcbiAgICBieXRlQXJyYXkucHVzaChoaSlcbiAgfVxuXG4gIHJldHVybiBieXRlQXJyYXlcbn1cblxuZnVuY3Rpb24gYmFzZTY0VG9CeXRlcyAoc3RyKSB7XG4gIHJldHVybiBiYXNlNjQudG9CeXRlQXJyYXkoYmFzZTY0Y2xlYW4oc3RyKSlcbn1cblxuZnVuY3Rpb24gYmxpdEJ1ZmZlciAoc3JjLCBkc3QsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICBpZiAoKGkgKyBvZmZzZXQgPj0gZHN0Lmxlbmd0aCkgfHwgKGkgPj0gc3JjLmxlbmd0aCkpIGJyZWFrXG4gICAgZHN0W2kgKyBvZmZzZXRdID0gc3JjW2ldXG4gIH1cbiAgcmV0dXJuIGlcbn1cblxuLy8gQXJyYXlCdWZmZXIgb3IgVWludDhBcnJheSBvYmplY3RzIGZyb20gb3RoZXIgY29udGV4dHMgKGkuZS4gaWZyYW1lcykgZG8gbm90IHBhc3Ncbi8vIHRoZSBgaW5zdGFuY2VvZmAgY2hlY2sgYnV0IHRoZXkgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgb2YgdGhhdCB0eXBlLlxuLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlci9pc3N1ZXMvMTY2XG5mdW5jdGlvbiBpc0luc3RhbmNlIChvYmosIHR5cGUpIHtcbiAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mIHR5cGUgfHxcbiAgICAob2JqICE9IG51bGwgJiYgb2JqLmNvbnN0cnVjdG9yICE9IG51bGwgJiYgb2JqLmNvbnN0cnVjdG9yLm5hbWUgIT0gbnVsbCAmJlxuICAgICAgb2JqLmNvbnN0cnVjdG9yLm5hbWUgPT09IHR5cGUubmFtZSlcbn1cbmZ1bmN0aW9uIG51bWJlcklzTmFOIChvYmopIHtcbiAgLy8gRm9yIElFMTEgc3VwcG9ydFxuICByZXR1cm4gb2JqICE9PSBvYmogLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zZWxmLWNvbXBhcmVcbn1cbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4vLyBOT1RFOiBUaGVzZSB0eXBlIGNoZWNraW5nIGZ1bmN0aW9ucyBpbnRlbnRpb25hbGx5IGRvbid0IHVzZSBgaW5zdGFuY2VvZmBcbi8vIGJlY2F1c2UgaXQgaXMgZnJhZ2lsZSBhbmQgY2FuIGJlIGVhc2lseSBmYWtlZCB3aXRoIGBPYmplY3QuY3JlYXRlKClgLlxuXG5mdW5jdGlvbiBpc0FycmF5KGFyZykge1xuICBpZiAoQXJyYXkuaXNBcnJheSkge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGFyZyk7XG4gIH1cbiAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKGFyZykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59XG5leHBvcnRzLmlzQXJyYXkgPSBpc0FycmF5O1xuXG5mdW5jdGlvbiBpc0Jvb2xlYW4oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnYm9vbGVhbic7XG59XG5leHBvcnRzLmlzQm9vbGVhbiA9IGlzQm9vbGVhbjtcblxuZnVuY3Rpb24gaXNOdWxsKGFyZykge1xuICByZXR1cm4gYXJnID09PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGwgPSBpc051bGw7XG5cbmZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09IG51bGw7XG59XG5leHBvcnRzLmlzTnVsbE9yVW5kZWZpbmVkID0gaXNOdWxsT3JVbmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG59XG5leHBvcnRzLmlzTnVtYmVyID0gaXNOdW1iZXI7XG5cbmZ1bmN0aW9uIGlzU3RyaW5nKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N0cmluZyc7XG59XG5leHBvcnRzLmlzU3RyaW5nID0gaXNTdHJpbmc7XG5cbmZ1bmN0aW9uIGlzU3ltYm9sKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCc7XG59XG5leHBvcnRzLmlzU3ltYm9sID0gaXNTeW1ib2w7XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG59XG5leHBvcnRzLmlzVW5kZWZpbmVkID0gaXNVbmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGlzUmVnRXhwKHJlKSB7XG4gIHJldHVybiBvYmplY3RUb1N0cmluZyhyZSkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nO1xufVxuZXhwb3J0cy5pc1JlZ0V4cCA9IGlzUmVnRXhwO1xuXG5mdW5jdGlvbiBpc09iamVjdChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNPYmplY3QgPSBpc09iamVjdDtcblxuZnVuY3Rpb24gaXNEYXRlKGQpIHtcbiAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKGQpID09PSAnW29iamVjdCBEYXRlXSc7XG59XG5leHBvcnRzLmlzRGF0ZSA9IGlzRGF0ZTtcblxuZnVuY3Rpb24gaXNFcnJvcihlKSB7XG4gIHJldHVybiAob2JqZWN0VG9TdHJpbmcoZSkgPT09ICdbb2JqZWN0IEVycm9yXScgfHwgZSBpbnN0YW5jZW9mIEVycm9yKTtcbn1cbmV4cG9ydHMuaXNFcnJvciA9IGlzRXJyb3I7XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xufVxuZXhwb3J0cy5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcblxuZnVuY3Rpb24gaXNQcmltaXRpdmUoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IG51bGwgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3ltYm9sJyB8fCAgLy8gRVM2IHN5bWJvbFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCc7XG59XG5leHBvcnRzLmlzUHJpbWl0aXZlID0gaXNQcmltaXRpdmU7XG5cbmV4cG9ydHMuaXNCdWZmZXIgPSBCdWZmZXIuaXNCdWZmZXI7XG5cbmZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKG8pIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTtcbn1cbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG52YXIgb2JqZWN0Q3JlYXRlID0gT2JqZWN0LmNyZWF0ZSB8fCBvYmplY3RDcmVhdGVQb2x5ZmlsbFxudmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyB8fCBvYmplY3RLZXlzUG9seWZpbGxcbnZhciBiaW5kID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgfHwgZnVuY3Rpb25CaW5kUG9seWZpbGxcblxuZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xuICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMsICdfZXZlbnRzJykpIHtcbiAgICB0aGlzLl9ldmVudHMgPSBvYmplY3RDcmVhdGUobnVsbCk7XG4gICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICB9XG5cbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gdGhpcy5fbWF4TGlzdGVuZXJzIHx8IHVuZGVmaW5lZDtcbn1cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xuXG4vLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjEwLnhcbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDtcblxuLy8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlXG4vLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLlxudmFyIGRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDtcblxudmFyIGhhc0RlZmluZVByb3BlcnR5O1xudHJ5IHtcbiAgdmFyIG8gPSB7fTtcbiAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sICd4JywgeyB2YWx1ZTogMCB9KTtcbiAgaGFzRGVmaW5lUHJvcGVydHkgPSBvLnggPT09IDA7XG59IGNhdGNoIChlcnIpIHsgaGFzRGVmaW5lUHJvcGVydHkgPSBmYWxzZSB9XG5pZiAoaGFzRGVmaW5lUHJvcGVydHkpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEV2ZW50RW1pdHRlciwgJ2RlZmF1bHRNYXhMaXN0ZW5lcnMnLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKGFyZykge1xuICAgICAgLy8gY2hlY2sgd2hldGhlciB0aGUgaW5wdXQgaXMgYSBwb3NpdGl2ZSBudW1iZXIgKHdob3NlIHZhbHVlIGlzIHplcm8gb3JcbiAgICAgIC8vIGdyZWF0ZXIgYW5kIG5vdCBhIE5hTikuXG4gICAgICBpZiAodHlwZW9mIGFyZyAhPT0gJ251bWJlcicgfHwgYXJnIDwgMCB8fCBhcmcgIT09IGFyZylcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJkZWZhdWx0TWF4TGlzdGVuZXJzXCIgbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuICAgICAgZGVmYXVsdE1heExpc3RlbmVycyA9IGFyZztcbiAgICB9XG4gIH0pO1xufSBlbHNlIHtcbiAgRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnMgPSBkZWZhdWx0TWF4TGlzdGVuZXJzO1xufVxuXG4vLyBPYnZpb3VzbHkgbm90IGFsbCBFbWl0dGVycyBzaG91bGQgYmUgbGltaXRlZCB0byAxMC4gVGhpcyBmdW5jdGlvbiBhbGxvd3Ncbi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBzZXRNYXhMaXN0ZW5lcnMobikge1xuICBpZiAodHlwZW9mIG4gIT09ICdudW1iZXInIHx8IG4gPCAwIHx8IGlzTmFOKG4pKVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiblwiIGFyZ3VtZW50IG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5mdW5jdGlvbiAkZ2V0TWF4TGlzdGVuZXJzKHRoYXQpIHtcbiAgaWYgKHRoYXQuX21heExpc3RlbmVycyA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycztcbiAgcmV0dXJuIHRoYXQuX21heExpc3RlbmVycztcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5nZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBnZXRNYXhMaXN0ZW5lcnMoKSB7XG4gIHJldHVybiAkZ2V0TWF4TGlzdGVuZXJzKHRoaXMpO1xufTtcblxuLy8gVGhlc2Ugc3RhbmRhbG9uZSBlbWl0KiBmdW5jdGlvbnMgYXJlIHVzZWQgdG8gb3B0aW1pemUgY2FsbGluZyBvZiBldmVudFxuLy8gaGFuZGxlcnMgZm9yIGZhc3QgY2FzZXMgYmVjYXVzZSBlbWl0KCkgaXRzZWxmIG9mdGVuIGhhcyBhIHZhcmlhYmxlIG51bWJlciBvZlxuLy8gYXJndW1lbnRzIGFuZCBjYW4gYmUgZGVvcHRpbWl6ZWQgYmVjYXVzZSBvZiB0aGF0LiBUaGVzZSBmdW5jdGlvbnMgYWx3YXlzIGhhdmVcbi8vIHRoZSBzYW1lIG51bWJlciBvZiBhcmd1bWVudHMgYW5kIHRodXMgZG8gbm90IGdldCBkZW9wdGltaXplZCwgc28gdGhlIGNvZGVcbi8vIGluc2lkZSB0aGVtIGNhbiBleGVjdXRlIGZhc3Rlci5cbmZ1bmN0aW9uIGVtaXROb25lKGhhbmRsZXIsIGlzRm4sIHNlbGYpIHtcbiAgaWYgKGlzRm4pXG4gICAgaGFuZGxlci5jYWxsKHNlbGYpO1xuICBlbHNlIHtcbiAgICB2YXIgbGVuID0gaGFuZGxlci5sZW5ndGg7XG4gICAgdmFyIGxpc3RlbmVycyA9IGFycmF5Q2xvbmUoaGFuZGxlciwgbGVuKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKVxuICAgICAgbGlzdGVuZXJzW2ldLmNhbGwoc2VsZik7XG4gIH1cbn1cbmZ1bmN0aW9uIGVtaXRPbmUoaGFuZGxlciwgaXNGbiwgc2VsZiwgYXJnMSkge1xuICBpZiAoaXNGbilcbiAgICBoYW5kbGVyLmNhbGwoc2VsZiwgYXJnMSk7XG4gIGVsc2Uge1xuICAgIHZhciBsZW4gPSBoYW5kbGVyLmxlbmd0aDtcbiAgICB2YXIgbGlzdGVuZXJzID0gYXJyYXlDbG9uZShoYW5kbGVyLCBsZW4pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpXG4gICAgICBsaXN0ZW5lcnNbaV0uY2FsbChzZWxmLCBhcmcxKTtcbiAgfVxufVxuZnVuY3Rpb24gZW1pdFR3byhoYW5kbGVyLCBpc0ZuLCBzZWxmLCBhcmcxLCBhcmcyKSB7XG4gIGlmIChpc0ZuKVxuICAgIGhhbmRsZXIuY2FsbChzZWxmLCBhcmcxLCBhcmcyKTtcbiAgZWxzZSB7XG4gICAgdmFyIGxlbiA9IGhhbmRsZXIubGVuZ3RoO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSlcbiAgICAgIGxpc3RlbmVyc1tpXS5jYWxsKHNlbGYsIGFyZzEsIGFyZzIpO1xuICB9XG59XG5mdW5jdGlvbiBlbWl0VGhyZWUoaGFuZGxlciwgaXNGbiwgc2VsZiwgYXJnMSwgYXJnMiwgYXJnMykge1xuICBpZiAoaXNGbilcbiAgICBoYW5kbGVyLmNhbGwoc2VsZiwgYXJnMSwgYXJnMiwgYXJnMyk7XG4gIGVsc2Uge1xuICAgIHZhciBsZW4gPSBoYW5kbGVyLmxlbmd0aDtcbiAgICB2YXIgbGlzdGVuZXJzID0gYXJyYXlDbG9uZShoYW5kbGVyLCBsZW4pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpXG4gICAgICBsaXN0ZW5lcnNbaV0uY2FsbChzZWxmLCBhcmcxLCBhcmcyLCBhcmczKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBlbWl0TWFueShoYW5kbGVyLCBpc0ZuLCBzZWxmLCBhcmdzKSB7XG4gIGlmIChpc0ZuKVxuICAgIGhhbmRsZXIuYXBwbHkoc2VsZiwgYXJncyk7XG4gIGVsc2Uge1xuICAgIHZhciBsZW4gPSBoYW5kbGVyLmxlbmd0aDtcbiAgICB2YXIgbGlzdGVuZXJzID0gYXJyYXlDbG9uZShoYW5kbGVyLCBsZW4pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpXG4gICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkoc2VsZiwgYXJncyk7XG4gIH1cbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdCh0eXBlKSB7XG4gIHZhciBlciwgaGFuZGxlciwgbGVuLCBhcmdzLCBpLCBldmVudHM7XG4gIHZhciBkb0Vycm9yID0gKHR5cGUgPT09ICdlcnJvcicpO1xuXG4gIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgaWYgKGV2ZW50cylcbiAgICBkb0Vycm9yID0gKGRvRXJyb3IgJiYgZXZlbnRzLmVycm9yID09IG51bGwpO1xuICBlbHNlIGlmICghZG9FcnJvcilcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LlxuICBpZiAoZG9FcnJvcikge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSlcbiAgICAgIGVyID0gYXJndW1lbnRzWzFdO1xuICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQXQgbGVhc3QgZ2l2ZSBzb21lIGtpbmQgb2YgY29udGV4dCB0byB0aGUgdXNlclxuICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcignVW5oYW5kbGVkIFwiZXJyb3JcIiBldmVudC4gKCcgKyBlciArICcpJyk7XG4gICAgICBlcnIuY29udGV4dCA9IGVyO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBoYW5kbGVyID0gZXZlbnRzW3R5cGVdO1xuXG4gIGlmICghaGFuZGxlcilcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgdmFyIGlzRm4gPSB0eXBlb2YgaGFuZGxlciA9PT0gJ2Z1bmN0aW9uJztcbiAgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgc3dpdGNoIChsZW4pIHtcbiAgICAgIC8vIGZhc3QgY2FzZXNcbiAgICBjYXNlIDE6XG4gICAgICBlbWl0Tm9uZShoYW5kbGVyLCBpc0ZuLCB0aGlzKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMjpcbiAgICAgIGVtaXRPbmUoaGFuZGxlciwgaXNGbiwgdGhpcywgYXJndW1lbnRzWzFdKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMzpcbiAgICAgIGVtaXRUd28oaGFuZGxlciwgaXNGbiwgdGhpcywgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSA0OlxuICAgICAgZW1pdFRocmVlKGhhbmRsZXIsIGlzRm4sIHRoaXMsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdLCBhcmd1bWVudHNbM10pO1xuICAgICAgYnJlYWs7XG4gICAgICAvLyBzbG93ZXJcbiAgICBkZWZhdWx0OlxuICAgICAgYXJncyA9IG5ldyBBcnJheShsZW4gLSAxKTtcbiAgICAgIGZvciAoaSA9IDE7IGkgPCBsZW47IGkrKylcbiAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICBlbWl0TWFueShoYW5kbGVyLCBpc0ZuLCB0aGlzLCBhcmdzKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuZnVuY3Rpb24gX2FkZExpc3RlbmVyKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIHByZXBlbmQpIHtcbiAgdmFyIG07XG4gIHZhciBldmVudHM7XG4gIHZhciBleGlzdGluZztcblxuICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdGVuZXJcIiBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cztcbiAgaWYgKCFldmVudHMpIHtcbiAgICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cyA9IG9iamVjdENyZWF0ZShudWxsKTtcbiAgICB0YXJnZXQuX2V2ZW50c0NvdW50ID0gMDtcbiAgfSBlbHNlIHtcbiAgICAvLyBUbyBhdm9pZCByZWN1cnNpb24gaW4gdGhlIGNhc2UgdGhhdCB0eXBlID09PSBcIm5ld0xpc3RlbmVyXCIhIEJlZm9yZVxuICAgIC8vIGFkZGluZyBpdCB0byB0aGUgbGlzdGVuZXJzLCBmaXJzdCBlbWl0IFwibmV3TGlzdGVuZXJcIi5cbiAgICBpZiAoZXZlbnRzLm5ld0xpc3RlbmVyKSB7XG4gICAgICB0YXJnZXQuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLFxuICAgICAgICAgIGxpc3RlbmVyLmxpc3RlbmVyID8gbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7XG5cbiAgICAgIC8vIFJlLWFzc2lnbiBgZXZlbnRzYCBiZWNhdXNlIGEgbmV3TGlzdGVuZXIgaGFuZGxlciBjb3VsZCBoYXZlIGNhdXNlZCB0aGVcbiAgICAgIC8vIHRoaXMuX2V2ZW50cyB0byBiZSBhc3NpZ25lZCB0byBhIG5ldyBvYmplY3RcbiAgICAgIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuICAgIH1cbiAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXTtcbiAgfVxuXG4gIGlmICghZXhpc3RpbmcpIHtcbiAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC5cbiAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9IGxpc3RlbmVyO1xuICAgICsrdGFyZ2V0Ll9ldmVudHNDb3VudDtcbiAgfSBlbHNlIHtcbiAgICBpZiAodHlwZW9mIGV4aXN0aW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBBZGRpbmcgdGhlIHNlY29uZCBlbGVtZW50LCBuZWVkIHRvIGNoYW5nZSB0byBhcnJheS5cbiAgICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdID1cbiAgICAgICAgICBwcmVwZW5kID8gW2xpc3RlbmVyLCBleGlzdGluZ10gOiBbZXhpc3RpbmcsIGxpc3RlbmVyXTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLlxuICAgICAgaWYgKHByZXBlbmQpIHtcbiAgICAgICAgZXhpc3RpbmcudW5zaGlmdChsaXN0ZW5lcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBleGlzdGluZy5wdXNoKGxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3IgbGlzdGVuZXIgbGVha1xuICAgIGlmICghZXhpc3Rpbmcud2FybmVkKSB7XG4gICAgICBtID0gJGdldE1heExpc3RlbmVycyh0YXJnZXQpO1xuICAgICAgaWYgKG0gJiYgbSA+IDAgJiYgZXhpc3RpbmcubGVuZ3RoID4gbSkge1xuICAgICAgICBleGlzdGluZy53YXJuZWQgPSB0cnVlO1xuICAgICAgICB2YXIgdyA9IG5ldyBFcnJvcignUG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSBsZWFrIGRldGVjdGVkLiAnICtcbiAgICAgICAgICAgIGV4aXN0aW5nLmxlbmd0aCArICcgXCInICsgU3RyaW5nKHR5cGUpICsgJ1wiIGxpc3RlbmVycyAnICtcbiAgICAgICAgICAgICdhZGRlZC4gVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gJyArXG4gICAgICAgICAgICAnaW5jcmVhc2UgbGltaXQuJyk7XG4gICAgICAgIHcubmFtZSA9ICdNYXhMaXN0ZW5lcnNFeGNlZWRlZFdhcm5pbmcnO1xuICAgICAgICB3LmVtaXR0ZXIgPSB0YXJnZXQ7XG4gICAgICAgIHcudHlwZSA9IHR5cGU7XG4gICAgICAgIHcuY291bnQgPSBleGlzdGluZy5sZW5ndGg7XG4gICAgICAgIGlmICh0eXBlb2YgY29uc29sZSA9PT0gJ29iamVjdCcgJiYgY29uc29sZS53YXJuKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCclczogJXMnLCB3Lm5hbWUsIHcubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gYWRkTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgcmV0dXJuIF9hZGRMaXN0ZW5lcih0aGlzLCB0eXBlLCBsaXN0ZW5lciwgZmFsc2UpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZExpc3RlbmVyID1cbiAgICBmdW5jdGlvbiBwcmVwZW5kTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBfYWRkTGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIsIHRydWUpO1xuICAgIH07XG5cbmZ1bmN0aW9uIG9uY2VXcmFwcGVyKCkge1xuICBpZiAoIXRoaXMuZmlyZWQpIHtcbiAgICB0aGlzLnRhcmdldC5yZW1vdmVMaXN0ZW5lcih0aGlzLnR5cGUsIHRoaXMud3JhcEZuKTtcbiAgICB0aGlzLmZpcmVkID0gdHJ1ZTtcbiAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuY2FsbCh0aGlzLnRhcmdldCk7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmNhbGwodGhpcy50YXJnZXQsIGFyZ3VtZW50c1swXSk7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmNhbGwodGhpcy50YXJnZXQsIGFyZ3VtZW50c1swXSwgYXJndW1lbnRzWzFdKTtcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuY2FsbCh0aGlzLnRhcmdldCwgYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0sXG4gICAgICAgICAgICBhcmd1bWVudHNbMl0pO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7ICsraSlcbiAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB0aGlzLmxpc3RlbmVyLmFwcGx5KHRoaXMudGFyZ2V0LCBhcmdzKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gX29uY2VXcmFwKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIHN0YXRlID0geyBmaXJlZDogZmFsc2UsIHdyYXBGbjogdW5kZWZpbmVkLCB0YXJnZXQ6IHRhcmdldCwgdHlwZTogdHlwZSwgbGlzdGVuZXI6IGxpc3RlbmVyIH07XG4gIHZhciB3cmFwcGVkID0gYmluZC5jYWxsKG9uY2VXcmFwcGVyLCBzdGF0ZSk7XG4gIHdyYXBwZWQubGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgc3RhdGUud3JhcEZuID0gd3JhcHBlZDtcbiAgcmV0dXJuIHdyYXBwZWQ7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uIG9uY2UodHlwZSwgbGlzdGVuZXIpIHtcbiAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJylcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RlbmVyXCIgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gIHRoaXMub24odHlwZSwgX29uY2VXcmFwKHRoaXMsIHR5cGUsIGxpc3RlbmVyKSk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5wcmVwZW5kT25jZUxpc3RlbmVyID1cbiAgICBmdW5jdGlvbiBwcmVwZW5kT25jZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RlbmVyXCIgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gICAgICB0aGlzLnByZXBlbmRMaXN0ZW5lcih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbi8vIEVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZiBhbmQgb25seSBpZiB0aGUgbGlzdGVuZXIgd2FzIHJlbW92ZWQuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID1cbiAgICBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgdmFyIGxpc3QsIGV2ZW50cywgcG9zaXRpb24sIGksIG9yaWdpbmFsTGlzdGVuZXI7XG5cbiAgICAgIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdGVuZXJcIiBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICAgICAgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuICAgICAgaWYgKCFldmVudHMpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICBsaXN0ID0gZXZlbnRzW3R5cGVdO1xuICAgICAgaWYgKCFsaXN0KVxuICAgICAgICByZXR1cm4gdGhpcztcblxuICAgICAgaWYgKGxpc3QgPT09IGxpc3RlbmVyIHx8IGxpc3QubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgIGlmICgtLXRoaXMuX2V2ZW50c0NvdW50ID09PSAwKVxuICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IG9iamVjdENyZWF0ZShudWxsKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZGVsZXRlIGV2ZW50c1t0eXBlXTtcbiAgICAgICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3QubGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBsaXN0ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHBvc2l0aW9uID0gLTE7XG5cbiAgICAgICAgZm9yIChpID0gbGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fCBsaXN0W2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikge1xuICAgICAgICAgICAgb3JpZ2luYWxMaXN0ZW5lciA9IGxpc3RbaV0ubGlzdGVuZXI7XG4gICAgICAgICAgICBwb3NpdGlvbiA9IGk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocG9zaXRpb24gPCAwKVxuICAgICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAgIGlmIChwb3NpdGlvbiA9PT0gMClcbiAgICAgICAgICBsaXN0LnNoaWZ0KCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICBzcGxpY2VPbmUobGlzdCwgcG9zaXRpb24pO1xuXG4gICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSlcbiAgICAgICAgICBldmVudHNbdHlwZV0gPSBsaXN0WzBdO1xuXG4gICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIG9yaWdpbmFsTGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9XG4gICAgZnVuY3Rpb24gcmVtb3ZlQWxsTGlzdGVuZXJzKHR5cGUpIHtcbiAgICAgIHZhciBsaXN0ZW5lcnMsIGV2ZW50cywgaTtcblxuICAgICAgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuICAgICAgaWYgKCFldmVudHMpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0XG4gICAgICBpZiAoIWV2ZW50cy5yZW1vdmVMaXN0ZW5lcikge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IG9iamVjdENyZWF0ZShudWxsKTtcbiAgICAgICAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnRzW3R5cGVdKSB7XG4gICAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApXG4gICAgICAgICAgICB0aGlzLl9ldmVudHMgPSBvYmplY3RDcmVhdGUobnVsbCk7XG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgZGVsZXRlIGV2ZW50c1t0eXBlXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgLy8gZW1pdCByZW1vdmVMaXN0ZW5lciBmb3IgYWxsIGxpc3RlbmVycyBvbiBhbGwgZXZlbnRzXG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB2YXIga2V5cyA9IG9iamVjdEtleXMoZXZlbnRzKTtcbiAgICAgICAgdmFyIGtleTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlO1xuICAgICAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7XG4gICAgICAgIHRoaXMuX2V2ZW50cyA9IG9iamVjdENyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgbGlzdGVuZXJzID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgICBpZiAodHlwZW9mIGxpc3RlbmVycyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG4gICAgICB9IGVsc2UgaWYgKGxpc3RlbmVycykge1xuICAgICAgICAvLyBMSUZPIG9yZGVyXG4gICAgICAgIGZvciAoaSA9IGxpc3RlbmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG5mdW5jdGlvbiBfbGlzdGVuZXJzKHRhcmdldCwgdHlwZSwgdW53cmFwKSB7XG4gIHZhciBldmVudHMgPSB0YXJnZXQuX2V2ZW50cztcblxuICBpZiAoIWV2ZW50cylcbiAgICByZXR1cm4gW107XG5cbiAgdmFyIGV2bGlzdGVuZXIgPSBldmVudHNbdHlwZV07XG4gIGlmICghZXZsaXN0ZW5lcilcbiAgICByZXR1cm4gW107XG5cbiAgaWYgKHR5cGVvZiBldmxpc3RlbmVyID09PSAnZnVuY3Rpb24nKVxuICAgIHJldHVybiB1bndyYXAgPyBbZXZsaXN0ZW5lci5saXN0ZW5lciB8fCBldmxpc3RlbmVyXSA6IFtldmxpc3RlbmVyXTtcblxuICByZXR1cm4gdW53cmFwID8gdW53cmFwTGlzdGVuZXJzKGV2bGlzdGVuZXIpIDogYXJyYXlDbG9uZShldmxpc3RlbmVyLCBldmxpc3RlbmVyLmxlbmd0aCk7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24gbGlzdGVuZXJzKHR5cGUpIHtcbiAgcmV0dXJuIF9saXN0ZW5lcnModGhpcywgdHlwZSwgdHJ1ZSk7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJhd0xpc3RlbmVycyA9IGZ1bmN0aW9uIHJhd0xpc3RlbmVycyh0eXBlKSB7XG4gIHJldHVybiBfbGlzdGVuZXJzKHRoaXMsIHR5cGUsIGZhbHNlKTtcbn07XG5cbkV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuICBpZiAodHlwZW9mIGVtaXR0ZXIubGlzdGVuZXJDb3VudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGxpc3RlbmVyQ291bnQuY2FsbChlbWl0dGVyLCB0eXBlKTtcbiAgfVxufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gbGlzdGVuZXJDb3VudDtcbmZ1bmN0aW9uIGxpc3RlbmVyQ291bnQodHlwZSkge1xuICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuXG4gIGlmIChldmVudHMpIHtcbiAgICB2YXIgZXZsaXN0ZW5lciA9IGV2ZW50c1t0eXBlXTtcblxuICAgIGlmICh0eXBlb2YgZXZsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfSBlbHNlIGlmIChldmxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gZXZsaXN0ZW5lci5sZW5ndGg7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIDA7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZXZlbnROYW1lcyA9IGZ1bmN0aW9uIGV2ZW50TmFtZXMoKSB7XG4gIHJldHVybiB0aGlzLl9ldmVudHNDb3VudCA+IDAgPyBSZWZsZWN0Lm93bktleXModGhpcy5fZXZlbnRzKSA6IFtdO1xufTtcblxuLy8gQWJvdXQgMS41eCBmYXN0ZXIgdGhhbiB0aGUgdHdvLWFyZyB2ZXJzaW9uIG9mIEFycmF5I3NwbGljZSgpLlxuZnVuY3Rpb24gc3BsaWNlT25lKGxpc3QsIGluZGV4KSB7XG4gIGZvciAodmFyIGkgPSBpbmRleCwgayA9IGkgKyAxLCBuID0gbGlzdC5sZW5ndGg7IGsgPCBuOyBpICs9IDEsIGsgKz0gMSlcbiAgICBsaXN0W2ldID0gbGlzdFtrXTtcbiAgbGlzdC5wb3AoKTtcbn1cblxuZnVuY3Rpb24gYXJyYXlDbG9uZShhcnIsIG4pIHtcbiAgdmFyIGNvcHkgPSBuZXcgQXJyYXkobik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKVxuICAgIGNvcHlbaV0gPSBhcnJbaV07XG4gIHJldHVybiBjb3B5O1xufVxuXG5mdW5jdGlvbiB1bndyYXBMaXN0ZW5lcnMoYXJyKSB7XG4gIHZhciByZXQgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcmV0Lmxlbmd0aDsgKytpKSB7XG4gICAgcmV0W2ldID0gYXJyW2ldLmxpc3RlbmVyIHx8IGFycltpXTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBvYmplY3RDcmVhdGVQb2x5ZmlsbChwcm90bykge1xuICB2YXIgRiA9IGZ1bmN0aW9uKCkge307XG4gIEYucHJvdG90eXBlID0gcHJvdG87XG4gIHJldHVybiBuZXcgRjtcbn1cbmZ1bmN0aW9uIG9iamVjdEtleXNQb2x5ZmlsbChvYmopIHtcbiAgdmFyIGtleXMgPSBbXTtcbiAgZm9yICh2YXIgayBpbiBvYmopIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrKSkge1xuICAgIGtleXMucHVzaChrKTtcbiAgfVxuICByZXR1cm4gaztcbn1cbmZ1bmN0aW9uIGZ1bmN0aW9uQmluZFBvbHlmaWxsKGNvbnRleHQpIHtcbiAgdmFyIGZuID0gdGhpcztcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZm4uYXBwbHkoY29udGV4dCwgYXJndW1lbnRzKTtcbiAgfTtcbn1cbiIsImV4cG9ydHMucmVhZCA9IGZ1bmN0aW9uIChidWZmZXIsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtXG4gIHZhciBlTGVuID0gKG5CeXRlcyAqIDgpIC0gbUxlbiAtIDFcbiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDFcbiAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG4gIHZhciBuQml0cyA9IC03XG4gIHZhciBpID0gaXNMRSA/IChuQnl0ZXMgLSAxKSA6IDBcbiAgdmFyIGQgPSBpc0xFID8gLTEgOiAxXG4gIHZhciBzID0gYnVmZmVyW29mZnNldCArIGldXG5cbiAgaSArPSBkXG5cbiAgZSA9IHMgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcbiAgcyA+Pj0gKC1uQml0cylcbiAgbkJpdHMgKz0gZUxlblxuICBmb3IgKDsgbkJpdHMgPiAwOyBlID0gKGUgKiAyNTYpICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cbiAgbSA9IGUgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcbiAgZSA+Pj0gKC1uQml0cylcbiAgbkJpdHMgKz0gbUxlblxuICBmb3IgKDsgbkJpdHMgPiAwOyBtID0gKG0gKiAyNTYpICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cbiAgaWYgKGUgPT09IDApIHtcbiAgICBlID0gMSAtIGVCaWFzXG4gIH0gZWxzZSBpZiAoZSA9PT0gZU1heCkge1xuICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KVxuICB9IGVsc2Uge1xuICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbilcbiAgICBlID0gZSAtIGVCaWFzXG4gIH1cbiAgcmV0dXJuIChzID8gLTEgOiAxKSAqIG0gKiBNYXRoLnBvdygyLCBlIC0gbUxlbilcbn1cblxuZXhwb3J0cy53cml0ZSA9IGZ1bmN0aW9uIChidWZmZXIsIHZhbHVlLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbSwgY1xuICB2YXIgZUxlbiA9IChuQnl0ZXMgKiA4KSAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgcnQgPSAobUxlbiA9PT0gMjMgPyBNYXRoLnBvdygyLCAtMjQpIC0gTWF0aC5wb3coMiwgLTc3KSA6IDApXG4gIHZhciBpID0gaXNMRSA/IDAgOiAobkJ5dGVzIC0gMSlcbiAgdmFyIGQgPSBpc0xFID8gMSA6IC0xXG4gIHZhciBzID0gdmFsdWUgPCAwIHx8ICh2YWx1ZSA9PT0gMCAmJiAxIC8gdmFsdWUgPCAwKSA/IDEgOiAwXG5cbiAgdmFsdWUgPSBNYXRoLmFicyh2YWx1ZSlcblxuICBpZiAoaXNOYU4odmFsdWUpIHx8IHZhbHVlID09PSBJbmZpbml0eSkge1xuICAgIG0gPSBpc05hTih2YWx1ZSkgPyAxIDogMFxuICAgIGUgPSBlTWF4XG4gIH0gZWxzZSB7XG4gICAgZSA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjIpXG4gICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkge1xuICAgICAgZS0tXG4gICAgICBjICo9IDJcbiAgICB9XG4gICAgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICB2YWx1ZSArPSBydCAvIGNcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgKz0gcnQgKiBNYXRoLnBvdygyLCAxIC0gZUJpYXMpXG4gICAgfVxuICAgIGlmICh2YWx1ZSAqIGMgPj0gMikge1xuICAgICAgZSsrXG4gICAgICBjIC89IDJcbiAgICB9XG5cbiAgICBpZiAoZSArIGVCaWFzID49IGVNYXgpIHtcbiAgICAgIG0gPSAwXG4gICAgICBlID0gZU1heFxuICAgIH0gZWxzZSBpZiAoZSArIGVCaWFzID49IDEpIHtcbiAgICAgIG0gPSAoKHZhbHVlICogYykgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG4gICAgICBlID0gZSArIGVCaWFzXG4gICAgfSBlbHNlIHtcbiAgICAgIG0gPSB2YWx1ZSAqIE1hdGgucG93KDIsIGVCaWFzIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuICAgICAgZSA9IDBcbiAgICB9XG4gIH1cblxuICBmb3IgKDsgbUxlbiA+PSA4OyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBtICYgMHhmZiwgaSArPSBkLCBtIC89IDI1NiwgbUxlbiAtPSA4KSB7fVxuXG4gIGUgPSAoZSA8PCBtTGVuKSB8IG1cbiAgZUxlbiArPSBtTGVuXG4gIGZvciAoOyBlTGVuID4gMDsgYnVmZmVyW29mZnNldCArIGldID0gZSAmIDB4ZmYsIGkgKz0gZCwgZSAvPSAyNTYsIGVMZW4gLT0gOCkge31cblxuICBidWZmZXJbb2Zmc2V0ICsgaSAtIGRdIHw9IHMgKiAxMjhcbn1cbiIsImlmICh0eXBlb2YgT2JqZWN0LmNyZWF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAvLyBpbXBsZW1lbnRhdGlvbiBmcm9tIHN0YW5kYXJkIG5vZGUuanMgJ3V0aWwnIG1vZHVsZVxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGlmIChzdXBlckN0b3IpIHtcbiAgICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgICBjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDdG9yLnByb3RvdHlwZSwge1xuICAgICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICAgIHZhbHVlOiBjdG9yLFxuICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfTtcbn0gZWxzZSB7XG4gIC8vIG9sZCBzY2hvb2wgc2hpbSBmb3Igb2xkIGJyb3dzZXJzXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgaWYgKHN1cGVyQ3Rvcikge1xuICAgICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICAgIHZhciBUZW1wQ3RvciA9IGZ1bmN0aW9uICgpIHt9XG4gICAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlXG4gICAgICBjdG9yLnByb3RvdHlwZSA9IG5ldyBUZW1wQ3RvcigpXG4gICAgICBjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGN0b3JcbiAgICB9XG4gIH1cbn1cbiIsIi8qIVxuICogRGV0ZXJtaW5lIGlmIGFuIG9iamVjdCBpcyBhIEJ1ZmZlclxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxodHRwczovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi9cblxuLy8gVGhlIF9pc0J1ZmZlciBjaGVjayBpcyBmb3IgU2FmYXJpIDUtNyBzdXBwb3J0LCBiZWNhdXNlIGl0J3MgbWlzc2luZ1xuLy8gT2JqZWN0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvci4gUmVtb3ZlIHRoaXMgZXZlbnR1YWxseVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiBvYmogIT0gbnVsbCAmJiAoaXNCdWZmZXIob2JqKSB8fCBpc1Nsb3dCdWZmZXIob2JqKSB8fCAhIW9iai5faXNCdWZmZXIpXG59XG5cbmZ1bmN0aW9uIGlzQnVmZmVyIChvYmopIHtcbiAgcmV0dXJuICEhb2JqLmNvbnN0cnVjdG9yICYmIHR5cGVvZiBvYmouY29uc3RydWN0b3IuaXNCdWZmZXIgPT09ICdmdW5jdGlvbicgJiYgb2JqLmNvbnN0cnVjdG9yLmlzQnVmZmVyKG9iailcbn1cblxuLy8gRm9yIE5vZGUgdjAuMTAgc3VwcG9ydC4gUmVtb3ZlIHRoaXMgZXZlbnR1YWxseS5cbmZ1bmN0aW9uIGlzU2xvd0J1ZmZlciAob2JqKSB7XG4gIHJldHVybiB0eXBlb2Ygb2JqLnJlYWRGbG9hdExFID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBvYmouc2xpY2UgPT09ICdmdW5jdGlvbicgJiYgaXNCdWZmZXIob2JqLnNsaWNlKDAsIDApKVxufVxuIiwidmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmc7XG5cbm1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXJyKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKGFycikgPT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmlmICh0eXBlb2YgcHJvY2VzcyA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAhcHJvY2Vzcy52ZXJzaW9uIHx8XG4gICAgcHJvY2Vzcy52ZXJzaW9uLmluZGV4T2YoJ3YwLicpID09PSAwIHx8XG4gICAgcHJvY2Vzcy52ZXJzaW9uLmluZGV4T2YoJ3YxLicpID09PSAwICYmIHByb2Nlc3MudmVyc2lvbi5pbmRleE9mKCd2MS44LicpICE9PSAwKSB7XG4gIG1vZHVsZS5leHBvcnRzID0geyBuZXh0VGljazogbmV4dFRpY2sgfTtcbn0gZWxzZSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcHJvY2Vzc1xufVxuXG5mdW5jdGlvbiBuZXh0VGljayhmbiwgYXJnMSwgYXJnMiwgYXJnMykge1xuICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJjYWxsYmFja1wiIGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICB9XG4gIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICB2YXIgYXJncywgaTtcbiAgc3dpdGNoIChsZW4pIHtcbiAgY2FzZSAwOlxuICBjYXNlIDE6XG4gICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soZm4pO1xuICBjYXNlIDI6XG4gICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gYWZ0ZXJUaWNrT25lKCkge1xuICAgICAgZm4uY2FsbChudWxsLCBhcmcxKTtcbiAgICB9KTtcbiAgY2FzZSAzOlxuICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uIGFmdGVyVGlja1R3bygpIHtcbiAgICAgIGZuLmNhbGwobnVsbCwgYXJnMSwgYXJnMik7XG4gICAgfSk7XG4gIGNhc2UgNDpcbiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiBhZnRlclRpY2tUaHJlZSgpIHtcbiAgICAgIGZuLmNhbGwobnVsbCwgYXJnMSwgYXJnMiwgYXJnMyk7XG4gICAgfSk7XG4gIGRlZmF1bHQ6XG4gICAgYXJncyA9IG5ldyBBcnJheShsZW4gLSAxKTtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IGFyZ3MubGVuZ3RoKSB7XG4gICAgICBhcmdzW2krK10gPSBhcmd1bWVudHNbaV07XG4gICAgfVxuICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uIGFmdGVyVGljaygpIHtcbiAgICAgIGZuLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIH0pO1xuICB9XG59XG5cbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fZHVwbGV4LmpzJyk7XG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuLy8gYSBkdXBsZXggc3RyZWFtIGlzIGp1c3QgYSBzdHJlYW0gdGhhdCBpcyBib3RoIHJlYWRhYmxlIGFuZCB3cml0YWJsZS5cbi8vIFNpbmNlIEpTIGRvZXNuJ3QgaGF2ZSBtdWx0aXBsZSBwcm90b3R5cGFsIGluaGVyaXRhbmNlLCB0aGlzIGNsYXNzXG4vLyBwcm90b3R5cGFsbHkgaW5oZXJpdHMgZnJvbSBSZWFkYWJsZSwgYW5kIHRoZW4gcGFyYXNpdGljYWxseSBmcm9tXG4vLyBXcml0YWJsZS5cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xuXG52YXIgcG5hID0gcmVxdWlyZSgncHJvY2Vzcy1uZXh0aWNrLWFyZ3MnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiAob2JqKSB7XG4gIHZhciBrZXlzID0gW107XG4gIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICBrZXlzLnB1c2goa2V5KTtcbiAgfXJldHVybiBrZXlzO1xufTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5tb2R1bGUuZXhwb3J0cyA9IER1cGxleDtcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciB1dGlsID0gT2JqZWN0LmNyZWF0ZShyZXF1aXJlKCdjb3JlLXV0aWwtaXMnKSk7XG51dGlsLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG52YXIgUmVhZGFibGUgPSByZXF1aXJlKCcuL19zdHJlYW1fcmVhZGFibGUnKTtcbnZhciBXcml0YWJsZSA9IHJlcXVpcmUoJy4vX3N0cmVhbV93cml0YWJsZScpO1xuXG51dGlsLmluaGVyaXRzKER1cGxleCwgUmVhZGFibGUpO1xuXG57XG4gIC8vIGF2b2lkIHNjb3BlIGNyZWVwLCB0aGUga2V5cyBhcnJheSBjYW4gdGhlbiBiZSBjb2xsZWN0ZWRcbiAgdmFyIGtleXMgPSBvYmplY3RLZXlzKFdyaXRhYmxlLnByb3RvdHlwZSk7XG4gIGZvciAodmFyIHYgPSAwOyB2IDwga2V5cy5sZW5ndGg7IHYrKykge1xuICAgIHZhciBtZXRob2QgPSBrZXlzW3ZdO1xuICAgIGlmICghRHVwbGV4LnByb3RvdHlwZVttZXRob2RdKSBEdXBsZXgucHJvdG90eXBlW21ldGhvZF0gPSBXcml0YWJsZS5wcm90b3R5cGVbbWV0aG9kXTtcbiAgfVxufVxuXG5mdW5jdGlvbiBEdXBsZXgob3B0aW9ucykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRHVwbGV4KSkgcmV0dXJuIG5ldyBEdXBsZXgob3B0aW9ucyk7XG5cbiAgUmVhZGFibGUuY2FsbCh0aGlzLCBvcHRpb25zKTtcbiAgV3JpdGFibGUuY2FsbCh0aGlzLCBvcHRpb25zKTtcblxuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnJlYWRhYmxlID09PSBmYWxzZSkgdGhpcy5yZWFkYWJsZSA9IGZhbHNlO1xuXG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMud3JpdGFibGUgPT09IGZhbHNlKSB0aGlzLndyaXRhYmxlID0gZmFsc2U7XG5cbiAgdGhpcy5hbGxvd0hhbGZPcGVuID0gdHJ1ZTtcbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5hbGxvd0hhbGZPcGVuID09PSBmYWxzZSkgdGhpcy5hbGxvd0hhbGZPcGVuID0gZmFsc2U7XG5cbiAgdGhpcy5vbmNlKCdlbmQnLCBvbmVuZCk7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShEdXBsZXgucHJvdG90eXBlLCAnd3JpdGFibGVIaWdoV2F0ZXJNYXJrJywge1xuICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZVxuICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW5cbiAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsXG4gIGVudW1lcmFibGU6IGZhbHNlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZS5oaWdoV2F0ZXJNYXJrO1xuICB9XG59KTtcblxuLy8gdGhlIG5vLWhhbGYtb3BlbiBlbmZvcmNlclxuZnVuY3Rpb24gb25lbmQoKSB7XG4gIC8vIGlmIHdlIGFsbG93IGhhbGYtb3BlbiBzdGF0ZSwgb3IgaWYgdGhlIHdyaXRhYmxlIHNpZGUgZW5kZWQsXG4gIC8vIHRoZW4gd2UncmUgb2suXG4gIGlmICh0aGlzLmFsbG93SGFsZk9wZW4gfHwgdGhpcy5fd3JpdGFibGVTdGF0ZS5lbmRlZCkgcmV0dXJuO1xuXG4gIC8vIG5vIG1vcmUgZGF0YSBjYW4gYmUgd3JpdHRlbi5cbiAgLy8gQnV0IGFsbG93IG1vcmUgd3JpdGVzIHRvIGhhcHBlbiBpbiB0aGlzIHRpY2suXG4gIHBuYS5uZXh0VGljayhvbkVuZE5ULCB0aGlzKTtcbn1cblxuZnVuY3Rpb24gb25FbmROVChzZWxmKSB7XG4gIHNlbGYuZW5kKCk7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShEdXBsZXgucHJvdG90eXBlLCAnZGVzdHJveWVkJywge1xuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuX3dyaXRhYmxlU3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQgJiYgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQ7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgLy8gd2UgaWdub3JlIHRoZSB2YWx1ZSBpZiB0aGUgc3RyZWFtXG4gICAgLy8gaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkIHlldFxuICAgIGlmICh0aGlzLl9yZWFkYWJsZVN0YXRlID09PSB1bmRlZmluZWQgfHwgdGhpcy5fd3JpdGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgdGhlIHVzZXIgaXMgZXhwbGljaXRseVxuICAgIC8vIG1hbmFnaW5nIGRlc3Ryb3llZFxuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkID0gdmFsdWU7XG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQgPSB2YWx1ZTtcbiAgfVxufSk7XG5cbkR1cGxleC5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoZXJyLCBjYikge1xuICB0aGlzLnB1c2gobnVsbCk7XG4gIHRoaXMuZW5kKCk7XG5cbiAgcG5hLm5leHRUaWNrKGNiLCBlcnIpO1xufTsiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuLy8gYSBwYXNzdGhyb3VnaCBzdHJlYW0uXG4vLyBiYXNpY2FsbHkganVzdCB0aGUgbW9zdCBtaW5pbWFsIHNvcnQgb2YgVHJhbnNmb3JtIHN0cmVhbS5cbi8vIEV2ZXJ5IHdyaXR0ZW4gY2h1bmsgZ2V0cyBvdXRwdXQgYXMtaXMuXG5cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBQYXNzVGhyb3VnaDtcblxudmFyIFRyYW5zZm9ybSA9IHJlcXVpcmUoJy4vX3N0cmVhbV90cmFuc2Zvcm0nKTtcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciB1dGlsID0gT2JqZWN0LmNyZWF0ZShyZXF1aXJlKCdjb3JlLXV0aWwtaXMnKSk7XG51dGlsLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG51dGlsLmluaGVyaXRzKFBhc3NUaHJvdWdoLCBUcmFuc2Zvcm0pO1xuXG5mdW5jdGlvbiBQYXNzVGhyb3VnaChvcHRpb25zKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBQYXNzVGhyb3VnaCkpIHJldHVybiBuZXcgUGFzc1Rocm91Z2gob3B0aW9ucyk7XG5cbiAgVHJhbnNmb3JtLmNhbGwodGhpcywgb3B0aW9ucyk7XG59XG5cblBhc3NUaHJvdWdoLnByb3RvdHlwZS5fdHJhbnNmb3JtID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgY2IobnVsbCwgY2h1bmspO1xufTsiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xuXG52YXIgcG5hID0gcmVxdWlyZSgncHJvY2Vzcy1uZXh0aWNrLWFyZ3MnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWRhYmxlO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdpc2FycmF5Jyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciBEdXBsZXg7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuUmVhZGFibGUuUmVhZGFibGVTdGF0ZSA9IFJlYWRhYmxlU3RhdGU7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgRUUgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7XG5cbnZhciBFRWxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbiAoZW1pdHRlciwgdHlwZSkge1xuICByZXR1cm4gZW1pdHRlci5saXN0ZW5lcnModHlwZSkubGVuZ3RoO1xufTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIFN0cmVhbSA9IHJlcXVpcmUoJy4vaW50ZXJuYWwvc3RyZWFtcy9zdHJlYW0nKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xuXG52YXIgQnVmZmVyID0gcmVxdWlyZSgnc2FmZS1idWZmZXInKS5CdWZmZXI7XG52YXIgT3VyVWludDhBcnJheSA9IGdsb2JhbC5VaW50OEFycmF5IHx8IGZ1bmN0aW9uICgpIHt9O1xuZnVuY3Rpb24gX3VpbnQ4QXJyYXlUb0J1ZmZlcihjaHVuaykge1xuICByZXR1cm4gQnVmZmVyLmZyb20oY2h1bmspO1xufVxuZnVuY3Rpb24gX2lzVWludDhBcnJheShvYmopIHtcbiAgcmV0dXJuIEJ1ZmZlci5pc0J1ZmZlcihvYmopIHx8IG9iaiBpbnN0YW5jZW9mIE91clVpbnQ4QXJyYXk7XG59XG5cbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIHV0aWwgPSBPYmplY3QuY3JlYXRlKHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpKTtcbnV0aWwuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgZGVidWdVdGlsID0gcmVxdWlyZSgndXRpbCcpO1xudmFyIGRlYnVnID0gdm9pZCAwO1xuaWYgKGRlYnVnVXRpbCAmJiBkZWJ1Z1V0aWwuZGVidWdsb2cpIHtcbiAgZGVidWcgPSBkZWJ1Z1V0aWwuZGVidWdsb2coJ3N0cmVhbScpO1xufSBlbHNlIHtcbiAgZGVidWcgPSBmdW5jdGlvbiAoKSB7fTtcbn1cbi8qPC9yZXBsYWNlbWVudD4qL1xuXG52YXIgQnVmZmVyTGlzdCA9IHJlcXVpcmUoJy4vaW50ZXJuYWwvc3RyZWFtcy9CdWZmZXJMaXN0Jyk7XG52YXIgZGVzdHJveUltcGwgPSByZXF1aXJlKCcuL2ludGVybmFsL3N0cmVhbXMvZGVzdHJveScpO1xudmFyIFN0cmluZ0RlY29kZXI7XG5cbnV0aWwuaW5oZXJpdHMoUmVhZGFibGUsIFN0cmVhbSk7XG5cbnZhciBrUHJveHlFdmVudHMgPSBbJ2Vycm9yJywgJ2Nsb3NlJywgJ2Rlc3Ryb3knLCAncGF1c2UnLCAncmVzdW1lJ107XG5cbmZ1bmN0aW9uIHByZXBlbmRMaXN0ZW5lcihlbWl0dGVyLCBldmVudCwgZm4pIHtcbiAgLy8gU2FkbHkgdGhpcyBpcyBub3QgY2FjaGVhYmxlIGFzIHNvbWUgbGlicmFyaWVzIGJ1bmRsZSB0aGVpciBvd25cbiAgLy8gZXZlbnQgZW1pdHRlciBpbXBsZW1lbnRhdGlvbiB3aXRoIHRoZW0uXG4gIGlmICh0eXBlb2YgZW1pdHRlci5wcmVwZW5kTGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHJldHVybiBlbWl0dGVyLnByZXBlbmRMaXN0ZW5lcihldmVudCwgZm4pO1xuXG4gIC8vIFRoaXMgaXMgYSBoYWNrIHRvIG1ha2Ugc3VyZSB0aGF0IG91ciBlcnJvciBoYW5kbGVyIGlzIGF0dGFjaGVkIGJlZm9yZSBhbnlcbiAgLy8gdXNlcmxhbmQgb25lcy4gIE5FVkVSIERPIFRISVMuIFRoaXMgaXMgaGVyZSBvbmx5IGJlY2F1c2UgdGhpcyBjb2RlIG5lZWRzXG4gIC8vIHRvIGNvbnRpbnVlIHRvIHdvcmsgd2l0aCBvbGRlciB2ZXJzaW9ucyBvZiBOb2RlLmpzIHRoYXQgZG8gbm90IGluY2x1ZGVcbiAgLy8gdGhlIHByZXBlbmRMaXN0ZW5lcigpIG1ldGhvZC4gVGhlIGdvYWwgaXMgdG8gZXZlbnR1YWxseSByZW1vdmUgdGhpcyBoYWNrLlxuICBpZiAoIWVtaXR0ZXIuX2V2ZW50cyB8fCAhZW1pdHRlci5fZXZlbnRzW2V2ZW50XSkgZW1pdHRlci5vbihldmVudCwgZm4pO2Vsc2UgaWYgKGlzQXJyYXkoZW1pdHRlci5fZXZlbnRzW2V2ZW50XSkpIGVtaXR0ZXIuX2V2ZW50c1tldmVudF0udW5zaGlmdChmbik7ZWxzZSBlbWl0dGVyLl9ldmVudHNbZXZlbnRdID0gW2ZuLCBlbWl0dGVyLl9ldmVudHNbZXZlbnRdXTtcbn1cblxuZnVuY3Rpb24gUmVhZGFibGVTdGF0ZShvcHRpb25zLCBzdHJlYW0pIHtcbiAgRHVwbGV4ID0gRHVwbGV4IHx8IHJlcXVpcmUoJy4vX3N0cmVhbV9kdXBsZXgnKTtcblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAvLyBEdXBsZXggc3RyZWFtcyBhcmUgYm90aCByZWFkYWJsZSBhbmQgd3JpdGFibGUsIGJ1dCBzaGFyZVxuICAvLyB0aGUgc2FtZSBvcHRpb25zIG9iamVjdC5cbiAgLy8gSG93ZXZlciwgc29tZSBjYXNlcyByZXF1aXJlIHNldHRpbmcgb3B0aW9ucyB0byBkaWZmZXJlbnRcbiAgLy8gdmFsdWVzIGZvciB0aGUgcmVhZGFibGUgYW5kIHRoZSB3cml0YWJsZSBzaWRlcyBvZiB0aGUgZHVwbGV4IHN0cmVhbS5cbiAgLy8gVGhlc2Ugb3B0aW9ucyBjYW4gYmUgcHJvdmlkZWQgc2VwYXJhdGVseSBhcyByZWFkYWJsZVhYWCBhbmQgd3JpdGFibGVYWFguXG4gIHZhciBpc0R1cGxleCA9IHN0cmVhbSBpbnN0YW5jZW9mIER1cGxleDtcblxuICAvLyBvYmplY3Qgc3RyZWFtIGZsYWcuIFVzZWQgdG8gbWFrZSByZWFkKG4pIGlnbm9yZSBuIGFuZCB0b1xuICAvLyBtYWtlIGFsbCB0aGUgYnVmZmVyIG1lcmdpbmcgYW5kIGxlbmd0aCBjaGVja3MgZ28gYXdheVxuICB0aGlzLm9iamVjdE1vZGUgPSAhIW9wdGlvbnMub2JqZWN0TW9kZTtcblxuICBpZiAoaXNEdXBsZXgpIHRoaXMub2JqZWN0TW9kZSA9IHRoaXMub2JqZWN0TW9kZSB8fCAhIW9wdGlvbnMucmVhZGFibGVPYmplY3RNb2RlO1xuXG4gIC8vIHRoZSBwb2ludCBhdCB3aGljaCBpdCBzdG9wcyBjYWxsaW5nIF9yZWFkKCkgdG8gZmlsbCB0aGUgYnVmZmVyXG4gIC8vIE5vdGU6IDAgaXMgYSB2YWxpZCB2YWx1ZSwgbWVhbnMgXCJkb24ndCBjYWxsIF9yZWFkIHByZWVtcHRpdmVseSBldmVyXCJcbiAgdmFyIGh3bSA9IG9wdGlvbnMuaGlnaFdhdGVyTWFyaztcbiAgdmFyIHJlYWRhYmxlSHdtID0gb3B0aW9ucy5yZWFkYWJsZUhpZ2hXYXRlck1hcms7XG4gIHZhciBkZWZhdWx0SHdtID0gdGhpcy5vYmplY3RNb2RlID8gMTYgOiAxNiAqIDEwMjQ7XG5cbiAgaWYgKGh3bSB8fCBod20gPT09IDApIHRoaXMuaGlnaFdhdGVyTWFyayA9IGh3bTtlbHNlIGlmIChpc0R1cGxleCAmJiAocmVhZGFibGVId20gfHwgcmVhZGFibGVId20gPT09IDApKSB0aGlzLmhpZ2hXYXRlck1hcmsgPSByZWFkYWJsZUh3bTtlbHNlIHRoaXMuaGlnaFdhdGVyTWFyayA9IGRlZmF1bHRId207XG5cbiAgLy8gY2FzdCB0byBpbnRzLlxuICB0aGlzLmhpZ2hXYXRlck1hcmsgPSBNYXRoLmZsb29yKHRoaXMuaGlnaFdhdGVyTWFyayk7XG5cbiAgLy8gQSBsaW5rZWQgbGlzdCBpcyB1c2VkIHRvIHN0b3JlIGRhdGEgY2h1bmtzIGluc3RlYWQgb2YgYW4gYXJyYXkgYmVjYXVzZSB0aGVcbiAgLy8gbGlua2VkIGxpc3QgY2FuIHJlbW92ZSBlbGVtZW50cyBmcm9tIHRoZSBiZWdpbm5pbmcgZmFzdGVyIHRoYW5cbiAgLy8gYXJyYXkuc2hpZnQoKVxuICB0aGlzLmJ1ZmZlciA9IG5ldyBCdWZmZXJMaXN0KCk7XG4gIHRoaXMubGVuZ3RoID0gMDtcbiAgdGhpcy5waXBlcyA9IG51bGw7XG4gIHRoaXMucGlwZXNDb3VudCA9IDA7XG4gIHRoaXMuZmxvd2luZyA9IG51bGw7XG4gIHRoaXMuZW5kZWQgPSBmYWxzZTtcbiAgdGhpcy5lbmRFbWl0dGVkID0gZmFsc2U7XG4gIHRoaXMucmVhZGluZyA9IGZhbHNlO1xuXG4gIC8vIGEgZmxhZyB0byBiZSBhYmxlIHRvIHRlbGwgaWYgdGhlIGV2ZW50ICdyZWFkYWJsZScvJ2RhdGEnIGlzIGVtaXR0ZWRcbiAgLy8gaW1tZWRpYXRlbHksIG9yIG9uIGEgbGF0ZXIgdGljay4gIFdlIHNldCB0aGlzIHRvIHRydWUgYXQgZmlyc3QsIGJlY2F1c2VcbiAgLy8gYW55IGFjdGlvbnMgdGhhdCBzaG91bGRuJ3QgaGFwcGVuIHVudGlsIFwibGF0ZXJcIiBzaG91bGQgZ2VuZXJhbGx5IGFsc29cbiAgLy8gbm90IGhhcHBlbiBiZWZvcmUgdGhlIGZpcnN0IHJlYWQgY2FsbC5cbiAgdGhpcy5zeW5jID0gdHJ1ZTtcblxuICAvLyB3aGVuZXZlciB3ZSByZXR1cm4gbnVsbCwgdGhlbiB3ZSBzZXQgYSBmbGFnIHRvIHNheVxuICAvLyB0aGF0IHdlJ3JlIGF3YWl0aW5nIGEgJ3JlYWRhYmxlJyBldmVudCBlbWlzc2lvbi5cbiAgdGhpcy5uZWVkUmVhZGFibGUgPSBmYWxzZTtcbiAgdGhpcy5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTtcbiAgdGhpcy5yZWFkYWJsZUxpc3RlbmluZyA9IGZhbHNlO1xuICB0aGlzLnJlc3VtZVNjaGVkdWxlZCA9IGZhbHNlO1xuXG4gIC8vIGhhcyBpdCBiZWVuIGRlc3Ryb3llZFxuICB0aGlzLmRlc3Ryb3llZCA9IGZhbHNlO1xuXG4gIC8vIENyeXB0byBpcyBraW5kIG9mIG9sZCBhbmQgY3J1c3R5LiAgSGlzdG9yaWNhbGx5LCBpdHMgZGVmYXVsdCBzdHJpbmdcbiAgLy8gZW5jb2RpbmcgaXMgJ2JpbmFyeScgc28gd2UgaGF2ZSB0byBtYWtlIHRoaXMgY29uZmlndXJhYmxlLlxuICAvLyBFdmVyeXRoaW5nIGVsc2UgaW4gdGhlIHVuaXZlcnNlIHVzZXMgJ3V0ZjgnLCB0aG91Z2guXG4gIHRoaXMuZGVmYXVsdEVuY29kaW5nID0gb3B0aW9ucy5kZWZhdWx0RW5jb2RpbmcgfHwgJ3V0ZjgnO1xuXG4gIC8vIHRoZSBudW1iZXIgb2Ygd3JpdGVycyB0aGF0IGFyZSBhd2FpdGluZyBhIGRyYWluIGV2ZW50IGluIC5waXBlKClzXG4gIHRoaXMuYXdhaXREcmFpbiA9IDA7XG5cbiAgLy8gaWYgdHJ1ZSwgYSBtYXliZVJlYWRNb3JlIGhhcyBiZWVuIHNjaGVkdWxlZFxuICB0aGlzLnJlYWRpbmdNb3JlID0gZmFsc2U7XG5cbiAgdGhpcy5kZWNvZGVyID0gbnVsbDtcbiAgdGhpcy5lbmNvZGluZyA9IG51bGw7XG4gIGlmIChvcHRpb25zLmVuY29kaW5nKSB7XG4gICAgaWYgKCFTdHJpbmdEZWNvZGVyKSBTdHJpbmdEZWNvZGVyID0gcmVxdWlyZSgnc3RyaW5nX2RlY29kZXIvJykuU3RyaW5nRGVjb2RlcjtcbiAgICB0aGlzLmRlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2RlcihvcHRpb25zLmVuY29kaW5nKTtcbiAgICB0aGlzLmVuY29kaW5nID0gb3B0aW9ucy5lbmNvZGluZztcbiAgfVxufVxuXG5mdW5jdGlvbiBSZWFkYWJsZShvcHRpb25zKSB7XG4gIER1cGxleCA9IER1cGxleCB8fCByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7XG5cbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFJlYWRhYmxlKSkgcmV0dXJuIG5ldyBSZWFkYWJsZShvcHRpb25zKTtcblxuICB0aGlzLl9yZWFkYWJsZVN0YXRlID0gbmV3IFJlYWRhYmxlU3RhdGUob3B0aW9ucywgdGhpcyk7XG5cbiAgLy8gbGVnYWN5XG4gIHRoaXMucmVhZGFibGUgPSB0cnVlO1xuXG4gIGlmIChvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnJlYWQgPT09ICdmdW5jdGlvbicpIHRoaXMuX3JlYWQgPSBvcHRpb25zLnJlYWQ7XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuZGVzdHJveSA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fZGVzdHJveSA9IG9wdGlvbnMuZGVzdHJveTtcbiAgfVxuXG4gIFN0cmVhbS5jYWxsKHRoaXMpO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhZGFibGUucHJvdG90eXBlLCAnZGVzdHJveWVkJywge1xuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZDtcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAvLyB3ZSBpZ25vcmUgdGhlIHZhbHVlIGlmIHRoZSBzdHJlYW1cbiAgICAvLyBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQgeWV0XG4gICAgaWYgKCF0aGlzLl9yZWFkYWJsZVN0YXRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgdGhlIHVzZXIgaXMgZXhwbGljaXRseVxuICAgIC8vIG1hbmFnaW5nIGRlc3Ryb3llZFxuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkID0gdmFsdWU7XG4gIH1cbn0pO1xuXG5SZWFkYWJsZS5wcm90b3R5cGUuZGVzdHJveSA9IGRlc3Ryb3lJbXBsLmRlc3Ryb3k7XG5SZWFkYWJsZS5wcm90b3R5cGUuX3VuZGVzdHJveSA9IGRlc3Ryb3lJbXBsLnVuZGVzdHJveTtcblJlYWRhYmxlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uIChlcnIsIGNiKSB7XG4gIHRoaXMucHVzaChudWxsKTtcbiAgY2IoZXJyKTtcbn07XG5cbi8vIE1hbnVhbGx5IHNob3ZlIHNvbWV0aGluZyBpbnRvIHRoZSByZWFkKCkgYnVmZmVyLlxuLy8gVGhpcyByZXR1cm5zIHRydWUgaWYgdGhlIGhpZ2hXYXRlck1hcmsgaGFzIG5vdCBiZWVuIGhpdCB5ZXQsXG4vLyBzaW1pbGFyIHRvIGhvdyBXcml0YWJsZS53cml0ZSgpIHJldHVybnMgdHJ1ZSBpZiB5b3Ugc2hvdWxkXG4vLyB3cml0ZSgpIHNvbWUgbW9yZS5cblJlYWRhYmxlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZykge1xuICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuICB2YXIgc2tpcENodW5rQ2hlY2s7XG5cbiAgaWYgKCFzdGF0ZS5vYmplY3RNb2RlKSB7XG4gICAgaWYgKHR5cGVvZiBjaHVuayA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVuY29kaW5nID0gZW5jb2RpbmcgfHwgc3RhdGUuZGVmYXVsdEVuY29kaW5nO1xuICAgICAgaWYgKGVuY29kaW5nICE9PSBzdGF0ZS5lbmNvZGluZykge1xuICAgICAgICBjaHVuayA9IEJ1ZmZlci5mcm9tKGNodW5rLCBlbmNvZGluZyk7XG4gICAgICAgIGVuY29kaW5nID0gJyc7XG4gICAgICB9XG4gICAgICBza2lwQ2h1bmtDaGVjayA9IHRydWU7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHNraXBDaHVua0NoZWNrID0gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiByZWFkYWJsZUFkZENodW5rKHRoaXMsIGNodW5rLCBlbmNvZGluZywgZmFsc2UsIHNraXBDaHVua0NoZWNrKTtcbn07XG5cbi8vIFVuc2hpZnQgc2hvdWxkICphbHdheXMqIGJlIHNvbWV0aGluZyBkaXJlY3RseSBvdXQgb2YgcmVhZCgpXG5SZWFkYWJsZS5wcm90b3R5cGUudW5zaGlmdCA9IGZ1bmN0aW9uIChjaHVuaykge1xuICByZXR1cm4gcmVhZGFibGVBZGRDaHVuayh0aGlzLCBjaHVuaywgbnVsbCwgdHJ1ZSwgZmFsc2UpO1xufTtcblxuZnVuY3Rpb24gcmVhZGFibGVBZGRDaHVuayhzdHJlYW0sIGNodW5rLCBlbmNvZGluZywgYWRkVG9Gcm9udCwgc2tpcENodW5rQ2hlY2spIHtcbiAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlO1xuICBpZiAoY2h1bmsgPT09IG51bGwpIHtcbiAgICBzdGF0ZS5yZWFkaW5nID0gZmFsc2U7XG4gICAgb25Fb2ZDaHVuayhzdHJlYW0sIHN0YXRlKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgZXI7XG4gICAgaWYgKCFza2lwQ2h1bmtDaGVjaykgZXIgPSBjaHVua0ludmFsaWQoc3RhdGUsIGNodW5rKTtcbiAgICBpZiAoZXIpIHtcbiAgICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcbiAgICB9IGVsc2UgaWYgKHN0YXRlLm9iamVjdE1vZGUgfHwgY2h1bmsgJiYgY2h1bmsubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKHR5cGVvZiBjaHVuayAhPT0gJ3N0cmluZycgJiYgIXN0YXRlLm9iamVjdE1vZGUgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGNodW5rKSAhPT0gQnVmZmVyLnByb3RvdHlwZSkge1xuICAgICAgICBjaHVuayA9IF91aW50OEFycmF5VG9CdWZmZXIoY2h1bmspO1xuICAgICAgfVxuXG4gICAgICBpZiAoYWRkVG9Gcm9udCkge1xuICAgICAgICBpZiAoc3RhdGUuZW5kRW1pdHRlZCkgc3RyZWFtLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdzdHJlYW0udW5zaGlmdCgpIGFmdGVyIGVuZCBldmVudCcpKTtlbHNlIGFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCB0cnVlKTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdGUuZW5kZWQpIHtcbiAgICAgICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdzdHJlYW0ucHVzaCgpIGFmdGVyIEVPRicpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgaWYgKHN0YXRlLmRlY29kZXIgJiYgIWVuY29kaW5nKSB7XG4gICAgICAgICAgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLndyaXRlKGNodW5rKTtcbiAgICAgICAgICBpZiAoc3RhdGUub2JqZWN0TW9kZSB8fCBjaHVuay5sZW5ndGggIT09IDApIGFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBmYWxzZSk7ZWxzZSBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFhZGRUb0Zyb250KSB7XG4gICAgICBzdGF0ZS5yZWFkaW5nID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5lZWRNb3JlRGF0YShzdGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBhZGRUb0Zyb250KSB7XG4gIGlmIChzdGF0ZS5mbG93aW5nICYmIHN0YXRlLmxlbmd0aCA9PT0gMCAmJiAhc3RhdGUuc3luYykge1xuICAgIHN0cmVhbS5lbWl0KCdkYXRhJywgY2h1bmspO1xuICAgIHN0cmVhbS5yZWFkKDApO1xuICB9IGVsc2Uge1xuICAgIC8vIHVwZGF0ZSB0aGUgYnVmZmVyIGluZm8uXG4gICAgc3RhdGUubGVuZ3RoICs9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoO1xuICAgIGlmIChhZGRUb0Zyb250KSBzdGF0ZS5idWZmZXIudW5zaGlmdChjaHVuayk7ZWxzZSBzdGF0ZS5idWZmZXIucHVzaChjaHVuayk7XG5cbiAgICBpZiAoc3RhdGUubmVlZFJlYWRhYmxlKSBlbWl0UmVhZGFibGUoc3RyZWFtKTtcbiAgfVxuICBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpO1xufVxuXG5mdW5jdGlvbiBjaHVua0ludmFsaWQoc3RhdGUsIGNodW5rKSB7XG4gIHZhciBlcjtcbiAgaWYgKCFfaXNVaW50OEFycmF5KGNodW5rKSAmJiB0eXBlb2YgY2h1bmsgIT09ICdzdHJpbmcnICYmIGNodW5rICE9PSB1bmRlZmluZWQgJiYgIXN0YXRlLm9iamVjdE1vZGUpIHtcbiAgICBlciA9IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmsnKTtcbiAgfVxuICByZXR1cm4gZXI7XG59XG5cbi8vIGlmIGl0J3MgcGFzdCB0aGUgaGlnaCB3YXRlciBtYXJrLCB3ZSBjYW4gcHVzaCBpbiBzb21lIG1vcmUuXG4vLyBBbHNvLCBpZiB3ZSBoYXZlIG5vIGRhdGEgeWV0LCB3ZSBjYW4gc3RhbmQgc29tZVxuLy8gbW9yZSBieXRlcy4gIFRoaXMgaXMgdG8gd29yayBhcm91bmQgY2FzZXMgd2hlcmUgaHdtPTAsXG4vLyBzdWNoIGFzIHRoZSByZXBsLiAgQWxzbywgaWYgdGhlIHB1c2goKSB0cmlnZ2VyZWQgYVxuLy8gcmVhZGFibGUgZXZlbnQsIGFuZCB0aGUgdXNlciBjYWxsZWQgcmVhZChsYXJnZU51bWJlcikgc3VjaCB0aGF0XG4vLyBuZWVkUmVhZGFibGUgd2FzIHNldCwgdGhlbiB3ZSBvdWdodCB0byBwdXNoIG1vcmUsIHNvIHRoYXQgYW5vdGhlclxuLy8gJ3JlYWRhYmxlJyBldmVudCB3aWxsIGJlIHRyaWdnZXJlZC5cbmZ1bmN0aW9uIG5lZWRNb3JlRGF0YShzdGF0ZSkge1xuICByZXR1cm4gIXN0YXRlLmVuZGVkICYmIChzdGF0ZS5uZWVkUmVhZGFibGUgfHwgc3RhdGUubGVuZ3RoIDwgc3RhdGUuaGlnaFdhdGVyTWFyayB8fCBzdGF0ZS5sZW5ndGggPT09IDApO1xufVxuXG5SZWFkYWJsZS5wcm90b3R5cGUuaXNQYXVzZWQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcgPT09IGZhbHNlO1xufTtcblxuLy8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG5SZWFkYWJsZS5wcm90b3R5cGUuc2V0RW5jb2RpbmcgPSBmdW5jdGlvbiAoZW5jKSB7XG4gIGlmICghU3RyaW5nRGVjb2RlcikgU3RyaW5nRGVjb2RlciA9IHJlcXVpcmUoJ3N0cmluZ19kZWNvZGVyLycpLlN0cmluZ0RlY29kZXI7XG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVjb2RlciA9IG5ldyBTdHJpbmdEZWNvZGVyKGVuYyk7XG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5jb2RpbmcgPSBlbmM7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLy8gRG9uJ3QgcmFpc2UgdGhlIGh3bSA+IDhNQlxudmFyIE1BWF9IV00gPSAweDgwMDAwMDtcbmZ1bmN0aW9uIGNvbXB1dGVOZXdIaWdoV2F0ZXJNYXJrKG4pIHtcbiAgaWYgKG4gPj0gTUFYX0hXTSkge1xuICAgIG4gPSBNQVhfSFdNO1xuICB9IGVsc2Uge1xuICAgIC8vIEdldCB0aGUgbmV4dCBoaWdoZXN0IHBvd2VyIG9mIDIgdG8gcHJldmVudCBpbmNyZWFzaW5nIGh3bSBleGNlc3NpdmVseSBpblxuICAgIC8vIHRpbnkgYW1vdW50c1xuICAgIG4tLTtcbiAgICBuIHw9IG4gPj4+IDE7XG4gICAgbiB8PSBuID4+PiAyO1xuICAgIG4gfD0gbiA+Pj4gNDtcbiAgICBuIHw9IG4gPj4+IDg7XG4gICAgbiB8PSBuID4+PiAxNjtcbiAgICBuKys7XG4gIH1cbiAgcmV0dXJuIG47XG59XG5cbi8vIFRoaXMgZnVuY3Rpb24gaXMgZGVzaWduZWQgdG8gYmUgaW5saW5hYmxlLCBzbyBwbGVhc2UgdGFrZSBjYXJlIHdoZW4gbWFraW5nXG4vLyBjaGFuZ2VzIHRvIHRoZSBmdW5jdGlvbiBib2R5LlxuZnVuY3Rpb24gaG93TXVjaFRvUmVhZChuLCBzdGF0ZSkge1xuICBpZiAobiA8PSAwIHx8IHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5lbmRlZCkgcmV0dXJuIDA7XG4gIGlmIChzdGF0ZS5vYmplY3RNb2RlKSByZXR1cm4gMTtcbiAgaWYgKG4gIT09IG4pIHtcbiAgICAvLyBPbmx5IGZsb3cgb25lIGJ1ZmZlciBhdCBhIHRpbWVcbiAgICBpZiAoc3RhdGUuZmxvd2luZyAmJiBzdGF0ZS5sZW5ndGgpIHJldHVybiBzdGF0ZS5idWZmZXIuaGVhZC5kYXRhLmxlbmd0aDtlbHNlIHJldHVybiBzdGF0ZS5sZW5ndGg7XG4gIH1cbiAgLy8gSWYgd2UncmUgYXNraW5nIGZvciBtb3JlIHRoYW4gdGhlIGN1cnJlbnQgaHdtLCB0aGVuIHJhaXNlIHRoZSBod20uXG4gIGlmIChuID4gc3RhdGUuaGlnaFdhdGVyTWFyaykgc3RhdGUuaGlnaFdhdGVyTWFyayA9IGNvbXB1dGVOZXdIaWdoV2F0ZXJNYXJrKG4pO1xuICBpZiAobiA8PSBzdGF0ZS5sZW5ndGgpIHJldHVybiBuO1xuICAvLyBEb24ndCBoYXZlIGVub3VnaFxuICBpZiAoIXN0YXRlLmVuZGVkKSB7XG4gICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcbiAgICByZXR1cm4gMDtcbiAgfVxuICByZXR1cm4gc3RhdGUubGVuZ3RoO1xufVxuXG4vLyB5b3UgY2FuIG92ZXJyaWRlIGVpdGhlciB0aGlzIG1ldGhvZCwgb3IgdGhlIGFzeW5jIF9yZWFkKG4pIGJlbG93LlxuUmVhZGFibGUucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAobikge1xuICBkZWJ1ZygncmVhZCcsIG4pO1xuICBuID0gcGFyc2VJbnQobiwgMTApO1xuICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuICB2YXIgbk9yaWcgPSBuO1xuXG4gIGlmIChuICE9PSAwKSBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTtcblxuICAvLyBpZiB3ZSdyZSBkb2luZyByZWFkKDApIHRvIHRyaWdnZXIgYSByZWFkYWJsZSBldmVudCwgYnV0IHdlXG4gIC8vIGFscmVhZHkgaGF2ZSBhIGJ1bmNoIG9mIGRhdGEgaW4gdGhlIGJ1ZmZlciwgdGhlbiBqdXN0IHRyaWdnZXJcbiAgLy8gdGhlICdyZWFkYWJsZScgZXZlbnQgYW5kIG1vdmUgb24uXG4gIGlmIChuID09PSAwICYmIHN0YXRlLm5lZWRSZWFkYWJsZSAmJiAoc3RhdGUubGVuZ3RoID49IHN0YXRlLmhpZ2hXYXRlck1hcmsgfHwgc3RhdGUuZW5kZWQpKSB7XG4gICAgZGVidWcoJ3JlYWQ6IGVtaXRSZWFkYWJsZScsIHN0YXRlLmxlbmd0aCwgc3RhdGUuZW5kZWQpO1xuICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgJiYgc3RhdGUuZW5kZWQpIGVuZFJlYWRhYmxlKHRoaXMpO2Vsc2UgZW1pdFJlYWRhYmxlKHRoaXMpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgbiA9IGhvd011Y2hUb1JlYWQobiwgc3RhdGUpO1xuXG4gIC8vIGlmIHdlJ3ZlIGVuZGVkLCBhbmQgd2UncmUgbm93IGNsZWFyLCB0aGVuIGZpbmlzaCBpdCB1cC5cbiAgaWYgKG4gPT09IDAgJiYgc3RhdGUuZW5kZWQpIHtcbiAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSBlbmRSZWFkYWJsZSh0aGlzKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIEFsbCB0aGUgYWN0dWFsIGNodW5rIGdlbmVyYXRpb24gbG9naWMgbmVlZHMgdG8gYmVcbiAgLy8gKmJlbG93KiB0aGUgY2FsbCB0byBfcmVhZC4gIFRoZSByZWFzb24gaXMgdGhhdCBpbiBjZXJ0YWluXG4gIC8vIHN5bnRoZXRpYyBzdHJlYW0gY2FzZXMsIHN1Y2ggYXMgcGFzc3Rocm91Z2ggc3RyZWFtcywgX3JlYWRcbiAgLy8gbWF5IGJlIGEgY29tcGxldGVseSBzeW5jaHJvbm91cyBvcGVyYXRpb24gd2hpY2ggbWF5IGNoYW5nZVxuICAvLyB0aGUgc3RhdGUgb2YgdGhlIHJlYWQgYnVmZmVyLCBwcm92aWRpbmcgZW5vdWdoIGRhdGEgd2hlblxuICAvLyBiZWZvcmUgdGhlcmUgd2FzICpub3QqIGVub3VnaC5cbiAgLy9cbiAgLy8gU28sIHRoZSBzdGVwcyBhcmU6XG4gIC8vIDEuIEZpZ3VyZSBvdXQgd2hhdCB0aGUgc3RhdGUgb2YgdGhpbmdzIHdpbGwgYmUgYWZ0ZXIgd2UgZG9cbiAgLy8gYSByZWFkIGZyb20gdGhlIGJ1ZmZlci5cbiAgLy9cbiAgLy8gMi4gSWYgdGhhdCByZXN1bHRpbmcgc3RhdGUgd2lsbCB0cmlnZ2VyIGEgX3JlYWQsIHRoZW4gY2FsbCBfcmVhZC5cbiAgLy8gTm90ZSB0aGF0IHRoaXMgbWF5IGJlIGFzeW5jaHJvbm91cywgb3Igc3luY2hyb25vdXMuICBZZXMsIGl0IGlzXG4gIC8vIGRlZXBseSB1Z2x5IHRvIHdyaXRlIEFQSXMgdGhpcyB3YXksIGJ1dCB0aGF0IHN0aWxsIGRvZXNuJ3QgbWVhblxuICAvLyB0aGF0IHRoZSBSZWFkYWJsZSBjbGFzcyBzaG91bGQgYmVoYXZlIGltcHJvcGVybHksIGFzIHN0cmVhbXMgYXJlXG4gIC8vIGRlc2lnbmVkIHRvIGJlIHN5bmMvYXN5bmMgYWdub3N0aWMuXG4gIC8vIFRha2Ugbm90ZSBpZiB0aGUgX3JlYWQgY2FsbCBpcyBzeW5jIG9yIGFzeW5jIChpZSwgaWYgdGhlIHJlYWQgY2FsbFxuICAvLyBoYXMgcmV0dXJuZWQgeWV0KSwgc28gdGhhdCB3ZSBrbm93IHdoZXRoZXIgb3Igbm90IGl0J3Mgc2FmZSB0byBlbWl0XG4gIC8vICdyZWFkYWJsZScgZXRjLlxuICAvL1xuICAvLyAzLiBBY3R1YWxseSBwdWxsIHRoZSByZXF1ZXN0ZWQgY2h1bmtzIG91dCBvZiB0aGUgYnVmZmVyIGFuZCByZXR1cm4uXG5cbiAgLy8gaWYgd2UgbmVlZCBhIHJlYWRhYmxlIGV2ZW50LCB0aGVuIHdlIG5lZWQgdG8gZG8gc29tZSByZWFkaW5nLlxuICB2YXIgZG9SZWFkID0gc3RhdGUubmVlZFJlYWRhYmxlO1xuICBkZWJ1ZygnbmVlZCByZWFkYWJsZScsIGRvUmVhZCk7XG5cbiAgLy8gaWYgd2UgY3VycmVudGx5IGhhdmUgbGVzcyB0aGFuIHRoZSBoaWdoV2F0ZXJNYXJrLCB0aGVuIGFsc28gcmVhZCBzb21lXG4gIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgfHwgc3RhdGUubGVuZ3RoIC0gbiA8IHN0YXRlLmhpZ2hXYXRlck1hcmspIHtcbiAgICBkb1JlYWQgPSB0cnVlO1xuICAgIGRlYnVnKCdsZW5ndGggbGVzcyB0aGFuIHdhdGVybWFyaycsIGRvUmVhZCk7XG4gIH1cblxuICAvLyBob3dldmVyLCBpZiB3ZSd2ZSBlbmRlZCwgdGhlbiB0aGVyZSdzIG5vIHBvaW50LCBhbmQgaWYgd2UncmUgYWxyZWFkeVxuICAvLyByZWFkaW5nLCB0aGVuIGl0J3MgdW5uZWNlc3NhcnkuXG4gIGlmIChzdGF0ZS5lbmRlZCB8fCBzdGF0ZS5yZWFkaW5nKSB7XG4gICAgZG9SZWFkID0gZmFsc2U7XG4gICAgZGVidWcoJ3JlYWRpbmcgb3IgZW5kZWQnLCBkb1JlYWQpO1xuICB9IGVsc2UgaWYgKGRvUmVhZCkge1xuICAgIGRlYnVnKCdkbyByZWFkJyk7XG4gICAgc3RhdGUucmVhZGluZyA9IHRydWU7XG4gICAgc3RhdGUuc3luYyA9IHRydWU7XG4gICAgLy8gaWYgdGhlIGxlbmd0aCBpcyBjdXJyZW50bHkgemVybywgdGhlbiB3ZSAqbmVlZCogYSByZWFkYWJsZSBldmVudC5cbiAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuICAgIC8vIGNhbGwgaW50ZXJuYWwgcmVhZCBtZXRob2RcbiAgICB0aGlzLl9yZWFkKHN0YXRlLmhpZ2hXYXRlck1hcmspO1xuICAgIHN0YXRlLnN5bmMgPSBmYWxzZTtcbiAgICAvLyBJZiBfcmVhZCBwdXNoZWQgZGF0YSBzeW5jaHJvbm91c2x5LCB0aGVuIGByZWFkaW5nYCB3aWxsIGJlIGZhbHNlLFxuICAgIC8vIGFuZCB3ZSBuZWVkIHRvIHJlLWV2YWx1YXRlIGhvdyBtdWNoIGRhdGEgd2UgY2FuIHJldHVybiB0byB0aGUgdXNlci5cbiAgICBpZiAoIXN0YXRlLnJlYWRpbmcpIG4gPSBob3dNdWNoVG9SZWFkKG5PcmlnLCBzdGF0ZSk7XG4gIH1cblxuICB2YXIgcmV0O1xuICBpZiAobiA+IDApIHJldCA9IGZyb21MaXN0KG4sIHN0YXRlKTtlbHNlIHJldCA9IG51bGw7XG5cbiAgaWYgKHJldCA9PT0gbnVsbCkge1xuICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG4gICAgbiA9IDA7XG4gIH0gZWxzZSB7XG4gICAgc3RhdGUubGVuZ3RoIC09IG47XG4gIH1cblxuICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSB7XG4gICAgLy8gSWYgd2UgaGF2ZSBub3RoaW5nIGluIHRoZSBidWZmZXIsIHRoZW4gd2Ugd2FudCB0byBrbm93XG4gICAgLy8gYXMgc29vbiBhcyB3ZSAqZG8qIGdldCBzb21ldGhpbmcgaW50byB0aGUgYnVmZmVyLlxuICAgIGlmICghc3RhdGUuZW5kZWQpIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG5cbiAgICAvLyBJZiB3ZSB0cmllZCB0byByZWFkKCkgcGFzdCB0aGUgRU9GLCB0aGVuIGVtaXQgZW5kIG9uIHRoZSBuZXh0IHRpY2suXG4gICAgaWYgKG5PcmlnICE9PSBuICYmIHN0YXRlLmVuZGVkKSBlbmRSZWFkYWJsZSh0aGlzKTtcbiAgfVxuXG4gIGlmIChyZXQgIT09IG51bGwpIHRoaXMuZW1pdCgnZGF0YScsIHJldCk7XG5cbiAgcmV0dXJuIHJldDtcbn07XG5cbmZ1bmN0aW9uIG9uRW9mQ2h1bmsoc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoc3RhdGUuZW5kZWQpIHJldHVybjtcbiAgaWYgKHN0YXRlLmRlY29kZXIpIHtcbiAgICB2YXIgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLmVuZCgpO1xuICAgIGlmIChjaHVuayAmJiBjaHVuay5sZW5ndGgpIHtcbiAgICAgIHN0YXRlLmJ1ZmZlci5wdXNoKGNodW5rKTtcbiAgICAgIHN0YXRlLmxlbmd0aCArPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDtcbiAgICB9XG4gIH1cbiAgc3RhdGUuZW5kZWQgPSB0cnVlO1xuXG4gIC8vIGVtaXQgJ3JlYWRhYmxlJyBub3cgdG8gbWFrZSBzdXJlIGl0IGdldHMgcGlja2VkIHVwLlxuICBlbWl0UmVhZGFibGUoc3RyZWFtKTtcbn1cblxuLy8gRG9uJ3QgZW1pdCByZWFkYWJsZSByaWdodCBhd2F5IGluIHN5bmMgbW9kZSwgYmVjYXVzZSB0aGlzIGNhbiB0cmlnZ2VyXG4vLyBhbm90aGVyIHJlYWQoKSBjYWxsID0+IHN0YWNrIG92ZXJmbG93LiAgVGhpcyB3YXksIGl0IG1pZ2h0IHRyaWdnZXJcbi8vIGEgbmV4dFRpY2sgcmVjdXJzaW9uIHdhcm5pbmcsIGJ1dCB0aGF0J3Mgbm90IHNvIGJhZC5cbmZ1bmN0aW9uIGVtaXRSZWFkYWJsZShzdHJlYW0pIHtcbiAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlO1xuICBzdGF0ZS5uZWVkUmVhZGFibGUgPSBmYWxzZTtcbiAgaWYgKCFzdGF0ZS5lbWl0dGVkUmVhZGFibGUpIHtcbiAgICBkZWJ1ZygnZW1pdFJlYWRhYmxlJywgc3RhdGUuZmxvd2luZyk7XG4gICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gdHJ1ZTtcbiAgICBpZiAoc3RhdGUuc3luYykgcG5hLm5leHRUaWNrKGVtaXRSZWFkYWJsZV8sIHN0cmVhbSk7ZWxzZSBlbWl0UmVhZGFibGVfKHN0cmVhbSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZW1pdFJlYWRhYmxlXyhzdHJlYW0pIHtcbiAgZGVidWcoJ2VtaXQgcmVhZGFibGUnKTtcbiAgc3RyZWFtLmVtaXQoJ3JlYWRhYmxlJyk7XG4gIGZsb3coc3RyZWFtKTtcbn1cblxuLy8gYXQgdGhpcyBwb2ludCwgdGhlIHVzZXIgaGFzIHByZXN1bWFibHkgc2VlbiB0aGUgJ3JlYWRhYmxlJyBldmVudCxcbi8vIGFuZCBjYWxsZWQgcmVhZCgpIHRvIGNvbnN1bWUgc29tZSBkYXRhLiAgdGhhdCBtYXkgaGF2ZSB0cmlnZ2VyZWRcbi8vIGluIHR1cm4gYW5vdGhlciBfcmVhZChuKSBjYWxsLCBpbiB3aGljaCBjYXNlIHJlYWRpbmcgPSB0cnVlIGlmXG4vLyBpdCdzIGluIHByb2dyZXNzLlxuLy8gSG93ZXZlciwgaWYgd2UncmUgbm90IGVuZGVkLCBvciByZWFkaW5nLCBhbmQgdGhlIGxlbmd0aCA8IGh3bSxcbi8vIHRoZW4gZ28gYWhlYWQgYW5kIHRyeSB0byByZWFkIHNvbWUgbW9yZSBwcmVlbXB0aXZlbHkuXG5mdW5jdGlvbiBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKCFzdGF0ZS5yZWFkaW5nTW9yZSkge1xuICAgIHN0YXRlLnJlYWRpbmdNb3JlID0gdHJ1ZTtcbiAgICBwbmEubmV4dFRpY2sobWF5YmVSZWFkTW9yZV8sIHN0cmVhbSwgc3RhdGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1heWJlUmVhZE1vcmVfKHN0cmVhbSwgc3RhdGUpIHtcbiAgdmFyIGxlbiA9IHN0YXRlLmxlbmd0aDtcbiAgd2hpbGUgKCFzdGF0ZS5yZWFkaW5nICYmICFzdGF0ZS5mbG93aW5nICYmICFzdGF0ZS5lbmRlZCAmJiBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrKSB7XG4gICAgZGVidWcoJ21heWJlUmVhZE1vcmUgcmVhZCAwJyk7XG4gICAgc3RyZWFtLnJlYWQoMCk7XG4gICAgaWYgKGxlbiA9PT0gc3RhdGUubGVuZ3RoKVxuICAgICAgLy8gZGlkbid0IGdldCBhbnkgZGF0YSwgc3RvcCBzcGlubmluZy5cbiAgICAgIGJyZWFrO2Vsc2UgbGVuID0gc3RhdGUubGVuZ3RoO1xuICB9XG4gIHN0YXRlLnJlYWRpbmdNb3JlID0gZmFsc2U7XG59XG5cbi8vIGFic3RyYWN0IG1ldGhvZC4gIHRvIGJlIG92ZXJyaWRkZW4gaW4gc3BlY2lmaWMgaW1wbGVtZW50YXRpb24gY2xhc3Nlcy5cbi8vIGNhbGwgY2IoZXIsIGRhdGEpIHdoZXJlIGRhdGEgaXMgPD0gbiBpbiBsZW5ndGguXG4vLyBmb3IgdmlydHVhbCAobm9uLXN0cmluZywgbm9uLWJ1ZmZlcikgc3RyZWFtcywgXCJsZW5ndGhcIiBpcyBzb21ld2hhdFxuLy8gYXJiaXRyYXJ5LCBhbmQgcGVyaGFwcyBub3QgdmVyeSBtZWFuaW5nZnVsLlxuUmVhZGFibGUucHJvdG90eXBlLl9yZWFkID0gZnVuY3Rpb24gKG4pIHtcbiAgdGhpcy5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignX3JlYWQoKSBpcyBub3QgaW1wbGVtZW50ZWQnKSk7XG59O1xuXG5SZWFkYWJsZS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uIChkZXN0LCBwaXBlT3B0cykge1xuICB2YXIgc3JjID0gdGhpcztcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcblxuICBzd2l0Y2ggKHN0YXRlLnBpcGVzQ291bnQpIHtcbiAgICBjYXNlIDA6XG4gICAgICBzdGF0ZS5waXBlcyA9IGRlc3Q7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDE6XG4gICAgICBzdGF0ZS5waXBlcyA9IFtzdGF0ZS5waXBlcywgZGVzdF07XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgc3RhdGUucGlwZXMucHVzaChkZXN0KTtcbiAgICAgIGJyZWFrO1xuICB9XG4gIHN0YXRlLnBpcGVzQ291bnQgKz0gMTtcbiAgZGVidWcoJ3BpcGUgY291bnQ9JWQgb3B0cz0laicsIHN0YXRlLnBpcGVzQ291bnQsIHBpcGVPcHRzKTtcblxuICB2YXIgZG9FbmQgPSAoIXBpcGVPcHRzIHx8IHBpcGVPcHRzLmVuZCAhPT0gZmFsc2UpICYmIGRlc3QgIT09IHByb2Nlc3Muc3Rkb3V0ICYmIGRlc3QgIT09IHByb2Nlc3Muc3RkZXJyO1xuXG4gIHZhciBlbmRGbiA9IGRvRW5kID8gb25lbmQgOiB1bnBpcGU7XG4gIGlmIChzdGF0ZS5lbmRFbWl0dGVkKSBwbmEubmV4dFRpY2soZW5kRm4pO2Vsc2Ugc3JjLm9uY2UoJ2VuZCcsIGVuZEZuKTtcblxuICBkZXN0Lm9uKCd1bnBpcGUnLCBvbnVucGlwZSk7XG4gIGZ1bmN0aW9uIG9udW5waXBlKHJlYWRhYmxlLCB1bnBpcGVJbmZvKSB7XG4gICAgZGVidWcoJ29udW5waXBlJyk7XG4gICAgaWYgKHJlYWRhYmxlID09PSBzcmMpIHtcbiAgICAgIGlmICh1bnBpcGVJbmZvICYmIHVucGlwZUluZm8uaGFzVW5waXBlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgdW5waXBlSW5mby5oYXNVbnBpcGVkID0gdHJ1ZTtcbiAgICAgICAgY2xlYW51cCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uZW5kKCkge1xuICAgIGRlYnVnKCdvbmVuZCcpO1xuICAgIGRlc3QuZW5kKCk7XG4gIH1cblxuICAvLyB3aGVuIHRoZSBkZXN0IGRyYWlucywgaXQgcmVkdWNlcyB0aGUgYXdhaXREcmFpbiBjb3VudGVyXG4gIC8vIG9uIHRoZSBzb3VyY2UuICBUaGlzIHdvdWxkIGJlIG1vcmUgZWxlZ2FudCB3aXRoIGEgLm9uY2UoKVxuICAvLyBoYW5kbGVyIGluIGZsb3coKSwgYnV0IGFkZGluZyBhbmQgcmVtb3ZpbmcgcmVwZWF0ZWRseSBpc1xuICAvLyB0b28gc2xvdy5cbiAgdmFyIG9uZHJhaW4gPSBwaXBlT25EcmFpbihzcmMpO1xuICBkZXN0Lm9uKCdkcmFpbicsIG9uZHJhaW4pO1xuXG4gIHZhciBjbGVhbmVkVXAgPSBmYWxzZTtcbiAgZnVuY3Rpb24gY2xlYW51cCgpIHtcbiAgICBkZWJ1ZygnY2xlYW51cCcpO1xuICAgIC8vIGNsZWFudXAgZXZlbnQgaGFuZGxlcnMgb25jZSB0aGUgcGlwZSBpcyBicm9rZW5cbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2ZpbmlzaCcsIG9uZmluaXNoKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdkcmFpbicsIG9uZHJhaW4pO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcigndW5waXBlJywgb251bnBpcGUpO1xuICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZW5kJywgb25lbmQpO1xuICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZW5kJywgdW5waXBlKTtcbiAgICBzcmMucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBvbmRhdGEpO1xuXG4gICAgY2xlYW5lZFVwID0gdHJ1ZTtcblxuICAgIC8vIGlmIHRoZSByZWFkZXIgaXMgd2FpdGluZyBmb3IgYSBkcmFpbiBldmVudCBmcm9tIHRoaXNcbiAgICAvLyBzcGVjaWZpYyB3cml0ZXIsIHRoZW4gaXQgd291bGQgY2F1c2UgaXQgdG8gbmV2ZXIgc3RhcnRcbiAgICAvLyBmbG93aW5nIGFnYWluLlxuICAgIC8vIFNvLCBpZiB0aGlzIGlzIGF3YWl0aW5nIGEgZHJhaW4sIHRoZW4gd2UganVzdCBjYWxsIGl0IG5vdy5cbiAgICAvLyBJZiB3ZSBkb24ndCBrbm93LCB0aGVuIGFzc3VtZSB0aGF0IHdlIGFyZSB3YWl0aW5nIGZvciBvbmUuXG4gICAgaWYgKHN0YXRlLmF3YWl0RHJhaW4gJiYgKCFkZXN0Ll93cml0YWJsZVN0YXRlIHx8IGRlc3QuX3dyaXRhYmxlU3RhdGUubmVlZERyYWluKSkgb25kcmFpbigpO1xuICB9XG5cbiAgLy8gSWYgdGhlIHVzZXIgcHVzaGVzIG1vcmUgZGF0YSB3aGlsZSB3ZSdyZSB3cml0aW5nIHRvIGRlc3QgdGhlbiB3ZSdsbCBlbmQgdXBcbiAgLy8gaW4gb25kYXRhIGFnYWluLiBIb3dldmVyLCB3ZSBvbmx5IHdhbnQgdG8gaW5jcmVhc2UgYXdhaXREcmFpbiBvbmNlIGJlY2F1c2VcbiAgLy8gZGVzdCB3aWxsIG9ubHkgZW1pdCBvbmUgJ2RyYWluJyBldmVudCBmb3IgdGhlIG11bHRpcGxlIHdyaXRlcy5cbiAgLy8gPT4gSW50cm9kdWNlIGEgZ3VhcmQgb24gaW5jcmVhc2luZyBhd2FpdERyYWluLlxuICB2YXIgaW5jcmVhc2VkQXdhaXREcmFpbiA9IGZhbHNlO1xuICBzcmMub24oJ2RhdGEnLCBvbmRhdGEpO1xuICBmdW5jdGlvbiBvbmRhdGEoY2h1bmspIHtcbiAgICBkZWJ1Zygnb25kYXRhJyk7XG4gICAgaW5jcmVhc2VkQXdhaXREcmFpbiA9IGZhbHNlO1xuICAgIHZhciByZXQgPSBkZXN0LndyaXRlKGNodW5rKTtcbiAgICBpZiAoZmFsc2UgPT09IHJldCAmJiAhaW5jcmVhc2VkQXdhaXREcmFpbikge1xuICAgICAgLy8gSWYgdGhlIHVzZXIgdW5waXBlZCBkdXJpbmcgYGRlc3Qud3JpdGUoKWAsIGl0IGlzIHBvc3NpYmxlXG4gICAgICAvLyB0byBnZXQgc3R1Y2sgaW4gYSBwZXJtYW5lbnRseSBwYXVzZWQgc3RhdGUgaWYgdGhhdCB3cml0ZVxuICAgICAgLy8gYWxzbyByZXR1cm5lZCBmYWxzZS5cbiAgICAgIC8vID0+IENoZWNrIHdoZXRoZXIgYGRlc3RgIGlzIHN0aWxsIGEgcGlwaW5nIGRlc3RpbmF0aW9uLlxuICAgICAgaWYgKChzdGF0ZS5waXBlc0NvdW50ID09PSAxICYmIHN0YXRlLnBpcGVzID09PSBkZXN0IHx8IHN0YXRlLnBpcGVzQ291bnQgPiAxICYmIGluZGV4T2Yoc3RhdGUucGlwZXMsIGRlc3QpICE9PSAtMSkgJiYgIWNsZWFuZWRVcCkge1xuICAgICAgICBkZWJ1ZygnZmFsc2Ugd3JpdGUgcmVzcG9uc2UsIHBhdXNlJywgc3JjLl9yZWFkYWJsZVN0YXRlLmF3YWl0RHJhaW4pO1xuICAgICAgICBzcmMuX3JlYWRhYmxlU3RhdGUuYXdhaXREcmFpbisrO1xuICAgICAgICBpbmNyZWFzZWRBd2FpdERyYWluID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHNyYy5wYXVzZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGlmIHRoZSBkZXN0IGhhcyBhbiBlcnJvciwgdGhlbiBzdG9wIHBpcGluZyBpbnRvIGl0LlxuICAvLyBob3dldmVyLCBkb24ndCBzdXBwcmVzcyB0aGUgdGhyb3dpbmcgYmVoYXZpb3IgZm9yIHRoaXMuXG4gIGZ1bmN0aW9uIG9uZXJyb3IoZXIpIHtcbiAgICBkZWJ1Zygnb25lcnJvcicsIGVyKTtcbiAgICB1bnBpcGUoKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpO1xuICAgIGlmIChFRWxpc3RlbmVyQ291bnQoZGVzdCwgJ2Vycm9yJykgPT09IDApIGRlc3QuZW1pdCgnZXJyb3InLCBlcik7XG4gIH1cblxuICAvLyBNYWtlIHN1cmUgb3VyIGVycm9yIGhhbmRsZXIgaXMgYXR0YWNoZWQgYmVmb3JlIHVzZXJsYW5kIG9uZXMuXG4gIHByZXBlbmRMaXN0ZW5lcihkZXN0LCAnZXJyb3InLCBvbmVycm9yKTtcblxuICAvLyBCb3RoIGNsb3NlIGFuZCBmaW5pc2ggc2hvdWxkIHRyaWdnZXIgdW5waXBlLCBidXQgb25seSBvbmNlLlxuICBmdW5jdGlvbiBvbmNsb3NlKCkge1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2ZpbmlzaCcsIG9uZmluaXNoKTtcbiAgICB1bnBpcGUoKTtcbiAgfVxuICBkZXN0Lm9uY2UoJ2Nsb3NlJywgb25jbG9zZSk7XG4gIGZ1bmN0aW9uIG9uZmluaXNoKCkge1xuICAgIGRlYnVnKCdvbmZpbmlzaCcpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7XG4gICAgdW5waXBlKCk7XG4gIH1cbiAgZGVzdC5vbmNlKCdmaW5pc2gnLCBvbmZpbmlzaCk7XG5cbiAgZnVuY3Rpb24gdW5waXBlKCkge1xuICAgIGRlYnVnKCd1bnBpcGUnKTtcbiAgICBzcmMudW5waXBlKGRlc3QpO1xuICB9XG5cbiAgLy8gdGVsbCB0aGUgZGVzdCB0aGF0IGl0J3MgYmVpbmcgcGlwZWQgdG9cbiAgZGVzdC5lbWl0KCdwaXBlJywgc3JjKTtcblxuICAvLyBzdGFydCB0aGUgZmxvdyBpZiBpdCBoYXNuJ3QgYmVlbiBzdGFydGVkIGFscmVhZHkuXG4gIGlmICghc3RhdGUuZmxvd2luZykge1xuICAgIGRlYnVnKCdwaXBlIHJlc3VtZScpO1xuICAgIHNyYy5yZXN1bWUoKTtcbiAgfVxuXG4gIHJldHVybiBkZXN0O1xufTtcblxuZnVuY3Rpb24gcGlwZU9uRHJhaW4oc3JjKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHN0YXRlID0gc3JjLl9yZWFkYWJsZVN0YXRlO1xuICAgIGRlYnVnKCdwaXBlT25EcmFpbicsIHN0YXRlLmF3YWl0RHJhaW4pO1xuICAgIGlmIChzdGF0ZS5hd2FpdERyYWluKSBzdGF0ZS5hd2FpdERyYWluLS07XG4gICAgaWYgKHN0YXRlLmF3YWl0RHJhaW4gPT09IDAgJiYgRUVsaXN0ZW5lckNvdW50KHNyYywgJ2RhdGEnKSkge1xuICAgICAgc3RhdGUuZmxvd2luZyA9IHRydWU7XG4gICAgICBmbG93KHNyYyk7XG4gICAgfVxuICB9O1xufVxuXG5SZWFkYWJsZS5wcm90b3R5cGUudW5waXBlID0gZnVuY3Rpb24gKGRlc3QpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgdmFyIHVucGlwZUluZm8gPSB7IGhhc1VucGlwZWQ6IGZhbHNlIH07XG5cbiAgLy8gaWYgd2UncmUgbm90IHBpcGluZyBhbnl3aGVyZSwgdGhlbiBkbyBub3RoaW5nLlxuICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMCkgcmV0dXJuIHRoaXM7XG5cbiAgLy8ganVzdCBvbmUgZGVzdGluYXRpb24uICBtb3N0IGNvbW1vbiBjYXNlLlxuICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMSkge1xuICAgIC8vIHBhc3NlZCBpbiBvbmUsIGJ1dCBpdCdzIG5vdCB0aGUgcmlnaHQgb25lLlxuICAgIGlmIChkZXN0ICYmIGRlc3QgIT09IHN0YXRlLnBpcGVzKSByZXR1cm4gdGhpcztcblxuICAgIGlmICghZGVzdCkgZGVzdCA9IHN0YXRlLnBpcGVzO1xuXG4gICAgLy8gZ290IGEgbWF0Y2guXG4gICAgc3RhdGUucGlwZXMgPSBudWxsO1xuICAgIHN0YXRlLnBpcGVzQ291bnQgPSAwO1xuICAgIHN0YXRlLmZsb3dpbmcgPSBmYWxzZTtcbiAgICBpZiAoZGVzdCkgZGVzdC5lbWl0KCd1bnBpcGUnLCB0aGlzLCB1bnBpcGVJbmZvKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIHNsb3cgY2FzZS4gbXVsdGlwbGUgcGlwZSBkZXN0aW5hdGlvbnMuXG5cbiAgaWYgKCFkZXN0KSB7XG4gICAgLy8gcmVtb3ZlIGFsbC5cbiAgICB2YXIgZGVzdHMgPSBzdGF0ZS5waXBlcztcbiAgICB2YXIgbGVuID0gc3RhdGUucGlwZXNDb3VudDtcbiAgICBzdGF0ZS5waXBlcyA9IG51bGw7XG4gICAgc3RhdGUucGlwZXNDb3VudCA9IDA7XG4gICAgc3RhdGUuZmxvd2luZyA9IGZhbHNlO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgZGVzdHNbaV0uZW1pdCgndW5waXBlJywgdGhpcywgdW5waXBlSW5mbyk7XG4gICAgfXJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gdHJ5IHRvIGZpbmQgdGhlIHJpZ2h0IG9uZS5cbiAgdmFyIGluZGV4ID0gaW5kZXhPZihzdGF0ZS5waXBlcywgZGVzdCk7XG4gIGlmIChpbmRleCA9PT0gLTEpIHJldHVybiB0aGlzO1xuXG4gIHN0YXRlLnBpcGVzLnNwbGljZShpbmRleCwgMSk7XG4gIHN0YXRlLnBpcGVzQ291bnQgLT0gMTtcbiAgaWYgKHN0YXRlLnBpcGVzQ291bnQgPT09IDEpIHN0YXRlLnBpcGVzID0gc3RhdGUucGlwZXNbMF07XG5cbiAgZGVzdC5lbWl0KCd1bnBpcGUnLCB0aGlzLCB1bnBpcGVJbmZvKTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIHNldCB1cCBkYXRhIGV2ZW50cyBpZiB0aGV5IGFyZSBhc2tlZCBmb3Jcbi8vIEVuc3VyZSByZWFkYWJsZSBsaXN0ZW5lcnMgZXZlbnR1YWxseSBnZXQgc29tZXRoaW5nXG5SZWFkYWJsZS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXYsIGZuKSB7XG4gIHZhciByZXMgPSBTdHJlYW0ucHJvdG90eXBlLm9uLmNhbGwodGhpcywgZXYsIGZuKTtcblxuICBpZiAoZXYgPT09ICdkYXRhJykge1xuICAgIC8vIFN0YXJ0IGZsb3dpbmcgb24gbmV4dCB0aWNrIGlmIHN0cmVhbSBpc24ndCBleHBsaWNpdGx5IHBhdXNlZFxuICAgIGlmICh0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcgIT09IGZhbHNlKSB0aGlzLnJlc3VtZSgpO1xuICB9IGVsc2UgaWYgKGV2ID09PSAncmVhZGFibGUnKSB7XG4gICAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgICBpZiAoIXN0YXRlLmVuZEVtaXR0ZWQgJiYgIXN0YXRlLnJlYWRhYmxlTGlzdGVuaW5nKSB7XG4gICAgICBzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZyA9IHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG4gICAgICBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTtcbiAgICAgIGlmICghc3RhdGUucmVhZGluZykge1xuICAgICAgICBwbmEubmV4dFRpY2soblJlYWRpbmdOZXh0VGljaywgdGhpcyk7XG4gICAgICB9IGVsc2UgaWYgKHN0YXRlLmxlbmd0aCkge1xuICAgICAgICBlbWl0UmVhZGFibGUodGhpcyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlcztcbn07XG5SZWFkYWJsZS5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBSZWFkYWJsZS5wcm90b3R5cGUub247XG5cbmZ1bmN0aW9uIG5SZWFkaW5nTmV4dFRpY2soc2VsZikge1xuICBkZWJ1ZygncmVhZGFibGUgbmV4dHRpY2sgcmVhZCAwJyk7XG4gIHNlbGYucmVhZCgwKTtcbn1cblxuLy8gcGF1c2UoKSBhbmQgcmVzdW1lKCkgYXJlIHJlbW5hbnRzIG9mIHRoZSBsZWdhY3kgcmVhZGFibGUgc3RyZWFtIEFQSVxuLy8gSWYgdGhlIHVzZXIgdXNlcyB0aGVtLCB0aGVuIHN3aXRjaCBpbnRvIG9sZCBtb2RlLlxuUmVhZGFibGUucHJvdG90eXBlLnJlc3VtZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgaWYgKCFzdGF0ZS5mbG93aW5nKSB7XG4gICAgZGVidWcoJ3Jlc3VtZScpO1xuICAgIHN0YXRlLmZsb3dpbmcgPSB0cnVlO1xuICAgIHJlc3VtZSh0aGlzLCBzdGF0ZSk7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5mdW5jdGlvbiByZXN1bWUoc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoIXN0YXRlLnJlc3VtZVNjaGVkdWxlZCkge1xuICAgIHN0YXRlLnJlc3VtZVNjaGVkdWxlZCA9IHRydWU7XG4gICAgcG5hLm5leHRUaWNrKHJlc3VtZV8sIHN0cmVhbSwgc3RhdGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlc3VtZV8oc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoIXN0YXRlLnJlYWRpbmcpIHtcbiAgICBkZWJ1ZygncmVzdW1lIHJlYWQgMCcpO1xuICAgIHN0cmVhbS5yZWFkKDApO1xuICB9XG5cbiAgc3RhdGUucmVzdW1lU2NoZWR1bGVkID0gZmFsc2U7XG4gIHN0YXRlLmF3YWl0RHJhaW4gPSAwO1xuICBzdHJlYW0uZW1pdCgncmVzdW1lJyk7XG4gIGZsb3coc3RyZWFtKTtcbiAgaWYgKHN0YXRlLmZsb3dpbmcgJiYgIXN0YXRlLnJlYWRpbmcpIHN0cmVhbS5yZWFkKDApO1xufVxuXG5SZWFkYWJsZS5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiAoKSB7XG4gIGRlYnVnKCdjYWxsIHBhdXNlIGZsb3dpbmc9JWonLCB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcpO1xuICBpZiAoZmFsc2UgIT09IHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZykge1xuICAgIGRlYnVnKCdwYXVzZScpO1xuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyA9IGZhbHNlO1xuICAgIHRoaXMuZW1pdCgncGF1c2UnKTtcbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbmZ1bmN0aW9uIGZsb3coc3RyZWFtKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTtcbiAgZGVidWcoJ2Zsb3cnLCBzdGF0ZS5mbG93aW5nKTtcbiAgd2hpbGUgKHN0YXRlLmZsb3dpbmcgJiYgc3RyZWFtLnJlYWQoKSAhPT0gbnVsbCkge31cbn1cblxuLy8gd3JhcCBhbiBvbGQtc3R5bGUgc3RyZWFtIGFzIHRoZSBhc3luYyBkYXRhIHNvdXJjZS5cbi8vIFRoaXMgaXMgKm5vdCogcGFydCBvZiB0aGUgcmVhZGFibGUgc3RyZWFtIGludGVyZmFjZS5cbi8vIEl0IGlzIGFuIHVnbHkgdW5mb3J0dW5hdGUgbWVzcyBvZiBoaXN0b3J5LlxuUmVhZGFibGUucHJvdG90eXBlLndyYXAgPSBmdW5jdGlvbiAoc3RyZWFtKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgdmFyIHBhdXNlZCA9IGZhbHNlO1xuXG4gIHN0cmVhbS5vbignZW5kJywgZnVuY3Rpb24gKCkge1xuICAgIGRlYnVnKCd3cmFwcGVkIGVuZCcpO1xuICAgIGlmIChzdGF0ZS5kZWNvZGVyICYmICFzdGF0ZS5lbmRlZCkge1xuICAgICAgdmFyIGNodW5rID0gc3RhdGUuZGVjb2Rlci5lbmQoKTtcbiAgICAgIGlmIChjaHVuayAmJiBjaHVuay5sZW5ndGgpIF90aGlzLnB1c2goY2h1bmspO1xuICAgIH1cblxuICAgIF90aGlzLnB1c2gobnVsbCk7XG4gIH0pO1xuXG4gIHN0cmVhbS5vbignZGF0YScsIGZ1bmN0aW9uIChjaHVuaykge1xuICAgIGRlYnVnKCd3cmFwcGVkIGRhdGEnKTtcbiAgICBpZiAoc3RhdGUuZGVjb2RlcikgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLndyaXRlKGNodW5rKTtcblxuICAgIC8vIGRvbid0IHNraXAgb3ZlciBmYWxzeSB2YWx1ZXMgaW4gb2JqZWN0TW9kZVxuICAgIGlmIChzdGF0ZS5vYmplY3RNb2RlICYmIChjaHVuayA9PT0gbnVsbCB8fCBjaHVuayA9PT0gdW5kZWZpbmVkKSkgcmV0dXJuO2Vsc2UgaWYgKCFzdGF0ZS5vYmplY3RNb2RlICYmICghY2h1bmsgfHwgIWNodW5rLmxlbmd0aCkpIHJldHVybjtcblxuICAgIHZhciByZXQgPSBfdGhpcy5wdXNoKGNodW5rKTtcbiAgICBpZiAoIXJldCkge1xuICAgICAgcGF1c2VkID0gdHJ1ZTtcbiAgICAgIHN0cmVhbS5wYXVzZSgpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gcHJveHkgYWxsIHRoZSBvdGhlciBtZXRob2RzLlxuICAvLyBpbXBvcnRhbnQgd2hlbiB3cmFwcGluZyBmaWx0ZXJzIGFuZCBkdXBsZXhlcy5cbiAgZm9yICh2YXIgaSBpbiBzdHJlYW0pIHtcbiAgICBpZiAodGhpc1tpXSA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBzdHJlYW1baV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXNbaV0gPSBmdW5jdGlvbiAobWV0aG9kKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIHN0cmVhbVttZXRob2RdLmFwcGx5KHN0cmVhbSwgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICAgIH0oaSk7XG4gICAgfVxuICB9XG5cbiAgLy8gcHJveHkgY2VydGFpbiBpbXBvcnRhbnQgZXZlbnRzLlxuICBmb3IgKHZhciBuID0gMDsgbiA8IGtQcm94eUV2ZW50cy5sZW5ndGg7IG4rKykge1xuICAgIHN0cmVhbS5vbihrUHJveHlFdmVudHNbbl0sIHRoaXMuZW1pdC5iaW5kKHRoaXMsIGtQcm94eUV2ZW50c1tuXSkpO1xuICB9XG5cbiAgLy8gd2hlbiB3ZSB0cnkgdG8gY29uc3VtZSBzb21lIG1vcmUgYnl0ZXMsIHNpbXBseSB1bnBhdXNlIHRoZVxuICAvLyB1bmRlcmx5aW5nIHN0cmVhbS5cbiAgdGhpcy5fcmVhZCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgZGVidWcoJ3dyYXBwZWQgX3JlYWQnLCBuKTtcbiAgICBpZiAocGF1c2VkKSB7XG4gICAgICBwYXVzZWQgPSBmYWxzZTtcbiAgICAgIHN0cmVhbS5yZXN1bWUoKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhZGFibGUucHJvdG90eXBlLCAncmVhZGFibGVIaWdoV2F0ZXJNYXJrJywge1xuICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZVxuICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW5cbiAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsXG4gIGVudW1lcmFibGU6IGZhbHNlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5oaWdoV2F0ZXJNYXJrO1xuICB9XG59KTtcblxuLy8gZXhwb3NlZCBmb3IgdGVzdGluZyBwdXJwb3NlcyBvbmx5LlxuUmVhZGFibGUuX2Zyb21MaXN0ID0gZnJvbUxpc3Q7XG5cbi8vIFBsdWNrIG9mZiBuIGJ5dGVzIGZyb20gYW4gYXJyYXkgb2YgYnVmZmVycy5cbi8vIExlbmd0aCBpcyB0aGUgY29tYmluZWQgbGVuZ3RocyBvZiBhbGwgdGhlIGJ1ZmZlcnMgaW4gdGhlIGxpc3QuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIGRlc2lnbmVkIHRvIGJlIGlubGluYWJsZSwgc28gcGxlYXNlIHRha2UgY2FyZSB3aGVuIG1ha2luZ1xuLy8gY2hhbmdlcyB0byB0aGUgZnVuY3Rpb24gYm9keS5cbmZ1bmN0aW9uIGZyb21MaXN0KG4sIHN0YXRlKSB7XG4gIC8vIG5vdGhpbmcgYnVmZmVyZWRcbiAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG5cbiAgdmFyIHJldDtcbiAgaWYgKHN0YXRlLm9iamVjdE1vZGUpIHJldCA9IHN0YXRlLmJ1ZmZlci5zaGlmdCgpO2Vsc2UgaWYgKCFuIHx8IG4gPj0gc3RhdGUubGVuZ3RoKSB7XG4gICAgLy8gcmVhZCBpdCBhbGwsIHRydW5jYXRlIHRoZSBsaXN0XG4gICAgaWYgKHN0YXRlLmRlY29kZXIpIHJldCA9IHN0YXRlLmJ1ZmZlci5qb2luKCcnKTtlbHNlIGlmIChzdGF0ZS5idWZmZXIubGVuZ3RoID09PSAxKSByZXQgPSBzdGF0ZS5idWZmZXIuaGVhZC5kYXRhO2Vsc2UgcmV0ID0gc3RhdGUuYnVmZmVyLmNvbmNhdChzdGF0ZS5sZW5ndGgpO1xuICAgIHN0YXRlLmJ1ZmZlci5jbGVhcigpO1xuICB9IGVsc2Uge1xuICAgIC8vIHJlYWQgcGFydCBvZiBsaXN0XG4gICAgcmV0ID0gZnJvbUxpc3RQYXJ0aWFsKG4sIHN0YXRlLmJ1ZmZlciwgc3RhdGUuZGVjb2Rlcik7XG4gIH1cblxuICByZXR1cm4gcmV0O1xufVxuXG4vLyBFeHRyYWN0cyBvbmx5IGVub3VnaCBidWZmZXJlZCBkYXRhIHRvIHNhdGlzZnkgdGhlIGFtb3VudCByZXF1ZXN0ZWQuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIGRlc2lnbmVkIHRvIGJlIGlubGluYWJsZSwgc28gcGxlYXNlIHRha2UgY2FyZSB3aGVuIG1ha2luZ1xuLy8gY2hhbmdlcyB0byB0aGUgZnVuY3Rpb24gYm9keS5cbmZ1bmN0aW9uIGZyb21MaXN0UGFydGlhbChuLCBsaXN0LCBoYXNTdHJpbmdzKSB7XG4gIHZhciByZXQ7XG4gIGlmIChuIDwgbGlzdC5oZWFkLmRhdGEubGVuZ3RoKSB7XG4gICAgLy8gc2xpY2UgaXMgdGhlIHNhbWUgZm9yIGJ1ZmZlcnMgYW5kIHN0cmluZ3NcbiAgICByZXQgPSBsaXN0LmhlYWQuZGF0YS5zbGljZSgwLCBuKTtcbiAgICBsaXN0LmhlYWQuZGF0YSA9IGxpc3QuaGVhZC5kYXRhLnNsaWNlKG4pO1xuICB9IGVsc2UgaWYgKG4gPT09IGxpc3QuaGVhZC5kYXRhLmxlbmd0aCkge1xuICAgIC8vIGZpcnN0IGNodW5rIGlzIGEgcGVyZmVjdCBtYXRjaFxuICAgIHJldCA9IGxpc3Quc2hpZnQoKTtcbiAgfSBlbHNlIHtcbiAgICAvLyByZXN1bHQgc3BhbnMgbW9yZSB0aGFuIG9uZSBidWZmZXJcbiAgICByZXQgPSBoYXNTdHJpbmdzID8gY29weUZyb21CdWZmZXJTdHJpbmcobiwgbGlzdCkgOiBjb3B5RnJvbUJ1ZmZlcihuLCBsaXN0KTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG4vLyBDb3BpZXMgYSBzcGVjaWZpZWQgYW1vdW50IG9mIGNoYXJhY3RlcnMgZnJvbSB0aGUgbGlzdCBvZiBidWZmZXJlZCBkYXRhXG4vLyBjaHVua3MuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIGRlc2lnbmVkIHRvIGJlIGlubGluYWJsZSwgc28gcGxlYXNlIHRha2UgY2FyZSB3aGVuIG1ha2luZ1xuLy8gY2hhbmdlcyB0byB0aGUgZnVuY3Rpb24gYm9keS5cbmZ1bmN0aW9uIGNvcHlGcm9tQnVmZmVyU3RyaW5nKG4sIGxpc3QpIHtcbiAgdmFyIHAgPSBsaXN0LmhlYWQ7XG4gIHZhciBjID0gMTtcbiAgdmFyIHJldCA9IHAuZGF0YTtcbiAgbiAtPSByZXQubGVuZ3RoO1xuICB3aGlsZSAocCA9IHAubmV4dCkge1xuICAgIHZhciBzdHIgPSBwLmRhdGE7XG4gICAgdmFyIG5iID0gbiA+IHN0ci5sZW5ndGggPyBzdHIubGVuZ3RoIDogbjtcbiAgICBpZiAobmIgPT09IHN0ci5sZW5ndGgpIHJldCArPSBzdHI7ZWxzZSByZXQgKz0gc3RyLnNsaWNlKDAsIG4pO1xuICAgIG4gLT0gbmI7XG4gICAgaWYgKG4gPT09IDApIHtcbiAgICAgIGlmIChuYiA9PT0gc3RyLmxlbmd0aCkge1xuICAgICAgICArK2M7XG4gICAgICAgIGlmIChwLm5leHQpIGxpc3QuaGVhZCA9IHAubmV4dDtlbHNlIGxpc3QuaGVhZCA9IGxpc3QudGFpbCA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaXN0LmhlYWQgPSBwO1xuICAgICAgICBwLmRhdGEgPSBzdHIuc2xpY2UobmIpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgICsrYztcbiAgfVxuICBsaXN0Lmxlbmd0aCAtPSBjO1xuICByZXR1cm4gcmV0O1xufVxuXG4vLyBDb3BpZXMgYSBzcGVjaWZpZWQgYW1vdW50IG9mIGJ5dGVzIGZyb20gdGhlIGxpc3Qgb2YgYnVmZmVyZWQgZGF0YSBjaHVua3MuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIGRlc2lnbmVkIHRvIGJlIGlubGluYWJsZSwgc28gcGxlYXNlIHRha2UgY2FyZSB3aGVuIG1ha2luZ1xuLy8gY2hhbmdlcyB0byB0aGUgZnVuY3Rpb24gYm9keS5cbmZ1bmN0aW9uIGNvcHlGcm9tQnVmZmVyKG4sIGxpc3QpIHtcbiAgdmFyIHJldCA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShuKTtcbiAgdmFyIHAgPSBsaXN0LmhlYWQ7XG4gIHZhciBjID0gMTtcbiAgcC5kYXRhLmNvcHkocmV0KTtcbiAgbiAtPSBwLmRhdGEubGVuZ3RoO1xuICB3aGlsZSAocCA9IHAubmV4dCkge1xuICAgIHZhciBidWYgPSBwLmRhdGE7XG4gICAgdmFyIG5iID0gbiA+IGJ1Zi5sZW5ndGggPyBidWYubGVuZ3RoIDogbjtcbiAgICBidWYuY29weShyZXQsIHJldC5sZW5ndGggLSBuLCAwLCBuYik7XG4gICAgbiAtPSBuYjtcbiAgICBpZiAobiA9PT0gMCkge1xuICAgICAgaWYgKG5iID09PSBidWYubGVuZ3RoKSB7XG4gICAgICAgICsrYztcbiAgICAgICAgaWYgKHAubmV4dCkgbGlzdC5oZWFkID0gcC5uZXh0O2Vsc2UgbGlzdC5oZWFkID0gbGlzdC50YWlsID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpc3QuaGVhZCA9IHA7XG4gICAgICAgIHAuZGF0YSA9IGJ1Zi5zbGljZShuYik7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgKytjO1xuICB9XG4gIGxpc3QubGVuZ3RoIC09IGM7XG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGVuZFJlYWRhYmxlKHN0cmVhbSkge1xuICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG5cbiAgLy8gSWYgd2UgZ2V0IGhlcmUgYmVmb3JlIGNvbnN1bWluZyBhbGwgdGhlIGJ5dGVzLCB0aGVuIHRoYXQgaXMgYVxuICAvLyBidWcgaW4gbm9kZS4gIFNob3VsZCBuZXZlciBoYXBwZW4uXG4gIGlmIChzdGF0ZS5sZW5ndGggPiAwKSB0aHJvdyBuZXcgRXJyb3IoJ1wiZW5kUmVhZGFibGUoKVwiIGNhbGxlZCBvbiBub24tZW1wdHkgc3RyZWFtJyk7XG5cbiAgaWYgKCFzdGF0ZS5lbmRFbWl0dGVkKSB7XG4gICAgc3RhdGUuZW5kZWQgPSB0cnVlO1xuICAgIHBuYS5uZXh0VGljayhlbmRSZWFkYWJsZU5ULCBzdGF0ZSwgc3RyZWFtKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBlbmRSZWFkYWJsZU5UKHN0YXRlLCBzdHJlYW0pIHtcbiAgLy8gQ2hlY2sgdGhhdCB3ZSBkaWRuJ3QgZ2V0IG9uZSBsYXN0IHVuc2hpZnQuXG4gIGlmICghc3RhdGUuZW5kRW1pdHRlZCAmJiBzdGF0ZS5sZW5ndGggPT09IDApIHtcbiAgICBzdGF0ZS5lbmRFbWl0dGVkID0gdHJ1ZTtcbiAgICBzdHJlYW0ucmVhZGFibGUgPSBmYWxzZTtcbiAgICBzdHJlYW0uZW1pdCgnZW5kJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5kZXhPZih4cywgeCkge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGlmICh4c1tpXSA9PT0geCkgcmV0dXJuIGk7XG4gIH1cbiAgcmV0dXJuIC0xO1xufSIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4vLyBhIHRyYW5zZm9ybSBzdHJlYW0gaXMgYSByZWFkYWJsZS93cml0YWJsZSBzdHJlYW0gd2hlcmUgeW91IGRvXG4vLyBzb21ldGhpbmcgd2l0aCB0aGUgZGF0YS4gIFNvbWV0aW1lcyBpdCdzIGNhbGxlZCBhIFwiZmlsdGVyXCIsXG4vLyBidXQgdGhhdCdzIG5vdCBhIGdyZWF0IG5hbWUgZm9yIGl0LCBzaW5jZSB0aGF0IGltcGxpZXMgYSB0aGluZyB3aGVyZVxuLy8gc29tZSBiaXRzIHBhc3MgdGhyb3VnaCwgYW5kIG90aGVycyBhcmUgc2ltcGx5IGlnbm9yZWQuICAoVGhhdCB3b3VsZFxuLy8gYmUgYSB2YWxpZCBleGFtcGxlIG9mIGEgdHJhbnNmb3JtLCBvZiBjb3Vyc2UuKVxuLy9cbi8vIFdoaWxlIHRoZSBvdXRwdXQgaXMgY2F1c2FsbHkgcmVsYXRlZCB0byB0aGUgaW5wdXQsIGl0J3Mgbm90IGFcbi8vIG5lY2Vzc2FyaWx5IHN5bW1ldHJpYyBvciBzeW5jaHJvbm91cyB0cmFuc2Zvcm1hdGlvbi4gIEZvciBleGFtcGxlLFxuLy8gYSB6bGliIHN0cmVhbSBtaWdodCB0YWtlIG11bHRpcGxlIHBsYWluLXRleHQgd3JpdGVzKCksIGFuZCB0aGVuXG4vLyBlbWl0IGEgc2luZ2xlIGNvbXByZXNzZWQgY2h1bmsgc29tZSB0aW1lIGluIHRoZSBmdXR1cmUuXG4vL1xuLy8gSGVyZSdzIGhvdyB0aGlzIHdvcmtzOlxuLy9cbi8vIFRoZSBUcmFuc2Zvcm0gc3RyZWFtIGhhcyBhbGwgdGhlIGFzcGVjdHMgb2YgdGhlIHJlYWRhYmxlIGFuZCB3cml0YWJsZVxuLy8gc3RyZWFtIGNsYXNzZXMuICBXaGVuIHlvdSB3cml0ZShjaHVuayksIHRoYXQgY2FsbHMgX3dyaXRlKGNodW5rLGNiKVxuLy8gaW50ZXJuYWxseSwgYW5kIHJldHVybnMgZmFsc2UgaWYgdGhlcmUncyBhIGxvdCBvZiBwZW5kaW5nIHdyaXRlc1xuLy8gYnVmZmVyZWQgdXAuICBXaGVuIHlvdSBjYWxsIHJlYWQoKSwgdGhhdCBjYWxscyBfcmVhZChuKSB1bnRpbFxuLy8gdGhlcmUncyBlbm91Z2ggcGVuZGluZyByZWFkYWJsZSBkYXRhIGJ1ZmZlcmVkIHVwLlxuLy9cbi8vIEluIGEgdHJhbnNmb3JtIHN0cmVhbSwgdGhlIHdyaXR0ZW4gZGF0YSBpcyBwbGFjZWQgaW4gYSBidWZmZXIuICBXaGVuXG4vLyBfcmVhZChuKSBpcyBjYWxsZWQsIGl0IHRyYW5zZm9ybXMgdGhlIHF1ZXVlZCB1cCBkYXRhLCBjYWxsaW5nIHRoZVxuLy8gYnVmZmVyZWQgX3dyaXRlIGNiJ3MgYXMgaXQgY29uc3VtZXMgY2h1bmtzLiAgSWYgY29uc3VtaW5nIGEgc2luZ2xlXG4vLyB3cml0dGVuIGNodW5rIHdvdWxkIHJlc3VsdCBpbiBtdWx0aXBsZSBvdXRwdXQgY2h1bmtzLCB0aGVuIHRoZSBmaXJzdFxuLy8gb3V0cHV0dGVkIGJpdCBjYWxscyB0aGUgcmVhZGNiLCBhbmQgc3Vic2VxdWVudCBjaHVua3MganVzdCBnbyBpbnRvXG4vLyB0aGUgcmVhZCBidWZmZXIsIGFuZCB3aWxsIGNhdXNlIGl0IHRvIGVtaXQgJ3JlYWRhYmxlJyBpZiBuZWNlc3NhcnkuXG4vL1xuLy8gVGhpcyB3YXksIGJhY2stcHJlc3N1cmUgaXMgYWN0dWFsbHkgZGV0ZXJtaW5lZCBieSB0aGUgcmVhZGluZyBzaWRlLFxuLy8gc2luY2UgX3JlYWQgaGFzIHRvIGJlIGNhbGxlZCB0byBzdGFydCBwcm9jZXNzaW5nIGEgbmV3IGNodW5rLiAgSG93ZXZlcixcbi8vIGEgcGF0aG9sb2dpY2FsIGluZmxhdGUgdHlwZSBvZiB0cmFuc2Zvcm0gY2FuIGNhdXNlIGV4Y2Vzc2l2ZSBidWZmZXJpbmdcbi8vIGhlcmUuICBGb3IgZXhhbXBsZSwgaW1hZ2luZSBhIHN0cmVhbSB3aGVyZSBldmVyeSBieXRlIG9mIGlucHV0IGlzXG4vLyBpbnRlcnByZXRlZCBhcyBhbiBpbnRlZ2VyIGZyb20gMC0yNTUsIGFuZCB0aGVuIHJlc3VsdHMgaW4gdGhhdCBtYW55XG4vLyBieXRlcyBvZiBvdXRwdXQuICBXcml0aW5nIHRoZSA0IGJ5dGVzIHtmZixmZixmZixmZn0gd291bGQgcmVzdWx0IGluXG4vLyAxa2Igb2YgZGF0YSBiZWluZyBvdXRwdXQuICBJbiB0aGlzIGNhc2UsIHlvdSBjb3VsZCB3cml0ZSBhIHZlcnkgc21hbGxcbi8vIGFtb3VudCBvZiBpbnB1dCwgYW5kIGVuZCB1cCB3aXRoIGEgdmVyeSBsYXJnZSBhbW91bnQgb2Ygb3V0cHV0LiAgSW5cbi8vIHN1Y2ggYSBwYXRob2xvZ2ljYWwgaW5mbGF0aW5nIG1lY2hhbmlzbSwgdGhlcmUnZCBiZSBubyB3YXkgdG8gdGVsbFxuLy8gdGhlIHN5c3RlbSB0byBzdG9wIGRvaW5nIHRoZSB0cmFuc2Zvcm0uICBBIHNpbmdsZSA0TUIgd3JpdGUgY291bGRcbi8vIGNhdXNlIHRoZSBzeXN0ZW0gdG8gcnVuIG91dCBvZiBtZW1vcnkuXG4vL1xuLy8gSG93ZXZlciwgZXZlbiBpbiBzdWNoIGEgcGF0aG9sb2dpY2FsIGNhc2UsIG9ubHkgYSBzaW5nbGUgd3JpdHRlbiBjaHVua1xuLy8gd291bGQgYmUgY29uc3VtZWQsIGFuZCB0aGVuIHRoZSByZXN0IHdvdWxkIHdhaXQgKHVuLXRyYW5zZm9ybWVkKSB1bnRpbFxuLy8gdGhlIHJlc3VsdHMgb2YgdGhlIHByZXZpb3VzIHRyYW5zZm9ybWVkIGNodW5rIHdlcmUgY29uc3VtZWQuXG5cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBUcmFuc2Zvcm07XG5cbnZhciBEdXBsZXggPSByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgdXRpbCA9IE9iamVjdC5jcmVhdGUocmVxdWlyZSgnY29yZS11dGlsLWlzJykpO1xudXRpbC5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxudXRpbC5pbmhlcml0cyhUcmFuc2Zvcm0sIER1cGxleCk7XG5cbmZ1bmN0aW9uIGFmdGVyVHJhbnNmb3JtKGVyLCBkYXRhKSB7XG4gIHZhciB0cyA9IHRoaXMuX3RyYW5zZm9ybVN0YXRlO1xuICB0cy50cmFuc2Zvcm1pbmcgPSBmYWxzZTtcblxuICB2YXIgY2IgPSB0cy53cml0ZWNiO1xuXG4gIGlmICghY2IpIHtcbiAgICByZXR1cm4gdGhpcy5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignd3JpdGUgY2FsbGJhY2sgY2FsbGVkIG11bHRpcGxlIHRpbWVzJykpO1xuICB9XG5cbiAgdHMud3JpdGVjaHVuayA9IG51bGw7XG4gIHRzLndyaXRlY2IgPSBudWxsO1xuXG4gIGlmIChkYXRhICE9IG51bGwpIC8vIHNpbmdsZSBlcXVhbHMgY2hlY2sgZm9yIGJvdGggYG51bGxgIGFuZCBgdW5kZWZpbmVkYFxuICAgIHRoaXMucHVzaChkYXRhKTtcblxuICBjYihlcik7XG5cbiAgdmFyIHJzID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgcnMucmVhZGluZyA9IGZhbHNlO1xuICBpZiAocnMubmVlZFJlYWRhYmxlIHx8IHJzLmxlbmd0aCA8IHJzLmhpZ2hXYXRlck1hcmspIHtcbiAgICB0aGlzLl9yZWFkKHJzLmhpZ2hXYXRlck1hcmspO1xuICB9XG59XG5cbmZ1bmN0aW9uIFRyYW5zZm9ybShvcHRpb25zKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBUcmFuc2Zvcm0pKSByZXR1cm4gbmV3IFRyYW5zZm9ybShvcHRpb25zKTtcblxuICBEdXBsZXguY2FsbCh0aGlzLCBvcHRpb25zKTtcblxuICB0aGlzLl90cmFuc2Zvcm1TdGF0ZSA9IHtcbiAgICBhZnRlclRyYW5zZm9ybTogYWZ0ZXJUcmFuc2Zvcm0uYmluZCh0aGlzKSxcbiAgICBuZWVkVHJhbnNmb3JtOiBmYWxzZSxcbiAgICB0cmFuc2Zvcm1pbmc6IGZhbHNlLFxuICAgIHdyaXRlY2I6IG51bGwsXG4gICAgd3JpdGVjaHVuazogbnVsbCxcbiAgICB3cml0ZWVuY29kaW5nOiBudWxsXG4gIH07XG5cbiAgLy8gc3RhcnQgb3V0IGFza2luZyBmb3IgYSByZWFkYWJsZSBldmVudCBvbmNlIGRhdGEgaXMgdHJhbnNmb3JtZWQuXG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcblxuICAvLyB3ZSBoYXZlIGltcGxlbWVudGVkIHRoZSBfcmVhZCBtZXRob2QsIGFuZCBkb25lIHRoZSBvdGhlciB0aGluZ3NcbiAgLy8gdGhhdCBSZWFkYWJsZSB3YW50cyBiZWZvcmUgdGhlIGZpcnN0IF9yZWFkIGNhbGwsIHNvIHVuc2V0IHRoZVxuICAvLyBzeW5jIGd1YXJkIGZsYWcuXG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUuc3luYyA9IGZhbHNlO1xuXG4gIGlmIChvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnRyYW5zZm9ybSA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fdHJhbnNmb3JtID0gb3B0aW9ucy50cmFuc2Zvcm07XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuZmx1c2ggPT09ICdmdW5jdGlvbicpIHRoaXMuX2ZsdXNoID0gb3B0aW9ucy5mbHVzaDtcbiAgfVxuXG4gIC8vIFdoZW4gdGhlIHdyaXRhYmxlIHNpZGUgZmluaXNoZXMsIHRoZW4gZmx1c2ggb3V0IGFueXRoaW5nIHJlbWFpbmluZy5cbiAgdGhpcy5vbigncHJlZmluaXNoJywgcHJlZmluaXNoKTtcbn1cblxuZnVuY3Rpb24gcHJlZmluaXNoKCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIGlmICh0eXBlb2YgdGhpcy5fZmx1c2ggPT09ICdmdW5jdGlvbicpIHtcbiAgICB0aGlzLl9mbHVzaChmdW5jdGlvbiAoZXIsIGRhdGEpIHtcbiAgICAgIGRvbmUoX3RoaXMsIGVyLCBkYXRhKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBkb25lKHRoaXMsIG51bGwsIG51bGwpO1xuICB9XG59XG5cblRyYW5zZm9ybS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcpIHtcbiAgdGhpcy5fdHJhbnNmb3JtU3RhdGUubmVlZFRyYW5zZm9ybSA9IGZhbHNlO1xuICByZXR1cm4gRHVwbGV4LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcywgY2h1bmssIGVuY29kaW5nKTtcbn07XG5cbi8vIFRoaXMgaXMgdGhlIHBhcnQgd2hlcmUgeW91IGRvIHN0dWZmIVxuLy8gb3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiBpbiBpbXBsZW1lbnRhdGlvbiBjbGFzc2VzLlxuLy8gJ2NodW5rJyBpcyBhbiBpbnB1dCBjaHVuay5cbi8vXG4vLyBDYWxsIGBwdXNoKG5ld0NodW5rKWAgdG8gcGFzcyBhbG9uZyB0cmFuc2Zvcm1lZCBvdXRwdXRcbi8vIHRvIHRoZSByZWFkYWJsZSBzaWRlLiAgWW91IG1heSBjYWxsICdwdXNoJyB6ZXJvIG9yIG1vcmUgdGltZXMuXG4vL1xuLy8gQ2FsbCBgY2IoZXJyKWAgd2hlbiB5b3UgYXJlIGRvbmUgd2l0aCB0aGlzIGNodW5rLiAgSWYgeW91IHBhc3Ncbi8vIGFuIGVycm9yLCB0aGVuIHRoYXQnbGwgcHV0IHRoZSBodXJ0IG9uIHRoZSB3aG9sZSBvcGVyYXRpb24uICBJZiB5b3Vcbi8vIG5ldmVyIGNhbGwgY2IoKSwgdGhlbiB5b3UnbGwgbmV2ZXIgZ2V0IGFub3RoZXIgY2h1bmsuXG5UcmFuc2Zvcm0ucHJvdG90eXBlLl90cmFuc2Zvcm0gPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB0aHJvdyBuZXcgRXJyb3IoJ190cmFuc2Zvcm0oKSBpcyBub3QgaW1wbGVtZW50ZWQnKTtcbn07XG5cblRyYW5zZm9ybS5wcm90b3R5cGUuX3dyaXRlID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgdmFyIHRzID0gdGhpcy5fdHJhbnNmb3JtU3RhdGU7XG4gIHRzLndyaXRlY2IgPSBjYjtcbiAgdHMud3JpdGVjaHVuayA9IGNodW5rO1xuICB0cy53cml0ZWVuY29kaW5nID0gZW5jb2Rpbmc7XG4gIGlmICghdHMudHJhbnNmb3JtaW5nKSB7XG4gICAgdmFyIHJzID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgICBpZiAodHMubmVlZFRyYW5zZm9ybSB8fCBycy5uZWVkUmVhZGFibGUgfHwgcnMubGVuZ3RoIDwgcnMuaGlnaFdhdGVyTWFyaykgdGhpcy5fcmVhZChycy5oaWdoV2F0ZXJNYXJrKTtcbiAgfVxufTtcblxuLy8gRG9lc24ndCBtYXR0ZXIgd2hhdCB0aGUgYXJncyBhcmUgaGVyZS5cbi8vIF90cmFuc2Zvcm0gZG9lcyBhbGwgdGhlIHdvcmsuXG4vLyBUaGF0IHdlIGdvdCBoZXJlIG1lYW5zIHRoYXQgdGhlIHJlYWRhYmxlIHNpZGUgd2FudHMgbW9yZSBkYXRhLlxuVHJhbnNmb3JtLnByb3RvdHlwZS5fcmVhZCA9IGZ1bmN0aW9uIChuKSB7XG4gIHZhciB0cyA9IHRoaXMuX3RyYW5zZm9ybVN0YXRlO1xuXG4gIGlmICh0cy53cml0ZWNodW5rICE9PSBudWxsICYmIHRzLndyaXRlY2IgJiYgIXRzLnRyYW5zZm9ybWluZykge1xuICAgIHRzLnRyYW5zZm9ybWluZyA9IHRydWU7XG4gICAgdGhpcy5fdHJhbnNmb3JtKHRzLndyaXRlY2h1bmssIHRzLndyaXRlZW5jb2RpbmcsIHRzLmFmdGVyVHJhbnNmb3JtKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBtYXJrIHRoYXQgd2UgbmVlZCBhIHRyYW5zZm9ybSwgc28gdGhhdCBhbnkgZGF0YSB0aGF0IGNvbWVzIGluXG4gICAgLy8gd2lsbCBnZXQgcHJvY2Vzc2VkLCBub3cgdGhhdCB3ZSd2ZSBhc2tlZCBmb3IgaXQuXG4gICAgdHMubmVlZFRyYW5zZm9ybSA9IHRydWU7XG4gIH1cbn07XG5cblRyYW5zZm9ybS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoZXJyLCBjYikge1xuICB2YXIgX3RoaXMyID0gdGhpcztcblxuICBEdXBsZXgucHJvdG90eXBlLl9kZXN0cm95LmNhbGwodGhpcywgZXJyLCBmdW5jdGlvbiAoZXJyMikge1xuICAgIGNiKGVycjIpO1xuICAgIF90aGlzMi5lbWl0KCdjbG9zZScpO1xuICB9KTtcbn07XG5cbmZ1bmN0aW9uIGRvbmUoc3RyZWFtLCBlciwgZGF0YSkge1xuICBpZiAoZXIpIHJldHVybiBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7XG5cbiAgaWYgKGRhdGEgIT0gbnVsbCkgLy8gc2luZ2xlIGVxdWFscyBjaGVjayBmb3IgYm90aCBgbnVsbGAgYW5kIGB1bmRlZmluZWRgXG4gICAgc3RyZWFtLnB1c2goZGF0YSk7XG5cbiAgLy8gaWYgdGhlcmUncyBub3RoaW5nIGluIHRoZSB3cml0ZSBidWZmZXIsIHRoZW4gdGhhdCBtZWFuc1xuICAvLyB0aGF0IG5vdGhpbmcgbW9yZSB3aWxsIGV2ZXIgYmUgcHJvdmlkZWRcbiAgaWYgKHN0cmVhbS5fd3JpdGFibGVTdGF0ZS5sZW5ndGgpIHRocm93IG5ldyBFcnJvcignQ2FsbGluZyB0cmFuc2Zvcm0gZG9uZSB3aGVuIHdzLmxlbmd0aCAhPSAwJyk7XG5cbiAgaWYgKHN0cmVhbS5fdHJhbnNmb3JtU3RhdGUudHJhbnNmb3JtaW5nKSB0aHJvdyBuZXcgRXJyb3IoJ0NhbGxpbmcgdHJhbnNmb3JtIGRvbmUgd2hlbiBzdGlsbCB0cmFuc2Zvcm1pbmcnKTtcblxuICByZXR1cm4gc3RyZWFtLnB1c2gobnVsbCk7XG59IiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbi8vIEEgYml0IHNpbXBsZXIgdGhhbiByZWFkYWJsZSBzdHJlYW1zLlxuLy8gSW1wbGVtZW50IGFuIGFzeW5jIC5fd3JpdGUoY2h1bmssIGVuY29kaW5nLCBjYiksIGFuZCBpdCdsbCBoYW5kbGUgYWxsXG4vLyB0aGUgZHJhaW4gZXZlbnQgZW1pc3Npb24gYW5kIGJ1ZmZlcmluZy5cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xuXG52YXIgcG5hID0gcmVxdWlyZSgncHJvY2Vzcy1uZXh0aWNrLWFyZ3MnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFdyaXRhYmxlO1xuXG4vKiA8cmVwbGFjZW1lbnQ+ICovXG5mdW5jdGlvbiBXcml0ZVJlcShjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIHRoaXMuY2h1bmsgPSBjaHVuaztcbiAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nO1xuICB0aGlzLmNhbGxiYWNrID0gY2I7XG4gIHRoaXMubmV4dCA9IG51bGw7XG59XG5cbi8vIEl0IHNlZW1zIGEgbGlua2VkIGxpc3QgYnV0IGl0IGlzIG5vdFxuLy8gdGhlcmUgd2lsbCBiZSBvbmx5IDIgb2YgdGhlc2UgZm9yIGVhY2ggc3RyZWFtXG5mdW5jdGlvbiBDb3JrZWRSZXF1ZXN0KHN0YXRlKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgdGhpcy5uZXh0ID0gbnVsbDtcbiAgdGhpcy5lbnRyeSA9IG51bGw7XG4gIHRoaXMuZmluaXNoID0gZnVuY3Rpb24gKCkge1xuICAgIG9uQ29ya2VkRmluaXNoKF90aGlzLCBzdGF0ZSk7XG4gIH07XG59XG4vKiA8L3JlcGxhY2VtZW50PiAqL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIGFzeW5jV3JpdGUgPSAhcHJvY2Vzcy5icm93c2VyICYmIFsndjAuMTAnLCAndjAuOS4nXS5pbmRleE9mKHByb2Nlc3MudmVyc2lvbi5zbGljZSgwLCA1KSkgPiAtMSA/IHNldEltbWVkaWF0ZSA6IHBuYS5uZXh0VGljaztcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIER1cGxleDtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5Xcml0YWJsZS5Xcml0YWJsZVN0YXRlID0gV3JpdGFibGVTdGF0ZTtcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciB1dGlsID0gT2JqZWN0LmNyZWF0ZShyZXF1aXJlKCdjb3JlLXV0aWwtaXMnKSk7XG51dGlsLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIGludGVybmFsVXRpbCA9IHtcbiAgZGVwcmVjYXRlOiByZXF1aXJlKCd1dGlsLWRlcHJlY2F0ZScpXG59O1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgU3RyZWFtID0gcmVxdWlyZSgnLi9pbnRlcm5hbC9zdHJlYW1zL3N0cmVhbScpO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbi8qPHJlcGxhY2VtZW50PiovXG5cbnZhciBCdWZmZXIgPSByZXF1aXJlKCdzYWZlLWJ1ZmZlcicpLkJ1ZmZlcjtcbnZhciBPdXJVaW50OEFycmF5ID0gZ2xvYmFsLlVpbnQ4QXJyYXkgfHwgZnVuY3Rpb24gKCkge307XG5mdW5jdGlvbiBfdWludDhBcnJheVRvQnVmZmVyKGNodW5rKSB7XG4gIHJldHVybiBCdWZmZXIuZnJvbShjaHVuayk7XG59XG5mdW5jdGlvbiBfaXNVaW50OEFycmF5KG9iaikge1xuICByZXR1cm4gQnVmZmVyLmlzQnVmZmVyKG9iaikgfHwgb2JqIGluc3RhbmNlb2YgT3VyVWludDhBcnJheTtcbn1cblxuLyo8L3JlcGxhY2VtZW50PiovXG5cbnZhciBkZXN0cm95SW1wbCA9IHJlcXVpcmUoJy4vaW50ZXJuYWwvc3RyZWFtcy9kZXN0cm95Jyk7XG5cbnV0aWwuaW5oZXJpdHMoV3JpdGFibGUsIFN0cmVhbSk7XG5cbmZ1bmN0aW9uIG5vcCgpIHt9XG5cbmZ1bmN0aW9uIFdyaXRhYmxlU3RhdGUob3B0aW9ucywgc3RyZWFtKSB7XG4gIER1cGxleCA9IER1cGxleCB8fCByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgLy8gRHVwbGV4IHN0cmVhbXMgYXJlIGJvdGggcmVhZGFibGUgYW5kIHdyaXRhYmxlLCBidXQgc2hhcmVcbiAgLy8gdGhlIHNhbWUgb3B0aW9ucyBvYmplY3QuXG4gIC8vIEhvd2V2ZXIsIHNvbWUgY2FzZXMgcmVxdWlyZSBzZXR0aW5nIG9wdGlvbnMgdG8gZGlmZmVyZW50XG4gIC8vIHZhbHVlcyBmb3IgdGhlIHJlYWRhYmxlIGFuZCB0aGUgd3JpdGFibGUgc2lkZXMgb2YgdGhlIGR1cGxleCBzdHJlYW0uXG4gIC8vIFRoZXNlIG9wdGlvbnMgY2FuIGJlIHByb3ZpZGVkIHNlcGFyYXRlbHkgYXMgcmVhZGFibGVYWFggYW5kIHdyaXRhYmxlWFhYLlxuICB2YXIgaXNEdXBsZXggPSBzdHJlYW0gaW5zdGFuY2VvZiBEdXBsZXg7XG5cbiAgLy8gb2JqZWN0IHN0cmVhbSBmbGFnIHRvIGluZGljYXRlIHdoZXRoZXIgb3Igbm90IHRoaXMgc3RyZWFtXG4gIC8vIGNvbnRhaW5zIGJ1ZmZlcnMgb3Igb2JqZWN0cy5cbiAgdGhpcy5vYmplY3RNb2RlID0gISFvcHRpb25zLm9iamVjdE1vZGU7XG5cbiAgaWYgKGlzRHVwbGV4KSB0aGlzLm9iamVjdE1vZGUgPSB0aGlzLm9iamVjdE1vZGUgfHwgISFvcHRpb25zLndyaXRhYmxlT2JqZWN0TW9kZTtcblxuICAvLyB0aGUgcG9pbnQgYXQgd2hpY2ggd3JpdGUoKSBzdGFydHMgcmV0dXJuaW5nIGZhbHNlXG4gIC8vIE5vdGU6IDAgaXMgYSB2YWxpZCB2YWx1ZSwgbWVhbnMgdGhhdCB3ZSBhbHdheXMgcmV0dXJuIGZhbHNlIGlmXG4gIC8vIHRoZSBlbnRpcmUgYnVmZmVyIGlzIG5vdCBmbHVzaGVkIGltbWVkaWF0ZWx5IG9uIHdyaXRlKClcbiAgdmFyIGh3bSA9IG9wdGlvbnMuaGlnaFdhdGVyTWFyaztcbiAgdmFyIHdyaXRhYmxlSHdtID0gb3B0aW9ucy53cml0YWJsZUhpZ2hXYXRlck1hcms7XG4gIHZhciBkZWZhdWx0SHdtID0gdGhpcy5vYmplY3RNb2RlID8gMTYgOiAxNiAqIDEwMjQ7XG5cbiAgaWYgKGh3bSB8fCBod20gPT09IDApIHRoaXMuaGlnaFdhdGVyTWFyayA9IGh3bTtlbHNlIGlmIChpc0R1cGxleCAmJiAod3JpdGFibGVId20gfHwgd3JpdGFibGVId20gPT09IDApKSB0aGlzLmhpZ2hXYXRlck1hcmsgPSB3cml0YWJsZUh3bTtlbHNlIHRoaXMuaGlnaFdhdGVyTWFyayA9IGRlZmF1bHRId207XG5cbiAgLy8gY2FzdCB0byBpbnRzLlxuICB0aGlzLmhpZ2hXYXRlck1hcmsgPSBNYXRoLmZsb29yKHRoaXMuaGlnaFdhdGVyTWFyayk7XG5cbiAgLy8gaWYgX2ZpbmFsIGhhcyBiZWVuIGNhbGxlZFxuICB0aGlzLmZpbmFsQ2FsbGVkID0gZmFsc2U7XG5cbiAgLy8gZHJhaW4gZXZlbnQgZmxhZy5cbiAgdGhpcy5uZWVkRHJhaW4gPSBmYWxzZTtcbiAgLy8gYXQgdGhlIHN0YXJ0IG9mIGNhbGxpbmcgZW5kKClcbiAgdGhpcy5lbmRpbmcgPSBmYWxzZTtcbiAgLy8gd2hlbiBlbmQoKSBoYXMgYmVlbiBjYWxsZWQsIGFuZCByZXR1cm5lZFxuICB0aGlzLmVuZGVkID0gZmFsc2U7XG4gIC8vIHdoZW4gJ2ZpbmlzaCcgaXMgZW1pdHRlZFxuICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7XG5cbiAgLy8gaGFzIGl0IGJlZW4gZGVzdHJveWVkXG4gIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7XG5cbiAgLy8gc2hvdWxkIHdlIGRlY29kZSBzdHJpbmdzIGludG8gYnVmZmVycyBiZWZvcmUgcGFzc2luZyB0byBfd3JpdGU/XG4gIC8vIHRoaXMgaXMgaGVyZSBzbyB0aGF0IHNvbWUgbm9kZS1jb3JlIHN0cmVhbXMgY2FuIG9wdGltaXplIHN0cmluZ1xuICAvLyBoYW5kbGluZyBhdCBhIGxvd2VyIGxldmVsLlxuICB2YXIgbm9EZWNvZGUgPSBvcHRpb25zLmRlY29kZVN0cmluZ3MgPT09IGZhbHNlO1xuICB0aGlzLmRlY29kZVN0cmluZ3MgPSAhbm9EZWNvZGU7XG5cbiAgLy8gQ3J5cHRvIGlzIGtpbmQgb2Ygb2xkIGFuZCBjcnVzdHkuICBIaXN0b3JpY2FsbHksIGl0cyBkZWZhdWx0IHN0cmluZ1xuICAvLyBlbmNvZGluZyBpcyAnYmluYXJ5JyBzbyB3ZSBoYXZlIHRvIG1ha2UgdGhpcyBjb25maWd1cmFibGUuXG4gIC8vIEV2ZXJ5dGhpbmcgZWxzZSBpbiB0aGUgdW5pdmVyc2UgdXNlcyAndXRmOCcsIHRob3VnaC5cbiAgdGhpcy5kZWZhdWx0RW5jb2RpbmcgPSBvcHRpb25zLmRlZmF1bHRFbmNvZGluZyB8fCAndXRmOCc7XG5cbiAgLy8gbm90IGFuIGFjdHVhbCBidWZmZXIgd2Uga2VlcCB0cmFjayBvZiwgYnV0IGEgbWVhc3VyZW1lbnRcbiAgLy8gb2YgaG93IG11Y2ggd2UncmUgd2FpdGluZyB0byBnZXQgcHVzaGVkIHRvIHNvbWUgdW5kZXJseWluZ1xuICAvLyBzb2NrZXQgb3IgZmlsZS5cbiAgdGhpcy5sZW5ndGggPSAwO1xuXG4gIC8vIGEgZmxhZyB0byBzZWUgd2hlbiB3ZSdyZSBpbiB0aGUgbWlkZGxlIG9mIGEgd3JpdGUuXG4gIHRoaXMud3JpdGluZyA9IGZhbHNlO1xuXG4gIC8vIHdoZW4gdHJ1ZSBhbGwgd3JpdGVzIHdpbGwgYmUgYnVmZmVyZWQgdW50aWwgLnVuY29yaygpIGNhbGxcbiAgdGhpcy5jb3JrZWQgPSAwO1xuXG4gIC8vIGEgZmxhZyB0byBiZSBhYmxlIHRvIHRlbGwgaWYgdGhlIG9ud3JpdGUgY2IgaXMgY2FsbGVkIGltbWVkaWF0ZWx5LFxuICAvLyBvciBvbiBhIGxhdGVyIHRpY2suICBXZSBzZXQgdGhpcyB0byB0cnVlIGF0IGZpcnN0LCBiZWNhdXNlIGFueVxuICAvLyBhY3Rpb25zIHRoYXQgc2hvdWxkbid0IGhhcHBlbiB1bnRpbCBcImxhdGVyXCIgc2hvdWxkIGdlbmVyYWxseSBhbHNvXG4gIC8vIG5vdCBoYXBwZW4gYmVmb3JlIHRoZSBmaXJzdCB3cml0ZSBjYWxsLlxuICB0aGlzLnN5bmMgPSB0cnVlO1xuXG4gIC8vIGEgZmxhZyB0byBrbm93IGlmIHdlJ3JlIHByb2Nlc3NpbmcgcHJldmlvdXNseSBidWZmZXJlZCBpdGVtcywgd2hpY2hcbiAgLy8gbWF5IGNhbGwgdGhlIF93cml0ZSgpIGNhbGxiYWNrIGluIHRoZSBzYW1lIHRpY2ssIHNvIHRoYXQgd2UgZG9uJ3RcbiAgLy8gZW5kIHVwIGluIGFuIG92ZXJsYXBwZWQgb253cml0ZSBzaXR1YXRpb24uXG4gIHRoaXMuYnVmZmVyUHJvY2Vzc2luZyA9IGZhbHNlO1xuXG4gIC8vIHRoZSBjYWxsYmFjayB0aGF0J3MgcGFzc2VkIHRvIF93cml0ZShjaHVuayxjYilcbiAgdGhpcy5vbndyaXRlID0gZnVuY3Rpb24gKGVyKSB7XG4gICAgb253cml0ZShzdHJlYW0sIGVyKTtcbiAgfTtcblxuICAvLyB0aGUgY2FsbGJhY2sgdGhhdCB0aGUgdXNlciBzdXBwbGllcyB0byB3cml0ZShjaHVuayxlbmNvZGluZyxjYilcbiAgdGhpcy53cml0ZWNiID0gbnVsbDtcblxuICAvLyB0aGUgYW1vdW50IHRoYXQgaXMgYmVpbmcgd3JpdHRlbiB3aGVuIF93cml0ZSBpcyBjYWxsZWQuXG4gIHRoaXMud3JpdGVsZW4gPSAwO1xuXG4gIHRoaXMuYnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDtcbiAgdGhpcy5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDtcblxuICAvLyBudW1iZXIgb2YgcGVuZGluZyB1c2VyLXN1cHBsaWVkIHdyaXRlIGNhbGxiYWNrc1xuICAvLyB0aGlzIG11c3QgYmUgMCBiZWZvcmUgJ2ZpbmlzaCcgY2FuIGJlIGVtaXR0ZWRcbiAgdGhpcy5wZW5kaW5nY2IgPSAwO1xuXG4gIC8vIGVtaXQgcHJlZmluaXNoIGlmIHRoZSBvbmx5IHRoaW5nIHdlJ3JlIHdhaXRpbmcgZm9yIGlzIF93cml0ZSBjYnNcbiAgLy8gVGhpcyBpcyByZWxldmFudCBmb3Igc3luY2hyb25vdXMgVHJhbnNmb3JtIHN0cmVhbXNcbiAgdGhpcy5wcmVmaW5pc2hlZCA9IGZhbHNlO1xuXG4gIC8vIFRydWUgaWYgdGhlIGVycm9yIHdhcyBhbHJlYWR5IGVtaXR0ZWQgYW5kIHNob3VsZCBub3QgYmUgdGhyb3duIGFnYWluXG4gIHRoaXMuZXJyb3JFbWl0dGVkID0gZmFsc2U7XG5cbiAgLy8gY291bnQgYnVmZmVyZWQgcmVxdWVzdHNcbiAgdGhpcy5idWZmZXJlZFJlcXVlc3RDb3VudCA9IDA7XG5cbiAgLy8gYWxsb2NhdGUgdGhlIGZpcnN0IENvcmtlZFJlcXVlc3QsIHRoZXJlIGlzIGFsd2F5c1xuICAvLyBvbmUgYWxsb2NhdGVkIGFuZCBmcmVlIHRvIHVzZSwgYW5kIHdlIG1haW50YWluIGF0IG1vc3QgdHdvXG4gIHRoaXMuY29ya2VkUmVxdWVzdHNGcmVlID0gbmV3IENvcmtlZFJlcXVlc3QodGhpcyk7XG59XG5cbldyaXRhYmxlU3RhdGUucHJvdG90eXBlLmdldEJ1ZmZlciA9IGZ1bmN0aW9uIGdldEJ1ZmZlcigpIHtcbiAgdmFyIGN1cnJlbnQgPSB0aGlzLmJ1ZmZlcmVkUmVxdWVzdDtcbiAgdmFyIG91dCA9IFtdO1xuICB3aGlsZSAoY3VycmVudCkge1xuICAgIG91dC5wdXNoKGN1cnJlbnQpO1xuICAgIGN1cnJlbnQgPSBjdXJyZW50Lm5leHQ7XG4gIH1cbiAgcmV0dXJuIG91dDtcbn07XG5cbihmdW5jdGlvbiAoKSB7XG4gIHRyeSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdyaXRhYmxlU3RhdGUucHJvdG90eXBlLCAnYnVmZmVyJywge1xuICAgICAgZ2V0OiBpbnRlcm5hbFV0aWwuZGVwcmVjYXRlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QnVmZmVyKCk7XG4gICAgICB9LCAnX3dyaXRhYmxlU3RhdGUuYnVmZmVyIGlzIGRlcHJlY2F0ZWQuIFVzZSBfd3JpdGFibGVTdGF0ZS5nZXRCdWZmZXIgJyArICdpbnN0ZWFkLicsICdERVAwMDAzJylcbiAgICB9KTtcbiAgfSBjYXRjaCAoXykge31cbn0pKCk7XG5cbi8vIFRlc3QgX3dyaXRhYmxlU3RhdGUgZm9yIGluaGVyaXRhbmNlIHRvIGFjY291bnQgZm9yIER1cGxleCBzdHJlYW1zLFxuLy8gd2hvc2UgcHJvdG90eXBlIGNoYWluIG9ubHkgcG9pbnRzIHRvIFJlYWRhYmxlLlxudmFyIHJlYWxIYXNJbnN0YW5jZTtcbmlmICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC5oYXNJbnN0YW5jZSAmJiB0eXBlb2YgRnVuY3Rpb24ucHJvdG90eXBlW1N5bWJvbC5oYXNJbnN0YW5jZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgcmVhbEhhc0luc3RhbmNlID0gRnVuY3Rpb24ucHJvdG90eXBlW1N5bWJvbC5oYXNJbnN0YW5jZV07XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZSwgU3ltYm9sLmhhc0luc3RhbmNlLCB7XG4gICAgdmFsdWU6IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICAgIGlmIChyZWFsSGFzSW5zdGFuY2UuY2FsbCh0aGlzLCBvYmplY3QpKSByZXR1cm4gdHJ1ZTtcbiAgICAgIGlmICh0aGlzICE9PSBXcml0YWJsZSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICByZXR1cm4gb2JqZWN0ICYmIG9iamVjdC5fd3JpdGFibGVTdGF0ZSBpbnN0YW5jZW9mIFdyaXRhYmxlU3RhdGU7XG4gICAgfVxuICB9KTtcbn0gZWxzZSB7XG4gIHJlYWxIYXNJbnN0YW5jZSA9IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgdGhpcztcbiAgfTtcbn1cblxuZnVuY3Rpb24gV3JpdGFibGUob3B0aW9ucykge1xuICBEdXBsZXggPSBEdXBsZXggfHwgcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpO1xuXG4gIC8vIFdyaXRhYmxlIGN0b3IgaXMgYXBwbGllZCB0byBEdXBsZXhlcywgdG9vLlxuICAvLyBgcmVhbEhhc0luc3RhbmNlYCBpcyBuZWNlc3NhcnkgYmVjYXVzZSB1c2luZyBwbGFpbiBgaW5zdGFuY2VvZmBcbiAgLy8gd291bGQgcmV0dXJuIGZhbHNlLCBhcyBubyBgX3dyaXRhYmxlU3RhdGVgIHByb3BlcnR5IGlzIGF0dGFjaGVkLlxuXG4gIC8vIFRyeWluZyB0byB1c2UgdGhlIGN1c3RvbSBgaW5zdGFuY2VvZmAgZm9yIFdyaXRhYmxlIGhlcmUgd2lsbCBhbHNvIGJyZWFrIHRoZVxuICAvLyBOb2RlLmpzIExhenlUcmFuc2Zvcm0gaW1wbGVtZW50YXRpb24sIHdoaWNoIGhhcyBhIG5vbi10cml2aWFsIGdldHRlciBmb3JcbiAgLy8gYF93cml0YWJsZVN0YXRlYCB0aGF0IHdvdWxkIGxlYWQgdG8gaW5maW5pdGUgcmVjdXJzaW9uLlxuICBpZiAoIXJlYWxIYXNJbnN0YW5jZS5jYWxsKFdyaXRhYmxlLCB0aGlzKSAmJiAhKHRoaXMgaW5zdGFuY2VvZiBEdXBsZXgpKSB7XG4gICAgcmV0dXJuIG5ldyBXcml0YWJsZShvcHRpb25zKTtcbiAgfVxuXG4gIHRoaXMuX3dyaXRhYmxlU3RhdGUgPSBuZXcgV3JpdGFibGVTdGF0ZShvcHRpb25zLCB0aGlzKTtcblxuICAvLyBsZWdhY3kuXG4gIHRoaXMud3JpdGFibGUgPSB0cnVlO1xuXG4gIGlmIChvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLndyaXRlID09PSAnZnVuY3Rpb24nKSB0aGlzLl93cml0ZSA9IG9wdGlvbnMud3JpdGU7XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMud3JpdGV2ID09PSAnZnVuY3Rpb24nKSB0aGlzLl93cml0ZXYgPSBvcHRpb25zLndyaXRldjtcblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5kZXN0cm95ID09PSAnZnVuY3Rpb24nKSB0aGlzLl9kZXN0cm95ID0gb3B0aW9ucy5kZXN0cm95O1xuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmZpbmFsID09PSAnZnVuY3Rpb24nKSB0aGlzLl9maW5hbCA9IG9wdGlvbnMuZmluYWw7XG4gIH1cblxuICBTdHJlYW0uY2FsbCh0aGlzKTtcbn1cblxuLy8gT3RoZXJ3aXNlIHBlb3BsZSBjYW4gcGlwZSBXcml0YWJsZSBzdHJlYW1zLCB3aGljaCBpcyBqdXN0IHdyb25nLlxuV3JpdGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ0Nhbm5vdCBwaXBlLCBub3QgcmVhZGFibGUnKSk7XG59O1xuXG5mdW5jdGlvbiB3cml0ZUFmdGVyRW5kKHN0cmVhbSwgY2IpIHtcbiAgdmFyIGVyID0gbmV3IEVycm9yKCd3cml0ZSBhZnRlciBlbmQnKTtcbiAgLy8gVE9ETzogZGVmZXIgZXJyb3IgZXZlbnRzIGNvbnNpc3RlbnRseSBldmVyeXdoZXJlLCBub3QganVzdCB0aGUgY2JcbiAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpO1xuICBwbmEubmV4dFRpY2soY2IsIGVyKTtcbn1cblxuLy8gQ2hlY2tzIHRoYXQgYSB1c2VyLXN1cHBsaWVkIGNodW5rIGlzIHZhbGlkLCBlc3BlY2lhbGx5IGZvciB0aGUgcGFydGljdWxhclxuLy8gbW9kZSB0aGUgc3RyZWFtIGlzIGluLiBDdXJyZW50bHkgdGhpcyBtZWFucyB0aGF0IGBudWxsYCBpcyBuZXZlciBhY2NlcHRlZFxuLy8gYW5kIHVuZGVmaW5lZC9ub24tc3RyaW5nIHZhbHVlcyBhcmUgb25seSBhbGxvd2VkIGluIG9iamVjdCBtb2RlLlxuZnVuY3Rpb24gdmFsaWRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgY2IpIHtcbiAgdmFyIHZhbGlkID0gdHJ1ZTtcbiAgdmFyIGVyID0gZmFsc2U7XG5cbiAgaWYgKGNodW5rID09PSBudWxsKSB7XG4gICAgZXIgPSBuZXcgVHlwZUVycm9yKCdNYXkgbm90IHdyaXRlIG51bGwgdmFsdWVzIHRvIHN0cmVhbScpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBjaHVuayAhPT0gJ3N0cmluZycgJiYgY2h1bmsgIT09IHVuZGVmaW5lZCAmJiAhc3RhdGUub2JqZWN0TW9kZSkge1xuICAgIGVyID0gbmV3IFR5cGVFcnJvcignSW52YWxpZCBub24tc3RyaW5nL2J1ZmZlciBjaHVuaycpO1xuICB9XG4gIGlmIChlcikge1xuICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcbiAgICBwbmEubmV4dFRpY2soY2IsIGVyKTtcbiAgICB2YWxpZCA9IGZhbHNlO1xuICB9XG4gIHJldHVybiB2YWxpZDtcbn1cblxuV3JpdGFibGUucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcbiAgdmFyIHJldCA9IGZhbHNlO1xuICB2YXIgaXNCdWYgPSAhc3RhdGUub2JqZWN0TW9kZSAmJiBfaXNVaW50OEFycmF5KGNodW5rKTtcblxuICBpZiAoaXNCdWYgJiYgIUJ1ZmZlci5pc0J1ZmZlcihjaHVuaykpIHtcbiAgICBjaHVuayA9IF91aW50OEFycmF5VG9CdWZmZXIoY2h1bmspO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNiID0gZW5jb2Rpbmc7XG4gICAgZW5jb2RpbmcgPSBudWxsO1xuICB9XG5cbiAgaWYgKGlzQnVmKSBlbmNvZGluZyA9ICdidWZmZXInO2Vsc2UgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSBzdGF0ZS5kZWZhdWx0RW5jb2Rpbmc7XG5cbiAgaWYgKHR5cGVvZiBjYiAhPT0gJ2Z1bmN0aW9uJykgY2IgPSBub3A7XG5cbiAgaWYgKHN0YXRlLmVuZGVkKSB3cml0ZUFmdGVyRW5kKHRoaXMsIGNiKTtlbHNlIGlmIChpc0J1ZiB8fCB2YWxpZENodW5rKHRoaXMsIHN0YXRlLCBjaHVuaywgY2IpKSB7XG4gICAgc3RhdGUucGVuZGluZ2NiKys7XG4gICAgcmV0ID0gd3JpdGVPckJ1ZmZlcih0aGlzLCBzdGF0ZSwgaXNCdWYsIGNodW5rLCBlbmNvZGluZywgY2IpO1xuICB9XG5cbiAgcmV0dXJuIHJldDtcbn07XG5cbldyaXRhYmxlLnByb3RvdHlwZS5jb3JrID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlO1xuXG4gIHN0YXRlLmNvcmtlZCsrO1xufTtcblxuV3JpdGFibGUucHJvdG90eXBlLnVuY29yayA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcblxuICBpZiAoc3RhdGUuY29ya2VkKSB7XG4gICAgc3RhdGUuY29ya2VkLS07XG5cbiAgICBpZiAoIXN0YXRlLndyaXRpbmcgJiYgIXN0YXRlLmNvcmtlZCAmJiAhc3RhdGUuZmluaXNoZWQgJiYgIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgJiYgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0KSBjbGVhckJ1ZmZlcih0aGlzLCBzdGF0ZSk7XG4gIH1cbn07XG5cbldyaXRhYmxlLnByb3RvdHlwZS5zZXREZWZhdWx0RW5jb2RpbmcgPSBmdW5jdGlvbiBzZXREZWZhdWx0RW5jb2RpbmcoZW5jb2RpbmcpIHtcbiAgLy8gbm9kZTo6UGFyc2VFbmNvZGluZygpIHJlcXVpcmVzIGxvd2VyIGNhc2UuXG4gIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnKSBlbmNvZGluZyA9IGVuY29kaW5nLnRvTG93ZXJDYXNlKCk7XG4gIGlmICghKFsnaGV4JywgJ3V0ZjgnLCAndXRmLTgnLCAnYXNjaWknLCAnYmluYXJ5JywgJ2Jhc2U2NCcsICd1Y3MyJywgJ3Vjcy0yJywgJ3V0ZjE2bGUnLCAndXRmLTE2bGUnLCAncmF3J10uaW5kZXhPZigoZW5jb2RpbmcgKyAnJykudG9Mb3dlckNhc2UoKSkgPiAtMSkpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZyk7XG4gIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVmYXVsdEVuY29kaW5nID0gZW5jb2Rpbmc7XG4gIHJldHVybiB0aGlzO1xufTtcblxuZnVuY3Rpb24gZGVjb2RlQ2h1bmsoc3RhdGUsIGNodW5rLCBlbmNvZGluZykge1xuICBpZiAoIXN0YXRlLm9iamVjdE1vZGUgJiYgc3RhdGUuZGVjb2RlU3RyaW5ncyAhPT0gZmFsc2UgJiYgdHlwZW9mIGNodW5rID09PSAnc3RyaW5nJykge1xuICAgIGNodW5rID0gQnVmZmVyLmZyb20oY2h1bmssIGVuY29kaW5nKTtcbiAgfVxuICByZXR1cm4gY2h1bms7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZS5wcm90b3R5cGUsICd3cml0YWJsZUhpZ2hXYXRlck1hcmsnLCB7XG4gIC8vIG1ha2luZyBpdCBleHBsaWNpdCB0aGlzIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlXG4gIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpblxuICAvLyB1c2VybGFuZCB3aWxsIGZhaWxcbiAgZW51bWVyYWJsZTogZmFsc2UsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl93cml0YWJsZVN0YXRlLmhpZ2hXYXRlck1hcms7XG4gIH1cbn0pO1xuXG4vLyBpZiB3ZSdyZSBhbHJlYWR5IHdyaXRpbmcgc29tZXRoaW5nLCB0aGVuIGp1c3QgcHV0IHRoaXNcbi8vIGluIHRoZSBxdWV1ZSwgYW5kIHdhaXQgb3VyIHR1cm4uICBPdGhlcndpc2UsIGNhbGwgX3dyaXRlXG4vLyBJZiB3ZSByZXR1cm4gZmFsc2UsIHRoZW4gd2UgbmVlZCBhIGRyYWluIGV2ZW50LCBzbyBzZXQgdGhhdCBmbGFnLlxuZnVuY3Rpb24gd3JpdGVPckJ1ZmZlcihzdHJlYW0sIHN0YXRlLCBpc0J1ZiwgY2h1bmssIGVuY29kaW5nLCBjYikge1xuICBpZiAoIWlzQnVmKSB7XG4gICAgdmFyIG5ld0NodW5rID0gZGVjb2RlQ2h1bmsoc3RhdGUsIGNodW5rLCBlbmNvZGluZyk7XG4gICAgaWYgKGNodW5rICE9PSBuZXdDaHVuaykge1xuICAgICAgaXNCdWYgPSB0cnVlO1xuICAgICAgZW5jb2RpbmcgPSAnYnVmZmVyJztcbiAgICAgIGNodW5rID0gbmV3Q2h1bms7XG4gICAgfVxuICB9XG4gIHZhciBsZW4gPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDtcblxuICBzdGF0ZS5sZW5ndGggKz0gbGVuO1xuXG4gIHZhciByZXQgPSBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrO1xuICAvLyB3ZSBtdXN0IGVuc3VyZSB0aGF0IHByZXZpb3VzIG5lZWREcmFpbiB3aWxsIG5vdCBiZSByZXNldCB0byBmYWxzZS5cbiAgaWYgKCFyZXQpIHN0YXRlLm5lZWREcmFpbiA9IHRydWU7XG5cbiAgaWYgKHN0YXRlLndyaXRpbmcgfHwgc3RhdGUuY29ya2VkKSB7XG4gICAgdmFyIGxhc3QgPSBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0O1xuICAgIHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSB7XG4gICAgICBjaHVuazogY2h1bmssXG4gICAgICBlbmNvZGluZzogZW5jb2RpbmcsXG4gICAgICBpc0J1ZjogaXNCdWYsXG4gICAgICBjYWxsYmFjazogY2IsXG4gICAgICBuZXh0OiBudWxsXG4gICAgfTtcbiAgICBpZiAobGFzdCkge1xuICAgICAgbGFzdC5uZXh0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDtcbiAgICB9XG4gICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0Q291bnQgKz0gMTtcbiAgfSBlbHNlIHtcbiAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIGZhbHNlLCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpO1xuICB9XG5cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCB3cml0ZXYsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYikge1xuICBzdGF0ZS53cml0ZWxlbiA9IGxlbjtcbiAgc3RhdGUud3JpdGVjYiA9IGNiO1xuICBzdGF0ZS53cml0aW5nID0gdHJ1ZTtcbiAgc3RhdGUuc3luYyA9IHRydWU7XG4gIGlmICh3cml0ZXYpIHN0cmVhbS5fd3JpdGV2KGNodW5rLCBzdGF0ZS5vbndyaXRlKTtlbHNlIHN0cmVhbS5fd3JpdGUoY2h1bmssIGVuY29kaW5nLCBzdGF0ZS5vbndyaXRlKTtcbiAgc3RhdGUuc3luYyA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBvbndyaXRlRXJyb3Ioc3RyZWFtLCBzdGF0ZSwgc3luYywgZXIsIGNiKSB7XG4gIC0tc3RhdGUucGVuZGluZ2NiO1xuXG4gIGlmIChzeW5jKSB7XG4gICAgLy8gZGVmZXIgdGhlIGNhbGxiYWNrIGlmIHdlIGFyZSBiZWluZyBjYWxsZWQgc3luY2hyb25vdXNseVxuICAgIC8vIHRvIGF2b2lkIHBpbGluZyB1cCB0aGluZ3Mgb24gdGhlIHN0YWNrXG4gICAgcG5hLm5leHRUaWNrKGNiLCBlcik7XG4gICAgLy8gdGhpcyBjYW4gZW1pdCBmaW5pc2gsIGFuZCBpdCB3aWxsIGFsd2F5cyBoYXBwZW5cbiAgICAvLyBhZnRlciBlcnJvclxuICAgIHBuYS5uZXh0VGljayhmaW5pc2hNYXliZSwgc3RyZWFtLCBzdGF0ZSk7XG4gICAgc3RyZWFtLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCA9IHRydWU7XG4gICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpO1xuICB9IGVsc2Uge1xuICAgIC8vIHRoZSBjYWxsZXIgZXhwZWN0IHRoaXMgdG8gaGFwcGVuIGJlZm9yZSBpZlxuICAgIC8vIGl0IGlzIGFzeW5jXG4gICAgY2IoZXIpO1xuICAgIHN0cmVhbS5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQgPSB0cnVlO1xuICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcbiAgICAvLyB0aGlzIGNhbiBlbWl0IGZpbmlzaCwgYnV0IGZpbmlzaCBtdXN0XG4gICAgLy8gYWx3YXlzIGZvbGxvdyBlcnJvclxuICAgIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSkge1xuICBzdGF0ZS53cml0aW5nID0gZmFsc2U7XG4gIHN0YXRlLndyaXRlY2IgPSBudWxsO1xuICBzdGF0ZS5sZW5ndGggLT0gc3RhdGUud3JpdGVsZW47XG4gIHN0YXRlLndyaXRlbGVuID0gMDtcbn1cblxuZnVuY3Rpb24gb253cml0ZShzdHJlYW0sIGVyKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTtcbiAgdmFyIHN5bmMgPSBzdGF0ZS5zeW5jO1xuICB2YXIgY2IgPSBzdGF0ZS53cml0ZWNiO1xuXG4gIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSk7XG5cbiAgaWYgKGVyKSBvbndyaXRlRXJyb3Ioc3RyZWFtLCBzdGF0ZSwgc3luYywgZXIsIGNiKTtlbHNlIHtcbiAgICAvLyBDaGVjayBpZiB3ZSdyZSBhY3R1YWxseSByZWFkeSB0byBmaW5pc2gsIGJ1dCBkb24ndCBlbWl0IHlldFxuICAgIHZhciBmaW5pc2hlZCA9IG5lZWRGaW5pc2goc3RhdGUpO1xuXG4gICAgaWYgKCFmaW5pc2hlZCAmJiAhc3RhdGUuY29ya2VkICYmICFzdGF0ZS5idWZmZXJQcm9jZXNzaW5nICYmIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCkge1xuICAgICAgY2xlYXJCdWZmZXIoc3RyZWFtLCBzdGF0ZSk7XG4gICAgfVxuXG4gICAgaWYgKHN5bmMpIHtcbiAgICAgIC8qPHJlcGxhY2VtZW50PiovXG4gICAgICBhc3luY1dyaXRlKGFmdGVyV3JpdGUsIHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYik7XG4gICAgICAvKjwvcmVwbGFjZW1lbnQ+Ki9cbiAgICB9IGVsc2Uge1xuICAgICAgYWZ0ZXJXcml0ZShzdHJlYW0sIHN0YXRlLCBmaW5pc2hlZCwgY2IpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYikge1xuICBpZiAoIWZpbmlzaGVkKSBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSk7XG4gIHN0YXRlLnBlbmRpbmdjYi0tO1xuICBjYigpO1xuICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTtcbn1cblxuLy8gTXVzdCBmb3JjZSBjYWxsYmFjayB0byBiZSBjYWxsZWQgb24gbmV4dFRpY2ssIHNvIHRoYXQgd2UgZG9uJ3Rcbi8vIGVtaXQgJ2RyYWluJyBiZWZvcmUgdGhlIHdyaXRlKCkgY29uc3VtZXIgZ2V0cyB0aGUgJ2ZhbHNlJyByZXR1cm5cbi8vIHZhbHVlLCBhbmQgaGFzIGEgY2hhbmNlIHRvIGF0dGFjaCBhICdkcmFpbicgbGlzdGVuZXIuXG5mdW5jdGlvbiBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLm5lZWREcmFpbikge1xuICAgIHN0YXRlLm5lZWREcmFpbiA9IGZhbHNlO1xuICAgIHN0cmVhbS5lbWl0KCdkcmFpbicpO1xuICB9XG59XG5cbi8vIGlmIHRoZXJlJ3Mgc29tZXRoaW5nIGluIHRoZSBidWZmZXIgd2FpdGluZywgdGhlbiBwcm9jZXNzIGl0XG5mdW5jdGlvbiBjbGVhckJ1ZmZlcihzdHJlYW0sIHN0YXRlKSB7XG4gIHN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgPSB0cnVlO1xuICB2YXIgZW50cnkgPSBzdGF0ZS5idWZmZXJlZFJlcXVlc3Q7XG5cbiAgaWYgKHN0cmVhbS5fd3JpdGV2ICYmIGVudHJ5ICYmIGVudHJ5Lm5leHQpIHtcbiAgICAvLyBGYXN0IGNhc2UsIHdyaXRlIGV2ZXJ5dGhpbmcgdXNpbmcgX3dyaXRldigpXG4gICAgdmFyIGwgPSBzdGF0ZS5idWZmZXJlZFJlcXVlc3RDb3VudDtcbiAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5KGwpO1xuICAgIHZhciBob2xkZXIgPSBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWU7XG4gICAgaG9sZGVyLmVudHJ5ID0gZW50cnk7XG5cbiAgICB2YXIgY291bnQgPSAwO1xuICAgIHZhciBhbGxCdWZmZXJzID0gdHJ1ZTtcbiAgICB3aGlsZSAoZW50cnkpIHtcbiAgICAgIGJ1ZmZlcltjb3VudF0gPSBlbnRyeTtcbiAgICAgIGlmICghZW50cnkuaXNCdWYpIGFsbEJ1ZmZlcnMgPSBmYWxzZTtcbiAgICAgIGVudHJ5ID0gZW50cnkubmV4dDtcbiAgICAgIGNvdW50ICs9IDE7XG4gICAgfVxuICAgIGJ1ZmZlci5hbGxCdWZmZXJzID0gYWxsQnVmZmVycztcblxuICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgdHJ1ZSwgc3RhdGUubGVuZ3RoLCBidWZmZXIsICcnLCBob2xkZXIuZmluaXNoKTtcblxuICAgIC8vIGRvV3JpdGUgaXMgYWxtb3N0IGFsd2F5cyBhc3luYywgZGVmZXIgdGhlc2UgdG8gc2F2ZSBhIGJpdCBvZiB0aW1lXG4gICAgLy8gYXMgdGhlIGhvdCBwYXRoIGVuZHMgd2l0aCBkb1dyaXRlXG4gICAgc3RhdGUucGVuZGluZ2NiKys7XG4gICAgc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7XG4gICAgaWYgKGhvbGRlci5uZXh0KSB7XG4gICAgICBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBob2xkZXIubmV4dDtcbiAgICAgIGhvbGRlci5uZXh0ID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdGUuY29ya2VkUmVxdWVzdHNGcmVlID0gbmV3IENvcmtlZFJlcXVlc3Qoc3RhdGUpO1xuICAgIH1cbiAgICBzdGF0ZS5idWZmZXJlZFJlcXVlc3RDb3VudCA9IDA7XG4gIH0gZWxzZSB7XG4gICAgLy8gU2xvdyBjYXNlLCB3cml0ZSBjaHVua3Mgb25lLWJ5LW9uZVxuICAgIHdoaWxlIChlbnRyeSkge1xuICAgICAgdmFyIGNodW5rID0gZW50cnkuY2h1bms7XG4gICAgICB2YXIgZW5jb2RpbmcgPSBlbnRyeS5lbmNvZGluZztcbiAgICAgIHZhciBjYiA9IGVudHJ5LmNhbGxiYWNrO1xuICAgICAgdmFyIGxlbiA9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoO1xuXG4gICAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIGZhbHNlLCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpO1xuICAgICAgZW50cnkgPSBlbnRyeS5uZXh0O1xuICAgICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0Q291bnQtLTtcbiAgICAgIC8vIGlmIHdlIGRpZG4ndCBjYWxsIHRoZSBvbndyaXRlIGltbWVkaWF0ZWx5LCB0aGVuXG4gICAgICAvLyBpdCBtZWFucyB0aGF0IHdlIG5lZWQgdG8gd2FpdCB1bnRpbCBpdCBkb2VzLlxuICAgICAgLy8gYWxzbywgdGhhdCBtZWFucyB0aGF0IHRoZSBjaHVuayBhbmQgY2IgYXJlIGN1cnJlbnRseVxuICAgICAgLy8gYmVpbmcgcHJvY2Vzc2VkLCBzbyBtb3ZlIHRoZSBidWZmZXIgY291bnRlciBwYXN0IHRoZW0uXG4gICAgICBpZiAoc3RhdGUud3JpdGluZykge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZW50cnkgPT09IG51bGwpIHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSBudWxsO1xuICB9XG5cbiAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0ID0gZW50cnk7XG4gIHN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgPSBmYWxzZTtcbn1cblxuV3JpdGFibGUucHJvdG90eXBlLl93cml0ZSA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIGNiKG5ldyBFcnJvcignX3dyaXRlKCkgaXMgbm90IGltcGxlbWVudGVkJykpO1xufTtcblxuV3JpdGFibGUucHJvdG90eXBlLl93cml0ZXYgPSBudWxsO1xuXG5Xcml0YWJsZS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcblxuICBpZiAodHlwZW9mIGNodW5rID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2IgPSBjaHVuaztcbiAgICBjaHVuayA9IG51bGw7XG4gICAgZW5jb2RpbmcgPSBudWxsO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNiID0gZW5jb2Rpbmc7XG4gICAgZW5jb2RpbmcgPSBudWxsO1xuICB9XG5cbiAgaWYgKGNodW5rICE9PSBudWxsICYmIGNodW5rICE9PSB1bmRlZmluZWQpIHRoaXMud3JpdGUoY2h1bmssIGVuY29kaW5nKTtcblxuICAvLyAuZW5kKCkgZnVsbHkgdW5jb3Jrc1xuICBpZiAoc3RhdGUuY29ya2VkKSB7XG4gICAgc3RhdGUuY29ya2VkID0gMTtcbiAgICB0aGlzLnVuY29yaygpO1xuICB9XG5cbiAgLy8gaWdub3JlIHVubmVjZXNzYXJ5IGVuZCgpIGNhbGxzLlxuICBpZiAoIXN0YXRlLmVuZGluZyAmJiAhc3RhdGUuZmluaXNoZWQpIGVuZFdyaXRhYmxlKHRoaXMsIHN0YXRlLCBjYik7XG59O1xuXG5mdW5jdGlvbiBuZWVkRmluaXNoKHN0YXRlKSB7XG4gIHJldHVybiBzdGF0ZS5lbmRpbmcgJiYgc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCA9PT0gbnVsbCAmJiAhc3RhdGUuZmluaXNoZWQgJiYgIXN0YXRlLndyaXRpbmc7XG59XG5mdW5jdGlvbiBjYWxsRmluYWwoc3RyZWFtLCBzdGF0ZSkge1xuICBzdHJlYW0uX2ZpbmFsKGZ1bmN0aW9uIChlcnIpIHtcbiAgICBzdGF0ZS5wZW5kaW5nY2ItLTtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgIH1cbiAgICBzdGF0ZS5wcmVmaW5pc2hlZCA9IHRydWU7XG4gICAgc3RyZWFtLmVtaXQoJ3ByZWZpbmlzaCcpO1xuICAgIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHByZWZpbmlzaChzdHJlYW0sIHN0YXRlKSB7XG4gIGlmICghc3RhdGUucHJlZmluaXNoZWQgJiYgIXN0YXRlLmZpbmFsQ2FsbGVkKSB7XG4gICAgaWYgKHR5cGVvZiBzdHJlYW0uX2ZpbmFsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBzdGF0ZS5wZW5kaW5nY2IrKztcbiAgICAgIHN0YXRlLmZpbmFsQ2FsbGVkID0gdHJ1ZTtcbiAgICAgIHBuYS5uZXh0VGljayhjYWxsRmluYWwsIHN0cmVhbSwgc3RhdGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ZS5wcmVmaW5pc2hlZCA9IHRydWU7XG4gICAgICBzdHJlYW0uZW1pdCgncHJlZmluaXNoJyk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpIHtcbiAgdmFyIG5lZWQgPSBuZWVkRmluaXNoKHN0YXRlKTtcbiAgaWYgKG5lZWQpIHtcbiAgICBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSk7XG4gICAgaWYgKHN0YXRlLnBlbmRpbmdjYiA9PT0gMCkge1xuICAgICAgc3RhdGUuZmluaXNoZWQgPSB0cnVlO1xuICAgICAgc3RyZWFtLmVtaXQoJ2ZpbmlzaCcpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbmVlZDtcbn1cblxuZnVuY3Rpb24gZW5kV3JpdGFibGUoc3RyZWFtLCBzdGF0ZSwgY2IpIHtcbiAgc3RhdGUuZW5kaW5nID0gdHJ1ZTtcbiAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7XG4gIGlmIChjYikge1xuICAgIGlmIChzdGF0ZS5maW5pc2hlZCkgcG5hLm5leHRUaWNrKGNiKTtlbHNlIHN0cmVhbS5vbmNlKCdmaW5pc2gnLCBjYik7XG4gIH1cbiAgc3RhdGUuZW5kZWQgPSB0cnVlO1xuICBzdHJlYW0ud3JpdGFibGUgPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gb25Db3JrZWRGaW5pc2goY29ya1JlcSwgc3RhdGUsIGVycikge1xuICB2YXIgZW50cnkgPSBjb3JrUmVxLmVudHJ5O1xuICBjb3JrUmVxLmVudHJ5ID0gbnVsbDtcbiAgd2hpbGUgKGVudHJ5KSB7XG4gICAgdmFyIGNiID0gZW50cnkuY2FsbGJhY2s7XG4gICAgc3RhdGUucGVuZGluZ2NiLS07XG4gICAgY2IoZXJyKTtcbiAgICBlbnRyeSA9IGVudHJ5Lm5leHQ7XG4gIH1cbiAgaWYgKHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZSkge1xuICAgIHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZS5uZXh0ID0gY29ya1JlcTtcbiAgfSBlbHNlIHtcbiAgICBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBjb3JrUmVxO1xuICB9XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZS5wcm90b3R5cGUsICdkZXN0cm95ZWQnLCB7XG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl93cml0YWJsZVN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkO1xuICB9LFxuICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIC8vIHdlIGlnbm9yZSB0aGUgdmFsdWUgaWYgdGhlIHN0cmVhbVxuICAgIC8vIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZCB5ZXRcbiAgICBpZiAoIXRoaXMuX3dyaXRhYmxlU3RhdGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LCB0aGUgdXNlciBpcyBleHBsaWNpdGx5XG4gICAgLy8gbWFuYWdpbmcgZGVzdHJveWVkXG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQgPSB2YWx1ZTtcbiAgfVxufSk7XG5cbldyaXRhYmxlLnByb3RvdHlwZS5kZXN0cm95ID0gZGVzdHJveUltcGwuZGVzdHJveTtcbldyaXRhYmxlLnByb3RvdHlwZS5fdW5kZXN0cm95ID0gZGVzdHJveUltcGwudW5kZXN0cm95O1xuV3JpdGFibGUucHJvdG90eXBlLl9kZXN0cm95ID0gZnVuY3Rpb24gKGVyciwgY2IpIHtcbiAgdGhpcy5lbmQoKTtcbiAgY2IoZXJyKTtcbn07IiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgQnVmZmVyID0gcmVxdWlyZSgnc2FmZS1idWZmZXInKS5CdWZmZXI7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcblxuZnVuY3Rpb24gY29weUJ1ZmZlcihzcmMsIHRhcmdldCwgb2Zmc2V0KSB7XG4gIHNyYy5jb3B5KHRhcmdldCwgb2Zmc2V0KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEJ1ZmZlckxpc3QoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJ1ZmZlckxpc3QpO1xuXG4gICAgdGhpcy5oZWFkID0gbnVsbDtcbiAgICB0aGlzLnRhaWwgPSBudWxsO1xuICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgfVxuXG4gIEJ1ZmZlckxpc3QucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiBwdXNoKHYpIHtcbiAgICB2YXIgZW50cnkgPSB7IGRhdGE6IHYsIG5leHQ6IG51bGwgfTtcbiAgICBpZiAodGhpcy5sZW5ndGggPiAwKSB0aGlzLnRhaWwubmV4dCA9IGVudHJ5O2Vsc2UgdGhpcy5oZWFkID0gZW50cnk7XG4gICAgdGhpcy50YWlsID0gZW50cnk7XG4gICAgKyt0aGlzLmxlbmd0aDtcbiAgfTtcblxuICBCdWZmZXJMaXN0LnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24gdW5zaGlmdCh2KSB7XG4gICAgdmFyIGVudHJ5ID0geyBkYXRhOiB2LCBuZXh0OiB0aGlzLmhlYWQgfTtcbiAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHRoaXMudGFpbCA9IGVudHJ5O1xuICAgIHRoaXMuaGVhZCA9IGVudHJ5O1xuICAgICsrdGhpcy5sZW5ndGg7XG4gIH07XG5cbiAgQnVmZmVyTGlzdC5wcm90b3R5cGUuc2hpZnQgPSBmdW5jdGlvbiBzaGlmdCgpIHtcbiAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICB2YXIgcmV0ID0gdGhpcy5oZWFkLmRhdGE7XG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAxKSB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSBudWxsO2Vsc2UgdGhpcy5oZWFkID0gdGhpcy5oZWFkLm5leHQ7XG4gICAgLS10aGlzLmxlbmd0aDtcbiAgICByZXR1cm4gcmV0O1xuICB9O1xuXG4gIEJ1ZmZlckxpc3QucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gbnVsbDtcbiAgICB0aGlzLmxlbmd0aCA9IDA7XG4gIH07XG5cbiAgQnVmZmVyTGlzdC5wcm90b3R5cGUuam9pbiA9IGZ1bmN0aW9uIGpvaW4ocykge1xuICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuICcnO1xuICAgIHZhciBwID0gdGhpcy5oZWFkO1xuICAgIHZhciByZXQgPSAnJyArIHAuZGF0YTtcbiAgICB3aGlsZSAocCA9IHAubmV4dCkge1xuICAgICAgcmV0ICs9IHMgKyBwLmRhdGE7XG4gICAgfXJldHVybiByZXQ7XG4gIH07XG5cbiAgQnVmZmVyTGlzdC5wcm90b3R5cGUuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0KG4pIHtcbiAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybiBCdWZmZXIuYWxsb2MoMCk7XG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAxKSByZXR1cm4gdGhpcy5oZWFkLmRhdGE7XG4gICAgdmFyIHJldCA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShuID4+PiAwKTtcbiAgICB2YXIgcCA9IHRoaXMuaGVhZDtcbiAgICB2YXIgaSA9IDA7XG4gICAgd2hpbGUgKHApIHtcbiAgICAgIGNvcHlCdWZmZXIocC5kYXRhLCByZXQsIGkpO1xuICAgICAgaSArPSBwLmRhdGEubGVuZ3RoO1xuICAgICAgcCA9IHAubmV4dDtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfTtcblxuICByZXR1cm4gQnVmZmVyTGlzdDtcbn0oKTtcblxuaWYgKHV0aWwgJiYgdXRpbC5pbnNwZWN0ICYmIHV0aWwuaW5zcGVjdC5jdXN0b20pIHtcbiAgbW9kdWxlLmV4cG9ydHMucHJvdG90eXBlW3V0aWwuaW5zcGVjdC5jdXN0b21dID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvYmogPSB1dGlsLmluc3BlY3QoeyBsZW5ndGg6IHRoaXMubGVuZ3RoIH0pO1xuICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLm5hbWUgKyAnICcgKyBvYmo7XG4gIH07XG59IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xuXG52YXIgcG5hID0gcmVxdWlyZSgncHJvY2Vzcy1uZXh0aWNrLWFyZ3MnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vLyB1bmRvY3VtZW50ZWQgY2IoKSBBUEksIG5lZWRlZCBmb3IgY29yZSwgbm90IGZvciBwdWJsaWMgQVBJXG5mdW5jdGlvbiBkZXN0cm95KGVyciwgY2IpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB2YXIgcmVhZGFibGVEZXN0cm95ZWQgPSB0aGlzLl9yZWFkYWJsZVN0YXRlICYmIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkO1xuICB2YXIgd3JpdGFibGVEZXN0cm95ZWQgPSB0aGlzLl93cml0YWJsZVN0YXRlICYmIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkO1xuXG4gIGlmIChyZWFkYWJsZURlc3Ryb3llZCB8fCB3cml0YWJsZURlc3Ryb3llZCkge1xuICAgIGlmIChjYikge1xuICAgICAgY2IoZXJyKTtcbiAgICB9IGVsc2UgaWYgKGVyciAmJiAoIXRoaXMuX3dyaXRhYmxlU3RhdGUgfHwgIXRoaXMuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkKSkge1xuICAgICAgcG5hLm5leHRUaWNrKGVtaXRFcnJvck5ULCB0aGlzLCBlcnIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIHdlIHNldCBkZXN0cm95ZWQgdG8gdHJ1ZSBiZWZvcmUgZmlyaW5nIGVycm9yIGNhbGxiYWNrcyBpbiBvcmRlclxuICAvLyB0byBtYWtlIGl0IHJlLWVudHJhbmNlIHNhZmUgaW4gY2FzZSBkZXN0cm95KCkgaXMgY2FsbGVkIHdpdGhpbiBjYWxsYmFja3NcblxuICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSkge1xuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkID0gdHJ1ZTtcbiAgfVxuXG4gIC8vIGlmIHRoaXMgaXMgYSBkdXBsZXggc3RyZWFtIG1hcmsgdGhlIHdyaXRhYmxlIHBhcnQgYXMgZGVzdHJveWVkIGFzIHdlbGxcbiAgaWYgKHRoaXMuX3dyaXRhYmxlU3RhdGUpIHtcbiAgICB0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZCA9IHRydWU7XG4gIH1cblxuICB0aGlzLl9kZXN0cm95KGVyciB8fCBudWxsLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgaWYgKCFjYiAmJiBlcnIpIHtcbiAgICAgIHBuYS5uZXh0VGljayhlbWl0RXJyb3JOVCwgX3RoaXMsIGVycik7XG4gICAgICBpZiAoX3RoaXMuX3dyaXRhYmxlU3RhdGUpIHtcbiAgICAgICAgX3RoaXMuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNiKSB7XG4gICAgICBjYihlcnIpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIHVuZGVzdHJveSgpIHtcbiAgaWYgKHRoaXMuX3JlYWRhYmxlU3RhdGUpIHtcbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZCA9IGZhbHNlO1xuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUucmVhZGluZyA9IGZhbHNlO1xuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5kZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmVuZEVtaXR0ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGlmICh0aGlzLl93cml0YWJsZVN0YXRlKSB7XG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQgPSBmYWxzZTtcbiAgICB0aGlzLl93cml0YWJsZVN0YXRlLmVuZGVkID0gZmFsc2U7XG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5lbmRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl93cml0YWJsZVN0YXRlLmZpbmlzaGVkID0gZmFsc2U7XG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQgPSBmYWxzZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBlbWl0RXJyb3JOVChzZWxmLCBlcnIpIHtcbiAgc2VsZi5lbWl0KCdlcnJvcicsIGVycik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBkZXN0cm95OiBkZXN0cm95LFxuICB1bmRlc3Ryb3k6IHVuZGVzdHJveVxufTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9yZWFkYWJsZScpLlBhc3NUaHJvdWdoXG4iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX3JlYWRhYmxlLmpzJyk7XG5leHBvcnRzLlN0cmVhbSA9IGV4cG9ydHM7XG5leHBvcnRzLlJlYWRhYmxlID0gZXhwb3J0cztcbmV4cG9ydHMuV3JpdGFibGUgPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX3dyaXRhYmxlLmpzJyk7XG5leHBvcnRzLkR1cGxleCA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fZHVwbGV4LmpzJyk7XG5leHBvcnRzLlRyYW5zZm9ybSA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fdHJhbnNmb3JtLmpzJyk7XG5leHBvcnRzLlBhc3NUaHJvdWdoID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV9wYXNzdGhyb3VnaC5qcycpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL3JlYWRhYmxlJykuVHJhbnNmb3JtXG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fd3JpdGFibGUuanMnKTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxudmFyIHJ1bnRpbWUgPSAoZnVuY3Rpb24gKGV4cG9ydHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIE9wID0gT2JqZWN0LnByb3RvdHlwZTtcbiAgdmFyIGhhc093biA9IE9wLmhhc093blByb3BlcnR5O1xuICB2YXIgdW5kZWZpbmVkOyAvLyBNb3JlIGNvbXByZXNzaWJsZSB0aGFuIHZvaWQgMC5cbiAgdmFyICRTeW1ib2wgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2wgOiB7fTtcbiAgdmFyIGl0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5pdGVyYXRvciB8fCBcIkBAaXRlcmF0b3JcIjtcbiAgdmFyIGFzeW5jSXRlcmF0b3JTeW1ib2wgPSAkU3ltYm9sLmFzeW5jSXRlcmF0b3IgfHwgXCJAQGFzeW5jSXRlcmF0b3JcIjtcbiAgdmFyIHRvU3RyaW5nVGFnU3ltYm9sID0gJFN5bWJvbC50b1N0cmluZ1RhZyB8fCBcIkBAdG9TdHJpbmdUYWdcIjtcblxuICBmdW5jdGlvbiBkZWZpbmUob2JqLCBrZXksIHZhbHVlKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gb2JqW2tleV07XG4gIH1cbiAgdHJ5IHtcbiAgICAvLyBJRSA4IGhhcyBhIGJyb2tlbiBPYmplY3QuZGVmaW5lUHJvcGVydHkgdGhhdCBvbmx5IHdvcmtzIG9uIERPTSBvYmplY3RzLlxuICAgIGRlZmluZSh7fSwgXCJcIik7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGRlZmluZSA9IGZ1bmN0aW9uKG9iaiwga2V5LCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIG9ialtrZXldID0gdmFsdWU7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpIHtcbiAgICAvLyBJZiBvdXRlckZuIHByb3ZpZGVkIGFuZCBvdXRlckZuLnByb3RvdHlwZSBpcyBhIEdlbmVyYXRvciwgdGhlbiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvci5cbiAgICB2YXIgcHJvdG9HZW5lcmF0b3IgPSBvdXRlckZuICYmIG91dGVyRm4ucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yID8gb3V0ZXJGbiA6IEdlbmVyYXRvcjtcbiAgICB2YXIgZ2VuZXJhdG9yID0gT2JqZWN0LmNyZWF0ZShwcm90b0dlbmVyYXRvci5wcm90b3R5cGUpO1xuICAgIHZhciBjb250ZXh0ID0gbmV3IENvbnRleHQodHJ5TG9jc0xpc3QgfHwgW10pO1xuXG4gICAgLy8gVGhlIC5faW52b2tlIG1ldGhvZCB1bmlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlIC5uZXh0LFxuICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcy5cbiAgICBnZW5lcmF0b3IuX2ludm9rZSA9IG1ha2VJbnZva2VNZXRob2QoaW5uZXJGbiwgc2VsZiwgY29udGV4dCk7XG5cbiAgICByZXR1cm4gZ2VuZXJhdG9yO1xuICB9XG4gIGV4cG9ydHMud3JhcCA9IHdyYXA7XG5cbiAgLy8gVHJ5L2NhdGNoIGhlbHBlciB0byBtaW5pbWl6ZSBkZW9wdGltaXphdGlvbnMuIFJldHVybnMgYSBjb21wbGV0aW9uXG4gIC8vIHJlY29yZCBsaWtlIGNvbnRleHQudHJ5RW50cmllc1tpXS5jb21wbGV0aW9uLiBUaGlzIGludGVyZmFjZSBjb3VsZFxuICAvLyBoYXZlIGJlZW4gKGFuZCB3YXMgcHJldmlvdXNseSkgZGVzaWduZWQgdG8gdGFrZSBhIGNsb3N1cmUgdG8gYmVcbiAgLy8gaW52b2tlZCB3aXRob3V0IGFyZ3VtZW50cywgYnV0IGluIGFsbCB0aGUgY2FzZXMgd2UgY2FyZSBhYm91dCB3ZVxuICAvLyBhbHJlYWR5IGhhdmUgYW4gZXhpc3RpbmcgbWV0aG9kIHdlIHdhbnQgdG8gY2FsbCwgc28gdGhlcmUncyBubyBuZWVkXG4gIC8vIHRvIGNyZWF0ZSBhIG5ldyBmdW5jdGlvbiBvYmplY3QuIFdlIGNhbiBldmVuIGdldCBhd2F5IHdpdGggYXNzdW1pbmdcbiAgLy8gdGhlIG1ldGhvZCB0YWtlcyBleGFjdGx5IG9uZSBhcmd1bWVudCwgc2luY2UgdGhhdCBoYXBwZW5zIHRvIGJlIHRydWVcbiAgLy8gaW4gZXZlcnkgY2FzZSwgc28gd2UgZG9uJ3QgaGF2ZSB0byB0b3VjaCB0aGUgYXJndW1lbnRzIG9iamVjdC4gVGhlXG4gIC8vIG9ubHkgYWRkaXRpb25hbCBhbGxvY2F0aW9uIHJlcXVpcmVkIGlzIHRoZSBjb21wbGV0aW9uIHJlY29yZCwgd2hpY2hcbiAgLy8gaGFzIGEgc3RhYmxlIHNoYXBlIGFuZCBzbyBob3BlZnVsbHkgc2hvdWxkIGJlIGNoZWFwIHRvIGFsbG9jYXRlLlxuICBmdW5jdGlvbiB0cnlDYXRjaChmbiwgb2JqLCBhcmcpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJub3JtYWxcIiwgYXJnOiBmbi5jYWxsKG9iaiwgYXJnKSB9O1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJ0aHJvd1wiLCBhcmc6IGVyciB9O1xuICAgIH1cbiAgfVxuXG4gIHZhciBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0ID0gXCJzdXNwZW5kZWRTdGFydFwiO1xuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRZaWVsZCA9IFwic3VzcGVuZGVkWWllbGRcIjtcbiAgdmFyIEdlblN0YXRlRXhlY3V0aW5nID0gXCJleGVjdXRpbmdcIjtcbiAgdmFyIEdlblN0YXRlQ29tcGxldGVkID0gXCJjb21wbGV0ZWRcIjtcblxuICAvLyBSZXR1cm5pbmcgdGhpcyBvYmplY3QgZnJvbSB0aGUgaW5uZXJGbiBoYXMgdGhlIHNhbWUgZWZmZWN0IGFzXG4gIC8vIGJyZWFraW5nIG91dCBvZiB0aGUgZGlzcGF0Y2ggc3dpdGNoIHN0YXRlbWVudC5cbiAgdmFyIENvbnRpbnVlU2VudGluZWwgPSB7fTtcblxuICAvLyBEdW1teSBjb25zdHJ1Y3RvciBmdW5jdGlvbnMgdGhhdCB3ZSB1c2UgYXMgdGhlIC5jb25zdHJ1Y3RvciBhbmRcbiAgLy8gLmNvbnN0cnVjdG9yLnByb3RvdHlwZSBwcm9wZXJ0aWVzIGZvciBmdW5jdGlvbnMgdGhhdCByZXR1cm4gR2VuZXJhdG9yXG4gIC8vIG9iamVjdHMuIEZvciBmdWxsIHNwZWMgY29tcGxpYW5jZSwgeW91IG1heSB3aXNoIHRvIGNvbmZpZ3VyZSB5b3VyXG4gIC8vIG1pbmlmaWVyIG5vdCB0byBtYW5nbGUgdGhlIG5hbWVzIG9mIHRoZXNlIHR3byBmdW5jdGlvbnMuXG4gIGZ1bmN0aW9uIEdlbmVyYXRvcigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uKCkge31cbiAgZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUoKSB7fVxuXG4gIC8vIFRoaXMgaXMgYSBwb2x5ZmlsbCBmb3IgJUl0ZXJhdG9yUHJvdG90eXBlJSBmb3IgZW52aXJvbm1lbnRzIHRoYXRcbiAgLy8gZG9uJ3QgbmF0aXZlbHkgc3VwcG9ydCBpdC5cbiAgdmFyIEl0ZXJhdG9yUHJvdG90eXBlID0ge307XG4gIEl0ZXJhdG9yUHJvdG90eXBlW2l0ZXJhdG9yU3ltYm9sXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICB2YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG4gIHZhciBOYXRpdmVJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvICYmIGdldFByb3RvKGdldFByb3RvKHZhbHVlcyhbXSkpKTtcbiAgaWYgKE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlICYmXG4gICAgICBOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAhPT0gT3AgJiZcbiAgICAgIGhhc093bi5jYWxsKE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlLCBpdGVyYXRvclN5bWJvbCkpIHtcbiAgICAvLyBUaGlzIGVudmlyb25tZW50IGhhcyBhIG5hdGl2ZSAlSXRlcmF0b3JQcm90b3R5cGUlOyB1c2UgaXQgaW5zdGVhZFxuICAgIC8vIG9mIHRoZSBwb2x5ZmlsbC5cbiAgICBJdGVyYXRvclByb3RvdHlwZSA9IE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlO1xuICB9XG5cbiAgdmFyIEdwID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUucHJvdG90eXBlID1cbiAgICBHZW5lcmF0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShJdGVyYXRvclByb3RvdHlwZSk7XG4gIEdlbmVyYXRvckZ1bmN0aW9uLnByb3RvdHlwZSA9IEdwLmNvbnN0cnVjdG9yID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGU7XG4gIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLmNvbnN0cnVjdG9yID0gR2VuZXJhdG9yRnVuY3Rpb247XG4gIEdlbmVyYXRvckZ1bmN0aW9uLmRpc3BsYXlOYW1lID0gZGVmaW5lKFxuICAgIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLFxuICAgIHRvU3RyaW5nVGFnU3ltYm9sLFxuICAgIFwiR2VuZXJhdG9yRnVuY3Rpb25cIlxuICApO1xuXG4gIC8vIEhlbHBlciBmb3IgZGVmaW5pbmcgdGhlIC5uZXh0LCAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMgb2YgdGhlXG4gIC8vIEl0ZXJhdG9yIGludGVyZmFjZSBpbiB0ZXJtcyBvZiBhIHNpbmdsZSAuX2ludm9rZSBtZXRob2QuXG4gIGZ1bmN0aW9uIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhwcm90b3R5cGUpIHtcbiAgICBbXCJuZXh0XCIsIFwidGhyb3dcIiwgXCJyZXR1cm5cIl0uZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgIGRlZmluZShwcm90b3R5cGUsIG1ldGhvZCwgZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnZva2UobWV0aG9kLCBhcmcpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBleHBvcnRzLmlzR2VuZXJhdG9yRnVuY3Rpb24gPSBmdW5jdGlvbihnZW5GdW4pIHtcbiAgICB2YXIgY3RvciA9IHR5cGVvZiBnZW5GdW4gPT09IFwiZnVuY3Rpb25cIiAmJiBnZW5GdW4uY29uc3RydWN0b3I7XG4gICAgcmV0dXJuIGN0b3JcbiAgICAgID8gY3RvciA9PT0gR2VuZXJhdG9yRnVuY3Rpb24gfHxcbiAgICAgICAgLy8gRm9yIHRoZSBuYXRpdmUgR2VuZXJhdG9yRnVuY3Rpb24gY29uc3RydWN0b3IsIHRoZSBiZXN0IHdlIGNhblxuICAgICAgICAvLyBkbyBpcyB0byBjaGVjayBpdHMgLm5hbWUgcHJvcGVydHkuXG4gICAgICAgIChjdG9yLmRpc3BsYXlOYW1lIHx8IGN0b3IubmFtZSkgPT09IFwiR2VuZXJhdG9yRnVuY3Rpb25cIlxuICAgICAgOiBmYWxzZTtcbiAgfTtcblxuICBleHBvcnRzLm1hcmsgPSBmdW5jdGlvbihnZW5GdW4pIHtcbiAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoZ2VuRnVuLCBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdlbkZ1bi5fX3Byb3RvX18gPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTtcbiAgICAgIGRlZmluZShnZW5GdW4sIHRvU3RyaW5nVGFnU3ltYm9sLCBcIkdlbmVyYXRvckZ1bmN0aW9uXCIpO1xuICAgIH1cbiAgICBnZW5GdW4ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShHcCk7XG4gICAgcmV0dXJuIGdlbkZ1bjtcbiAgfTtcblxuICAvLyBXaXRoaW4gdGhlIGJvZHkgb2YgYW55IGFzeW5jIGZ1bmN0aW9uLCBgYXdhaXQgeGAgaXMgdHJhbnNmb3JtZWQgdG9cbiAgLy8gYHlpZWxkIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh4KWAsIHNvIHRoYXQgdGhlIHJ1bnRpbWUgY2FuIHRlc3RcbiAgLy8gYGhhc093bi5jYWxsKHZhbHVlLCBcIl9fYXdhaXRcIilgIHRvIGRldGVybWluZSBpZiB0aGUgeWllbGRlZCB2YWx1ZSBpc1xuICAvLyBtZWFudCB0byBiZSBhd2FpdGVkLlxuICBleHBvcnRzLmF3cmFwID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIHsgX19hd2FpdDogYXJnIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gQXN5bmNJdGVyYXRvcihnZW5lcmF0b3IsIFByb21pc2VJbXBsKSB7XG4gICAgZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChnZW5lcmF0b3JbbWV0aG9kXSwgZ2VuZXJhdG9yLCBhcmcpO1xuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgcmVqZWN0KHJlY29yZC5hcmcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHJlY29yZC5hcmc7XG4gICAgICAgIHZhciB2YWx1ZSA9IHJlc3VsdC52YWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlICYmXG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgIGhhc093bi5jYWxsKHZhbHVlLCBcIl9fYXdhaXRcIikpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZUltcGwucmVzb2x2ZSh2YWx1ZS5fX2F3YWl0KS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBpbnZva2UoXCJuZXh0XCIsIHZhbHVlLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgaW52b2tlKFwidGhyb3dcIiwgZXJyLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2VJbXBsLnJlc29sdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24odW53cmFwcGVkKSB7XG4gICAgICAgICAgLy8gV2hlbiBhIHlpZWxkZWQgUHJvbWlzZSBpcyByZXNvbHZlZCwgaXRzIGZpbmFsIHZhbHVlIGJlY29tZXNcbiAgICAgICAgICAvLyB0aGUgLnZhbHVlIG9mIHRoZSBQcm9taXNlPHt2YWx1ZSxkb25lfT4gcmVzdWx0IGZvciB0aGVcbiAgICAgICAgICAvLyBjdXJyZW50IGl0ZXJhdGlvbi5cbiAgICAgICAgICByZXN1bHQudmFsdWUgPSB1bndyYXBwZWQ7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgIC8vIElmIGEgcmVqZWN0ZWQgUHJvbWlzZSB3YXMgeWllbGRlZCwgdGhyb3cgdGhlIHJlamVjdGlvbiBiYWNrXG4gICAgICAgICAgLy8gaW50byB0aGUgYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIHNvIGl0IGNhbiBiZSBoYW5kbGVkIHRoZXJlLlxuICAgICAgICAgIHJldHVybiBpbnZva2UoXCJ0aHJvd1wiLCBlcnJvciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHByZXZpb3VzUHJvbWlzZTtcblxuICAgIGZ1bmN0aW9uIGVucXVldWUobWV0aG9kLCBhcmcpIHtcbiAgICAgIGZ1bmN0aW9uIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2VJbXBsKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwcmV2aW91c1Byb21pc2UgPVxuICAgICAgICAvLyBJZiBlbnF1ZXVlIGhhcyBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gd2Ugd2FudCB0byB3YWl0IHVudGlsXG4gICAgICAgIC8vIGFsbCBwcmV2aW91cyBQcm9taXNlcyBoYXZlIGJlZW4gcmVzb2x2ZWQgYmVmb3JlIGNhbGxpbmcgaW52b2tlLFxuICAgICAgICAvLyBzbyB0aGF0IHJlc3VsdHMgYXJlIGFsd2F5cyBkZWxpdmVyZWQgaW4gdGhlIGNvcnJlY3Qgb3JkZXIuIElmXG4gICAgICAgIC8vIGVucXVldWUgaGFzIG5vdCBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gaXQgaXMgaW1wb3J0YW50IHRvXG4gICAgICAgIC8vIGNhbGwgaW52b2tlIGltbWVkaWF0ZWx5LCB3aXRob3V0IHdhaXRpbmcgb24gYSBjYWxsYmFjayB0byBmaXJlLFxuICAgICAgICAvLyBzbyB0aGF0IHRoZSBhc3luYyBnZW5lcmF0b3IgZnVuY3Rpb24gaGFzIHRoZSBvcHBvcnR1bml0eSB0byBkb1xuICAgICAgICAvLyBhbnkgbmVjZXNzYXJ5IHNldHVwIGluIGEgcHJlZGljdGFibGUgd2F5LiBUaGlzIHByZWRpY3RhYmlsaXR5XG4gICAgICAgIC8vIGlzIHdoeSB0aGUgUHJvbWlzZSBjb25zdHJ1Y3RvciBzeW5jaHJvbm91c2x5IGludm9rZXMgaXRzXG4gICAgICAgIC8vIGV4ZWN1dG9yIGNhbGxiYWNrLCBhbmQgd2h5IGFzeW5jIGZ1bmN0aW9ucyBzeW5jaHJvbm91c2x5XG4gICAgICAgIC8vIGV4ZWN1dGUgY29kZSBiZWZvcmUgdGhlIGZpcnN0IGF3YWl0LiBTaW5jZSB3ZSBpbXBsZW1lbnQgc2ltcGxlXG4gICAgICAgIC8vIGFzeW5jIGZ1bmN0aW9ucyBpbiB0ZXJtcyBvZiBhc3luYyBnZW5lcmF0b3JzLCBpdCBpcyBlc3BlY2lhbGx5XG4gICAgICAgIC8vIGltcG9ydGFudCB0byBnZXQgdGhpcyByaWdodCwgZXZlbiB0aG91Z2ggaXQgcmVxdWlyZXMgY2FyZS5cbiAgICAgICAgcHJldmlvdXNQcm9taXNlID8gcHJldmlvdXNQcm9taXNlLnRoZW4oXG4gICAgICAgICAgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcsXG4gICAgICAgICAgLy8gQXZvaWQgcHJvcGFnYXRpbmcgZmFpbHVyZXMgdG8gUHJvbWlzZXMgcmV0dXJuZWQgYnkgbGF0ZXJcbiAgICAgICAgICAvLyBpbnZvY2F0aW9ucyBvZiB0aGUgaXRlcmF0b3IuXG4gICAgICAgICAgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmdcbiAgICAgICAgKSA6IGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCk7XG4gICAgfVxuXG4gICAgLy8gRGVmaW5lIHRoZSB1bmlmaWVkIGhlbHBlciBtZXRob2QgdGhhdCBpcyB1c2VkIHRvIGltcGxlbWVudCAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIChzZWUgZGVmaW5lSXRlcmF0b3JNZXRob2RzKS5cbiAgICB0aGlzLl9pbnZva2UgPSBlbnF1ZXVlO1xuICB9XG5cbiAgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlKTtcbiAgQXN5bmNJdGVyYXRvci5wcm90b3R5cGVbYXN5bmNJdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIGV4cG9ydHMuQXN5bmNJdGVyYXRvciA9IEFzeW5jSXRlcmF0b3I7XG5cbiAgLy8gTm90ZSB0aGF0IHNpbXBsZSBhc3luYyBmdW5jdGlvbnMgYXJlIGltcGxlbWVudGVkIG9uIHRvcCBvZlxuICAvLyBBc3luY0l0ZXJhdG9yIG9iamVjdHM7IHRoZXkganVzdCByZXR1cm4gYSBQcm9taXNlIGZvciB0aGUgdmFsdWUgb2ZcbiAgLy8gdGhlIGZpbmFsIHJlc3VsdCBwcm9kdWNlZCBieSB0aGUgaXRlcmF0b3IuXG4gIGV4cG9ydHMuYXN5bmMgPSBmdW5jdGlvbihpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCwgUHJvbWlzZUltcGwpIHtcbiAgICBpZiAoUHJvbWlzZUltcGwgPT09IHZvaWQgMCkgUHJvbWlzZUltcGwgPSBQcm9taXNlO1xuXG4gICAgdmFyIGl0ZXIgPSBuZXcgQXN5bmNJdGVyYXRvcihcbiAgICAgIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpLFxuICAgICAgUHJvbWlzZUltcGxcbiAgICApO1xuXG4gICAgcmV0dXJuIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbihvdXRlckZuKVxuICAgICAgPyBpdGVyIC8vIElmIG91dGVyRm4gaXMgYSBnZW5lcmF0b3IsIHJldHVybiB0aGUgZnVsbCBpdGVyYXRvci5cbiAgICAgIDogaXRlci5uZXh0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0LmRvbmUgPyByZXN1bHQudmFsdWUgOiBpdGVyLm5leHQoKTtcbiAgICAgICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KSB7XG4gICAgdmFyIHN0YXRlID0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydDtcblxuICAgIHJldHVybiBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcpIHtcbiAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVFeGVjdXRpbmcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZ1wiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUNvbXBsZXRlZCkge1xuICAgICAgICBpZiAobWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICB0aHJvdyBhcmc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCZSBmb3JnaXZpbmcsIHBlciAyNS4zLjMuMy4zIG9mIHRoZSBzcGVjOlxuICAgICAgICAvLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtZ2VuZXJhdG9ycmVzdW1lXG4gICAgICAgIHJldHVybiBkb25lUmVzdWx0KCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnRleHQubWV0aG9kID0gbWV0aG9kO1xuICAgICAgY29udGV4dC5hcmcgPSBhcmc7XG5cbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHZhciBkZWxlZ2F0ZSA9IGNvbnRleHQuZGVsZWdhdGU7XG4gICAgICAgIGlmIChkZWxlZ2F0ZSkge1xuICAgICAgICAgIHZhciBkZWxlZ2F0ZVJlc3VsdCA9IG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuICAgICAgICAgIGlmIChkZWxlZ2F0ZVJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0ID09PSBDb250aW51ZVNlbnRpbmVsKSBjb250aW51ZTtcbiAgICAgICAgICAgIHJldHVybiBkZWxlZ2F0ZVJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgICAgLy8gU2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzXG4gICAgICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgICAgICBjb250ZXh0LnNlbnQgPSBjb250ZXh0Ll9zZW50ID0gY29udGV4dC5hcmc7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0KSB7XG4gICAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgICAgdGhyb3cgY29udGV4dC5hcmc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZyk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICAgIGNvbnRleHQuYWJydXB0KFwicmV0dXJuXCIsIGNvbnRleHQuYXJnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXRlID0gR2VuU3RhdGVFeGVjdXRpbmc7XG5cbiAgICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIpIHtcbiAgICAgICAgICAvLyBJZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGZyb20gaW5uZXJGbiwgd2UgbGVhdmUgc3RhdGUgPT09XG4gICAgICAgICAgLy8gR2VuU3RhdGVFeGVjdXRpbmcgYW5kIGxvb3AgYmFjayBmb3IgYW5vdGhlciBpbnZvY2F0aW9uLlxuICAgICAgICAgIHN0YXRlID0gY29udGV4dC5kb25lXG4gICAgICAgICAgICA/IEdlblN0YXRlQ29tcGxldGVkXG4gICAgICAgICAgICA6IEdlblN0YXRlU3VzcGVuZGVkWWllbGQ7XG5cbiAgICAgICAgICBpZiAocmVjb3JkLmFyZyA9PT0gQ29udGludWVTZW50aW5lbCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiByZWNvcmQuYXJnLFxuICAgICAgICAgICAgZG9uZTogY29udGV4dC5kb25lXG4gICAgICAgICAgfTtcblxuICAgICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgIC8vIERpc3BhdGNoIHRoZSBleGNlcHRpb24gYnkgbG9vcGluZyBiYWNrIGFyb3VuZCB0byB0aGVcbiAgICAgICAgICAvLyBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKSBjYWxsIGFib3ZlLlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvLyBDYWxsIGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXShjb250ZXh0LmFyZykgYW5kIGhhbmRsZSB0aGVcbiAgLy8gcmVzdWx0LCBlaXRoZXIgYnkgcmV0dXJuaW5nIGEgeyB2YWx1ZSwgZG9uZSB9IHJlc3VsdCBmcm9tIHRoZVxuICAvLyBkZWxlZ2F0ZSBpdGVyYXRvciwgb3IgYnkgbW9kaWZ5aW5nIGNvbnRleHQubWV0aG9kIGFuZCBjb250ZXh0LmFyZyxcbiAgLy8gc2V0dGluZyBjb250ZXh0LmRlbGVnYXRlIHRvIG51bGwsIGFuZCByZXR1cm5pbmcgdGhlIENvbnRpbnVlU2VudGluZWwuXG4gIGZ1bmN0aW9uIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIgbWV0aG9kID0gZGVsZWdhdGUuaXRlcmF0b3JbY29udGV4dC5tZXRob2RdO1xuICAgIGlmIChtZXRob2QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gQSAudGhyb3cgb3IgLnJldHVybiB3aGVuIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgbm8gLnRocm93XG4gICAgICAvLyBtZXRob2QgYWx3YXlzIHRlcm1pbmF0ZXMgdGhlIHlpZWxkKiBsb29wLlxuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIC8vIE5vdGU6IFtcInJldHVyblwiXSBtdXN0IGJlIHVzZWQgZm9yIEVTMyBwYXJzaW5nIGNvbXBhdGliaWxpdHkuXG4gICAgICAgIGlmIChkZWxlZ2F0ZS5pdGVyYXRvcltcInJldHVyblwiXSkge1xuICAgICAgICAgIC8vIElmIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgYSByZXR1cm4gbWV0aG9kLCBnaXZlIGl0IGFcbiAgICAgICAgICAvLyBjaGFuY2UgdG8gY2xlYW4gdXAuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInJldHVyblwiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuXG4gICAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIC8vIElmIG1heWJlSW52b2tlRGVsZWdhdGUoY29udGV4dCkgY2hhbmdlZCBjb250ZXh0Lm1ldGhvZCBmcm9tXG4gICAgICAgICAgICAvLyBcInJldHVyblwiIHRvIFwidGhyb3dcIiwgbGV0IHRoYXQgb3ZlcnJpZGUgdGhlIFR5cGVFcnJvciBiZWxvdy5cbiAgICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgXCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kXCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2gobWV0aG9kLCBkZWxlZ2F0ZS5pdGVyYXRvciwgY29udGV4dC5hcmcpO1xuXG4gICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgaW5mbyA9IHJlY29yZC5hcmc7XG5cbiAgICBpZiAoISBpbmZvKSB7XG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcihcIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0XCIpO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICBpZiAoaW5mby5kb25lKSB7XG4gICAgICAvLyBBc3NpZ24gdGhlIHJlc3VsdCBvZiB0aGUgZmluaXNoZWQgZGVsZWdhdGUgdG8gdGhlIHRlbXBvcmFyeVxuICAgICAgLy8gdmFyaWFibGUgc3BlY2lmaWVkIGJ5IGRlbGVnYXRlLnJlc3VsdE5hbWUgKHNlZSBkZWxlZ2F0ZVlpZWxkKS5cbiAgICAgIGNvbnRleHRbZGVsZWdhdGUucmVzdWx0TmFtZV0gPSBpbmZvLnZhbHVlO1xuXG4gICAgICAvLyBSZXN1bWUgZXhlY3V0aW9uIGF0IHRoZSBkZXNpcmVkIGxvY2F0aW9uIChzZWUgZGVsZWdhdGVZaWVsZCkuXG4gICAgICBjb250ZXh0Lm5leHQgPSBkZWxlZ2F0ZS5uZXh0TG9jO1xuXG4gICAgICAvLyBJZiBjb250ZXh0Lm1ldGhvZCB3YXMgXCJ0aHJvd1wiIGJ1dCB0aGUgZGVsZWdhdGUgaGFuZGxlZCB0aGVcbiAgICAgIC8vIGV4Y2VwdGlvbiwgbGV0IHRoZSBvdXRlciBnZW5lcmF0b3IgcHJvY2VlZCBub3JtYWxseS4gSWZcbiAgICAgIC8vIGNvbnRleHQubWV0aG9kIHdhcyBcIm5leHRcIiwgZm9yZ2V0IGNvbnRleHQuYXJnIHNpbmNlIGl0IGhhcyBiZWVuXG4gICAgICAvLyBcImNvbnN1bWVkXCIgYnkgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yLiBJZiBjb250ZXh0Lm1ldGhvZCB3YXNcbiAgICAgIC8vIFwicmV0dXJuXCIsIGFsbG93IHRoZSBvcmlnaW5hbCAucmV0dXJuIGNhbGwgdG8gY29udGludWUgaW4gdGhlXG4gICAgICAvLyBvdXRlciBnZW5lcmF0b3IuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgIT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmUteWllbGQgdGhlIHJlc3VsdCByZXR1cm5lZCBieSB0aGUgZGVsZWdhdGUgbWV0aG9kLlxuICAgICAgcmV0dXJuIGluZm87XG4gICAgfVxuXG4gICAgLy8gVGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGlzIGZpbmlzaGVkLCBzbyBmb3JnZXQgaXQgYW5kIGNvbnRpbnVlIHdpdGhcbiAgICAvLyB0aGUgb3V0ZXIgZ2VuZXJhdG9yLlxuICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICB9XG5cbiAgLy8gRGVmaW5lIEdlbmVyYXRvci5wcm90b3R5cGUue25leHQsdGhyb3cscmV0dXJufSBpbiB0ZXJtcyBvZiB0aGVcbiAgLy8gdW5pZmllZCAuX2ludm9rZSBoZWxwZXIgbWV0aG9kLlxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoR3ApO1xuXG4gIGRlZmluZShHcCwgdG9TdHJpbmdUYWdTeW1ib2wsIFwiR2VuZXJhdG9yXCIpO1xuXG4gIC8vIEEgR2VuZXJhdG9yIHNob3VsZCBhbHdheXMgcmV0dXJuIGl0c2VsZiBhcyB0aGUgaXRlcmF0b3Igb2JqZWN0IHdoZW4gdGhlXG4gIC8vIEBAaXRlcmF0b3IgZnVuY3Rpb24gaXMgY2FsbGVkIG9uIGl0LiBTb21lIGJyb3dzZXJzJyBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlXG4gIC8vIGl0ZXJhdG9yIHByb3RvdHlwZSBjaGFpbiBpbmNvcnJlY3RseSBpbXBsZW1lbnQgdGhpcywgY2F1c2luZyB0aGUgR2VuZXJhdG9yXG4gIC8vIG9iamVjdCB0byBub3QgYmUgcmV0dXJuZWQgZnJvbSB0aGlzIGNhbGwuIFRoaXMgZW5zdXJlcyB0aGF0IGRvZXNuJ3QgaGFwcGVuLlxuICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlZ2VuZXJhdG9yL2lzc3Vlcy8yNzQgZm9yIG1vcmUgZGV0YWlscy5cbiAgR3BbaXRlcmF0b3JTeW1ib2xdID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgR3AudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJbb2JqZWN0IEdlbmVyYXRvcl1cIjtcbiAgfTtcblxuICBmdW5jdGlvbiBwdXNoVHJ5RW50cnkobG9jcykge1xuICAgIHZhciBlbnRyeSA9IHsgdHJ5TG9jOiBsb2NzWzBdIH07XG5cbiAgICBpZiAoMSBpbiBsb2NzKSB7XG4gICAgICBlbnRyeS5jYXRjaExvYyA9IGxvY3NbMV07XG4gICAgfVxuXG4gICAgaWYgKDIgaW4gbG9jcykge1xuICAgICAgZW50cnkuZmluYWxseUxvYyA9IGxvY3NbMl07XG4gICAgICBlbnRyeS5hZnRlckxvYyA9IGxvY3NbM107XG4gICAgfVxuXG4gICAgdGhpcy50cnlFbnRyaWVzLnB1c2goZW50cnkpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzZXRUcnlFbnRyeShlbnRyeSkge1xuICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uIHx8IHt9O1xuICAgIHJlY29yZC50eXBlID0gXCJub3JtYWxcIjtcbiAgICBkZWxldGUgcmVjb3JkLmFyZztcbiAgICBlbnRyeS5jb21wbGV0aW9uID0gcmVjb3JkO1xuICB9XG5cbiAgZnVuY3Rpb24gQ29udGV4dCh0cnlMb2NzTGlzdCkge1xuICAgIC8vIFRoZSByb290IGVudHJ5IG9iamVjdCAoZWZmZWN0aXZlbHkgYSB0cnkgc3RhdGVtZW50IHdpdGhvdXQgYSBjYXRjaFxuICAgIC8vIG9yIGEgZmluYWxseSBibG9jaykgZ2l2ZXMgdXMgYSBwbGFjZSB0byBzdG9yZSB2YWx1ZXMgdGhyb3duIGZyb21cbiAgICAvLyBsb2NhdGlvbnMgd2hlcmUgdGhlcmUgaXMgbm8gZW5jbG9zaW5nIHRyeSBzdGF0ZW1lbnQuXG4gICAgdGhpcy50cnlFbnRyaWVzID0gW3sgdHJ5TG9jOiBcInJvb3RcIiB9XTtcbiAgICB0cnlMb2NzTGlzdC5mb3JFYWNoKHB1c2hUcnlFbnRyeSwgdGhpcyk7XG4gICAgdGhpcy5yZXNldCh0cnVlKTtcbiAgfVxuXG4gIGV4cG9ydHMua2V5cyA9IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHZhciBrZXlzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgfVxuICAgIGtleXMucmV2ZXJzZSgpO1xuXG4gICAgLy8gUmF0aGVyIHRoYW4gcmV0dXJuaW5nIGFuIG9iamVjdCB3aXRoIGEgbmV4dCBtZXRob2QsIHdlIGtlZXBcbiAgICAvLyB0aGluZ3Mgc2ltcGxlIGFuZCByZXR1cm4gdGhlIG5leHQgZnVuY3Rpb24gaXRzZWxmLlxuICAgIHJldHVybiBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgd2hpbGUgKGtleXMubGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBrZXlzLnBvcCgpO1xuICAgICAgICBpZiAoa2V5IGluIG9iamVjdCkge1xuICAgICAgICAgIG5leHQudmFsdWUgPSBrZXk7XG4gICAgICAgICAgbmV4dC5kb25lID0gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVG8gYXZvaWQgY3JlYXRpbmcgYW4gYWRkaXRpb25hbCBvYmplY3QsIHdlIGp1c3QgaGFuZyB0aGUgLnZhbHVlXG4gICAgICAvLyBhbmQgLmRvbmUgcHJvcGVydGllcyBvZmYgdGhlIG5leHQgZnVuY3Rpb24gb2JqZWN0IGl0c2VsZi4gVGhpc1xuICAgICAgLy8gYWxzbyBlbnN1cmVzIHRoYXQgdGhlIG1pbmlmaWVyIHdpbGwgbm90IGFub255bWl6ZSB0aGUgZnVuY3Rpb24uXG4gICAgICBuZXh0LmRvbmUgPSB0cnVlO1xuICAgICAgcmV0dXJuIG5leHQ7XG4gICAgfTtcbiAgfTtcblxuICBmdW5jdGlvbiB2YWx1ZXMoaXRlcmFibGUpIHtcbiAgICBpZiAoaXRlcmFibGUpIHtcbiAgICAgIHZhciBpdGVyYXRvck1ldGhvZCA9IGl0ZXJhYmxlW2l0ZXJhdG9yU3ltYm9sXTtcbiAgICAgIGlmIChpdGVyYXRvck1ldGhvZCkge1xuICAgICAgICByZXR1cm4gaXRlcmF0b3JNZXRob2QuY2FsbChpdGVyYWJsZSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgaXRlcmFibGUubmV4dCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBpdGVyYWJsZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc05hTihpdGVyYWJsZS5sZW5ndGgpKSB7XG4gICAgICAgIHZhciBpID0gLTEsIG5leHQgPSBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgICAgIHdoaWxlICgrK2kgPCBpdGVyYWJsZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChoYXNPd24uY2FsbChpdGVyYWJsZSwgaSkpIHtcbiAgICAgICAgICAgICAgbmV4dC52YWx1ZSA9IGl0ZXJhYmxlW2ldO1xuICAgICAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbmV4dC52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBuZXh0LmRvbmUgPSB0cnVlO1xuXG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIG5leHQubmV4dCA9IG5leHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIGFuIGl0ZXJhdG9yIHdpdGggbm8gdmFsdWVzLlxuICAgIHJldHVybiB7IG5leHQ6IGRvbmVSZXN1bHQgfTtcbiAgfVxuICBleHBvcnRzLnZhbHVlcyA9IHZhbHVlcztcblxuICBmdW5jdGlvbiBkb25lUmVzdWx0KCkge1xuICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgfVxuXG4gIENvbnRleHQucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiBDb250ZXh0LFxuXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKHNraXBUZW1wUmVzZXQpIHtcbiAgICAgIHRoaXMucHJldiA9IDA7XG4gICAgICB0aGlzLm5leHQgPSAwO1xuICAgICAgLy8gUmVzZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3NcbiAgICAgIC8vIGZ1bmN0aW9uLnNlbnQgaW1wbGVtZW50YXRpb24uXG4gICAgICB0aGlzLnNlbnQgPSB0aGlzLl9zZW50ID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgICB0aGlzLmRlbGVnYXRlID0gbnVsbDtcblxuICAgICAgdGhpcy5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgIHRoaXMuYXJnID0gdW5kZWZpbmVkO1xuXG4gICAgICB0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChyZXNldFRyeUVudHJ5KTtcblxuICAgICAgaWYgKCFza2lwVGVtcFJlc2V0KSB7XG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcykge1xuICAgICAgICAgIC8vIE5vdCBzdXJlIGFib3V0IHRoZSBvcHRpbWFsIG9yZGVyIG9mIHRoZXNlIGNvbmRpdGlvbnM6XG4gICAgICAgICAgaWYgKG5hbWUuY2hhckF0KDApID09PSBcInRcIiAmJlxuICAgICAgICAgICAgICBoYXNPd24uY2FsbCh0aGlzLCBuYW1lKSAmJlxuICAgICAgICAgICAgICAhaXNOYU4oK25hbWUuc2xpY2UoMSkpKSB7XG4gICAgICAgICAgICB0aGlzW25hbWVdID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBzdG9wOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG5cbiAgICAgIHZhciByb290RW50cnkgPSB0aGlzLnRyeUVudHJpZXNbMF07XG4gICAgICB2YXIgcm9vdFJlY29yZCA9IHJvb3RFbnRyeS5jb21wbGV0aW9uO1xuICAgICAgaWYgKHJvb3RSZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IHJvb3RSZWNvcmQuYXJnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5ydmFsO1xuICAgIH0sXG5cbiAgICBkaXNwYXRjaEV4Y2VwdGlvbjogZnVuY3Rpb24oZXhjZXB0aW9uKSB7XG4gICAgICBpZiAodGhpcy5kb25lKSB7XG4gICAgICAgIHRocm93IGV4Y2VwdGlvbjtcbiAgICAgIH1cblxuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzO1xuICAgICAgZnVuY3Rpb24gaGFuZGxlKGxvYywgY2F1Z2h0KSB7XG4gICAgICAgIHJlY29yZC50eXBlID0gXCJ0aHJvd1wiO1xuICAgICAgICByZWNvcmQuYXJnID0gZXhjZXB0aW9uO1xuICAgICAgICBjb250ZXh0Lm5leHQgPSBsb2M7XG5cbiAgICAgICAgaWYgKGNhdWdodCkge1xuICAgICAgICAgIC8vIElmIHRoZSBkaXNwYXRjaGVkIGV4Y2VwdGlvbiB3YXMgY2F1Z2h0IGJ5IGEgY2F0Y2ggYmxvY2ssXG4gICAgICAgICAgLy8gdGhlbiBsZXQgdGhhdCBjYXRjaCBibG9jayBoYW5kbGUgdGhlIGV4Y2VwdGlvbiBub3JtYWxseS5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICEhIGNhdWdodDtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uO1xuXG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPT09IFwicm9vdFwiKSB7XG4gICAgICAgICAgLy8gRXhjZXB0aW9uIHRocm93biBvdXRzaWRlIG9mIGFueSB0cnkgYmxvY2sgdGhhdCBjb3VsZCBoYW5kbGVcbiAgICAgICAgICAvLyBpdCwgc28gc2V0IHRoZSBjb21wbGV0aW9uIHZhbHVlIG9mIHRoZSBlbnRpcmUgZnVuY3Rpb24gdG9cbiAgICAgICAgICAvLyB0aHJvdyB0aGUgZXhjZXB0aW9uLlxuICAgICAgICAgIHJldHVybiBoYW5kbGUoXCJlbmRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW50cnkudHJ5TG9jIDw9IHRoaXMucHJldikge1xuICAgICAgICAgIHZhciBoYXNDYXRjaCA9IGhhc093bi5jYWxsKGVudHJ5LCBcImNhdGNoTG9jXCIpO1xuICAgICAgICAgIHZhciBoYXNGaW5hbGx5ID0gaGFzT3duLmNhbGwoZW50cnksIFwiZmluYWxseUxvY1wiKTtcblxuICAgICAgICAgIGlmIChoYXNDYXRjaCAmJiBoYXNGaW5hbGx5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSBpZiAoaGFzQ2F0Y2gpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSBpZiAoaGFzRmluYWxseSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgYWJydXB0OiBmdW5jdGlvbih0eXBlLCBhcmcpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkudHJ5TG9jIDw9IHRoaXMucHJldiAmJlxuICAgICAgICAgICAgaGFzT3duLmNhbGwoZW50cnksIFwiZmluYWxseUxvY1wiKSAmJlxuICAgICAgICAgICAgdGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgIHZhciBmaW5hbGx5RW50cnkgPSBlbnRyeTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZmluYWxseUVudHJ5ICYmXG4gICAgICAgICAgKHR5cGUgPT09IFwiYnJlYWtcIiB8fFxuICAgICAgICAgICB0eXBlID09PSBcImNvbnRpbnVlXCIpICYmXG4gICAgICAgICAgZmluYWxseUVudHJ5LnRyeUxvYyA8PSBhcmcgJiZcbiAgICAgICAgICBhcmcgPD0gZmluYWxseUVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgLy8gSWdub3JlIHRoZSBmaW5hbGx5IGVudHJ5IGlmIGNvbnRyb2wgaXMgbm90IGp1bXBpbmcgdG8gYVxuICAgICAgICAvLyBsb2NhdGlvbiBvdXRzaWRlIHRoZSB0cnkvY2F0Y2ggYmxvY2suXG4gICAgICAgIGZpbmFsbHlFbnRyeSA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHZhciByZWNvcmQgPSBmaW5hbGx5RW50cnkgPyBmaW5hbGx5RW50cnkuY29tcGxldGlvbiA6IHt9O1xuICAgICAgcmVjb3JkLnR5cGUgPSB0eXBlO1xuICAgICAgcmVjb3JkLmFyZyA9IGFyZztcblxuICAgICAgaWYgKGZpbmFsbHlFbnRyeSkge1xuICAgICAgICB0aGlzLm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICB0aGlzLm5leHQgPSBmaW5hbGx5RW50cnkuZmluYWxseUxvYztcbiAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmNvbXBsZXRlKHJlY29yZCk7XG4gICAgfSxcblxuICAgIGNvbXBsZXRlOiBmdW5jdGlvbihyZWNvcmQsIGFmdGVyTG9jKSB7XG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyByZWNvcmQuYXJnO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwiYnJlYWtcIiB8fFxuICAgICAgICAgIHJlY29yZC50eXBlID09PSBcImNvbnRpbnVlXCIpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gcmVjb3JkLmFyZztcbiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgdGhpcy5ydmFsID0gdGhpcy5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgICB0aGlzLm1ldGhvZCA9IFwicmV0dXJuXCI7XG4gICAgICAgIHRoaXMubmV4dCA9IFwiZW5kXCI7XG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcIm5vcm1hbFwiICYmIGFmdGVyTG9jKSB7XG4gICAgICAgIHRoaXMubmV4dCA9IGFmdGVyTG9jO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9LFxuXG4gICAgZmluaXNoOiBmdW5jdGlvbihmaW5hbGx5TG9jKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LmZpbmFsbHlMb2MgPT09IGZpbmFsbHlMb2MpIHtcbiAgICAgICAgICB0aGlzLmNvbXBsZXRlKGVudHJ5LmNvbXBsZXRpb24sIGVudHJ5LmFmdGVyTG9jKTtcbiAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTtcbiAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBcImNhdGNoXCI6IGZ1bmN0aW9uKHRyeUxvYykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPT09IHRyeUxvYykge1xuICAgICAgICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uO1xuICAgICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICB2YXIgdGhyb3duID0gcmVjb3JkLmFyZztcbiAgICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdGhyb3duO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSBjb250ZXh0LmNhdGNoIG1ldGhvZCBtdXN0IG9ubHkgYmUgY2FsbGVkIHdpdGggYSBsb2NhdGlvblxuICAgICAgLy8gYXJndW1lbnQgdGhhdCBjb3JyZXNwb25kcyB0byBhIGtub3duIGNhdGNoIGJsb2NrLlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaWxsZWdhbCBjYXRjaCBhdHRlbXB0XCIpO1xuICAgIH0sXG5cbiAgICBkZWxlZ2F0ZVlpZWxkOiBmdW5jdGlvbihpdGVyYWJsZSwgcmVzdWx0TmFtZSwgbmV4dExvYykge1xuICAgICAgdGhpcy5kZWxlZ2F0ZSA9IHtcbiAgICAgICAgaXRlcmF0b3I6IHZhbHVlcyhpdGVyYWJsZSksXG4gICAgICAgIHJlc3VsdE5hbWU6IHJlc3VsdE5hbWUsXG4gICAgICAgIG5leHRMb2M6IG5leHRMb2NcbiAgICAgIH07XG5cbiAgICAgIGlmICh0aGlzLm1ldGhvZCA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgLy8gRGVsaWJlcmF0ZWx5IGZvcmdldCB0aGUgbGFzdCBzZW50IHZhbHVlIHNvIHRoYXQgd2UgZG9uJ3RcbiAgICAgICAgLy8gYWNjaWRlbnRhbGx5IHBhc3MgaXQgb24gdG8gdGhlIGRlbGVnYXRlLlxuICAgICAgICB0aGlzLmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuICB9O1xuXG4gIC8vIFJlZ2FyZGxlc3Mgb2Ygd2hldGhlciB0aGlzIHNjcmlwdCBpcyBleGVjdXRpbmcgYXMgYSBDb21tb25KUyBtb2R1bGVcbiAgLy8gb3Igbm90LCByZXR1cm4gdGhlIHJ1bnRpbWUgb2JqZWN0IHNvIHRoYXQgd2UgY2FuIGRlY2xhcmUgdGhlIHZhcmlhYmxlXG4gIC8vIHJlZ2VuZXJhdG9yUnVudGltZSBpbiB0aGUgb3V0ZXIgc2NvcGUsIHdoaWNoIGFsbG93cyB0aGlzIG1vZHVsZSB0byBiZVxuICAvLyBpbmplY3RlZCBlYXNpbHkgYnkgYGJpbi9yZWdlbmVyYXRvciAtLWluY2x1ZGUtcnVudGltZSBzY3JpcHQuanNgLlxuICByZXR1cm4gZXhwb3J0cztcblxufShcbiAgLy8gSWYgdGhpcyBzY3JpcHQgaXMgZXhlY3V0aW5nIGFzIGEgQ29tbW9uSlMgbW9kdWxlLCB1c2UgbW9kdWxlLmV4cG9ydHNcbiAgLy8gYXMgdGhlIHJlZ2VuZXJhdG9yUnVudGltZSBuYW1lc3BhY2UuIE90aGVyd2lzZSBjcmVhdGUgYSBuZXcgZW1wdHlcbiAgLy8gb2JqZWN0LiBFaXRoZXIgd2F5LCB0aGUgcmVzdWx0aW5nIG9iamVjdCB3aWxsIGJlIHVzZWQgdG8gaW5pdGlhbGl6ZVxuICAvLyB0aGUgcmVnZW5lcmF0b3JSdW50aW1lIHZhcmlhYmxlIGF0IHRoZSB0b3Agb2YgdGhpcyBmaWxlLlxuICB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiID8gbW9kdWxlLmV4cG9ydHMgOiB7fVxuKSk7XG5cbnRyeSB7XG4gIHJlZ2VuZXJhdG9yUnVudGltZSA9IHJ1bnRpbWU7XG59IGNhdGNoIChhY2NpZGVudGFsU3RyaWN0TW9kZSkge1xuICAvLyBUaGlzIG1vZHVsZSBzaG91bGQgbm90IGJlIHJ1bm5pbmcgaW4gc3RyaWN0IG1vZGUsIHNvIHRoZSBhYm92ZVxuICAvLyBhc3NpZ25tZW50IHNob3VsZCBhbHdheXMgd29yayB1bmxlc3Mgc29tZXRoaW5nIGlzIG1pc2NvbmZpZ3VyZWQuIEp1c3RcbiAgLy8gaW4gY2FzZSBydW50aW1lLmpzIGFjY2lkZW50YWxseSBydW5zIGluIHN0cmljdCBtb2RlLCB3ZSBjYW4gZXNjYXBlXG4gIC8vIHN0cmljdCBtb2RlIHVzaW5nIGEgZ2xvYmFsIEZ1bmN0aW9uIGNhbGwuIFRoaXMgY291bGQgY29uY2VpdmFibHkgZmFpbFxuICAvLyBpZiBhIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IGZvcmJpZHMgdXNpbmcgRnVuY3Rpb24sIGJ1dCBpbiB0aGF0IGNhc2VcbiAgLy8gdGhlIHByb3BlciBzb2x1dGlvbiBpcyB0byBmaXggdGhlIGFjY2lkZW50YWwgc3RyaWN0IG1vZGUgcHJvYmxlbS4gSWZcbiAgLy8geW91J3ZlIG1pc2NvbmZpZ3VyZWQgeW91ciBidW5kbGVyIHRvIGZvcmNlIHN0cmljdCBtb2RlIGFuZCBhcHBsaWVkIGFcbiAgLy8gQ1NQIHRvIGZvcmJpZCBGdW5jdGlvbiwgYW5kIHlvdSdyZSBub3Qgd2lsbGluZyB0byBmaXggZWl0aGVyIG9mIHRob3NlXG4gIC8vIHByb2JsZW1zLCBwbGVhc2UgZGV0YWlsIHlvdXIgdW5pcXVlIHByZWRpY2FtZW50IGluIGEgR2l0SHViIGlzc3VlLlxuICBGdW5jdGlvbihcInJcIiwgXCJyZWdlbmVyYXRvclJ1bnRpbWUgPSByXCIpKHJ1bnRpbWUpO1xufVxuIiwiLyogZXNsaW50LWRpc2FibGUgbm9kZS9uby1kZXByZWNhdGVkLWFwaSAqL1xudmFyIGJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpXG52YXIgQnVmZmVyID0gYnVmZmVyLkJ1ZmZlclxuXG4vLyBhbHRlcm5hdGl2ZSB0byB1c2luZyBPYmplY3Qua2V5cyBmb3Igb2xkIGJyb3dzZXJzXG5mdW5jdGlvbiBjb3B5UHJvcHMgKHNyYywgZHN0KSB7XG4gIGZvciAodmFyIGtleSBpbiBzcmMpIHtcbiAgICBkc3Rba2V5XSA9IHNyY1trZXldXG4gIH1cbn1cbmlmIChCdWZmZXIuZnJvbSAmJiBCdWZmZXIuYWxsb2MgJiYgQnVmZmVyLmFsbG9jVW5zYWZlICYmIEJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBidWZmZXJcbn0gZWxzZSB7XG4gIC8vIENvcHkgcHJvcGVydGllcyBmcm9tIHJlcXVpcmUoJ2J1ZmZlcicpXG4gIGNvcHlQcm9wcyhidWZmZXIsIGV4cG9ydHMpXG4gIGV4cG9ydHMuQnVmZmVyID0gU2FmZUJ1ZmZlclxufVxuXG5mdW5jdGlvbiBTYWZlQnVmZmVyIChhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gQnVmZmVyKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxufVxuXG4vLyBDb3B5IHN0YXRpYyBtZXRob2RzIGZyb20gQnVmZmVyXG5jb3B5UHJvcHMoQnVmZmVyLCBTYWZlQnVmZmVyKVxuXG5TYWZlQnVmZmVyLmZyb20gPSBmdW5jdGlvbiAoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKVxuICB9XG4gIHJldHVybiBCdWZmZXIoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG59XG5cblNhZmVCdWZmZXIuYWxsb2MgPSBmdW5jdGlvbiAoc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHtcbiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKVxuICB9XG4gIHZhciBidWYgPSBCdWZmZXIoc2l6ZSlcbiAgaWYgKGZpbGwgIT09IHVuZGVmaW5lZCkge1xuICAgIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnKSB7XG4gICAgICBidWYuZmlsbChmaWxsLCBlbmNvZGluZylcbiAgICB9IGVsc2Uge1xuICAgICAgYnVmLmZpbGwoZmlsbClcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgYnVmLmZpbGwoMClcbiAgfVxuICByZXR1cm4gYnVmXG59XG5cblNhZmVCdWZmZXIuYWxsb2NVbnNhZmUgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICBpZiAodHlwZW9mIHNpemUgIT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpXG4gIH1cbiAgcmV0dXJuIEJ1ZmZlcihzaXplKVxufVxuXG5TYWZlQnVmZmVyLmFsbG9jVW5zYWZlU2xvdyA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJylcbiAgfVxuICByZXR1cm4gYnVmZmVyLlNsb3dCdWZmZXIoc2l6ZSlcbn1cbiIsIjsoZnVuY3Rpb24gKHNheCkgeyAvLyB3cmFwcGVyIGZvciBub24tbm9kZSBlbnZzXG4gIHNheC5wYXJzZXIgPSBmdW5jdGlvbiAoc3RyaWN0LCBvcHQpIHsgcmV0dXJuIG5ldyBTQVhQYXJzZXIoc3RyaWN0LCBvcHQpIH1cbiAgc2F4LlNBWFBhcnNlciA9IFNBWFBhcnNlclxuICBzYXguU0FYU3RyZWFtID0gU0FYU3RyZWFtXG4gIHNheC5jcmVhdGVTdHJlYW0gPSBjcmVhdGVTdHJlYW1cblxuICAvLyBXaGVuIHdlIHBhc3MgdGhlIE1BWF9CVUZGRVJfTEVOR1RIIHBvc2l0aW9uLCBzdGFydCBjaGVja2luZyBmb3IgYnVmZmVyIG92ZXJydW5zLlxuICAvLyBXaGVuIHdlIGNoZWNrLCBzY2hlZHVsZSB0aGUgbmV4dCBjaGVjayBmb3IgTUFYX0JVRkZFUl9MRU5HVEggLSAobWF4KGJ1ZmZlciBsZW5ndGhzKSksXG4gIC8vIHNpbmNlIHRoYXQncyB0aGUgZWFybGllc3QgdGhhdCBhIGJ1ZmZlciBvdmVycnVuIGNvdWxkIG9jY3VyLiAgVGhpcyB3YXksIGNoZWNrcyBhcmVcbiAgLy8gYXMgcmFyZSBhcyByZXF1aXJlZCwgYnV0IGFzIG9mdGVuIGFzIG5lY2Vzc2FyeSB0byBlbnN1cmUgbmV2ZXIgY3Jvc3NpbmcgdGhpcyBib3VuZC5cbiAgLy8gRnVydGhlcm1vcmUsIGJ1ZmZlcnMgYXJlIG9ubHkgdGVzdGVkIGF0IG1vc3Qgb25jZSBwZXIgd3JpdGUoKSwgc28gcGFzc2luZyBhIHZlcnlcbiAgLy8gbGFyZ2Ugc3RyaW5nIGludG8gd3JpdGUoKSBtaWdodCBoYXZlIHVuZGVzaXJhYmxlIGVmZmVjdHMsIGJ1dCB0aGlzIGlzIG1hbmFnZWFibGUgYnlcbiAgLy8gdGhlIGNhbGxlciwgc28gaXQgaXMgYXNzdW1lZCB0byBiZSBzYWZlLiAgVGh1cywgYSBjYWxsIHRvIHdyaXRlKCkgbWF5LCBpbiB0aGUgZXh0cmVtZVxuICAvLyBlZGdlIGNhc2UsIHJlc3VsdCBpbiBjcmVhdGluZyBhdCBtb3N0IG9uZSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBzdHJpbmcgcGFzc2VkIGluLlxuICAvLyBTZXQgdG8gSW5maW5pdHkgdG8gaGF2ZSB1bmxpbWl0ZWQgYnVmZmVycy5cbiAgc2F4Lk1BWF9CVUZGRVJfTEVOR1RIID0gNjQgKiAxMDI0XG5cbiAgdmFyIGJ1ZmZlcnMgPSBbXG4gICAgJ2NvbW1lbnQnLCAnc2dtbERlY2wnLCAndGV4dE5vZGUnLCAndGFnTmFtZScsICdkb2N0eXBlJyxcbiAgICAncHJvY0luc3ROYW1lJywgJ3Byb2NJbnN0Qm9keScsICdlbnRpdHknLCAnYXR0cmliTmFtZScsXG4gICAgJ2F0dHJpYlZhbHVlJywgJ2NkYXRhJywgJ3NjcmlwdCdcbiAgXVxuXG4gIHNheC5FVkVOVFMgPSBbXG4gICAgJ3RleHQnLFxuICAgICdwcm9jZXNzaW5naW5zdHJ1Y3Rpb24nLFxuICAgICdzZ21sZGVjbGFyYXRpb24nLFxuICAgICdkb2N0eXBlJyxcbiAgICAnY29tbWVudCcsXG4gICAgJ29wZW50YWdzdGFydCcsXG4gICAgJ2F0dHJpYnV0ZScsXG4gICAgJ29wZW50YWcnLFxuICAgICdjbG9zZXRhZycsXG4gICAgJ29wZW5jZGF0YScsXG4gICAgJ2NkYXRhJyxcbiAgICAnY2xvc2VjZGF0YScsXG4gICAgJ2Vycm9yJyxcbiAgICAnZW5kJyxcbiAgICAncmVhZHknLFxuICAgICdzY3JpcHQnLFxuICAgICdvcGVubmFtZXNwYWNlJyxcbiAgICAnY2xvc2VuYW1lc3BhY2UnXG4gIF1cblxuICBmdW5jdGlvbiBTQVhQYXJzZXIgKHN0cmljdCwgb3B0KSB7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNBWFBhcnNlcikpIHtcbiAgICAgIHJldHVybiBuZXcgU0FYUGFyc2VyKHN0cmljdCwgb3B0KVxuICAgIH1cblxuICAgIHZhciBwYXJzZXIgPSB0aGlzXG4gICAgY2xlYXJCdWZmZXJzKHBhcnNlcilcbiAgICBwYXJzZXIucSA9IHBhcnNlci5jID0gJydcbiAgICBwYXJzZXIuYnVmZmVyQ2hlY2tQb3NpdGlvbiA9IHNheC5NQVhfQlVGRkVSX0xFTkdUSFxuICAgIHBhcnNlci5vcHQgPSBvcHQgfHwge31cbiAgICBwYXJzZXIub3B0Lmxvd2VyY2FzZSA9IHBhcnNlci5vcHQubG93ZXJjYXNlIHx8IHBhcnNlci5vcHQubG93ZXJjYXNldGFnc1xuICAgIHBhcnNlci5sb29zZUNhc2UgPSBwYXJzZXIub3B0Lmxvd2VyY2FzZSA/ICd0b0xvd2VyQ2FzZScgOiAndG9VcHBlckNhc2UnXG4gICAgcGFyc2VyLnRhZ3MgPSBbXVxuICAgIHBhcnNlci5jbG9zZWQgPSBwYXJzZXIuY2xvc2VkUm9vdCA9IHBhcnNlci5zYXdSb290ID0gZmFsc2VcbiAgICBwYXJzZXIudGFnID0gcGFyc2VyLmVycm9yID0gbnVsbFxuICAgIHBhcnNlci5zdHJpY3QgPSAhIXN0cmljdFxuICAgIHBhcnNlci5ub3NjcmlwdCA9ICEhKHN0cmljdCB8fCBwYXJzZXIub3B0Lm5vc2NyaXB0KVxuICAgIHBhcnNlci5zdGF0ZSA9IFMuQkVHSU5cbiAgICBwYXJzZXIuc3RyaWN0RW50aXRpZXMgPSBwYXJzZXIub3B0LnN0cmljdEVudGl0aWVzXG4gICAgcGFyc2VyLkVOVElUSUVTID0gcGFyc2VyLnN0cmljdEVudGl0aWVzID8gT2JqZWN0LmNyZWF0ZShzYXguWE1MX0VOVElUSUVTKSA6IE9iamVjdC5jcmVhdGUoc2F4LkVOVElUSUVTKVxuICAgIHBhcnNlci5hdHRyaWJMaXN0ID0gW11cblxuICAgIC8vIG5hbWVzcGFjZXMgZm9ybSBhIHByb3RvdHlwZSBjaGFpbi5cbiAgICAvLyBpdCBhbHdheXMgcG9pbnRzIGF0IHRoZSBjdXJyZW50IHRhZyxcbiAgICAvLyB3aGljaCBwcm90b3MgdG8gaXRzIHBhcmVudCB0YWcuXG4gICAgaWYgKHBhcnNlci5vcHQueG1sbnMpIHtcbiAgICAgIHBhcnNlci5ucyA9IE9iamVjdC5jcmVhdGUocm9vdE5TKVxuICAgIH1cblxuICAgIC8vIG1vc3RseSBqdXN0IGZvciBlcnJvciByZXBvcnRpbmdcbiAgICBwYXJzZXIudHJhY2tQb3NpdGlvbiA9IHBhcnNlci5vcHQucG9zaXRpb24gIT09IGZhbHNlXG4gICAgaWYgKHBhcnNlci50cmFja1Bvc2l0aW9uKSB7XG4gICAgICBwYXJzZXIucG9zaXRpb24gPSBwYXJzZXIubGluZSA9IHBhcnNlci5jb2x1bW4gPSAwXG4gICAgfVxuICAgIGVtaXQocGFyc2VyLCAnb25yZWFkeScpXG4gIH1cblxuICBpZiAoIU9iamVjdC5jcmVhdGUpIHtcbiAgICBPYmplY3QuY3JlYXRlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIGZ1bmN0aW9uIEYgKCkge31cbiAgICAgIEYucHJvdG90eXBlID0gb1xuICAgICAgdmFyIG5ld2YgPSBuZXcgRigpXG4gICAgICByZXR1cm4gbmV3ZlxuICAgIH1cbiAgfVxuXG4gIGlmICghT2JqZWN0LmtleXMpIHtcbiAgICBPYmplY3Qua2V5cyA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgYSA9IFtdXG4gICAgICBmb3IgKHZhciBpIGluIG8pIGlmIChvLmhhc093blByb3BlcnR5KGkpKSBhLnB1c2goaSlcbiAgICAgIHJldHVybiBhXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2hlY2tCdWZmZXJMZW5ndGggKHBhcnNlcikge1xuICAgIHZhciBtYXhBbGxvd2VkID0gTWF0aC5tYXgoc2F4Lk1BWF9CVUZGRVJfTEVOR1RILCAxMClcbiAgICB2YXIgbWF4QWN0dWFsID0gMFxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gYnVmZmVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBsZW4gPSBwYXJzZXJbYnVmZmVyc1tpXV0ubGVuZ3RoXG4gICAgICBpZiAobGVuID4gbWF4QWxsb3dlZCkge1xuICAgICAgICAvLyBUZXh0L2NkYXRhIG5vZGVzIGNhbiBnZXQgYmlnLCBhbmQgc2luY2UgdGhleSdyZSBidWZmZXJlZCxcbiAgICAgICAgLy8gd2UgY2FuIGdldCBoZXJlIHVuZGVyIG5vcm1hbCBjb25kaXRpb25zLlxuICAgICAgICAvLyBBdm9pZCBpc3N1ZXMgYnkgZW1pdHRpbmcgdGhlIHRleHQgbm9kZSBub3csXG4gICAgICAgIC8vIHNvIGF0IGxlYXN0IGl0IHdvbid0IGdldCBhbnkgYmlnZ2VyLlxuICAgICAgICBzd2l0Y2ggKGJ1ZmZlcnNbaV0pIHtcbiAgICAgICAgICBjYXNlICd0ZXh0Tm9kZSc6XG4gICAgICAgICAgICBjbG9zZVRleHQocGFyc2VyKVxuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGNhc2UgJ2NkYXRhJzpcbiAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgJ29uY2RhdGEnLCBwYXJzZXIuY2RhdGEpXG4gICAgICAgICAgICBwYXJzZXIuY2RhdGEgPSAnJ1xuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGNhc2UgJ3NjcmlwdCc6XG4gICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsICdvbnNjcmlwdCcsIHBhcnNlci5zY3JpcHQpXG4gICAgICAgICAgICBwYXJzZXIuc2NyaXB0ID0gJydcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgZXJyb3IocGFyc2VyLCAnTWF4IGJ1ZmZlciBsZW5ndGggZXhjZWVkZWQ6ICcgKyBidWZmZXJzW2ldKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBtYXhBY3R1YWwgPSBNYXRoLm1heChtYXhBY3R1YWwsIGxlbilcbiAgICB9XG4gICAgLy8gc2NoZWR1bGUgdGhlIG5leHQgY2hlY2sgZm9yIHRoZSBlYXJsaWVzdCBwb3NzaWJsZSBidWZmZXIgb3ZlcnJ1bi5cbiAgICB2YXIgbSA9IHNheC5NQVhfQlVGRkVSX0xFTkdUSCAtIG1heEFjdHVhbFxuICAgIHBhcnNlci5idWZmZXJDaGVja1Bvc2l0aW9uID0gbSArIHBhcnNlci5wb3NpdGlvblxuICB9XG5cbiAgZnVuY3Rpb24gY2xlYXJCdWZmZXJzIChwYXJzZXIpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGJ1ZmZlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBwYXJzZXJbYnVmZmVyc1tpXV0gPSAnJ1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGZsdXNoQnVmZmVycyAocGFyc2VyKSB7XG4gICAgY2xvc2VUZXh0KHBhcnNlcilcbiAgICBpZiAocGFyc2VyLmNkYXRhICE9PSAnJykge1xuICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25jZGF0YScsIHBhcnNlci5jZGF0YSlcbiAgICAgIHBhcnNlci5jZGF0YSA9ICcnXG4gICAgfVxuICAgIGlmIChwYXJzZXIuc2NyaXB0ICE9PSAnJykge1xuICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25zY3JpcHQnLCBwYXJzZXIuc2NyaXB0KVxuICAgICAgcGFyc2VyLnNjcmlwdCA9ICcnXG4gICAgfVxuICB9XG5cbiAgU0FYUGFyc2VyLnByb3RvdHlwZSA9IHtcbiAgICBlbmQ6IGZ1bmN0aW9uICgpIHsgZW5kKHRoaXMpIH0sXG4gICAgd3JpdGU6IHdyaXRlLFxuICAgIHJlc3VtZTogZnVuY3Rpb24gKCkgeyB0aGlzLmVycm9yID0gbnVsbDsgcmV0dXJuIHRoaXMgfSxcbiAgICBjbG9zZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy53cml0ZShudWxsKSB9LFxuICAgIGZsdXNoOiBmdW5jdGlvbiAoKSB7IGZsdXNoQnVmZmVycyh0aGlzKSB9XG4gIH1cblxuICB2YXIgU3RyZWFtXG4gIHRyeSB7XG4gICAgU3RyZWFtID0gcmVxdWlyZSgnc3RyZWFtJykuU3RyZWFtXG4gIH0gY2F0Y2ggKGV4KSB7XG4gICAgU3RyZWFtID0gZnVuY3Rpb24gKCkge31cbiAgfVxuXG4gIHZhciBzdHJlYW1XcmFwcyA9IHNheC5FVkVOVFMuZmlsdGVyKGZ1bmN0aW9uIChldikge1xuICAgIHJldHVybiBldiAhPT0gJ2Vycm9yJyAmJiBldiAhPT0gJ2VuZCdcbiAgfSlcblxuICBmdW5jdGlvbiBjcmVhdGVTdHJlYW0gKHN0cmljdCwgb3B0KSB7XG4gICAgcmV0dXJuIG5ldyBTQVhTdHJlYW0oc3RyaWN0LCBvcHQpXG4gIH1cblxuICBmdW5jdGlvbiBTQVhTdHJlYW0gKHN0cmljdCwgb3B0KSB7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNBWFN0cmVhbSkpIHtcbiAgICAgIHJldHVybiBuZXcgU0FYU3RyZWFtKHN0cmljdCwgb3B0KVxuICAgIH1cblxuICAgIFN0cmVhbS5hcHBseSh0aGlzKVxuXG4gICAgdGhpcy5fcGFyc2VyID0gbmV3IFNBWFBhcnNlcihzdHJpY3QsIG9wdClcbiAgICB0aGlzLndyaXRhYmxlID0gdHJ1ZVxuICAgIHRoaXMucmVhZGFibGUgPSB0cnVlXG5cbiAgICB2YXIgbWUgPSB0aGlzXG5cbiAgICB0aGlzLl9wYXJzZXIub25lbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBtZS5lbWl0KCdlbmQnKVxuICAgIH1cblxuICAgIHRoaXMuX3BhcnNlci5vbmVycm9yID0gZnVuY3Rpb24gKGVyKSB7XG4gICAgICBtZS5lbWl0KCdlcnJvcicsIGVyKVxuXG4gICAgICAvLyBpZiBkaWRuJ3QgdGhyb3csIHRoZW4gbWVhbnMgZXJyb3Igd2FzIGhhbmRsZWQuXG4gICAgICAvLyBnbyBhaGVhZCBhbmQgY2xlYXIgZXJyb3IsIHNvIHdlIGNhbiB3cml0ZSBhZ2Fpbi5cbiAgICAgIG1lLl9wYXJzZXIuZXJyb3IgPSBudWxsXG4gICAgfVxuXG4gICAgdGhpcy5fZGVjb2RlciA9IG51bGxcblxuICAgIHN0cmVhbVdyYXBzLmZvckVhY2goZnVuY3Rpb24gKGV2KSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobWUsICdvbicgKyBldiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gbWUuX3BhcnNlclsnb24nICsgZXZdXG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKGgpIHtcbiAgICAgICAgICBpZiAoIWgpIHtcbiAgICAgICAgICAgIG1lLnJlbW92ZUFsbExpc3RlbmVycyhldilcbiAgICAgICAgICAgIG1lLl9wYXJzZXJbJ29uJyArIGV2XSA9IGhcbiAgICAgICAgICAgIHJldHVybiBoXG4gICAgICAgICAgfVxuICAgICAgICAgIG1lLm9uKGV2LCBoKVxuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBTQVhTdHJlYW0ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdHJlYW0ucHJvdG90eXBlLCB7XG4gICAgY29uc3RydWN0b3I6IHtcbiAgICAgIHZhbHVlOiBTQVhTdHJlYW1cbiAgICB9XG4gIH0pXG5cbiAgU0FYU3RyZWFtLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgaWYgKHR5cGVvZiBCdWZmZXIgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgIHR5cGVvZiBCdWZmZXIuaXNCdWZmZXIgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgIEJ1ZmZlci5pc0J1ZmZlcihkYXRhKSkge1xuICAgICAgaWYgKCF0aGlzLl9kZWNvZGVyKSB7XG4gICAgICAgIHZhciBTRCA9IHJlcXVpcmUoJ3N0cmluZ19kZWNvZGVyJykuU3RyaW5nRGVjb2RlclxuICAgICAgICB0aGlzLl9kZWNvZGVyID0gbmV3IFNEKCd1dGY4JylcbiAgICAgIH1cbiAgICAgIGRhdGEgPSB0aGlzLl9kZWNvZGVyLndyaXRlKGRhdGEpXG4gICAgfVxuXG4gICAgdGhpcy5fcGFyc2VyLndyaXRlKGRhdGEudG9TdHJpbmcoKSlcbiAgICB0aGlzLmVtaXQoJ2RhdGEnLCBkYXRhKVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBTQVhTdHJlYW0ucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uIChjaHVuaykge1xuICAgIGlmIChjaHVuayAmJiBjaHVuay5sZW5ndGgpIHtcbiAgICAgIHRoaXMud3JpdGUoY2h1bmspXG4gICAgfVxuICAgIHRoaXMuX3BhcnNlci5lbmQoKVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBTQVhTdHJlYW0ucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2LCBoYW5kbGVyKSB7XG4gICAgdmFyIG1lID0gdGhpc1xuICAgIGlmICghbWUuX3BhcnNlclsnb24nICsgZXZdICYmIHN0cmVhbVdyYXBzLmluZGV4T2YoZXYpICE9PSAtMSkge1xuICAgICAgbWUuX3BhcnNlclsnb24nICsgZXZdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyBbYXJndW1lbnRzWzBdXSA6IEFycmF5LmFwcGx5KG51bGwsIGFyZ3VtZW50cylcbiAgICAgICAgYXJncy5zcGxpY2UoMCwgMCwgZXYpXG4gICAgICAgIG1lLmVtaXQuYXBwbHkobWUsIGFyZ3MpXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFN0cmVhbS5wcm90b3R5cGUub24uY2FsbChtZSwgZXYsIGhhbmRsZXIpXG4gIH1cblxuICAvLyB0aGlzIHJlYWxseSBuZWVkcyB0byBiZSByZXBsYWNlZCB3aXRoIGNoYXJhY3RlciBjbGFzc2VzLlxuICAvLyBYTUwgYWxsb3dzIGFsbCBtYW5uZXIgb2YgcmlkaWN1bG91cyBudW1iZXJzIGFuZCBkaWdpdHMuXG4gIHZhciBDREFUQSA9ICdbQ0RBVEFbJ1xuICB2YXIgRE9DVFlQRSA9ICdET0NUWVBFJ1xuICB2YXIgWE1MX05BTUVTUEFDRSA9ICdodHRwOi8vd3d3LnczLm9yZy9YTUwvMTk5OC9uYW1lc3BhY2UnXG4gIHZhciBYTUxOU19OQU1FU1BBQ0UgPSAnaHR0cDovL3d3dy53My5vcmcvMjAwMC94bWxucy8nXG4gIHZhciByb290TlMgPSB7IHhtbDogWE1MX05BTUVTUEFDRSwgeG1sbnM6IFhNTE5TX05BTUVTUEFDRSB9XG5cbiAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvUkVDLXhtbC8jTlQtTmFtZVN0YXJ0Q2hhclxuICAvLyBUaGlzIGltcGxlbWVudGF0aW9uIHdvcmtzIG9uIHN0cmluZ3MsIGEgc2luZ2xlIGNoYXJhY3RlciBhdCBhIHRpbWVcbiAgLy8gYXMgc3VjaCwgaXQgY2Fubm90IGV2ZXIgc3VwcG9ydCBhc3RyYWwtcGxhbmUgY2hhcmFjdGVycyAoMTAwMDAtRUZGRkYpXG4gIC8vIHdpdGhvdXQgYSBzaWduaWZpY2FudCBicmVha2luZyBjaGFuZ2UgdG8gZWl0aGVyIHRoaXMgIHBhcnNlciwgb3IgdGhlXG4gIC8vIEphdmFTY3JpcHQgbGFuZ3VhZ2UuICBJbXBsZW1lbnRhdGlvbiBvZiBhbiBlbW9qaS1jYXBhYmxlIHhtbCBwYXJzZXJcbiAgLy8gaXMgbGVmdCBhcyBhbiBleGVyY2lzZSBmb3IgdGhlIHJlYWRlci5cbiAgdmFyIG5hbWVTdGFydCA9IC9bOl9BLVphLXpcXHUwMEMwLVxcdTAwRDZcXHUwMEQ4LVxcdTAwRjZcXHUwMEY4LVxcdTAyRkZcXHUwMzcwLVxcdTAzN0RcXHUwMzdGLVxcdTFGRkZcXHUyMDBDLVxcdTIwMERcXHUyMDcwLVxcdTIxOEZcXHUyQzAwLVxcdTJGRUZcXHUzMDAxLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRkRdL1xuXG4gIHZhciBuYW1lQm9keSA9IC9bOl9BLVphLXpcXHUwMEMwLVxcdTAwRDZcXHUwMEQ4LVxcdTAwRjZcXHUwMEY4LVxcdTAyRkZcXHUwMzcwLVxcdTAzN0RcXHUwMzdGLVxcdTFGRkZcXHUyMDBDLVxcdTIwMERcXHUyMDcwLVxcdTIxOEZcXHUyQzAwLVxcdTJGRUZcXHUzMDAxLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRkRcXHUwMEI3XFx1MDMwMC1cXHUwMzZGXFx1MjAzRi1cXHUyMDQwLlxcZC1dL1xuXG4gIHZhciBlbnRpdHlTdGFydCA9IC9bIzpfQS1aYS16XFx1MDBDMC1cXHUwMEQ2XFx1MDBEOC1cXHUwMEY2XFx1MDBGOC1cXHUwMkZGXFx1MDM3MC1cXHUwMzdEXFx1MDM3Ri1cXHUxRkZGXFx1MjAwQy1cXHUyMDBEXFx1MjA3MC1cXHUyMThGXFx1MkMwMC1cXHUyRkVGXFx1MzAwMS1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkZEXS9cbiAgdmFyIGVudGl0eUJvZHkgPSAvWyM6X0EtWmEtelxcdTAwQzAtXFx1MDBENlxcdTAwRDgtXFx1MDBGNlxcdTAwRjgtXFx1MDJGRlxcdTAzNzAtXFx1MDM3RFxcdTAzN0YtXFx1MUZGRlxcdTIwMEMtXFx1MjAwRFxcdTIwNzAtXFx1MjE4RlxcdTJDMDAtXFx1MkZFRlxcdTMwMDEtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZGRFxcdTAwQjdcXHUwMzAwLVxcdTAzNkZcXHUyMDNGLVxcdTIwNDAuXFxkLV0vXG5cbiAgZnVuY3Rpb24gaXNXaGl0ZXNwYWNlIChjKSB7XG4gICAgcmV0dXJuIGMgPT09ICcgJyB8fCBjID09PSAnXFxuJyB8fCBjID09PSAnXFxyJyB8fCBjID09PSAnXFx0J1xuICB9XG5cbiAgZnVuY3Rpb24gaXNRdW90ZSAoYykge1xuICAgIHJldHVybiBjID09PSAnXCInIHx8IGMgPT09ICdcXCcnXG4gIH1cblxuICBmdW5jdGlvbiBpc0F0dHJpYkVuZCAoYykge1xuICAgIHJldHVybiBjID09PSAnPicgfHwgaXNXaGl0ZXNwYWNlKGMpXG4gIH1cblxuICBmdW5jdGlvbiBpc01hdGNoIChyZWdleCwgYykge1xuICAgIHJldHVybiByZWdleC50ZXN0KGMpXG4gIH1cblxuICBmdW5jdGlvbiBub3RNYXRjaCAocmVnZXgsIGMpIHtcbiAgICByZXR1cm4gIWlzTWF0Y2gocmVnZXgsIGMpXG4gIH1cblxuICB2YXIgUyA9IDBcbiAgc2F4LlNUQVRFID0ge1xuICAgIEJFR0lOOiBTKyssIC8vIGxlYWRpbmcgYnl0ZSBvcmRlciBtYXJrIG9yIHdoaXRlc3BhY2VcbiAgICBCRUdJTl9XSElURVNQQUNFOiBTKyssIC8vIGxlYWRpbmcgd2hpdGVzcGFjZVxuICAgIFRFWFQ6IFMrKywgLy8gZ2VuZXJhbCBzdHVmZlxuICAgIFRFWFRfRU5USVRZOiBTKyssIC8vICZhbXAgYW5kIHN1Y2guXG4gICAgT1BFTl9XQUtBOiBTKyssIC8vIDxcbiAgICBTR01MX0RFQ0w6IFMrKywgLy8gPCFCTEFSR1xuICAgIFNHTUxfREVDTF9RVU9URUQ6IFMrKywgLy8gPCFCTEFSRyBmb28gXCJiYXJcbiAgICBET0NUWVBFOiBTKyssIC8vIDwhRE9DVFlQRVxuICAgIERPQ1RZUEVfUVVPVEVEOiBTKyssIC8vIDwhRE9DVFlQRSBcIi8vYmxhaFxuICAgIERPQ1RZUEVfRFREOiBTKyssIC8vIDwhRE9DVFlQRSBcIi8vYmxhaFwiIFsgLi4uXG4gICAgRE9DVFlQRV9EVERfUVVPVEVEOiBTKyssIC8vIDwhRE9DVFlQRSBcIi8vYmxhaFwiIFsgXCJmb29cbiAgICBDT01NRU5UX1NUQVJUSU5HOiBTKyssIC8vIDwhLVxuICAgIENPTU1FTlQ6IFMrKywgLy8gPCEtLVxuICAgIENPTU1FTlRfRU5ESU5HOiBTKyssIC8vIDwhLS0gYmxhaCAtXG4gICAgQ09NTUVOVF9FTkRFRDogUysrLCAvLyA8IS0tIGJsYWggLS1cbiAgICBDREFUQTogUysrLCAvLyA8IVtDREFUQVsgc29tZXRoaW5nXG4gICAgQ0RBVEFfRU5ESU5HOiBTKyssIC8vIF1cbiAgICBDREFUQV9FTkRJTkdfMjogUysrLCAvLyBdXVxuICAgIFBST0NfSU5TVDogUysrLCAvLyA8P2hpXG4gICAgUFJPQ19JTlNUX0JPRFk6IFMrKywgLy8gPD9oaSB0aGVyZVxuICAgIFBST0NfSU5TVF9FTkRJTkc6IFMrKywgLy8gPD9oaSBcInRoZXJlXCIgP1xuICAgIE9QRU5fVEFHOiBTKyssIC8vIDxzdHJvbmdcbiAgICBPUEVOX1RBR19TTEFTSDogUysrLCAvLyA8c3Ryb25nIC9cbiAgICBBVFRSSUI6IFMrKywgLy8gPGFcbiAgICBBVFRSSUJfTkFNRTogUysrLCAvLyA8YSBmb29cbiAgICBBVFRSSUJfTkFNRV9TQVdfV0hJVEU6IFMrKywgLy8gPGEgZm9vIF9cbiAgICBBVFRSSUJfVkFMVUU6IFMrKywgLy8gPGEgZm9vPVxuICAgIEFUVFJJQl9WQUxVRV9RVU9URUQ6IFMrKywgLy8gPGEgZm9vPVwiYmFyXG4gICAgQVRUUklCX1ZBTFVFX0NMT1NFRDogUysrLCAvLyA8YSBmb289XCJiYXJcIlxuICAgIEFUVFJJQl9WQUxVRV9VTlFVT1RFRDogUysrLCAvLyA8YSBmb289YmFyXG4gICAgQVRUUklCX1ZBTFVFX0VOVElUWV9ROiBTKyssIC8vIDxmb28gYmFyPVwiJnF1b3Q7XCJcbiAgICBBVFRSSUJfVkFMVUVfRU5USVRZX1U6IFMrKywgLy8gPGZvbyBiYXI9JnF1b3RcbiAgICBDTE9TRV9UQUc6IFMrKywgLy8gPC9hXG4gICAgQ0xPU0VfVEFHX1NBV19XSElURTogUysrLCAvLyA8L2EgICA+XG4gICAgU0NSSVBUOiBTKyssIC8vIDxzY3JpcHQ+IC4uLlxuICAgIFNDUklQVF9FTkRJTkc6IFMrKyAvLyA8c2NyaXB0PiAuLi4gPFxuICB9XG5cbiAgc2F4LlhNTF9FTlRJVElFUyA9IHtcbiAgICAnYW1wJzogJyYnLFxuICAgICdndCc6ICc+JyxcbiAgICAnbHQnOiAnPCcsXG4gICAgJ3F1b3QnOiAnXCInLFxuICAgICdhcG9zJzogXCInXCJcbiAgfVxuXG4gIHNheC5FTlRJVElFUyA9IHtcbiAgICAnYW1wJzogJyYnLFxuICAgICdndCc6ICc+JyxcbiAgICAnbHQnOiAnPCcsXG4gICAgJ3F1b3QnOiAnXCInLFxuICAgICdhcG9zJzogXCInXCIsXG4gICAgJ0FFbGlnJzogMTk4LFxuICAgICdBYWN1dGUnOiAxOTMsXG4gICAgJ0FjaXJjJzogMTk0LFxuICAgICdBZ3JhdmUnOiAxOTIsXG4gICAgJ0FyaW5nJzogMTk3LFxuICAgICdBdGlsZGUnOiAxOTUsXG4gICAgJ0F1bWwnOiAxOTYsXG4gICAgJ0NjZWRpbCc6IDE5OSxcbiAgICAnRVRIJzogMjA4LFxuICAgICdFYWN1dGUnOiAyMDEsXG4gICAgJ0VjaXJjJzogMjAyLFxuICAgICdFZ3JhdmUnOiAyMDAsXG4gICAgJ0V1bWwnOiAyMDMsXG4gICAgJ0lhY3V0ZSc6IDIwNSxcbiAgICAnSWNpcmMnOiAyMDYsXG4gICAgJ0lncmF2ZSc6IDIwNCxcbiAgICAnSXVtbCc6IDIwNyxcbiAgICAnTnRpbGRlJzogMjA5LFxuICAgICdPYWN1dGUnOiAyMTEsXG4gICAgJ09jaXJjJzogMjEyLFxuICAgICdPZ3JhdmUnOiAyMTAsXG4gICAgJ09zbGFzaCc6IDIxNixcbiAgICAnT3RpbGRlJzogMjEzLFxuICAgICdPdW1sJzogMjE0LFxuICAgICdUSE9STic6IDIyMixcbiAgICAnVWFjdXRlJzogMjE4LFxuICAgICdVY2lyYyc6IDIxOSxcbiAgICAnVWdyYXZlJzogMjE3LFxuICAgICdVdW1sJzogMjIwLFxuICAgICdZYWN1dGUnOiAyMjEsXG4gICAgJ2FhY3V0ZSc6IDIyNSxcbiAgICAnYWNpcmMnOiAyMjYsXG4gICAgJ2FlbGlnJzogMjMwLFxuICAgICdhZ3JhdmUnOiAyMjQsXG4gICAgJ2FyaW5nJzogMjI5LFxuICAgICdhdGlsZGUnOiAyMjcsXG4gICAgJ2F1bWwnOiAyMjgsXG4gICAgJ2NjZWRpbCc6IDIzMSxcbiAgICAnZWFjdXRlJzogMjMzLFxuICAgICdlY2lyYyc6IDIzNCxcbiAgICAnZWdyYXZlJzogMjMyLFxuICAgICdldGgnOiAyNDAsXG4gICAgJ2V1bWwnOiAyMzUsXG4gICAgJ2lhY3V0ZSc6IDIzNyxcbiAgICAnaWNpcmMnOiAyMzgsXG4gICAgJ2lncmF2ZSc6IDIzNixcbiAgICAnaXVtbCc6IDIzOSxcbiAgICAnbnRpbGRlJzogMjQxLFxuICAgICdvYWN1dGUnOiAyNDMsXG4gICAgJ29jaXJjJzogMjQ0LFxuICAgICdvZ3JhdmUnOiAyNDIsXG4gICAgJ29zbGFzaCc6IDI0OCxcbiAgICAnb3RpbGRlJzogMjQ1LFxuICAgICdvdW1sJzogMjQ2LFxuICAgICdzemxpZyc6IDIyMyxcbiAgICAndGhvcm4nOiAyNTQsXG4gICAgJ3VhY3V0ZSc6IDI1MCxcbiAgICAndWNpcmMnOiAyNTEsXG4gICAgJ3VncmF2ZSc6IDI0OSxcbiAgICAndXVtbCc6IDI1MixcbiAgICAneWFjdXRlJzogMjUzLFxuICAgICd5dW1sJzogMjU1LFxuICAgICdjb3B5JzogMTY5LFxuICAgICdyZWcnOiAxNzQsXG4gICAgJ25ic3AnOiAxNjAsXG4gICAgJ2lleGNsJzogMTYxLFxuICAgICdjZW50JzogMTYyLFxuICAgICdwb3VuZCc6IDE2MyxcbiAgICAnY3VycmVuJzogMTY0LFxuICAgICd5ZW4nOiAxNjUsXG4gICAgJ2JydmJhcic6IDE2NixcbiAgICAnc2VjdCc6IDE2NyxcbiAgICAndW1sJzogMTY4LFxuICAgICdvcmRmJzogMTcwLFxuICAgICdsYXF1byc6IDE3MSxcbiAgICAnbm90JzogMTcyLFxuICAgICdzaHknOiAxNzMsXG4gICAgJ21hY3InOiAxNzUsXG4gICAgJ2RlZyc6IDE3NixcbiAgICAncGx1c21uJzogMTc3LFxuICAgICdzdXAxJzogMTg1LFxuICAgICdzdXAyJzogMTc4LFxuICAgICdzdXAzJzogMTc5LFxuICAgICdhY3V0ZSc6IDE4MCxcbiAgICAnbWljcm8nOiAxODEsXG4gICAgJ3BhcmEnOiAxODIsXG4gICAgJ21pZGRvdCc6IDE4MyxcbiAgICAnY2VkaWwnOiAxODQsXG4gICAgJ29yZG0nOiAxODYsXG4gICAgJ3JhcXVvJzogMTg3LFxuICAgICdmcmFjMTQnOiAxODgsXG4gICAgJ2ZyYWMxMic6IDE4OSxcbiAgICAnZnJhYzM0JzogMTkwLFxuICAgICdpcXVlc3QnOiAxOTEsXG4gICAgJ3RpbWVzJzogMjE1LFxuICAgICdkaXZpZGUnOiAyNDcsXG4gICAgJ09FbGlnJzogMzM4LFxuICAgICdvZWxpZyc6IDMzOSxcbiAgICAnU2Nhcm9uJzogMzUyLFxuICAgICdzY2Fyb24nOiAzNTMsXG4gICAgJ1l1bWwnOiAzNzYsXG4gICAgJ2Zub2YnOiA0MDIsXG4gICAgJ2NpcmMnOiA3MTAsXG4gICAgJ3RpbGRlJzogNzMyLFxuICAgICdBbHBoYSc6IDkxMyxcbiAgICAnQmV0YSc6IDkxNCxcbiAgICAnR2FtbWEnOiA5MTUsXG4gICAgJ0RlbHRhJzogOTE2LFxuICAgICdFcHNpbG9uJzogOTE3LFxuICAgICdaZXRhJzogOTE4LFxuICAgICdFdGEnOiA5MTksXG4gICAgJ1RoZXRhJzogOTIwLFxuICAgICdJb3RhJzogOTIxLFxuICAgICdLYXBwYSc6IDkyMixcbiAgICAnTGFtYmRhJzogOTIzLFxuICAgICdNdSc6IDkyNCxcbiAgICAnTnUnOiA5MjUsXG4gICAgJ1hpJzogOTI2LFxuICAgICdPbWljcm9uJzogOTI3LFxuICAgICdQaSc6IDkyOCxcbiAgICAnUmhvJzogOTI5LFxuICAgICdTaWdtYSc6IDkzMSxcbiAgICAnVGF1JzogOTMyLFxuICAgICdVcHNpbG9uJzogOTMzLFxuICAgICdQaGknOiA5MzQsXG4gICAgJ0NoaSc6IDkzNSxcbiAgICAnUHNpJzogOTM2LFxuICAgICdPbWVnYSc6IDkzNyxcbiAgICAnYWxwaGEnOiA5NDUsXG4gICAgJ2JldGEnOiA5NDYsXG4gICAgJ2dhbW1hJzogOTQ3LFxuICAgICdkZWx0YSc6IDk0OCxcbiAgICAnZXBzaWxvbic6IDk0OSxcbiAgICAnemV0YSc6IDk1MCxcbiAgICAnZXRhJzogOTUxLFxuICAgICd0aGV0YSc6IDk1MixcbiAgICAnaW90YSc6IDk1MyxcbiAgICAna2FwcGEnOiA5NTQsXG4gICAgJ2xhbWJkYSc6IDk1NSxcbiAgICAnbXUnOiA5NTYsXG4gICAgJ251JzogOTU3LFxuICAgICd4aSc6IDk1OCxcbiAgICAnb21pY3Jvbic6IDk1OSxcbiAgICAncGknOiA5NjAsXG4gICAgJ3Jobyc6IDk2MSxcbiAgICAnc2lnbWFmJzogOTYyLFxuICAgICdzaWdtYSc6IDk2MyxcbiAgICAndGF1JzogOTY0LFxuICAgICd1cHNpbG9uJzogOTY1LFxuICAgICdwaGknOiA5NjYsXG4gICAgJ2NoaSc6IDk2NyxcbiAgICAncHNpJzogOTY4LFxuICAgICdvbWVnYSc6IDk2OSxcbiAgICAndGhldGFzeW0nOiA5NzcsXG4gICAgJ3Vwc2loJzogOTc4LFxuICAgICdwaXYnOiA5ODIsXG4gICAgJ2Vuc3AnOiA4MTk0LFxuICAgICdlbXNwJzogODE5NSxcbiAgICAndGhpbnNwJzogODIwMSxcbiAgICAnenduaic6IDgyMDQsXG4gICAgJ3p3aic6IDgyMDUsXG4gICAgJ2xybSc6IDgyMDYsXG4gICAgJ3JsbSc6IDgyMDcsXG4gICAgJ25kYXNoJzogODIxMSxcbiAgICAnbWRhc2gnOiA4MjEyLFxuICAgICdsc3F1byc6IDgyMTYsXG4gICAgJ3JzcXVvJzogODIxNyxcbiAgICAnc2JxdW8nOiA4MjE4LFxuICAgICdsZHF1byc6IDgyMjAsXG4gICAgJ3JkcXVvJzogODIyMSxcbiAgICAnYmRxdW8nOiA4MjIyLFxuICAgICdkYWdnZXInOiA4MjI0LFxuICAgICdEYWdnZXInOiA4MjI1LFxuICAgICdidWxsJzogODIyNixcbiAgICAnaGVsbGlwJzogODIzMCxcbiAgICAncGVybWlsJzogODI0MCxcbiAgICAncHJpbWUnOiA4MjQyLFxuICAgICdQcmltZSc6IDgyNDMsXG4gICAgJ2xzYXF1byc6IDgyNDksXG4gICAgJ3JzYXF1byc6IDgyNTAsXG4gICAgJ29saW5lJzogODI1NCxcbiAgICAnZnJhc2wnOiA4MjYwLFxuICAgICdldXJvJzogODM2NCxcbiAgICAnaW1hZ2UnOiA4NDY1LFxuICAgICd3ZWllcnAnOiA4NDcyLFxuICAgICdyZWFsJzogODQ3NixcbiAgICAndHJhZGUnOiA4NDgyLFxuICAgICdhbGVmc3ltJzogODUwMSxcbiAgICAnbGFycic6IDg1OTIsXG4gICAgJ3VhcnInOiA4NTkzLFxuICAgICdyYXJyJzogODU5NCxcbiAgICAnZGFycic6IDg1OTUsXG4gICAgJ2hhcnInOiA4NTk2LFxuICAgICdjcmFycic6IDg2MjksXG4gICAgJ2xBcnInOiA4NjU2LFxuICAgICd1QXJyJzogODY1NyxcbiAgICAnckFycic6IDg2NTgsXG4gICAgJ2RBcnInOiA4NjU5LFxuICAgICdoQXJyJzogODY2MCxcbiAgICAnZm9yYWxsJzogODcwNCxcbiAgICAncGFydCc6IDg3MDYsXG4gICAgJ2V4aXN0JzogODcwNyxcbiAgICAnZW1wdHknOiA4NzA5LFxuICAgICduYWJsYSc6IDg3MTEsXG4gICAgJ2lzaW4nOiA4NzEyLFxuICAgICdub3Rpbic6IDg3MTMsXG4gICAgJ25pJzogODcxNSxcbiAgICAncHJvZCc6IDg3MTksXG4gICAgJ3N1bSc6IDg3MjEsXG4gICAgJ21pbnVzJzogODcyMixcbiAgICAnbG93YXN0JzogODcyNyxcbiAgICAncmFkaWMnOiA4NzMwLFxuICAgICdwcm9wJzogODczMyxcbiAgICAnaW5maW4nOiA4NzM0LFxuICAgICdhbmcnOiA4NzM2LFxuICAgICdhbmQnOiA4NzQzLFxuICAgICdvcic6IDg3NDQsXG4gICAgJ2NhcCc6IDg3NDUsXG4gICAgJ2N1cCc6IDg3NDYsXG4gICAgJ2ludCc6IDg3NDcsXG4gICAgJ3RoZXJlNCc6IDg3NTYsXG4gICAgJ3NpbSc6IDg3NjQsXG4gICAgJ2NvbmcnOiA4NzczLFxuICAgICdhc3ltcCc6IDg3NzYsXG4gICAgJ25lJzogODgwMCxcbiAgICAnZXF1aXYnOiA4ODAxLFxuICAgICdsZSc6IDg4MDQsXG4gICAgJ2dlJzogODgwNSxcbiAgICAnc3ViJzogODgzNCxcbiAgICAnc3VwJzogODgzNSxcbiAgICAnbnN1Yic6IDg4MzYsXG4gICAgJ3N1YmUnOiA4ODM4LFxuICAgICdzdXBlJzogODgzOSxcbiAgICAnb3BsdXMnOiA4ODUzLFxuICAgICdvdGltZXMnOiA4ODU1LFxuICAgICdwZXJwJzogODg2OSxcbiAgICAnc2RvdCc6IDg5MDEsXG4gICAgJ2xjZWlsJzogODk2OCxcbiAgICAncmNlaWwnOiA4OTY5LFxuICAgICdsZmxvb3InOiA4OTcwLFxuICAgICdyZmxvb3InOiA4OTcxLFxuICAgICdsYW5nJzogOTAwMSxcbiAgICAncmFuZyc6IDkwMDIsXG4gICAgJ2xveic6IDk2NzQsXG4gICAgJ3NwYWRlcyc6IDk4MjQsXG4gICAgJ2NsdWJzJzogOTgyNyxcbiAgICAnaGVhcnRzJzogOTgyOSxcbiAgICAnZGlhbXMnOiA5ODMwXG4gIH1cblxuICBPYmplY3Qua2V5cyhzYXguRU5USVRJRVMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHZhciBlID0gc2F4LkVOVElUSUVTW2tleV1cbiAgICB2YXIgcyA9IHR5cGVvZiBlID09PSAnbnVtYmVyJyA/IFN0cmluZy5mcm9tQ2hhckNvZGUoZSkgOiBlXG4gICAgc2F4LkVOVElUSUVTW2tleV0gPSBzXG4gIH0pXG5cbiAgZm9yICh2YXIgcyBpbiBzYXguU1RBVEUpIHtcbiAgICBzYXguU1RBVEVbc2F4LlNUQVRFW3NdXSA9IHNcbiAgfVxuXG4gIC8vIHNob3J0aGFuZFxuICBTID0gc2F4LlNUQVRFXG5cbiAgZnVuY3Rpb24gZW1pdCAocGFyc2VyLCBldmVudCwgZGF0YSkge1xuICAgIHBhcnNlcltldmVudF0gJiYgcGFyc2VyW2V2ZW50XShkYXRhKVxuICB9XG5cbiAgZnVuY3Rpb24gZW1pdE5vZGUgKHBhcnNlciwgbm9kZVR5cGUsIGRhdGEpIHtcbiAgICBpZiAocGFyc2VyLnRleHROb2RlKSBjbG9zZVRleHQocGFyc2VyKVxuICAgIGVtaXQocGFyc2VyLCBub2RlVHlwZSwgZGF0YSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsb3NlVGV4dCAocGFyc2VyKSB7XG4gICAgcGFyc2VyLnRleHROb2RlID0gdGV4dG9wdHMocGFyc2VyLm9wdCwgcGFyc2VyLnRleHROb2RlKVxuICAgIGlmIChwYXJzZXIudGV4dE5vZGUpIGVtaXQocGFyc2VyLCAnb250ZXh0JywgcGFyc2VyLnRleHROb2RlKVxuICAgIHBhcnNlci50ZXh0Tm9kZSA9ICcnXG4gIH1cblxuICBmdW5jdGlvbiB0ZXh0b3B0cyAob3B0LCB0ZXh0KSB7XG4gICAgaWYgKG9wdC50cmltKSB0ZXh0ID0gdGV4dC50cmltKClcbiAgICBpZiAob3B0Lm5vcm1hbGl6ZSkgdGV4dCA9IHRleHQucmVwbGFjZSgvXFxzKy9nLCAnICcpXG4gICAgcmV0dXJuIHRleHRcbiAgfVxuXG4gIGZ1bmN0aW9uIGVycm9yIChwYXJzZXIsIGVyKSB7XG4gICAgY2xvc2VUZXh0KHBhcnNlcilcbiAgICBpZiAocGFyc2VyLnRyYWNrUG9zaXRpb24pIHtcbiAgICAgIGVyICs9ICdcXG5MaW5lOiAnICsgcGFyc2VyLmxpbmUgK1xuICAgICAgICAnXFxuQ29sdW1uOiAnICsgcGFyc2VyLmNvbHVtbiArXG4gICAgICAgICdcXG5DaGFyOiAnICsgcGFyc2VyLmNcbiAgICB9XG4gICAgZXIgPSBuZXcgRXJyb3IoZXIpXG4gICAgcGFyc2VyLmVycm9yID0gZXJcbiAgICBlbWl0KHBhcnNlciwgJ29uZXJyb3InLCBlcilcbiAgICByZXR1cm4gcGFyc2VyXG4gIH1cblxuICBmdW5jdGlvbiBlbmQgKHBhcnNlcikge1xuICAgIGlmIChwYXJzZXIuc2F3Um9vdCAmJiAhcGFyc2VyLmNsb3NlZFJvb3QpIHN0cmljdEZhaWwocGFyc2VyLCAnVW5jbG9zZWQgcm9vdCB0YWcnKVxuICAgIGlmICgocGFyc2VyLnN0YXRlICE9PSBTLkJFR0lOKSAmJlxuICAgICAgKHBhcnNlci5zdGF0ZSAhPT0gUy5CRUdJTl9XSElURVNQQUNFKSAmJlxuICAgICAgKHBhcnNlci5zdGF0ZSAhPT0gUy5URVhUKSkge1xuICAgICAgZXJyb3IocGFyc2VyLCAnVW5leHBlY3RlZCBlbmQnKVxuICAgIH1cbiAgICBjbG9zZVRleHQocGFyc2VyKVxuICAgIHBhcnNlci5jID0gJydcbiAgICBwYXJzZXIuY2xvc2VkID0gdHJ1ZVxuICAgIGVtaXQocGFyc2VyLCAnb25lbmQnKVxuICAgIFNBWFBhcnNlci5jYWxsKHBhcnNlciwgcGFyc2VyLnN0cmljdCwgcGFyc2VyLm9wdClcbiAgICByZXR1cm4gcGFyc2VyXG4gIH1cblxuICBmdW5jdGlvbiBzdHJpY3RGYWlsIChwYXJzZXIsIG1lc3NhZ2UpIHtcbiAgICBpZiAodHlwZW9mIHBhcnNlciAhPT0gJ29iamVjdCcgfHwgIShwYXJzZXIgaW5zdGFuY2VvZiBTQVhQYXJzZXIpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2JhZCBjYWxsIHRvIHN0cmljdEZhaWwnKVxuICAgIH1cbiAgICBpZiAocGFyc2VyLnN0cmljdCkge1xuICAgICAgZXJyb3IocGFyc2VyLCBtZXNzYWdlKVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG5ld1RhZyAocGFyc2VyKSB7XG4gICAgaWYgKCFwYXJzZXIuc3RyaWN0KSBwYXJzZXIudGFnTmFtZSA9IHBhcnNlci50YWdOYW1lW3BhcnNlci5sb29zZUNhc2VdKClcbiAgICB2YXIgcGFyZW50ID0gcGFyc2VyLnRhZ3NbcGFyc2VyLnRhZ3MubGVuZ3RoIC0gMV0gfHwgcGFyc2VyXG4gICAgdmFyIHRhZyA9IHBhcnNlci50YWcgPSB7IG5hbWU6IHBhcnNlci50YWdOYW1lLCBhdHRyaWJ1dGVzOiB7fSB9XG5cbiAgICAvLyB3aWxsIGJlIG92ZXJyaWRkZW4gaWYgdGFnIGNvbnRhaWxzIGFuIHhtbG5zPVwiZm9vXCIgb3IgeG1sbnM6Zm9vPVwiYmFyXCJcbiAgICBpZiAocGFyc2VyLm9wdC54bWxucykge1xuICAgICAgdGFnLm5zID0gcGFyZW50Lm5zXG4gICAgfVxuICAgIHBhcnNlci5hdHRyaWJMaXN0Lmxlbmd0aCA9IDBcbiAgICBlbWl0Tm9kZShwYXJzZXIsICdvbm9wZW50YWdzdGFydCcsIHRhZylcbiAgfVxuXG4gIGZ1bmN0aW9uIHFuYW1lIChuYW1lLCBhdHRyaWJ1dGUpIHtcbiAgICB2YXIgaSA9IG5hbWUuaW5kZXhPZignOicpXG4gICAgdmFyIHF1YWxOYW1lID0gaSA8IDAgPyBbICcnLCBuYW1lIF0gOiBuYW1lLnNwbGl0KCc6JylcbiAgICB2YXIgcHJlZml4ID0gcXVhbE5hbWVbMF1cbiAgICB2YXIgbG9jYWwgPSBxdWFsTmFtZVsxXVxuXG4gICAgLy8gPHggXCJ4bWxuc1wiPVwiaHR0cDovL2Zvb1wiPlxuICAgIGlmIChhdHRyaWJ1dGUgJiYgbmFtZSA9PT0gJ3htbG5zJykge1xuICAgICAgcHJlZml4ID0gJ3htbG5zJ1xuICAgICAgbG9jYWwgPSAnJ1xuICAgIH1cblxuICAgIHJldHVybiB7IHByZWZpeDogcHJlZml4LCBsb2NhbDogbG9jYWwgfVxuICB9XG5cbiAgZnVuY3Rpb24gYXR0cmliIChwYXJzZXIpIHtcbiAgICBpZiAoIXBhcnNlci5zdHJpY3QpIHtcbiAgICAgIHBhcnNlci5hdHRyaWJOYW1lID0gcGFyc2VyLmF0dHJpYk5hbWVbcGFyc2VyLmxvb3NlQ2FzZV0oKVxuICAgIH1cblxuICAgIGlmIChwYXJzZXIuYXR0cmliTGlzdC5pbmRleE9mKHBhcnNlci5hdHRyaWJOYW1lKSAhPT0gLTEgfHxcbiAgICAgIHBhcnNlci50YWcuYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShwYXJzZXIuYXR0cmliTmFtZSkpIHtcbiAgICAgIHBhcnNlci5hdHRyaWJOYW1lID0gcGFyc2VyLmF0dHJpYlZhbHVlID0gJydcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmIChwYXJzZXIub3B0LnhtbG5zKSB7XG4gICAgICB2YXIgcW4gPSBxbmFtZShwYXJzZXIuYXR0cmliTmFtZSwgdHJ1ZSlcbiAgICAgIHZhciBwcmVmaXggPSBxbi5wcmVmaXhcbiAgICAgIHZhciBsb2NhbCA9IHFuLmxvY2FsXG5cbiAgICAgIGlmIChwcmVmaXggPT09ICd4bWxucycpIHtcbiAgICAgICAgLy8gbmFtZXNwYWNlIGJpbmRpbmcgYXR0cmlidXRlLiBwdXNoIHRoZSBiaW5kaW5nIGludG8gc2NvcGVcbiAgICAgICAgaWYgKGxvY2FsID09PSAneG1sJyAmJiBwYXJzZXIuYXR0cmliVmFsdWUgIT09IFhNTF9OQU1FU1BBQ0UpIHtcbiAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlcixcbiAgICAgICAgICAgICd4bWw6IHByZWZpeCBtdXN0IGJlIGJvdW5kIHRvICcgKyBYTUxfTkFNRVNQQUNFICsgJ1xcbicgK1xuICAgICAgICAgICAgJ0FjdHVhbDogJyArIHBhcnNlci5hdHRyaWJWYWx1ZSlcbiAgICAgICAgfSBlbHNlIGlmIChsb2NhbCA9PT0gJ3htbG5zJyAmJiBwYXJzZXIuYXR0cmliVmFsdWUgIT09IFhNTE5TX05BTUVTUEFDRSkge1xuICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLFxuICAgICAgICAgICAgJ3htbG5zOiBwcmVmaXggbXVzdCBiZSBib3VuZCB0byAnICsgWE1MTlNfTkFNRVNQQUNFICsgJ1xcbicgK1xuICAgICAgICAgICAgJ0FjdHVhbDogJyArIHBhcnNlci5hdHRyaWJWYWx1ZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgdGFnID0gcGFyc2VyLnRhZ1xuICAgICAgICAgIHZhciBwYXJlbnQgPSBwYXJzZXIudGFnc1twYXJzZXIudGFncy5sZW5ndGggLSAxXSB8fCBwYXJzZXJcbiAgICAgICAgICBpZiAodGFnLm5zID09PSBwYXJlbnQubnMpIHtcbiAgICAgICAgICAgIHRhZy5ucyA9IE9iamVjdC5jcmVhdGUocGFyZW50Lm5zKVxuICAgICAgICAgIH1cbiAgICAgICAgICB0YWcubnNbbG9jYWxdID0gcGFyc2VyLmF0dHJpYlZhbHVlXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gZGVmZXIgb25hdHRyaWJ1dGUgZXZlbnRzIHVudGlsIGFsbCBhdHRyaWJ1dGVzIGhhdmUgYmVlbiBzZWVuXG4gICAgICAvLyBzbyBhbnkgbmV3IGJpbmRpbmdzIGNhbiB0YWtlIGVmZmVjdC4gcHJlc2VydmUgYXR0cmlidXRlIG9yZGVyXG4gICAgICAvLyBzbyBkZWZlcnJlZCBldmVudHMgY2FuIGJlIGVtaXR0ZWQgaW4gZG9jdW1lbnQgb3JkZXJcbiAgICAgIHBhcnNlci5hdHRyaWJMaXN0LnB1c2goW3BhcnNlci5hdHRyaWJOYW1lLCBwYXJzZXIuYXR0cmliVmFsdWVdKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBpbiBub24teG1sbnMgbW9kZSwgd2UgY2FuIGVtaXQgdGhlIGV2ZW50IHJpZ2h0IGF3YXlcbiAgICAgIHBhcnNlci50YWcuYXR0cmlidXRlc1twYXJzZXIuYXR0cmliTmFtZV0gPSBwYXJzZXIuYXR0cmliVmFsdWVcbiAgICAgIGVtaXROb2RlKHBhcnNlciwgJ29uYXR0cmlidXRlJywge1xuICAgICAgICBuYW1lOiBwYXJzZXIuYXR0cmliTmFtZSxcbiAgICAgICAgdmFsdWU6IHBhcnNlci5hdHRyaWJWYWx1ZVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBwYXJzZXIuYXR0cmliTmFtZSA9IHBhcnNlci5hdHRyaWJWYWx1ZSA9ICcnXG4gIH1cblxuICBmdW5jdGlvbiBvcGVuVGFnIChwYXJzZXIsIHNlbGZDbG9zaW5nKSB7XG4gICAgaWYgKHBhcnNlci5vcHQueG1sbnMpIHtcbiAgICAgIC8vIGVtaXQgbmFtZXNwYWNlIGJpbmRpbmcgZXZlbnRzXG4gICAgICB2YXIgdGFnID0gcGFyc2VyLnRhZ1xuXG4gICAgICAvLyBhZGQgbmFtZXNwYWNlIGluZm8gdG8gdGFnXG4gICAgICB2YXIgcW4gPSBxbmFtZShwYXJzZXIudGFnTmFtZSlcbiAgICAgIHRhZy5wcmVmaXggPSBxbi5wcmVmaXhcbiAgICAgIHRhZy5sb2NhbCA9IHFuLmxvY2FsXG4gICAgICB0YWcudXJpID0gdGFnLm5zW3FuLnByZWZpeF0gfHwgJydcblxuICAgICAgaWYgKHRhZy5wcmVmaXggJiYgIXRhZy51cmkpIHtcbiAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdVbmJvdW5kIG5hbWVzcGFjZSBwcmVmaXg6ICcgK1xuICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHBhcnNlci50YWdOYW1lKSlcbiAgICAgICAgdGFnLnVyaSA9IHFuLnByZWZpeFxuICAgICAgfVxuXG4gICAgICB2YXIgcGFyZW50ID0gcGFyc2VyLnRhZ3NbcGFyc2VyLnRhZ3MubGVuZ3RoIC0gMV0gfHwgcGFyc2VyXG4gICAgICBpZiAodGFnLm5zICYmIHBhcmVudC5ucyAhPT0gdGFnLm5zKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKHRhZy5ucykuZm9yRWFjaChmdW5jdGlvbiAocCkge1xuICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgJ29ub3Blbm5hbWVzcGFjZScsIHtcbiAgICAgICAgICAgIHByZWZpeDogcCxcbiAgICAgICAgICAgIHVyaTogdGFnLm5zW3BdXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgLy8gaGFuZGxlIGRlZmVycmVkIG9uYXR0cmlidXRlIGV2ZW50c1xuICAgICAgLy8gTm90ZTogZG8gbm90IGFwcGx5IGRlZmF1bHQgbnMgdG8gYXR0cmlidXRlczpcbiAgICAgIC8vICAgaHR0cDovL3d3dy53My5vcmcvVFIvUkVDLXhtbC1uYW1lcy8jZGVmYXVsdGluZ1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBwYXJzZXIuYXR0cmliTGlzdC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdmFyIG52ID0gcGFyc2VyLmF0dHJpYkxpc3RbaV1cbiAgICAgICAgdmFyIG5hbWUgPSBudlswXVxuICAgICAgICB2YXIgdmFsdWUgPSBudlsxXVxuICAgICAgICB2YXIgcXVhbE5hbWUgPSBxbmFtZShuYW1lLCB0cnVlKVxuICAgICAgICB2YXIgcHJlZml4ID0gcXVhbE5hbWUucHJlZml4XG4gICAgICAgIHZhciBsb2NhbCA9IHF1YWxOYW1lLmxvY2FsXG4gICAgICAgIHZhciB1cmkgPSBwcmVmaXggPT09ICcnID8gJycgOiAodGFnLm5zW3ByZWZpeF0gfHwgJycpXG4gICAgICAgIHZhciBhID0ge1xuICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgIHByZWZpeDogcHJlZml4LFxuICAgICAgICAgIGxvY2FsOiBsb2NhbCxcbiAgICAgICAgICB1cmk6IHVyaVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgdGhlcmUncyBhbnkgYXR0cmlidXRlcyB3aXRoIGFuIHVuZGVmaW5lZCBuYW1lc3BhY2UsXG4gICAgICAgIC8vIHRoZW4gZmFpbCBvbiB0aGVtIG5vdy5cbiAgICAgICAgaWYgKHByZWZpeCAmJiBwcmVmaXggIT09ICd4bWxucycgJiYgIXVyaSkge1xuICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnVW5ib3VuZCBuYW1lc3BhY2UgcHJlZml4OiAnICtcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHByZWZpeCkpXG4gICAgICAgICAgYS51cmkgPSBwcmVmaXhcbiAgICAgICAgfVxuICAgICAgICBwYXJzZXIudGFnLmF0dHJpYnV0ZXNbbmFtZV0gPSBhXG4gICAgICAgIGVtaXROb2RlKHBhcnNlciwgJ29uYXR0cmlidXRlJywgYSlcbiAgICAgIH1cbiAgICAgIHBhcnNlci5hdHRyaWJMaXN0Lmxlbmd0aCA9IDBcbiAgICB9XG5cbiAgICBwYXJzZXIudGFnLmlzU2VsZkNsb3NpbmcgPSAhIXNlbGZDbG9zaW5nXG5cbiAgICAvLyBwcm9jZXNzIHRoZSB0YWdcbiAgICBwYXJzZXIuc2F3Um9vdCA9IHRydWVcbiAgICBwYXJzZXIudGFncy5wdXNoKHBhcnNlci50YWcpXG4gICAgZW1pdE5vZGUocGFyc2VyLCAnb25vcGVudGFnJywgcGFyc2VyLnRhZylcbiAgICBpZiAoIXNlbGZDbG9zaW5nKSB7XG4gICAgICAvLyBzcGVjaWFsIGNhc2UgZm9yIDxzY3JpcHQ+IGluIG5vbi1zdHJpY3QgbW9kZS5cbiAgICAgIGlmICghcGFyc2VyLm5vc2NyaXB0ICYmIHBhcnNlci50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdzY3JpcHQnKSB7XG4gICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuU0NSSVBUXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlRFWFRcbiAgICAgIH1cbiAgICAgIHBhcnNlci50YWcgPSBudWxsXG4gICAgICBwYXJzZXIudGFnTmFtZSA9ICcnXG4gICAgfVxuICAgIHBhcnNlci5hdHRyaWJOYW1lID0gcGFyc2VyLmF0dHJpYlZhbHVlID0gJydcbiAgICBwYXJzZXIuYXR0cmliTGlzdC5sZW5ndGggPSAwXG4gIH1cblxuICBmdW5jdGlvbiBjbG9zZVRhZyAocGFyc2VyKSB7XG4gICAgaWYgKCFwYXJzZXIudGFnTmFtZSkge1xuICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdXZWlyZCBlbXB0eSBjbG9zZSB0YWcuJylcbiAgICAgIHBhcnNlci50ZXh0Tm9kZSArPSAnPC8+J1xuICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAocGFyc2VyLnNjcmlwdCkge1xuICAgICAgaWYgKHBhcnNlci50YWdOYW1lICE9PSAnc2NyaXB0Jykge1xuICAgICAgICBwYXJzZXIuc2NyaXB0ICs9ICc8LycgKyBwYXJzZXIudGFnTmFtZSArICc+J1xuICAgICAgICBwYXJzZXIudGFnTmFtZSA9ICcnXG4gICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuU0NSSVBUXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25zY3JpcHQnLCBwYXJzZXIuc2NyaXB0KVxuICAgICAgcGFyc2VyLnNjcmlwdCA9ICcnXG4gICAgfVxuXG4gICAgLy8gZmlyc3QgbWFrZSBzdXJlIHRoYXQgdGhlIGNsb3NpbmcgdGFnIGFjdHVhbGx5IGV4aXN0cy5cbiAgICAvLyA8YT48Yj48L2M+PC9iPjwvYT4gd2lsbCBjbG9zZSBldmVyeXRoaW5nLCBvdGhlcndpc2UuXG4gICAgdmFyIHQgPSBwYXJzZXIudGFncy5sZW5ndGhcbiAgICB2YXIgdGFnTmFtZSA9IHBhcnNlci50YWdOYW1lXG4gICAgaWYgKCFwYXJzZXIuc3RyaWN0KSB7XG4gICAgICB0YWdOYW1lID0gdGFnTmFtZVtwYXJzZXIubG9vc2VDYXNlXSgpXG4gICAgfVxuICAgIHZhciBjbG9zZVRvID0gdGFnTmFtZVxuICAgIHdoaWxlICh0LS0pIHtcbiAgICAgIHZhciBjbG9zZSA9IHBhcnNlci50YWdzW3RdXG4gICAgICBpZiAoY2xvc2UubmFtZSAhPT0gY2xvc2VUbykge1xuICAgICAgICAvLyBmYWlsIHRoZSBmaXJzdCB0aW1lIGluIHN0cmljdCBtb2RlXG4gICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnVW5leHBlY3RlZCBjbG9zZSB0YWcnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBkaWRuJ3QgZmluZCBpdC4gIHdlIGFscmVhZHkgZmFpbGVkIGZvciBzdHJpY3QsIHNvIGp1c3QgYWJvcnQuXG4gICAgaWYgKHQgPCAwKSB7XG4gICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ1VubWF0Y2hlZCBjbG9zaW5nIHRhZzogJyArIHBhcnNlci50YWdOYW1lKVxuICAgICAgcGFyc2VyLnRleHROb2RlICs9ICc8LycgKyBwYXJzZXIudGFnTmFtZSArICc+J1xuICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgcGFyc2VyLnRhZ05hbWUgPSB0YWdOYW1lXG4gICAgdmFyIHMgPSBwYXJzZXIudGFncy5sZW5ndGhcbiAgICB3aGlsZSAocy0tID4gdCkge1xuICAgICAgdmFyIHRhZyA9IHBhcnNlci50YWcgPSBwYXJzZXIudGFncy5wb3AoKVxuICAgICAgcGFyc2VyLnRhZ05hbWUgPSBwYXJzZXIudGFnLm5hbWVcbiAgICAgIGVtaXROb2RlKHBhcnNlciwgJ29uY2xvc2V0YWcnLCBwYXJzZXIudGFnTmFtZSlcblxuICAgICAgdmFyIHggPSB7fVxuICAgICAgZm9yICh2YXIgaSBpbiB0YWcubnMpIHtcbiAgICAgICAgeFtpXSA9IHRhZy5uc1tpXVxuICAgICAgfVxuXG4gICAgICB2YXIgcGFyZW50ID0gcGFyc2VyLnRhZ3NbcGFyc2VyLnRhZ3MubGVuZ3RoIC0gMV0gfHwgcGFyc2VyXG4gICAgICBpZiAocGFyc2VyLm9wdC54bWxucyAmJiB0YWcubnMgIT09IHBhcmVudC5ucykge1xuICAgICAgICAvLyByZW1vdmUgbmFtZXNwYWNlIGJpbmRpbmdzIGludHJvZHVjZWQgYnkgdGFnXG4gICAgICAgIE9iamVjdC5rZXlzKHRhZy5ucykuZm9yRWFjaChmdW5jdGlvbiAocCkge1xuICAgICAgICAgIHZhciBuID0gdGFnLm5zW3BdXG4gICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25jbG9zZW5hbWVzcGFjZScsIHsgcHJlZml4OiBwLCB1cmk6IG4gfSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHQgPT09IDApIHBhcnNlci5jbG9zZWRSb290ID0gdHJ1ZVxuICAgIHBhcnNlci50YWdOYW1lID0gcGFyc2VyLmF0dHJpYlZhbHVlID0gcGFyc2VyLmF0dHJpYk5hbWUgPSAnJ1xuICAgIHBhcnNlci5hdHRyaWJMaXN0Lmxlbmd0aCA9IDBcbiAgICBwYXJzZXIuc3RhdGUgPSBTLlRFWFRcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhcnNlRW50aXR5IChwYXJzZXIpIHtcbiAgICB2YXIgZW50aXR5ID0gcGFyc2VyLmVudGl0eVxuICAgIHZhciBlbnRpdHlMQyA9IGVudGl0eS50b0xvd2VyQ2FzZSgpXG4gICAgdmFyIG51bVxuICAgIHZhciBudW1TdHIgPSAnJ1xuXG4gICAgaWYgKHBhcnNlci5FTlRJVElFU1tlbnRpdHldKSB7XG4gICAgICByZXR1cm4gcGFyc2VyLkVOVElUSUVTW2VudGl0eV1cbiAgICB9XG4gICAgaWYgKHBhcnNlci5FTlRJVElFU1tlbnRpdHlMQ10pIHtcbiAgICAgIHJldHVybiBwYXJzZXIuRU5USVRJRVNbZW50aXR5TENdXG4gICAgfVxuICAgIGVudGl0eSA9IGVudGl0eUxDXG4gICAgaWYgKGVudGl0eS5jaGFyQXQoMCkgPT09ICcjJykge1xuICAgICAgaWYgKGVudGl0eS5jaGFyQXQoMSkgPT09ICd4Jykge1xuICAgICAgICBlbnRpdHkgPSBlbnRpdHkuc2xpY2UoMilcbiAgICAgICAgbnVtID0gcGFyc2VJbnQoZW50aXR5LCAxNilcbiAgICAgICAgbnVtU3RyID0gbnVtLnRvU3RyaW5nKDE2KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZW50aXR5ID0gZW50aXR5LnNsaWNlKDEpXG4gICAgICAgIG51bSA9IHBhcnNlSW50KGVudGl0eSwgMTApXG4gICAgICAgIG51bVN0ciA9IG51bS50b1N0cmluZygxMClcbiAgICAgIH1cbiAgICB9XG4gICAgZW50aXR5ID0gZW50aXR5LnJlcGxhY2UoL14wKy8sICcnKVxuICAgIGlmIChpc05hTihudW0pIHx8IG51bVN0ci50b0xvd2VyQ2FzZSgpICE9PSBlbnRpdHkpIHtcbiAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnSW52YWxpZCBjaGFyYWN0ZXIgZW50aXR5JylcbiAgICAgIHJldHVybiAnJicgKyBwYXJzZXIuZW50aXR5ICsgJzsnXG4gICAgfVxuXG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ29kZVBvaW50KG51bSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGJlZ2luV2hpdGVTcGFjZSAocGFyc2VyLCBjKSB7XG4gICAgaWYgKGMgPT09ICc8Jykge1xuICAgICAgcGFyc2VyLnN0YXRlID0gUy5PUEVOX1dBS0FcbiAgICAgIHBhcnNlci5zdGFydFRhZ1Bvc2l0aW9uID0gcGFyc2VyLnBvc2l0aW9uXG4gICAgfSBlbHNlIGlmICghaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAvLyBoYXZlIHRvIHByb2Nlc3MgdGhpcyBhcyBhIHRleHQgbm9kZS5cbiAgICAgIC8vIHdlaXJkLCBidXQgaGFwcGVucy5cbiAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnTm9uLXdoaXRlc3BhY2UgYmVmb3JlIGZpcnN0IHRhZy4nKVxuICAgICAgcGFyc2VyLnRleHROb2RlID0gY1xuICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2hhckF0IChjaHVuaywgaSkge1xuICAgIHZhciByZXN1bHQgPSAnJ1xuICAgIGlmIChpIDwgY2h1bmsubGVuZ3RoKSB7XG4gICAgICByZXN1bHQgPSBjaHVuay5jaGFyQXQoaSlcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgZnVuY3Rpb24gd3JpdGUgKGNodW5rKSB7XG4gICAgdmFyIHBhcnNlciA9IHRoaXNcbiAgICBpZiAodGhpcy5lcnJvcikge1xuICAgICAgdGhyb3cgdGhpcy5lcnJvclxuICAgIH1cbiAgICBpZiAocGFyc2VyLmNsb3NlZCkge1xuICAgICAgcmV0dXJuIGVycm9yKHBhcnNlcixcbiAgICAgICAgJ0Nhbm5vdCB3cml0ZSBhZnRlciBjbG9zZS4gQXNzaWduIGFuIG9ucmVhZHkgaGFuZGxlci4nKVxuICAgIH1cbiAgICBpZiAoY2h1bmsgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBlbmQocGFyc2VyKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNodW5rID09PSAnb2JqZWN0Jykge1xuICAgICAgY2h1bmsgPSBjaHVuay50b1N0cmluZygpXG4gICAgfVxuICAgIHZhciBpID0gMFxuICAgIHZhciBjID0gJydcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgYyA9IGNoYXJBdChjaHVuaywgaSsrKVxuICAgICAgcGFyc2VyLmMgPSBjXG5cbiAgICAgIGlmICghYykge1xuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyc2VyLnRyYWNrUG9zaXRpb24pIHtcbiAgICAgICAgcGFyc2VyLnBvc2l0aW9uKytcbiAgICAgICAgaWYgKGMgPT09ICdcXG4nKSB7XG4gICAgICAgICAgcGFyc2VyLmxpbmUrK1xuICAgICAgICAgIHBhcnNlci5jb2x1bW4gPSAwXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGFyc2VyLmNvbHVtbisrXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgc3dpdGNoIChwYXJzZXIuc3RhdGUpIHtcbiAgICAgICAgY2FzZSBTLkJFR0lOOlxuICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQkVHSU5fV0hJVEVTUEFDRVxuICAgICAgICAgIGlmIChjID09PSAnXFx1RkVGRicpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGJlZ2luV2hpdGVTcGFjZShwYXJzZXIsIGMpXG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuQkVHSU5fV0hJVEVTUEFDRTpcbiAgICAgICAgICBiZWdpbldoaXRlU3BhY2UocGFyc2VyLCBjKVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLlRFWFQ6XG4gICAgICAgICAgaWYgKHBhcnNlci5zYXdSb290ICYmICFwYXJzZXIuY2xvc2VkUm9vdCkge1xuICAgICAgICAgICAgdmFyIHN0YXJ0aSA9IGkgLSAxXG4gICAgICAgICAgICB3aGlsZSAoYyAmJiBjICE9PSAnPCcgJiYgYyAhPT0gJyYnKSB7XG4gICAgICAgICAgICAgIGMgPSBjaGFyQXQoY2h1bmssIGkrKylcbiAgICAgICAgICAgICAgaWYgKGMgJiYgcGFyc2VyLnRyYWNrUG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICBwYXJzZXIucG9zaXRpb24rK1xuICAgICAgICAgICAgICAgIGlmIChjID09PSAnXFxuJykge1xuICAgICAgICAgICAgICAgICAgcGFyc2VyLmxpbmUrK1xuICAgICAgICAgICAgICAgICAgcGFyc2VyLmNvbHVtbiA9IDBcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcGFyc2VyLmNvbHVtbisrXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJzZXIudGV4dE5vZGUgKz0gY2h1bmsuc3Vic3RyaW5nKHN0YXJ0aSwgaSAtIDEpXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjID09PSAnPCcgJiYgIShwYXJzZXIuc2F3Um9vdCAmJiBwYXJzZXIuY2xvc2VkUm9vdCAmJiAhcGFyc2VyLnN0cmljdCkpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuT1BFTl9XQUtBXG4gICAgICAgICAgICBwYXJzZXIuc3RhcnRUYWdQb3NpdGlvbiA9IHBhcnNlci5wb3NpdGlvblxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoIWlzV2hpdGVzcGFjZShjKSAmJiAoIXBhcnNlci5zYXdSb290IHx8IHBhcnNlci5jbG9zZWRSb290KSkge1xuICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ1RleHQgZGF0YSBvdXRzaWRlIG9mIHJvb3Qgbm9kZS4nKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGMgPT09ICcmJykge1xuICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlRFWFRfRU5USVRZXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBwYXJzZXIudGV4dE5vZGUgKz0gY1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5TQ1JJUFQ6XG4gICAgICAgICAgLy8gb25seSBub24tc3RyaWN0XG4gICAgICAgICAgaWYgKGMgPT09ICc8Jykge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TQ1JJUFRfRU5ESU5HXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlci5zY3JpcHQgKz0gY1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5TQ1JJUFRfRU5ESU5HOlxuICAgICAgICAgIGlmIChjID09PSAnLycpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ0xPU0VfVEFHXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlci5zY3JpcHQgKz0gJzwnICsgY1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TQ1JJUFRcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuT1BFTl9XQUtBOlxuICAgICAgICAgIC8vIGVpdGhlciBhIC8sID8sICEsIG9yIHRleHQgaXMgY29taW5nIG5leHQuXG4gICAgICAgICAgaWYgKGMgPT09ICchJykge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TR01MX0RFQ0xcbiAgICAgICAgICAgIHBhcnNlci5zZ21sRGVjbCA9ICcnXG4gICAgICAgICAgfSBlbHNlIGlmIChpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgIC8vIHdhaXQgZm9yIGl0Li4uXG4gICAgICAgICAgfSBlbHNlIGlmIChpc01hdGNoKG5hbWVTdGFydCwgYykpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuT1BFTl9UQUdcbiAgICAgICAgICAgIHBhcnNlci50YWdOYW1lID0gY1xuICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gJy8nKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNMT1NFX1RBR1xuICAgICAgICAgICAgcGFyc2VyLnRhZ05hbWUgPSAnJ1xuICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gJz8nKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlBST0NfSU5TVFxuICAgICAgICAgICAgcGFyc2VyLnByb2NJbnN0TmFtZSA9IHBhcnNlci5wcm9jSW5zdEJvZHkgPSAnJ1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ1VuZW5jb2RlZCA8JylcbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIHdhcyBzb21lIHdoaXRlc3BhY2UsIHRoZW4gYWRkIHRoYXQgaW4uXG4gICAgICAgICAgICBpZiAocGFyc2VyLnN0YXJ0VGFnUG9zaXRpb24gKyAxIDwgcGFyc2VyLnBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgIHZhciBwYWQgPSBwYXJzZXIucG9zaXRpb24gLSBwYXJzZXIuc3RhcnRUYWdQb3NpdGlvblxuICAgICAgICAgICAgICBjID0gbmV3IEFycmF5KHBhZCkuam9pbignICcpICsgY1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyc2VyLnRleHROb2RlICs9ICc8JyArIGNcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVFxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5TR01MX0RFQ0w6XG4gICAgICAgICAgaWYgKChwYXJzZXIuc2dtbERlY2wgKyBjKS50b1VwcGVyQ2FzZSgpID09PSBDREFUQSkge1xuICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25vcGVuY2RhdGEnKVxuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DREFUQVxuICAgICAgICAgICAgcGFyc2VyLnNnbWxEZWNsID0gJydcbiAgICAgICAgICAgIHBhcnNlci5jZGF0YSA9ICcnXG4gICAgICAgICAgfSBlbHNlIGlmIChwYXJzZXIuc2dtbERlY2wgKyBjID09PSAnLS0nKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNPTU1FTlRcbiAgICAgICAgICAgIHBhcnNlci5jb21tZW50ID0gJydcbiAgICAgICAgICAgIHBhcnNlci5zZ21sRGVjbCA9ICcnXG4gICAgICAgICAgfSBlbHNlIGlmICgocGFyc2VyLnNnbWxEZWNsICsgYykudG9VcHBlckNhc2UoKSA9PT0gRE9DVFlQRSkge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFXG4gICAgICAgICAgICBpZiAocGFyc2VyLmRvY3R5cGUgfHwgcGFyc2VyLnNhd1Jvb3QpIHtcbiAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsXG4gICAgICAgICAgICAgICAgJ0luYXBwcm9wcmlhdGVseSBsb2NhdGVkIGRvY3R5cGUgZGVjbGFyYXRpb24nKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyc2VyLmRvY3R5cGUgPSAnJ1xuICAgICAgICAgICAgcGFyc2VyLnNnbWxEZWNsID0gJydcbiAgICAgICAgICB9IGVsc2UgaWYgKGMgPT09ICc+Jykge1xuICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25zZ21sZGVjbGFyYXRpb24nLCBwYXJzZXIuc2dtbERlY2wpXG4gICAgICAgICAgICBwYXJzZXIuc2dtbERlY2wgPSAnJ1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUXG4gICAgICAgICAgfSBlbHNlIGlmIChpc1F1b3RlKGMpKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNHTUxfREVDTF9RVU9URURcbiAgICAgICAgICAgIHBhcnNlci5zZ21sRGVjbCArPSBjXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlci5zZ21sRGVjbCArPSBjXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLlNHTUxfREVDTF9RVU9URUQ6XG4gICAgICAgICAgaWYgKGMgPT09IHBhcnNlci5xKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNHTUxfREVDTFxuICAgICAgICAgICAgcGFyc2VyLnEgPSAnJ1xuICAgICAgICAgIH1cbiAgICAgICAgICBwYXJzZXIuc2dtbERlY2wgKz0gY1xuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkRPQ1RZUEU6XG4gICAgICAgICAgaWYgKGMgPT09ICc+Jykge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUXG4gICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsICdvbmRvY3R5cGUnLCBwYXJzZXIuZG9jdHlwZSlcbiAgICAgICAgICAgIHBhcnNlci5kb2N0eXBlID0gdHJ1ZSAvLyBqdXN0IHJlbWVtYmVyIHRoYXQgd2Ugc2F3IGl0LlxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXJzZXIuZG9jdHlwZSArPSBjXG4gICAgICAgICAgICBpZiAoYyA9PT0gJ1snKSB7XG4gICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuRE9DVFlQRV9EVERcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNRdW90ZShjKSkge1xuICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkRPQ1RZUEVfUVVPVEVEXG4gICAgICAgICAgICAgIHBhcnNlci5xID0gY1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5ET0NUWVBFX1FVT1RFRDpcbiAgICAgICAgICBwYXJzZXIuZG9jdHlwZSArPSBjXG4gICAgICAgICAgaWYgKGMgPT09IHBhcnNlci5xKSB7XG4gICAgICAgICAgICBwYXJzZXIucSA9ICcnXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkRPQ1RZUEVcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuRE9DVFlQRV9EVEQ6XG4gICAgICAgICAgcGFyc2VyLmRvY3R5cGUgKz0gY1xuICAgICAgICAgIGlmIChjID09PSAnXScpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuRE9DVFlQRVxuICAgICAgICAgIH0gZWxzZSBpZiAoaXNRdW90ZShjKSkge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFX0RURF9RVU9URURcbiAgICAgICAgICAgIHBhcnNlci5xID0gY1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5ET0NUWVBFX0RURF9RVU9URUQ6XG4gICAgICAgICAgcGFyc2VyLmRvY3R5cGUgKz0gY1xuICAgICAgICAgIGlmIChjID09PSBwYXJzZXIucSkge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFX0RURFxuICAgICAgICAgICAgcGFyc2VyLnEgPSAnJ1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5DT01NRU5UOlxuICAgICAgICAgIGlmIChjID09PSAnLScpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ09NTUVOVF9FTkRJTkdcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VyLmNvbW1lbnQgKz0gY1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5DT01NRU5UX0VORElORzpcbiAgICAgICAgICBpZiAoYyA9PT0gJy0nKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNPTU1FTlRfRU5ERURcbiAgICAgICAgICAgIHBhcnNlci5jb21tZW50ID0gdGV4dG9wdHMocGFyc2VyLm9wdCwgcGFyc2VyLmNvbW1lbnQpXG4gICAgICAgICAgICBpZiAocGFyc2VyLmNvbW1lbnQpIHtcbiAgICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25jb21tZW50JywgcGFyc2VyLmNvbW1lbnQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJzZXIuY29tbWVudCA9ICcnXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlci5jb21tZW50ICs9ICctJyArIGNcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ09NTUVOVFxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5DT01NRU5UX0VOREVEOlxuICAgICAgICAgIGlmIChjICE9PSAnPicpIHtcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnTWFsZm9ybWVkIGNvbW1lbnQnKVxuICAgICAgICAgICAgLy8gYWxsb3cgPCEtLSBibGFoIC0tIGJsb28gLS0+IGluIG5vbi1zdHJpY3QgbW9kZSxcbiAgICAgICAgICAgIC8vIHdoaWNoIGlzIGEgY29tbWVudCBvZiBcIiBibGFoIC0tIGJsb28gXCJcbiAgICAgICAgICAgIHBhcnNlci5jb21tZW50ICs9ICctLScgKyBjXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNPTU1FTlRcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkNEQVRBOlxuICAgICAgICAgIGlmIChjID09PSAnXScpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ0RBVEFfRU5ESU5HXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlci5jZGF0YSArPSBjXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkNEQVRBX0VORElORzpcbiAgICAgICAgICBpZiAoYyA9PT0gJ10nKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNEQVRBX0VORElOR18yXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlci5jZGF0YSArPSAnXScgKyBjXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNEQVRBXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkNEQVRBX0VORElOR18yOlxuICAgICAgICAgIGlmIChjID09PSAnPicpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZXIuY2RhdGEpIHtcbiAgICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25jZGF0YScsIHBhcnNlci5jZGF0YSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgJ29uY2xvc2VjZGF0YScpXG4gICAgICAgICAgICBwYXJzZXIuY2RhdGEgPSAnJ1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUXG4gICAgICAgICAgfSBlbHNlIGlmIChjID09PSAnXScpIHtcbiAgICAgICAgICAgIHBhcnNlci5jZGF0YSArPSAnXSdcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VyLmNkYXRhICs9ICddXScgKyBjXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNEQVRBXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLlBST0NfSU5TVDpcbiAgICAgICAgICBpZiAoYyA9PT0gJz8nKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlBST0NfSU5TVF9FTkRJTkdcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5QUk9DX0lOU1RfQk9EWVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXJzZXIucHJvY0luc3ROYW1lICs9IGNcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuUFJPQ19JTlNUX0JPRFk6XG4gICAgICAgICAgaWYgKCFwYXJzZXIucHJvY0luc3RCb2R5ICYmIGlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9IGVsc2UgaWYgKGMgPT09ICc/Jykge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5QUk9DX0lOU1RfRU5ESU5HXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlci5wcm9jSW5zdEJvZHkgKz0gY1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5QUk9DX0lOU1RfRU5ESU5HOlxuICAgICAgICAgIGlmIChjID09PSAnPicpIHtcbiAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgJ29ucHJvY2Vzc2luZ2luc3RydWN0aW9uJywge1xuICAgICAgICAgICAgICBuYW1lOiBwYXJzZXIucHJvY0luc3ROYW1lLFxuICAgICAgICAgICAgICBib2R5OiBwYXJzZXIucHJvY0luc3RCb2R5XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgcGFyc2VyLnByb2NJbnN0TmFtZSA9IHBhcnNlci5wcm9jSW5zdEJvZHkgPSAnJ1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlci5wcm9jSW5zdEJvZHkgKz0gJz8nICsgY1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5QUk9DX0lOU1RfQk9EWVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5PUEVOX1RBRzpcbiAgICAgICAgICBpZiAoaXNNYXRjaChuYW1lQm9keSwgYykpIHtcbiAgICAgICAgICAgIHBhcnNlci50YWdOYW1lICs9IGNcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3VGFnKHBhcnNlcilcbiAgICAgICAgICAgIGlmIChjID09PSAnPicpIHtcbiAgICAgICAgICAgICAgb3BlblRhZyhwYXJzZXIpXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGMgPT09ICcvJykge1xuICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLk9QRU5fVEFHX1NMQVNIXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoIWlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnSW52YWxpZCBjaGFyYWN0ZXIgaW4gdGFnIG5hbWUnKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLk9QRU5fVEFHX1NMQVNIOlxuICAgICAgICAgIGlmIChjID09PSAnPicpIHtcbiAgICAgICAgICAgIG9wZW5UYWcocGFyc2VyLCB0cnVlKVxuICAgICAgICAgICAgY2xvc2VUYWcocGFyc2VyKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ0ZvcndhcmQtc2xhc2ggaW4gb3BlbmluZyB0YWcgbm90IGZvbGxvd2VkIGJ5ID4nKVxuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuQVRUUklCOlxuICAgICAgICAgIC8vIGhhdmVuJ3QgcmVhZCB0aGUgYXR0cmlidXRlIG5hbWUgeWV0LlxuICAgICAgICAgIGlmIChpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgfSBlbHNlIGlmIChjID09PSAnPicpIHtcbiAgICAgICAgICAgIG9wZW5UYWcocGFyc2VyKVxuICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gJy8nKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLk9QRU5fVEFHX1NMQVNIXG4gICAgICAgICAgfSBlbHNlIGlmIChpc01hdGNoKG5hbWVTdGFydCwgYykpIHtcbiAgICAgICAgICAgIHBhcnNlci5hdHRyaWJOYW1lID0gY1xuICAgICAgICAgICAgcGFyc2VyLmF0dHJpYlZhbHVlID0gJydcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX05BTUVcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdJbnZhbGlkIGF0dHJpYnV0ZSBuYW1lJylcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuQVRUUklCX05BTUU6XG4gICAgICAgICAgaWYgKGMgPT09ICc9Jykge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfVkFMVUVcbiAgICAgICAgICB9IGVsc2UgaWYgKGMgPT09ICc+Jykge1xuICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdBdHRyaWJ1dGUgd2l0aG91dCB2YWx1ZScpXG4gICAgICAgICAgICBwYXJzZXIuYXR0cmliVmFsdWUgPSBwYXJzZXIuYXR0cmliTmFtZVxuICAgICAgICAgICAgYXR0cmliKHBhcnNlcilcbiAgICAgICAgICAgIG9wZW5UYWcocGFyc2VyKVxuICAgICAgICAgIH0gZWxzZSBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9OQU1FX1NBV19XSElURVxuICAgICAgICAgIH0gZWxzZSBpZiAoaXNNYXRjaChuYW1lQm9keSwgYykpIHtcbiAgICAgICAgICAgIHBhcnNlci5hdHRyaWJOYW1lICs9IGNcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdJbnZhbGlkIGF0dHJpYnV0ZSBuYW1lJylcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuQVRUUklCX05BTUVfU0FXX1dISVRFOlxuICAgICAgICAgIGlmIChjID09PSAnPScpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX1ZBTFVFXG4gICAgICAgICAgfSBlbHNlIGlmIChpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnQXR0cmlidXRlIHdpdGhvdXQgdmFsdWUnKVxuICAgICAgICAgICAgcGFyc2VyLnRhZy5hdHRyaWJ1dGVzW3BhcnNlci5hdHRyaWJOYW1lXSA9ICcnXG4gICAgICAgICAgICBwYXJzZXIuYXR0cmliVmFsdWUgPSAnJ1xuICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25hdHRyaWJ1dGUnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHBhcnNlci5hdHRyaWJOYW1lLFxuICAgICAgICAgICAgICB2YWx1ZTogJydcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBwYXJzZXIuYXR0cmliTmFtZSA9ICcnXG4gICAgICAgICAgICBpZiAoYyA9PT0gJz4nKSB7XG4gICAgICAgICAgICAgIG9wZW5UYWcocGFyc2VyKVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc01hdGNoKG5hbWVTdGFydCwgYykpIHtcbiAgICAgICAgICAgICAgcGFyc2VyLmF0dHJpYk5hbWUgPSBjXG4gICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX05BTUVcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnSW52YWxpZCBhdHRyaWJ1dGUgbmFtZScpXG4gICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkFUVFJJQl9WQUxVRTpcbiAgICAgICAgICBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH0gZWxzZSBpZiAoaXNRdW90ZShjKSkge1xuICAgICAgICAgICAgcGFyc2VyLnEgPSBjXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9WQUxVRV9RVU9URURcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdVbnF1b3RlZCBhdHRyaWJ1dGUgdmFsdWUnKVxuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfVkFMVUVfVU5RVU9URURcbiAgICAgICAgICAgIHBhcnNlci5hdHRyaWJWYWx1ZSA9IGNcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuQVRUUklCX1ZBTFVFX1FVT1RFRDpcbiAgICAgICAgICBpZiAoYyAhPT0gcGFyc2VyLnEpIHtcbiAgICAgICAgICAgIGlmIChjID09PSAnJicpIHtcbiAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfVkFMVUVfRU5USVRZX1FcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHBhcnNlci5hdHRyaWJWYWx1ZSArPSBjXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBhdHRyaWIocGFyc2VyKVxuICAgICAgICAgIHBhcnNlci5xID0gJydcbiAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9WQUxVRV9DTE9TRURcbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5BVFRSSUJfVkFMVUVfQ0xPU0VEOlxuICAgICAgICAgIGlmIChpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCXG4gICAgICAgICAgfSBlbHNlIGlmIChjID09PSAnPicpIHtcbiAgICAgICAgICAgIG9wZW5UYWcocGFyc2VyKVxuICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gJy8nKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLk9QRU5fVEFHX1NMQVNIXG4gICAgICAgICAgfSBlbHNlIGlmIChpc01hdGNoKG5hbWVTdGFydCwgYykpIHtcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnTm8gd2hpdGVzcGFjZSBiZXR3ZWVuIGF0dHJpYnV0ZXMnKVxuICAgICAgICAgICAgcGFyc2VyLmF0dHJpYk5hbWUgPSBjXG4gICAgICAgICAgICBwYXJzZXIuYXR0cmliVmFsdWUgPSAnJ1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfTkFNRVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ0ludmFsaWQgYXR0cmlidXRlIG5hbWUnKVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5BVFRSSUJfVkFMVUVfVU5RVU9URUQ6XG4gICAgICAgICAgaWYgKCFpc0F0dHJpYkVuZChjKSkge1xuICAgICAgICAgICAgaWYgKGMgPT09ICcmJykge1xuICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9WQUxVRV9FTlRJVFlfVVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcGFyc2VyLmF0dHJpYlZhbHVlICs9IGNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGF0dHJpYihwYXJzZXIpXG4gICAgICAgICAgaWYgKGMgPT09ICc+Jykge1xuICAgICAgICAgICAgb3BlblRhZyhwYXJzZXIpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkNMT1NFX1RBRzpcbiAgICAgICAgICBpZiAoIXBhcnNlci50YWdOYW1lKSB7XG4gICAgICAgICAgICBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5vdE1hdGNoKG5hbWVTdGFydCwgYykpIHtcbiAgICAgICAgICAgICAgaWYgKHBhcnNlci5zY3JpcHQpIHtcbiAgICAgICAgICAgICAgICBwYXJzZXIuc2NyaXB0ICs9ICc8LycgKyBjXG4gICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TQ1JJUFRcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ0ludmFsaWQgdGFnbmFtZSBpbiBjbG9zaW5nIHRhZy4nKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBwYXJzZXIudGFnTmFtZSA9IGNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGMgPT09ICc+Jykge1xuICAgICAgICAgICAgY2xvc2VUYWcocGFyc2VyKVxuICAgICAgICAgIH0gZWxzZSBpZiAoaXNNYXRjaChuYW1lQm9keSwgYykpIHtcbiAgICAgICAgICAgIHBhcnNlci50YWdOYW1lICs9IGNcbiAgICAgICAgICB9IGVsc2UgaWYgKHBhcnNlci5zY3JpcHQpIHtcbiAgICAgICAgICAgIHBhcnNlci5zY3JpcHQgKz0gJzwvJyArIHBhcnNlci50YWdOYW1lXG4gICAgICAgICAgICBwYXJzZXIudGFnTmFtZSA9ICcnXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNDUklQVFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoIWlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ0ludmFsaWQgdGFnbmFtZSBpbiBjbG9zaW5nIHRhZycpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNMT1NFX1RBR19TQVdfV0hJVEVcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuQ0xPU0VfVEFHX1NBV19XSElURTpcbiAgICAgICAgICBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYyA9PT0gJz4nKSB7XG4gICAgICAgICAgICBjbG9zZVRhZyhwYXJzZXIpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnSW52YWxpZCBjaGFyYWN0ZXJzIGluIGNsb3NpbmcgdGFnJylcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuVEVYVF9FTlRJVFk6XG4gICAgICAgIGNhc2UgUy5BVFRSSUJfVkFMVUVfRU5USVRZX1E6XG4gICAgICAgIGNhc2UgUy5BVFRSSUJfVkFMVUVfRU5USVRZX1U6XG4gICAgICAgICAgdmFyIHJldHVyblN0YXRlXG4gICAgICAgICAgdmFyIGJ1ZmZlclxuICAgICAgICAgIHN3aXRjaCAocGFyc2VyLnN0YXRlKSB7XG4gICAgICAgICAgICBjYXNlIFMuVEVYVF9FTlRJVFk6XG4gICAgICAgICAgICAgIHJldHVyblN0YXRlID0gUy5URVhUXG4gICAgICAgICAgICAgIGJ1ZmZlciA9ICd0ZXh0Tm9kZSdcbiAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgY2FzZSBTLkFUVFJJQl9WQUxVRV9FTlRJVFlfUTpcbiAgICAgICAgICAgICAgcmV0dXJuU3RhdGUgPSBTLkFUVFJJQl9WQUxVRV9RVU9URURcbiAgICAgICAgICAgICAgYnVmZmVyID0gJ2F0dHJpYlZhbHVlJ1xuICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICBjYXNlIFMuQVRUUklCX1ZBTFVFX0VOVElUWV9VOlxuICAgICAgICAgICAgICByZXR1cm5TdGF0ZSA9IFMuQVRUUklCX1ZBTFVFX1VOUVVPVEVEXG4gICAgICAgICAgICAgIGJ1ZmZlciA9ICdhdHRyaWJWYWx1ZSdcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoYyA9PT0gJzsnKSB7XG4gICAgICAgICAgICBwYXJzZXJbYnVmZmVyXSArPSBwYXJzZUVudGl0eShwYXJzZXIpXG4gICAgICAgICAgICBwYXJzZXIuZW50aXR5ID0gJydcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IHJldHVyblN0YXRlXG4gICAgICAgICAgfSBlbHNlIGlmIChpc01hdGNoKHBhcnNlci5lbnRpdHkubGVuZ3RoID8gZW50aXR5Qm9keSA6IGVudGl0eVN0YXJ0LCBjKSkge1xuICAgICAgICAgICAgcGFyc2VyLmVudGl0eSArPSBjXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnSW52YWxpZCBjaGFyYWN0ZXIgaW4gZW50aXR5IG5hbWUnKVxuICAgICAgICAgICAgcGFyc2VyW2J1ZmZlcl0gKz0gJyYnICsgcGFyc2VyLmVudGl0eSArIGNcbiAgICAgICAgICAgIHBhcnNlci5lbnRpdHkgPSAnJ1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gcmV0dXJuU3RhdGVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHBhcnNlciwgJ1Vua25vd24gc3RhdGU6ICcgKyBwYXJzZXIuc3RhdGUpXG4gICAgICB9XG4gICAgfSAvLyB3aGlsZVxuXG4gICAgaWYgKHBhcnNlci5wb3NpdGlvbiA+PSBwYXJzZXIuYnVmZmVyQ2hlY2tQb3NpdGlvbikge1xuICAgICAgY2hlY2tCdWZmZXJMZW5ndGgocGFyc2VyKVxuICAgIH1cbiAgICByZXR1cm4gcGFyc2VyXG4gIH1cblxuICAvKiEgaHR0cDovL210aHMuYmUvZnJvbWNvZGVwb2ludCB2MC4xLjAgYnkgQG1hdGhpYXMgKi9cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgaWYgKCFTdHJpbmcuZnJvbUNvZGVQb2ludCkge1xuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgc3RyaW5nRnJvbUNoYXJDb2RlID0gU3RyaW5nLmZyb21DaGFyQ29kZVxuICAgICAgdmFyIGZsb29yID0gTWF0aC5mbG9vclxuICAgICAgdmFyIGZyb21Db2RlUG9pbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBNQVhfU0laRSA9IDB4NDAwMFxuICAgICAgICB2YXIgY29kZVVuaXRzID0gW11cbiAgICAgICAgdmFyIGhpZ2hTdXJyb2dhdGVcbiAgICAgICAgdmFyIGxvd1N1cnJvZ2F0ZVxuICAgICAgICB2YXIgaW5kZXggPSAtMVxuICAgICAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiAnJ1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXN1bHQgPSAnJ1xuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgIHZhciBjb2RlUG9pbnQgPSBOdW1iZXIoYXJndW1lbnRzW2luZGV4XSlcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAhaXNGaW5pdGUoY29kZVBvaW50KSB8fCAvLyBgTmFOYCwgYCtJbmZpbml0eWAsIG9yIGAtSW5maW5pdHlgXG4gICAgICAgICAgICBjb2RlUG9pbnQgPCAwIHx8IC8vIG5vdCBhIHZhbGlkIFVuaWNvZGUgY29kZSBwb2ludFxuICAgICAgICAgICAgY29kZVBvaW50ID4gMHgxMEZGRkYgfHwgLy8gbm90IGEgdmFsaWQgVW5pY29kZSBjb2RlIHBvaW50XG4gICAgICAgICAgICBmbG9vcihjb2RlUG9pbnQpICE9PSBjb2RlUG9pbnQgLy8gbm90IGFuIGludGVnZXJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IFJhbmdlRXJyb3IoJ0ludmFsaWQgY29kZSBwb2ludDogJyArIGNvZGVQb2ludClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNvZGVQb2ludCA8PSAweEZGRkYpIHsgLy8gQk1QIGNvZGUgcG9pbnRcbiAgICAgICAgICAgIGNvZGVVbml0cy5wdXNoKGNvZGVQb2ludClcbiAgICAgICAgICB9IGVsc2UgeyAvLyBBc3RyYWwgY29kZSBwb2ludDsgc3BsaXQgaW4gc3Vycm9nYXRlIGhhbHZlc1xuICAgICAgICAgICAgLy8gaHR0cDovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC1lbmNvZGluZyNzdXJyb2dhdGUtZm9ybXVsYWVcbiAgICAgICAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwXG4gICAgICAgICAgICBoaWdoU3Vycm9nYXRlID0gKGNvZGVQb2ludCA+PiAxMCkgKyAweEQ4MDBcbiAgICAgICAgICAgIGxvd1N1cnJvZ2F0ZSA9IChjb2RlUG9pbnQgJSAweDQwMCkgKyAweERDMDBcbiAgICAgICAgICAgIGNvZGVVbml0cy5wdXNoKGhpZ2hTdXJyb2dhdGUsIGxvd1N1cnJvZ2F0ZSlcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGluZGV4ICsgMSA9PT0gbGVuZ3RoIHx8IGNvZGVVbml0cy5sZW5ndGggPiBNQVhfU0laRSkge1xuICAgICAgICAgICAgcmVzdWx0ICs9IHN0cmluZ0Zyb21DaGFyQ29kZS5hcHBseShudWxsLCBjb2RlVW5pdHMpXG4gICAgICAgICAgICBjb2RlVW5pdHMubGVuZ3RoID0gMFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICB9XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3RyaW5nLCAnZnJvbUNvZGVQb2ludCcsIHtcbiAgICAgICAgICB2YWx1ZTogZnJvbUNvZGVQb2ludCxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFN0cmluZy5mcm9tQ29kZVBvaW50ID0gZnJvbUNvZGVQb2ludFxuICAgICAgfVxuICAgIH0oKSlcbiAgfVxufSkodHlwZW9mIGV4cG9ydHMgPT09ICd1bmRlZmluZWQnID8gdGhpcy5zYXggPSB7fSA6IGV4cG9ydHMpXG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxubW9kdWxlLmV4cG9ydHMgPSBTdHJlYW07XG5cbnZhciBFRSA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjtcbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG5cbmluaGVyaXRzKFN0cmVhbSwgRUUpO1xuU3RyZWFtLlJlYWRhYmxlID0gcmVxdWlyZSgncmVhZGFibGUtc3RyZWFtL3JlYWRhYmxlLmpzJyk7XG5TdHJlYW0uV3JpdGFibGUgPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vd3JpdGFibGUuanMnKTtcblN0cmVhbS5EdXBsZXggPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vZHVwbGV4LmpzJyk7XG5TdHJlYW0uVHJhbnNmb3JtID0gcmVxdWlyZSgncmVhZGFibGUtc3RyZWFtL3RyYW5zZm9ybS5qcycpO1xuU3RyZWFtLlBhc3NUaHJvdWdoID0gcmVxdWlyZSgncmVhZGFibGUtc3RyZWFtL3Bhc3N0aHJvdWdoLmpzJyk7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuNC54XG5TdHJlYW0uU3RyZWFtID0gU3RyZWFtO1xuXG5cblxuLy8gb2xkLXN0eWxlIHN0cmVhbXMuICBOb3RlIHRoYXQgdGhlIHBpcGUgbWV0aG9kICh0aGUgb25seSByZWxldmFudFxuLy8gcGFydCBvZiB0aGlzIGNsYXNzKSBpcyBvdmVycmlkZGVuIGluIHRoZSBSZWFkYWJsZSBjbGFzcy5cblxuZnVuY3Rpb24gU3RyZWFtKCkge1xuICBFRS5jYWxsKHRoaXMpO1xufVxuXG5TdHJlYW0ucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbihkZXN0LCBvcHRpb25zKSB7XG4gIHZhciBzb3VyY2UgPSB0aGlzO1xuXG4gIGZ1bmN0aW9uIG9uZGF0YShjaHVuaykge1xuICAgIGlmIChkZXN0LndyaXRhYmxlKSB7XG4gICAgICBpZiAoZmFsc2UgPT09IGRlc3Qud3JpdGUoY2h1bmspICYmIHNvdXJjZS5wYXVzZSkge1xuICAgICAgICBzb3VyY2UucGF1c2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzb3VyY2Uub24oJ2RhdGEnLCBvbmRhdGEpO1xuXG4gIGZ1bmN0aW9uIG9uZHJhaW4oKSB7XG4gICAgaWYgKHNvdXJjZS5yZWFkYWJsZSAmJiBzb3VyY2UucmVzdW1lKSB7XG4gICAgICBzb3VyY2UucmVzdW1lKCk7XG4gICAgfVxuICB9XG5cbiAgZGVzdC5vbignZHJhaW4nLCBvbmRyYWluKTtcblxuICAvLyBJZiB0aGUgJ2VuZCcgb3B0aW9uIGlzIG5vdCBzdXBwbGllZCwgZGVzdC5lbmQoKSB3aWxsIGJlIGNhbGxlZCB3aGVuXG4gIC8vIHNvdXJjZSBnZXRzIHRoZSAnZW5kJyBvciAnY2xvc2UnIGV2ZW50cy4gIE9ubHkgZGVzdC5lbmQoKSBvbmNlLlxuICBpZiAoIWRlc3QuX2lzU3RkaW8gJiYgKCFvcHRpb25zIHx8IG9wdGlvbnMuZW5kICE9PSBmYWxzZSkpIHtcbiAgICBzb3VyY2Uub24oJ2VuZCcsIG9uZW5kKTtcbiAgICBzb3VyY2Uub24oJ2Nsb3NlJywgb25jbG9zZSk7XG4gIH1cblxuICB2YXIgZGlkT25FbmQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gb25lbmQoKSB7XG4gICAgaWYgKGRpZE9uRW5kKSByZXR1cm47XG4gICAgZGlkT25FbmQgPSB0cnVlO1xuXG4gICAgZGVzdC5lbmQoKTtcbiAgfVxuXG5cbiAgZnVuY3Rpb24gb25jbG9zZSgpIHtcbiAgICBpZiAoZGlkT25FbmQpIHJldHVybjtcbiAgICBkaWRPbkVuZCA9IHRydWU7XG5cbiAgICBpZiAodHlwZW9mIGRlc3QuZGVzdHJveSA9PT0gJ2Z1bmN0aW9uJykgZGVzdC5kZXN0cm95KCk7XG4gIH1cblxuICAvLyBkb24ndCBsZWF2ZSBkYW5nbGluZyBwaXBlcyB3aGVuIHRoZXJlIGFyZSBlcnJvcnMuXG4gIGZ1bmN0aW9uIG9uZXJyb3IoZXIpIHtcbiAgICBjbGVhbnVwKCk7XG4gICAgaWYgKEVFLmxpc3RlbmVyQ291bnQodGhpcywgJ2Vycm9yJykgPT09IDApIHtcbiAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgc3RyZWFtIGVycm9yIGluIHBpcGUuXG4gICAgfVxuICB9XG5cbiAgc291cmNlLm9uKCdlcnJvcicsIG9uZXJyb3IpO1xuICBkZXN0Lm9uKCdlcnJvcicsIG9uZXJyb3IpO1xuXG4gIC8vIHJlbW92ZSBhbGwgdGhlIGV2ZW50IGxpc3RlbmVycyB0aGF0IHdlcmUgYWRkZWQuXG4gIGZ1bmN0aW9uIGNsZWFudXAoKSB7XG4gICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdkYXRhJywgb25kYXRhKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdkcmFpbicsIG9uZHJhaW4pO1xuXG4gICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBvbmVuZCk7XG4gICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpO1xuXG4gICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7XG5cbiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIGNsZWFudXApO1xuICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBjbGVhbnVwKTtcblxuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgY2xlYW51cCk7XG4gIH1cblxuICBzb3VyY2Uub24oJ2VuZCcsIGNsZWFudXApO1xuICBzb3VyY2Uub24oJ2Nsb3NlJywgY2xlYW51cCk7XG5cbiAgZGVzdC5vbignY2xvc2UnLCBjbGVhbnVwKTtcblxuICBkZXN0LmVtaXQoJ3BpcGUnLCBzb3VyY2UpO1xuXG4gIC8vIEFsbG93IGZvciB1bml4LWxpa2UgdXNhZ2U6IEEucGlwZShCKS5waXBlKEMpXG4gIHJldHVybiBkZXN0O1xufTtcbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4ndXNlIHN0cmljdCc7XG5cbi8qPHJlcGxhY2VtZW50PiovXG5cbnZhciBCdWZmZXIgPSByZXF1aXJlKCdzYWZlLWJ1ZmZlcicpLkJ1ZmZlcjtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG52YXIgaXNFbmNvZGluZyA9IEJ1ZmZlci5pc0VuY29kaW5nIHx8IGZ1bmN0aW9uIChlbmNvZGluZykge1xuICBlbmNvZGluZyA9ICcnICsgZW5jb2Rpbmc7XG4gIHN3aXRjaCAoZW5jb2RpbmcgJiYgZW5jb2RpbmcudG9Mb3dlckNhc2UoKSkge1xuICAgIGNhc2UgJ2hleCc6Y2FzZSAndXRmOCc6Y2FzZSAndXRmLTgnOmNhc2UgJ2FzY2lpJzpjYXNlICdiaW5hcnknOmNhc2UgJ2Jhc2U2NCc6Y2FzZSAndWNzMic6Y2FzZSAndWNzLTInOmNhc2UgJ3V0ZjE2bGUnOmNhc2UgJ3V0Zi0xNmxlJzpjYXNlICdyYXcnOlxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxuZnVuY3Rpb24gX25vcm1hbGl6ZUVuY29kaW5nKGVuYykge1xuICBpZiAoIWVuYykgcmV0dXJuICd1dGY4JztcbiAgdmFyIHJldHJpZWQ7XG4gIHdoaWxlICh0cnVlKSB7XG4gICAgc3dpdGNoIChlbmMpIHtcbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gJ3V0ZjgnO1xuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuICd1dGYxNmxlJztcbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gJ2xhdGluMSc7XG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGVuYztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChyZXRyaWVkKSByZXR1cm47IC8vIHVuZGVmaW5lZFxuICAgICAgICBlbmMgPSAoJycgKyBlbmMpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHJldHJpZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxufTtcblxuLy8gRG8gbm90IGNhY2hlIGBCdWZmZXIuaXNFbmNvZGluZ2Agd2hlbiBjaGVja2luZyBlbmNvZGluZyBuYW1lcyBhcyBzb21lXG4vLyBtb2R1bGVzIG1vbmtleS1wYXRjaCBpdCB0byBzdXBwb3J0IGFkZGl0aW9uYWwgZW5jb2RpbmdzXG5mdW5jdGlvbiBub3JtYWxpemVFbmNvZGluZyhlbmMpIHtcbiAgdmFyIG5lbmMgPSBfbm9ybWFsaXplRW5jb2RpbmcoZW5jKTtcbiAgaWYgKHR5cGVvZiBuZW5jICE9PSAnc3RyaW5nJyAmJiAoQnVmZmVyLmlzRW5jb2RpbmcgPT09IGlzRW5jb2RpbmcgfHwgIWlzRW5jb2RpbmcoZW5jKSkpIHRocm93IG5ldyBFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuYyk7XG4gIHJldHVybiBuZW5jIHx8IGVuYztcbn1cblxuLy8gU3RyaW5nRGVjb2RlciBwcm92aWRlcyBhbiBpbnRlcmZhY2UgZm9yIGVmZmljaWVudGx5IHNwbGl0dGluZyBhIHNlcmllcyBvZlxuLy8gYnVmZmVycyBpbnRvIGEgc2VyaWVzIG9mIEpTIHN0cmluZ3Mgd2l0aG91dCBicmVha2luZyBhcGFydCBtdWx0aS1ieXRlXG4vLyBjaGFyYWN0ZXJzLlxuZXhwb3J0cy5TdHJpbmdEZWNvZGVyID0gU3RyaW5nRGVjb2RlcjtcbmZ1bmN0aW9uIFN0cmluZ0RlY29kZXIoZW5jb2RpbmcpIHtcbiAgdGhpcy5lbmNvZGluZyA9IG5vcm1hbGl6ZUVuY29kaW5nKGVuY29kaW5nKTtcbiAgdmFyIG5iO1xuICBzd2l0Y2ggKHRoaXMuZW5jb2RpbmcpIHtcbiAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIHRoaXMudGV4dCA9IHV0ZjE2VGV4dDtcbiAgICAgIHRoaXMuZW5kID0gdXRmMTZFbmQ7XG4gICAgICBuYiA9IDQ7XG4gICAgICBicmVhaztcbiAgICBjYXNlICd1dGY4JzpcbiAgICAgIHRoaXMuZmlsbExhc3QgPSB1dGY4RmlsbExhc3Q7XG4gICAgICBuYiA9IDQ7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgdGhpcy50ZXh0ID0gYmFzZTY0VGV4dDtcbiAgICAgIHRoaXMuZW5kID0gYmFzZTY0RW5kO1xuICAgICAgbmIgPSAzO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRoaXMud3JpdGUgPSBzaW1wbGVXcml0ZTtcbiAgICAgIHRoaXMuZW5kID0gc2ltcGxlRW5kO1xuICAgICAgcmV0dXJuO1xuICB9XG4gIHRoaXMubGFzdE5lZWQgPSAwO1xuICB0aGlzLmxhc3RUb3RhbCA9IDA7XG4gIHRoaXMubGFzdENoYXIgPSBCdWZmZXIuYWxsb2NVbnNhZmUobmIpO1xufVxuXG5TdHJpbmdEZWNvZGVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChidWYpIHtcbiAgaWYgKGJ1Zi5sZW5ndGggPT09IDApIHJldHVybiAnJztcbiAgdmFyIHI7XG4gIHZhciBpO1xuICBpZiAodGhpcy5sYXN0TmVlZCkge1xuICAgIHIgPSB0aGlzLmZpbGxMYXN0KGJ1Zik7XG4gICAgaWYgKHIgPT09IHVuZGVmaW5lZCkgcmV0dXJuICcnO1xuICAgIGkgPSB0aGlzLmxhc3ROZWVkO1xuICAgIHRoaXMubGFzdE5lZWQgPSAwO1xuICB9IGVsc2Uge1xuICAgIGkgPSAwO1xuICB9XG4gIGlmIChpIDwgYnVmLmxlbmd0aCkgcmV0dXJuIHIgPyByICsgdGhpcy50ZXh0KGJ1ZiwgaSkgOiB0aGlzLnRleHQoYnVmLCBpKTtcbiAgcmV0dXJuIHIgfHwgJyc7XG59O1xuXG5TdHJpbmdEZWNvZGVyLnByb3RvdHlwZS5lbmQgPSB1dGY4RW5kO1xuXG4vLyBSZXR1cm5zIG9ubHkgY29tcGxldGUgY2hhcmFjdGVycyBpbiBhIEJ1ZmZlclxuU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUudGV4dCA9IHV0ZjhUZXh0O1xuXG4vLyBBdHRlbXB0cyB0byBjb21wbGV0ZSBhIHBhcnRpYWwgbm9uLVVURi04IGNoYXJhY3RlciB1c2luZyBieXRlcyBmcm9tIGEgQnVmZmVyXG5TdHJpbmdEZWNvZGVyLnByb3RvdHlwZS5maWxsTGFzdCA9IGZ1bmN0aW9uIChidWYpIHtcbiAgaWYgKHRoaXMubGFzdE5lZWQgPD0gYnVmLmxlbmd0aCkge1xuICAgIGJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsIHRoaXMubGFzdFRvdGFsIC0gdGhpcy5sYXN0TmVlZCwgMCwgdGhpcy5sYXN0TmVlZCk7XG4gICAgcmV0dXJuIHRoaXMubGFzdENoYXIudG9TdHJpbmcodGhpcy5lbmNvZGluZywgMCwgdGhpcy5sYXN0VG90YWwpO1xuICB9XG4gIGJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsIHRoaXMubGFzdFRvdGFsIC0gdGhpcy5sYXN0TmVlZCwgMCwgYnVmLmxlbmd0aCk7XG4gIHRoaXMubGFzdE5lZWQgLT0gYnVmLmxlbmd0aDtcbn07XG5cbi8vIENoZWNrcyB0aGUgdHlwZSBvZiBhIFVURi04IGJ5dGUsIHdoZXRoZXIgaXQncyBBU0NJSSwgYSBsZWFkaW5nIGJ5dGUsIG9yIGFcbi8vIGNvbnRpbnVhdGlvbiBieXRlLiBJZiBhbiBpbnZhbGlkIGJ5dGUgaXMgZGV0ZWN0ZWQsIC0yIGlzIHJldHVybmVkLlxuZnVuY3Rpb24gdXRmOENoZWNrQnl0ZShieXRlKSB7XG4gIGlmIChieXRlIDw9IDB4N0YpIHJldHVybiAwO2Vsc2UgaWYgKGJ5dGUgPj4gNSA9PT0gMHgwNikgcmV0dXJuIDI7ZWxzZSBpZiAoYnl0ZSA+PiA0ID09PSAweDBFKSByZXR1cm4gMztlbHNlIGlmIChieXRlID4+IDMgPT09IDB4MUUpIHJldHVybiA0O1xuICByZXR1cm4gYnl0ZSA+PiA2ID09PSAweDAyID8gLTEgOiAtMjtcbn1cblxuLy8gQ2hlY2tzIGF0IG1vc3QgMyBieXRlcyBhdCB0aGUgZW5kIG9mIGEgQnVmZmVyIGluIG9yZGVyIHRvIGRldGVjdCBhblxuLy8gaW5jb21wbGV0ZSBtdWx0aS1ieXRlIFVURi04IGNoYXJhY3Rlci4gVGhlIHRvdGFsIG51bWJlciBvZiBieXRlcyAoMiwgMywgb3IgNClcbi8vIG5lZWRlZCB0byBjb21wbGV0ZSB0aGUgVVRGLTggY2hhcmFjdGVyIChpZiBhcHBsaWNhYmxlKSBhcmUgcmV0dXJuZWQuXG5mdW5jdGlvbiB1dGY4Q2hlY2tJbmNvbXBsZXRlKHNlbGYsIGJ1ZiwgaSkge1xuICB2YXIgaiA9IGJ1Zi5sZW5ndGggLSAxO1xuICBpZiAoaiA8IGkpIHJldHVybiAwO1xuICB2YXIgbmIgPSB1dGY4Q2hlY2tCeXRlKGJ1ZltqXSk7XG4gIGlmIChuYiA+PSAwKSB7XG4gICAgaWYgKG5iID4gMCkgc2VsZi5sYXN0TmVlZCA9IG5iIC0gMTtcbiAgICByZXR1cm4gbmI7XG4gIH1cbiAgaWYgKC0taiA8IGkgfHwgbmIgPT09IC0yKSByZXR1cm4gMDtcbiAgbmIgPSB1dGY4Q2hlY2tCeXRlKGJ1ZltqXSk7XG4gIGlmIChuYiA+PSAwKSB7XG4gICAgaWYgKG5iID4gMCkgc2VsZi5sYXN0TmVlZCA9IG5iIC0gMjtcbiAgICByZXR1cm4gbmI7XG4gIH1cbiAgaWYgKC0taiA8IGkgfHwgbmIgPT09IC0yKSByZXR1cm4gMDtcbiAgbmIgPSB1dGY4Q2hlY2tCeXRlKGJ1ZltqXSk7XG4gIGlmIChuYiA+PSAwKSB7XG4gICAgaWYgKG5iID4gMCkge1xuICAgICAgaWYgKG5iID09PSAyKSBuYiA9IDA7ZWxzZSBzZWxmLmxhc3ROZWVkID0gbmIgLSAzO1xuICAgIH1cbiAgICByZXR1cm4gbmI7XG4gIH1cbiAgcmV0dXJuIDA7XG59XG5cbi8vIFZhbGlkYXRlcyBhcyBtYW55IGNvbnRpbnVhdGlvbiBieXRlcyBmb3IgYSBtdWx0aS1ieXRlIFVURi04IGNoYXJhY3RlciBhc1xuLy8gbmVlZGVkIG9yIGFyZSBhdmFpbGFibGUuIElmIHdlIHNlZSBhIG5vbi1jb250aW51YXRpb24gYnl0ZSB3aGVyZSB3ZSBleHBlY3Rcbi8vIG9uZSwgd2UgXCJyZXBsYWNlXCIgdGhlIHZhbGlkYXRlZCBjb250aW51YXRpb24gYnl0ZXMgd2UndmUgc2VlbiBzbyBmYXIgd2l0aFxuLy8gYSBzaW5nbGUgVVRGLTggcmVwbGFjZW1lbnQgY2hhcmFjdGVyICgnXFx1ZmZmZCcpLCB0byBtYXRjaCB2OCdzIFVURi04IGRlY29kaW5nXG4vLyBiZWhhdmlvci4gVGhlIGNvbnRpbnVhdGlvbiBieXRlIGNoZWNrIGlzIGluY2x1ZGVkIHRocmVlIHRpbWVzIGluIHRoZSBjYXNlXG4vLyB3aGVyZSBhbGwgb2YgdGhlIGNvbnRpbnVhdGlvbiBieXRlcyBmb3IgYSBjaGFyYWN0ZXIgZXhpc3QgaW4gdGhlIHNhbWUgYnVmZmVyLlxuLy8gSXQgaXMgYWxzbyBkb25lIHRoaXMgd2F5IGFzIGEgc2xpZ2h0IHBlcmZvcm1hbmNlIGluY3JlYXNlIGluc3RlYWQgb2YgdXNpbmcgYVxuLy8gbG9vcC5cbmZ1bmN0aW9uIHV0ZjhDaGVja0V4dHJhQnl0ZXMoc2VsZiwgYnVmLCBwKSB7XG4gIGlmICgoYnVmWzBdICYgMHhDMCkgIT09IDB4ODApIHtcbiAgICBzZWxmLmxhc3ROZWVkID0gMDtcbiAgICByZXR1cm4gJ1xcdWZmZmQnO1xuICB9XG4gIGlmIChzZWxmLmxhc3ROZWVkID4gMSAmJiBidWYubGVuZ3RoID4gMSkge1xuICAgIGlmICgoYnVmWzFdICYgMHhDMCkgIT09IDB4ODApIHtcbiAgICAgIHNlbGYubGFzdE5lZWQgPSAxO1xuICAgICAgcmV0dXJuICdcXHVmZmZkJztcbiAgICB9XG4gICAgaWYgKHNlbGYubGFzdE5lZWQgPiAyICYmIGJ1Zi5sZW5ndGggPiAyKSB7XG4gICAgICBpZiAoKGJ1ZlsyXSAmIDB4QzApICE9PSAweDgwKSB7XG4gICAgICAgIHNlbGYubGFzdE5lZWQgPSAyO1xuICAgICAgICByZXR1cm4gJ1xcdWZmZmQnO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vLyBBdHRlbXB0cyB0byBjb21wbGV0ZSBhIG11bHRpLWJ5dGUgVVRGLTggY2hhcmFjdGVyIHVzaW5nIGJ5dGVzIGZyb20gYSBCdWZmZXIuXG5mdW5jdGlvbiB1dGY4RmlsbExhc3QoYnVmKSB7XG4gIHZhciBwID0gdGhpcy5sYXN0VG90YWwgLSB0aGlzLmxhc3ROZWVkO1xuICB2YXIgciA9IHV0ZjhDaGVja0V4dHJhQnl0ZXModGhpcywgYnVmLCBwKTtcbiAgaWYgKHIgIT09IHVuZGVmaW5lZCkgcmV0dXJuIHI7XG4gIGlmICh0aGlzLmxhc3ROZWVkIDw9IGJ1Zi5sZW5ndGgpIHtcbiAgICBidWYuY29weSh0aGlzLmxhc3RDaGFyLCBwLCAwLCB0aGlzLmxhc3ROZWVkKTtcbiAgICByZXR1cm4gdGhpcy5sYXN0Q2hhci50b1N0cmluZyh0aGlzLmVuY29kaW5nLCAwLCB0aGlzLmxhc3RUb3RhbCk7XG4gIH1cbiAgYnVmLmNvcHkodGhpcy5sYXN0Q2hhciwgcCwgMCwgYnVmLmxlbmd0aCk7XG4gIHRoaXMubGFzdE5lZWQgLT0gYnVmLmxlbmd0aDtcbn1cblxuLy8gUmV0dXJucyBhbGwgY29tcGxldGUgVVRGLTggY2hhcmFjdGVycyBpbiBhIEJ1ZmZlci4gSWYgdGhlIEJ1ZmZlciBlbmRlZCBvbiBhXG4vLyBwYXJ0aWFsIGNoYXJhY3RlciwgdGhlIGNoYXJhY3RlcidzIGJ5dGVzIGFyZSBidWZmZXJlZCB1bnRpbCB0aGUgcmVxdWlyZWRcbi8vIG51bWJlciBvZiBieXRlcyBhcmUgYXZhaWxhYmxlLlxuZnVuY3Rpb24gdXRmOFRleHQoYnVmLCBpKSB7XG4gIHZhciB0b3RhbCA9IHV0ZjhDaGVja0luY29tcGxldGUodGhpcywgYnVmLCBpKTtcbiAgaWYgKCF0aGlzLmxhc3ROZWVkKSByZXR1cm4gYnVmLnRvU3RyaW5nKCd1dGY4JywgaSk7XG4gIHRoaXMubGFzdFRvdGFsID0gdG90YWw7XG4gIHZhciBlbmQgPSBidWYubGVuZ3RoIC0gKHRvdGFsIC0gdGhpcy5sYXN0TmVlZCk7XG4gIGJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsIDAsIGVuZCk7XG4gIHJldHVybiBidWYudG9TdHJpbmcoJ3V0ZjgnLCBpLCBlbmQpO1xufVxuXG4vLyBGb3IgVVRGLTgsIGEgcmVwbGFjZW1lbnQgY2hhcmFjdGVyIGlzIGFkZGVkIHdoZW4gZW5kaW5nIG9uIGEgcGFydGlhbFxuLy8gY2hhcmFjdGVyLlxuZnVuY3Rpb24gdXRmOEVuZChidWYpIHtcbiAgdmFyIHIgPSBidWYgJiYgYnVmLmxlbmd0aCA/IHRoaXMud3JpdGUoYnVmKSA6ICcnO1xuICBpZiAodGhpcy5sYXN0TmVlZCkgcmV0dXJuIHIgKyAnXFx1ZmZmZCc7XG4gIHJldHVybiByO1xufVxuXG4vLyBVVEYtMTZMRSB0eXBpY2FsbHkgbmVlZHMgdHdvIGJ5dGVzIHBlciBjaGFyYWN0ZXIsIGJ1dCBldmVuIGlmIHdlIGhhdmUgYW4gZXZlblxuLy8gbnVtYmVyIG9mIGJ5dGVzIGF2YWlsYWJsZSwgd2UgbmVlZCB0byBjaGVjayBpZiB3ZSBlbmQgb24gYSBsZWFkaW5nL2hpZ2hcbi8vIHN1cnJvZ2F0ZS4gSW4gdGhhdCBjYXNlLCB3ZSBuZWVkIHRvIHdhaXQgZm9yIHRoZSBuZXh0IHR3byBieXRlcyBpbiBvcmRlciB0b1xuLy8gZGVjb2RlIHRoZSBsYXN0IGNoYXJhY3RlciBwcm9wZXJseS5cbmZ1bmN0aW9uIHV0ZjE2VGV4dChidWYsIGkpIHtcbiAgaWYgKChidWYubGVuZ3RoIC0gaSkgJSAyID09PSAwKSB7XG4gICAgdmFyIHIgPSBidWYudG9TdHJpbmcoJ3V0ZjE2bGUnLCBpKTtcbiAgICBpZiAocikge1xuICAgICAgdmFyIGMgPSByLmNoYXJDb2RlQXQoci5sZW5ndGggLSAxKTtcbiAgICAgIGlmIChjID49IDB4RDgwMCAmJiBjIDw9IDB4REJGRikge1xuICAgICAgICB0aGlzLmxhc3ROZWVkID0gMjtcbiAgICAgICAgdGhpcy5sYXN0VG90YWwgPSA0O1xuICAgICAgICB0aGlzLmxhc3RDaGFyWzBdID0gYnVmW2J1Zi5sZW5ndGggLSAyXTtcbiAgICAgICAgdGhpcy5sYXN0Q2hhclsxXSA9IGJ1ZltidWYubGVuZ3RoIC0gMV07XG4gICAgICAgIHJldHVybiByLnNsaWNlKDAsIC0xKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHI7XG4gIH1cbiAgdGhpcy5sYXN0TmVlZCA9IDE7XG4gIHRoaXMubGFzdFRvdGFsID0gMjtcbiAgdGhpcy5sYXN0Q2hhclswXSA9IGJ1ZltidWYubGVuZ3RoIC0gMV07XG4gIHJldHVybiBidWYudG9TdHJpbmcoJ3V0ZjE2bGUnLCBpLCBidWYubGVuZ3RoIC0gMSk7XG59XG5cbi8vIEZvciBVVEYtMTZMRSB3ZSBkbyBub3QgZXhwbGljaXRseSBhcHBlbmQgc3BlY2lhbCByZXBsYWNlbWVudCBjaGFyYWN0ZXJzIGlmIHdlXG4vLyBlbmQgb24gYSBwYXJ0aWFsIGNoYXJhY3Rlciwgd2Ugc2ltcGx5IGxldCB2OCBoYW5kbGUgdGhhdC5cbmZ1bmN0aW9uIHV0ZjE2RW5kKGJ1Zikge1xuICB2YXIgciA9IGJ1ZiAmJiBidWYubGVuZ3RoID8gdGhpcy53cml0ZShidWYpIDogJyc7XG4gIGlmICh0aGlzLmxhc3ROZWVkKSB7XG4gICAgdmFyIGVuZCA9IHRoaXMubGFzdFRvdGFsIC0gdGhpcy5sYXN0TmVlZDtcbiAgICByZXR1cm4gciArIHRoaXMubGFzdENoYXIudG9TdHJpbmcoJ3V0ZjE2bGUnLCAwLCBlbmQpO1xuICB9XG4gIHJldHVybiByO1xufVxuXG5mdW5jdGlvbiBiYXNlNjRUZXh0KGJ1ZiwgaSkge1xuICB2YXIgbiA9IChidWYubGVuZ3RoIC0gaSkgJSAzO1xuICBpZiAobiA9PT0gMCkgcmV0dXJuIGJ1Zi50b1N0cmluZygnYmFzZTY0JywgaSk7XG4gIHRoaXMubGFzdE5lZWQgPSAzIC0gbjtcbiAgdGhpcy5sYXN0VG90YWwgPSAzO1xuICBpZiAobiA9PT0gMSkge1xuICAgIHRoaXMubGFzdENoYXJbMF0gPSBidWZbYnVmLmxlbmd0aCAtIDFdO1xuICB9IGVsc2Uge1xuICAgIHRoaXMubGFzdENoYXJbMF0gPSBidWZbYnVmLmxlbmd0aCAtIDJdO1xuICAgIHRoaXMubGFzdENoYXJbMV0gPSBidWZbYnVmLmxlbmd0aCAtIDFdO1xuICB9XG4gIHJldHVybiBidWYudG9TdHJpbmcoJ2Jhc2U2NCcsIGksIGJ1Zi5sZW5ndGggLSBuKTtcbn1cblxuZnVuY3Rpb24gYmFzZTY0RW5kKGJ1Zikge1xuICB2YXIgciA9IGJ1ZiAmJiBidWYubGVuZ3RoID8gdGhpcy53cml0ZShidWYpIDogJyc7XG4gIGlmICh0aGlzLmxhc3ROZWVkKSByZXR1cm4gciArIHRoaXMubGFzdENoYXIudG9TdHJpbmcoJ2Jhc2U2NCcsIDAsIDMgLSB0aGlzLmxhc3ROZWVkKTtcbiAgcmV0dXJuIHI7XG59XG5cbi8vIFBhc3MgYnl0ZXMgb24gdGhyb3VnaCBmb3Igc2luZ2xlLWJ5dGUgZW5jb2RpbmdzIChlLmcuIGFzY2lpLCBsYXRpbjEsIGhleClcbmZ1bmN0aW9uIHNpbXBsZVdyaXRlKGJ1Zikge1xuICByZXR1cm4gYnVmLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcpO1xufVxuXG5mdW5jdGlvbiBzaW1wbGVFbmQoYnVmKSB7XG4gIHJldHVybiBidWYgJiYgYnVmLmxlbmd0aCA/IHRoaXMud3JpdGUoYnVmKSA6ICcnO1xufSIsInZhciBuZXh0VGljayA9IHJlcXVpcmUoJ3Byb2Nlc3MvYnJvd3Nlci5qcycpLm5leHRUaWNrO1xudmFyIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xudmFyIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xudmFyIGltbWVkaWF0ZUlkcyA9IHt9O1xudmFyIG5leHRJbW1lZGlhdGVJZCA9IDA7XG5cbi8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cbmV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG59O1xuZXhwb3J0cy5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTtcbn07XG5leHBvcnRzLmNsZWFyVGltZW91dCA9XG5leHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbih0aW1lb3V0KSB7IHRpbWVvdXQuY2xvc2UoKTsgfTtcblxuZnVuY3Rpb24gVGltZW91dChpZCwgY2xlYXJGbikge1xuICB0aGlzLl9pZCA9IGlkO1xuICB0aGlzLl9jbGVhckZuID0gY2xlYXJGbjtcbn1cblRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24oKSB7fTtcblRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX2NsZWFyRm4uY2FsbCh3aW5kb3csIHRoaXMuX2lkKTtcbn07XG5cbi8vIERvZXMgbm90IHN0YXJ0IHRoZSB0aW1lLCBqdXN0IHNldHMgdXAgdGhlIG1lbWJlcnMgbmVlZGVkLlxuZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbihpdGVtLCBtc2Vjcykge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gbXNlY3M7XG59O1xuXG5leHBvcnRzLnVuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gLTE7XG59O1xuXG5leHBvcnRzLl91bnJlZkFjdGl2ZSA9IGV4cG9ydHMuYWN0aXZlID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cbiAgdmFyIG1zZWNzID0gaXRlbS5faWRsZVRpbWVvdXQ7XG4gIGlmIChtc2VjcyA+PSAwKSB7XG4gICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xuICAgICAgaWYgKGl0ZW0uX29uVGltZW91dClcbiAgICAgICAgaXRlbS5fb25UaW1lb3V0KCk7XG4gICAgfSwgbXNlY3MpO1xuICB9XG59O1xuXG4vLyBUaGF0J3Mgbm90IGhvdyBub2RlLmpzIGltcGxlbWVudHMgaXQgYnV0IHRoZSBleHBvc2VkIGFwaSBpcyB0aGUgc2FtZS5cbmV4cG9ydHMuc2V0SW1tZWRpYXRlID0gdHlwZW9mIHNldEltbWVkaWF0ZSA9PT0gXCJmdW5jdGlvblwiID8gc2V0SW1tZWRpYXRlIDogZnVuY3Rpb24oZm4pIHtcbiAgdmFyIGlkID0gbmV4dEltbWVkaWF0ZUlkKys7XG4gIHZhciBhcmdzID0gYXJndW1lbnRzLmxlbmd0aCA8IDIgPyBmYWxzZSA6IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblxuICBpbW1lZGlhdGVJZHNbaWRdID0gdHJ1ZTtcblxuICBuZXh0VGljayhmdW5jdGlvbiBvbk5leHRUaWNrKCkge1xuICAgIGlmIChpbW1lZGlhdGVJZHNbaWRdKSB7XG4gICAgICAvLyBmbi5jYWxsKCkgaXMgZmFzdGVyIHNvIHdlIG9wdGltaXplIGZvciB0aGUgY29tbW9uIHVzZS1jYXNlXG4gICAgICAvLyBAc2VlIGh0dHA6Ly9qc3BlcmYuY29tL2NhbGwtYXBwbHktc2VndVxuICAgICAgaWYgKGFyZ3MpIHtcbiAgICAgICAgZm4uYXBwbHkobnVsbCwgYXJncyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmbi5jYWxsKG51bGwpO1xuICAgICAgfVxuICAgICAgLy8gUHJldmVudCBpZHMgZnJvbSBsZWFraW5nXG4gICAgICBleHBvcnRzLmNsZWFySW1tZWRpYXRlKGlkKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBpZDtcbn07XG5cbmV4cG9ydHMuY2xlYXJJbW1lZGlhdGUgPSB0eXBlb2YgY2xlYXJJbW1lZGlhdGUgPT09IFwiZnVuY3Rpb25cIiA/IGNsZWFySW1tZWRpYXRlIDogZnVuY3Rpb24oaWQpIHtcbiAgZGVsZXRlIGltbWVkaWF0ZUlkc1tpZF07XG59OyIsIlxuLyoqXG4gKiBNb2R1bGUgZXhwb3J0cy5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlcHJlY2F0ZTtcblxuLyoqXG4gKiBNYXJrIHRoYXQgYSBtZXRob2Qgc2hvdWxkIG5vdCBiZSB1c2VkLlxuICogUmV0dXJucyBhIG1vZGlmaWVkIGZ1bmN0aW9uIHdoaWNoIHdhcm5zIG9uY2UgYnkgZGVmYXVsdC5cbiAqXG4gKiBJZiBgbG9jYWxTdG9yYWdlLm5vRGVwcmVjYXRpb24gPSB0cnVlYCBpcyBzZXQsIHRoZW4gaXQgaXMgYSBuby1vcC5cbiAqXG4gKiBJZiBgbG9jYWxTdG9yYWdlLnRocm93RGVwcmVjYXRpb24gPSB0cnVlYCBpcyBzZXQsIHRoZW4gZGVwcmVjYXRlZCBmdW5jdGlvbnNcbiAqIHdpbGwgdGhyb3cgYW4gRXJyb3Igd2hlbiBpbnZva2VkLlxuICpcbiAqIElmIGBsb2NhbFN0b3JhZ2UudHJhY2VEZXByZWNhdGlvbiA9IHRydWVgIGlzIHNldCwgdGhlbiBkZXByZWNhdGVkIGZ1bmN0aW9uc1xuICogd2lsbCBpbnZva2UgYGNvbnNvbGUudHJhY2UoKWAgaW5zdGVhZCBvZiBgY29uc29sZS5lcnJvcigpYC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAtIHRoZSBmdW5jdGlvbiB0byBkZXByZWNhdGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBtc2cgLSB0aGUgc3RyaW5nIHRvIHByaW50IHRvIHRoZSBjb25zb2xlIHdoZW4gYGZuYCBpcyBpbnZva2VkXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IGEgbmV3IFwiZGVwcmVjYXRlZFwiIHZlcnNpb24gb2YgYGZuYFxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBkZXByZWNhdGUgKGZuLCBtc2cpIHtcbiAgaWYgKGNvbmZpZygnbm9EZXByZWNhdGlvbicpKSB7XG4gICAgcmV0dXJuIGZuO1xuICB9XG5cbiAgdmFyIHdhcm5lZCA9IGZhbHNlO1xuICBmdW5jdGlvbiBkZXByZWNhdGVkKCkge1xuICAgIGlmICghd2FybmVkKSB7XG4gICAgICBpZiAoY29uZmlnKCd0aHJvd0RlcHJlY2F0aW9uJykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gICAgICB9IGVsc2UgaWYgKGNvbmZpZygndHJhY2VEZXByZWNhdGlvbicpKSB7XG4gICAgICAgIGNvbnNvbGUudHJhY2UobXNnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUud2Fybihtc2cpO1xuICAgICAgfVxuICAgICAgd2FybmVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICByZXR1cm4gZGVwcmVjYXRlZDtcbn1cblxuLyoqXG4gKiBDaGVja3MgYGxvY2FsU3RvcmFnZWAgZm9yIGJvb2xlYW4gdmFsdWVzIGZvciB0aGUgZ2l2ZW4gYG5hbWVgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGNvbmZpZyAobmFtZSkge1xuICAvLyBhY2Nlc3NpbmcgZ2xvYmFsLmxvY2FsU3RvcmFnZSBjYW4gdHJpZ2dlciBhIERPTUV4Y2VwdGlvbiBpbiBzYW5kYm94ZWQgaWZyYW1lc1xuICB0cnkge1xuICAgIGlmICghZ2xvYmFsLmxvY2FsU3RvcmFnZSkgcmV0dXJuIGZhbHNlO1xuICB9IGNhdGNoIChfKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciB2YWwgPSBnbG9iYWwubG9jYWxTdG9yYWdlW25hbWVdO1xuICBpZiAobnVsbCA9PSB2YWwpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIFN0cmluZyh2YWwpLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJztcbn1cbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuICBleHBvcnRzLnN0cmlwQk9NID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgaWYgKHN0clswXSA9PT0gJ1xcdUZFRkYnKSB7XG4gICAgICByZXR1cm4gc3RyLnN1YnN0cmluZygxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gIH07XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICBcInVzZSBzdHJpY3RcIjtcbiAgdmFyIGJ1aWxkZXIsIGRlZmF1bHRzLCBlc2NhcGVDREFUQSwgcmVxdWlyZXNDREFUQSwgd3JhcENEQVRBLFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICBidWlsZGVyID0gcmVxdWlyZSgneG1sYnVpbGRlcicpO1xuXG4gIGRlZmF1bHRzID0gcmVxdWlyZSgnLi9kZWZhdWx0cycpLmRlZmF1bHRzO1xuXG4gIHJlcXVpcmVzQ0RBVEEgPSBmdW5jdGlvbihlbnRyeSkge1xuICAgIHJldHVybiB0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIgJiYgKGVudHJ5LmluZGV4T2YoJyYnKSA+PSAwIHx8IGVudHJ5LmluZGV4T2YoJz4nKSA+PSAwIHx8IGVudHJ5LmluZGV4T2YoJzwnKSA+PSAwKTtcbiAgfTtcblxuICB3cmFwQ0RBVEEgPSBmdW5jdGlvbihlbnRyeSkge1xuICAgIHJldHVybiBcIjwhW0NEQVRBW1wiICsgKGVzY2FwZUNEQVRBKGVudHJ5KSkgKyBcIl1dPlwiO1xuICB9O1xuXG4gIGVzY2FwZUNEQVRBID0gZnVuY3Rpb24oZW50cnkpIHtcbiAgICByZXR1cm4gZW50cnkucmVwbGFjZSgnXV0+JywgJ11dXV0+PCFbQ0RBVEFbPicpO1xuICB9O1xuXG4gIGV4cG9ydHMuQnVpbGRlciA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBCdWlsZGVyKG9wdHMpIHtcbiAgICAgIHZhciBrZXksIHJlZiwgdmFsdWU7XG4gICAgICB0aGlzLm9wdGlvbnMgPSB7fTtcbiAgICAgIHJlZiA9IGRlZmF1bHRzW1wiMC4yXCJdO1xuICAgICAgZm9yIChrZXkgaW4gcmVmKSB7XG4gICAgICAgIGlmICghaGFzUHJvcC5jYWxsKHJlZiwga2V5KSkgY29udGludWU7XG4gICAgICAgIHZhbHVlID0gcmVmW2tleV07XG4gICAgICAgIHRoaXMub3B0aW9uc1trZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgICBmb3IgKGtleSBpbiBvcHRzKSB7XG4gICAgICAgIGlmICghaGFzUHJvcC5jYWxsKG9wdHMsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgICB2YWx1ZSA9IG9wdHNba2V5XTtcbiAgICAgICAgdGhpcy5vcHRpb25zW2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBCdWlsZGVyLnByb3RvdHlwZS5idWlsZE9iamVjdCA9IGZ1bmN0aW9uKHJvb3RPYmopIHtcbiAgICAgIHZhciBhdHRya2V5LCBjaGFya2V5LCByZW5kZXIsIHJvb3RFbGVtZW50LCByb290TmFtZTtcbiAgICAgIGF0dHJrZXkgPSB0aGlzLm9wdGlvbnMuYXR0cmtleTtcbiAgICAgIGNoYXJrZXkgPSB0aGlzLm9wdGlvbnMuY2hhcmtleTtcbiAgICAgIGlmICgoT2JqZWN0LmtleXMocm9vdE9iaikubGVuZ3RoID09PSAxKSAmJiAodGhpcy5vcHRpb25zLnJvb3ROYW1lID09PSBkZWZhdWx0c1snMC4yJ10ucm9vdE5hbWUpKSB7XG4gICAgICAgIHJvb3ROYW1lID0gT2JqZWN0LmtleXMocm9vdE9iailbMF07XG4gICAgICAgIHJvb3RPYmogPSByb290T2JqW3Jvb3ROYW1lXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJvb3ROYW1lID0gdGhpcy5vcHRpb25zLnJvb3ROYW1lO1xuICAgICAgfVxuICAgICAgcmVuZGVyID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihlbGVtZW50LCBvYmopIHtcbiAgICAgICAgICB2YXIgYXR0ciwgY2hpbGQsIGVudHJ5LCBpbmRleCwga2V5LCB2YWx1ZTtcbiAgICAgICAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLmNkYXRhICYmIHJlcXVpcmVzQ0RBVEEob2JqKSkge1xuICAgICAgICAgICAgICBlbGVtZW50LnJhdyh3cmFwQ0RBVEEob2JqKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBlbGVtZW50LnR4dChvYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICAgICAgICBmb3IgKGluZGV4IGluIG9iaikge1xuICAgICAgICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChvYmosIGluZGV4KSkgY29udGludWU7XG4gICAgICAgICAgICAgIGNoaWxkID0gb2JqW2luZGV4XTtcbiAgICAgICAgICAgICAgZm9yIChrZXkgaW4gY2hpbGQpIHtcbiAgICAgICAgICAgICAgICBlbnRyeSA9IGNoaWxkW2tleV07XG4gICAgICAgICAgICAgICAgZWxlbWVudCA9IHJlbmRlcihlbGVtZW50LmVsZShrZXkpLCBlbnRyeSkudXAoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGtleSBpbiBvYmopIHtcbiAgICAgICAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwob2JqLCBrZXkpKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgY2hpbGQgPSBvYmpba2V5XTtcbiAgICAgICAgICAgICAgaWYgKGtleSA9PT0gYXR0cmtleSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2hpbGQgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgIGZvciAoYXR0ciBpbiBjaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGNoaWxkW2F0dHJdO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5hdHQoYXR0ciwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09IGNoYXJrZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy5jZGF0YSAmJiByZXF1aXJlc0NEQVRBKGNoaWxkKSkge1xuICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucmF3KHdyYXBDREFUQShjaGlsZCkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC50eHQoY2hpbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGNoaWxkKSkge1xuICAgICAgICAgICAgICAgIGZvciAoaW5kZXggaW4gY2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgIGlmICghaGFzUHJvcC5jYWxsKGNoaWxkLCBpbmRleCkpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgZW50cnkgPSBjaGlsZFtpbmRleF07XG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy5jZGF0YSAmJiByZXF1aXJlc0NEQVRBKGVudHJ5KSkge1xuICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LmVsZShrZXkpLnJhdyh3cmFwQ0RBVEEoZW50cnkpKS51cCgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LmVsZShrZXksIGVudHJ5KS51cCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID0gcmVuZGVyKGVsZW1lbnQuZWxlKGtleSksIGVudHJ5KS51cCgpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY2hpbGQgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gcmVuZGVyKGVsZW1lbnQuZWxlKGtleSksIGNoaWxkKS51cCgpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2hpbGQgPT09ICdzdHJpbmcnICYmIF90aGlzLm9wdGlvbnMuY2RhdGEgJiYgcmVxdWlyZXNDREFUQShjaGlsZCkpIHtcbiAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LmVsZShrZXkpLnJhdyh3cmFwQ0RBVEEoY2hpbGQpKS51cCgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBpZiAoY2hpbGQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZCA9ICcnO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQuZWxlKGtleSwgY2hpbGQudG9TdHJpbmcoKSkudXAoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKTtcbiAgICAgIHJvb3RFbGVtZW50ID0gYnVpbGRlci5jcmVhdGUocm9vdE5hbWUsIHRoaXMub3B0aW9ucy54bWxkZWMsIHRoaXMub3B0aW9ucy5kb2N0eXBlLCB7XG4gICAgICAgIGhlYWRsZXNzOiB0aGlzLm9wdGlvbnMuaGVhZGxlc3MsXG4gICAgICAgIGFsbG93U3Vycm9nYXRlQ2hhcnM6IHRoaXMub3B0aW9ucy5hbGxvd1N1cnJvZ2F0ZUNoYXJzXG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZW5kZXIocm9vdEVsZW1lbnQsIHJvb3RPYmopLmVuZCh0aGlzLm9wdGlvbnMucmVuZGVyT3B0cyk7XG4gICAgfTtcblxuICAgIHJldHVybiBCdWlsZGVyO1xuXG4gIH0pKCk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICBleHBvcnRzLmRlZmF1bHRzID0ge1xuICAgIFwiMC4xXCI6IHtcbiAgICAgIGV4cGxpY2l0Q2hhcmtleTogZmFsc2UsXG4gICAgICB0cmltOiB0cnVlLFxuICAgICAgbm9ybWFsaXplOiB0cnVlLFxuICAgICAgbm9ybWFsaXplVGFnczogZmFsc2UsXG4gICAgICBhdHRya2V5OiBcIkBcIixcbiAgICAgIGNoYXJrZXk6IFwiI1wiLFxuICAgICAgZXhwbGljaXRBcnJheTogZmFsc2UsXG4gICAgICBpZ25vcmVBdHRyczogZmFsc2UsXG4gICAgICBtZXJnZUF0dHJzOiBmYWxzZSxcbiAgICAgIGV4cGxpY2l0Um9vdDogZmFsc2UsXG4gICAgICB2YWxpZGF0b3I6IG51bGwsXG4gICAgICB4bWxuczogZmFsc2UsXG4gICAgICBleHBsaWNpdENoaWxkcmVuOiBmYWxzZSxcbiAgICAgIGNoaWxka2V5OiAnQEAnLFxuICAgICAgY2hhcnNBc0NoaWxkcmVuOiBmYWxzZSxcbiAgICAgIGluY2x1ZGVXaGl0ZUNoYXJzOiBmYWxzZSxcbiAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgIGF0dHJOYW1lUHJvY2Vzc29yczogbnVsbCxcbiAgICAgIGF0dHJWYWx1ZVByb2Nlc3NvcnM6IG51bGwsXG4gICAgICB0YWdOYW1lUHJvY2Vzc29yczogbnVsbCxcbiAgICAgIHZhbHVlUHJvY2Vzc29yczogbnVsbCxcbiAgICAgIGVtcHR5VGFnOiAnJ1xuICAgIH0sXG4gICAgXCIwLjJcIjoge1xuICAgICAgZXhwbGljaXRDaGFya2V5OiBmYWxzZSxcbiAgICAgIHRyaW06IGZhbHNlLFxuICAgICAgbm9ybWFsaXplOiBmYWxzZSxcbiAgICAgIG5vcm1hbGl6ZVRhZ3M6IGZhbHNlLFxuICAgICAgYXR0cmtleTogXCIkXCIsXG4gICAgICBjaGFya2V5OiBcIl9cIixcbiAgICAgIGV4cGxpY2l0QXJyYXk6IHRydWUsXG4gICAgICBpZ25vcmVBdHRyczogZmFsc2UsXG4gICAgICBtZXJnZUF0dHJzOiBmYWxzZSxcbiAgICAgIGV4cGxpY2l0Um9vdDogdHJ1ZSxcbiAgICAgIHZhbGlkYXRvcjogbnVsbCxcbiAgICAgIHhtbG5zOiBmYWxzZSxcbiAgICAgIGV4cGxpY2l0Q2hpbGRyZW46IGZhbHNlLFxuICAgICAgcHJlc2VydmVDaGlsZHJlbk9yZGVyOiBmYWxzZSxcbiAgICAgIGNoaWxka2V5OiAnJCQnLFxuICAgICAgY2hhcnNBc0NoaWxkcmVuOiBmYWxzZSxcbiAgICAgIGluY2x1ZGVXaGl0ZUNoYXJzOiBmYWxzZSxcbiAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgIGF0dHJOYW1lUHJvY2Vzc29yczogbnVsbCxcbiAgICAgIGF0dHJWYWx1ZVByb2Nlc3NvcnM6IG51bGwsXG4gICAgICB0YWdOYW1lUHJvY2Vzc29yczogbnVsbCxcbiAgICAgIHZhbHVlUHJvY2Vzc29yczogbnVsbCxcbiAgICAgIHJvb3ROYW1lOiAncm9vdCcsXG4gICAgICB4bWxkZWM6IHtcbiAgICAgICAgJ3ZlcnNpb24nOiAnMS4wJyxcbiAgICAgICAgJ2VuY29kaW5nJzogJ1VURi04JyxcbiAgICAgICAgJ3N0YW5kYWxvbmUnOiB0cnVlXG4gICAgICB9LFxuICAgICAgZG9jdHlwZTogbnVsbCxcbiAgICAgIHJlbmRlck9wdHM6IHtcbiAgICAgICAgJ3ByZXR0eSc6IHRydWUsXG4gICAgICAgICdpbmRlbnQnOiAnICAnLFxuICAgICAgICAnbmV3bGluZSc6ICdcXG4nXG4gICAgICB9LFxuICAgICAgaGVhZGxlc3M6IGZhbHNlLFxuICAgICAgY2h1bmtTaXplOiAxMDAwMCxcbiAgICAgIGVtcHR5VGFnOiAnJyxcbiAgICAgIGNkYXRhOiBmYWxzZVxuICAgIH1cbiAgfTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuICB2YXIgYm9tLCBkZWZhdWx0cywgZXZlbnRzLCBpc0VtcHR5LCBwcm9jZXNzSXRlbSwgcHJvY2Vzc29ycywgc2F4LCBzZXRJbW1lZGlhdGUsXG4gICAgYmluZCA9IGZ1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH0sXG4gICAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICBzYXggPSByZXF1aXJlKCdzYXgnKTtcblxuICBldmVudHMgPSByZXF1aXJlKCdldmVudHMnKTtcblxuICBib20gPSByZXF1aXJlKCcuL2JvbScpO1xuXG4gIHByb2Nlc3NvcnMgPSByZXF1aXJlKCcuL3Byb2Nlc3NvcnMnKTtcblxuICBzZXRJbW1lZGlhdGUgPSByZXF1aXJlKCd0aW1lcnMnKS5zZXRJbW1lZGlhdGU7XG5cbiAgZGVmYXVsdHMgPSByZXF1aXJlKCcuL2RlZmF1bHRzJykuZGVmYXVsdHM7XG5cbiAgaXNFbXB0eSA9IGZ1bmN0aW9uKHRoaW5nKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGluZyA9PT0gXCJvYmplY3RcIiAmJiAodGhpbmcgIT0gbnVsbCkgJiYgT2JqZWN0LmtleXModGhpbmcpLmxlbmd0aCA9PT0gMDtcbiAgfTtcblxuICBwcm9jZXNzSXRlbSA9IGZ1bmN0aW9uKHByb2Nlc3NvcnMsIGl0ZW0sIGtleSkge1xuICAgIHZhciBpLCBsZW4sIHByb2Nlc3M7XG4gICAgZm9yIChpID0gMCwgbGVuID0gcHJvY2Vzc29ycy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgcHJvY2VzcyA9IHByb2Nlc3NvcnNbaV07XG4gICAgICBpdGVtID0gcHJvY2VzcyhpdGVtLCBrZXkpO1xuICAgIH1cbiAgICByZXR1cm4gaXRlbTtcbiAgfTtcblxuICBleHBvcnRzLlBhcnNlciA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKFBhcnNlciwgc3VwZXJDbGFzcyk7XG5cbiAgICBmdW5jdGlvbiBQYXJzZXIob3B0cykge1xuICAgICAgdGhpcy5wYXJzZVN0cmluZ1Byb21pc2UgPSBiaW5kKHRoaXMucGFyc2VTdHJpbmdQcm9taXNlLCB0aGlzKTtcbiAgICAgIHRoaXMucGFyc2VTdHJpbmcgPSBiaW5kKHRoaXMucGFyc2VTdHJpbmcsIHRoaXMpO1xuICAgICAgdGhpcy5yZXNldCA9IGJpbmQodGhpcy5yZXNldCwgdGhpcyk7XG4gICAgICB0aGlzLmFzc2lnbk9yUHVzaCA9IGJpbmQodGhpcy5hc3NpZ25PclB1c2gsIHRoaXMpO1xuICAgICAgdGhpcy5wcm9jZXNzQXN5bmMgPSBiaW5kKHRoaXMucHJvY2Vzc0FzeW5jLCB0aGlzKTtcbiAgICAgIHZhciBrZXksIHJlZiwgdmFsdWU7XG4gICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgZXhwb3J0cy5QYXJzZXIpKSB7XG4gICAgICAgIHJldHVybiBuZXcgZXhwb3J0cy5QYXJzZXIob3B0cyk7XG4gICAgICB9XG4gICAgICB0aGlzLm9wdGlvbnMgPSB7fTtcbiAgICAgIHJlZiA9IGRlZmF1bHRzW1wiMC4yXCJdO1xuICAgICAgZm9yIChrZXkgaW4gcmVmKSB7XG4gICAgICAgIGlmICghaGFzUHJvcC5jYWxsKHJlZiwga2V5KSkgY29udGludWU7XG4gICAgICAgIHZhbHVlID0gcmVmW2tleV07XG4gICAgICAgIHRoaXMub3B0aW9uc1trZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgICBmb3IgKGtleSBpbiBvcHRzKSB7XG4gICAgICAgIGlmICghaGFzUHJvcC5jYWxsKG9wdHMsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgICB2YWx1ZSA9IG9wdHNba2V5XTtcbiAgICAgICAgdGhpcy5vcHRpb25zW2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMueG1sbnMpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLnhtbG5za2V5ID0gdGhpcy5vcHRpb25zLmF0dHJrZXkgKyBcIm5zXCI7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm5vcm1hbGl6ZVRhZ3MpIHtcbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMudGFnTmFtZVByb2Nlc3NvcnMpIHtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMudGFnTmFtZVByb2Nlc3NvcnMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9wdGlvbnMudGFnTmFtZVByb2Nlc3NvcnMudW5zaGlmdChwcm9jZXNzb3JzLm5vcm1hbGl6ZSk7XG4gICAgICB9XG4gICAgICB0aGlzLnJlc2V0KCk7XG4gICAgfVxuXG4gICAgUGFyc2VyLnByb3RvdHlwZS5wcm9jZXNzQXN5bmMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjaHVuaywgZXJyO1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHRoaXMucmVtYWluaW5nLmxlbmd0aCA8PSB0aGlzLm9wdGlvbnMuY2h1bmtTaXplKSB7XG4gICAgICAgICAgY2h1bmsgPSB0aGlzLnJlbWFpbmluZztcbiAgICAgICAgICB0aGlzLnJlbWFpbmluZyA9ICcnO1xuICAgICAgICAgIHRoaXMuc2F4UGFyc2VyID0gdGhpcy5zYXhQYXJzZXIud3JpdGUoY2h1bmspO1xuICAgICAgICAgIHJldHVybiB0aGlzLnNheFBhcnNlci5jbG9zZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNodW5rID0gdGhpcy5yZW1haW5pbmcuc3Vic3RyKDAsIHRoaXMub3B0aW9ucy5jaHVua1NpemUpO1xuICAgICAgICAgIHRoaXMucmVtYWluaW5nID0gdGhpcy5yZW1haW5pbmcuc3Vic3RyKHRoaXMub3B0aW9ucy5jaHVua1NpemUsIHRoaXMucmVtYWluaW5nLmxlbmd0aCk7XG4gICAgICAgICAgdGhpcy5zYXhQYXJzZXIgPSB0aGlzLnNheFBhcnNlci53cml0ZShjaHVuayk7XG4gICAgICAgICAgcmV0dXJuIHNldEltbWVkaWF0ZSh0aGlzLnByb2Nlc3NBc3luYyk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yMSkge1xuICAgICAgICBlcnIgPSBlcnJvcjE7XG4gICAgICAgIGlmICghdGhpcy5zYXhQYXJzZXIuZXJyVGhyb3duKSB7XG4gICAgICAgICAgdGhpcy5zYXhQYXJzZXIuZXJyVGhyb3duID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gdGhpcy5lbWl0KGVycik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgUGFyc2VyLnByb3RvdHlwZS5hc3NpZ25PclB1c2ggPSBmdW5jdGlvbihvYmosIGtleSwgbmV3VmFsdWUpIHtcbiAgICAgIGlmICghKGtleSBpbiBvYmopKSB7XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmV4cGxpY2l0QXJyYXkpIHtcbiAgICAgICAgICByZXR1cm4gb2JqW2tleV0gPSBuZXdWYWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gb2JqW2tleV0gPSBbbmV3VmFsdWVdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIShvYmpba2V5XSBpbnN0YW5jZW9mIEFycmF5KSkge1xuICAgICAgICAgIG9ialtrZXldID0gW29ialtrZXldXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqW2tleV0ucHVzaChuZXdWYWx1ZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFBhcnNlci5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhdHRya2V5LCBjaGFya2V5LCBvbnRleHQsIHN0YWNrO1xuICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICAgIHRoaXMuc2F4UGFyc2VyID0gc2F4LnBhcnNlcih0aGlzLm9wdGlvbnMuc3RyaWN0LCB7XG4gICAgICAgIHRyaW06IGZhbHNlLFxuICAgICAgICBub3JtYWxpemU6IGZhbHNlLFxuICAgICAgICB4bWxuczogdGhpcy5vcHRpb25zLnhtbG5zXG4gICAgICB9KTtcbiAgICAgIHRoaXMuc2F4UGFyc2VyLmVyclRocm93biA9IGZhbHNlO1xuICAgICAgdGhpcy5zYXhQYXJzZXIub25lcnJvciA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICBfdGhpcy5zYXhQYXJzZXIucmVzdW1lKCk7XG4gICAgICAgICAgaWYgKCFfdGhpcy5zYXhQYXJzZXIuZXJyVGhyb3duKSB7XG4gICAgICAgICAgICBfdGhpcy5zYXhQYXJzZXIuZXJyVGhyb3duID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5lbWl0KFwiZXJyb3JcIiwgZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgICAgdGhpcy5zYXhQYXJzZXIub25lbmQgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICghX3RoaXMuc2F4UGFyc2VyLmVuZGVkKSB7XG4gICAgICAgICAgICBfdGhpcy5zYXhQYXJzZXIuZW5kZWQgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmVtaXQoXCJlbmRcIiwgX3RoaXMucmVzdWx0T2JqZWN0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKTtcbiAgICAgIHRoaXMuc2F4UGFyc2VyLmVuZGVkID0gZmFsc2U7XG4gICAgICB0aGlzLkVYUExJQ0lUX0NIQVJLRVkgPSB0aGlzLm9wdGlvbnMuZXhwbGljaXRDaGFya2V5O1xuICAgICAgdGhpcy5yZXN1bHRPYmplY3QgPSBudWxsO1xuICAgICAgc3RhY2sgPSBbXTtcbiAgICAgIGF0dHJrZXkgPSB0aGlzLm9wdGlvbnMuYXR0cmtleTtcbiAgICAgIGNoYXJrZXkgPSB0aGlzLm9wdGlvbnMuY2hhcmtleTtcbiAgICAgIHRoaXMuc2F4UGFyc2VyLm9ub3BlbnRhZyA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgIHZhciBrZXksIG5ld1ZhbHVlLCBvYmosIHByb2Nlc3NlZEtleSwgcmVmO1xuICAgICAgICAgIG9iaiA9IHt9O1xuICAgICAgICAgIG9ialtjaGFya2V5XSA9IFwiXCI7XG4gICAgICAgICAgaWYgKCFfdGhpcy5vcHRpb25zLmlnbm9yZUF0dHJzKSB7XG4gICAgICAgICAgICByZWYgPSBub2RlLmF0dHJpYnV0ZXM7XG4gICAgICAgICAgICBmb3IgKGtleSBpbiByZWYpIHtcbiAgICAgICAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwocmVmLCBrZXkpKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgaWYgKCEoYXR0cmtleSBpbiBvYmopICYmICFfdGhpcy5vcHRpb25zLm1lcmdlQXR0cnMpIHtcbiAgICAgICAgICAgICAgICBvYmpbYXR0cmtleV0gPSB7fTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBuZXdWYWx1ZSA9IF90aGlzLm9wdGlvbnMuYXR0clZhbHVlUHJvY2Vzc29ycyA/IHByb2Nlc3NJdGVtKF90aGlzLm9wdGlvbnMuYXR0clZhbHVlUHJvY2Vzc29ycywgbm9kZS5hdHRyaWJ1dGVzW2tleV0sIGtleSkgOiBub2RlLmF0dHJpYnV0ZXNba2V5XTtcbiAgICAgICAgICAgICAgcHJvY2Vzc2VkS2V5ID0gX3RoaXMub3B0aW9ucy5hdHRyTmFtZVByb2Nlc3NvcnMgPyBwcm9jZXNzSXRlbShfdGhpcy5vcHRpb25zLmF0dHJOYW1lUHJvY2Vzc29ycywga2V5KSA6IGtleTtcbiAgICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMubWVyZ2VBdHRycykge1xuICAgICAgICAgICAgICAgIF90aGlzLmFzc2lnbk9yUHVzaChvYmosIHByb2Nlc3NlZEtleSwgbmV3VmFsdWUpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG9ialthdHRya2V5XVtwcm9jZXNzZWRLZXldID0gbmV3VmFsdWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgb2JqW1wiI25hbWVcIl0gPSBfdGhpcy5vcHRpb25zLnRhZ05hbWVQcm9jZXNzb3JzID8gcHJvY2Vzc0l0ZW0oX3RoaXMub3B0aW9ucy50YWdOYW1lUHJvY2Vzc29ycywgbm9kZS5uYW1lKSA6IG5vZGUubmFtZTtcbiAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy54bWxucykge1xuICAgICAgICAgICAgb2JqW190aGlzLm9wdGlvbnMueG1sbnNrZXldID0ge1xuICAgICAgICAgICAgICB1cmk6IG5vZGUudXJpLFxuICAgICAgICAgICAgICBsb2NhbDogbm9kZS5sb2NhbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHN0YWNrLnB1c2gob2JqKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgICAgdGhpcy5zYXhQYXJzZXIub25jbG9zZXRhZyA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGNkYXRhLCBlbXB0eVN0ciwga2V5LCBub2RlLCBub2RlTmFtZSwgb2JqLCBvYmpDbG9uZSwgb2xkLCBzLCB4cGF0aDtcbiAgICAgICAgICBvYmogPSBzdGFjay5wb3AoKTtcbiAgICAgICAgICBub2RlTmFtZSA9IG9ialtcIiNuYW1lXCJdO1xuICAgICAgICAgIGlmICghX3RoaXMub3B0aW9ucy5leHBsaWNpdENoaWxkcmVuIHx8ICFfdGhpcy5vcHRpb25zLnByZXNlcnZlQ2hpbGRyZW5PcmRlcikge1xuICAgICAgICAgICAgZGVsZXRlIG9ialtcIiNuYW1lXCJdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAob2JqLmNkYXRhID09PSB0cnVlKSB7XG4gICAgICAgICAgICBjZGF0YSA9IG9iai5jZGF0YTtcbiAgICAgICAgICAgIGRlbGV0ZSBvYmouY2RhdGE7XG4gICAgICAgICAgfVxuICAgICAgICAgIHMgPSBzdGFja1tzdGFjay5sZW5ndGggLSAxXTtcbiAgICAgICAgICBpZiAob2JqW2NoYXJrZXldLm1hdGNoKC9eXFxzKiQvKSAmJiAhY2RhdGEpIHtcbiAgICAgICAgICAgIGVtcHR5U3RyID0gb2JqW2NoYXJrZXldO1xuICAgICAgICAgICAgZGVsZXRlIG9ialtjaGFya2V5XTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMudHJpbSkge1xuICAgICAgICAgICAgICBvYmpbY2hhcmtleV0gPSBvYmpbY2hhcmtleV0udHJpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMubm9ybWFsaXplKSB7XG4gICAgICAgICAgICAgIG9ialtjaGFya2V5XSA9IG9ialtjaGFya2V5XS5yZXBsYWNlKC9cXHN7Mix9L2csIFwiIFwiKS50cmltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvYmpbY2hhcmtleV0gPSBfdGhpcy5vcHRpb25zLnZhbHVlUHJvY2Vzc29ycyA/IHByb2Nlc3NJdGVtKF90aGlzLm9wdGlvbnMudmFsdWVQcm9jZXNzb3JzLCBvYmpbY2hhcmtleV0sIG5vZGVOYW1lKSA6IG9ialtjaGFya2V5XTtcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA9PT0gMSAmJiBjaGFya2V5IGluIG9iaiAmJiAhX3RoaXMuRVhQTElDSVRfQ0hBUktFWSkge1xuICAgICAgICAgICAgICBvYmogPSBvYmpbY2hhcmtleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc0VtcHR5KG9iaikpIHtcbiAgICAgICAgICAgIG9iaiA9IF90aGlzLm9wdGlvbnMuZW1wdHlUYWcgIT09ICcnID8gX3RoaXMub3B0aW9ucy5lbXB0eVRhZyA6IGVtcHR5U3RyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy52YWxpZGF0b3IgIT0gbnVsbCkge1xuICAgICAgICAgICAgeHBhdGggPSBcIi9cIiArICgoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHZhciBpLCBsZW4sIHJlc3VsdHM7XG4gICAgICAgICAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgICAgICAgZm9yIChpID0gMCwgbGVuID0gc3RhY2subGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBub2RlID0gc3RhY2tbaV07XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKG5vZGVbXCIjbmFtZVwiXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgICB9KSgpKS5jb25jYXQobm9kZU5hbWUpLmpvaW4oXCIvXCIpO1xuICAgICAgICAgICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB2YXIgZXJyO1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmogPSBfdGhpcy5vcHRpb25zLnZhbGlkYXRvcih4cGF0aCwgcyAmJiBzW25vZGVOYW1lXSwgb2JqKTtcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IxKSB7XG4gICAgICAgICAgICAgICAgZXJyID0gZXJyb3IxO1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5lbWl0KFwiZXJyb3JcIiwgZXJyKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMuZXhwbGljaXRDaGlsZHJlbiAmJiAhX3RoaXMub3B0aW9ucy5tZXJnZUF0dHJzICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBpZiAoIV90aGlzLm9wdGlvbnMucHJlc2VydmVDaGlsZHJlbk9yZGVyKSB7XG4gICAgICAgICAgICAgIG5vZGUgPSB7fTtcbiAgICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMuYXR0cmtleSBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICBub2RlW190aGlzLm9wdGlvbnMuYXR0cmtleV0gPSBvYmpbX3RoaXMub3B0aW9ucy5hdHRya2V5XTtcbiAgICAgICAgICAgICAgICBkZWxldGUgb2JqW190aGlzLm9wdGlvbnMuYXR0cmtleV07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKCFfdGhpcy5vcHRpb25zLmNoYXJzQXNDaGlsZHJlbiAmJiBfdGhpcy5vcHRpb25zLmNoYXJrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgbm9kZVtfdGhpcy5vcHRpb25zLmNoYXJrZXldID0gb2JqW190aGlzLm9wdGlvbnMuY2hhcmtleV07XG4gICAgICAgICAgICAgICAgZGVsZXRlIG9ialtfdGhpcy5vcHRpb25zLmNoYXJrZXldO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvYmopLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBub2RlW190aGlzLm9wdGlvbnMuY2hpbGRrZXldID0gb2JqO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG9iaiA9IG5vZGU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHMpIHtcbiAgICAgICAgICAgICAgc1tfdGhpcy5vcHRpb25zLmNoaWxka2V5XSA9IHNbX3RoaXMub3B0aW9ucy5jaGlsZGtleV0gfHwgW107XG4gICAgICAgICAgICAgIG9iakNsb25lID0ge307XG4gICAgICAgICAgICAgIGZvciAoa2V5IGluIG9iaikge1xuICAgICAgICAgICAgICAgIGlmICghaGFzUHJvcC5jYWxsKG9iaiwga2V5KSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgb2JqQ2xvbmVba2V5XSA9IG9ialtrZXldO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNbX3RoaXMub3B0aW9ucy5jaGlsZGtleV0ucHVzaChvYmpDbG9uZSk7XG4gICAgICAgICAgICAgIGRlbGV0ZSBvYmpbXCIjbmFtZVwiXTtcbiAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID09PSAxICYmIGNoYXJrZXkgaW4gb2JqICYmICFfdGhpcy5FWFBMSUNJVF9DSEFSS0VZKSB7XG4gICAgICAgICAgICAgICAgb2JqID0gb2JqW2NoYXJrZXldO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuYXNzaWduT3JQdXNoKHMsIG5vZGVOYW1lLCBvYmopO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy5leHBsaWNpdFJvb3QpIHtcbiAgICAgICAgICAgICAgb2xkID0gb2JqO1xuICAgICAgICAgICAgICBvYmogPSB7fTtcbiAgICAgICAgICAgICAgb2JqW25vZGVOYW1lXSA9IG9sZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzLnJlc3VsdE9iamVjdCA9IG9iajtcbiAgICAgICAgICAgIF90aGlzLnNheFBhcnNlci5lbmRlZCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuZW1pdChcImVuZFwiLCBfdGhpcy5yZXN1bHRPYmplY3QpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgICAgb250ZXh0ID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0ZXh0KSB7XG4gICAgICAgICAgdmFyIGNoYXJDaGlsZCwgcztcbiAgICAgICAgICBzID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgICAgaWYgKHMpIHtcbiAgICAgICAgICAgIHNbY2hhcmtleV0gKz0gdGV4dDtcbiAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLmV4cGxpY2l0Q2hpbGRyZW4gJiYgX3RoaXMub3B0aW9ucy5wcmVzZXJ2ZUNoaWxkcmVuT3JkZXIgJiYgX3RoaXMub3B0aW9ucy5jaGFyc0FzQ2hpbGRyZW4gJiYgKF90aGlzLm9wdGlvbnMuaW5jbHVkZVdoaXRlQ2hhcnMgfHwgdGV4dC5yZXBsYWNlKC9cXFxcbi9nLCAnJykudHJpbSgpICE9PSAnJykpIHtcbiAgICAgICAgICAgICAgc1tfdGhpcy5vcHRpb25zLmNoaWxka2V5XSA9IHNbX3RoaXMub3B0aW9ucy5jaGlsZGtleV0gfHwgW107XG4gICAgICAgICAgICAgIGNoYXJDaGlsZCA9IHtcbiAgICAgICAgICAgICAgICAnI25hbWUnOiAnX190ZXh0X18nXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIGNoYXJDaGlsZFtjaGFya2V5XSA9IHRleHQ7XG4gICAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLm5vcm1hbGl6ZSkge1xuICAgICAgICAgICAgICAgIGNoYXJDaGlsZFtjaGFya2V5XSA9IGNoYXJDaGlsZFtjaGFya2V5XS5yZXBsYWNlKC9cXHN7Mix9L2csIFwiIFwiKS50cmltKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc1tfdGhpcy5vcHRpb25zLmNoaWxka2V5XS5wdXNoKGNoYXJDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcztcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKTtcbiAgICAgIHRoaXMuc2F4UGFyc2VyLm9udGV4dCA9IG9udGV4dDtcbiAgICAgIHJldHVybiB0aGlzLnNheFBhcnNlci5vbmNkYXRhID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0ZXh0KSB7XG4gICAgICAgICAgdmFyIHM7XG4gICAgICAgICAgcyA9IG9udGV4dCh0ZXh0KTtcbiAgICAgICAgICBpZiAocykge1xuICAgICAgICAgICAgcmV0dXJuIHMuY2RhdGEgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgIH07XG5cbiAgICBQYXJzZXIucHJvdG90eXBlLnBhcnNlU3RyaW5nID0gZnVuY3Rpb24oc3RyLCBjYikge1xuICAgICAgdmFyIGVycjtcbiAgICAgIGlmICgoY2IgIT0gbnVsbCkgJiYgdHlwZW9mIGNiID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhpcy5vbihcImVuZFwiLCBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgICAgcmV0dXJuIGNiKG51bGwsIHJlc3VsdCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm9uKFwiZXJyb3JcIiwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICAgIHJldHVybiBjYihlcnIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIHN0ciA9IHN0ci50b1N0cmluZygpO1xuICAgICAgICBpZiAoc3RyLnRyaW0oKSA9PT0gJycpIHtcbiAgICAgICAgICB0aGlzLmVtaXQoXCJlbmRcIiwgbnVsbCk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgc3RyID0gYm9tLnN0cmlwQk9NKHN0cik7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuYXN5bmMpIHtcbiAgICAgICAgICB0aGlzLnJlbWFpbmluZyA9IHN0cjtcbiAgICAgICAgICBzZXRJbW1lZGlhdGUodGhpcy5wcm9jZXNzQXN5bmMpO1xuICAgICAgICAgIHJldHVybiB0aGlzLnNheFBhcnNlcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zYXhQYXJzZXIud3JpdGUoc3RyKS5jbG9zZSgpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IxKSB7XG4gICAgICAgIGVyciA9IGVycm9yMTtcbiAgICAgICAgaWYgKCEodGhpcy5zYXhQYXJzZXIuZXJyVGhyb3duIHx8IHRoaXMuc2F4UGFyc2VyLmVuZGVkKSkge1xuICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgICAgIHJldHVybiB0aGlzLnNheFBhcnNlci5lcnJUaHJvd24gPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2F4UGFyc2VyLmVuZGVkKSB7XG4gICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIFBhcnNlci5wcm90b3R5cGUucGFyc2VTdHJpbmdQcm9taXNlID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMucGFyc2VTdHJpbmcoc3RyLCBmdW5jdGlvbihlcnIsIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFBhcnNlcjtcblxuICB9KShldmVudHMpO1xuXG4gIGV4cG9ydHMucGFyc2VTdHJpbmcgPSBmdW5jdGlvbihzdHIsIGEsIGIpIHtcbiAgICB2YXIgY2IsIG9wdGlvbnMsIHBhcnNlcjtcbiAgICBpZiAoYiAhPSBudWxsKSB7XG4gICAgICBpZiAodHlwZW9mIGIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY2IgPSBiO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBhID09PSAnb2JqZWN0Jykge1xuICAgICAgICBvcHRpb25zID0gYTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHR5cGVvZiBhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNiID0gYTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgcGFyc2VyID0gbmV3IGV4cG9ydHMuUGFyc2VyKG9wdGlvbnMpO1xuICAgIHJldHVybiBwYXJzZXIucGFyc2VTdHJpbmcoc3RyLCBjYik7XG4gIH07XG5cbiAgZXhwb3J0cy5wYXJzZVN0cmluZ1Byb21pc2UgPSBmdW5jdGlvbihzdHIsIGEpIHtcbiAgICB2YXIgb3B0aW9ucywgcGFyc2VyO1xuICAgIGlmICh0eXBlb2YgYSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIG9wdGlvbnMgPSBhO1xuICAgIH1cbiAgICBwYXJzZXIgPSBuZXcgZXhwb3J0cy5QYXJzZXIob3B0aW9ucyk7XG4gICAgcmV0dXJuIHBhcnNlci5wYXJzZVN0cmluZ1Byb21pc2Uoc3RyKTtcbiAgfTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuICB2YXIgcHJlZml4TWF0Y2g7XG5cbiAgcHJlZml4TWF0Y2ggPSBuZXcgUmVnRXhwKC8oPyF4bWxucyleLio6Lyk7XG5cbiAgZXhwb3J0cy5ub3JtYWxpemUgPSBmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gc3RyLnRvTG93ZXJDYXNlKCk7XG4gIH07XG5cbiAgZXhwb3J0cy5maXJzdENoYXJMb3dlckNhc2UgPSBmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgc3RyLnNsaWNlKDEpO1xuICB9O1xuXG4gIGV4cG9ydHMuc3RyaXBQcmVmaXggPSBmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UocHJlZml4TWF0Y2gsICcnKTtcbiAgfTtcblxuICBleHBvcnRzLnBhcnNlTnVtYmVycyA9IGZ1bmN0aW9uKHN0cikge1xuICAgIGlmICghaXNOYU4oc3RyKSkge1xuICAgICAgc3RyID0gc3RyICUgMSA9PT0gMCA/IHBhcnNlSW50KHN0ciwgMTApIDogcGFyc2VGbG9hdChzdHIpO1xuICAgIH1cbiAgICByZXR1cm4gc3RyO1xuICB9O1xuXG4gIGV4cG9ydHMucGFyc2VCb29sZWFucyA9IGZ1bmN0aW9uKHN0cikge1xuICAgIGlmICgvXig/OnRydWV8ZmFsc2UpJC9pLnRlc3Qoc3RyKSkge1xuICAgICAgc3RyID0gc3RyLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJztcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbiAgfTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuICB2YXIgYnVpbGRlciwgZGVmYXVsdHMsIHBhcnNlciwgcHJvY2Vzc29ycyxcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIGRlZmF1bHRzID0gcmVxdWlyZSgnLi9kZWZhdWx0cycpO1xuXG4gIGJ1aWxkZXIgPSByZXF1aXJlKCcuL2J1aWxkZXInKTtcblxuICBwYXJzZXIgPSByZXF1aXJlKCcuL3BhcnNlcicpO1xuXG4gIHByb2Nlc3NvcnMgPSByZXF1aXJlKCcuL3Byb2Nlc3NvcnMnKTtcblxuICBleHBvcnRzLmRlZmF1bHRzID0gZGVmYXVsdHMuZGVmYXVsdHM7XG5cbiAgZXhwb3J0cy5wcm9jZXNzb3JzID0gcHJvY2Vzc29ycztcblxuICBleHBvcnRzLlZhbGlkYXRpb25FcnJvciA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKFZhbGlkYXRpb25FcnJvciwgc3VwZXJDbGFzcyk7XG5cbiAgICBmdW5jdGlvbiBWYWxpZGF0aW9uRXJyb3IobWVzc2FnZSkge1xuICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICB9XG5cbiAgICByZXR1cm4gVmFsaWRhdGlvbkVycm9yO1xuXG4gIH0pKEVycm9yKTtcblxuICBleHBvcnRzLkJ1aWxkZXIgPSBidWlsZGVyLkJ1aWxkZXI7XG5cbiAgZXhwb3J0cy5QYXJzZXIgPSBwYXJzZXIuUGFyc2VyO1xuXG4gIGV4cG9ydHMucGFyc2VTdHJpbmcgPSBwYXJzZXIucGFyc2VTdHJpbmc7XG5cbiAgZXhwb3J0cy5wYXJzZVN0cmluZ1Byb21pc2UgPSBwYXJzZXIucGFyc2VTdHJpbmdQcm9taXNlO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgRGlzY29ubmVjdGVkOiAxLFxuICAgIFByZWNlZGluZzogMixcbiAgICBGb2xsb3dpbmc6IDQsXG4gICAgQ29udGFpbnM6IDgsXG4gICAgQ29udGFpbmVkQnk6IDE2LFxuICAgIEltcGxlbWVudGF0aW9uU3BlY2lmaWM6IDMyXG4gIH07XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBFbGVtZW50OiAxLFxuICAgIEF0dHJpYnV0ZTogMixcbiAgICBUZXh0OiAzLFxuICAgIENEYXRhOiA0LFxuICAgIEVudGl0eVJlZmVyZW5jZTogNSxcbiAgICBFbnRpdHlEZWNsYXJhdGlvbjogNixcbiAgICBQcm9jZXNzaW5nSW5zdHJ1Y3Rpb246IDcsXG4gICAgQ29tbWVudDogOCxcbiAgICBEb2N1bWVudDogOSxcbiAgICBEb2NUeXBlOiAxMCxcbiAgICBEb2N1bWVudEZyYWdtZW50OiAxMSxcbiAgICBOb3RhdGlvbkRlY2xhcmF0aW9uOiAxMixcbiAgICBEZWNsYXJhdGlvbjogMjAxLFxuICAgIFJhdzogMjAyLFxuICAgIEF0dHJpYnV0ZURlY2xhcmF0aW9uOiAyMDMsXG4gICAgRWxlbWVudERlY2xhcmF0aW9uOiAyMDQsXG4gICAgRHVtbXk6IDIwNVxuICB9O1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIGFzc2lnbiwgZ2V0VmFsdWUsIGlzQXJyYXksIGlzRW1wdHksIGlzRnVuY3Rpb24sIGlzT2JqZWN0LCBpc1BsYWluT2JqZWN0LFxuICAgIHNsaWNlID0gW10uc2xpY2UsXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIGFzc2lnbiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpLCBrZXksIGxlbiwgc291cmNlLCBzb3VyY2VzLCB0YXJnZXQ7XG4gICAgdGFyZ2V0ID0gYXJndW1lbnRzWzBdLCBzb3VyY2VzID0gMiA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpIDogW107XG4gICAgaWYgKGlzRnVuY3Rpb24oT2JqZWN0LmFzc2lnbikpIHtcbiAgICAgIE9iamVjdC5hc3NpZ24uYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChpID0gMCwgbGVuID0gc291cmNlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBzb3VyY2UgPSBzb3VyY2VzW2ldO1xuICAgICAgICBpZiAoc291cmNlICE9IG51bGwpIHtcbiAgICAgICAgICBmb3IgKGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgIGlmICghaGFzUHJvcC5jYWxsKHNvdXJjZSwga2V5KSkgY29udGludWU7XG4gICAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9O1xuXG4gIGlzRnVuY3Rpb24gPSBmdW5jdGlvbih2YWwpIHtcbiAgICByZXR1cm4gISF2YWwgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG4gIH07XG5cbiAgaXNPYmplY3QgPSBmdW5jdGlvbih2YWwpIHtcbiAgICB2YXIgcmVmO1xuICAgIHJldHVybiAhIXZhbCAmJiAoKHJlZiA9IHR5cGVvZiB2YWwpID09PSAnZnVuY3Rpb24nIHx8IHJlZiA9PT0gJ29iamVjdCcpO1xuICB9O1xuXG4gIGlzQXJyYXkgPSBmdW5jdGlvbih2YWwpIHtcbiAgICBpZiAoaXNGdW5jdGlvbihBcnJheS5pc0FycmF5KSkge1xuICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBBcnJheV0nO1xuICAgIH1cbiAgfTtcblxuICBpc0VtcHR5ID0gZnVuY3Rpb24odmFsKSB7XG4gICAgdmFyIGtleTtcbiAgICBpZiAoaXNBcnJheSh2YWwpKSB7XG4gICAgICByZXR1cm4gIXZhbC5sZW5ndGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoa2V5IGluIHZhbCkge1xuICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbCh2YWwsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgaXNQbGFpbk9iamVjdCA9IGZ1bmN0aW9uKHZhbCkge1xuICAgIHZhciBjdG9yLCBwcm90bztcbiAgICByZXR1cm4gaXNPYmplY3QodmFsKSAmJiAocHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsKSkgJiYgKGN0b3IgPSBwcm90by5jb25zdHJ1Y3RvcikgJiYgKHR5cGVvZiBjdG9yID09PSAnZnVuY3Rpb24nKSAmJiAoY3RvciBpbnN0YW5jZW9mIGN0b3IpICYmIChGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChjdG9yKSA9PT0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoT2JqZWN0KSk7XG4gIH07XG5cbiAgZ2V0VmFsdWUgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAoaXNGdW5jdGlvbihvYmoudmFsdWVPZikpIHtcbiAgICAgIHJldHVybiBvYmoudmFsdWVPZigpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH1cbiAgfTtcblxuICBtb2R1bGUuZXhwb3J0cy5hc3NpZ24gPSBhc3NpZ247XG5cbiAgbW9kdWxlLmV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG5cbiAgbW9kdWxlLmV4cG9ydHMuaXNPYmplY3QgPSBpc09iamVjdDtcblxuICBtb2R1bGUuZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblxuICBtb2R1bGUuZXhwb3J0cy5pc0VtcHR5ID0gaXNFbXB0eTtcblxuICBtb2R1bGUuZXhwb3J0cy5pc1BsYWluT2JqZWN0ID0gaXNQbGFpbk9iamVjdDtcblxuICBtb2R1bGUuZXhwb3J0cy5nZXRWYWx1ZSA9IGdldFZhbHVlO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgTm9uZTogMCxcbiAgICBPcGVuVGFnOiAxLFxuICAgIEluc2lkZVRhZzogMixcbiAgICBDbG9zZVRhZzogM1xuICB9O1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIE5vZGVUeXBlLCBYTUxBdHRyaWJ1dGUsIFhNTE5vZGU7XG5cbiAgTm9kZVR5cGUgPSByZXF1aXJlKCcuL05vZGVUeXBlJyk7XG5cbiAgWE1MTm9kZSA9IHJlcXVpcmUoJy4vWE1MTm9kZScpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MQXR0cmlidXRlID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIFhNTEF0dHJpYnV0ZShwYXJlbnQsIG5hbWUsIHZhbHVlKSB7XG4gICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgIGlmICh0aGlzLnBhcmVudCkge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB0aGlzLnBhcmVudC5vcHRpb25zO1xuICAgICAgICB0aGlzLnN0cmluZ2lmeSA9IHRoaXMucGFyZW50LnN0cmluZ2lmeTtcbiAgICAgIH1cbiAgICAgIGlmIChuYW1lID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBhdHRyaWJ1dGUgbmFtZS4gXCIgKyB0aGlzLmRlYnVnSW5mbyhuYW1lKSk7XG4gICAgICB9XG4gICAgICB0aGlzLm5hbWUgPSB0aGlzLnN0cmluZ2lmeS5uYW1lKG5hbWUpO1xuICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuc3RyaW5naWZ5LmF0dFZhbHVlKHZhbHVlKTtcbiAgICAgIHRoaXMudHlwZSA9IE5vZGVUeXBlLkF0dHJpYnV0ZTtcbiAgICAgIHRoaXMuaXNJZCA9IGZhbHNlO1xuICAgICAgdGhpcy5zY2hlbWFUeXBlSW5mbyA9IG51bGw7XG4gICAgfVxuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTEF0dHJpYnV0ZS5wcm90b3R5cGUsICdub2RlVHlwZScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnR5cGU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MQXR0cmlidXRlLnByb3RvdHlwZSwgJ293bmVyRWxlbWVudCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxBdHRyaWJ1dGUucHJvdG90eXBlLCAndGV4dENvbnRlbnQnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlID0gdmFsdWUgfHwgJyc7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MQXR0cmlidXRlLnByb3RvdHlwZSwgJ25hbWVzcGFjZVVSSScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxBdHRyaWJ1dGUucHJvdG90eXBlLCAncHJlZml4Jywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTEF0dHJpYnV0ZS5wcm90b3R5cGUsICdsb2NhbE5hbWUnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTEF0dHJpYnV0ZS5wcm90b3R5cGUsICdzcGVjaWZpZWQnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIFhNTEF0dHJpYnV0ZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBPYmplY3QuY3JlYXRlKHRoaXMpO1xuICAgIH07XG5cbiAgICBYTUxBdHRyaWJ1dGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy53cml0ZXIuYXR0cmlidXRlKHRoaXMsIHRoaXMub3B0aW9ucy53cml0ZXIuZmlsdGVyT3B0aW9ucyhvcHRpb25zKSk7XG4gICAgfTtcblxuICAgIFhNTEF0dHJpYnV0ZS5wcm90b3R5cGUuZGVidWdJbmZvID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgbmFtZSA9IG5hbWUgfHwgdGhpcy5uYW1lO1xuICAgICAgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gXCJwYXJlbnQ6IDxcIiArIHRoaXMucGFyZW50Lm5hbWUgKyBcIj5cIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBcImF0dHJpYnV0ZToge1wiICsgbmFtZSArIFwifSwgcGFyZW50OiA8XCIgKyB0aGlzLnBhcmVudC5uYW1lICsgXCI+XCI7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFhNTEF0dHJpYnV0ZS5wcm90b3R5cGUuaXNFcXVhbE5vZGUgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICBpZiAobm9kZS5uYW1lc3BhY2VVUkkgIT09IHRoaXMubmFtZXNwYWNlVVJJKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChub2RlLnByZWZpeCAhPT0gdGhpcy5wcmVmaXgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGUubG9jYWxOYW1lICE9PSB0aGlzLmxvY2FsTmFtZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAobm9kZS52YWx1ZSAhPT0gdGhpcy52YWx1ZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFhNTEF0dHJpYnV0ZTtcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIE5vZGVUeXBlLCBYTUxDRGF0YSwgWE1MQ2hhcmFjdGVyRGF0YSxcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIE5vZGVUeXBlID0gcmVxdWlyZSgnLi9Ob2RlVHlwZScpO1xuXG4gIFhNTENoYXJhY3RlckRhdGEgPSByZXF1aXJlKCcuL1hNTENoYXJhY3RlckRhdGEnKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTENEYXRhID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICBleHRlbmQoWE1MQ0RhdGEsIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gWE1MQ0RhdGEocGFyZW50LCB0ZXh0KSB7XG4gICAgICBYTUxDRGF0YS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBwYXJlbnQpO1xuICAgICAgaWYgKHRleHQgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIENEQVRBIHRleHQuIFwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgICB9XG4gICAgICB0aGlzLm5hbWUgPSBcIiNjZGF0YS1zZWN0aW9uXCI7XG4gICAgICB0aGlzLnR5cGUgPSBOb2RlVHlwZS5DRGF0YTtcbiAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnN0cmluZ2lmeS5jZGF0YSh0ZXh0KTtcbiAgICB9XG5cbiAgICBYTUxDRGF0YS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBPYmplY3QuY3JlYXRlKHRoaXMpO1xuICAgIH07XG5cbiAgICBYTUxDRGF0YS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLndyaXRlci5jZGF0YSh0aGlzLCB0aGlzLm9wdGlvbnMud3JpdGVyLmZpbHRlck9wdGlvbnMob3B0aW9ucykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gWE1MQ0RhdGE7XG5cbiAgfSkoWE1MQ2hhcmFjdGVyRGF0YSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgWE1MQ2hhcmFjdGVyRGF0YSwgWE1MTm9kZSxcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIFhNTE5vZGUgPSByZXF1aXJlKCcuL1hNTE5vZGUnKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTENoYXJhY3RlckRhdGEgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChYTUxDaGFyYWN0ZXJEYXRhLCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIFhNTENoYXJhY3RlckRhdGEocGFyZW50KSB7XG4gICAgICBYTUxDaGFyYWN0ZXJEYXRhLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIHBhcmVudCk7XG4gICAgICB0aGlzLnZhbHVlID0gJyc7XG4gICAgfVxuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTENoYXJhY3RlckRhdGEucHJvdG90eXBlLCAnZGF0YScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPSB2YWx1ZSB8fCAnJztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxDaGFyYWN0ZXJEYXRhLnByb3RvdHlwZSwgJ2xlbmd0aCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxDaGFyYWN0ZXJEYXRhLnByb3RvdHlwZSwgJ3RleHRDb250ZW50Jywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZSA9IHZhbHVlIHx8ICcnO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgWE1MQ2hhcmFjdGVyRGF0YS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBPYmplY3QuY3JlYXRlKHRoaXMpO1xuICAgIH07XG5cbiAgICBYTUxDaGFyYWN0ZXJEYXRhLnByb3RvdHlwZS5zdWJzdHJpbmdEYXRhID0gZnVuY3Rpb24ob2Zmc2V0LCBjb3VudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxDaGFyYWN0ZXJEYXRhLnByb3RvdHlwZS5hcHBlbmREYXRhID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTENoYXJhY3RlckRhdGEucHJvdG90eXBlLmluc2VydERhdGEgPSBmdW5jdGlvbihvZmZzZXQsIGFyZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxDaGFyYWN0ZXJEYXRhLnByb3RvdHlwZS5kZWxldGVEYXRhID0gZnVuY3Rpb24ob2Zmc2V0LCBjb3VudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxDaGFyYWN0ZXJEYXRhLnByb3RvdHlwZS5yZXBsYWNlRGF0YSA9IGZ1bmN0aW9uKG9mZnNldCwgY291bnQsIGFyZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxDaGFyYWN0ZXJEYXRhLnByb3RvdHlwZS5pc0VxdWFsTm9kZSA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIGlmICghWE1MQ2hhcmFjdGVyRGF0YS5fX3N1cGVyX18uaXNFcXVhbE5vZGUuYXBwbHkodGhpcywgYXJndW1lbnRzKS5pc0VxdWFsTm9kZShub2RlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAobm9kZS5kYXRhICE9PSB0aGlzLmRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxDaGFyYWN0ZXJEYXRhO1xuXG4gIH0pKFhNTE5vZGUpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIE5vZGVUeXBlLCBYTUxDaGFyYWN0ZXJEYXRhLCBYTUxDb21tZW50LFxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgTm9kZVR5cGUgPSByZXF1aXJlKCcuL05vZGVUeXBlJyk7XG5cbiAgWE1MQ2hhcmFjdGVyRGF0YSA9IHJlcXVpcmUoJy4vWE1MQ2hhcmFjdGVyRGF0YScpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MQ29tbWVudCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKFhNTENvbW1lbnQsIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gWE1MQ29tbWVudChwYXJlbnQsIHRleHQpIHtcbiAgICAgIFhNTENvbW1lbnQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgcGFyZW50KTtcbiAgICAgIGlmICh0ZXh0ID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBjb21tZW50IHRleHQuIFwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgICB9XG4gICAgICB0aGlzLm5hbWUgPSBcIiNjb21tZW50XCI7XG4gICAgICB0aGlzLnR5cGUgPSBOb2RlVHlwZS5Db21tZW50O1xuICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuc3RyaW5naWZ5LmNvbW1lbnQodGV4dCk7XG4gICAgfVxuXG4gICAgWE1MQ29tbWVudC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBPYmplY3QuY3JlYXRlKHRoaXMpO1xuICAgIH07XG5cbiAgICBYTUxDb21tZW50LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMud3JpdGVyLmNvbW1lbnQodGhpcywgdGhpcy5vcHRpb25zLndyaXRlci5maWx0ZXJPcHRpb25zKG9wdGlvbnMpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFhNTENvbW1lbnQ7XG5cbiAgfSkoWE1MQ2hhcmFjdGVyRGF0YSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgWE1MRE9NQ29uZmlndXJhdGlvbiwgWE1MRE9NRXJyb3JIYW5kbGVyLCBYTUxET01TdHJpbmdMaXN0O1xuXG4gIFhNTERPTUVycm9ySGFuZGxlciA9IHJlcXVpcmUoJy4vWE1MRE9NRXJyb3JIYW5kbGVyJyk7XG5cbiAgWE1MRE9NU3RyaW5nTGlzdCA9IHJlcXVpcmUoJy4vWE1MRE9NU3RyaW5nTGlzdCcpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MRE9NQ29uZmlndXJhdGlvbiA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBYTUxET01Db25maWd1cmF0aW9uKCkge1xuICAgICAgdmFyIGNsb25lZFNlbGY7XG4gICAgICB0aGlzLmRlZmF1bHRQYXJhbXMgPSB7XG4gICAgICAgIFwiY2Fub25pY2FsLWZvcm1cIjogZmFsc2UsXG4gICAgICAgIFwiY2RhdGEtc2VjdGlvbnNcIjogZmFsc2UsXG4gICAgICAgIFwiY29tbWVudHNcIjogZmFsc2UsXG4gICAgICAgIFwiZGF0YXR5cGUtbm9ybWFsaXphdGlvblwiOiBmYWxzZSxcbiAgICAgICAgXCJlbGVtZW50LWNvbnRlbnQtd2hpdGVzcGFjZVwiOiB0cnVlLFxuICAgICAgICBcImVudGl0aWVzXCI6IHRydWUsXG4gICAgICAgIFwiZXJyb3ItaGFuZGxlclwiOiBuZXcgWE1MRE9NRXJyb3JIYW5kbGVyKCksXG4gICAgICAgIFwiaW5mb3NldFwiOiB0cnVlLFxuICAgICAgICBcInZhbGlkYXRlLWlmLXNjaGVtYVwiOiBmYWxzZSxcbiAgICAgICAgXCJuYW1lc3BhY2VzXCI6IHRydWUsXG4gICAgICAgIFwibmFtZXNwYWNlLWRlY2xhcmF0aW9uc1wiOiB0cnVlLFxuICAgICAgICBcIm5vcm1hbGl6ZS1jaGFyYWN0ZXJzXCI6IGZhbHNlLFxuICAgICAgICBcInNjaGVtYS1sb2NhdGlvblwiOiAnJyxcbiAgICAgICAgXCJzY2hlbWEtdHlwZVwiOiAnJyxcbiAgICAgICAgXCJzcGxpdC1jZGF0YS1zZWN0aW9uc1wiOiB0cnVlLFxuICAgICAgICBcInZhbGlkYXRlXCI6IGZhbHNlLFxuICAgICAgICBcIndlbGwtZm9ybWVkXCI6IHRydWVcbiAgICAgIH07XG4gICAgICB0aGlzLnBhcmFtcyA9IGNsb25lZFNlbGYgPSBPYmplY3QuY3JlYXRlKHRoaXMuZGVmYXVsdFBhcmFtcyk7XG4gICAgfVxuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTERPTUNvbmZpZ3VyYXRpb24ucHJvdG90eXBlLCAncGFyYW1ldGVyTmFtZXMnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbmV3IFhNTERPTVN0cmluZ0xpc3QoT2JqZWN0LmtleXModGhpcy5kZWZhdWx0UGFyYW1zKSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBYTUxET01Db25maWd1cmF0aW9uLnByb3RvdHlwZS5nZXRQYXJhbWV0ZXIgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICBpZiAodGhpcy5wYXJhbXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1zW25hbWVdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFhNTERPTUNvbmZpZ3VyYXRpb24ucHJvdG90eXBlLmNhblNldFBhcmFtZXRlciA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgWE1MRE9NQ29uZmlndXJhdGlvbi5wcm90b3R5cGUuc2V0UGFyYW1ldGVyID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmFtc1tuYW1lXSA9IHZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRlbGV0ZSB0aGlzLnBhcmFtc1tuYW1lXTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIFhNTERPTUNvbmZpZ3VyYXRpb247XG5cbiAgfSkoKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBYTUxET01FcnJvckhhbmRsZXI7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBYTUxET01FcnJvckhhbmRsZXIgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gWE1MRE9NRXJyb3JIYW5kbGVyKCkge31cblxuICAgIFhNTERPTUVycm9ySGFuZGxlci5wcm90b3R5cGUuaGFuZGxlRXJyb3IgPSBmdW5jdGlvbihlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFhNTERPTUVycm9ySGFuZGxlcjtcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIFhNTERPTUltcGxlbWVudGF0aW9uO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MRE9NSW1wbGVtZW50YXRpb24gPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gWE1MRE9NSW1wbGVtZW50YXRpb24oKSB7fVxuXG4gICAgWE1MRE9NSW1wbGVtZW50YXRpb24ucHJvdG90eXBlLmhhc0ZlYXR1cmUgPSBmdW5jdGlvbihmZWF0dXJlLCB2ZXJzaW9uKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgWE1MRE9NSW1wbGVtZW50YXRpb24ucHJvdG90eXBlLmNyZWF0ZURvY3VtZW50VHlwZSA9IGZ1bmN0aW9uKHF1YWxpZmllZE5hbWUsIHB1YmxpY0lkLCBzeXN0ZW1JZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgfTtcblxuICAgIFhNTERPTUltcGxlbWVudGF0aW9uLnByb3RvdHlwZS5jcmVhdGVEb2N1bWVudCA9IGZ1bmN0aW9uKG5hbWVzcGFjZVVSSSwgcXVhbGlmaWVkTmFtZSwgZG9jdHlwZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgfTtcblxuICAgIFhNTERPTUltcGxlbWVudGF0aW9uLnByb3RvdHlwZS5jcmVhdGVIVE1MRG9jdW1lbnQgPSBmdW5jdGlvbih0aXRsZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgfTtcblxuICAgIFhNTERPTUltcGxlbWVudGF0aW9uLnByb3RvdHlwZS5nZXRGZWF0dXJlID0gZnVuY3Rpb24oZmVhdHVyZSwgdmVyc2lvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxET01JbXBsZW1lbnRhdGlvbjtcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIFhNTERPTVN0cmluZ0xpc3Q7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBYTUxET01TdHJpbmdMaXN0ID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIFhNTERPTVN0cmluZ0xpc3QoYXJyKSB7XG4gICAgICB0aGlzLmFyciA9IGFyciB8fCBbXTtcbiAgICB9XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRE9NU3RyaW5nTGlzdC5wcm90b3R5cGUsICdsZW5ndGgnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcnIubGVuZ3RoO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgWE1MRE9NU3RyaW5nTGlzdC5wcm90b3R5cGUuaXRlbSA9IGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgICByZXR1cm4gdGhpcy5hcnJbaW5kZXhdIHx8IG51bGw7XG4gICAgfTtcblxuICAgIFhNTERPTVN0cmluZ0xpc3QucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgICByZXR1cm4gdGhpcy5hcnIuaW5kZXhPZihzdHIpICE9PSAtMTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFhNTERPTVN0cmluZ0xpc3Q7XG5cbiAgfSkoKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBOb2RlVHlwZSwgWE1MRFREQXR0TGlzdCwgWE1MTm9kZSxcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIFhNTE5vZGUgPSByZXF1aXJlKCcuL1hNTE5vZGUnKTtcblxuICBOb2RlVHlwZSA9IHJlcXVpcmUoJy4vTm9kZVR5cGUnKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTERUREF0dExpc3QgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChYTUxEVERBdHRMaXN0LCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIFhNTERUREF0dExpc3QocGFyZW50LCBlbGVtZW50TmFtZSwgYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVHlwZSwgZGVmYXVsdFZhbHVlVHlwZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICBYTUxEVERBdHRMaXN0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIHBhcmVudCk7XG4gICAgICBpZiAoZWxlbWVudE5hbWUgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIERURCBlbGVtZW50IG5hbWUuIFwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgICB9XG4gICAgICBpZiAoYXR0cmlidXRlTmFtZSA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgRFREIGF0dHJpYnV0ZSBuYW1lLiBcIiArIHRoaXMuZGVidWdJbmZvKGVsZW1lbnROYW1lKSk7XG4gICAgICB9XG4gICAgICBpZiAoIWF0dHJpYnV0ZVR5cGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBEVEQgYXR0cmlidXRlIHR5cGUuIFwiICsgdGhpcy5kZWJ1Z0luZm8oZWxlbWVudE5hbWUpKTtcbiAgICAgIH1cbiAgICAgIGlmICghZGVmYXVsdFZhbHVlVHlwZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIERURCBhdHRyaWJ1dGUgZGVmYXVsdC4gXCIgKyB0aGlzLmRlYnVnSW5mbyhlbGVtZW50TmFtZSkpO1xuICAgICAgfVxuICAgICAgaWYgKGRlZmF1bHRWYWx1ZVR5cGUuaW5kZXhPZignIycpICE9PSAwKSB7XG4gICAgICAgIGRlZmF1bHRWYWx1ZVR5cGUgPSAnIycgKyBkZWZhdWx0VmFsdWVUeXBlO1xuICAgICAgfVxuICAgICAgaWYgKCFkZWZhdWx0VmFsdWVUeXBlLm1hdGNoKC9eKCNSRVFVSVJFRHwjSU1QTElFRHwjRklYRUR8I0RFRkFVTFQpJC8pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZGVmYXVsdCB2YWx1ZSB0eXBlOyBleHBlY3RlZDogI1JFUVVJUkVELCAjSU1QTElFRCwgI0ZJWEVEIG9yICNERUZBVUxULiBcIiArIHRoaXMuZGVidWdJbmZvKGVsZW1lbnROYW1lKSk7XG4gICAgICB9XG4gICAgICBpZiAoZGVmYXVsdFZhbHVlICYmICFkZWZhdWx0VmFsdWVUeXBlLm1hdGNoKC9eKCNGSVhFRHwjREVGQVVMVCkkLykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGVmYXVsdCB2YWx1ZSBvbmx5IGFwcGxpZXMgdG8gI0ZJWEVEIG9yICNERUZBVUxULiBcIiArIHRoaXMuZGVidWdJbmZvKGVsZW1lbnROYW1lKSk7XG4gICAgICB9XG4gICAgICB0aGlzLmVsZW1lbnROYW1lID0gdGhpcy5zdHJpbmdpZnkubmFtZShlbGVtZW50TmFtZSk7XG4gICAgICB0aGlzLnR5cGUgPSBOb2RlVHlwZS5BdHRyaWJ1dGVEZWNsYXJhdGlvbjtcbiAgICAgIHRoaXMuYXR0cmlidXRlTmFtZSA9IHRoaXMuc3RyaW5naWZ5Lm5hbWUoYXR0cmlidXRlTmFtZSk7XG4gICAgICB0aGlzLmF0dHJpYnV0ZVR5cGUgPSB0aGlzLnN0cmluZ2lmeS5kdGRBdHRUeXBlKGF0dHJpYnV0ZVR5cGUpO1xuICAgICAgaWYgKGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICB0aGlzLmRlZmF1bHRWYWx1ZSA9IHRoaXMuc3RyaW5naWZ5LmR0ZEF0dERlZmF1bHQoZGVmYXVsdFZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZGVmYXVsdFZhbHVlVHlwZSA9IGRlZmF1bHRWYWx1ZVR5cGU7XG4gICAgfVxuXG4gICAgWE1MRFREQXR0TGlzdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLndyaXRlci5kdGRBdHRMaXN0KHRoaXMsIHRoaXMub3B0aW9ucy53cml0ZXIuZmlsdGVyT3B0aW9ucyhvcHRpb25zKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxEVERBdHRMaXN0O1xuXG4gIH0pKFhNTE5vZGUpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIE5vZGVUeXBlLCBYTUxEVERFbGVtZW50LCBYTUxOb2RlLFxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgWE1MTm9kZSA9IHJlcXVpcmUoJy4vWE1MTm9kZScpO1xuXG4gIE5vZGVUeXBlID0gcmVxdWlyZSgnLi9Ob2RlVHlwZScpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MRFRERWxlbWVudCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKFhNTERUREVsZW1lbnQsIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gWE1MRFRERWxlbWVudChwYXJlbnQsIG5hbWUsIHZhbHVlKSB7XG4gICAgICBYTUxEVERFbGVtZW50Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIHBhcmVudCk7XG4gICAgICBpZiAobmFtZSA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgRFREIGVsZW1lbnQgbmFtZS4gXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cbiAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgdmFsdWUgPSAnKCNQQ0RBVEEpJztcbiAgICAgIH1cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICB2YWx1ZSA9ICcoJyArIHZhbHVlLmpvaW4oJywnKSArICcpJztcbiAgICAgIH1cbiAgICAgIHRoaXMubmFtZSA9IHRoaXMuc3RyaW5naWZ5Lm5hbWUobmFtZSk7XG4gICAgICB0aGlzLnR5cGUgPSBOb2RlVHlwZS5FbGVtZW50RGVjbGFyYXRpb247XG4gICAgICB0aGlzLnZhbHVlID0gdGhpcy5zdHJpbmdpZnkuZHRkRWxlbWVudFZhbHVlKHZhbHVlKTtcbiAgICB9XG5cbiAgICBYTUxEVERFbGVtZW50LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMud3JpdGVyLmR0ZEVsZW1lbnQodGhpcywgdGhpcy5vcHRpb25zLndyaXRlci5maWx0ZXJPcHRpb25zKG9wdGlvbnMpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFhNTERUREVsZW1lbnQ7XG5cbiAgfSkoWE1MTm9kZSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgTm9kZVR5cGUsIFhNTERUREVudGl0eSwgWE1MTm9kZSwgaXNPYmplY3QsXG4gICAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICBpc09iamVjdCA9IHJlcXVpcmUoJy4vVXRpbGl0eScpLmlzT2JqZWN0O1xuXG4gIFhNTE5vZGUgPSByZXF1aXJlKCcuL1hNTE5vZGUnKTtcblxuICBOb2RlVHlwZSA9IHJlcXVpcmUoJy4vTm9kZVR5cGUnKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTERUREVudGl0eSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKFhNTERUREVudGl0eSwgc3VwZXJDbGFzcyk7XG5cbiAgICBmdW5jdGlvbiBYTUxEVERFbnRpdHkocGFyZW50LCBwZSwgbmFtZSwgdmFsdWUpIHtcbiAgICAgIFhNTERUREVudGl0eS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBwYXJlbnQpO1xuICAgICAgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIERURCBlbnRpdHkgbmFtZS4gXCIgKyB0aGlzLmRlYnVnSW5mbyhuYW1lKSk7XG4gICAgICB9XG4gICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIERURCBlbnRpdHkgdmFsdWUuIFwiICsgdGhpcy5kZWJ1Z0luZm8obmFtZSkpO1xuICAgICAgfVxuICAgICAgdGhpcy5wZSA9ICEhcGU7XG4gICAgICB0aGlzLm5hbWUgPSB0aGlzLnN0cmluZ2lmeS5uYW1lKG5hbWUpO1xuICAgICAgdGhpcy50eXBlID0gTm9kZVR5cGUuRW50aXR5RGVjbGFyYXRpb247XG4gICAgICBpZiAoIWlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5zdHJpbmdpZnkuZHRkRW50aXR5VmFsdWUodmFsdWUpO1xuICAgICAgICB0aGlzLmludGVybmFsID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghdmFsdWUucHViSUQgJiYgIXZhbHVlLnN5c0lEKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHVibGljIGFuZC9vciBzeXN0ZW0gaWRlbnRpZmllcnMgYXJlIHJlcXVpcmVkIGZvciBhbiBleHRlcm5hbCBlbnRpdHkuIFwiICsgdGhpcy5kZWJ1Z0luZm8obmFtZSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZS5wdWJJRCAmJiAhdmFsdWUuc3lzSUQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTeXN0ZW0gaWRlbnRpZmllciBpcyByZXF1aXJlZCBmb3IgYSBwdWJsaWMgZXh0ZXJuYWwgZW50aXR5LiBcIiArIHRoaXMuZGVidWdJbmZvKG5hbWUpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmludGVybmFsID0gZmFsc2U7XG4gICAgICAgIGlmICh2YWx1ZS5wdWJJRCAhPSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5wdWJJRCA9IHRoaXMuc3RyaW5naWZ5LmR0ZFB1YklEKHZhbHVlLnB1YklEKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUuc3lzSUQgIT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMuc3lzSUQgPSB0aGlzLnN0cmluZ2lmeS5kdGRTeXNJRCh2YWx1ZS5zeXNJRCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlLm5EYXRhICE9IG51bGwpIHtcbiAgICAgICAgICB0aGlzLm5EYXRhID0gdGhpcy5zdHJpbmdpZnkuZHRkTkRhdGEodmFsdWUubkRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBlICYmIHRoaXMubkRhdGEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3RhdGlvbiBkZWNsYXJhdGlvbiBpcyBub3QgYWxsb3dlZCBpbiBhIHBhcmFtZXRlciBlbnRpdHkuIFwiICsgdGhpcy5kZWJ1Z0luZm8obmFtZSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTERUREVudGl0eS5wcm90b3R5cGUsICdwdWJsaWNJZCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnB1YklEO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTERUREVudGl0eS5wcm90b3R5cGUsICdzeXN0ZW1JZCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN5c0lEO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTERUREVudGl0eS5wcm90b3R5cGUsICdub3RhdGlvbk5hbWUnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uRGF0YSB8fCBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTERUREVudGl0eS5wcm90b3R5cGUsICdpbnB1dEVuY29kaW5nJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRFRERW50aXR5LnByb3RvdHlwZSwgJ3htbEVuY29kaW5nJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRFRERW50aXR5LnByb3RvdHlwZSwgJ3htbFZlcnNpb24nLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIFhNTERUREVudGl0eS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLndyaXRlci5kdGRFbnRpdHkodGhpcywgdGhpcy5vcHRpb25zLndyaXRlci5maWx0ZXJPcHRpb25zKG9wdGlvbnMpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFhNTERUREVudGl0eTtcblxuICB9KShYTUxOb2RlKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBOb2RlVHlwZSwgWE1MRFRETm90YXRpb24sIFhNTE5vZGUsXG4gICAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICBYTUxOb2RlID0gcmVxdWlyZSgnLi9YTUxOb2RlJyk7XG5cbiAgTm9kZVR5cGUgPSByZXF1aXJlKCcuL05vZGVUeXBlJyk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBYTUxEVEROb3RhdGlvbiA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKFhNTERURE5vdGF0aW9uLCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIFhNTERURE5vdGF0aW9uKHBhcmVudCwgbmFtZSwgdmFsdWUpIHtcbiAgICAgIFhNTERURE5vdGF0aW9uLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIHBhcmVudCk7XG4gICAgICBpZiAobmFtZSA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgRFREIG5vdGF0aW9uIG5hbWUuIFwiICsgdGhpcy5kZWJ1Z0luZm8obmFtZSkpO1xuICAgICAgfVxuICAgICAgaWYgKCF2YWx1ZS5wdWJJRCAmJiAhdmFsdWUuc3lzSUQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHVibGljIG9yIHN5c3RlbSBpZGVudGlmaWVycyBhcmUgcmVxdWlyZWQgZm9yIGFuIGV4dGVybmFsIGVudGl0eS4gXCIgKyB0aGlzLmRlYnVnSW5mbyhuYW1lKSk7XG4gICAgICB9XG4gICAgICB0aGlzLm5hbWUgPSB0aGlzLnN0cmluZ2lmeS5uYW1lKG5hbWUpO1xuICAgICAgdGhpcy50eXBlID0gTm9kZVR5cGUuTm90YXRpb25EZWNsYXJhdGlvbjtcbiAgICAgIGlmICh2YWx1ZS5wdWJJRCAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMucHViSUQgPSB0aGlzLnN0cmluZ2lmeS5kdGRQdWJJRCh2YWx1ZS5wdWJJRCk7XG4gICAgICB9XG4gICAgICBpZiAodmFsdWUuc3lzSUQgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnN5c0lEID0gdGhpcy5zdHJpbmdpZnkuZHRkU3lzSUQodmFsdWUuc3lzSUQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxEVEROb3RhdGlvbi5wcm90b3R5cGUsICdwdWJsaWNJZCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnB1YklEO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTERURE5vdGF0aW9uLnByb3RvdHlwZSwgJ3N5c3RlbUlkJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3lzSUQ7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBYTUxEVEROb3RhdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLndyaXRlci5kdGROb3RhdGlvbih0aGlzLCB0aGlzLm9wdGlvbnMud3JpdGVyLmZpbHRlck9wdGlvbnMob3B0aW9ucykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gWE1MRFRETm90YXRpb247XG5cbiAgfSkoWE1MTm9kZSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgTm9kZVR5cGUsIFhNTERlY2xhcmF0aW9uLCBYTUxOb2RlLCBpc09iamVjdCxcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9VdGlsaXR5JykuaXNPYmplY3Q7XG5cbiAgWE1MTm9kZSA9IHJlcXVpcmUoJy4vWE1MTm9kZScpO1xuXG4gIE5vZGVUeXBlID0gcmVxdWlyZSgnLi9Ob2RlVHlwZScpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MRGVjbGFyYXRpb24gPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChYTUxEZWNsYXJhdGlvbiwgc3VwZXJDbGFzcyk7XG5cbiAgICBmdW5jdGlvbiBYTUxEZWNsYXJhdGlvbihwYXJlbnQsIHZlcnNpb24sIGVuY29kaW5nLCBzdGFuZGFsb25lKSB7XG4gICAgICB2YXIgcmVmO1xuICAgICAgWE1MRGVjbGFyYXRpb24uX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgcGFyZW50KTtcbiAgICAgIGlmIChpc09iamVjdCh2ZXJzaW9uKSkge1xuICAgICAgICByZWYgPSB2ZXJzaW9uLCB2ZXJzaW9uID0gcmVmLnZlcnNpb24sIGVuY29kaW5nID0gcmVmLmVuY29kaW5nLCBzdGFuZGFsb25lID0gcmVmLnN0YW5kYWxvbmU7XG4gICAgICB9XG4gICAgICBpZiAoIXZlcnNpb24pIHtcbiAgICAgICAgdmVyc2lvbiA9ICcxLjAnO1xuICAgICAgfVxuICAgICAgdGhpcy50eXBlID0gTm9kZVR5cGUuRGVjbGFyYXRpb247XG4gICAgICB0aGlzLnZlcnNpb24gPSB0aGlzLnN0cmluZ2lmeS54bWxWZXJzaW9uKHZlcnNpb24pO1xuICAgICAgaWYgKGVuY29kaW5nICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5lbmNvZGluZyA9IHRoaXMuc3RyaW5naWZ5LnhtbEVuY29kaW5nKGVuY29kaW5nKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGFuZGFsb25lICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5zdGFuZGFsb25lID0gdGhpcy5zdHJpbmdpZnkueG1sU3RhbmRhbG9uZShzdGFuZGFsb25lKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBYTUxEZWNsYXJhdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLndyaXRlci5kZWNsYXJhdGlvbih0aGlzLCB0aGlzLm9wdGlvbnMud3JpdGVyLmZpbHRlck9wdGlvbnMob3B0aW9ucykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gWE1MRGVjbGFyYXRpb247XG5cbiAgfSkoWE1MTm9kZSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgTm9kZVR5cGUsIFhNTERUREF0dExpc3QsIFhNTERUREVsZW1lbnQsIFhNTERUREVudGl0eSwgWE1MRFRETm90YXRpb24sIFhNTERvY1R5cGUsIFhNTE5hbWVkTm9kZU1hcCwgWE1MTm9kZSwgaXNPYmplY3QsXG4gICAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICBpc09iamVjdCA9IHJlcXVpcmUoJy4vVXRpbGl0eScpLmlzT2JqZWN0O1xuXG4gIFhNTE5vZGUgPSByZXF1aXJlKCcuL1hNTE5vZGUnKTtcblxuICBOb2RlVHlwZSA9IHJlcXVpcmUoJy4vTm9kZVR5cGUnKTtcblxuICBYTUxEVERBdHRMaXN0ID0gcmVxdWlyZSgnLi9YTUxEVERBdHRMaXN0Jyk7XG5cbiAgWE1MRFRERW50aXR5ID0gcmVxdWlyZSgnLi9YTUxEVERFbnRpdHknKTtcblxuICBYTUxEVERFbGVtZW50ID0gcmVxdWlyZSgnLi9YTUxEVERFbGVtZW50Jyk7XG5cbiAgWE1MRFRETm90YXRpb24gPSByZXF1aXJlKCcuL1hNTERURE5vdGF0aW9uJyk7XG5cbiAgWE1MTmFtZWROb2RlTWFwID0gcmVxdWlyZSgnLi9YTUxOYW1lZE5vZGVNYXAnKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTERvY1R5cGUgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChYTUxEb2NUeXBlLCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIFhNTERvY1R5cGUocGFyZW50LCBwdWJJRCwgc3lzSUQpIHtcbiAgICAgIHZhciBjaGlsZCwgaSwgbGVuLCByZWYsIHJlZjEsIHJlZjI7XG4gICAgICBYTUxEb2NUeXBlLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIHBhcmVudCk7XG4gICAgICB0aGlzLnR5cGUgPSBOb2RlVHlwZS5Eb2NUeXBlO1xuICAgICAgaWYgKHBhcmVudC5jaGlsZHJlbikge1xuICAgICAgICByZWYgPSBwYXJlbnQuY2hpbGRyZW47XG4gICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIGNoaWxkID0gcmVmW2ldO1xuICAgICAgICAgIGlmIChjaGlsZC50eXBlID09PSBOb2RlVHlwZS5FbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBjaGlsZC5uYW1lO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLmRvY3VtZW50T2JqZWN0ID0gcGFyZW50O1xuICAgICAgaWYgKGlzT2JqZWN0KHB1YklEKSkge1xuICAgICAgICByZWYxID0gcHViSUQsIHB1YklEID0gcmVmMS5wdWJJRCwgc3lzSUQgPSByZWYxLnN5c0lEO1xuICAgICAgfVxuICAgICAgaWYgKHN5c0lEID09IG51bGwpIHtcbiAgICAgICAgcmVmMiA9IFtwdWJJRCwgc3lzSURdLCBzeXNJRCA9IHJlZjJbMF0sIHB1YklEID0gcmVmMlsxXTtcbiAgICAgIH1cbiAgICAgIGlmIChwdWJJRCAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMucHViSUQgPSB0aGlzLnN0cmluZ2lmeS5kdGRQdWJJRChwdWJJRCk7XG4gICAgICB9XG4gICAgICBpZiAoc3lzSUQgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnN5c0lEID0gdGhpcy5zdHJpbmdpZnkuZHRkU3lzSUQoc3lzSUQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxEb2NUeXBlLnByb3RvdHlwZSwgJ2VudGl0aWVzJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNoaWxkLCBpLCBsZW4sIG5vZGVzLCByZWY7XG4gICAgICAgIG5vZGVzID0ge307XG4gICAgICAgIHJlZiA9IHRoaXMuY2hpbGRyZW47XG4gICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIGNoaWxkID0gcmVmW2ldO1xuICAgICAgICAgIGlmICgoY2hpbGQudHlwZSA9PT0gTm9kZVR5cGUuRW50aXR5RGVjbGFyYXRpb24pICYmICFjaGlsZC5wZSkge1xuICAgICAgICAgICAgbm9kZXNbY2hpbGQubmFtZV0gPSBjaGlsZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBYTUxOYW1lZE5vZGVNYXAobm9kZXMpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTERvY1R5cGUucHJvdG90eXBlLCAnbm90YXRpb25zJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNoaWxkLCBpLCBsZW4sIG5vZGVzLCByZWY7XG4gICAgICAgIG5vZGVzID0ge307XG4gICAgICAgIHJlZiA9IHRoaXMuY2hpbGRyZW47XG4gICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIGNoaWxkID0gcmVmW2ldO1xuICAgICAgICAgIGlmIChjaGlsZC50eXBlID09PSBOb2RlVHlwZS5Ob3RhdGlvbkRlY2xhcmF0aW9uKSB7XG4gICAgICAgICAgICBub2Rlc1tjaGlsZC5uYW1lXSA9IGNoaWxkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFhNTE5hbWVkTm9kZU1hcChub2Rlcyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRG9jVHlwZS5wcm90b3R5cGUsICdwdWJsaWNJZCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnB1YklEO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTERvY1R5cGUucHJvdG90eXBlLCAnc3lzdGVtSWQnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zeXNJRDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxEb2NUeXBlLnByb3RvdHlwZSwgJ2ludGVybmFsU3Vic2V0Jywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgWE1MRG9jVHlwZS5wcm90b3R5cGUuZWxlbWVudCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICB2YXIgY2hpbGQ7XG4gICAgICBjaGlsZCA9IG5ldyBYTUxEVERFbGVtZW50KHRoaXMsIG5hbWUsIHZhbHVlKTtcbiAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MRG9jVHlwZS5wcm90b3R5cGUuYXR0TGlzdCA9IGZ1bmN0aW9uKGVsZW1lbnROYW1lLCBhdHRyaWJ1dGVOYW1lLCBhdHRyaWJ1dGVUeXBlLCBkZWZhdWx0VmFsdWVUeXBlLCBkZWZhdWx0VmFsdWUpIHtcbiAgICAgIHZhciBjaGlsZDtcbiAgICAgIGNoaWxkID0gbmV3IFhNTERUREF0dExpc3QodGhpcywgZWxlbWVudE5hbWUsIGF0dHJpYnV0ZU5hbWUsIGF0dHJpYnV0ZVR5cGUsIGRlZmF1bHRWYWx1ZVR5cGUsIGRlZmF1bHRWYWx1ZSk7XG4gICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY1R5cGUucHJvdG90eXBlLmVudGl0eSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICB2YXIgY2hpbGQ7XG4gICAgICBjaGlsZCA9IG5ldyBYTUxEVERFbnRpdHkodGhpcywgZmFsc2UsIG5hbWUsIHZhbHVlKTtcbiAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MRG9jVHlwZS5wcm90b3R5cGUucEVudGl0eSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICB2YXIgY2hpbGQ7XG4gICAgICBjaGlsZCA9IG5ldyBYTUxEVERFbnRpdHkodGhpcywgdHJ1ZSwgbmFtZSwgdmFsdWUpO1xuICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxEb2NUeXBlLnByb3RvdHlwZS5ub3RhdGlvbiA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICB2YXIgY2hpbGQ7XG4gICAgICBjaGlsZCA9IG5ldyBYTUxEVEROb3RhdGlvbih0aGlzLCBuYW1lLCB2YWx1ZSk7XG4gICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY1R5cGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy53cml0ZXIuZG9jVHlwZSh0aGlzLCB0aGlzLm9wdGlvbnMud3JpdGVyLmZpbHRlck9wdGlvbnMob3B0aW9ucykpO1xuICAgIH07XG5cbiAgICBYTUxEb2NUeXBlLnByb3RvdHlwZS5lbGUgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudChuYW1lLCB2YWx1ZSk7XG4gICAgfTtcblxuICAgIFhNTERvY1R5cGUucHJvdG90eXBlLmF0dCA9IGZ1bmN0aW9uKGVsZW1lbnROYW1lLCBhdHRyaWJ1dGVOYW1lLCBhdHRyaWJ1dGVUeXBlLCBkZWZhdWx0VmFsdWVUeXBlLCBkZWZhdWx0VmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dExpc3QoZWxlbWVudE5hbWUsIGF0dHJpYnV0ZU5hbWUsIGF0dHJpYnV0ZVR5cGUsIGRlZmF1bHRWYWx1ZVR5cGUsIGRlZmF1bHRWYWx1ZSk7XG4gICAgfTtcblxuICAgIFhNTERvY1R5cGUucHJvdG90eXBlLmVudCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbnRpdHkobmFtZSwgdmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2NUeXBlLnByb3RvdHlwZS5wZW50ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLnBFbnRpdHkobmFtZSwgdmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2NUeXBlLnByb3RvdHlwZS5ub3QgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMubm90YXRpb24obmFtZSwgdmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2NUeXBlLnByb3RvdHlwZS51cCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMucm9vdCgpIHx8IHRoaXMuZG9jdW1lbnRPYmplY3Q7XG4gICAgfTtcblxuICAgIFhNTERvY1R5cGUucHJvdG90eXBlLmlzRXF1YWxOb2RlID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgaWYgKCFYTUxEb2NUeXBlLl9fc3VwZXJfXy5pc0VxdWFsTm9kZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLmlzRXF1YWxOb2RlKG5vZGUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChub2RlLm5hbWUgIT09IHRoaXMubmFtZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAobm9kZS5wdWJsaWNJZCAhPT0gdGhpcy5wdWJsaWNJZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAobm9kZS5zeXN0ZW1JZCAhPT0gdGhpcy5zeXN0ZW1JZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFhNTERvY1R5cGU7XG5cbiAgfSkoWE1MTm9kZSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgTm9kZVR5cGUsIFhNTERPTUNvbmZpZ3VyYXRpb24sIFhNTERPTUltcGxlbWVudGF0aW9uLCBYTUxEb2N1bWVudCwgWE1MTm9kZSwgWE1MU3RyaW5nV3JpdGVyLCBYTUxTdHJpbmdpZmllciwgaXNQbGFpbk9iamVjdCxcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIGlzUGxhaW5PYmplY3QgPSByZXF1aXJlKCcuL1V0aWxpdHknKS5pc1BsYWluT2JqZWN0O1xuXG4gIFhNTERPTUltcGxlbWVudGF0aW9uID0gcmVxdWlyZSgnLi9YTUxET01JbXBsZW1lbnRhdGlvbicpO1xuXG4gIFhNTERPTUNvbmZpZ3VyYXRpb24gPSByZXF1aXJlKCcuL1hNTERPTUNvbmZpZ3VyYXRpb24nKTtcblxuICBYTUxOb2RlID0gcmVxdWlyZSgnLi9YTUxOb2RlJyk7XG5cbiAgTm9kZVR5cGUgPSByZXF1aXJlKCcuL05vZGVUeXBlJyk7XG5cbiAgWE1MU3RyaW5naWZpZXIgPSByZXF1aXJlKCcuL1hNTFN0cmluZ2lmaWVyJyk7XG5cbiAgWE1MU3RyaW5nV3JpdGVyID0gcmVxdWlyZSgnLi9YTUxTdHJpbmdXcml0ZXInKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTERvY3VtZW50ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICBleHRlbmQoWE1MRG9jdW1lbnQsIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gWE1MRG9jdW1lbnQob3B0aW9ucykge1xuICAgICAgWE1MRG9jdW1lbnQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgbnVsbCk7XG4gICAgICB0aGlzLm5hbWUgPSBcIiNkb2N1bWVudFwiO1xuICAgICAgdGhpcy50eXBlID0gTm9kZVR5cGUuRG9jdW1lbnQ7XG4gICAgICB0aGlzLmRvY3VtZW50VVJJID0gbnVsbDtcbiAgICAgIHRoaXMuZG9tQ29uZmlnID0gbmV3IFhNTERPTUNvbmZpZ3VyYXRpb24oKTtcbiAgICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgICBpZiAoIW9wdGlvbnMud3JpdGVyKSB7XG4gICAgICAgIG9wdGlvbnMud3JpdGVyID0gbmV3IFhNTFN0cmluZ1dyaXRlcigpO1xuICAgICAgfVxuICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgIHRoaXMuc3RyaW5naWZ5ID0gbmV3IFhNTFN0cmluZ2lmaWVyKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxEb2N1bWVudC5wcm90b3R5cGUsICdpbXBsZW1lbnRhdGlvbicsIHtcbiAgICAgIHZhbHVlOiBuZXcgWE1MRE9NSW1wbGVtZW50YXRpb24oKVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTERvY3VtZW50LnByb3RvdHlwZSwgJ2RvY3R5cGUnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY2hpbGQsIGksIGxlbiwgcmVmO1xuICAgICAgICByZWYgPSB0aGlzLmNoaWxkcmVuO1xuICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICBjaGlsZCA9IHJlZltpXTtcbiAgICAgICAgICBpZiAoY2hpbGQudHlwZSA9PT0gTm9kZVR5cGUuRG9jVHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNoaWxkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxEb2N1bWVudC5wcm90b3R5cGUsICdkb2N1bWVudEVsZW1lbnQnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290T2JqZWN0IHx8IG51bGw7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRG9jdW1lbnQucHJvdG90eXBlLCAnaW5wdXRFbmNvZGluZycsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTERvY3VtZW50LnByb3RvdHlwZSwgJ3N0cmljdEVycm9yQ2hlY2tpbmcnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRG9jdW1lbnQucHJvdG90eXBlLCAneG1sRW5jb2RpbmcnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5jaGlsZHJlbi5sZW5ndGggIT09IDAgJiYgdGhpcy5jaGlsZHJlblswXS50eXBlID09PSBOb2RlVHlwZS5EZWNsYXJhdGlvbikge1xuICAgICAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuWzBdLmVuY29kaW5nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRG9jdW1lbnQucHJvdG90eXBlLCAneG1sU3RhbmRhbG9uZScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmNoaWxkcmVuLmxlbmd0aCAhPT0gMCAmJiB0aGlzLmNoaWxkcmVuWzBdLnR5cGUgPT09IE5vZGVUeXBlLkRlY2xhcmF0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW5bMF0uc3RhbmRhbG9uZSA9PT0gJ3llcyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRG9jdW1lbnQucHJvdG90eXBlLCAneG1sVmVyc2lvbicsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmNoaWxkcmVuLmxlbmd0aCAhPT0gMCAmJiB0aGlzLmNoaWxkcmVuWzBdLnR5cGUgPT09IE5vZGVUeXBlLkRlY2xhcmF0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW5bMF0udmVyc2lvbjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gXCIxLjBcIjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTERvY3VtZW50LnByb3RvdHlwZSwgJ1VSTCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50VVJJO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTERvY3VtZW50LnByb3RvdHlwZSwgJ29yaWdpbicsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTERvY3VtZW50LnByb3RvdHlwZSwgJ2NvbXBhdE1vZGUnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxEb2N1bWVudC5wcm90b3R5cGUsICdjaGFyYWN0ZXJTZXQnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxEb2N1bWVudC5wcm90b3R5cGUsICdjb250ZW50VHlwZScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgWE1MRG9jdW1lbnQucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uKHdyaXRlcikge1xuICAgICAgdmFyIHdyaXRlck9wdGlvbnM7XG4gICAgICB3cml0ZXJPcHRpb25zID0ge307XG4gICAgICBpZiAoIXdyaXRlcikge1xuICAgICAgICB3cml0ZXIgPSB0aGlzLm9wdGlvbnMud3JpdGVyO1xuICAgICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHdyaXRlcikpIHtcbiAgICAgICAgd3JpdGVyT3B0aW9ucyA9IHdyaXRlcjtcbiAgICAgICAgd3JpdGVyID0gdGhpcy5vcHRpb25zLndyaXRlcjtcbiAgICAgIH1cbiAgICAgIHJldHVybiB3cml0ZXIuZG9jdW1lbnQodGhpcywgd3JpdGVyLmZpbHRlck9wdGlvbnMod3JpdGVyT3B0aW9ucykpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLndyaXRlci5kb2N1bWVudCh0aGlzLCB0aGlzLm9wdGlvbnMud3JpdGVyLmZpbHRlck9wdGlvbnMob3B0aW9ucykpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudC5wcm90b3R5cGUuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uKHRhZ05hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnQucHJvdG90eXBlLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnQucHJvdG90eXBlLmNyZWF0ZVRleHROb2RlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudC5wcm90b3R5cGUuY3JlYXRlQ29tbWVudCA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnQucHJvdG90eXBlLmNyZWF0ZUNEQVRBU2VjdGlvbiA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnQucHJvdG90eXBlLmNyZWF0ZVByb2Nlc3NpbmdJbnN0cnVjdGlvbiA9IGZ1bmN0aW9uKHRhcmdldCwgZGF0YSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudC5wcm90b3R5cGUuY3JlYXRlQXR0cmlidXRlID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudC5wcm90b3R5cGUuY3JlYXRlRW50aXR5UmVmZXJlbmNlID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudC5wcm90b3R5cGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPSBmdW5jdGlvbih0YWduYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlID0gZnVuY3Rpb24oaW1wb3J0ZWROb2RlLCBkZWVwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50LnByb3RvdHlwZS5jcmVhdGVFbGVtZW50TlMgPSBmdW5jdGlvbihuYW1lc3BhY2VVUkksIHF1YWxpZmllZE5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnQucHJvdG90eXBlLmNyZWF0ZUF0dHJpYnV0ZU5TID0gZnVuY3Rpb24obmFtZXNwYWNlVVJJLCBxdWFsaWZpZWROYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50LnByb3RvdHlwZS5nZXRFbGVtZW50c0J5VGFnTmFtZU5TID0gZnVuY3Rpb24obmFtZXNwYWNlVVJJLCBsb2NhbE5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnQucHJvdG90eXBlLmdldEVsZW1lbnRCeUlkID0gZnVuY3Rpb24oZWxlbWVudElkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50LnByb3RvdHlwZS5hZG9wdE5vZGUgPSBmdW5jdGlvbihzb3VyY2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnQucHJvdG90eXBlLm5vcm1hbGl6ZURvY3VtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50LnByb3RvdHlwZS5yZW5hbWVOb2RlID0gZnVuY3Rpb24obm9kZSwgbmFtZXNwYWNlVVJJLCBxdWFsaWZpZWROYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50LnByb3RvdHlwZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lID0gZnVuY3Rpb24oY2xhc3NOYW1lcykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudC5wcm90b3R5cGUuY3JlYXRlRXZlbnQgPSBmdW5jdGlvbihldmVudEludGVyZmFjZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudC5wcm90b3R5cGUuY3JlYXRlUmFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnQucHJvdG90eXBlLmNyZWF0ZU5vZGVJdGVyYXRvciA9IGZ1bmN0aW9uKHJvb3QsIHdoYXRUb1Nob3csIGZpbHRlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudC5wcm90b3R5cGUuY3JlYXRlVHJlZVdhbGtlciA9IGZ1bmN0aW9uKHJvb3QsIHdoYXRUb1Nob3csIGZpbHRlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gWE1MRG9jdW1lbnQ7XG5cbiAgfSkoWE1MTm9kZSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgTm9kZVR5cGUsIFdyaXRlclN0YXRlLCBYTUxBdHRyaWJ1dGUsIFhNTENEYXRhLCBYTUxDb21tZW50LCBYTUxEVERBdHRMaXN0LCBYTUxEVERFbGVtZW50LCBYTUxEVERFbnRpdHksIFhNTERURE5vdGF0aW9uLCBYTUxEZWNsYXJhdGlvbiwgWE1MRG9jVHlwZSwgWE1MRG9jdW1lbnQsIFhNTERvY3VtZW50Q0IsIFhNTEVsZW1lbnQsIFhNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbiwgWE1MUmF3LCBYTUxTdHJpbmdXcml0ZXIsIFhNTFN0cmluZ2lmaWVyLCBYTUxUZXh0LCBnZXRWYWx1ZSwgaXNGdW5jdGlvbiwgaXNPYmplY3QsIGlzUGxhaW5PYmplY3QsIHJlZixcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgcmVmID0gcmVxdWlyZSgnLi9VdGlsaXR5JyksIGlzT2JqZWN0ID0gcmVmLmlzT2JqZWN0LCBpc0Z1bmN0aW9uID0gcmVmLmlzRnVuY3Rpb24sIGlzUGxhaW5PYmplY3QgPSByZWYuaXNQbGFpbk9iamVjdCwgZ2V0VmFsdWUgPSByZWYuZ2V0VmFsdWU7XG5cbiAgTm9kZVR5cGUgPSByZXF1aXJlKCcuL05vZGVUeXBlJyk7XG5cbiAgWE1MRG9jdW1lbnQgPSByZXF1aXJlKCcuL1hNTERvY3VtZW50Jyk7XG5cbiAgWE1MRWxlbWVudCA9IHJlcXVpcmUoJy4vWE1MRWxlbWVudCcpO1xuXG4gIFhNTENEYXRhID0gcmVxdWlyZSgnLi9YTUxDRGF0YScpO1xuXG4gIFhNTENvbW1lbnQgPSByZXF1aXJlKCcuL1hNTENvbW1lbnQnKTtcblxuICBYTUxSYXcgPSByZXF1aXJlKCcuL1hNTFJhdycpO1xuXG4gIFhNTFRleHQgPSByZXF1aXJlKCcuL1hNTFRleHQnKTtcblxuICBYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24gPSByZXF1aXJlKCcuL1hNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbicpO1xuXG4gIFhNTERlY2xhcmF0aW9uID0gcmVxdWlyZSgnLi9YTUxEZWNsYXJhdGlvbicpO1xuXG4gIFhNTERvY1R5cGUgPSByZXF1aXJlKCcuL1hNTERvY1R5cGUnKTtcblxuICBYTUxEVERBdHRMaXN0ID0gcmVxdWlyZSgnLi9YTUxEVERBdHRMaXN0Jyk7XG5cbiAgWE1MRFRERW50aXR5ID0gcmVxdWlyZSgnLi9YTUxEVERFbnRpdHknKTtcblxuICBYTUxEVERFbGVtZW50ID0gcmVxdWlyZSgnLi9YTUxEVERFbGVtZW50Jyk7XG5cbiAgWE1MRFRETm90YXRpb24gPSByZXF1aXJlKCcuL1hNTERURE5vdGF0aW9uJyk7XG5cbiAgWE1MQXR0cmlidXRlID0gcmVxdWlyZSgnLi9YTUxBdHRyaWJ1dGUnKTtcblxuICBYTUxTdHJpbmdpZmllciA9IHJlcXVpcmUoJy4vWE1MU3RyaW5naWZpZXInKTtcblxuICBYTUxTdHJpbmdXcml0ZXIgPSByZXF1aXJlKCcuL1hNTFN0cmluZ1dyaXRlcicpO1xuXG4gIFdyaXRlclN0YXRlID0gcmVxdWlyZSgnLi9Xcml0ZXJTdGF0ZScpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MRG9jdW1lbnRDQiA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBYTUxEb2N1bWVudENCKG9wdGlvbnMsIG9uRGF0YSwgb25FbmQpIHtcbiAgICAgIHZhciB3cml0ZXJPcHRpb25zO1xuICAgICAgdGhpcy5uYW1lID0gXCI/eG1sXCI7XG4gICAgICB0aGlzLnR5cGUgPSBOb2RlVHlwZS5Eb2N1bWVudDtcbiAgICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgICB3cml0ZXJPcHRpb25zID0ge307XG4gICAgICBpZiAoIW9wdGlvbnMud3JpdGVyKSB7XG4gICAgICAgIG9wdGlvbnMud3JpdGVyID0gbmV3IFhNTFN0cmluZ1dyaXRlcigpO1xuICAgICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KG9wdGlvbnMud3JpdGVyKSkge1xuICAgICAgICB3cml0ZXJPcHRpb25zID0gb3B0aW9ucy53cml0ZXI7XG4gICAgICAgIG9wdGlvbnMud3JpdGVyID0gbmV3IFhNTFN0cmluZ1dyaXRlcigpO1xuICAgICAgfVxuICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgIHRoaXMud3JpdGVyID0gb3B0aW9ucy53cml0ZXI7XG4gICAgICB0aGlzLndyaXRlck9wdGlvbnMgPSB0aGlzLndyaXRlci5maWx0ZXJPcHRpb25zKHdyaXRlck9wdGlvbnMpO1xuICAgICAgdGhpcy5zdHJpbmdpZnkgPSBuZXcgWE1MU3RyaW5naWZpZXIob3B0aW9ucyk7XG4gICAgICB0aGlzLm9uRGF0YUNhbGxiYWNrID0gb25EYXRhIHx8IGZ1bmN0aW9uKCkge307XG4gICAgICB0aGlzLm9uRW5kQ2FsbGJhY2sgPSBvbkVuZCB8fCBmdW5jdGlvbigpIHt9O1xuICAgICAgdGhpcy5jdXJyZW50Tm9kZSA9IG51bGw7XG4gICAgICB0aGlzLmN1cnJlbnRMZXZlbCA9IC0xO1xuICAgICAgdGhpcy5vcGVuVGFncyA9IHt9O1xuICAgICAgdGhpcy5kb2N1bWVudFN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuZG9jdW1lbnRDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMucm9vdCA9IG51bGw7XG4gICAgfVxuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUuY3JlYXRlQ2hpbGROb2RlID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgdmFyIGF0dCwgYXR0TmFtZSwgYXR0cmlidXRlcywgY2hpbGQsIGksIGxlbiwgcmVmMSwgcmVmMjtcbiAgICAgIHN3aXRjaCAobm9kZS50eXBlKSB7XG4gICAgICAgIGNhc2UgTm9kZVR5cGUuQ0RhdGE6XG4gICAgICAgICAgdGhpcy5jZGF0YShub2RlLnZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBOb2RlVHlwZS5Db21tZW50OlxuICAgICAgICAgIHRoaXMuY29tbWVudChub2RlLnZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBOb2RlVHlwZS5FbGVtZW50OlxuICAgICAgICAgIGF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgICAgICByZWYxID0gbm9kZS5hdHRyaWJzO1xuICAgICAgICAgIGZvciAoYXR0TmFtZSBpbiByZWYxKSB7XG4gICAgICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChyZWYxLCBhdHROYW1lKSkgY29udGludWU7XG4gICAgICAgICAgICBhdHQgPSByZWYxW2F0dE5hbWVdO1xuICAgICAgICAgICAgYXR0cmlidXRlc1thdHROYW1lXSA9IGF0dC52YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5ub2RlKG5vZGUubmFtZSwgYXR0cmlidXRlcyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgTm9kZVR5cGUuRHVtbXk6XG4gICAgICAgICAgdGhpcy5kdW1teSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIE5vZGVUeXBlLlJhdzpcbiAgICAgICAgICB0aGlzLnJhdyhub2RlLnZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBOb2RlVHlwZS5UZXh0OlxuICAgICAgICAgIHRoaXMudGV4dChub2RlLnZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBOb2RlVHlwZS5Qcm9jZXNzaW5nSW5zdHJ1Y3Rpb246XG4gICAgICAgICAgdGhpcy5pbnN0cnVjdGlvbihub2RlLnRhcmdldCwgbm9kZS52YWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBYTUwgbm9kZSB0eXBlIGlzIG5vdCBzdXBwb3J0ZWQgaW4gYSBKUyBvYmplY3Q6IFwiICsgbm9kZS5jb25zdHJ1Y3Rvci5uYW1lKTtcbiAgICAgIH1cbiAgICAgIHJlZjIgPSBub2RlLmNoaWxkcmVuO1xuICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmMi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBjaGlsZCA9IHJlZjJbaV07XG4gICAgICAgIHRoaXMuY3JlYXRlQ2hpbGROb2RlKGNoaWxkKTtcbiAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09IE5vZGVUeXBlLkVsZW1lbnQpIHtcbiAgICAgICAgICB0aGlzLnVwKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5kdW1teSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLm5vZGUgPSBmdW5jdGlvbihuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KSB7XG4gICAgICB2YXIgcmVmMTtcbiAgICAgIGlmIChuYW1lID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBub2RlIG5hbWUuXCIpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMucm9vdCAmJiB0aGlzLmN1cnJlbnRMZXZlbCA9PT0gLTEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRG9jdW1lbnQgY2FuIG9ubHkgaGF2ZSBvbmUgcm9vdCBub2RlLiBcIiArIHRoaXMuZGVidWdJbmZvKG5hbWUpKTtcbiAgICAgIH1cbiAgICAgIHRoaXMub3BlbkN1cnJlbnQoKTtcbiAgICAgIG5hbWUgPSBnZXRWYWx1ZShuYW1lKTtcbiAgICAgIGlmIChhdHRyaWJ1dGVzID09IG51bGwpIHtcbiAgICAgICAgYXR0cmlidXRlcyA9IHt9O1xuICAgICAgfVxuICAgICAgYXR0cmlidXRlcyA9IGdldFZhbHVlKGF0dHJpYnV0ZXMpO1xuICAgICAgaWYgKCFpc09iamVjdChhdHRyaWJ1dGVzKSkge1xuICAgICAgICByZWYxID0gW2F0dHJpYnV0ZXMsIHRleHRdLCB0ZXh0ID0gcmVmMVswXSwgYXR0cmlidXRlcyA9IHJlZjFbMV07XG4gICAgICB9XG4gICAgICB0aGlzLmN1cnJlbnROb2RlID0gbmV3IFhNTEVsZW1lbnQodGhpcywgbmFtZSwgYXR0cmlidXRlcyk7XG4gICAgICB0aGlzLmN1cnJlbnROb2RlLmNoaWxkcmVuID0gZmFsc2U7XG4gICAgICB0aGlzLmN1cnJlbnRMZXZlbCsrO1xuICAgICAgdGhpcy5vcGVuVGFnc1t0aGlzLmN1cnJlbnRMZXZlbF0gPSB0aGlzLmN1cnJlbnROb2RlO1xuICAgICAgaWYgKHRleHQgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnRleHQodGV4dCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUuZWxlbWVudCA9IGZ1bmN0aW9uKG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpIHtcbiAgICAgIHZhciBjaGlsZCwgaSwgbGVuLCBvbGRWYWxpZGF0aW9uRmxhZywgcmVmMSwgcm9vdDtcbiAgICAgIGlmICh0aGlzLmN1cnJlbnROb2RlICYmIHRoaXMuY3VycmVudE5vZGUudHlwZSA9PT0gTm9kZVR5cGUuRG9jVHlwZSkge1xuICAgICAgICB0aGlzLmR0ZEVsZW1lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5hbWUpIHx8IGlzT2JqZWN0KG5hbWUpIHx8IGlzRnVuY3Rpb24obmFtZSkpIHtcbiAgICAgICAgICBvbGRWYWxpZGF0aW9uRmxhZyA9IHRoaXMub3B0aW9ucy5ub1ZhbGlkYXRpb247XG4gICAgICAgICAgdGhpcy5vcHRpb25zLm5vVmFsaWRhdGlvbiA9IHRydWU7XG4gICAgICAgICAgcm9vdCA9IG5ldyBYTUxEb2N1bWVudCh0aGlzLm9wdGlvbnMpLmVsZW1lbnQoJ1RFTVBfUk9PVCcpO1xuICAgICAgICAgIHJvb3QuZWxlbWVudChuYW1lKTtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMubm9WYWxpZGF0aW9uID0gb2xkVmFsaWRhdGlvbkZsYWc7XG4gICAgICAgICAgcmVmMSA9IHJvb3QuY2hpbGRyZW47XG4gICAgICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmMS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgY2hpbGQgPSByZWYxW2ldO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVDaGlsZE5vZGUoY2hpbGQpO1xuICAgICAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09IE5vZGVUeXBlLkVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgdGhpcy51cCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm5vZGUobmFtZSwgYXR0cmlidXRlcywgdGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5hdHRyaWJ1dGUgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgdmFyIGF0dE5hbWUsIGF0dFZhbHVlO1xuICAgICAgaWYgKCF0aGlzLmN1cnJlbnROb2RlIHx8IHRoaXMuY3VycmVudE5vZGUuY2hpbGRyZW4pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYXR0KCkgY2FuIG9ubHkgYmUgdXNlZCBpbW1lZGlhdGVseSBhZnRlciBhbiBlbGUoKSBjYWxsIGluIGNhbGxiYWNrIG1vZGUuIFwiICsgdGhpcy5kZWJ1Z0luZm8obmFtZSkpO1xuICAgICAgfVxuICAgICAgaWYgKG5hbWUgIT0gbnVsbCkge1xuICAgICAgICBuYW1lID0gZ2V0VmFsdWUobmFtZSk7XG4gICAgICB9XG4gICAgICBpZiAoaXNPYmplY3QobmFtZSkpIHtcbiAgICAgICAgZm9yIChhdHROYW1lIGluIG5hbWUpIHtcbiAgICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChuYW1lLCBhdHROYW1lKSkgY29udGludWU7XG4gICAgICAgICAgYXR0VmFsdWUgPSBuYW1lW2F0dE5hbWVdO1xuICAgICAgICAgIHRoaXMuYXR0cmlidXRlKGF0dE5hbWUsIGF0dFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICAgICAgdmFsdWUgPSB2YWx1ZS5hcHBseSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMua2VlcE51bGxBdHRyaWJ1dGVzICYmICh2YWx1ZSA9PSBudWxsKSkge1xuICAgICAgICAgIHRoaXMuY3VycmVudE5vZGUuYXR0cmlic1tuYW1lXSA9IG5ldyBYTUxBdHRyaWJ1dGUodGhpcywgbmFtZSwgXCJcIik7XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMuY3VycmVudE5vZGUuYXR0cmlic1tuYW1lXSA9IG5ldyBYTUxBdHRyaWJ1dGUodGhpcywgbmFtZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUudGV4dCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgbm9kZTtcbiAgICAgIHRoaXMub3BlbkN1cnJlbnQoKTtcbiAgICAgIG5vZGUgPSBuZXcgWE1MVGV4dCh0aGlzLCB2YWx1ZSk7XG4gICAgICB0aGlzLm9uRGF0YSh0aGlzLndyaXRlci50ZXh0KG5vZGUsIHRoaXMud3JpdGVyT3B0aW9ucywgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKSwgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5jZGF0YSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgbm9kZTtcbiAgICAgIHRoaXMub3BlbkN1cnJlbnQoKTtcbiAgICAgIG5vZGUgPSBuZXcgWE1MQ0RhdGEodGhpcywgdmFsdWUpO1xuICAgICAgdGhpcy5vbkRhdGEodGhpcy53cml0ZXIuY2RhdGEobm9kZSwgdGhpcy53cml0ZXJPcHRpb25zLCB0aGlzLmN1cnJlbnRMZXZlbCArIDEpLCB0aGlzLmN1cnJlbnRMZXZlbCArIDEpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLmNvbW1lbnQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgdmFyIG5vZGU7XG4gICAgICB0aGlzLm9wZW5DdXJyZW50KCk7XG4gICAgICBub2RlID0gbmV3IFhNTENvbW1lbnQodGhpcywgdmFsdWUpO1xuICAgICAgdGhpcy5vbkRhdGEodGhpcy53cml0ZXIuY29tbWVudChub2RlLCB0aGlzLndyaXRlck9wdGlvbnMsIHRoaXMuY3VycmVudExldmVsICsgMSksIHRoaXMuY3VycmVudExldmVsICsgMSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUucmF3ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhciBub2RlO1xuICAgICAgdGhpcy5vcGVuQ3VycmVudCgpO1xuICAgICAgbm9kZSA9IG5ldyBYTUxSYXcodGhpcywgdmFsdWUpO1xuICAgICAgdGhpcy5vbkRhdGEodGhpcy53cml0ZXIucmF3KG5vZGUsIHRoaXMud3JpdGVyT3B0aW9ucywgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKSwgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5pbnN0cnVjdGlvbiA9IGZ1bmN0aW9uKHRhcmdldCwgdmFsdWUpIHtcbiAgICAgIHZhciBpLCBpbnNUYXJnZXQsIGluc1ZhbHVlLCBsZW4sIG5vZGU7XG4gICAgICB0aGlzLm9wZW5DdXJyZW50KCk7XG4gICAgICBpZiAodGFyZ2V0ICE9IG51bGwpIHtcbiAgICAgICAgdGFyZ2V0ID0gZ2V0VmFsdWUodGFyZ2V0KTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgIHZhbHVlID0gZ2V0VmFsdWUodmFsdWUpO1xuICAgICAgfVxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGFyZ2V0KSkge1xuICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSB0YXJnZXQubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICBpbnNUYXJnZXQgPSB0YXJnZXRbaV07XG4gICAgICAgICAgdGhpcy5pbnN0cnVjdGlvbihpbnNUYXJnZXQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHRhcmdldCkpIHtcbiAgICAgICAgZm9yIChpbnNUYXJnZXQgaW4gdGFyZ2V0KSB7XG4gICAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwodGFyZ2V0LCBpbnNUYXJnZXQpKSBjb250aW51ZTtcbiAgICAgICAgICBpbnNWYWx1ZSA9IHRhcmdldFtpbnNUYXJnZXRdO1xuICAgICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb24oaW5zVGFyZ2V0LCBpbnNWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgICAgIHZhbHVlID0gdmFsdWUuYXBwbHkoKTtcbiAgICAgICAgfVxuICAgICAgICBub2RlID0gbmV3IFhNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbih0aGlzLCB0YXJnZXQsIHZhbHVlKTtcbiAgICAgICAgdGhpcy5vbkRhdGEodGhpcy53cml0ZXIucHJvY2Vzc2luZ0luc3RydWN0aW9uKG5vZGUsIHRoaXMud3JpdGVyT3B0aW9ucywgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKSwgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5kZWNsYXJhdGlvbiA9IGZ1bmN0aW9uKHZlcnNpb24sIGVuY29kaW5nLCBzdGFuZGFsb25lKSB7XG4gICAgICB2YXIgbm9kZTtcbiAgICAgIHRoaXMub3BlbkN1cnJlbnQoKTtcbiAgICAgIGlmICh0aGlzLmRvY3VtZW50U3RhcnRlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJkZWNsYXJhdGlvbigpIG11c3QgYmUgdGhlIGZpcnN0IG5vZGUuXCIpO1xuICAgICAgfVxuICAgICAgbm9kZSA9IG5ldyBYTUxEZWNsYXJhdGlvbih0aGlzLCB2ZXJzaW9uLCBlbmNvZGluZywgc3RhbmRhbG9uZSk7XG4gICAgICB0aGlzLm9uRGF0YSh0aGlzLndyaXRlci5kZWNsYXJhdGlvbihub2RlLCB0aGlzLndyaXRlck9wdGlvbnMsIHRoaXMuY3VycmVudExldmVsICsgMSksIHRoaXMuY3VycmVudExldmVsICsgMSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUuZG9jdHlwZSA9IGZ1bmN0aW9uKHJvb3QsIHB1YklELCBzeXNJRCkge1xuICAgICAgdGhpcy5vcGVuQ3VycmVudCgpO1xuICAgICAgaWYgKHJvb3QgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHJvb3Qgbm9kZSBuYW1lLlwiKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnJvb3QpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZHRkKCkgbXVzdCBjb21lIGJlZm9yZSB0aGUgcm9vdCBub2RlLlwiKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY3VycmVudE5vZGUgPSBuZXcgWE1MRG9jVHlwZSh0aGlzLCBwdWJJRCwgc3lzSUQpO1xuICAgICAgdGhpcy5jdXJyZW50Tm9kZS5yb290Tm9kZU5hbWUgPSByb290O1xuICAgICAgdGhpcy5jdXJyZW50Tm9kZS5jaGlsZHJlbiA9IGZhbHNlO1xuICAgICAgdGhpcy5jdXJyZW50TGV2ZWwrKztcbiAgICAgIHRoaXMub3BlblRhZ3NbdGhpcy5jdXJyZW50TGV2ZWxdID0gdGhpcy5jdXJyZW50Tm9kZTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5kdGRFbGVtZW50ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgIHZhciBub2RlO1xuICAgICAgdGhpcy5vcGVuQ3VycmVudCgpO1xuICAgICAgbm9kZSA9IG5ldyBYTUxEVERFbGVtZW50KHRoaXMsIG5hbWUsIHZhbHVlKTtcbiAgICAgIHRoaXMub25EYXRhKHRoaXMud3JpdGVyLmR0ZEVsZW1lbnQobm9kZSwgdGhpcy53cml0ZXJPcHRpb25zLCB0aGlzLmN1cnJlbnRMZXZlbCArIDEpLCB0aGlzLmN1cnJlbnRMZXZlbCArIDEpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLmF0dExpc3QgPSBmdW5jdGlvbihlbGVtZW50TmFtZSwgYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVHlwZSwgZGVmYXVsdFZhbHVlVHlwZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICB2YXIgbm9kZTtcbiAgICAgIHRoaXMub3BlbkN1cnJlbnQoKTtcbiAgICAgIG5vZGUgPSBuZXcgWE1MRFREQXR0TGlzdCh0aGlzLCBlbGVtZW50TmFtZSwgYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVHlwZSwgZGVmYXVsdFZhbHVlVHlwZSwgZGVmYXVsdFZhbHVlKTtcbiAgICAgIHRoaXMub25EYXRhKHRoaXMud3JpdGVyLmR0ZEF0dExpc3Qobm9kZSwgdGhpcy53cml0ZXJPcHRpb25zLCB0aGlzLmN1cnJlbnRMZXZlbCArIDEpLCB0aGlzLmN1cnJlbnRMZXZlbCArIDEpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLmVudGl0eSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICB2YXIgbm9kZTtcbiAgICAgIHRoaXMub3BlbkN1cnJlbnQoKTtcbiAgICAgIG5vZGUgPSBuZXcgWE1MRFRERW50aXR5KHRoaXMsIGZhbHNlLCBuYW1lLCB2YWx1ZSk7XG4gICAgICB0aGlzLm9uRGF0YSh0aGlzLndyaXRlci5kdGRFbnRpdHkobm9kZSwgdGhpcy53cml0ZXJPcHRpb25zLCB0aGlzLmN1cnJlbnRMZXZlbCArIDEpLCB0aGlzLmN1cnJlbnRMZXZlbCArIDEpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLnBFbnRpdHkgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgdmFyIG5vZGU7XG4gICAgICB0aGlzLm9wZW5DdXJyZW50KCk7XG4gICAgICBub2RlID0gbmV3IFhNTERUREVudGl0eSh0aGlzLCB0cnVlLCBuYW1lLCB2YWx1ZSk7XG4gICAgICB0aGlzLm9uRGF0YSh0aGlzLndyaXRlci5kdGRFbnRpdHkobm9kZSwgdGhpcy53cml0ZXJPcHRpb25zLCB0aGlzLmN1cnJlbnRMZXZlbCArIDEpLCB0aGlzLmN1cnJlbnRMZXZlbCArIDEpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLm5vdGF0aW9uID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgIHZhciBub2RlO1xuICAgICAgdGhpcy5vcGVuQ3VycmVudCgpO1xuICAgICAgbm9kZSA9IG5ldyBYTUxEVEROb3RhdGlvbih0aGlzLCBuYW1lLCB2YWx1ZSk7XG4gICAgICB0aGlzLm9uRGF0YSh0aGlzLndyaXRlci5kdGROb3RhdGlvbihub2RlLCB0aGlzLndyaXRlck9wdGlvbnMsIHRoaXMuY3VycmVudExldmVsICsgMSksIHRoaXMuY3VycmVudExldmVsICsgMSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUudXAgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRMZXZlbCA8IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIGRvY3VtZW50IG5vZGUgaGFzIG5vIHBhcmVudC5cIik7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jdXJyZW50Tm9kZSkge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50Tm9kZS5jaGlsZHJlbikge1xuICAgICAgICAgIHRoaXMuY2xvc2VOb2RlKHRoaXMuY3VycmVudE5vZGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMub3Blbk5vZGUodGhpcy5jdXJyZW50Tm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdXJyZW50Tm9kZSA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNsb3NlTm9kZSh0aGlzLm9wZW5UYWdzW3RoaXMuY3VycmVudExldmVsXSk7XG4gICAgICB9XG4gICAgICBkZWxldGUgdGhpcy5vcGVuVGFnc1t0aGlzLmN1cnJlbnRMZXZlbF07XG4gICAgICB0aGlzLmN1cnJlbnRMZXZlbC0tO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgd2hpbGUgKHRoaXMuY3VycmVudExldmVsID49IDApIHtcbiAgICAgICAgdGhpcy51cCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMub25FbmQoKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUub3BlbkN1cnJlbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmN1cnJlbnROb2RlKSB7XG4gICAgICAgIHRoaXMuY3VycmVudE5vZGUuY2hpbGRyZW4gPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcy5vcGVuTm9kZSh0aGlzLmN1cnJlbnROb2RlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUub3Blbk5vZGUgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICB2YXIgYXR0LCBjaHVuaywgbmFtZSwgcmVmMTtcbiAgICAgIGlmICghbm9kZS5pc09wZW4pIHtcbiAgICAgICAgaWYgKCF0aGlzLnJvb3QgJiYgdGhpcy5jdXJyZW50TGV2ZWwgPT09IDAgJiYgbm9kZS50eXBlID09PSBOb2RlVHlwZS5FbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy5yb290ID0gbm9kZTtcbiAgICAgICAgfVxuICAgICAgICBjaHVuayA9ICcnO1xuICAgICAgICBpZiAobm9kZS50eXBlID09PSBOb2RlVHlwZS5FbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy53cml0ZXJPcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuT3BlblRhZztcbiAgICAgICAgICBjaHVuayA9IHRoaXMud3JpdGVyLmluZGVudChub2RlLCB0aGlzLndyaXRlck9wdGlvbnMsIHRoaXMuY3VycmVudExldmVsKSArICc8JyArIG5vZGUubmFtZTtcbiAgICAgICAgICByZWYxID0gbm9kZS5hdHRyaWJzO1xuICAgICAgICAgIGZvciAobmFtZSBpbiByZWYxKSB7XG4gICAgICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChyZWYxLCBuYW1lKSkgY29udGludWU7XG4gICAgICAgICAgICBhdHQgPSByZWYxW25hbWVdO1xuICAgICAgICAgICAgY2h1bmsgKz0gdGhpcy53cml0ZXIuYXR0cmlidXRlKGF0dCwgdGhpcy53cml0ZXJPcHRpb25zLCB0aGlzLmN1cnJlbnRMZXZlbCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNodW5rICs9IChub2RlLmNoaWxkcmVuID8gJz4nIDogJy8+JykgKyB0aGlzLndyaXRlci5lbmRsaW5lKG5vZGUsIHRoaXMud3JpdGVyT3B0aW9ucywgdGhpcy5jdXJyZW50TGV2ZWwpO1xuICAgICAgICAgIHRoaXMud3JpdGVyT3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkluc2lkZVRhZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLndyaXRlck9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5PcGVuVGFnO1xuICAgICAgICAgIGNodW5rID0gdGhpcy53cml0ZXIuaW5kZW50KG5vZGUsIHRoaXMud3JpdGVyT3B0aW9ucywgdGhpcy5jdXJyZW50TGV2ZWwpICsgJzwhRE9DVFlQRSAnICsgbm9kZS5yb290Tm9kZU5hbWU7XG4gICAgICAgICAgaWYgKG5vZGUucHViSUQgJiYgbm9kZS5zeXNJRCkge1xuICAgICAgICAgICAgY2h1bmsgKz0gJyBQVUJMSUMgXCInICsgbm9kZS5wdWJJRCArICdcIiBcIicgKyBub2RlLnN5c0lEICsgJ1wiJztcbiAgICAgICAgICB9IGVsc2UgaWYgKG5vZGUuc3lzSUQpIHtcbiAgICAgICAgICAgIGNodW5rICs9ICcgU1lTVEVNIFwiJyArIG5vZGUuc3lzSUQgKyAnXCInO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobm9kZS5jaGlsZHJlbikge1xuICAgICAgICAgICAgY2h1bmsgKz0gJyBbJztcbiAgICAgICAgICAgIHRoaXMud3JpdGVyT3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkluc2lkZVRhZztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy53cml0ZXJPcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuQ2xvc2VUYWc7XG4gICAgICAgICAgICBjaHVuayArPSAnPic7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNodW5rICs9IHRoaXMud3JpdGVyLmVuZGxpbmUobm9kZSwgdGhpcy53cml0ZXJPcHRpb25zLCB0aGlzLmN1cnJlbnRMZXZlbCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vbkRhdGEoY2h1bmssIHRoaXMuY3VycmVudExldmVsKTtcbiAgICAgICAgcmV0dXJuIG5vZGUuaXNPcGVuID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUuY2xvc2VOb2RlID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgdmFyIGNodW5rO1xuICAgICAgaWYgKCFub2RlLmlzQ2xvc2VkKSB7XG4gICAgICAgIGNodW5rID0gJyc7XG4gICAgICAgIHRoaXMud3JpdGVyT3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkNsb3NlVGFnO1xuICAgICAgICBpZiAobm9kZS50eXBlID09PSBOb2RlVHlwZS5FbGVtZW50KSB7XG4gICAgICAgICAgY2h1bmsgPSB0aGlzLndyaXRlci5pbmRlbnQobm9kZSwgdGhpcy53cml0ZXJPcHRpb25zLCB0aGlzLmN1cnJlbnRMZXZlbCkgKyAnPC8nICsgbm9kZS5uYW1lICsgJz4nICsgdGhpcy53cml0ZXIuZW5kbGluZShub2RlLCB0aGlzLndyaXRlck9wdGlvbnMsIHRoaXMuY3VycmVudExldmVsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaHVuayA9IHRoaXMud3JpdGVyLmluZGVudChub2RlLCB0aGlzLndyaXRlck9wdGlvbnMsIHRoaXMuY3VycmVudExldmVsKSArICddPicgKyB0aGlzLndyaXRlci5lbmRsaW5lKG5vZGUsIHRoaXMud3JpdGVyT3B0aW9ucywgdGhpcy5jdXJyZW50TGV2ZWwpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud3JpdGVyT3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLk5vbmU7XG4gICAgICAgIHRoaXMub25EYXRhKGNodW5rLCB0aGlzLmN1cnJlbnRMZXZlbCk7XG4gICAgICAgIHJldHVybiBub2RlLmlzQ2xvc2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUub25EYXRhID0gZnVuY3Rpb24oY2h1bmssIGxldmVsKSB7XG4gICAgICB0aGlzLmRvY3VtZW50U3RhcnRlZCA9IHRydWU7XG4gICAgICByZXR1cm4gdGhpcy5vbkRhdGFDYWxsYmFjayhjaHVuaywgbGV2ZWwgKyAxKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUub25FbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuZG9jdW1lbnRDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuIHRoaXMub25FbmRDYWxsYmFjaygpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5kZWJ1Z0luZm8gPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICBpZiAobmFtZSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFwibm9kZTogPFwiICsgbmFtZSArIFwiPlwiO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5lbGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUubm9kID0gZnVuY3Rpb24obmFtZSwgYXR0cmlidXRlcywgdGV4dCkge1xuICAgICAgcmV0dXJuIHRoaXMubm9kZShuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUudHh0ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLnRleHQodmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5kYXQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuY2RhdGEodmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5jb20gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuY29tbWVudCh2YWx1ZSk7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLmlucyA9IGZ1bmN0aW9uKHRhcmdldCwgdmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmluc3RydWN0aW9uKHRhcmdldCwgdmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5kZWMgPSBmdW5jdGlvbih2ZXJzaW9uLCBlbmNvZGluZywgc3RhbmRhbG9uZSkge1xuICAgICAgcmV0dXJuIHRoaXMuZGVjbGFyYXRpb24odmVyc2lvbiwgZW5jb2RpbmcsIHN0YW5kYWxvbmUpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5kdGQgPSBmdW5jdGlvbihyb290LCBwdWJJRCwgc3lzSUQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRvY3R5cGUocm9vdCwgcHViSUQsIHN5c0lEKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUuZSA9IGZ1bmN0aW9uKG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQobmFtZSwgYXR0cmlidXRlcywgdGV4dCk7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLm4gPSBmdW5jdGlvbihuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KSB7XG4gICAgICByZXR1cm4gdGhpcy5ub2RlKG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS50ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLnRleHQodmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5kID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmNkYXRhKHZhbHVlKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUuYyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb21tZW50KHZhbHVlKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUuciA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5yYXcodmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5pID0gZnVuY3Rpb24odGFyZ2V0LCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuaW5zdHJ1Y3Rpb24odGFyZ2V0LCB2YWx1ZSk7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLmF0dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuY3VycmVudE5vZGUgJiYgdGhpcy5jdXJyZW50Tm9kZS50eXBlID09PSBOb2RlVHlwZS5Eb2NUeXBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0dExpc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5hID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5jdXJyZW50Tm9kZSAmJiB0aGlzLmN1cnJlbnROb2RlLnR5cGUgPT09IE5vZGVUeXBlLkRvY1R5cGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0TGlzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLmVudCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbnRpdHkobmFtZSwgdmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5wZW50ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLnBFbnRpdHkobmFtZSwgdmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5ub3QgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMubm90YXRpb24obmFtZSwgdmFsdWUpO1xuICAgIH07XG5cbiAgICByZXR1cm4gWE1MRG9jdW1lbnRDQjtcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIE5vZGVUeXBlLCBYTUxEdW1teSwgWE1MTm9kZSxcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIFhNTE5vZGUgPSByZXF1aXJlKCcuL1hNTE5vZGUnKTtcblxuICBOb2RlVHlwZSA9IHJlcXVpcmUoJy4vTm9kZVR5cGUnKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTER1bW15ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICBleHRlbmQoWE1MRHVtbXksIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gWE1MRHVtbXkocGFyZW50KSB7XG4gICAgICBYTUxEdW1teS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBwYXJlbnQpO1xuICAgICAgdGhpcy50eXBlID0gTm9kZVR5cGUuRHVtbXk7XG4gICAgfVxuXG4gICAgWE1MRHVtbXkucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmNyZWF0ZSh0aGlzKTtcbiAgICB9O1xuXG4gICAgWE1MRHVtbXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH07XG5cbiAgICByZXR1cm4gWE1MRHVtbXk7XG5cbiAgfSkoWE1MTm9kZSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgTm9kZVR5cGUsIFhNTEF0dHJpYnV0ZSwgWE1MRWxlbWVudCwgWE1MTmFtZWROb2RlTWFwLCBYTUxOb2RlLCBnZXRWYWx1ZSwgaXNGdW5jdGlvbiwgaXNPYmplY3QsIHJlZixcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIHJlZiA9IHJlcXVpcmUoJy4vVXRpbGl0eScpLCBpc09iamVjdCA9IHJlZi5pc09iamVjdCwgaXNGdW5jdGlvbiA9IHJlZi5pc0Z1bmN0aW9uLCBnZXRWYWx1ZSA9IHJlZi5nZXRWYWx1ZTtcblxuICBYTUxOb2RlID0gcmVxdWlyZSgnLi9YTUxOb2RlJyk7XG5cbiAgTm9kZVR5cGUgPSByZXF1aXJlKCcuL05vZGVUeXBlJyk7XG5cbiAgWE1MQXR0cmlidXRlID0gcmVxdWlyZSgnLi9YTUxBdHRyaWJ1dGUnKTtcblxuICBYTUxOYW1lZE5vZGVNYXAgPSByZXF1aXJlKCcuL1hNTE5hbWVkTm9kZU1hcCcpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MRWxlbWVudCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKFhNTEVsZW1lbnQsIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gWE1MRWxlbWVudChwYXJlbnQsIG5hbWUsIGF0dHJpYnV0ZXMpIHtcbiAgICAgIHZhciBjaGlsZCwgaiwgbGVuLCByZWYxO1xuICAgICAgWE1MRWxlbWVudC5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBwYXJlbnQpO1xuICAgICAgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIGVsZW1lbnQgbmFtZS4gXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cbiAgICAgIHRoaXMubmFtZSA9IHRoaXMuc3RyaW5naWZ5Lm5hbWUobmFtZSk7XG4gICAgICB0aGlzLnR5cGUgPSBOb2RlVHlwZS5FbGVtZW50O1xuICAgICAgdGhpcy5hdHRyaWJzID0ge307XG4gICAgICB0aGlzLnNjaGVtYVR5cGVJbmZvID0gbnVsbDtcbiAgICAgIGlmIChhdHRyaWJ1dGVzICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGUoYXR0cmlidXRlcyk7XG4gICAgICB9XG4gICAgICBpZiAocGFyZW50LnR5cGUgPT09IE5vZGVUeXBlLkRvY3VtZW50KSB7XG4gICAgICAgIHRoaXMuaXNSb290ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5kb2N1bWVudE9iamVjdCA9IHBhcmVudDtcbiAgICAgICAgcGFyZW50LnJvb3RPYmplY3QgPSB0aGlzO1xuICAgICAgICBpZiAocGFyZW50LmNoaWxkcmVuKSB7XG4gICAgICAgICAgcmVmMSA9IHBhcmVudC5jaGlsZHJlbjtcbiAgICAgICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYxLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgICBjaGlsZCA9IHJlZjFbal07XG4gICAgICAgICAgICBpZiAoY2hpbGQudHlwZSA9PT0gTm9kZVR5cGUuRG9jVHlwZSkge1xuICAgICAgICAgICAgICBjaGlsZC5uYW1lID0gdGhpcy5uYW1lO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRWxlbWVudC5wcm90b3R5cGUsICd0YWdOYW1lJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxFbGVtZW50LnByb3RvdHlwZSwgJ25hbWVzcGFjZVVSSScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxFbGVtZW50LnByb3RvdHlwZSwgJ3ByZWZpeCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxFbGVtZW50LnByb3RvdHlwZSwgJ2xvY2FsTmFtZScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRWxlbWVudC5wcm90b3R5cGUsICdpZCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxFbGVtZW50LnByb3RvdHlwZSwgJ2NsYXNzTmFtZScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxFbGVtZW50LnByb3RvdHlwZSwgJ2NsYXNzTGlzdCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxFbGVtZW50LnByb3RvdHlwZSwgJ2F0dHJpYnV0ZXMnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIXRoaXMuYXR0cmlidXRlTWFwIHx8ICF0aGlzLmF0dHJpYnV0ZU1hcC5ub2Rlcykge1xuICAgICAgICAgIHRoaXMuYXR0cmlidXRlTWFwID0gbmV3IFhNTE5hbWVkTm9kZU1hcCh0aGlzLmF0dHJpYnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZU1hcDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXR0LCBhdHROYW1lLCBjbG9uZWRTZWxmLCByZWYxO1xuICAgICAgY2xvbmVkU2VsZiA9IE9iamVjdC5jcmVhdGUodGhpcyk7XG4gICAgICBpZiAoY2xvbmVkU2VsZi5pc1Jvb3QpIHtcbiAgICAgICAgY2xvbmVkU2VsZi5kb2N1bWVudE9iamVjdCA9IG51bGw7XG4gICAgICB9XG4gICAgICBjbG9uZWRTZWxmLmF0dHJpYnMgPSB7fTtcbiAgICAgIHJlZjEgPSB0aGlzLmF0dHJpYnM7XG4gICAgICBmb3IgKGF0dE5hbWUgaW4gcmVmMSkge1xuICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChyZWYxLCBhdHROYW1lKSkgY29udGludWU7XG4gICAgICAgIGF0dCA9IHJlZjFbYXR0TmFtZV07XG4gICAgICAgIGNsb25lZFNlbGYuYXR0cmlic1thdHROYW1lXSA9IGF0dC5jbG9uZSgpO1xuICAgICAgfVxuICAgICAgY2xvbmVkU2VsZi5jaGlsZHJlbiA9IFtdO1xuICAgICAgdGhpcy5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSB7XG4gICAgICAgIHZhciBjbG9uZWRDaGlsZDtcbiAgICAgICAgY2xvbmVkQ2hpbGQgPSBjaGlsZC5jbG9uZSgpO1xuICAgICAgICBjbG9uZWRDaGlsZC5wYXJlbnQgPSBjbG9uZWRTZWxmO1xuICAgICAgICByZXR1cm4gY2xvbmVkU2VsZi5jaGlsZHJlbi5wdXNoKGNsb25lZENoaWxkKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGNsb25lZFNlbGY7XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLmF0dHJpYnV0ZSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICB2YXIgYXR0TmFtZSwgYXR0VmFsdWU7XG4gICAgICBpZiAobmFtZSAhPSBudWxsKSB7XG4gICAgICAgIG5hbWUgPSBnZXRWYWx1ZShuYW1lKTtcbiAgICAgIH1cbiAgICAgIGlmIChpc09iamVjdChuYW1lKSkge1xuICAgICAgICBmb3IgKGF0dE5hbWUgaW4gbmFtZSkge1xuICAgICAgICAgIGlmICghaGFzUHJvcC5jYWxsKG5hbWUsIGF0dE5hbWUpKSBjb250aW51ZTtcbiAgICAgICAgICBhdHRWYWx1ZSA9IG5hbWVbYXR0TmFtZV07XG4gICAgICAgICAgdGhpcy5hdHRyaWJ1dGUoYXR0TmFtZSwgYXR0VmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgICAgICB2YWx1ZSA9IHZhbHVlLmFwcGx5KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5rZWVwTnVsbEF0dHJpYnV0ZXMgJiYgKHZhbHVlID09IG51bGwpKSB7XG4gICAgICAgICAgdGhpcy5hdHRyaWJzW25hbWVdID0gbmV3IFhNTEF0dHJpYnV0ZSh0aGlzLCBuYW1lLCBcIlwiKTtcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5hdHRyaWJzW25hbWVdID0gbmV3IFhNTEF0dHJpYnV0ZSh0aGlzLCBuYW1lLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxFbGVtZW50LnByb3RvdHlwZS5yZW1vdmVBdHRyaWJ1dGUgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICB2YXIgYXR0TmFtZSwgaiwgbGVuO1xuICAgICAgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIGF0dHJpYnV0ZSBuYW1lLiBcIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgICAgfVxuICAgICAgbmFtZSA9IGdldFZhbHVlKG5hbWUpO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkobmFtZSkpIHtcbiAgICAgICAgZm9yIChqID0gMCwgbGVuID0gbmFtZS5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICAgIGF0dE5hbWUgPSBuYW1lW2pdO1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLmF0dHJpYnNbYXR0TmFtZV07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmF0dHJpYnNbbmFtZV07XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MRWxlbWVudC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLndyaXRlci5lbGVtZW50KHRoaXMsIHRoaXMub3B0aW9ucy53cml0ZXIuZmlsdGVyT3B0aW9ucyhvcHRpb25zKSk7XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLmF0dCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxFbGVtZW50LnByb3RvdHlwZS5hID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLmdldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIGlmICh0aGlzLmF0dHJpYnMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlic1tuYW1lXS52YWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBYTUxFbGVtZW50LnByb3RvdHlwZS5zZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxFbGVtZW50LnByb3RvdHlwZS5nZXRBdHRyaWJ1dGVOb2RlID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgaWYgKHRoaXMuYXR0cmlicy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRyaWJzW25hbWVdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLnNldEF0dHJpYnV0ZU5vZGUgPSBmdW5jdGlvbihuZXdBdHRyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLnJlbW92ZUF0dHJpYnV0ZU5vZGUgPSBmdW5jdGlvbihvbGRBdHRyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLmdldEVsZW1lbnRzQnlUYWdOYW1lID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxFbGVtZW50LnByb3RvdHlwZS5nZXRBdHRyaWJ1dGVOUyA9IGZ1bmN0aW9uKG5hbWVzcGFjZVVSSSwgbG9jYWxOYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLnNldEF0dHJpYnV0ZU5TID0gZnVuY3Rpb24obmFtZXNwYWNlVVJJLCBxdWFsaWZpZWROYW1lLCB2YWx1ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxFbGVtZW50LnByb3RvdHlwZS5yZW1vdmVBdHRyaWJ1dGVOUyA9IGZ1bmN0aW9uKG5hbWVzcGFjZVVSSSwgbG9jYWxOYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLmdldEF0dHJpYnV0ZU5vZGVOUyA9IGZ1bmN0aW9uKG5hbWVzcGFjZVVSSSwgbG9jYWxOYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLnNldEF0dHJpYnV0ZU5vZGVOUyA9IGZ1bmN0aW9uKG5ld0F0dHIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MRWxlbWVudC5wcm90b3R5cGUuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyA9IGZ1bmN0aW9uKG5hbWVzcGFjZVVSSSwgbG9jYWxOYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLmhhc0F0dHJpYnV0ZSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJpYnMuaGFzT3duUHJvcGVydHkobmFtZSk7XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLmhhc0F0dHJpYnV0ZU5TID0gZnVuY3Rpb24obmFtZXNwYWNlVVJJLCBsb2NhbE5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MRWxlbWVudC5wcm90b3R5cGUuc2V0SWRBdHRyaWJ1dGUgPSBmdW5jdGlvbihuYW1lLCBpc0lkKSB7XG4gICAgICBpZiAodGhpcy5hdHRyaWJzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnNbbmFtZV0uaXNJZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBpc0lkO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBYTUxFbGVtZW50LnByb3RvdHlwZS5zZXRJZEF0dHJpYnV0ZU5TID0gZnVuY3Rpb24obmFtZXNwYWNlVVJJLCBsb2NhbE5hbWUsIGlzSWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MRWxlbWVudC5wcm90b3R5cGUuc2V0SWRBdHRyaWJ1dGVOb2RlID0gZnVuY3Rpb24oaWRBdHRyLCBpc0lkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLmdldEVsZW1lbnRzQnlUYWdOYW1lID0gZnVuY3Rpb24odGFnbmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxFbGVtZW50LnByb3RvdHlwZS5nZXRFbGVtZW50c0J5VGFnTmFtZU5TID0gZnVuY3Rpb24obmFtZXNwYWNlVVJJLCBsb2NhbE5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MRWxlbWVudC5wcm90b3R5cGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSA9IGZ1bmN0aW9uKGNsYXNzTmFtZXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MRWxlbWVudC5wcm90b3R5cGUuaXNFcXVhbE5vZGUgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICB2YXIgaSwgaiwgcmVmMTtcbiAgICAgIGlmICghWE1MRWxlbWVudC5fX3N1cGVyX18uaXNFcXVhbE5vZGUuYXBwbHkodGhpcywgYXJndW1lbnRzKS5pc0VxdWFsTm9kZShub2RlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAobm9kZS5uYW1lc3BhY2VVUkkgIT09IHRoaXMubmFtZXNwYWNlVVJJKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChub2RlLnByZWZpeCAhPT0gdGhpcy5wcmVmaXgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGUubG9jYWxOYW1lICE9PSB0aGlzLmxvY2FsTmFtZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAobm9kZS5hdHRyaWJzLmxlbmd0aCAhPT0gdGhpcy5hdHRyaWJzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBmb3IgKGkgPSBqID0gMCwgcmVmMSA9IHRoaXMuYXR0cmlicy5sZW5ndGggLSAxOyAwIDw9IHJlZjEgPyBqIDw9IHJlZjEgOiBqID49IHJlZjE7IGkgPSAwIDw9IHJlZjEgPyArK2ogOiAtLWopIHtcbiAgICAgICAgaWYgKCF0aGlzLmF0dHJpYnNbaV0uaXNFcXVhbE5vZGUobm9kZS5hdHRyaWJzW2ldKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxFbGVtZW50O1xuXG4gIH0pKFhNTE5vZGUpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIFhNTE5hbWVkTm9kZU1hcDtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTE5hbWVkTm9kZU1hcCA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBYTUxOYW1lZE5vZGVNYXAobm9kZXMpIHtcbiAgICAgIHRoaXMubm9kZXMgPSBub2RlcztcbiAgICB9XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MTmFtZWROb2RlTWFwLnByb3RvdHlwZSwgJ2xlbmd0aCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLm5vZGVzKS5sZW5ndGggfHwgMDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIFhNTE5hbWVkTm9kZU1hcC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLm5vZGVzID0gbnVsbDtcbiAgICB9O1xuXG4gICAgWE1MTmFtZWROb2RlTWFwLnByb3RvdHlwZS5nZXROYW1lZEl0ZW0gPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICByZXR1cm4gdGhpcy5ub2Rlc1tuYW1lXTtcbiAgICB9O1xuXG4gICAgWE1MTmFtZWROb2RlTWFwLnByb3RvdHlwZS5zZXROYW1lZEl0ZW0gPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICB2YXIgb2xkTm9kZTtcbiAgICAgIG9sZE5vZGUgPSB0aGlzLm5vZGVzW25vZGUubm9kZU5hbWVdO1xuICAgICAgdGhpcy5ub2Rlc1tub2RlLm5vZGVOYW1lXSA9IG5vZGU7XG4gICAgICByZXR1cm4gb2xkTm9kZSB8fCBudWxsO1xuICAgIH07XG5cbiAgICBYTUxOYW1lZE5vZGVNYXAucHJvdG90eXBlLnJlbW92ZU5hbWVkSXRlbSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHZhciBvbGROb2RlO1xuICAgICAgb2xkTm9kZSA9IHRoaXMubm9kZXNbbmFtZV07XG4gICAgICBkZWxldGUgdGhpcy5ub2Rlc1tuYW1lXTtcbiAgICAgIHJldHVybiBvbGROb2RlIHx8IG51bGw7XG4gICAgfTtcblxuICAgIFhNTE5hbWVkTm9kZU1hcC5wcm90b3R5cGUuaXRlbSA9IGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgICByZXR1cm4gdGhpcy5ub2Rlc1tPYmplY3Qua2V5cyh0aGlzLm5vZGVzKVtpbmRleF1dIHx8IG51bGw7XG4gICAgfTtcblxuICAgIFhNTE5hbWVkTm9kZU1hcC5wcm90b3R5cGUuZ2V0TmFtZWRJdGVtTlMgPSBmdW5jdGlvbihuYW1lc3BhY2VVUkksIGxvY2FsTmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgfTtcblxuICAgIFhNTE5hbWVkTm9kZU1hcC5wcm90b3R5cGUuc2V0TmFtZWRJdGVtTlMgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiKTtcbiAgICB9O1xuXG4gICAgWE1MTmFtZWROb2RlTWFwLnByb3RvdHlwZS5yZW1vdmVOYW1lZEl0ZW1OUyA9IGZ1bmN0aW9uKG5hbWVzcGFjZVVSSSwgbG9jYWxOYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFhNTE5hbWVkTm9kZU1hcDtcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIERvY3VtZW50UG9zaXRpb24sIE5vZGVUeXBlLCBYTUxDRGF0YSwgWE1MQ29tbWVudCwgWE1MRGVjbGFyYXRpb24sIFhNTERvY1R5cGUsIFhNTER1bW15LCBYTUxFbGVtZW50LCBYTUxOYW1lZE5vZGVNYXAsIFhNTE5vZGUsIFhNTE5vZGVMaXN0LCBYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24sIFhNTFJhdywgWE1MVGV4dCwgZ2V0VmFsdWUsIGlzRW1wdHksIGlzRnVuY3Rpb24sIGlzT2JqZWN0LCByZWYxLFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICByZWYxID0gcmVxdWlyZSgnLi9VdGlsaXR5JyksIGlzT2JqZWN0ID0gcmVmMS5pc09iamVjdCwgaXNGdW5jdGlvbiA9IHJlZjEuaXNGdW5jdGlvbiwgaXNFbXB0eSA9IHJlZjEuaXNFbXB0eSwgZ2V0VmFsdWUgPSByZWYxLmdldFZhbHVlO1xuXG4gIFhNTEVsZW1lbnQgPSBudWxsO1xuXG4gIFhNTENEYXRhID0gbnVsbDtcblxuICBYTUxDb21tZW50ID0gbnVsbDtcblxuICBYTUxEZWNsYXJhdGlvbiA9IG51bGw7XG5cbiAgWE1MRG9jVHlwZSA9IG51bGw7XG5cbiAgWE1MUmF3ID0gbnVsbDtcblxuICBYTUxUZXh0ID0gbnVsbDtcblxuICBYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24gPSBudWxsO1xuXG4gIFhNTER1bW15ID0gbnVsbDtcblxuICBOb2RlVHlwZSA9IG51bGw7XG5cbiAgWE1MTm9kZUxpc3QgPSBudWxsO1xuXG4gIFhNTE5hbWVkTm9kZU1hcCA9IG51bGw7XG5cbiAgRG9jdW1lbnRQb3NpdGlvbiA9IG51bGw7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBYTUxOb2RlID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIFhNTE5vZGUocGFyZW50MSkge1xuICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQxO1xuICAgICAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHRoaXMucGFyZW50Lm9wdGlvbnM7XG4gICAgICAgIHRoaXMuc3RyaW5naWZ5ID0gdGhpcy5wYXJlbnQuc3RyaW5naWZ5O1xuICAgICAgfVxuICAgICAgdGhpcy52YWx1ZSA9IG51bGw7XG4gICAgICB0aGlzLmNoaWxkcmVuID0gW107XG4gICAgICB0aGlzLmJhc2VVUkkgPSBudWxsO1xuICAgICAgaWYgKCFYTUxFbGVtZW50KSB7XG4gICAgICAgIFhNTEVsZW1lbnQgPSByZXF1aXJlKCcuL1hNTEVsZW1lbnQnKTtcbiAgICAgICAgWE1MQ0RhdGEgPSByZXF1aXJlKCcuL1hNTENEYXRhJyk7XG4gICAgICAgIFhNTENvbW1lbnQgPSByZXF1aXJlKCcuL1hNTENvbW1lbnQnKTtcbiAgICAgICAgWE1MRGVjbGFyYXRpb24gPSByZXF1aXJlKCcuL1hNTERlY2xhcmF0aW9uJyk7XG4gICAgICAgIFhNTERvY1R5cGUgPSByZXF1aXJlKCcuL1hNTERvY1R5cGUnKTtcbiAgICAgICAgWE1MUmF3ID0gcmVxdWlyZSgnLi9YTUxSYXcnKTtcbiAgICAgICAgWE1MVGV4dCA9IHJlcXVpcmUoJy4vWE1MVGV4dCcpO1xuICAgICAgICBYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24gPSByZXF1aXJlKCcuL1hNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbicpO1xuICAgICAgICBYTUxEdW1teSA9IHJlcXVpcmUoJy4vWE1MRHVtbXknKTtcbiAgICAgICAgTm9kZVR5cGUgPSByZXF1aXJlKCcuL05vZGVUeXBlJyk7XG4gICAgICAgIFhNTE5vZGVMaXN0ID0gcmVxdWlyZSgnLi9YTUxOb2RlTGlzdCcpO1xuICAgICAgICBYTUxOYW1lZE5vZGVNYXAgPSByZXF1aXJlKCcuL1hNTE5hbWVkTm9kZU1hcCcpO1xuICAgICAgICBEb2N1bWVudFBvc2l0aW9uID0gcmVxdWlyZSgnLi9Eb2N1bWVudFBvc2l0aW9uJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTE5vZGUucHJvdG90eXBlLCAnbm9kZU5hbWUnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTE5vZGUucHJvdG90eXBlLCAnbm9kZVR5cGUnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50eXBlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTE5vZGUucHJvdG90eXBlLCAnbm9kZVZhbHVlJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MTm9kZS5wcm90b3R5cGUsICdwYXJlbnROb2RlJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50O1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTE5vZGUucHJvdG90eXBlLCAnY2hpbGROb2RlcycsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghdGhpcy5jaGlsZE5vZGVMaXN0IHx8ICF0aGlzLmNoaWxkTm9kZUxpc3Qubm9kZXMpIHtcbiAgICAgICAgICB0aGlzLmNoaWxkTm9kZUxpc3QgPSBuZXcgWE1MTm9kZUxpc3QodGhpcy5jaGlsZHJlbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGROb2RlTGlzdDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxOb2RlLnByb3RvdHlwZSwgJ2ZpcnN0Q2hpbGQnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlblswXSB8fCBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTE5vZGUucHJvdG90eXBlLCAnbGFzdENoaWxkJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW5bdGhpcy5jaGlsZHJlbi5sZW5ndGggLSAxXSB8fCBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTE5vZGUucHJvdG90eXBlLCAncHJldmlvdXNTaWJsaW5nJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIGkgPSB0aGlzLnBhcmVudC5jaGlsZHJlbi5pbmRleE9mKHRoaXMpO1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuY2hpbGRyZW5baSAtIDFdIHx8IG51bGw7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MTm9kZS5wcm90b3R5cGUsICduZXh0U2libGluZycsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBpID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZih0aGlzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmNoaWxkcmVuW2kgKyAxXSB8fCBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTE5vZGUucHJvdG90eXBlLCAnb3duZXJEb2N1bWVudCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50KCkgfHwgbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxOb2RlLnByb3RvdHlwZSwgJ3RleHRDb250ZW50Jywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNoaWxkLCBqLCBsZW4sIHJlZjIsIHN0cjtcbiAgICAgICAgaWYgKHRoaXMubm9kZVR5cGUgPT09IE5vZGVUeXBlLkVsZW1lbnQgfHwgdGhpcy5ub2RlVHlwZSA9PT0gTm9kZVR5cGUuRG9jdW1lbnRGcmFnbWVudCkge1xuICAgICAgICAgIHN0ciA9ICcnO1xuICAgICAgICAgIHJlZjIgPSB0aGlzLmNoaWxkcmVuO1xuICAgICAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZjIubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICAgIGNoaWxkID0gcmVmMltqXTtcbiAgICAgICAgICAgIGlmIChjaGlsZC50ZXh0Q29udGVudCkge1xuICAgICAgICAgICAgICBzdHIgKz0gY2hpbGQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBzdHI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLnNldFBhcmVudCA9IGZ1bmN0aW9uKHBhcmVudCkge1xuICAgICAgdmFyIGNoaWxkLCBqLCBsZW4sIHJlZjIsIHJlc3VsdHM7XG4gICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gcGFyZW50Lm9wdGlvbnM7XG4gICAgICAgIHRoaXMuc3RyaW5naWZ5ID0gcGFyZW50LnN0cmluZ2lmeTtcbiAgICAgIH1cbiAgICAgIHJlZjIgPSB0aGlzLmNoaWxkcmVuO1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmMi5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICBjaGlsZCA9IHJlZjJbal07XG4gICAgICAgIHJlc3VsdHMucHVzaChjaGlsZC5zZXRQYXJlbnQodGhpcykpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmVsZW1lbnQgPSBmdW5jdGlvbihuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KSB7XG4gICAgICB2YXIgY2hpbGROb2RlLCBpdGVtLCBqLCBrLCBrZXksIGxhc3RDaGlsZCwgbGVuLCBsZW4xLCByZWYyLCByZWYzLCB2YWw7XG4gICAgICBsYXN0Q2hpbGQgPSBudWxsO1xuICAgICAgaWYgKGF0dHJpYnV0ZXMgPT09IG51bGwgJiYgKHRleHQgPT0gbnVsbCkpIHtcbiAgICAgICAgcmVmMiA9IFt7fSwgbnVsbF0sIGF0dHJpYnV0ZXMgPSByZWYyWzBdLCB0ZXh0ID0gcmVmMlsxXTtcbiAgICAgIH1cbiAgICAgIGlmIChhdHRyaWJ1dGVzID09IG51bGwpIHtcbiAgICAgICAgYXR0cmlidXRlcyA9IHt9O1xuICAgICAgfVxuICAgICAgYXR0cmlidXRlcyA9IGdldFZhbHVlKGF0dHJpYnV0ZXMpO1xuICAgICAgaWYgKCFpc09iamVjdChhdHRyaWJ1dGVzKSkge1xuICAgICAgICByZWYzID0gW2F0dHJpYnV0ZXMsIHRleHRdLCB0ZXh0ID0gcmVmM1swXSwgYXR0cmlidXRlcyA9IHJlZjNbMV07XG4gICAgICB9XG4gICAgICBpZiAobmFtZSAhPSBudWxsKSB7XG4gICAgICAgIG5hbWUgPSBnZXRWYWx1ZShuYW1lKTtcbiAgICAgIH1cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KG5hbWUpKSB7XG4gICAgICAgIGZvciAoaiA9IDAsIGxlbiA9IG5hbWUubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICBpdGVtID0gbmFtZVtqXTtcbiAgICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLmVsZW1lbnQoaXRlbSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaXNGdW5jdGlvbihuYW1lKSkge1xuICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLmVsZW1lbnQobmFtZS5hcHBseSgpKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3QobmFtZSkpIHtcbiAgICAgICAgZm9yIChrZXkgaW4gbmFtZSkge1xuICAgICAgICAgIGlmICghaGFzUHJvcC5jYWxsKG5hbWUsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgICAgIHZhbCA9IG5hbWVba2V5XTtcbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbih2YWwpKSB7XG4gICAgICAgICAgICB2YWwgPSB2YWwuYXBwbHkoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuaWdub3JlRGVjb3JhdG9ycyAmJiB0aGlzLnN0cmluZ2lmeS5jb252ZXJ0QXR0S2V5ICYmIGtleS5pbmRleE9mKHRoaXMuc3RyaW5naWZ5LmNvbnZlcnRBdHRLZXkpID09PSAwKSB7XG4gICAgICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLmF0dHJpYnV0ZShrZXkuc3Vic3RyKHRoaXMuc3RyaW5naWZ5LmNvbnZlcnRBdHRLZXkubGVuZ3RoKSwgdmFsKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLm9wdGlvbnMuc2VwYXJhdGVBcnJheUl0ZW1zICYmIEFycmF5LmlzQXJyYXkodmFsKSAmJiBpc0VtcHR5KHZhbCkpIHtcbiAgICAgICAgICAgIGxhc3RDaGlsZCA9IHRoaXMuZHVtbXkoKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHZhbCkgJiYgaXNFbXB0eSh2YWwpKSB7XG4gICAgICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLmVsZW1lbnQoa2V5KTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLm9wdGlvbnMua2VlcE51bGxOb2RlcyAmJiAodmFsID09IG51bGwpKSB7XG4gICAgICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLmR1bW15KCk7XG4gICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5vcHRpb25zLnNlcGFyYXRlQXJyYXlJdGVtcyAmJiBBcnJheS5pc0FycmF5KHZhbCkpIHtcbiAgICAgICAgICAgIGZvciAoayA9IDAsIGxlbjEgPSB2YWwubGVuZ3RoOyBrIDwgbGVuMTsgaysrKSB7XG4gICAgICAgICAgICAgIGl0ZW0gPSB2YWxba107XG4gICAgICAgICAgICAgIGNoaWxkTm9kZSA9IHt9O1xuICAgICAgICAgICAgICBjaGlsZE5vZGVba2V5XSA9IGl0ZW07XG4gICAgICAgICAgICAgIGxhc3RDaGlsZCA9IHRoaXMuZWxlbWVudChjaGlsZE5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodmFsKSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuaWdub3JlRGVjb3JhdG9ycyAmJiB0aGlzLnN0cmluZ2lmeS5jb252ZXJ0VGV4dEtleSAmJiBrZXkuaW5kZXhPZih0aGlzLnN0cmluZ2lmeS5jb252ZXJ0VGV4dEtleSkgPT09IDApIHtcbiAgICAgICAgICAgICAgbGFzdENoaWxkID0gdGhpcy5lbGVtZW50KHZhbCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLmVsZW1lbnQoa2V5KTtcbiAgICAgICAgICAgICAgbGFzdENoaWxkLmVsZW1lbnQodmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGFzdENoaWxkID0gdGhpcy5lbGVtZW50KGtleSwgdmFsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMub3B0aW9ucy5rZWVwTnVsbE5vZGVzICYmIHRleHQgPT09IG51bGwpIHtcbiAgICAgICAgbGFzdENoaWxkID0gdGhpcy5kdW1teSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuaWdub3JlRGVjb3JhdG9ycyAmJiB0aGlzLnN0cmluZ2lmeS5jb252ZXJ0VGV4dEtleSAmJiBuYW1lLmluZGV4T2YodGhpcy5zdHJpbmdpZnkuY29udmVydFRleHRLZXkpID09PSAwKSB7XG4gICAgICAgICAgbGFzdENoaWxkID0gdGhpcy50ZXh0KHRleHQpO1xuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLm9wdGlvbnMuaWdub3JlRGVjb3JhdG9ycyAmJiB0aGlzLnN0cmluZ2lmeS5jb252ZXJ0Q0RhdGFLZXkgJiYgbmFtZS5pbmRleE9mKHRoaXMuc3RyaW5naWZ5LmNvbnZlcnRDRGF0YUtleSkgPT09IDApIHtcbiAgICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLmNkYXRhKHRleHQpO1xuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLm9wdGlvbnMuaWdub3JlRGVjb3JhdG9ycyAmJiB0aGlzLnN0cmluZ2lmeS5jb252ZXJ0Q29tbWVudEtleSAmJiBuYW1lLmluZGV4T2YodGhpcy5zdHJpbmdpZnkuY29udmVydENvbW1lbnRLZXkpID09PSAwKSB7XG4gICAgICAgICAgbGFzdENoaWxkID0gdGhpcy5jb21tZW50KHRleHQpO1xuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLm9wdGlvbnMuaWdub3JlRGVjb3JhdG9ycyAmJiB0aGlzLnN0cmluZ2lmeS5jb252ZXJ0UmF3S2V5ICYmIG5hbWUuaW5kZXhPZih0aGlzLnN0cmluZ2lmeS5jb252ZXJ0UmF3S2V5KSA9PT0gMCkge1xuICAgICAgICAgIGxhc3RDaGlsZCA9IHRoaXMucmF3KHRleHQpO1xuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLm9wdGlvbnMuaWdub3JlRGVjb3JhdG9ycyAmJiB0aGlzLnN0cmluZ2lmeS5jb252ZXJ0UElLZXkgJiYgbmFtZS5pbmRleE9mKHRoaXMuc3RyaW5naWZ5LmNvbnZlcnRQSUtleSkgPT09IDApIHtcbiAgICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLmluc3RydWN0aW9uKG5hbWUuc3Vic3RyKHRoaXMuc3RyaW5naWZ5LmNvbnZlcnRQSUtleS5sZW5ndGgpLCB0ZXh0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLm5vZGUobmFtZSwgYXR0cmlidXRlcywgdGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChsYXN0Q2hpbGQgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgY3JlYXRlIGFueSBlbGVtZW50cyB3aXRoOiBcIiArIG5hbWUgKyBcIi4gXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBsYXN0Q2hpbGQ7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmluc2VydEJlZm9yZSA9IGZ1bmN0aW9uKG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpIHtcbiAgICAgIHZhciBjaGlsZCwgaSwgbmV3Q2hpbGQsIHJlZkNoaWxkLCByZW1vdmVkO1xuICAgICAgaWYgKG5hbWUgIT0gbnVsbCA/IG5hbWUudHlwZSA6IHZvaWQgMCkge1xuICAgICAgICBuZXdDaGlsZCA9IG5hbWU7XG4gICAgICAgIHJlZkNoaWxkID0gYXR0cmlidXRlcztcbiAgICAgICAgbmV3Q2hpbGQuc2V0UGFyZW50KHRoaXMpO1xuICAgICAgICBpZiAocmVmQ2hpbGQpIHtcbiAgICAgICAgICBpID0gY2hpbGRyZW4uaW5kZXhPZihyZWZDaGlsZCk7XG4gICAgICAgICAgcmVtb3ZlZCA9IGNoaWxkcmVuLnNwbGljZShpKTtcbiAgICAgICAgICBjaGlsZHJlbi5wdXNoKG5ld0NoaWxkKTtcbiAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShjaGlsZHJlbiwgcmVtb3ZlZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hpbGRyZW4ucHVzaChuZXdDaGlsZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld0NoaWxkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSb290KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGluc2VydCBlbGVtZW50cyBhdCByb290IGxldmVsLiBcIiArIHRoaXMuZGVidWdJbmZvKG5hbWUpKTtcbiAgICAgICAgfVxuICAgICAgICBpID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZih0aGlzKTtcbiAgICAgICAgcmVtb3ZlZCA9IHRoaXMucGFyZW50LmNoaWxkcmVuLnNwbGljZShpKTtcbiAgICAgICAgY2hpbGQgPSB0aGlzLnBhcmVudC5lbGVtZW50KG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpO1xuICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseSh0aGlzLnBhcmVudC5jaGlsZHJlbiwgcmVtb3ZlZCk7XG4gICAgICAgIHJldHVybiBjaGlsZDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuaW5zZXJ0QWZ0ZXIgPSBmdW5jdGlvbihuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KSB7XG4gICAgICB2YXIgY2hpbGQsIGksIHJlbW92ZWQ7XG4gICAgICBpZiAodGhpcy5pc1Jvb3QpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGluc2VydCBlbGVtZW50cyBhdCByb290IGxldmVsLiBcIiArIHRoaXMuZGVidWdJbmZvKG5hbWUpKTtcbiAgICAgIH1cbiAgICAgIGkgPSB0aGlzLnBhcmVudC5jaGlsZHJlbi5pbmRleE9mKHRoaXMpO1xuICAgICAgcmVtb3ZlZCA9IHRoaXMucGFyZW50LmNoaWxkcmVuLnNwbGljZShpICsgMSk7XG4gICAgICBjaGlsZCA9IHRoaXMucGFyZW50LmVsZW1lbnQobmFtZSwgYXR0cmlidXRlcywgdGV4dCk7XG4gICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseSh0aGlzLnBhcmVudC5jaGlsZHJlbiwgcmVtb3ZlZCk7XG4gICAgICByZXR1cm4gY2hpbGQ7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGksIHJlZjI7XG4gICAgICBpZiAodGhpcy5pc1Jvb3QpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHJlbW92ZSB0aGUgcm9vdCBlbGVtZW50LiBcIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgICAgfVxuICAgICAgaSA9IHRoaXMucGFyZW50LmNoaWxkcmVuLmluZGV4T2YodGhpcyk7XG4gICAgICBbXS5zcGxpY2UuYXBwbHkodGhpcy5wYXJlbnQuY2hpbGRyZW4sIFtpLCBpIC0gaSArIDFdLmNvbmNhdChyZWYyID0gW10pKSwgcmVmMjtcbiAgICAgIHJldHVybiB0aGlzLnBhcmVudDtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUubm9kZSA9IGZ1bmN0aW9uKG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpIHtcbiAgICAgIHZhciBjaGlsZCwgcmVmMjtcbiAgICAgIGlmIChuYW1lICE9IG51bGwpIHtcbiAgICAgICAgbmFtZSA9IGdldFZhbHVlKG5hbWUpO1xuICAgICAgfVxuICAgICAgYXR0cmlidXRlcyB8fCAoYXR0cmlidXRlcyA9IHt9KTtcbiAgICAgIGF0dHJpYnV0ZXMgPSBnZXRWYWx1ZShhdHRyaWJ1dGVzKTtcbiAgICAgIGlmICghaXNPYmplY3QoYXR0cmlidXRlcykpIHtcbiAgICAgICAgcmVmMiA9IFthdHRyaWJ1dGVzLCB0ZXh0XSwgdGV4dCA9IHJlZjJbMF0sIGF0dHJpYnV0ZXMgPSByZWYyWzFdO1xuICAgICAgfVxuICAgICAgY2hpbGQgPSBuZXcgWE1MRWxlbWVudCh0aGlzLCBuYW1lLCBhdHRyaWJ1dGVzKTtcbiAgICAgIGlmICh0ZXh0ICE9IG51bGwpIHtcbiAgICAgICAgY2hpbGQudGV4dCh0ZXh0KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgICByZXR1cm4gY2hpbGQ7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLnRleHQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgdmFyIGNoaWxkO1xuICAgICAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICB0aGlzLmVsZW1lbnQodmFsdWUpO1xuICAgICAgfVxuICAgICAgY2hpbGQgPSBuZXcgWE1MVGV4dCh0aGlzLCB2YWx1ZSk7XG4gICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmNkYXRhID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhciBjaGlsZDtcbiAgICAgIGNoaWxkID0gbmV3IFhNTENEYXRhKHRoaXMsIHZhbHVlKTtcbiAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuY29tbWVudCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgY2hpbGQ7XG4gICAgICBjaGlsZCA9IG5ldyBYTUxDb21tZW50KHRoaXMsIHZhbHVlKTtcbiAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuY29tbWVudEJlZm9yZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgY2hpbGQsIGksIHJlbW92ZWQ7XG4gICAgICBpID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZih0aGlzKTtcbiAgICAgIHJlbW92ZWQgPSB0aGlzLnBhcmVudC5jaGlsZHJlbi5zcGxpY2UoaSk7XG4gICAgICBjaGlsZCA9IHRoaXMucGFyZW50LmNvbW1lbnQodmFsdWUpO1xuICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkodGhpcy5wYXJlbnQuY2hpbGRyZW4sIHJlbW92ZWQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmNvbW1lbnRBZnRlciA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgY2hpbGQsIGksIHJlbW92ZWQ7XG4gICAgICBpID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZih0aGlzKTtcbiAgICAgIHJlbW92ZWQgPSB0aGlzLnBhcmVudC5jaGlsZHJlbi5zcGxpY2UoaSArIDEpO1xuICAgICAgY2hpbGQgPSB0aGlzLnBhcmVudC5jb21tZW50KHZhbHVlKTtcbiAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHRoaXMucGFyZW50LmNoaWxkcmVuLCByZW1vdmVkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5yYXcgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgdmFyIGNoaWxkO1xuICAgICAgY2hpbGQgPSBuZXcgWE1MUmF3KHRoaXMsIHZhbHVlKTtcbiAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuZHVtbXkgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjaGlsZDtcbiAgICAgIGNoaWxkID0gbmV3IFhNTER1bW15KHRoaXMpO1xuICAgICAgcmV0dXJuIGNoaWxkO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5pbnN0cnVjdGlvbiA9IGZ1bmN0aW9uKHRhcmdldCwgdmFsdWUpIHtcbiAgICAgIHZhciBpbnNUYXJnZXQsIGluc1ZhbHVlLCBpbnN0cnVjdGlvbiwgaiwgbGVuO1xuICAgICAgaWYgKHRhcmdldCAhPSBudWxsKSB7XG4gICAgICAgIHRhcmdldCA9IGdldFZhbHVlKHRhcmdldCk7XG4gICAgICB9XG4gICAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICB2YWx1ZSA9IGdldFZhbHVlKHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkpIHtcbiAgICAgICAgZm9yIChqID0gMCwgbGVuID0gdGFyZ2V0Lmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgaW5zVGFyZ2V0ID0gdGFyZ2V0W2pdO1xuICAgICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb24oaW5zVGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpc09iamVjdCh0YXJnZXQpKSB7XG4gICAgICAgIGZvciAoaW5zVGFyZ2V0IGluIHRhcmdldCkge1xuICAgICAgICAgIGlmICghaGFzUHJvcC5jYWxsKHRhcmdldCwgaW5zVGFyZ2V0KSkgY29udGludWU7XG4gICAgICAgICAgaW5zVmFsdWUgPSB0YXJnZXRbaW5zVGFyZ2V0XTtcbiAgICAgICAgICB0aGlzLmluc3RydWN0aW9uKGluc1RhcmdldCwgaW5zVmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgICAgICB2YWx1ZSA9IHZhbHVlLmFwcGx5KCk7XG4gICAgICAgIH1cbiAgICAgICAgaW5zdHJ1Y3Rpb24gPSBuZXcgWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uKHRoaXMsIHRhcmdldCwgdmFsdWUpO1xuICAgICAgICB0aGlzLmNoaWxkcmVuLnB1c2goaW5zdHJ1Y3Rpb24pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmluc3RydWN0aW9uQmVmb3JlID0gZnVuY3Rpb24odGFyZ2V0LCB2YWx1ZSkge1xuICAgICAgdmFyIGNoaWxkLCBpLCByZW1vdmVkO1xuICAgICAgaSA9IHRoaXMucGFyZW50LmNoaWxkcmVuLmluZGV4T2YodGhpcyk7XG4gICAgICByZW1vdmVkID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGkpO1xuICAgICAgY2hpbGQgPSB0aGlzLnBhcmVudC5pbnN0cnVjdGlvbih0YXJnZXQsIHZhbHVlKTtcbiAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHRoaXMucGFyZW50LmNoaWxkcmVuLCByZW1vdmVkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5pbnN0cnVjdGlvbkFmdGVyID0gZnVuY3Rpb24odGFyZ2V0LCB2YWx1ZSkge1xuICAgICAgdmFyIGNoaWxkLCBpLCByZW1vdmVkO1xuICAgICAgaSA9IHRoaXMucGFyZW50LmNoaWxkcmVuLmluZGV4T2YodGhpcyk7XG4gICAgICByZW1vdmVkID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGkgKyAxKTtcbiAgICAgIGNoaWxkID0gdGhpcy5wYXJlbnQuaW5zdHJ1Y3Rpb24odGFyZ2V0LCB2YWx1ZSk7XG4gICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseSh0aGlzLnBhcmVudC5jaGlsZHJlbiwgcmVtb3ZlZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuZGVjbGFyYXRpb24gPSBmdW5jdGlvbih2ZXJzaW9uLCBlbmNvZGluZywgc3RhbmRhbG9uZSkge1xuICAgICAgdmFyIGRvYywgeG1sZGVjO1xuICAgICAgZG9jID0gdGhpcy5kb2N1bWVudCgpO1xuICAgICAgeG1sZGVjID0gbmV3IFhNTERlY2xhcmF0aW9uKGRvYywgdmVyc2lvbiwgZW5jb2RpbmcsIHN0YW5kYWxvbmUpO1xuICAgICAgaWYgKGRvYy5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZG9jLmNoaWxkcmVuLnVuc2hpZnQoeG1sZGVjKTtcbiAgICAgIH0gZWxzZSBpZiAoZG9jLmNoaWxkcmVuWzBdLnR5cGUgPT09IE5vZGVUeXBlLkRlY2xhcmF0aW9uKSB7XG4gICAgICAgIGRvYy5jaGlsZHJlblswXSA9IHhtbGRlYztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRvYy5jaGlsZHJlbi51bnNoaWZ0KHhtbGRlYyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZG9jLnJvb3QoKSB8fCBkb2M7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmR0ZCA9IGZ1bmN0aW9uKHB1YklELCBzeXNJRCkge1xuICAgICAgdmFyIGNoaWxkLCBkb2MsIGRvY3R5cGUsIGksIGosIGssIGxlbiwgbGVuMSwgcmVmMiwgcmVmMztcbiAgICAgIGRvYyA9IHRoaXMuZG9jdW1lbnQoKTtcbiAgICAgIGRvY3R5cGUgPSBuZXcgWE1MRG9jVHlwZShkb2MsIHB1YklELCBzeXNJRCk7XG4gICAgICByZWYyID0gZG9jLmNoaWxkcmVuO1xuICAgICAgZm9yIChpID0gaiA9IDAsIGxlbiA9IHJlZjIubGVuZ3RoOyBqIDwgbGVuOyBpID0gKytqKSB7XG4gICAgICAgIGNoaWxkID0gcmVmMltpXTtcbiAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09IE5vZGVUeXBlLkRvY1R5cGUpIHtcbiAgICAgICAgICBkb2MuY2hpbGRyZW5baV0gPSBkb2N0eXBlO1xuICAgICAgICAgIHJldHVybiBkb2N0eXBlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZWYzID0gZG9jLmNoaWxkcmVuO1xuICAgICAgZm9yIChpID0gayA9IDAsIGxlbjEgPSByZWYzLmxlbmd0aDsgayA8IGxlbjE7IGkgPSArK2spIHtcbiAgICAgICAgY2hpbGQgPSByZWYzW2ldO1xuICAgICAgICBpZiAoY2hpbGQuaXNSb290KSB7XG4gICAgICAgICAgZG9jLmNoaWxkcmVuLnNwbGljZShpLCAwLCBkb2N0eXBlKTtcbiAgICAgICAgICByZXR1cm4gZG9jdHlwZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZG9jLmNoaWxkcmVuLnB1c2goZG9jdHlwZSk7XG4gICAgICByZXR1cm4gZG9jdHlwZTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUudXAgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmlzUm9vdCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgcm9vdCBub2RlIGhhcyBubyBwYXJlbnQuIFVzZSBkb2MoKSBpZiB5b3UgbmVlZCB0byBnZXQgdGhlIGRvY3VtZW50IG9iamVjdC5cIik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5wYXJlbnQ7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLnJvb3QgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBub2RlO1xuICAgICAgbm9kZSA9IHRoaXM7XG4gICAgICB3aGlsZSAobm9kZSkge1xuICAgICAgICBpZiAobm9kZS50eXBlID09PSBOb2RlVHlwZS5Eb2N1bWVudCkge1xuICAgICAgICAgIHJldHVybiBub2RlLnJvb3RPYmplY3Q7XG4gICAgICAgIH0gZWxzZSBpZiAobm9kZS5pc1Jvb3QpIHtcbiAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub2RlID0gbm9kZS5wYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuZG9jdW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBub2RlO1xuICAgICAgbm9kZSA9IHRoaXM7XG4gICAgICB3aGlsZSAobm9kZSkge1xuICAgICAgICBpZiAobm9kZS50eXBlID09PSBOb2RlVHlwZS5Eb2N1bWVudCkge1xuICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vZGUgPSBub2RlLnBhcmVudDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5kb2N1bWVudCgpLmVuZChvcHRpb25zKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUucHJldiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGk7XG4gICAgICBpID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZih0aGlzKTtcbiAgICAgIGlmIChpIDwgMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBbHJlYWR5IGF0IHRoZSBmaXJzdCBub2RlLiBcIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmNoaWxkcmVuW2kgLSAxXTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGk7XG4gICAgICBpID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZih0aGlzKTtcbiAgICAgIGlmIChpID09PSAtMSB8fCBpID09PSB0aGlzLnBhcmVudC5jaGlsZHJlbi5sZW5ndGggLSAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFscmVhZHkgYXQgdGhlIGxhc3Qgbm9kZS4gXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnBhcmVudC5jaGlsZHJlbltpICsgMV07XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmltcG9ydERvY3VtZW50ID0gZnVuY3Rpb24oZG9jKSB7XG4gICAgICB2YXIgY2xvbmVkUm9vdDtcbiAgICAgIGNsb25lZFJvb3QgPSBkb2Mucm9vdCgpLmNsb25lKCk7XG4gICAgICBjbG9uZWRSb290LnBhcmVudCA9IHRoaXM7XG4gICAgICBjbG9uZWRSb290LmlzUm9vdCA9IGZhbHNlO1xuICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGNsb25lZFJvb3QpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmRlYnVnSW5mbyA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHZhciByZWYyLCByZWYzO1xuICAgICAgbmFtZSA9IG5hbWUgfHwgdGhpcy5uYW1lO1xuICAgICAgaWYgKChuYW1lID09IG51bGwpICYmICEoKHJlZjIgPSB0aGlzLnBhcmVudCkgIT0gbnVsbCA/IHJlZjIubmFtZSA6IHZvaWQgMCkpIHtcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICB9IGVsc2UgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gXCJwYXJlbnQ6IDxcIiArIHRoaXMucGFyZW50Lm5hbWUgKyBcIj5cIjtcbiAgICAgIH0gZWxzZSBpZiAoISgocmVmMyA9IHRoaXMucGFyZW50KSAhPSBudWxsID8gcmVmMy5uYW1lIDogdm9pZCAwKSkge1xuICAgICAgICByZXR1cm4gXCJub2RlOiA8XCIgKyBuYW1lICsgXCI+XCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gXCJub2RlOiA8XCIgKyBuYW1lICsgXCI+LCBwYXJlbnQ6IDxcIiArIHRoaXMucGFyZW50Lm5hbWUgKyBcIj5cIjtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuZWxlID0gZnVuY3Rpb24obmFtZSwgYXR0cmlidXRlcywgdGV4dCkge1xuICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudChuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUubm9kID0gZnVuY3Rpb24obmFtZSwgYXR0cmlidXRlcywgdGV4dCkge1xuICAgICAgcmV0dXJuIHRoaXMubm9kZShuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUudHh0ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLnRleHQodmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5kYXQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuY2RhdGEodmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5jb20gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuY29tbWVudCh2YWx1ZSk7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmlucyA9IGZ1bmN0aW9uKHRhcmdldCwgdmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmluc3RydWN0aW9uKHRhcmdldCwgdmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5kb2MgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50KCk7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmRlYyA9IGZ1bmN0aW9uKHZlcnNpb24sIGVuY29kaW5nLCBzdGFuZGFsb25lKSB7XG4gICAgICByZXR1cm4gdGhpcy5kZWNsYXJhdGlvbih2ZXJzaW9uLCBlbmNvZGluZywgc3RhbmRhbG9uZSk7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmUgPSBmdW5jdGlvbihuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KSB7XG4gICAgICByZXR1cm4gdGhpcy5lbGVtZW50KG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5uID0gZnVuY3Rpb24obmFtZSwgYXR0cmlidXRlcywgdGV4dCkge1xuICAgICAgcmV0dXJuIHRoaXMubm9kZShuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUudCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy50ZXh0KHZhbHVlKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuZCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5jZGF0YSh2YWx1ZSk7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmMgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuY29tbWVudCh2YWx1ZSk7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLnIgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMucmF3KHZhbHVlKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuaSA9IGZ1bmN0aW9uKHRhcmdldCwgdmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmluc3RydWN0aW9uKHRhcmdldCwgdmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS51ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy51cCgpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5pbXBvcnRYTUxCdWlsZGVyID0gZnVuY3Rpb24oZG9jKSB7XG4gICAgICByZXR1cm4gdGhpcy5pbXBvcnREb2N1bWVudChkb2MpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQgPSBmdW5jdGlvbihuZXdDaGlsZCwgb2xkQ2hpbGQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUucmVtb3ZlQ2hpbGQgPSBmdW5jdGlvbihvbGRDaGlsZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5hcHBlbmRDaGlsZCA9IGZ1bmN0aW9uKG5ld0NoaWxkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmhhc0NoaWxkTm9kZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuLmxlbmd0aCAhPT0gMDtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuY2xvbmVOb2RlID0gZnVuY3Rpb24oZGVlcCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5ub3JtYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuaXNTdXBwb3J0ZWQgPSBmdW5jdGlvbihmZWF0dXJlLCB2ZXJzaW9uKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuaGFzQXR0cmlidXRlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cmlicy5sZW5ndGggIT09IDA7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uID0gZnVuY3Rpb24ob3RoZXIpIHtcbiAgICAgIHZhciByZWYsIHJlcztcbiAgICAgIHJlZiA9IHRoaXM7XG4gICAgICBpZiAocmVmID09PSBvdGhlcikge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5kb2N1bWVudCgpICE9PSBvdGhlci5kb2N1bWVudCgpKSB7XG4gICAgICAgIHJlcyA9IERvY3VtZW50UG9zaXRpb24uRGlzY29ubmVjdGVkIHwgRG9jdW1lbnRQb3NpdGlvbi5JbXBsZW1lbnRhdGlvblNwZWNpZmljO1xuICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuNSkge1xuICAgICAgICAgIHJlcyB8PSBEb2N1bWVudFBvc2l0aW9uLlByZWNlZGluZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXMgfD0gRG9jdW1lbnRQb3NpdGlvbi5Gb2xsb3dpbmc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgIH0gZWxzZSBpZiAocmVmLmlzQW5jZXN0b3Iob3RoZXIpKSB7XG4gICAgICAgIHJldHVybiBEb2N1bWVudFBvc2l0aW9uLkNvbnRhaW5zIHwgRG9jdW1lbnRQb3NpdGlvbi5QcmVjZWRpbmc7XG4gICAgICB9IGVsc2UgaWYgKHJlZi5pc0Rlc2NlbmRhbnQob3RoZXIpKSB7XG4gICAgICAgIHJldHVybiBEb2N1bWVudFBvc2l0aW9uLkNvbnRhaW5zIHwgRG9jdW1lbnRQb3NpdGlvbi5Gb2xsb3dpbmc7XG4gICAgICB9IGVsc2UgaWYgKHJlZi5pc1ByZWNlZGluZyhvdGhlcikpIHtcbiAgICAgICAgcmV0dXJuIERvY3VtZW50UG9zaXRpb24uUHJlY2VkaW5nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIERvY3VtZW50UG9zaXRpb24uRm9sbG93aW5nO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5pc1NhbWVOb2RlID0gZnVuY3Rpb24ob3RoZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUubG9va3VwUHJlZml4ID0gZnVuY3Rpb24obmFtZXNwYWNlVVJJKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmlzRGVmYXVsdE5hbWVzcGFjZSA9IGZ1bmN0aW9uKG5hbWVzcGFjZVVSSSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5sb29rdXBOYW1lc3BhY2VVUkkgPSBmdW5jdGlvbihwcmVmaXgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuaXNFcXVhbE5vZGUgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICB2YXIgaSwgaiwgcmVmMjtcbiAgICAgIGlmIChub2RlLm5vZGVUeXBlICE9PSB0aGlzLm5vZGVUeXBlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCAhPT0gdGhpcy5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgZm9yIChpID0gaiA9IDAsIHJlZjIgPSB0aGlzLmNoaWxkcmVuLmxlbmd0aCAtIDE7IDAgPD0gcmVmMiA/IGogPD0gcmVmMiA6IGogPj0gcmVmMjsgaSA9IDAgPD0gcmVmMiA/ICsraiA6IC0taikge1xuICAgICAgICBpZiAoIXRoaXMuY2hpbGRyZW5baV0uaXNFcXVhbE5vZGUobm9kZS5jaGlsZHJlbltpXSkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5nZXRGZWF0dXJlID0gZnVuY3Rpb24oZmVhdHVyZSwgdmVyc2lvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5zZXRVc2VyRGF0YSA9IGZ1bmN0aW9uKGtleSwgZGF0YSwgaGFuZGxlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5nZXRVc2VyRGF0YSA9IGZ1bmN0aW9uKGtleSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uKG90aGVyKSB7XG4gICAgICBpZiAoIW90aGVyKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvdGhlciA9PT0gdGhpcyB8fCB0aGlzLmlzRGVzY2VuZGFudChvdGhlcik7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmlzRGVzY2VuZGFudCA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIHZhciBjaGlsZCwgaXNEZXNjZW5kYW50Q2hpbGQsIGosIGxlbiwgcmVmMjtcbiAgICAgIHJlZjIgPSB0aGlzLmNoaWxkcmVuO1xuICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmMi5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICBjaGlsZCA9IHJlZjJbal07XG4gICAgICAgIGlmIChub2RlID09PSBjaGlsZCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlzRGVzY2VuZGFudENoaWxkID0gY2hpbGQuaXNEZXNjZW5kYW50KG5vZGUpO1xuICAgICAgICBpZiAoaXNEZXNjZW5kYW50Q2hpbGQpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5pc0FuY2VzdG9yID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgcmV0dXJuIG5vZGUuaXNEZXNjZW5kYW50KHRoaXMpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5pc1ByZWNlZGluZyA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIHZhciBub2RlUG9zLCB0aGlzUG9zO1xuICAgICAgbm9kZVBvcyA9IHRoaXMudHJlZVBvc2l0aW9uKG5vZGUpO1xuICAgICAgdGhpc1BvcyA9IHRoaXMudHJlZVBvc2l0aW9uKHRoaXMpO1xuICAgICAgaWYgKG5vZGVQb3MgPT09IC0xIHx8IHRoaXNQb3MgPT09IC0xKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBub2RlUG9zIDwgdGhpc1BvcztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuaXNGb2xsb3dpbmcgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICB2YXIgbm9kZVBvcywgdGhpc1BvcztcbiAgICAgIG5vZGVQb3MgPSB0aGlzLnRyZWVQb3NpdGlvbihub2RlKTtcbiAgICAgIHRoaXNQb3MgPSB0aGlzLnRyZWVQb3NpdGlvbih0aGlzKTtcbiAgICAgIGlmIChub2RlUG9zID09PSAtMSB8fCB0aGlzUG9zID09PSAtMSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbm9kZVBvcyA+IHRoaXNQb3M7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLnRyZWVQb3NpdGlvbiA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIHZhciBmb3VuZCwgcG9zO1xuICAgICAgcG9zID0gMDtcbiAgICAgIGZvdW5kID0gZmFsc2U7XG4gICAgICB0aGlzLmZvcmVhY2hUcmVlTm9kZSh0aGlzLmRvY3VtZW50KCksIGZ1bmN0aW9uKGNoaWxkTm9kZSkge1xuICAgICAgICBwb3MrKztcbiAgICAgICAgaWYgKCFmb3VuZCAmJiBjaGlsZE5vZGUgPT09IG5vZGUpIHtcbiAgICAgICAgICByZXR1cm4gZm91bmQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICByZXR1cm4gcG9zO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5mb3JlYWNoVHJlZU5vZGUgPSBmdW5jdGlvbihub2RlLCBmdW5jKSB7XG4gICAgICB2YXIgY2hpbGQsIGosIGxlbiwgcmVmMiwgcmVzO1xuICAgICAgbm9kZSB8fCAobm9kZSA9IHRoaXMuZG9jdW1lbnQoKSk7XG4gICAgICByZWYyID0gbm9kZS5jaGlsZHJlbjtcbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZjIubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgY2hpbGQgPSByZWYyW2pdO1xuICAgICAgICBpZiAocmVzID0gZnVuYyhjaGlsZCkpIHtcbiAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlcyA9IHRoaXMuZm9yZWFjaFRyZWVOb2RlKGNoaWxkLCBmdW5jKTtcbiAgICAgICAgICBpZiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gWE1MTm9kZTtcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIFhNTE5vZGVMaXN0O1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MTm9kZUxpc3QgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gWE1MTm9kZUxpc3Qobm9kZXMpIHtcbiAgICAgIHRoaXMubm9kZXMgPSBub2RlcztcbiAgICB9XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MTm9kZUxpc3QucHJvdG90eXBlLCAnbGVuZ3RoJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZXMubGVuZ3RoIHx8IDA7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBYTUxOb2RlTGlzdC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLm5vZGVzID0gbnVsbDtcbiAgICB9O1xuXG4gICAgWE1MTm9kZUxpc3QucHJvdG90eXBlLml0ZW0gPSBmdW5jdGlvbihpbmRleCkge1xuICAgICAgcmV0dXJuIHRoaXMubm9kZXNbaW5kZXhdIHx8IG51bGw7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxOb2RlTGlzdDtcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIE5vZGVUeXBlLCBYTUxDaGFyYWN0ZXJEYXRhLCBYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24sXG4gICAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICBOb2RlVHlwZSA9IHJlcXVpcmUoJy4vTm9kZVR5cGUnKTtcblxuICBYTUxDaGFyYWN0ZXJEYXRhID0gcmVxdWlyZSgnLi9YTUxDaGFyYWN0ZXJEYXRhJyk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24gPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24sIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uKHBhcmVudCwgdGFyZ2V0LCB2YWx1ZSkge1xuICAgICAgWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIHBhcmVudCk7XG4gICAgICBpZiAodGFyZ2V0ID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBpbnN0cnVjdGlvbiB0YXJnZXQuIFwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgICB9XG4gICAgICB0aGlzLnR5cGUgPSBOb2RlVHlwZS5Qcm9jZXNzaW5nSW5zdHJ1Y3Rpb247XG4gICAgICB0aGlzLnRhcmdldCA9IHRoaXMuc3RyaW5naWZ5Lmluc1RhcmdldCh0YXJnZXQpO1xuICAgICAgdGhpcy5uYW1lID0gdGhpcy50YXJnZXQ7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuc3RyaW5naWZ5Lmluc1ZhbHVlKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24ucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmNyZWF0ZSh0aGlzKTtcbiAgICB9O1xuXG4gICAgWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMud3JpdGVyLnByb2Nlc3NpbmdJbnN0cnVjdGlvbih0aGlzLCB0aGlzLm9wdGlvbnMud3JpdGVyLmZpbHRlck9wdGlvbnMob3B0aW9ucykpO1xuICAgIH07XG5cbiAgICBYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24ucHJvdG90eXBlLmlzRXF1YWxOb2RlID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgaWYgKCFYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24uX19zdXBlcl9fLmlzRXF1YWxOb2RlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykuaXNFcXVhbE5vZGUobm9kZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGUudGFyZ2V0ICE9PSB0aGlzLnRhcmdldCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFhNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbjtcblxuICB9KShYTUxDaGFyYWN0ZXJEYXRhKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBOb2RlVHlwZSwgWE1MTm9kZSwgWE1MUmF3LFxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgTm9kZVR5cGUgPSByZXF1aXJlKCcuL05vZGVUeXBlJyk7XG5cbiAgWE1MTm9kZSA9IHJlcXVpcmUoJy4vWE1MTm9kZScpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MUmF3ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICBleHRlbmQoWE1MUmF3LCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIFhNTFJhdyhwYXJlbnQsIHRleHQpIHtcbiAgICAgIFhNTFJhdy5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBwYXJlbnQpO1xuICAgICAgaWYgKHRleHQgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHJhdyB0ZXh0LiBcIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgICAgfVxuICAgICAgdGhpcy50eXBlID0gTm9kZVR5cGUuUmF3O1xuICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuc3RyaW5naWZ5LnJhdyh0ZXh0KTtcbiAgICB9XG5cbiAgICBYTUxSYXcucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmNyZWF0ZSh0aGlzKTtcbiAgICB9O1xuXG4gICAgWE1MUmF3LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMud3JpdGVyLnJhdyh0aGlzLCB0aGlzLm9wdGlvbnMud3JpdGVyLmZpbHRlck9wdGlvbnMob3B0aW9ucykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gWE1MUmF3O1xuXG4gIH0pKFhNTE5vZGUpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIE5vZGVUeXBlLCBXcml0ZXJTdGF0ZSwgWE1MU3RyZWFtV3JpdGVyLCBYTUxXcml0ZXJCYXNlLFxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgTm9kZVR5cGUgPSByZXF1aXJlKCcuL05vZGVUeXBlJyk7XG5cbiAgWE1MV3JpdGVyQmFzZSA9IHJlcXVpcmUoJy4vWE1MV3JpdGVyQmFzZScpO1xuXG4gIFdyaXRlclN0YXRlID0gcmVxdWlyZSgnLi9Xcml0ZXJTdGF0ZScpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MU3RyZWFtV3JpdGVyID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICBleHRlbmQoWE1MU3RyZWFtV3JpdGVyLCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIFhNTFN0cmVhbVdyaXRlcihzdHJlYW0sIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuc3RyZWFtID0gc3RyZWFtO1xuICAgICAgWE1MU3RyZWFtV3JpdGVyLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIFhNTFN0cmVhbVdyaXRlci5wcm90b3R5cGUuZW5kbGluZSA9IGZ1bmN0aW9uKG5vZGUsIG9wdGlvbnMsIGxldmVsKSB7XG4gICAgICBpZiAobm9kZS5pc0xhc3RSb290Tm9kZSAmJiBvcHRpb25zLnN0YXRlID09PSBXcml0ZXJTdGF0ZS5DbG9zZVRhZykge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gWE1MU3RyZWFtV3JpdGVyLl9fc3VwZXJfXy5lbmRsaW5lLmNhbGwodGhpcywgbm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBYTUxTdHJlYW1Xcml0ZXIucHJvdG90eXBlLmRvY3VtZW50ID0gZnVuY3Rpb24oZG9jLCBvcHRpb25zKSB7XG4gICAgICB2YXIgY2hpbGQsIGksIGosIGssIGxlbiwgbGVuMSwgcmVmLCByZWYxLCByZXN1bHRzO1xuICAgICAgcmVmID0gZG9jLmNoaWxkcmVuO1xuICAgICAgZm9yIChpID0gaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGkgPSArK2opIHtcbiAgICAgICAgY2hpbGQgPSByZWZbaV07XG4gICAgICAgIGNoaWxkLmlzTGFzdFJvb3ROb2RlID0gaSA9PT0gZG9jLmNoaWxkcmVuLmxlbmd0aCAtIDE7XG4gICAgICB9XG4gICAgICBvcHRpb25zID0gdGhpcy5maWx0ZXJPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgcmVmMSA9IGRvYy5jaGlsZHJlbjtcbiAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoayA9IDAsIGxlbjEgPSByZWYxLmxlbmd0aDsgayA8IGxlbjE7IGsrKykge1xuICAgICAgICBjaGlsZCA9IHJlZjFba107XG4gICAgICAgIHJlc3VsdHMucHVzaCh0aGlzLndyaXRlQ2hpbGROb2RlKGNoaWxkLCBvcHRpb25zLCAwKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9O1xuXG4gICAgWE1MU3RyZWFtV3JpdGVyLnByb3RvdHlwZS5hdHRyaWJ1dGUgPSBmdW5jdGlvbihhdHQsIG9wdGlvbnMsIGxldmVsKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdHJlYW0ud3JpdGUoWE1MU3RyZWFtV3JpdGVyLl9fc3VwZXJfXy5hdHRyaWJ1dGUuY2FsbCh0aGlzLCBhdHQsIG9wdGlvbnMsIGxldmVsKSk7XG4gICAgfTtcblxuICAgIFhNTFN0cmVhbVdyaXRlci5wcm90b3R5cGUuY2RhdGEgPSBmdW5jdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RyZWFtLndyaXRlKFhNTFN0cmVhbVdyaXRlci5fX3N1cGVyX18uY2RhdGEuY2FsbCh0aGlzLCBub2RlLCBvcHRpb25zLCBsZXZlbCkpO1xuICAgIH07XG5cbiAgICBYTUxTdHJlYW1Xcml0ZXIucHJvdG90eXBlLmNvbW1lbnQgPSBmdW5jdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RyZWFtLndyaXRlKFhNTFN0cmVhbVdyaXRlci5fX3N1cGVyX18uY29tbWVudC5jYWxsKHRoaXMsIG5vZGUsIG9wdGlvbnMsIGxldmVsKSk7XG4gICAgfTtcblxuICAgIFhNTFN0cmVhbVdyaXRlci5wcm90b3R5cGUuZGVjbGFyYXRpb24gPSBmdW5jdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RyZWFtLndyaXRlKFhNTFN0cmVhbVdyaXRlci5fX3N1cGVyX18uZGVjbGFyYXRpb24uY2FsbCh0aGlzLCBub2RlLCBvcHRpb25zLCBsZXZlbCkpO1xuICAgIH07XG5cbiAgICBYTUxTdHJlYW1Xcml0ZXIucHJvdG90eXBlLmRvY1R5cGUgPSBmdW5jdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCkge1xuICAgICAgdmFyIGNoaWxkLCBqLCBsZW4sIHJlZjtcbiAgICAgIGxldmVsIHx8IChsZXZlbCA9IDApO1xuICAgICAgdGhpcy5vcGVuTm9kZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuT3BlblRhZztcbiAgICAgIHRoaXMuc3RyZWFtLndyaXRlKHRoaXMuaW5kZW50KG5vZGUsIG9wdGlvbnMsIGxldmVsKSk7XG4gICAgICB0aGlzLnN0cmVhbS53cml0ZSgnPCFET0NUWVBFICcgKyBub2RlLnJvb3QoKS5uYW1lKTtcbiAgICAgIGlmIChub2RlLnB1YklEICYmIG5vZGUuc3lzSUQpIHtcbiAgICAgICAgdGhpcy5zdHJlYW0ud3JpdGUoJyBQVUJMSUMgXCInICsgbm9kZS5wdWJJRCArICdcIiBcIicgKyBub2RlLnN5c0lEICsgJ1wiJyk7XG4gICAgICB9IGVsc2UgaWYgKG5vZGUuc3lzSUQpIHtcbiAgICAgICAgdGhpcy5zdHJlYW0ud3JpdGUoJyBTWVNURU0gXCInICsgbm9kZS5zeXNJRCArICdcIicpO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGUuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLnN0cmVhbS53cml0ZSgnIFsnKTtcbiAgICAgICAgdGhpcy5zdHJlYW0ud3JpdGUodGhpcy5lbmRsaW5lKG5vZGUsIG9wdGlvbnMsIGxldmVsKSk7XG4gICAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5JbnNpZGVUYWc7XG4gICAgICAgIHJlZiA9IG5vZGUuY2hpbGRyZW47XG4gICAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICAgIGNoaWxkID0gcmVmW2pdO1xuICAgICAgICAgIHRoaXMud3JpdGVDaGlsZE5vZGUoY2hpbGQsIG9wdGlvbnMsIGxldmVsICsgMSk7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkNsb3NlVGFnO1xuICAgICAgICB0aGlzLnN0cmVhbS53cml0ZSgnXScpO1xuICAgICAgfVxuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkNsb3NlVGFnO1xuICAgICAgdGhpcy5zdHJlYW0ud3JpdGUob3B0aW9ucy5zcGFjZUJlZm9yZVNsYXNoICsgJz4nKTtcbiAgICAgIHRoaXMuc3RyZWFtLndyaXRlKHRoaXMuZW5kbGluZShub2RlLCBvcHRpb25zLCBsZXZlbCkpO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLk5vbmU7XG4gICAgICByZXR1cm4gdGhpcy5jbG9zZU5vZGUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgIH07XG5cbiAgICBYTUxTdHJlYW1Xcml0ZXIucHJvdG90eXBlLmVsZW1lbnQgPSBmdW5jdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCkge1xuICAgICAgdmFyIGF0dCwgY2hpbGQsIGNoaWxkTm9kZUNvdW50LCBmaXJzdENoaWxkTm9kZSwgaiwgbGVuLCBuYW1lLCBwcmV0dHlTdXBwcmVzc2VkLCByZWYsIHJlZjE7XG4gICAgICBsZXZlbCB8fCAobGV2ZWwgPSAwKTtcbiAgICAgIHRoaXMub3Blbk5vZGUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLk9wZW5UYWc7XG4gICAgICB0aGlzLnN0cmVhbS53cml0ZSh0aGlzLmluZGVudChub2RlLCBvcHRpb25zLCBsZXZlbCkgKyAnPCcgKyBub2RlLm5hbWUpO1xuICAgICAgcmVmID0gbm9kZS5hdHRyaWJzO1xuICAgICAgZm9yIChuYW1lIGluIHJlZikge1xuICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChyZWYsIG5hbWUpKSBjb250aW51ZTtcbiAgICAgICAgYXR0ID0gcmVmW25hbWVdO1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZShhdHQsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIH1cbiAgICAgIGNoaWxkTm9kZUNvdW50ID0gbm9kZS5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICBmaXJzdENoaWxkTm9kZSA9IGNoaWxkTm9kZUNvdW50ID09PSAwID8gbnVsbCA6IG5vZGUuY2hpbGRyZW5bMF07XG4gICAgICBpZiAoY2hpbGROb2RlQ291bnQgPT09IDAgfHwgbm9kZS5jaGlsZHJlbi5ldmVyeShmdW5jdGlvbihlKSB7XG4gICAgICAgIHJldHVybiAoZS50eXBlID09PSBOb2RlVHlwZS5UZXh0IHx8IGUudHlwZSA9PT0gTm9kZVR5cGUuUmF3KSAmJiBlLnZhbHVlID09PSAnJztcbiAgICAgIH0pKSB7XG4gICAgICAgIGlmIChvcHRpb25zLmFsbG93RW1wdHkpIHtcbiAgICAgICAgICB0aGlzLnN0cmVhbS53cml0ZSgnPicpO1xuICAgICAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5DbG9zZVRhZztcbiAgICAgICAgICB0aGlzLnN0cmVhbS53cml0ZSgnPC8nICsgbm9kZS5uYW1lICsgJz4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuQ2xvc2VUYWc7XG4gICAgICAgICAgdGhpcy5zdHJlYW0ud3JpdGUob3B0aW9ucy5zcGFjZUJlZm9yZVNsYXNoICsgJy8+Jyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5wcmV0dHkgJiYgY2hpbGROb2RlQ291bnQgPT09IDEgJiYgKGZpcnN0Q2hpbGROb2RlLnR5cGUgPT09IE5vZGVUeXBlLlRleHQgfHwgZmlyc3RDaGlsZE5vZGUudHlwZSA9PT0gTm9kZVR5cGUuUmF3KSAmJiAoZmlyc3RDaGlsZE5vZGUudmFsdWUgIT0gbnVsbCkpIHtcbiAgICAgICAgdGhpcy5zdHJlYW0ud3JpdGUoJz4nKTtcbiAgICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkluc2lkZVRhZztcbiAgICAgICAgb3B0aW9ucy5zdXBwcmVzc1ByZXR0eUNvdW50Kys7XG4gICAgICAgIHByZXR0eVN1cHByZXNzZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLndyaXRlQ2hpbGROb2RlKGZpcnN0Q2hpbGROb2RlLCBvcHRpb25zLCBsZXZlbCArIDEpO1xuICAgICAgICBvcHRpb25zLnN1cHByZXNzUHJldHR5Q291bnQtLTtcbiAgICAgICAgcHJldHR5U3VwcHJlc3NlZCA9IGZhbHNlO1xuICAgICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuQ2xvc2VUYWc7XG4gICAgICAgIHRoaXMuc3RyZWFtLndyaXRlKCc8LycgKyBub2RlLm5hbWUgKyAnPicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zdHJlYW0ud3JpdGUoJz4nICsgdGhpcy5lbmRsaW5lKG5vZGUsIG9wdGlvbnMsIGxldmVsKSk7XG4gICAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5JbnNpZGVUYWc7XG4gICAgICAgIHJlZjEgPSBub2RlLmNoaWxkcmVuO1xuICAgICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYxLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgY2hpbGQgPSByZWYxW2pdO1xuICAgICAgICAgIHRoaXMud3JpdGVDaGlsZE5vZGUoY2hpbGQsIG9wdGlvbnMsIGxldmVsICsgMSk7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkNsb3NlVGFnO1xuICAgICAgICB0aGlzLnN0cmVhbS53cml0ZSh0aGlzLmluZGVudChub2RlLCBvcHRpb25zLCBsZXZlbCkgKyAnPC8nICsgbm9kZS5uYW1lICsgJz4nKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RyZWFtLndyaXRlKHRoaXMuZW5kbGluZShub2RlLCBvcHRpb25zLCBsZXZlbCkpO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLk5vbmU7XG4gICAgICByZXR1cm4gdGhpcy5jbG9zZU5vZGUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgIH07XG5cbiAgICBYTUxTdHJlYW1Xcml0ZXIucHJvdG90eXBlLnByb2Nlc3NpbmdJbnN0cnVjdGlvbiA9IGZ1bmN0aW9uKG5vZGUsIG9wdGlvbnMsIGxldmVsKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdHJlYW0ud3JpdGUoWE1MU3RyZWFtV3JpdGVyLl9fc3VwZXJfXy5wcm9jZXNzaW5nSW5zdHJ1Y3Rpb24uY2FsbCh0aGlzLCBub2RlLCBvcHRpb25zLCBsZXZlbCkpO1xuICAgIH07XG5cbiAgICBYTUxTdHJlYW1Xcml0ZXIucHJvdG90eXBlLnJhdyA9IGZ1bmN0aW9uKG5vZGUsIG9wdGlvbnMsIGxldmVsKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdHJlYW0ud3JpdGUoWE1MU3RyZWFtV3JpdGVyLl9fc3VwZXJfXy5yYXcuY2FsbCh0aGlzLCBub2RlLCBvcHRpb25zLCBsZXZlbCkpO1xuICAgIH07XG5cbiAgICBYTUxTdHJlYW1Xcml0ZXIucHJvdG90eXBlLnRleHQgPSBmdW5jdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RyZWFtLndyaXRlKFhNTFN0cmVhbVdyaXRlci5fX3N1cGVyX18udGV4dC5jYWxsKHRoaXMsIG5vZGUsIG9wdGlvbnMsIGxldmVsKSk7XG4gICAgfTtcblxuICAgIFhNTFN0cmVhbVdyaXRlci5wcm90b3R5cGUuZHRkQXR0TGlzdCA9IGZ1bmN0aW9uKG5vZGUsIG9wdGlvbnMsIGxldmVsKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdHJlYW0ud3JpdGUoWE1MU3RyZWFtV3JpdGVyLl9fc3VwZXJfXy5kdGRBdHRMaXN0LmNhbGwodGhpcywgbm9kZSwgb3B0aW9ucywgbGV2ZWwpKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyZWFtV3JpdGVyLnByb3RvdHlwZS5kdGRFbGVtZW50ID0gZnVuY3Rpb24obm9kZSwgb3B0aW9ucywgbGV2ZWwpIHtcbiAgICAgIHJldHVybiB0aGlzLnN0cmVhbS53cml0ZShYTUxTdHJlYW1Xcml0ZXIuX19zdXBlcl9fLmR0ZEVsZW1lbnQuY2FsbCh0aGlzLCBub2RlLCBvcHRpb25zLCBsZXZlbCkpO1xuICAgIH07XG5cbiAgICBYTUxTdHJlYW1Xcml0ZXIucHJvdG90eXBlLmR0ZEVudGl0eSA9IGZ1bmN0aW9uKG5vZGUsIG9wdGlvbnMsIGxldmVsKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdHJlYW0ud3JpdGUoWE1MU3RyZWFtV3JpdGVyLl9fc3VwZXJfXy5kdGRFbnRpdHkuY2FsbCh0aGlzLCBub2RlLCBvcHRpb25zLCBsZXZlbCkpO1xuICAgIH07XG5cbiAgICBYTUxTdHJlYW1Xcml0ZXIucHJvdG90eXBlLmR0ZE5vdGF0aW9uID0gZnVuY3Rpb24obm9kZSwgb3B0aW9ucywgbGV2ZWwpIHtcbiAgICAgIHJldHVybiB0aGlzLnN0cmVhbS53cml0ZShYTUxTdHJlYW1Xcml0ZXIuX19zdXBlcl9fLmR0ZE5vdGF0aW9uLmNhbGwodGhpcywgbm9kZSwgb3B0aW9ucywgbGV2ZWwpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFhNTFN0cmVhbVdyaXRlcjtcblxuICB9KShYTUxXcml0ZXJCYXNlKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBYTUxTdHJpbmdXcml0ZXIsIFhNTFdyaXRlckJhc2UsXG4gICAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICBYTUxXcml0ZXJCYXNlID0gcmVxdWlyZSgnLi9YTUxXcml0ZXJCYXNlJyk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBYTUxTdHJpbmdXcml0ZXIgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChYTUxTdHJpbmdXcml0ZXIsIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gWE1MU3RyaW5nV3JpdGVyKG9wdGlvbnMpIHtcbiAgICAgIFhNTFN0cmluZ1dyaXRlci5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBYTUxTdHJpbmdXcml0ZXIucHJvdG90eXBlLmRvY3VtZW50ID0gZnVuY3Rpb24oZG9jLCBvcHRpb25zKSB7XG4gICAgICB2YXIgY2hpbGQsIGksIGxlbiwgciwgcmVmO1xuICAgICAgb3B0aW9ucyA9IHRoaXMuZmlsdGVyT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgIHIgPSAnJztcbiAgICAgIHJlZiA9IGRvYy5jaGlsZHJlbjtcbiAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBjaGlsZCA9IHJlZltpXTtcbiAgICAgICAgciArPSB0aGlzLndyaXRlQ2hpbGROb2RlKGNoaWxkLCBvcHRpb25zLCAwKTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLnByZXR0eSAmJiByLnNsaWNlKC1vcHRpb25zLm5ld2xpbmUubGVuZ3RoKSA9PT0gb3B0aW9ucy5uZXdsaW5lKSB7XG4gICAgICAgIHIgPSByLnNsaWNlKDAsIC1vcHRpb25zLm5ld2xpbmUubGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByO1xuICAgIH07XG5cbiAgICByZXR1cm4gWE1MU3RyaW5nV3JpdGVyO1xuXG4gIH0pKFhNTFdyaXRlckJhc2UpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIFhNTFN0cmluZ2lmaWVyLFxuICAgIGJpbmQgPSBmdW5jdGlvbihmbiwgbWUpeyByZXR1cm4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9OyB9LFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTFN0cmluZ2lmaWVyID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIFhNTFN0cmluZ2lmaWVyKG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuYXNzZXJ0TGVnYWxOYW1lID0gYmluZCh0aGlzLmFzc2VydExlZ2FsTmFtZSwgdGhpcyk7XG4gICAgICB0aGlzLmFzc2VydExlZ2FsQ2hhciA9IGJpbmQodGhpcy5hc3NlcnRMZWdhbENoYXIsIHRoaXMpO1xuICAgICAgdmFyIGtleSwgcmVmLCB2YWx1ZTtcbiAgICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgaWYgKCF0aGlzLm9wdGlvbnMudmVyc2lvbikge1xuICAgICAgICB0aGlzLm9wdGlvbnMudmVyc2lvbiA9ICcxLjAnO1xuICAgICAgfVxuICAgICAgcmVmID0gb3B0aW9ucy5zdHJpbmdpZnkgfHwge307XG4gICAgICBmb3IgKGtleSBpbiByZWYpIHtcbiAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwocmVmLCBrZXkpKSBjb250aW51ZTtcbiAgICAgICAgdmFsdWUgPSByZWZba2V5XTtcbiAgICAgICAgdGhpc1trZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLm5hbWUgPSBmdW5jdGlvbih2YWwpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubm9WYWxpZGF0aW9uKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5hc3NlcnRMZWdhbE5hbWUoJycgKyB2YWwgfHwgJycpO1xuICAgIH07XG5cbiAgICBYTUxTdHJpbmdpZmllci5wcm90b3R5cGUudGV4dCA9IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5ub1ZhbGlkYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmFzc2VydExlZ2FsQ2hhcih0aGlzLnRleHRFc2NhcGUoJycgKyB2YWwgfHwgJycpKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmNkYXRhID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm5vVmFsaWRhdGlvbikge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfVxuICAgICAgdmFsID0gJycgKyB2YWwgfHwgJyc7XG4gICAgICB2YWwgPSB2YWwucmVwbGFjZSgnXV0+JywgJ11dXV0+PCFbQ0RBVEFbPicpO1xuICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0TGVnYWxDaGFyKHZhbCk7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS5jb21tZW50ID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm5vVmFsaWRhdGlvbikge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfVxuICAgICAgdmFsID0gJycgKyB2YWwgfHwgJyc7XG4gICAgICBpZiAodmFsLm1hdGNoKC8tLS8pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbW1lbnQgdGV4dCBjYW5ub3QgY29udGFpbiBkb3VibGUtaHlwZW46IFwiICsgdmFsKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmFzc2VydExlZ2FsQ2hhcih2YWwpO1xuICAgIH07XG5cbiAgICBYTUxTdHJpbmdpZmllci5wcm90b3R5cGUucmF3ID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm5vVmFsaWRhdGlvbikge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfVxuICAgICAgcmV0dXJuICcnICsgdmFsIHx8ICcnO1xuICAgIH07XG5cbiAgICBYTUxTdHJpbmdpZmllci5wcm90b3R5cGUuYXR0VmFsdWUgPSBmdW5jdGlvbih2YWwpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubm9WYWxpZGF0aW9uKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5hc3NlcnRMZWdhbENoYXIodGhpcy5hdHRFc2NhcGUodmFsID0gJycgKyB2YWwgfHwgJycpKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmluc1RhcmdldCA9IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5ub1ZhbGlkYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmFzc2VydExlZ2FsQ2hhcignJyArIHZhbCB8fCAnJyk7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS5pbnNWYWx1ZSA9IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5ub1ZhbGlkYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH1cbiAgICAgIHZhbCA9ICcnICsgdmFsIHx8ICcnO1xuICAgICAgaWYgKHZhbC5tYXRjaCgvXFw/Pi8pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiB2YWx1ZTogXCIgKyB2YWwpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0TGVnYWxDaGFyKHZhbCk7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS54bWxWZXJzaW9uID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm5vVmFsaWRhdGlvbikge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfVxuICAgICAgdmFsID0gJycgKyB2YWwgfHwgJyc7XG4gICAgICBpZiAoIXZhbC5tYXRjaCgvMVxcLlswLTldKy8pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdmVyc2lvbiBudW1iZXI6IFwiICsgdmFsKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWw7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS54bWxFbmNvZGluZyA9IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5ub1ZhbGlkYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH1cbiAgICAgIHZhbCA9ICcnICsgdmFsIHx8ICcnO1xuICAgICAgaWYgKCF2YWwubWF0Y2goL15bQS1aYS16XSg/OltBLVphLXowLTkuXy1dKSokLykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBlbmNvZGluZzogXCIgKyB2YWwpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0TGVnYWxDaGFyKHZhbCk7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS54bWxTdGFuZGFsb25lID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm5vVmFsaWRhdGlvbikge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfVxuICAgICAgaWYgKHZhbCkge1xuICAgICAgICByZXR1cm4gXCJ5ZXNcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBcIm5vXCI7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS5kdGRQdWJJRCA9IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5ub1ZhbGlkYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmFzc2VydExlZ2FsQ2hhcignJyArIHZhbCB8fCAnJyk7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS5kdGRTeXNJRCA9IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5ub1ZhbGlkYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmFzc2VydExlZ2FsQ2hhcignJyArIHZhbCB8fCAnJyk7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS5kdGRFbGVtZW50VmFsdWUgPSBmdW5jdGlvbih2YWwpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubm9WYWxpZGF0aW9uKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5hc3NlcnRMZWdhbENoYXIoJycgKyB2YWwgfHwgJycpO1xuICAgIH07XG5cbiAgICBYTUxTdHJpbmdpZmllci5wcm90b3R5cGUuZHRkQXR0VHlwZSA9IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5ub1ZhbGlkYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmFzc2VydExlZ2FsQ2hhcignJyArIHZhbCB8fCAnJyk7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS5kdGRBdHREZWZhdWx0ID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm5vVmFsaWRhdGlvbikge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0TGVnYWxDaGFyKCcnICsgdmFsIHx8ICcnKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmR0ZEVudGl0eVZhbHVlID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm5vVmFsaWRhdGlvbikge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0TGVnYWxDaGFyKCcnICsgdmFsIHx8ICcnKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmR0ZE5EYXRhID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm5vVmFsaWRhdGlvbikge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0TGVnYWxDaGFyKCcnICsgdmFsIHx8ICcnKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmNvbnZlcnRBdHRLZXkgPSAnQCc7XG5cbiAgICBYTUxTdHJpbmdpZmllci5wcm90b3R5cGUuY29udmVydFBJS2V5ID0gJz8nO1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmNvbnZlcnRUZXh0S2V5ID0gJyN0ZXh0JztcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS5jb252ZXJ0Q0RhdGFLZXkgPSAnI2NkYXRhJztcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS5jb252ZXJ0Q29tbWVudEtleSA9ICcjY29tbWVudCc7XG5cbiAgICBYTUxTdHJpbmdpZmllci5wcm90b3R5cGUuY29udmVydFJhd0tleSA9ICcjcmF3JztcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS5hc3NlcnRMZWdhbENoYXIgPSBmdW5jdGlvbihzdHIpIHtcbiAgICAgIHZhciByZWdleCwgcmVzO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5ub1ZhbGlkYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICAgIH1cbiAgICAgIHJlZ2V4ID0gJyc7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLnZlcnNpb24gPT09ICcxLjAnKSB7XG4gICAgICAgIHJlZ2V4ID0gL1tcXDAtXFx4MDhcXHgwQlxcZlxceDBFLVxceDFGXFx1RkZGRVxcdUZGRkZdfFtcXHVEODAwLVxcdURCRkZdKD8hW1xcdURDMDAtXFx1REZGRl0pfCg/OlteXFx1RDgwMC1cXHVEQkZGXXxeKVtcXHVEQzAwLVxcdURGRkZdLztcbiAgICAgICAgaWYgKHJlcyA9IHN0ci5tYXRjaChyZWdleCkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNoYXJhY3RlciBpbiBzdHJpbmc6IFwiICsgc3RyICsgXCIgYXQgaW5kZXggXCIgKyByZXMuaW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy52ZXJzaW9uID09PSAnMS4xJykge1xuICAgICAgICByZWdleCA9IC9bXFwwXFx1RkZGRVxcdUZGRkZdfFtcXHVEODAwLVxcdURCRkZdKD8hW1xcdURDMDAtXFx1REZGRl0pfCg/OlteXFx1RDgwMC1cXHVEQkZGXXxeKVtcXHVEQzAwLVxcdURGRkZdLztcbiAgICAgICAgaWYgKHJlcyA9IHN0ci5tYXRjaChyZWdleCkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNoYXJhY3RlciBpbiBzdHJpbmc6IFwiICsgc3RyICsgXCIgYXQgaW5kZXggXCIgKyByZXMuaW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gc3RyO1xuICAgIH07XG5cbiAgICBYTUxTdHJpbmdpZmllci5wcm90b3R5cGUuYXNzZXJ0TGVnYWxOYW1lID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgICB2YXIgcmVnZXg7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm5vVmFsaWRhdGlvbikge1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgICAgfVxuICAgICAgdGhpcy5hc3NlcnRMZWdhbENoYXIoc3RyKTtcbiAgICAgIHJlZ2V4ID0gL14oWzpBLVpfYS16XFx4QzAtXFx4RDZcXHhEOC1cXHhGNlxceEY4LVxcdTAyRkZcXHUwMzcwLVxcdTAzN0RcXHUwMzdGLVxcdTFGRkZcXHUyMDBDXFx1MjAwRFxcdTIwNzAtXFx1MjE4RlxcdTJDMDAtXFx1MkZFRlxcdTMwMDEtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZGRF18W1xcdUQ4MDAtXFx1REI3Rl1bXFx1REMwMC1cXHVERkZGXSkoW1xceDJEXFwuMC06QS1aX2EtelxceEI3XFx4QzAtXFx4RDZcXHhEOC1cXHhGNlxceEY4LVxcdTAzN0RcXHUwMzdGLVxcdTFGRkZcXHUyMDBDXFx1MjAwRFxcdTIwM0ZcXHUyMDQwXFx1MjA3MC1cXHUyMThGXFx1MkMwMC1cXHUyRkVGXFx1MzAwMS1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkZEXXxbXFx1RDgwMC1cXHVEQjdGXVtcXHVEQzAwLVxcdURGRkZdKSokLztcbiAgICAgIGlmICghc3RyLm1hdGNoKHJlZ2V4KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNoYXJhY3RlciBpbiBuYW1lXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLnRleHRFc2NhcGUgPSBmdW5jdGlvbihzdHIpIHtcbiAgICAgIHZhciBhbXByZWdleDtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubm9WYWxpZGF0aW9uKSB7XG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgICB9XG4gICAgICBhbXByZWdleCA9IHRoaXMub3B0aW9ucy5ub0RvdWJsZUVuY29kaW5nID8gLyg/ISZcXFMrOykmL2cgOiAvJi9nO1xuICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKGFtcHJlZ2V4LCAnJmFtcDsnKS5yZXBsYWNlKC88L2csICcmbHQ7JykucmVwbGFjZSgvPi9nLCAnJmd0OycpLnJlcGxhY2UoL1xcci9nLCAnJiN4RDsnKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmF0dEVzY2FwZSA9IGZ1bmN0aW9uKHN0cikge1xuICAgICAgdmFyIGFtcHJlZ2V4O1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5ub1ZhbGlkYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICAgIH1cbiAgICAgIGFtcHJlZ2V4ID0gdGhpcy5vcHRpb25zLm5vRG91YmxlRW5jb2RpbmcgPyAvKD8hJlxcUys7KSYvZyA6IC8mL2c7XG4gICAgICByZXR1cm4gc3RyLnJlcGxhY2UoYW1wcmVnZXgsICcmYW1wOycpLnJlcGxhY2UoLzwvZywgJyZsdDsnKS5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JykucmVwbGFjZSgvXFx0L2csICcmI3g5OycpLnJlcGxhY2UoL1xcbi9nLCAnJiN4QTsnKS5yZXBsYWNlKC9cXHIvZywgJyYjeEQ7Jyk7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxTdHJpbmdpZmllcjtcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIE5vZGVUeXBlLCBYTUxDaGFyYWN0ZXJEYXRhLCBYTUxUZXh0LFxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgTm9kZVR5cGUgPSByZXF1aXJlKCcuL05vZGVUeXBlJyk7XG5cbiAgWE1MQ2hhcmFjdGVyRGF0YSA9IHJlcXVpcmUoJy4vWE1MQ2hhcmFjdGVyRGF0YScpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MVGV4dCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKFhNTFRleHQsIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gWE1MVGV4dChwYXJlbnQsIHRleHQpIHtcbiAgICAgIFhNTFRleHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgcGFyZW50KTtcbiAgICAgIGlmICh0ZXh0ID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBlbGVtZW50IHRleHQuIFwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgICB9XG4gICAgICB0aGlzLm5hbWUgPSBcIiN0ZXh0XCI7XG4gICAgICB0aGlzLnR5cGUgPSBOb2RlVHlwZS5UZXh0O1xuICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuc3RyaW5naWZ5LnRleHQodGV4dCk7XG4gICAgfVxuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTFRleHQucHJvdG90eXBlLCAnaXNFbGVtZW50Q29udGVudFdoaXRlc3BhY2UnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MVGV4dC5wcm90b3R5cGUsICd3aG9sZVRleHQnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbmV4dCwgcHJldiwgc3RyO1xuICAgICAgICBzdHIgPSAnJztcbiAgICAgICAgcHJldiA9IHRoaXMucHJldmlvdXNTaWJsaW5nO1xuICAgICAgICB3aGlsZSAocHJldikge1xuICAgICAgICAgIHN0ciA9IHByZXYuZGF0YSArIHN0cjtcbiAgICAgICAgICBwcmV2ID0gcHJldi5wcmV2aW91c1NpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgICAgc3RyICs9IHRoaXMuZGF0YTtcbiAgICAgICAgbmV4dCA9IHRoaXMubmV4dFNpYmxpbmc7XG4gICAgICAgIHdoaWxlIChuZXh0KSB7XG4gICAgICAgICAgc3RyID0gc3RyICsgbmV4dC5kYXRhO1xuICAgICAgICAgIG5leHQgPSBuZXh0Lm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBYTUxUZXh0LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIE9iamVjdC5jcmVhdGUodGhpcyk7XG4gICAgfTtcblxuICAgIFhNTFRleHQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy53cml0ZXIudGV4dCh0aGlzLCB0aGlzLm9wdGlvbnMud3JpdGVyLmZpbHRlck9wdGlvbnMob3B0aW9ucykpO1xuICAgIH07XG5cbiAgICBYTUxUZXh0LnByb3RvdHlwZS5zcGxpdFRleHQgPSBmdW5jdGlvbihvZmZzZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MVGV4dC5wcm90b3R5cGUucmVwbGFjZVdob2xlVGV4dCA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFhNTFRleHQ7XG5cbiAgfSkoWE1MQ2hhcmFjdGVyRGF0YSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgTm9kZVR5cGUsIFdyaXRlclN0YXRlLCBYTUxDRGF0YSwgWE1MQ29tbWVudCwgWE1MRFREQXR0TGlzdCwgWE1MRFRERWxlbWVudCwgWE1MRFRERW50aXR5LCBYTUxEVEROb3RhdGlvbiwgWE1MRGVjbGFyYXRpb24sIFhNTERvY1R5cGUsIFhNTER1bW15LCBYTUxFbGVtZW50LCBYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24sIFhNTFJhdywgWE1MVGV4dCwgWE1MV3JpdGVyQmFzZSwgYXNzaWduLFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICBhc3NpZ24gPSByZXF1aXJlKCcuL1V0aWxpdHknKS5hc3NpZ247XG5cbiAgTm9kZVR5cGUgPSByZXF1aXJlKCcuL05vZGVUeXBlJyk7XG5cbiAgWE1MRGVjbGFyYXRpb24gPSByZXF1aXJlKCcuL1hNTERlY2xhcmF0aW9uJyk7XG5cbiAgWE1MRG9jVHlwZSA9IHJlcXVpcmUoJy4vWE1MRG9jVHlwZScpO1xuXG4gIFhNTENEYXRhID0gcmVxdWlyZSgnLi9YTUxDRGF0YScpO1xuXG4gIFhNTENvbW1lbnQgPSByZXF1aXJlKCcuL1hNTENvbW1lbnQnKTtcblxuICBYTUxFbGVtZW50ID0gcmVxdWlyZSgnLi9YTUxFbGVtZW50Jyk7XG5cbiAgWE1MUmF3ID0gcmVxdWlyZSgnLi9YTUxSYXcnKTtcblxuICBYTUxUZXh0ID0gcmVxdWlyZSgnLi9YTUxUZXh0Jyk7XG5cbiAgWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uID0gcmVxdWlyZSgnLi9YTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24nKTtcblxuICBYTUxEdW1teSA9IHJlcXVpcmUoJy4vWE1MRHVtbXknKTtcblxuICBYTUxEVERBdHRMaXN0ID0gcmVxdWlyZSgnLi9YTUxEVERBdHRMaXN0Jyk7XG5cbiAgWE1MRFRERWxlbWVudCA9IHJlcXVpcmUoJy4vWE1MRFRERWxlbWVudCcpO1xuXG4gIFhNTERUREVudGl0eSA9IHJlcXVpcmUoJy4vWE1MRFRERW50aXR5Jyk7XG5cbiAgWE1MRFRETm90YXRpb24gPSByZXF1aXJlKCcuL1hNTERURE5vdGF0aW9uJyk7XG5cbiAgV3JpdGVyU3RhdGUgPSByZXF1aXJlKCcuL1dyaXRlclN0YXRlJyk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBYTUxXcml0ZXJCYXNlID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIFhNTFdyaXRlckJhc2Uob3B0aW9ucykge1xuICAgICAgdmFyIGtleSwgcmVmLCB2YWx1ZTtcbiAgICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgcmVmID0gb3B0aW9ucy53cml0ZXIgfHwge307XG4gICAgICBmb3IgKGtleSBpbiByZWYpIHtcbiAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwocmVmLCBrZXkpKSBjb250aW51ZTtcbiAgICAgICAgdmFsdWUgPSByZWZba2V5XTtcbiAgICAgICAgdGhpc1tcIl9cIiArIGtleV0gPSB0aGlzW2tleV07XG4gICAgICAgIHRoaXNba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIFhNTFdyaXRlckJhc2UucHJvdG90eXBlLmZpbHRlck9wdGlvbnMgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICB2YXIgZmlsdGVyZWRPcHRpb25zLCByZWYsIHJlZjEsIHJlZjIsIHJlZjMsIHJlZjQsIHJlZjUsIHJlZjY7XG4gICAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuICAgICAgb3B0aW9ucyA9IGFzc2lnbih7fSwgdGhpcy5vcHRpb25zLCBvcHRpb25zKTtcbiAgICAgIGZpbHRlcmVkT3B0aW9ucyA9IHtcbiAgICAgICAgd3JpdGVyOiB0aGlzXG4gICAgICB9O1xuICAgICAgZmlsdGVyZWRPcHRpb25zLnByZXR0eSA9IG9wdGlvbnMucHJldHR5IHx8IGZhbHNlO1xuICAgICAgZmlsdGVyZWRPcHRpb25zLmFsbG93RW1wdHkgPSBvcHRpb25zLmFsbG93RW1wdHkgfHwgZmFsc2U7XG4gICAgICBmaWx0ZXJlZE9wdGlvbnMuaW5kZW50ID0gKHJlZiA9IG9wdGlvbnMuaW5kZW50KSAhPSBudWxsID8gcmVmIDogJyAgJztcbiAgICAgIGZpbHRlcmVkT3B0aW9ucy5uZXdsaW5lID0gKHJlZjEgPSBvcHRpb25zLm5ld2xpbmUpICE9IG51bGwgPyByZWYxIDogJ1xcbic7XG4gICAgICBmaWx0ZXJlZE9wdGlvbnMub2Zmc2V0ID0gKHJlZjIgPSBvcHRpb25zLm9mZnNldCkgIT0gbnVsbCA/IHJlZjIgOiAwO1xuICAgICAgZmlsdGVyZWRPcHRpb25zLmRvbnRQcmV0dHlUZXh0Tm9kZXMgPSAocmVmMyA9IChyZWY0ID0gb3B0aW9ucy5kb250UHJldHR5VGV4dE5vZGVzKSAhPSBudWxsID8gcmVmNCA6IG9wdGlvbnMuZG9udHByZXR0eXRleHRub2RlcykgIT0gbnVsbCA/IHJlZjMgOiAwO1xuICAgICAgZmlsdGVyZWRPcHRpb25zLnNwYWNlQmVmb3JlU2xhc2ggPSAocmVmNSA9IChyZWY2ID0gb3B0aW9ucy5zcGFjZUJlZm9yZVNsYXNoKSAhPSBudWxsID8gcmVmNiA6IG9wdGlvbnMuc3BhY2ViZWZvcmVzbGFzaCkgIT0gbnVsbCA/IHJlZjUgOiAnJztcbiAgICAgIGlmIChmaWx0ZXJlZE9wdGlvbnMuc3BhY2VCZWZvcmVTbGFzaCA9PT0gdHJ1ZSkge1xuICAgICAgICBmaWx0ZXJlZE9wdGlvbnMuc3BhY2VCZWZvcmVTbGFzaCA9ICcgJztcbiAgICAgIH1cbiAgICAgIGZpbHRlcmVkT3B0aW9ucy5zdXBwcmVzc1ByZXR0eUNvdW50ID0gMDtcbiAgICAgIGZpbHRlcmVkT3B0aW9ucy51c2VyID0ge307XG4gICAgICBmaWx0ZXJlZE9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5Ob25lO1xuICAgICAgcmV0dXJuIGZpbHRlcmVkT3B0aW9ucztcbiAgICB9O1xuXG4gICAgWE1MV3JpdGVyQmFzZS5wcm90b3R5cGUuaW5kZW50ID0gZnVuY3Rpb24obm9kZSwgb3B0aW9ucywgbGV2ZWwpIHtcbiAgICAgIHZhciBpbmRlbnRMZXZlbDtcbiAgICAgIGlmICghb3B0aW9ucy5wcmV0dHkgfHwgb3B0aW9ucy5zdXBwcmVzc1ByZXR0eUNvdW50KSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5wcmV0dHkpIHtcbiAgICAgICAgaW5kZW50TGV2ZWwgPSAobGV2ZWwgfHwgMCkgKyBvcHRpb25zLm9mZnNldCArIDE7XG4gICAgICAgIGlmIChpbmRlbnRMZXZlbCA+IDApIHtcbiAgICAgICAgICByZXR1cm4gbmV3IEFycmF5KGluZGVudExldmVsKS5qb2luKG9wdGlvbnMuaW5kZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuICcnO1xuICAgIH07XG5cbiAgICBYTUxXcml0ZXJCYXNlLnByb3RvdHlwZS5lbmRsaW5lID0gZnVuY3Rpb24obm9kZSwgb3B0aW9ucywgbGV2ZWwpIHtcbiAgICAgIGlmICghb3B0aW9ucy5wcmV0dHkgfHwgb3B0aW9ucy5zdXBwcmVzc1ByZXR0eUNvdW50KSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLm5ld2xpbmU7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFhNTFdyaXRlckJhc2UucHJvdG90eXBlLmF0dHJpYnV0ZSA9IGZ1bmN0aW9uKGF0dCwgb3B0aW9ucywgbGV2ZWwpIHtcbiAgICAgIHZhciByO1xuICAgICAgdGhpcy5vcGVuQXR0cmlidXRlKGF0dCwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgciA9ICcgJyArIGF0dC5uYW1lICsgJz1cIicgKyBhdHQudmFsdWUgKyAnXCInO1xuICAgICAgdGhpcy5jbG9zZUF0dHJpYnV0ZShhdHQsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIHJldHVybiByO1xuICAgIH07XG5cbiAgICBYTUxXcml0ZXJCYXNlLnByb3RvdHlwZS5jZGF0YSA9IGZ1bmN0aW9uKG5vZGUsIG9wdGlvbnMsIGxldmVsKSB7XG4gICAgICB2YXIgcjtcbiAgICAgIHRoaXMub3Blbk5vZGUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLk9wZW5UYWc7XG4gICAgICByID0gdGhpcy5pbmRlbnQobm9kZSwgb3B0aW9ucywgbGV2ZWwpICsgJzwhW0NEQVRBWyc7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuSW5zaWRlVGFnO1xuICAgICAgciArPSBub2RlLnZhbHVlO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkNsb3NlVGFnO1xuICAgICAgciArPSAnXV0+JyArIHRoaXMuZW5kbGluZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuTm9uZTtcbiAgICAgIHRoaXMuY2xvc2VOb2RlKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIHJldHVybiByO1xuICAgIH07XG5cbiAgICBYTUxXcml0ZXJCYXNlLnByb3RvdHlwZS5jb21tZW50ID0gZnVuY3Rpb24obm9kZSwgb3B0aW9ucywgbGV2ZWwpIHtcbiAgICAgIHZhciByO1xuICAgICAgdGhpcy5vcGVuTm9kZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuT3BlblRhZztcbiAgICAgIHIgPSB0aGlzLmluZGVudChub2RlLCBvcHRpb25zLCBsZXZlbCkgKyAnPCEtLSAnO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkluc2lkZVRhZztcbiAgICAgIHIgKz0gbm9kZS52YWx1ZTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5DbG9zZVRhZztcbiAgICAgIHIgKz0gJyAtLT4nICsgdGhpcy5lbmRsaW5lKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5Ob25lO1xuICAgICAgdGhpcy5jbG9zZU5vZGUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgcmV0dXJuIHI7XG4gICAgfTtcblxuICAgIFhNTFdyaXRlckJhc2UucHJvdG90eXBlLmRlY2xhcmF0aW9uID0gZnVuY3Rpb24obm9kZSwgb3B0aW9ucywgbGV2ZWwpIHtcbiAgICAgIHZhciByO1xuICAgICAgdGhpcy5vcGVuTm9kZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuT3BlblRhZztcbiAgICAgIHIgPSB0aGlzLmluZGVudChub2RlLCBvcHRpb25zLCBsZXZlbCkgKyAnPD94bWwnO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkluc2lkZVRhZztcbiAgICAgIHIgKz0gJyB2ZXJzaW9uPVwiJyArIG5vZGUudmVyc2lvbiArICdcIic7XG4gICAgICBpZiAobm9kZS5lbmNvZGluZyAhPSBudWxsKSB7XG4gICAgICAgIHIgKz0gJyBlbmNvZGluZz1cIicgKyBub2RlLmVuY29kaW5nICsgJ1wiJztcbiAgICAgIH1cbiAgICAgIGlmIChub2RlLnN0YW5kYWxvbmUgIT0gbnVsbCkge1xuICAgICAgICByICs9ICcgc3RhbmRhbG9uZT1cIicgKyBub2RlLnN0YW5kYWxvbmUgKyAnXCInO1xuICAgICAgfVxuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkNsb3NlVGFnO1xuICAgICAgciArPSBvcHRpb25zLnNwYWNlQmVmb3JlU2xhc2ggKyAnPz4nO1xuICAgICAgciArPSB0aGlzLmVuZGxpbmUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLk5vbmU7XG4gICAgICB0aGlzLmNsb3NlTm9kZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICByZXR1cm4gcjtcbiAgICB9O1xuXG4gICAgWE1MV3JpdGVyQmFzZS5wcm90b3R5cGUuZG9jVHlwZSA9IGZ1bmN0aW9uKG5vZGUsIG9wdGlvbnMsIGxldmVsKSB7XG4gICAgICB2YXIgY2hpbGQsIGksIGxlbiwgciwgcmVmO1xuICAgICAgbGV2ZWwgfHwgKGxldmVsID0gMCk7XG4gICAgICB0aGlzLm9wZW5Ob2RlKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5PcGVuVGFnO1xuICAgICAgciA9IHRoaXMuaW5kZW50KG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIHIgKz0gJzwhRE9DVFlQRSAnICsgbm9kZS5yb290KCkubmFtZTtcbiAgICAgIGlmIChub2RlLnB1YklEICYmIG5vZGUuc3lzSUQpIHtcbiAgICAgICAgciArPSAnIFBVQkxJQyBcIicgKyBub2RlLnB1YklEICsgJ1wiIFwiJyArIG5vZGUuc3lzSUQgKyAnXCInO1xuICAgICAgfSBlbHNlIGlmIChub2RlLnN5c0lEKSB7XG4gICAgICAgIHIgKz0gJyBTWVNURU0gXCInICsgbm9kZS5zeXNJRCArICdcIic7XG4gICAgICB9XG4gICAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgIHIgKz0gJyBbJztcbiAgICAgICAgciArPSB0aGlzLmVuZGxpbmUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuSW5zaWRlVGFnO1xuICAgICAgICByZWYgPSBub2RlLmNoaWxkcmVuO1xuICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICBjaGlsZCA9IHJlZltpXTtcbiAgICAgICAgICByICs9IHRoaXMud3JpdGVDaGlsZE5vZGUoY2hpbGQsIG9wdGlvbnMsIGxldmVsICsgMSk7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkNsb3NlVGFnO1xuICAgICAgICByICs9ICddJztcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5DbG9zZVRhZztcbiAgICAgIHIgKz0gb3B0aW9ucy5zcGFjZUJlZm9yZVNsYXNoICsgJz4nO1xuICAgICAgciArPSB0aGlzLmVuZGxpbmUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLk5vbmU7XG4gICAgICB0aGlzLmNsb3NlTm9kZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICByZXR1cm4gcjtcbiAgICB9O1xuXG4gICAgWE1MV3JpdGVyQmFzZS5wcm90b3R5cGUuZWxlbWVudCA9IGZ1bmN0aW9uKG5vZGUsIG9wdGlvbnMsIGxldmVsKSB7XG4gICAgICB2YXIgYXR0LCBjaGlsZCwgY2hpbGROb2RlQ291bnQsIGZpcnN0Q2hpbGROb2RlLCBpLCBqLCBsZW4sIGxlbjEsIG5hbWUsIHByZXR0eVN1cHByZXNzZWQsIHIsIHJlZiwgcmVmMSwgcmVmMjtcbiAgICAgIGxldmVsIHx8IChsZXZlbCA9IDApO1xuICAgICAgcHJldHR5U3VwcHJlc3NlZCA9IGZhbHNlO1xuICAgICAgciA9ICcnO1xuICAgICAgdGhpcy5vcGVuTm9kZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuT3BlblRhZztcbiAgICAgIHIgKz0gdGhpcy5pbmRlbnQobm9kZSwgb3B0aW9ucywgbGV2ZWwpICsgJzwnICsgbm9kZS5uYW1lO1xuICAgICAgcmVmID0gbm9kZS5hdHRyaWJzO1xuICAgICAgZm9yIChuYW1lIGluIHJlZikge1xuICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChyZWYsIG5hbWUpKSBjb250aW51ZTtcbiAgICAgICAgYXR0ID0gcmVmW25hbWVdO1xuICAgICAgICByICs9IHRoaXMuYXR0cmlidXRlKGF0dCwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgfVxuICAgICAgY2hpbGROb2RlQ291bnQgPSBub2RlLmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgIGZpcnN0Q2hpbGROb2RlID0gY2hpbGROb2RlQ291bnQgPT09IDAgPyBudWxsIDogbm9kZS5jaGlsZHJlblswXTtcbiAgICAgIGlmIChjaGlsZE5vZGVDb3VudCA9PT0gMCB8fCBub2RlLmNoaWxkcmVuLmV2ZXJ5KGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgcmV0dXJuIChlLnR5cGUgPT09IE5vZGVUeXBlLlRleHQgfHwgZS50eXBlID09PSBOb2RlVHlwZS5SYXcpICYmIGUudmFsdWUgPT09ICcnO1xuICAgICAgfSkpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMuYWxsb3dFbXB0eSkge1xuICAgICAgICAgIHIgKz0gJz4nO1xuICAgICAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5DbG9zZVRhZztcbiAgICAgICAgICByICs9ICc8LycgKyBub2RlLm5hbWUgKyAnPicgKyB0aGlzLmVuZGxpbmUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5DbG9zZVRhZztcbiAgICAgICAgICByICs9IG9wdGlvbnMuc3BhY2VCZWZvcmVTbGFzaCArICcvPicgKyB0aGlzLmVuZGxpbmUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucHJldHR5ICYmIGNoaWxkTm9kZUNvdW50ID09PSAxICYmIChmaXJzdENoaWxkTm9kZS50eXBlID09PSBOb2RlVHlwZS5UZXh0IHx8IGZpcnN0Q2hpbGROb2RlLnR5cGUgPT09IE5vZGVUeXBlLlJhdykgJiYgKGZpcnN0Q2hpbGROb2RlLnZhbHVlICE9IG51bGwpKSB7XG4gICAgICAgIHIgKz0gJz4nO1xuICAgICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuSW5zaWRlVGFnO1xuICAgICAgICBvcHRpb25zLnN1cHByZXNzUHJldHR5Q291bnQrKztcbiAgICAgICAgcHJldHR5U3VwcHJlc3NlZCA9IHRydWU7XG4gICAgICAgIHIgKz0gdGhpcy53cml0ZUNoaWxkTm9kZShmaXJzdENoaWxkTm9kZSwgb3B0aW9ucywgbGV2ZWwgKyAxKTtcbiAgICAgICAgb3B0aW9ucy5zdXBwcmVzc1ByZXR0eUNvdW50LS07XG4gICAgICAgIHByZXR0eVN1cHByZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkNsb3NlVGFnO1xuICAgICAgICByICs9ICc8LycgKyBub2RlLm5hbWUgKyAnPicgKyB0aGlzLmVuZGxpbmUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKG9wdGlvbnMuZG9udFByZXR0eVRleHROb2Rlcykge1xuICAgICAgICAgIHJlZjEgPSBub2RlLmNoaWxkcmVuO1xuICAgICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZjEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGNoaWxkID0gcmVmMVtpXTtcbiAgICAgICAgICAgIGlmICgoY2hpbGQudHlwZSA9PT0gTm9kZVR5cGUuVGV4dCB8fCBjaGlsZC50eXBlID09PSBOb2RlVHlwZS5SYXcpICYmIChjaGlsZC52YWx1ZSAhPSBudWxsKSkge1xuICAgICAgICAgICAgICBvcHRpb25zLnN1cHByZXNzUHJldHR5Q291bnQrKztcbiAgICAgICAgICAgICAgcHJldHR5U3VwcHJlc3NlZCA9IHRydWU7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByICs9ICc+JyArIHRoaXMuZW5kbGluZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5JbnNpZGVUYWc7XG4gICAgICAgIHJlZjIgPSBub2RlLmNoaWxkcmVuO1xuICAgICAgICBmb3IgKGogPSAwLCBsZW4xID0gcmVmMi5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcbiAgICAgICAgICBjaGlsZCA9IHJlZjJbal07XG4gICAgICAgICAgciArPSB0aGlzLndyaXRlQ2hpbGROb2RlKGNoaWxkLCBvcHRpb25zLCBsZXZlbCArIDEpO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5DbG9zZVRhZztcbiAgICAgICAgciArPSB0aGlzLmluZGVudChub2RlLCBvcHRpb25zLCBsZXZlbCkgKyAnPC8nICsgbm9kZS5uYW1lICsgJz4nO1xuICAgICAgICBpZiAocHJldHR5U3VwcHJlc3NlZCkge1xuICAgICAgICAgIG9wdGlvbnMuc3VwcHJlc3NQcmV0dHlDb3VudC0tO1xuICAgICAgICB9XG4gICAgICAgIHIgKz0gdGhpcy5lbmRsaW5lKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLk5vbmU7XG4gICAgICB9XG4gICAgICB0aGlzLmNsb3NlTm9kZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICByZXR1cm4gcjtcbiAgICB9O1xuXG4gICAgWE1MV3JpdGVyQmFzZS5wcm90b3R5cGUud3JpdGVDaGlsZE5vZGUgPSBmdW5jdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCkge1xuICAgICAgc3dpdGNoIChub2RlLnR5cGUpIHtcbiAgICAgICAgY2FzZSBOb2RlVHlwZS5DRGF0YTpcbiAgICAgICAgICByZXR1cm4gdGhpcy5jZGF0YShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICAgIGNhc2UgTm9kZVR5cGUuQ29tbWVudDpcbiAgICAgICAgICByZXR1cm4gdGhpcy5jb21tZW50KG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgICAgY2FzZSBOb2RlVHlwZS5FbGVtZW50OlxuICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgICBjYXNlIE5vZGVUeXBlLlJhdzpcbiAgICAgICAgICByZXR1cm4gdGhpcy5yYXcobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgICBjYXNlIE5vZGVUeXBlLlRleHQ6XG4gICAgICAgICAgcmV0dXJuIHRoaXMudGV4dChub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICAgIGNhc2UgTm9kZVR5cGUuUHJvY2Vzc2luZ0luc3RydWN0aW9uOlxuICAgICAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NpbmdJbnN0cnVjdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICAgIGNhc2UgTm9kZVR5cGUuRHVtbXk6XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICBjYXNlIE5vZGVUeXBlLkRlY2xhcmF0aW9uOlxuICAgICAgICAgIHJldHVybiB0aGlzLmRlY2xhcmF0aW9uKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgICAgY2FzZSBOb2RlVHlwZS5Eb2NUeXBlOlxuICAgICAgICAgIHJldHVybiB0aGlzLmRvY1R5cGUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgICBjYXNlIE5vZGVUeXBlLkF0dHJpYnV0ZURlY2xhcmF0aW9uOlxuICAgICAgICAgIHJldHVybiB0aGlzLmR0ZEF0dExpc3Qobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgICBjYXNlIE5vZGVUeXBlLkVsZW1lbnREZWNsYXJhdGlvbjpcbiAgICAgICAgICByZXR1cm4gdGhpcy5kdGRFbGVtZW50KG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgICAgY2FzZSBOb2RlVHlwZS5FbnRpdHlEZWNsYXJhdGlvbjpcbiAgICAgICAgICByZXR1cm4gdGhpcy5kdGRFbnRpdHkobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgICBjYXNlIE5vZGVUeXBlLk5vdGF0aW9uRGVjbGFyYXRpb246XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZHRkTm90YXRpb24obm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gWE1MIG5vZGUgdHlwZTogXCIgKyBub2RlLmNvbnN0cnVjdG9yLm5hbWUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBYTUxXcml0ZXJCYXNlLnByb3RvdHlwZS5wcm9jZXNzaW5nSW5zdHJ1Y3Rpb24gPSBmdW5jdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCkge1xuICAgICAgdmFyIHI7XG4gICAgICB0aGlzLm9wZW5Ob2RlKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5PcGVuVGFnO1xuICAgICAgciA9IHRoaXMuaW5kZW50KG5vZGUsIG9wdGlvbnMsIGxldmVsKSArICc8Pyc7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuSW5zaWRlVGFnO1xuICAgICAgciArPSBub2RlLnRhcmdldDtcbiAgICAgIGlmIChub2RlLnZhbHVlKSB7XG4gICAgICAgIHIgKz0gJyAnICsgbm9kZS52YWx1ZTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5DbG9zZVRhZztcbiAgICAgIHIgKz0gb3B0aW9ucy5zcGFjZUJlZm9yZVNsYXNoICsgJz8+JztcbiAgICAgIHIgKz0gdGhpcy5lbmRsaW5lKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5Ob25lO1xuICAgICAgdGhpcy5jbG9zZU5vZGUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgcmV0dXJuIHI7XG4gICAgfTtcblxuICAgIFhNTFdyaXRlckJhc2UucHJvdG90eXBlLnJhdyA9IGZ1bmN0aW9uKG5vZGUsIG9wdGlvbnMsIGxldmVsKSB7XG4gICAgICB2YXIgcjtcbiAgICAgIHRoaXMub3Blbk5vZGUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLk9wZW5UYWc7XG4gICAgICByID0gdGhpcy5pbmRlbnQobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkluc2lkZVRhZztcbiAgICAgIHIgKz0gbm9kZS52YWx1ZTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5DbG9zZVRhZztcbiAgICAgIHIgKz0gdGhpcy5lbmRsaW5lKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5Ob25lO1xuICAgICAgdGhpcy5jbG9zZU5vZGUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgcmV0dXJuIHI7XG4gICAgfTtcblxuICAgIFhNTFdyaXRlckJhc2UucHJvdG90eXBlLnRleHQgPSBmdW5jdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCkge1xuICAgICAgdmFyIHI7XG4gICAgICB0aGlzLm9wZW5Ob2RlKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5PcGVuVGFnO1xuICAgICAgciA9IHRoaXMuaW5kZW50KG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5JbnNpZGVUYWc7XG4gICAgICByICs9IG5vZGUudmFsdWU7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuQ2xvc2VUYWc7XG4gICAgICByICs9IHRoaXMuZW5kbGluZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuTm9uZTtcbiAgICAgIHRoaXMuY2xvc2VOb2RlKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIHJldHVybiByO1xuICAgIH07XG5cbiAgICBYTUxXcml0ZXJCYXNlLnByb3RvdHlwZS5kdGRBdHRMaXN0ID0gZnVuY3Rpb24obm9kZSwgb3B0aW9ucywgbGV2ZWwpIHtcbiAgICAgIHZhciByO1xuICAgICAgdGhpcy5vcGVuTm9kZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuT3BlblRhZztcbiAgICAgIHIgPSB0aGlzLmluZGVudChub2RlLCBvcHRpb25zLCBsZXZlbCkgKyAnPCFBVFRMSVNUJztcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5JbnNpZGVUYWc7XG4gICAgICByICs9ICcgJyArIG5vZGUuZWxlbWVudE5hbWUgKyAnICcgKyBub2RlLmF0dHJpYnV0ZU5hbWUgKyAnICcgKyBub2RlLmF0dHJpYnV0ZVR5cGU7XG4gICAgICBpZiAobm9kZS5kZWZhdWx0VmFsdWVUeXBlICE9PSAnI0RFRkFVTFQnKSB7XG4gICAgICAgIHIgKz0gJyAnICsgbm9kZS5kZWZhdWx0VmFsdWVUeXBlO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGUuZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgIHIgKz0gJyBcIicgKyBub2RlLmRlZmF1bHRWYWx1ZSArICdcIic7XG4gICAgICB9XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuQ2xvc2VUYWc7XG4gICAgICByICs9IG9wdGlvbnMuc3BhY2VCZWZvcmVTbGFzaCArICc+JyArIHRoaXMuZW5kbGluZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuTm9uZTtcbiAgICAgIHRoaXMuY2xvc2VOb2RlKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIHJldHVybiByO1xuICAgIH07XG5cbiAgICBYTUxXcml0ZXJCYXNlLnByb3RvdHlwZS5kdGRFbGVtZW50ID0gZnVuY3Rpb24obm9kZSwgb3B0aW9ucywgbGV2ZWwpIHtcbiAgICAgIHZhciByO1xuICAgICAgdGhpcy5vcGVuTm9kZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuT3BlblRhZztcbiAgICAgIHIgPSB0aGlzLmluZGVudChub2RlLCBvcHRpb25zLCBsZXZlbCkgKyAnPCFFTEVNRU5UJztcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5JbnNpZGVUYWc7XG4gICAgICByICs9ICcgJyArIG5vZGUubmFtZSArICcgJyArIG5vZGUudmFsdWU7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuQ2xvc2VUYWc7XG4gICAgICByICs9IG9wdGlvbnMuc3BhY2VCZWZvcmVTbGFzaCArICc+JyArIHRoaXMuZW5kbGluZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuTm9uZTtcbiAgICAgIHRoaXMuY2xvc2VOb2RlKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIHJldHVybiByO1xuICAgIH07XG5cbiAgICBYTUxXcml0ZXJCYXNlLnByb3RvdHlwZS5kdGRFbnRpdHkgPSBmdW5jdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCkge1xuICAgICAgdmFyIHI7XG4gICAgICB0aGlzLm9wZW5Ob2RlKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5PcGVuVGFnO1xuICAgICAgciA9IHRoaXMuaW5kZW50KG5vZGUsIG9wdGlvbnMsIGxldmVsKSArICc8IUVOVElUWSc7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuSW5zaWRlVGFnO1xuICAgICAgaWYgKG5vZGUucGUpIHtcbiAgICAgICAgciArPSAnICUnO1xuICAgICAgfVxuICAgICAgciArPSAnICcgKyBub2RlLm5hbWU7XG4gICAgICBpZiAobm9kZS52YWx1ZSkge1xuICAgICAgICByICs9ICcgXCInICsgbm9kZS52YWx1ZSArICdcIic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobm9kZS5wdWJJRCAmJiBub2RlLnN5c0lEKSB7XG4gICAgICAgICAgciArPSAnIFBVQkxJQyBcIicgKyBub2RlLnB1YklEICsgJ1wiIFwiJyArIG5vZGUuc3lzSUQgKyAnXCInO1xuICAgICAgICB9IGVsc2UgaWYgKG5vZGUuc3lzSUQpIHtcbiAgICAgICAgICByICs9ICcgU1lTVEVNIFwiJyArIG5vZGUuc3lzSUQgKyAnXCInO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlLm5EYXRhKSB7XG4gICAgICAgICAgciArPSAnIE5EQVRBICcgKyBub2RlLm5EYXRhO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuQ2xvc2VUYWc7XG4gICAgICByICs9IG9wdGlvbnMuc3BhY2VCZWZvcmVTbGFzaCArICc+JyArIHRoaXMuZW5kbGluZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuTm9uZTtcbiAgICAgIHRoaXMuY2xvc2VOb2RlKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIHJldHVybiByO1xuICAgIH07XG5cbiAgICBYTUxXcml0ZXJCYXNlLnByb3RvdHlwZS5kdGROb3RhdGlvbiA9IGZ1bmN0aW9uKG5vZGUsIG9wdGlvbnMsIGxldmVsKSB7XG4gICAgICB2YXIgcjtcbiAgICAgIHRoaXMub3Blbk5vZGUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLk9wZW5UYWc7XG4gICAgICByID0gdGhpcy5pbmRlbnQobm9kZSwgb3B0aW9ucywgbGV2ZWwpICsgJzwhTk9UQVRJT04nO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkluc2lkZVRhZztcbiAgICAgIHIgKz0gJyAnICsgbm9kZS5uYW1lO1xuICAgICAgaWYgKG5vZGUucHViSUQgJiYgbm9kZS5zeXNJRCkge1xuICAgICAgICByICs9ICcgUFVCTElDIFwiJyArIG5vZGUucHViSUQgKyAnXCIgXCInICsgbm9kZS5zeXNJRCArICdcIic7XG4gICAgICB9IGVsc2UgaWYgKG5vZGUucHViSUQpIHtcbiAgICAgICAgciArPSAnIFBVQkxJQyBcIicgKyBub2RlLnB1YklEICsgJ1wiJztcbiAgICAgIH0gZWxzZSBpZiAobm9kZS5zeXNJRCkge1xuICAgICAgICByICs9ICcgU1lTVEVNIFwiJyArIG5vZGUuc3lzSUQgKyAnXCInO1xuICAgICAgfVxuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkNsb3NlVGFnO1xuICAgICAgciArPSBvcHRpb25zLnNwYWNlQmVmb3JlU2xhc2ggKyAnPicgKyB0aGlzLmVuZGxpbmUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLk5vbmU7XG4gICAgICB0aGlzLmNsb3NlTm9kZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICByZXR1cm4gcjtcbiAgICB9O1xuXG4gICAgWE1MV3JpdGVyQmFzZS5wcm90b3R5cGUub3Blbk5vZGUgPSBmdW5jdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCkge307XG5cbiAgICBYTUxXcml0ZXJCYXNlLnByb3RvdHlwZS5jbG9zZU5vZGUgPSBmdW5jdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCkge307XG5cbiAgICBYTUxXcml0ZXJCYXNlLnByb3RvdHlwZS5vcGVuQXR0cmlidXRlID0gZnVuY3Rpb24oYXR0LCBvcHRpb25zLCBsZXZlbCkge307XG5cbiAgICBYTUxXcml0ZXJCYXNlLnByb3RvdHlwZS5jbG9zZUF0dHJpYnV0ZSA9IGZ1bmN0aW9uKGF0dCwgb3B0aW9ucywgbGV2ZWwpIHt9O1xuXG4gICAgcmV0dXJuIFhNTFdyaXRlckJhc2U7XG5cbiAgfSkoKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBOb2RlVHlwZSwgV3JpdGVyU3RhdGUsIFhNTERPTUltcGxlbWVudGF0aW9uLCBYTUxEb2N1bWVudCwgWE1MRG9jdW1lbnRDQiwgWE1MU3RyZWFtV3JpdGVyLCBYTUxTdHJpbmdXcml0ZXIsIGFzc2lnbiwgaXNGdW5jdGlvbiwgcmVmO1xuXG4gIHJlZiA9IHJlcXVpcmUoJy4vVXRpbGl0eScpLCBhc3NpZ24gPSByZWYuYXNzaWduLCBpc0Z1bmN0aW9uID0gcmVmLmlzRnVuY3Rpb247XG5cbiAgWE1MRE9NSW1wbGVtZW50YXRpb24gPSByZXF1aXJlKCcuL1hNTERPTUltcGxlbWVudGF0aW9uJyk7XG5cbiAgWE1MRG9jdW1lbnQgPSByZXF1aXJlKCcuL1hNTERvY3VtZW50Jyk7XG5cbiAgWE1MRG9jdW1lbnRDQiA9IHJlcXVpcmUoJy4vWE1MRG9jdW1lbnRDQicpO1xuXG4gIFhNTFN0cmluZ1dyaXRlciA9IHJlcXVpcmUoJy4vWE1MU3RyaW5nV3JpdGVyJyk7XG5cbiAgWE1MU3RyZWFtV3JpdGVyID0gcmVxdWlyZSgnLi9YTUxTdHJlYW1Xcml0ZXInKTtcblxuICBOb2RlVHlwZSA9IHJlcXVpcmUoJy4vTm9kZVR5cGUnKTtcblxuICBXcml0ZXJTdGF0ZSA9IHJlcXVpcmUoJy4vV3JpdGVyU3RhdGUnKTtcblxuICBtb2R1bGUuZXhwb3J0cy5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB4bWxkZWMsIGRvY3R5cGUsIG9wdGlvbnMpIHtcbiAgICB2YXIgZG9jLCByb290O1xuICAgIGlmIChuYW1lID09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlJvb3QgZWxlbWVudCBuZWVkcyBhIG5hbWUuXCIpO1xuICAgIH1cbiAgICBvcHRpb25zID0gYXNzaWduKHt9LCB4bWxkZWMsIGRvY3R5cGUsIG9wdGlvbnMpO1xuICAgIGRvYyA9IG5ldyBYTUxEb2N1bWVudChvcHRpb25zKTtcbiAgICByb290ID0gZG9jLmVsZW1lbnQobmFtZSk7XG4gICAgaWYgKCFvcHRpb25zLmhlYWRsZXNzKSB7XG4gICAgICBkb2MuZGVjbGFyYXRpb24ob3B0aW9ucyk7XG4gICAgICBpZiAoKG9wdGlvbnMucHViSUQgIT0gbnVsbCkgfHwgKG9wdGlvbnMuc3lzSUQgIT0gbnVsbCkpIHtcbiAgICAgICAgZG9jLmR0ZChvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJvb3Q7XG4gIH07XG5cbiAgbW9kdWxlLmV4cG9ydHMuYmVnaW4gPSBmdW5jdGlvbihvcHRpb25zLCBvbkRhdGEsIG9uRW5kKSB7XG4gICAgdmFyIHJlZjE7XG4gICAgaWYgKGlzRnVuY3Rpb24ob3B0aW9ucykpIHtcbiAgICAgIHJlZjEgPSBbb3B0aW9ucywgb25EYXRhXSwgb25EYXRhID0gcmVmMVswXSwgb25FbmQgPSByZWYxWzFdO1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cbiAgICBpZiAob25EYXRhKSB7XG4gICAgICByZXR1cm4gbmV3IFhNTERvY3VtZW50Q0Iob3B0aW9ucywgb25EYXRhLCBvbkVuZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgWE1MRG9jdW1lbnQob3B0aW9ucyk7XG4gICAgfVxuICB9O1xuXG4gIG1vZHVsZS5leHBvcnRzLnN0cmluZ1dyaXRlciA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IFhNTFN0cmluZ1dyaXRlcihvcHRpb25zKTtcbiAgfTtcblxuICBtb2R1bGUuZXhwb3J0cy5zdHJlYW1Xcml0ZXIgPSBmdW5jdGlvbihzdHJlYW0sIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IFhNTFN0cmVhbVdyaXRlcihzdHJlYW0sIG9wdGlvbnMpO1xuICB9O1xuXG4gIG1vZHVsZS5leHBvcnRzLmltcGxlbWVudGF0aW9uID0gbmV3IFhNTERPTUltcGxlbWVudGF0aW9uKCk7XG5cbiAgbW9kdWxlLmV4cG9ydHMubm9kZVR5cGUgPSBOb2RlVHlwZTtcblxuICBtb2R1bGUuZXhwb3J0cy53cml0ZXJTdGF0ZSA9IFdyaXRlclN0YXRlO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiaW1wb3J0IHtEYW1hZ2VBbmRTb2FrUGVyQWN0b3IsIERhbWFnZUFwcGxpY2F0aW9uRGlhbG9nfSBmcm9tIFwiLi4vYXBwcy9kaWFsb2dzL0RhbWFnZUFwcGxpY2F0aW9uRGlhbG9nXCI7XHJcbmltcG9ydCB7IFNSNSB9IGZyb20gXCIuLi9jb25maWdcIjtcclxuaW1wb3J0IHtTUjVBY3Rvcn0gZnJvbSBcIi4vU1I1QWN0b3JcIjtcclxuaW1wb3J0IERhbWFnZURhdGEgPSBTaGFkb3dydW4uRGFtYWdlRGF0YTtcclxuaW1wb3J0IENoYXJhY3RlckFjdG9yRGF0YSA9IFNoYWRvd3J1bi5DaGFyYWN0ZXJBY3RvckRhdGE7XHJcblxyXG5leHBvcnQgY2xhc3MgRGFtYWdlQXBwbGljYXRpb25GbG93IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJ1bnMgdGhlIGZsb3cgdG8gYXBwbHkgZGFtYWdlIHRvIG11bHRpcGxlIGFjdG9ycyB3aXRoIHVzZXIgaW50ZXJhY3Rpb25cclxuICAgICAqIFRoaXMgd2lsbCBhbHNvIHRha2UgY2FyZSBvZiBjaGFuZ2luZyB0aGUgZGFtYWdlIHR5cGUgaWYgbmVjZXNzYXJ5XHJcbiAgICAgKiBAcGFyYW0gYWN0b3JzIFRoZSBhY3RvcnMgdGhhdCBhcmUgYWZmZWN0ZWRcclxuICAgICAqIEBwYXJhbSBkYW1hZ2UgVGhlIGRhbWFnZSB0aGUgYWN0b3JzIHdpbGwgcmVjZWl2ZVxyXG4gICAgICovXHJcbiAgICBhc3luYyBydW5BcHBseURhbWFnZShhY3RvcnM6IFNSNUFjdG9yW10sIGRhbWFnZSA6IERhbWFnZURhdGEpIHtcclxuIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiUnVuIGFwcGx5IGRhbWFnZVwiKTtcclxuICAgICAgICBjb25zdCBhY3RvckRhbWFnZSA6IERhbWFnZUFuZFNvYWtQZXJBY3RvcltdID0gXHJcbiAgICAgICAgICAgIGFjdG9ycy5tYXAoYWN0b3IgPT4gdGhpcy5nZXREYW1hZ2VBbmRTb2FrRm9yQWN0b3IoYWN0b3IsIGRhbWFnZSkpO1xyXG5cclxuICAgICAgICAvLyBTaG93IHVzZXIgdGhlIGFmZmVjdGVkIGFjdG9ycyBhbmQgdGhlIGRhbWFnZSB2YWx1ZXNcclxuICAgICAgICBjb25zdCBkYW1hZ2VBcHBsaWNhdGlvbkRpYWxvZyA9IGF3YWl0IG5ldyBEYW1hZ2VBcHBsaWNhdGlvbkRpYWxvZyhhY3RvckRhbWFnZSwgZGFtYWdlKTtcclxuICAgICAgICBhd2FpdCBkYW1hZ2VBcHBsaWNhdGlvbkRpYWxvZy5zZWxlY3QoKTtcclxuXHJcbiAgICAgICAgaWYgKGRhbWFnZUFwcGxpY2F0aW9uRGlhbG9nLmNhbmNlbGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkYW1hZ2VBcHBsaWNhdGlvbkRpYWxvZy5zZWxlY3RlZEJ1dHRvbiA9PT0gJ2RhbWFnZScpIHtcclxuICAgICAgICAgICAgYWN0b3JEYW1hZ2UuZm9yRWFjaCgoe2FjdG9yLCBtb2RpZmllZCB9KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5RGFtYWdlVG9BY3RvcihhY3RvciwgbW9kaWZpZWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZGFtYWdlQXBwbGljYXRpb25EaWFsb2cuc2VsZWN0ZWRCdXR0b24gPT09ICd1bm1vZGlmaWVkRGFtYWdlJykge1xyXG4gICAgICAgICAgICBhY3RvckRhbWFnZS5mb3JFYWNoKCh7YWN0b3J9KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5RGFtYWdlVG9BY3RvcihhY3RvciwgZGFtYWdlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXhwZWN0ZWQgYSBkaWFsb2cgc2VsZWN0aW9uLCBidXQgbm9uZSBrbm93biBzZWxlY3Rpb24gd2FzIG1hZGUnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEFwcGx5IGFsbCB0eXBlcyBvZiBkYW1hZ2UgdG8gdGhlIGFjdG9yLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBkYW1hZ2UgVGhlIGRhbWFnZSB0byBhcHBseS4gU3R1biBkYW1hZ2Ugd2lsbCBiZSB0dXJuZWQgdG8gcGh5c2ljYWwgZm9yIGdydW50cy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgYXBwbHlEYW1hZ2VUb0FjdG9yKGFjdG9yIDogU1I1QWN0b3IsIGRhbWFnZTogRGFtYWdlRGF0YSkge1xyXG4gICAgICAgIGlmIChkYW1hZ2UudmFsdWUgPD0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBXZSBjaGFuZ2UgdGhlIGRhbWFnZSB0eXBlIGZvciBncnVudHMgYXQgdGhlICh0aGV5IGRvIG5vdCBoYXZlIHN0dW4pIHRvIGF2b2lkIGNvbmZ1c2luZyB0aGUgdXNlciBpbiB0aGUgZGlhbG9nXHJcbiAgICAgICAgZGFtYWdlID0gdGhpcy5hcHBseURhbWFnZVR5cGVDaGFuZ2VGb3JHcnVudChhY3RvciwgZGFtYWdlKTtcclxuXHJcbiAgICAgICAgLy8gQXBwbHkgZGFtYWdlIGFuZCByZXN1bHRpbmcgb3ZlcmZsb3cgdG8gdGhlIGFjY29yZGluZyB0cmFjay5cclxuICAgICAgICAvLyBUaGUgYW1vdW50IGFuZCB0eXBlIGRhbWFnZSBjYW4gdmFsdWUgaW4gdGhlIHByb2Nlc3MuXHJcbiAgICAgICAgaWYgKGRhbWFnZS50eXBlLnZhbHVlID09PSAnbWF0cml4Jykge1xyXG4gICAgICAgICAgICBkYW1hZ2UgPSBhd2FpdCBhY3Rvci5hZGRNYXRyaXhEYW1hZ2UoZGFtYWdlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkYW1hZ2UudHlwZS52YWx1ZSA9PT0gJ3N0dW4nKSB7XHJcbiAgICAgICAgICAgIGRhbWFnZSA9IGF3YWl0IGFjdG9yLmFkZFN0dW5EYW1hZ2UoZGFtYWdlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkYW1hZ2UudHlwZS52YWx1ZSA9PT0gJ3BoeXNpY2FsJykge1xyXG4gICAgICAgICAgICBhd2FpdCBhY3Rvci5hZGRQaHlzaWNhbERhbWFnZShkYW1hZ2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTk9URTogRm9yIHN0dWZmIGxpa2UgaGVhbGluZyB0aGUgbGFzdCB3b3VuZCBieSBtYWdpYywgaXQgbWlnaHQgYWxzbyBiZSBpbnRlcmVzdGluZyB0byBzdG9yZSBhbmQgZ2l2ZVxyXG4gICAgICAgIC8vICAgICAgIGFuIG92ZXJ2aWV3IG9mIGVhY2ggZGFtYWdlL3dvdW5kIGFwcGxpZWQgdG8gc2VsZWN0IGZyb20uXHJcbiAgICAgICAgLy8gYXdhaXQgdGhpcy51cGRhdGUoeydkYXRhLnRyYWNrJzogdGhpcy5kYXRhLmRhdGEudHJhY2t9KTtcclxuICAgICAgICAvLyBUT0RPOiBIYW5kbGUgY2hhbmdlcyBpbiBhY3RvciBzdGF0dXMgKGRlYXRoIGFuZCBzdWNoKVxyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBnZXREYW1hZ2VBbmRTb2FrRm9yQWN0b3IoYWN0b3IgOiBTUjVBY3RvciwgZGFtYWdlIDogRGFtYWdlRGF0YSkgOiBEYW1hZ2VBbmRTb2FrUGVyQWN0b3Ige1xyXG4gICAgICAgIGNvbnN0IGFjdG9yRGF0YSA9IGFjdG9yLmRhdGEuZGF0YSBhcyBDaGFyYWN0ZXJBY3RvckRhdGE7XHJcbiAgICAgICAgY29uc3QgcGVyY2VwdGlvbiA9IGFjdG9yRGF0YS5pbml0aWF0aXZlLnBlcmNlcHRpb247XHJcbiAgICAgICAgY29uc3QgaW5pdENhdGVnb3J5ICA9IFNSNS5pbml0aWF0aXZlQ2F0ZWdvcmllc1twZXJjZXB0aW9uXTtcclxuICAgICAgICBsZXQgaG90c2ltID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIE5vdCBhbGwgY2hhcmFjdGVycyBoYXZlIGFuIGVxdWlwcGVkIGNvbWxpbmsgLyBkZWNrIC8gcmNjXHJcbiAgICAgICAgaWYgKGFjdG9yRGF0YS5tYXRyaXgpIHtcclxuICAgICAgICAgICAgaG90c2ltID0gYWN0b3JEYXRhLm1hdHJpeC5ob3Rfc2ltO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYWN0b3IsXHJcbiAgICAgICAgICAgIG1vZGlmaWVkOiBkYW1hZ2UsXHJcbiAgICAgICAgICAgIGFybW9yOiBhY3Rvci5nZXRNb2RpZmllZEFybW9yKGRhbWFnZSksXHJcbiAgICAgICAgICAgIHBlcmNlcHRpb246IGluaXRDYXRlZ29yeSxcclxuICAgICAgICAgICAgaG90c2ltOiBob3RzaW0sXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXBwbHlEYW1hZ2VUeXBlQ2hhbmdlRm9yR3J1bnQoYWN0b3IgOiBTUjVBY3RvciwgZGFtYWdlOiBEYW1hZ2VEYXRhKTogRGFtYWdlRGF0YSB7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlZERhbWFnZSA9IGR1cGxpY2F0ZShkYW1hZ2UpO1xyXG4gICAgICAgIGlmICghYWN0b3IuaXNHcnVudCgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVkRGFtYWdlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gR3J1bnRzIGRvIG5vdCBoYXZlIGEgc3R1biB0cmFjayBhbmQgd2lsbCBhbHdheXMgcmVjZWl2ZSBwaHlzaWNhbCBkYW1hZ2UuXHJcbiAgICAgICAgaWYgKGRhbWFnZS50eXBlLnZhbHVlID09PSAnc3R1bicpIHtcclxuICAgICAgICAgICAgdXBkYXRlZERhbWFnZS50eXBlLnZhbHVlID0gJ3BoeXNpY2FsJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB1cGRhdGVkRGFtYWdlO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtTaGFkb3dydW5Sb2xsLCBTaGFkb3dydW5Sb2xsZXJ9IGZyb20gJy4uL3JvbGxzL1NoYWRvd3J1blJvbGxlcic7XHJcbmltcG9ydCB7SGVscGVyc30gZnJvbSAnLi4vaGVscGVycyc7XHJcbmltcG9ydCB7U1I1SXRlbX0gZnJvbSAnLi4vaXRlbS9TUjVJdGVtJztcclxuaW1wb3J0IHtGTEFHUywgU0tJTExfREVGQVVMVF9OQU1FLCBTUiwgU1lTVEVNX05BTUV9IGZyb20gJy4uL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7UGFydHNMaXN0fSBmcm9tICcuLi9wYXJ0cy9QYXJ0c0xpc3QnO1xyXG5pbXBvcnQge0FjdG9yUHJlcEZhY3Rvcnl9IGZyb20gJy4vcHJlcC9BY3RvclByZXBGYWN0b3J5JztcclxuaW1wb3J0IHtTaGFkb3dydW5BY3RvckRpYWxvZ3N9IGZyb20gXCIuLi9hcHBzL2RpYWxvZ3MvU2hhZG93cnVuQWN0b3JEaWFsb2dzXCI7XHJcbmltcG9ydCB7Y3JlYXRlUm9sbENoYXRNZXNzYWdlfSBmcm9tIFwiLi4vY2hhdFwiO1xyXG5pbXBvcnQge1NSNUNvbWJhdH0gZnJvbSBcIi4uL2NvbWJhdC9TUjVDb21iYXRcIjtcclxuaW1wb3J0IHtNb2RpZmllcnN9IGZyb20gXCIuLi9zcjUvTW9kaWZpZXJzXCI7XHJcbmltcG9ydCB7U29ha0Zsb3d9IGZyb20gJy4vU29ha0Zsb3cnO1xyXG5pbXBvcnQge0RlZmF1bHRWYWx1ZXN9IGZyb20gJy4uL2RhdGFUZW1wbGF0ZXMnO1xyXG5pbXBvcnQge1NraWxsRmxvd30gZnJvbSBcIi4vU2tpbGxGbG93XCI7XHJcbmltcG9ydCBBY3RvclJvbGxPcHRpb25zID0gU2hhZG93cnVuLkFjdG9yUm9sbE9wdGlvbnM7XHJcbmltcG9ydCBEZWZlbnNlUm9sbE9wdGlvbnMgPSBTaGFkb3dydW4uRGVmZW5zZVJvbGxPcHRpb25zO1xyXG5pbXBvcnQgU29ha1JvbGxPcHRpb25zID0gU2hhZG93cnVuLlNvYWtSb2xsT3B0aW9ucztcclxuaW1wb3J0IEF0dHJpYnV0ZUZpZWxkID0gU2hhZG93cnVuLkF0dHJpYnV0ZUZpZWxkO1xyXG5pbXBvcnQgU2tpbGxSb2xsT3B0aW9ucyA9IFNoYWRvd3J1bi5Ta2lsbFJvbGxPcHRpb25zO1xyXG5pbXBvcnQgU2tpbGxGaWVsZCA9IFNoYWRvd3J1bi5Ta2lsbEZpZWxkO1xyXG5pbXBvcnQgTW9kTGlzdCA9IFNoYWRvd3J1bi5Nb2RMaXN0O1xyXG5pbXBvcnQgTGltaXRGaWVsZCA9IFNoYWRvd3J1bi5MaW1pdEZpZWxkO1xyXG5pbXBvcnQgU1I1QWN0b3JUeXBlID0gU2hhZG93cnVuLlNSNUFjdG9yVHlwZTtcclxuaW1wb3J0IEVkZ2VBdHRyaWJ1dGVGaWVsZCA9IFNoYWRvd3J1bi5FZGdlQXR0cmlidXRlRmllbGQ7XHJcbmltcG9ydCBWZWhpY2xlQWN0b3JEYXRhID0gU2hhZG93cnVuLlZlaGljbGVBY3RvckRhdGE7XHJcbmltcG9ydCBWZWhpY2xlU3RhdCA9IFNoYWRvd3J1bi5WZWhpY2xlU3RhdDtcclxuaW1wb3J0IEF0dHJpYnV0ZXMgPSBTaGFkb3dydW4uQXR0cmlidXRlcztcclxuaW1wb3J0IExpbWl0cyA9IFNoYWRvd3J1bi5MaW1pdHM7XHJcbmltcG9ydCBEYW1hZ2VEYXRhID0gU2hhZG93cnVuLkRhbWFnZURhdGE7XHJcbmltcG9ydCBUcmFja1R5cGUgPSBTaGFkb3dydW4uVHJhY2tUeXBlO1xyXG5pbXBvcnQgT3ZlcmZsb3dUcmFja1R5cGUgPSBTaGFkb3dydW4uT3ZlcmZsb3dUcmFja1R5cGU7XHJcbmltcG9ydCBTcGVsbERlZmVuc2VPcHRpb25zID0gU2hhZG93cnVuLlNwZWxsRGVmZW5zZU9wdGlvbnM7XHJcbmltcG9ydCBOdW1iZXJPckVtcHR5ID0gU2hhZG93cnVuLk51bWJlck9yRW1wdHk7XHJcbmltcG9ydCBDaGFyYWN0ZXJBY3RvckRhdGEgPSBTaGFkb3dydW4uQ2hhcmFjdGVyQWN0b3JEYXRhO1xyXG5pbXBvcnQgU1I1VmVoaWNsZVR5cGUgPSBTaGFkb3dydW4uU1I1VmVoaWNsZVR5cGU7XHJcbmltcG9ydCBWZWhpY2xlU3RhdHMgPSBTaGFkb3dydW4uVmVoaWNsZVN0YXRzO1xyXG5pbXBvcnQgU1I1Q2hhcmFjdGVyVHlwZSA9IFNoYWRvd3J1bi5TUjVDaGFyYWN0ZXJUeXBlO1xyXG5pbXBvcnQgQWN0b3JBcm1vckRhdGEgPSBTaGFkb3dydW4uQWN0b3JBcm1vckRhdGE7XHJcbmltcG9ydCBDb25kaXRpb25EYXRhID0gU2hhZG93cnVuLkNvbmRpdGlvbkRhdGE7XHJcbmltcG9ydCBTUjVTcGlyaXRUeXBlID0gU2hhZG93cnVuLlNSNVNwaXJpdFR5cGU7XHJcbmltcG9ydCBTUjVTcHJpdGVUeXBlID0gU2hhZG93cnVuLlNSNVNwcml0ZVR5cGU7XHJcbmltcG9ydCBTUjVDcml0dGVyVHlwZSA9IFNoYWRvd3J1bi5TUjVDcml0dGVyVHlwZTtcclxuaW1wb3J0IFNSNUFjdG9yRGF0YSA9IFNoYWRvd3J1bi5TUjVBY3RvckRhdGE7XHJcbmltcG9ydCBTa2lsbHMgPSBTaGFkb3dydW4uU2tpbGxzO1xyXG5pbXBvcnQge1NraWxsUnVsZXN9IGZyb20gXCIuL1NraWxsUnVsZXNcIjtcclxuaW1wb3J0IHsgU29ha1J1bGVzIH0gZnJvbSAnLi9Tb2FrUnVsZXMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNSNUFjdG9yIGV4dGVuZHMgQWN0b3I8U1I1QWN0b3JEYXRhPiB7XHJcbiAgICAvLyBOT1RFOiBPdmVyd3JpdGUgQWN0b3IuZGF0YSBhZGRpdGlvbmFsbHkgdG8gZXh0ZW5kcyBBY3RvcjxUIGFzIFNSNUFjdG9ydHlwZS5EYXRhOiBTUjVBY3RvckRhdGE+IHRvIHN0aWxsIGhhdmVcclxuICAgIC8vICAgICAgIGFjY2VzcyB0byBBY3Rvci5kYXRhLnR5cGUgY2hlY2tzLlxyXG4gICAgZGF0YTogU1I1QWN0b3JUeXBlO1xyXG5cclxuICAgIGdldE92ZXJ3YXRjaFNjb3JlKCkge1xyXG4gICAgICAgIGNvbnN0IG9zID0gdGhpcy5nZXRGbGFnKFNZU1RFTV9OQU1FLCAnb3ZlcndhdGNoU2NvcmUnKTtcclxuICAgICAgICByZXR1cm4gb3MgIT09IHVuZGVmaW5lZCA/IG9zIDogMDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzZXRPdmVyd2F0Y2hTY29yZSh2YWx1ZSkge1xyXG4gICAgICAgIGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlKTtcclxuICAgICAgICBpZiAoIWlzTmFOKG51bSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0RmxhZyhTWVNURU1fTkFNRSwgJ292ZXJ3YXRjaFNjb3JlJywgbnVtKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJlcGFyZURhdGEoKSB7XHJcbiAgICAgICAgc3VwZXIucHJlcGFyZURhdGEoKTtcclxuXHJcbiAgICAgICAgY29uc3QgYWN0b3JEYXRhID0gdGhpcy5kYXRhIGFzIFNSNUFjdG9yVHlwZTtcclxuICAgICAgICBjb25zdCBwcmVwcGVyID0gQWN0b3JQcmVwRmFjdG9yeS5DcmVhdGUoYWN0b3JEYXRhKTtcclxuICAgICAgICBpZiAocHJlcHBlcikge1xyXG4gICAgICAgICAgICBwcmVwcGVyLnByZXBhcmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TW9kaWZpZXIobW9kaWZpZXJOYW1lOiBzdHJpbmcpOiBOdW1iZXJPckVtcHR5IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmRhdGEubW9kaWZpZXJzW21vZGlmaWVyTmFtZV07XHJcbiAgICB9XHJcblxyXG4gICAgZmluZEFjdGl2ZVNraWxsKHNraWxsTmFtZT86IHN0cmluZyk6IFNraWxsRmllbGQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGlmIChza2lsbE5hbWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAvLyBTZWFyY2ggZm9yIGxlZ2FjeSBza2lsbHMgd2l0aCB0aGVpciBuYW1lIGFzIGlkLlxyXG4gICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5kYXRhLmRhdGEuc2tpbGxzLmFjdGl2ZVtza2lsbE5hbWVdO1xyXG4gICAgICAgIGlmIChza2lsbCkgcmV0dXJuIHNraWxsO1xyXG4gICAgICAgIC8vIFNlYXJjaCBmb3IgY3VzdG9tIHNraWxscyB3aXRoIGEgcmFuZG9tIGlkLlxyXG4gICAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKHRoaXMuZGF0YS5kYXRhLnNraWxscy5hY3RpdmUpLmZpbmQoc2tpbGwgPT4gc2tpbGwubmFtZSA9PT0gc2tpbGxOYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBmaW5kQXR0cmlidXRlKGF0dHJpYnV0ZU5hbWU/OiBzdHJpbmcpOiBBdHRyaWJ1dGVGaWVsZCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKGF0dHJpYnV0ZU5hbWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmRhdGEuYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXTtcclxuICAgIH1cclxuXHJcbiAgICBmaW5kVmVoaWNsZVN0YXQoc3RhdE5hbWU/OiBzdHJpbmcpOiBWZWhpY2xlU3RhdCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKHN0YXROYW1lID09PSB1bmRlZmluZWQpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgdmVoaWNsZVN0YXRzID0gdGhpcy5nZXRWZWhpY2xlU3RhdHMoKTtcclxuICAgICAgICBpZiAodmVoaWNsZVN0YXRzKVxyXG4gICAgICAgICAgICByZXR1cm4gdmVoaWNsZVN0YXRzW3N0YXROYW1lXTtcclxuICAgIH1cclxuXHJcbiAgICBmaW5kTGltaXRGcm9tQXR0cmlidXRlKGF0dHJpYnV0ZU5hbWU/OiBzdHJpbmcpOiBMaW1pdEZpZWxkIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAoYXR0cmlidXRlTmFtZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IHRoaXMuZmluZEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lKTtcclxuICAgICAgICBpZiAoIWF0dHJpYnV0ZT8ubGltaXQpIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZExpbWl0KGF0dHJpYnV0ZS5saW1pdCk7XHJcbiAgICB9XHJcblxyXG4gICAgZmluZExpbWl0KGxpbWl0TmFtZT86IHN0cmluZyk6IExpbWl0RmllbGQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGlmICghbGltaXROYW1lKSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuZGF0YS5saW1pdHNbbGltaXROYW1lXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRXb3VuZE1vZGlmaWVyKCk6IG51bWJlciB7XHJcbiAgICAgICAgaWYgKCEoXCJ3b3VuZHNcIiBpbiB0aGlzLmRhdGEuZGF0YSkpIHJldHVybiAwO1xyXG4gICAgICAgIHJldHVybiAtMSAqIHRoaXMuZGF0YS5kYXRhLndvdW5kcy52YWx1ZSB8fCAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBVc2UgZWRnZSBvbiBhY3RvcnMgdGhhdCBoYXZlIGFuIGVkZ2UgYXR0cmlidXRlLlxyXG4gICAgICpcclxuICAgICAqIE5PVEU6IFRoaXMgZG9lc24ndCBvbmx5IGluY2x1ZGUgY2hhcmFjdGVycyBidXQgc3Bpcml0cywgY3JpdHRlcnMgYW5kIG1vcmUuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHVzZUVkZ2UoYnk6IG51bWJlciA9IC0xKSB7XHJcbiAgICAgICAgY29uc3QgZWRnZSA9IHRoaXMuZ2V0RWRnZSgpO1xyXG4gICAgICAgIGlmIChlZGdlICYmIGVkZ2UudmFsdWUgPT09IDApIHJldHVybjtcclxuICAgICAgICAvLyBOT1RFOiBUaGVyZSB1c2VkIHRvIGJlIGEgYnVnIHdoaWNoIGNvdWxkIGxvd2VyIGVkZ2UgdXNhZ2UgYmVsb3cgemVyby4gTGV0J3MgcXVpZXRseSBpZ25vcmUgYW5kIHJlc2V0LiA6KVxyXG4gICAgICAgIGNvbnN0IHVzZXNMZWZ0ID0gZWRnZS51c2VzID4gMCA/IGVkZ2UudXNlcyA6IDA7XHJcbiAgICAgICAgY29uc3QgdXNlcyA9IE1hdGgubWluKGVkZ2UudmFsdWUsIHVzZXNMZWZ0ICsgYnkpO1xyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7J2RhdGEuYXR0cmlidXRlcy5lZGdlLnVzZXMnOiB1c2VzfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RWRnZSgpOiBFZGdlQXR0cmlidXRlRmllbGQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuZGF0YS5hdHRyaWJ1dGVzLmVkZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgaGFzQXJtb3IoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIFwiYXJtb3JcIiBpbiB0aGlzLmRhdGEuZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBcm1vcigpOiBBY3RvckFybW9yRGF0YSB7XHJcbiAgICAgICAgaWYgKFwiYXJtb3JcIiBpbiB0aGlzLmRhdGEuZGF0YSlcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5kYXRhLmFybW9yO1xyXG5cclxuICAgICAgICByZXR1cm4gRGVmYXVsdFZhbHVlcy5hY3RvckFybW9yRGF0YSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldE93bmVkU1I1SXRlbShpdGVtSWQ6IHN0cmluZyk6IFNSNUl0ZW0gfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gKHN1cGVyLmdldE93bmVkSXRlbShpdGVtSWQpIGFzIHVua25vd24pIGFzIFNSNUl0ZW07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TWF0cml4RGV2aWNlKCk6IFNSNUl0ZW0gfCB1bmRlZmluZWQgfCBudWxsIHtcclxuICAgICAgICBpZiAoIShcIm1hdHJpeFwiIGluIHRoaXMuZGF0YS5kYXRhKSkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IG1hdHJpeCA9IHRoaXMuZGF0YS5kYXRhLm1hdHJpeDtcclxuICAgICAgICBpZiAobWF0cml4LmRldmljZSkgcmV0dXJuIHRoaXMuZ2V0T3duZWRTUjVJdGVtKG1hdHJpeC5kZXZpY2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEZ1bGxEZWZlbnNlQXR0cmlidXRlKCk6IEF0dHJpYnV0ZUZpZWxkIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAodGhpcy5pc1ZlaGljbGUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maW5kVmVoaWNsZVN0YXQoJ3BpbG90Jyk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzQ2hhcmFjdGVyKCkpIHtcclxuICAgICAgICAgICAgY29uc3QgY2hhcmFjdGVyID0gdGhpcy5hc0NoYXJhY3RlckRhdGEoKTtcclxuICAgICAgICAgICAgaWYgKGNoYXJhY3Rlcikge1xyXG4gICAgICAgICAgICAgICAgbGV0IGF0dCA9IGNoYXJhY3Rlci5kYXRhLmZ1bGxfZGVmZW5zZV9hdHRyaWJ1dGU7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWF0dCkgYXR0ID0gJ3dpbGxwb3dlcic7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maW5kQXR0cmlidXRlKGF0dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RXF1aXBwZWRXZWFwb25zKCk6IFNSNUl0ZW1bXSB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZSAvLyBUT0RPOiBIb3cgdG8gZGVmaW5lIFNSNUFjdG9yLml0ZW1zIGFzIFNSNUl0ZW1bXT9cclxuICAgICAgICByZXR1cm4gdGhpcy5pdGVtcy5maWx0ZXIoKGl0ZW06IFNSNUl0ZW0pID0+IGl0ZW0uaXNFcXVpcHBlZCgpICYmIGl0ZW0uaXNXZWFwb24oKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UmVjb2lsQ29tcGVuc2F0aW9uKCk6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IHRvdGFsID0gMTsgLy8gYWx3YXlzIGdldCAxXHJcbiAgICAgICAgY29uc3Qgc3RyZW5ndGggPSB0aGlzLmZpbmRBdHRyaWJ1dGUoJ3N0cmVuZ3RoJyk7XHJcbiAgICAgICAgaWYgKHN0cmVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRvdGFsICs9IE1hdGguY2VpbChzdHJlbmd0aC52YWx1ZSAvIDMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdG90YWw7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGV2aWNlUmF0aW5nKCk6IG51bWJlciB7XHJcbiAgICAgICAgaWYgKCEoXCJtYXRyaXhcIiBpbiB0aGlzLmRhdGEuZGF0YSkpIHJldHVybiAwO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmUgLy8gcGFyc2VJbnQgZG9lcyBpbmRlZWQgYWxsb3cgbnVtYmVyIHR5cGVzLlxyXG4gICAgICAgIHJldHVybiBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5tYXRyaXgucmF0aW5nKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBdHRyaWJ1dGVzKCk6IEF0dHJpYnV0ZXMge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuZGF0YS5hdHRyaWJ1dGVzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEF0dHJpYnV0ZShuYW1lOiBzdHJpbmcpOiBBdHRyaWJ1dGVGaWVsZCB7XHJcbiAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IHRoaXMuZ2V0QXR0cmlidXRlcygpO1xyXG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGVzW25hbWVdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldExpbWl0cygpOiBMaW1pdHMge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuZGF0YS5saW1pdHM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TGltaXQobmFtZTogc3RyaW5nKTogTGltaXRGaWVsZCB7XHJcbiAgICAgICAgY29uc3QgbGltaXRzID0gdGhpcy5nZXRMaW1pdHMoKTtcclxuICAgICAgICByZXR1cm4gbGltaXRzW25hbWVdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBSZXR1cm4gYWN0b3IgdHlwZSwgd2hpY2ggY2FuIGJlIGRpZmZlcmVudCBraW5kIG9mIGFjdG9ycyBmcm9tICdjaGFyYWN0ZXInIHRvICd2ZWhpY2xlJy5cclxuICAgICAqICBQbGVhc2UgY2hlY2sgU1I1QWN0b3JUeXBlIGZvciByZWZlcmVuY2UuXHJcbiAgICAgKi9cclxuICAgIGdldFR5cGUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgaXNDaGFyYWN0ZXIoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VHlwZSgpID09PSAnY2hhcmFjdGVyJztcclxuICAgIH1cclxuXHJcbiAgICBpc1NwaXJpdCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRUeXBlKCkgPT09ICdzcGlyaXQnO1xyXG4gICAgfVxyXG5cclxuICAgIGlzU3ByaXRlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFR5cGUoKSA9PT0gJ3Nwcml0ZSc7XHJcbiAgICB9XHJcblxyXG4gICAgaXNWZWhpY2xlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFR5cGUoKSA9PT0gJ3ZlaGljbGUnO1xyXG4gICAgfVxyXG5cclxuICAgIGlzR3J1bnQoKSB7XHJcbiAgICAgICAgaWYgKCEoXCJpc19ucGNcIiBpbiB0aGlzLmRhdGEuZGF0YSkgfHwgIShcIm5wY1wiIGluIHRoaXMuZGF0YS5kYXRhKSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmRhdGEuaXNfbnBjICYmIHRoaXMuZGF0YS5kYXRhLm5wYy5pc19ncnVudDtcclxuICAgIH1cclxuXHJcbiAgICBpc0NyaXR0ZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VHlwZSgpID09PSAnY3JpdHRlcic7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VmVoaWNsZVR5cGVTa2lsbE5hbWUoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAoIShcInZlaGljbGVUeXBlXCIgaW4gdGhpcy5kYXRhLmRhdGEpKSByZXR1cm47XHJcblxyXG4gICAgICAgIHN3aXRjaCAodGhpcy5kYXRhLmRhdGEudmVoaWNsZVR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnYWlyJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAncGlsb3RfYWlyY3JhZnQnO1xyXG4gICAgICAgICAgICBjYXNlICdncm91bmQnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdwaWxvdF9ncm91bmRfY3JhZnQnO1xyXG4gICAgICAgICAgICBjYXNlICd3YXRlcic6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3BpbG90X3dhdGVyX2NyYWZ0JztcclxuICAgICAgICAgICAgY2FzZSAnYWVyb3NwYWNlJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAncGlsb3RfYWVyb3NwYWNlJztcclxuICAgICAgICAgICAgY2FzZSAnd2Fsa2VyJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAncGlsb3Rfd2Fsa2VyJztcclxuICAgICAgICAgICAgY2FzZSAnZXhvdGljJzpcclxuICAgICAgICAgICAgICAgIHJldHVybidwaWxvdF9leG90aWNfdmVoaWNsZSc7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFZlaGljbGVUeXBlU2tpbGwoKTogU2tpbGxGaWVsZCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNWZWhpY2xlKCkpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMuZ2V0VmVoaWNsZVR5cGVTa2lsbE5hbWUoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5maW5kQWN0aXZlU2tpbGwobmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWN0aXZlU2tpbGxzKCk6IFNraWxscyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5kYXRhLnNraWxscy5hY3RpdmU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gdGhlIGZ1bGwgcG9vbCBvZiBhIHNraWxsIGluY2x1ZGluZyBhdHRyaWJ1dGUgYW5kIHBvc3NpYmxlIHNwZWNpYWxpemF0aW9uIGJvbnVzLlxyXG4gICAgICogQHBhcmFtIHNraWxsSWQgVGhlIElEIG9mIHRoZSBza2lsbC4gTm90ZSB0aGF0IHRoaXMgY2FuIGRpZmZlciBmcm9tIHdoYXQgaXMgc2hvd24gaW4gdGhlIHNraWxsIGxpc3QuIElmIHlvdSdyZVxyXG4gICAgICogICAgICAgICAgICAgICAgdW5zdXJlIGFib3V0IHRoZSBpZCBhbmQgd2FudCB0byBzZWFyY2hcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIEFuIG9iamVjdCB0byBjaGFuZ2UgdGhlIGJlaGF2aW91ci5cclxuICAgICAqICAgICAgICAgICAgICAgIFRoZSBwcm9wZXJ0eSBzcGVjaWFsaXphdGlvbiB3aWxsIHRyaWdnZXIgdGhlIHBvb2wgdmFsdWUgdG8gYmUgcmFpc2VkIGJ5IGEgc3BlY2lhbGl6YXRpb24gbW9kaWZpZXJcclxuICAgICAqICAgICAgICAgICAgICAgIFRoZSBwcm9wZXJ0eSBieUxiYWxlIHdpbGwgY2F1c2UgdGhlIHBhcmFtIHNraWxsSWQgdG8gYmUgaW50ZXJwcmV0ZWQgYXMgdGhlIHNob3duIGkxOG4gbGFiZWwuXHJcbiAgICAgKi9cclxuICAgIGdldFBvb2woc2tpbGxJZDogc3RyaW5nLCBvcHRpb25zPSB7c3BlY2lhbGl6YXRpb246IGZhbHNlLCBieUxhYmVsOiBmYWxzZX0pOiBudW1iZXIge1xyXG4gICAgICAgIGNvbnN0IHNraWxsID0gb3B0aW9ucy5ieUxhYmVsID8gdGhpcy5nZXRTa2lsbEJ5TGFiZWwoc2tpbGxJZCkgOiB0aGlzLmdldFNraWxsKHNraWxsSWQpO1xyXG4gICAgICAgIGlmICghc2tpbGwgfHwgIXNraWxsLmF0dHJpYnV0ZSkgcmV0dXJuIDA7XHJcbiAgICAgICAgaWYgKCFTa2lsbEZsb3cuYWxsb3dSb2xsKHNraWxsKSkgcmV0dXJuIDA7XHJcblxyXG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IHRoaXMuZ2V0QXR0cmlidXRlKHNraWxsLmF0dHJpYnV0ZSk7XHJcblxyXG4gICAgICAgIGlmIChTa2lsbFJ1bGVzLm11c3REZWZhdWx0VG9Sb2xsKHNraWxsKSAmJiBTa2lsbFJ1bGVzLmFsbG93RGVmYXVsdGluZ1JvbGwoc2tpbGwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTa2lsbFJ1bGVzLmdldERlZmF1bHRpbmdNb2RpZmllcigpICsgYXR0cmlidXRlLnZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc3BlY2lhbGl6YXRpb25Cb251cyA9IG9wdGlvbnMuc3BlY2lhbGl6YXRpb24gPyBTUi5za2lsbC5TUEVDSUFMSVpBVElPTl9NT0RJRklFUiA6IDA7XHJcbiAgICAgICAgcmV0dXJuIHNraWxsLnZhbHVlICsgYXR0cmlidXRlLnZhbHVlICsgc3BlY2lhbGl6YXRpb25Cb251cztcclxuICAgIH1cclxuXHJcbiAgICBnZXRTa2lsbChza2lsbElkOiBzdHJpbmcsIG9wdGlvbnM9IHtieUxhYmVsOiBmYWxzZX0pOiBTa2lsbEZpZWxkIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAob3B0aW9ucy5ieUxhYmVsKVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTa2lsbEJ5TGFiZWwoc2tpbGxJZCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHsgc2tpbGxzIH0gPSB0aGlzLmRhdGEuZGF0YTtcclxuICAgICAgICBpZiAoc2tpbGxzLmFjdGl2ZS5oYXNPd25Qcm9wZXJ0eShza2lsbElkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gc2tpbGxzLmFjdGl2ZVtza2lsbElkXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNraWxscy5sYW5ndWFnZS52YWx1ZS5oYXNPd25Qcm9wZXJ0eShza2lsbElkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gc2tpbGxzLmxhbmd1YWdlLnZhbHVlW3NraWxsSWRdO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBLbm93bGVkZ2Ugc2tpbGxzIGFyZSBkZS1ub3JtYWxpemVkIGludG8gY2F0ZWdvcmllcyAoc3RyZWV0LCBob2JieSwgLi4uKVxyXG4gICAgICAgIGZvciAoY29uc3QgY2F0ZWdvcnlLZXkgaW4gc2tpbGxzLmtub3dsZWRnZSkge1xyXG4gICAgICAgICAgICBpZiAoc2tpbGxzLmtub3dsZWRnZS5oYXNPd25Qcm9wZXJ0eShjYXRlZ29yeUtleSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhdGVnb3J5ID0gc2tpbGxzLmtub3dsZWRnZVtjYXRlZ29yeUtleV07XHJcbiAgICAgICAgICAgICAgICBpZiAoY2F0ZWdvcnkudmFsdWUuaGFzT3duUHJvcGVydHkoc2tpbGxJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2F0ZWdvcnkudmFsdWVbc2tpbGxJZF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZWFyY2ggYWxsIHNraWxscyBmb3IgYSBtYXRjaGluZyBpMThuIHRyYW5zbGF0aW9uIGxhYmVsLlxyXG4gICAgICogTk9URTogWW91IHNob3VsZCB1c2UgZ2V0U2tpbGwgaWYgeW91IGhhdmUgdGhlIHNraWxsSWQgcmVhZHkuIE9ubHkgdXNlIHRoaXMgZm9yIGVhc2Ugb2YgdXNlIVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBzZWFyY2hlZEZvciBUaGUgdHJhbnNsYXRlZCBvdXRwdXQgb2YgZWl0aGVyIHRoZSBza2lsbCBsYWJlbCAoYWZ0ZXIgbG9jYWxpemUpIG9yIG5hbWUgb2YgdGhlIHNraWxsIGluIHF1ZXN0aW9uLlxyXG4gICAgICogQHJldHVybiBUaGUgZmlyc3Qgc2tpbGwgZm91bmQgd2l0aCBhIG1hdGNoaW5nIHRyYW5zbGF0aW9uIG9yIG5hbWUuXHJcbiAgICAgKi9cclxuICAgIGdldFNraWxsQnlMYWJlbChzZWFyY2hlZEZvcjogc3RyaW5nKTogU2tpbGxGaWVsZHx1bmRlZmluZWQge1xyXG4gICAgICAgIGlmICghc2VhcmNoZWRGb3IpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgcG9zc2libGVNYXRjaCA9IChza2lsbDogU2tpbGxGaWVsZCk6IHN0cmluZyA9PiAgc2tpbGwubGFiZWwgPyBnYW1lLmkxOG4ubG9jYWxpemUoc2tpbGwubGFiZWwpIDogc2tpbGwubmFtZTtcclxuXHJcbiAgICAgICAgY29uc3Qge3NraWxsc30gPSB0aGlzLmRhdGEuZGF0YTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBza2lsbCBvZiBPYmplY3QudmFsdWVzKHNraWxscy5hY3RpdmUpKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWFyY2hlZEZvciA9PT0gcG9zc2libGVNYXRjaChza2lsbCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2tpbGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IHNraWxsIG9mIE9iamVjdC52YWx1ZXMoc2tpbGxzLmxhbmd1YWdlLnZhbHVlKSkge1xyXG4gICAgICAgICAgICBpZiAoc2VhcmNoZWRGb3IgPT09IHBvc3NpYmxlTWF0Y2goc2tpbGwpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNraWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSXRlcmF0ZSBvdmVyIGFsbCBkaWZmZXJlbnQga25vd2xlZGdlIHNraWxsIGNhdGVnb3JpZXNcclxuICAgICAgICBmb3IgKGNvbnN0IGNhdGVnb3J5S2V5IGluIHNraWxscy5rbm93bGVkZ2UpIHtcclxuICAgICAgICAgICAgaWYgKCFza2lsbHMua25vd2xlZGdlLmhhc093blByb3BlcnR5KGNhdGVnb3J5S2V5KSkgY29udGludWU7XHJcbiAgICAgICAgICAgIC8vIFR5cGVzY3JpcHQgY2FuJ3QgZm9sbG93IHRoZSBmbG93IGhlcmUuLi5cclxuICAgICAgICAgICAgY29uc3QgY2F0ZWdvcnlTa2lsbHMgPSBza2lsbHMua25vd2xlZGdlW2NhdGVnb3J5S2V5XS52YWx1ZSBhcyBTa2lsbEZpZWxkW107XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgT2JqZWN0LnZhbHVlcyhjYXRlZ29yeVNraWxscykgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VhcmNoZWRGb3IgPT09IHBvc3NpYmxlTWF0Y2goc2tpbGwpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBza2lsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRTa2lsbExhYmVsKHNraWxsSWQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmdldFNraWxsKHNraWxsSWQpO1xyXG4gICAgICAgIGlmICghc2tpbGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHNraWxsLmxhYmVsID8gc2tpbGwubGFiZWwgOiBza2lsbC5uYW1lID8gc2tpbGwubmFtZSA6ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGFkZEtub3dsZWRnZVNraWxsKGNhdGVnb3J5LCBza2lsbD8pOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRTa2lsbCA9IHtcclxuICAgICAgICAgICAgbmFtZTogJycsXHJcbiAgICAgICAgICAgIHNwZWNzOiBbXSxcclxuICAgICAgICAgICAgYmFzZTogMCxcclxuICAgICAgICAgICAgdmFsdWU6IDAsXHJcbiAgICAgICAgICAgIG1vZDogMCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHNraWxsID0ge1xyXG4gICAgICAgICAgICAuLi5kZWZhdWx0U2tpbGwsXHJcbiAgICAgICAgICAgIC4uLnNraWxsLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IGlkID0gcmFuZG9tSUQoMTYpO1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0ge307XHJcbiAgICAgICAgdmFsdWVbaWRdID0gc2tpbGw7XHJcbiAgICAgICAgY29uc3QgZmllbGROYW1lID0gYGRhdGEuc2tpbGxzLmtub3dsZWRnZS4ke2NhdGVnb3J5fS52YWx1ZWA7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9O1xyXG4gICAgICAgIHVwZGF0ZURhdGFbZmllbGROYW1lXSA9IHZhbHVlO1xyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh1cGRhdGVEYXRhKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGlkO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGFkZEFjdGl2ZVNraWxsKHNraWxsRGF0YTogUGFydGlhbDxTa2lsbEZpZWxkPiA9IHtuYW1lOiBTS0lMTF9ERUZBVUxUX05BTUV9KTogUHJvbWlzZTxzdHJpbmcgfCB1bmRlZmluZWQ+IHtcclxuICAgICAgICBjb25zdCBza2lsbCA9IERlZmF1bHRWYWx1ZXMuc2tpbGxEYXRhKHNraWxsRGF0YSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFjdGl2ZVNraWxsc1BhdGggPSAnZGF0YS5za2lsbHMuYWN0aXZlJztcclxuICAgICAgICBjb25zdCB1cGRhdGVTa2lsbERhdGFSZXN1bHQgPSBIZWxwZXJzLmdldFJhbmRvbUlkU2tpbGxGaWVsZERhdGFFbnRyeShhY3RpdmVTa2lsbHNQYXRoLCBza2lsbCk7XHJcblxyXG4gICAgICAgIGlmICghdXBkYXRlU2tpbGxEYXRhUmVzdWx0KSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IHt1cGRhdGVTa2lsbERhdGEsIGlkfSA9IHVwZGF0ZVNraWxsRGF0YVJlc3VsdDtcclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUodXBkYXRlU2tpbGxEYXRhIGFzIG9iamVjdCk7XHJcblxyXG4gICAgICAgIHJldHVybiBpZDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByZW1vdmVMYW5ndWFnZVNraWxsKHNraWxsSWQpIHtcclxuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0gSGVscGVycy5nZXREZWxldGVEYXRhRW50cnkoJ2RhdGEuc2tpbGxzLmxhbmd1YWdlLnZhbHVlJywgc2tpbGxJZCk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUodXBkYXRlRGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgYWRkTGFuZ3VhZ2VTa2lsbChza2lsbCk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgY29uc3QgZGVmYXVsdFNraWxsID0ge1xyXG4gICAgICAgICAgICBuYW1lOiAnJyxcclxuICAgICAgICAgICAgc3BlY3M6IFtdLFxyXG4gICAgICAgICAgICBiYXNlOiAwLFxyXG4gICAgICAgICAgICB2YWx1ZTogMCxcclxuICAgICAgICAgICAgLy8gVE9ETzogQlVHIE1vZGlmaWFibGVWYWx1ZSBpcyBNb2RMaXN0PG51bWJlcj5bXSBhbmQgbm90IG51bWJlclxyXG4gICAgICAgICAgICBtb2Q6IDAsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBza2lsbCA9IHtcclxuICAgICAgICAgICAgLi4uZGVmYXVsdFNraWxsLFxyXG4gICAgICAgICAgICAuLi5za2lsbCxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBpZCA9IHJhbmRvbUlEKDE2KTtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IHt9O1xyXG4gICAgICAgIHZhbHVlW2lkXSA9IHNraWxsO1xyXG4gICAgICAgIGNvbnN0IGZpZWxkTmFtZSA9IGBkYXRhLnNraWxscy5sYW5ndWFnZS52YWx1ZWA7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9O1xyXG4gICAgICAgIHVwZGF0ZURhdGFbZmllbGROYW1lXSA9IHZhbHVlO1xyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh1cGRhdGVEYXRhKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGlkO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHJlbW92ZUtub3dsZWRnZVNraWxsKHNraWxsSWQsIGNhdGVnb3J5KSB7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IEhlbHBlcnMuZ2V0RGVsZXRlRGF0YUVudHJ5KGBkYXRhLnNraWxscy5rbm93bGVkZ2UuJHtjYXRlZ29yeX0udmFsdWVgLCBza2lsbElkKTtcclxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh1cGRhdGVEYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogRGVsZXRlIHRoZSBnaXZlbiBhY3RpdmUgc2tpbGwgYnkgaXQncyBpZC4gSXQgZG9lc24ndFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBza2lsbElkIEVpdGhlciBhIHJhbmRvbSBpZCBmb3IgY3VzdG9tIHNraWxscyBvciB0aGUgc2tpbGxzIG5hbWUgdXNlZCBhcyBhbiBpZC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgcmVtb3ZlQWN0aXZlU2tpbGwoc2tpbGxJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgYWN0aXZlU2tpbGxzID0gdGhpcy5nZXRBY3RpdmVTa2lsbHMoKTtcclxuICAgICAgICBpZiAoIWFjdGl2ZVNraWxscy5oYXNPd25Qcm9wZXJ0eShza2lsbElkKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0gSGVscGVycy5nZXREZWxldGVEYXRhRW50cnkoJ2RhdGEuc2tpbGxzLmFjdGl2ZScsIHNraWxsSWQpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHVwZGF0ZURhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHJvbGxGYWRlKG9wdGlvbnM6IEFjdG9yUm9sbE9wdGlvbnMgPSB7fSwgaW5jb21pbmcgPSAtMSk6IFByb21pc2U8U2hhZG93cnVuUm9sbHx1bmRlZmluZWQ+IHtcclxuICAgICAgICBjb25zdCB3aWwgPSBkdXBsaWNhdGUodGhpcy5kYXRhLmRhdGEuYXR0cmlidXRlcy53aWxscG93ZXIpO1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IGR1cGxpY2F0ZSh0aGlzLmRhdGEuZGF0YS5hdHRyaWJ1dGVzLnJlc29uYW5jZSk7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YS5kYXRhO1xyXG5cclxuICAgICAgICBjb25zdCBwYXJ0cyA9IG5ldyBQYXJ0c0xpc3Q8bnVtYmVyPigpO1xyXG4gICAgICAgIHBhcnRzLmFkZFVuaXF1ZVBhcnQod2lsLmxhYmVsLCB3aWwudmFsdWUpO1xyXG4gICAgICAgIHBhcnRzLmFkZFVuaXF1ZVBhcnQocmVzLmxhYmVsLCByZXMudmFsdWUpO1xyXG4gICAgICAgIGlmIChkYXRhLm1vZGlmaWVycy5mYWRlKSBwYXJ0cy5hZGRVbmlxdWVQYXJ0KCdTUjUuQm9udXMnLCBkYXRhLm1vZGlmaWVycy5mYWRlKTtcclxuXHJcbiAgICAgICAgbGV0IHRpdGxlID0gYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdTUjUuUmVzaXN0Jyl9ICR7Z2FtZS5pMThuLmxvY2FsaXplKCdTUjUuRmFkZScpfWA7XHJcblxyXG4gICAgICAgIGNvbnN0IGFjdG9yID0gdGhpcztcclxuICAgICAgICBjb25zdCByb2xsID0gYXdhaXQgU2hhZG93cnVuUm9sbGVyLmFkdmFuY2VkUm9sbCh7XHJcbiAgICAgICAgICAgIHBhcnRzOiBwYXJ0cy5saXN0LFxyXG4gICAgICAgICAgICBhY3RvcixcclxuICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxyXG4gICAgICAgICAgICB3b3VuZHM6IGZhbHNlLFxyXG4gICAgICAgICAgICBoaWRlUm9sbE1lc3NhZ2U6IHRydWVcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCFyb2xsKSByZXR1cm47XHJcblxyXG4gICAgICAgIC8vIFJlZHVjZSBkYW1hZ2UgYnkgc29hayByb2xsIGFuZCBpbmZvcm0gdXNlci5cclxuICAgICAgICBjb25zdCBpbmNvbWluZ0RhbWFnZSA9IEhlbHBlcnMuY3JlYXRlRGFtYWdlRGF0YShpbmNvbWluZywgJ3N0dW4nKTtcclxuICAgICAgICBjb25zdCBkYW1hZ2UgPSBIZWxwZXJzLnJlZHVjZURhbWFnZUJ5SGl0cyhpbmNvbWluZ0RhbWFnZSwgcm9sbC5oaXRzLCAnU1I1LkZhZGUnKTtcclxuXHJcbiAgICAgICAgYXdhaXQgY3JlYXRlUm9sbENoYXRNZXNzYWdlKHt0aXRsZSwgcm9sbCwgYWN0b3IsIGRhbWFnZX0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcm9sbDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByb2xsRHJhaW4ob3B0aW9uczogQWN0b3JSb2xsT3B0aW9ucyA9IHt9LCBpbmNvbWluZyA9IC0xKTogUHJvbWlzZTxTaGFkb3dydW5Sb2xsfHVuZGVmaW5lZD4ge1xyXG4gICAgICAgIGlmICghdGhpcy5pc0NoYXJhY3RlcigpKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGEuZGF0YSBhcyBDaGFyYWN0ZXJBY3RvckRhdGE7XHJcblxyXG4gICAgICAgIGNvbnN0IHdpbCA9IGR1cGxpY2F0ZShkYXRhLmF0dHJpYnV0ZXMud2lsbHBvd2VyKTtcclxuICAgICAgICBjb25zdCBkcmFpbkF0dCA9IGR1cGxpY2F0ZShkYXRhLmF0dHJpYnV0ZXNbZGF0YS5tYWdpYy5hdHRyaWJ1dGVdKTtcclxuXHJcbiAgICAgICAgY29uc3QgcGFydHMgPSBuZXcgUGFydHNMaXN0PG51bWJlcj4oKTtcclxuICAgICAgICBwYXJ0cy5hZGRQYXJ0KHdpbC5sYWJlbCwgd2lsLnZhbHVlKTtcclxuICAgICAgICBwYXJ0cy5hZGRQYXJ0KGRyYWluQXR0LmxhYmVsLCBkcmFpbkF0dC52YWx1ZSk7XHJcbiAgICAgICAgaWYgKGRhdGEubW9kaWZpZXJzLmRyYWluKSBwYXJ0cy5hZGRVbmlxdWVQYXJ0KCdTUjUuQm9udXMnLCBkYXRhLm1vZGlmaWVycy5kcmFpbik7XHJcblxyXG4gICAgICAgIGxldCB0aXRsZSA9IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LlJlc2lzdCcpfSAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkRyYWluJyl9YDtcclxuICAgICAgICBjb25zdCBhY3RvciA9IHRoaXM7XHJcbiAgICAgICAgY29uc3Qgcm9sbCA9IGF3YWl0IFNoYWRvd3J1blJvbGxlci5hZHZhbmNlZFJvbGwoe1xyXG4gICAgICAgICAgICBwYXJ0czogcGFydHMubGlzdCxcclxuICAgICAgICAgICAgdGl0bGUsXHJcbiAgICAgICAgICAgIGFjdG9yLFxyXG4gICAgICAgICAgICB3b3VuZHM6IGZhbHNlLFxyXG4gICAgICAgICAgICBoaWRlUm9sbE1lc3NhZ2U6IHRydWVcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCFyb2xsKSByZXR1cm47XHJcblxyXG4gICAgICAgIC8vIFJlZHVjZSBkYW1hZ2UgYnkgc29hayByb2xsIGFuZCBpbmZvcm0gdXNlci5cclxuICAgICAgICBjb25zdCBpbmNvbWluZ0RhbWFnZSA9IEhlbHBlcnMuY3JlYXRlRGFtYWdlRGF0YShpbmNvbWluZywgJ3N0dW4nKTtcclxuICAgICAgICBjb25zdCBkYW1hZ2UgPSBIZWxwZXJzLnJlZHVjZURhbWFnZUJ5SGl0cyhpbmNvbWluZ0RhbWFnZSwgcm9sbC5oaXRzLCAnU1I1LkRyYWluJyk7XHJcblxyXG4gICAgICAgIGF3YWl0IGNyZWF0ZVJvbGxDaGF0TWVzc2FnZSh7dGl0bGUsIHJvbGwsIGFjdG9yLCBkYW1hZ2V9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJvbGw7XHJcbiAgICB9XHJcblxyXG4gICAgcm9sbEFybW9yKG9wdGlvbnM6IEFjdG9yUm9sbE9wdGlvbnMgPSB7fSwgcGFydHNQcm9wczogTW9kTGlzdDxudW1iZXI+ID0gW10pIHtcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IG5ldyBQYXJ0c0xpc3QocGFydHNQcm9wcyk7XHJcbiAgICAgICAgdGhpcy5fYWRkQXJtb3JQYXJ0cyhwYXJ0cyk7XHJcbiAgICAgICAgcmV0dXJuIFNoYWRvd3J1blJvbGxlci5hZHZhbmNlZFJvbGwoe1xyXG4gICAgICAgICAgICBldmVudDogb3B0aW9ucy5ldmVudCxcclxuICAgICAgICAgICAgYWN0b3I6IHRoaXMsXHJcbiAgICAgICAgICAgIHBhcnRzOiBwYXJ0cy5saXN0LFxyXG4gICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuQXJtb3InKSxcclxuICAgICAgICAgICAgd291bmRzOiBmYWxzZSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogQSBhdHRhY2sgZGVmZW5zZSBpcyBhbnl0aGluZyBhZ2FpbnN0IHZpc2libGUgYXR0YWNrcyAocmFuZ2VkIHdlYXBvbnMsIG1lbGVlIHdlYXBvbnMsIGluZGlyZWN0IHNwZWxsIGF0dGFja3MsIC4uLilcclxuICAgICAqL1xyXG4gICAgYXN5bmMgcm9sbEF0dGFja0RlZmVuc2Uob3B0aW9uczogRGVmZW5zZVJvbGxPcHRpb25zID0ge30sIHBhcnRzUHJvcHM6IE1vZExpc3Q8bnVtYmVyPiA9IFtdKTogUHJvbWlzZTxTaGFkb3dydW5Sb2xsIHwgdW5kZWZpbmVkPiB7XHJcbiAgICAgICAgY29uc3Qge2F0dGFja30gPSBvcHRpb25zO1xyXG5cclxuICAgICAgICBjb25zdCBkZWZlbnNlRGlhbG9nID0gYXdhaXQgU2hhZG93cnVuQWN0b3JEaWFsb2dzLmNyZWF0ZURlZmVuc2VEaWFsb2codGhpcywgb3B0aW9ucywgcGFydHNQcm9wcyk7XHJcbiAgICAgICAgY29uc3QgZGVmZW5zZUFjdGlvbkRhdGEgPSBhd2FpdCBkZWZlbnNlRGlhbG9nLnNlbGVjdCgpO1xyXG5cclxuICAgICAgICBpZiAoZGVmZW5zZURpYWxvZy5jYW5jZWxlZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCByb2xsID0gYXdhaXQgU2hhZG93cnVuUm9sbGVyLmFkdmFuY2VkUm9sbCh7XHJcbiAgICAgICAgICAgIGV2ZW50OiBvcHRpb25zLmV2ZW50LFxyXG4gICAgICAgICAgICBhY3RvcjogdGhpcyxcclxuICAgICAgICAgICAgcGFydHM6IGRlZmVuc2VBY3Rpb25EYXRhLnBhcnRzLmxpc3QsXHJcbiAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5EZWZlbnNlVGVzdCcpLFxyXG4gICAgICAgICAgICBpbmNvbWluZ0F0dGFjazogYXR0YWNrLFxyXG4gICAgICAgICAgICBjb21iYXQ6IGRlZmVuc2VBY3Rpb25EYXRhLmNvbWJhdFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoIXJvbGwpIHJldHVybjtcclxuXHJcbiAgICAgICAgLy8gUmVkdWNlIGluaXRpYXRpdmUgYWZ0ZXIgYSBzdWNjZXNzZnVsIHJvbGwsIGJ1dCBiZWZvcmUgYXR0YWNrIGhhbmRsaW5nLCB0byBhbGxvdyBmb3IgdGhlIHN0YW5kYWxvbmUgc2hlZXRcclxuICAgICAgICAvLyBkZWZlbnNlIGFjdGlvbiB0byBzdGlsbCByZWR1Y2UgdGhlIGluaXRpYXRpdmUuXHJcbiAgICAgICAgaWYgKGRlZmVuc2VBY3Rpb25EYXRhLmNvbWJhdC5pbml0aWF0aXZlKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2hhbmdlQ29tYmF0SW5pdGlhdGl2ZShkZWZlbnNlQWN0aW9uRGF0YS5jb21iYXQuaW5pdGlhdGl2ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWF0dGFjaykgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyBDb2xsZWN0IGRlZmVuc2UgaW5mb3JtYXRpb24uXHJcbiAgICAgICAgbGV0IGRlZmVuZGVySGl0cyA9IHJvbGwudG90YWw7XHJcbiAgICAgICAgbGV0IGF0dGFja2VySGl0cyA9IGF0dGFjay5oaXRzIHx8IDA7XHJcbiAgICAgICAgbGV0IG5ldEhpdHMgPSBNYXRoLm1heChhdHRhY2tlckhpdHMgLSBkZWZlbmRlckhpdHMsIDApO1xyXG5cclxuICAgICAgICAvLyBSZWR1Y2UgZGFtYWdlIGZsb3cuXHJcbiAgICAgICAgbGV0IGRhbWFnZSA9IGF0dGFjay5kYW1hZ2U7XHJcblxyXG4gICAgICAgIC8vIG1vZGlmaWVkIGRhbWFnZSB2YWx1ZSBieSBuZXRIaXRzLlxyXG4gICAgICAgIGlmIChuZXRIaXRzID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCB7bW9kaWZpZWR9ID0gSGVscGVycy5tb2RpZnlEYW1hZ2VCeUhpdHMoZGFtYWdlLCBuZXRIaXRzLCBcIlNSNS5OZXRIaXRzXCIpO1xyXG4gICAgICAgICAgICBkYW1hZ2UgPSBtb2RpZmllZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHNvYWtSb2xsT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgZXZlbnQ6IG9wdGlvbnMuZXZlbnQsXHJcbiAgICAgICAgICAgIGRhbWFnZSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLnJvbGxTb2FrKHNvYWtSb2xsT3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcm9sbERpcmVjdFNwZWxsRGVmZW5zZShzcGVsbDogU1I1SXRlbSwgb3B0aW9uczogU3BlbGxEZWZlbnNlT3B0aW9ucyk6IFByb21pc2U8U2hhZG93cnVuUm9sbCB8IHVuZGVmaW5lZD4ge1xyXG4gICAgICAgIGlmICghc3BlbGwuaXNEaXJlY3RDb21iYXRTcGVsbCgpKSByZXR1cm47XHJcblxyXG4gICAgICAgIC8vIFByZXBhcmUgdGhlIGFjdHVhbCByb2xsLlxyXG4gICAgICAgIG9wdGlvbnMuaGlkZVJvbGxNZXNzYWdlID0gb3B0aW9ucy5oaWRlUm9sbE1lc3NhZ2UgPz8gdHJ1ZTtcclxuICAgICAgICBjb25zdCBhdHRyaWJ1dGUgPSBzcGVsbC5pc01hbmFTcGVsbCgpID9cclxuICAgICAgICAgICAgU1IuZGVmZW5zZS5zcGVsbC5kaXJlY3QubWFuYSA6XHJcbiAgICAgICAgICAgIFNSLmRlZmVuc2Uuc3BlbGwuZGlyZWN0LnBoeXNpY2FsO1xyXG5cclxuICAgICAgICBjb25zdCByb2xsID0gYXdhaXQgdGhpcy5yb2xsU2luZ2xlQXR0cmlidXRlKGF0dHJpYnV0ZSwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgIGlmICghcm9sbCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyBQcmVwYXJlIHRoZSByZXN1bHRpbmcgZGFtYWdlIG1lc3NhZ2UuXHJcbiAgICAgICAgY29uc3QgdGl0bGUgPSBzcGVsbC5pc01hbmFTcGVsbCgpID9cclxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuU3BlbGxEZWZlbnNlRGlyZWN0TWFuYScpIDpcclxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuU3BlbGxEZWZlbnNlRGlyZWN0UGh5c2ljYWwnKTtcclxuICAgICAgICBjb25zdCBtb2RpZmljYXRpb25MYWJlbCA9ICdTUjUuU3BlbGxEZWZlbnNlJztcclxuICAgICAgICBjb25zdCBhY3RvciA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgZGFtYWdlID0gSGVscGVycy5yZWR1Y2VEYW1hZ2VCeUhpdHMob3B0aW9ucy5hdHRhY2suZGFtYWdlLCByb2xsLmhpdHMsIG1vZGlmaWNhdGlvbkxhYmVsKTtcclxuXHJcbiAgICAgICAgYXdhaXQgY3JlYXRlUm9sbENoYXRNZXNzYWdlKHt0aXRsZSwgcm9sbCwgYWN0b3IsIGRhbWFnZX0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcm9sbDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByb2xsSW5kaXJlY3RTcGVsbERlZmVuc2Uoc3BlbGw6IFNSNUl0ZW0sIG9wdGlvbnM6IFNwZWxsRGVmZW5zZU9wdGlvbnMpOiBQcm9taXNlPFNoYWRvd3J1blJvbGwgfCB1bmRlZmluZWQ+IHtcclxuICAgICAgICBpZiAoIXNwZWxsLmlzSW5kaXJlY3RDb21iYXRTcGVsbCgpKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IG9wcG9zZWRQYXJ0cyA9IHNwZWxsLmdldE9wcG9zZWRUZXN0TW9kKCk7XHJcblxyXG4gICAgICAgIC8vIFRPRE86IGluZGlyZWN0IExPUyBzcGVsbCBkZWZlbnNlIHdvcmtzIGxpa2UgYSByYW5nZWQgd2VhcG9uIGRlZmVuc2UsIGJ1dCBpbmRpcmVjdCBMT1MoQSkgc3BlbGwgZGVmZW5zZVxyXG4gICAgICAgIC8vICAgICAgIHdvcmsgbGlrZSBncmVuYWRlIGF0dGFjayAobm8gZGVmZW5zZSwgYnV0IHNvYWssIHdpdGggdGhlIHRocmVzaG9sZCBuZXQgaGl0cyBtb2RpZnlpbmcgZGFtYWdlLilcclxuICAgICAgICAvLyAgICAgICBHcmVuYWRlczogU1I1IzE4MSBDb21iYXQgU3BlbGxzOiBTUjUjMjgzXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucm9sbEF0dGFja0RlZmVuc2Uob3B0aW9ucywgb3Bwb3NlZFBhcnRzLmxpc3QpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRPRE86IEFic3RyYWN0IGhhbmRsaW5nIG9mIGNvbnN0IGRhbWFnZSA6IE1vZGlmaWVkRGFtYWdlRGF0YVxyXG4gICAgYXN5bmMgcm9sbFNvYWsob3B0aW9uczogU29ha1JvbGxPcHRpb25zLCBwYXJ0c1Byb3BzOiBNb2RMaXN0PG51bWJlcj4gPSBbXSk6IFByb21pc2U8U2hhZG93cnVuUm9sbHx1bmRlZmluZWQ+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFNvYWtGbG93KCkucnVuU29ha1Rlc3QodGhpcywgb3B0aW9ucywgcGFydHNQcm9wcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcm9sbFNpbmdsZUF0dHJpYnV0ZShhdHRJZCwgb3B0aW9uczogQWN0b3JSb2xsT3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IGF0dHIgPSBkdXBsaWNhdGUodGhpcy5kYXRhLmRhdGEuYXR0cmlidXRlc1thdHRJZF0pO1xyXG4gICAgICAgIGNvbnN0IHBhcnRzID0gbmV3IFBhcnRzTGlzdDxudW1iZXI+KCk7XHJcbiAgICAgICAgcGFydHMuYWRkVW5pcXVlUGFydChhdHRyLmxhYmVsLCBhdHRyLnZhbHVlKTtcclxuICAgICAgICB0aGlzLl9hZGRNYXRyaXhQYXJ0cyhwYXJ0cywgYXR0cik7XHJcbiAgICAgICAgdGhpcy5fYWRkR2xvYmFsUGFydHMocGFydHMpO1xyXG5cclxuICAgICAgICByZXR1cm4gU2hhZG93cnVuUm9sbGVyLmFkdmFuY2VkUm9sbCh7XHJcbiAgICAgICAgICAgIGFjdG9yOiB0aGlzLFxyXG4gICAgICAgICAgICBwYXJ0czogcGFydHMubGlzdCxcclxuICAgICAgICAgICAgZXZlbnQ6IG9wdGlvbnM/LmV2ZW50LFxyXG4gICAgICAgICAgICB0aXRsZTogb3B0aW9ucy50aXRsZSA/PyBIZWxwZXJzLmxhYmVsKGF0dElkKSxcclxuICAgICAgICAgICAgaGlkZVJvbGxNZXNzYWdlOiBvcHRpb25zLmhpZGVSb2xsTWVzc2FnZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJvbGxUd29BdHRyaWJ1dGVzKFtpZDEsIGlkMl0sIG9wdGlvbnM6IEFjdG9yUm9sbE9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBhdHRyMSA9IGR1cGxpY2F0ZSh0aGlzLmRhdGEuZGF0YS5hdHRyaWJ1dGVzW2lkMV0pO1xyXG4gICAgICAgIGNvbnN0IGF0dHIyID0gZHVwbGljYXRlKHRoaXMuZGF0YS5kYXRhLmF0dHJpYnV0ZXNbaWQyXSk7XHJcbiAgICAgICAgY29uc3QgbGFiZWwxID0gSGVscGVycy5sYWJlbChpZDEpO1xyXG4gICAgICAgIGNvbnN0IGxhYmVsMiA9IEhlbHBlcnMubGFiZWwoaWQyKTtcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IG5ldyBQYXJ0c0xpc3Q8bnVtYmVyPigpO1xyXG4gICAgICAgIHBhcnRzLmFkZFBhcnQoYXR0cjEubGFiZWwsIGF0dHIxLnZhbHVlKTtcclxuICAgICAgICBwYXJ0cy5hZGRQYXJ0KGF0dHIyLmxhYmVsLCBhdHRyMi52YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5fYWRkTWF0cml4UGFydHMocGFydHMsIFthdHRyMSwgYXR0cjJdKTtcclxuICAgICAgICB0aGlzLl9hZGRHbG9iYWxQYXJ0cyhwYXJ0cyk7XHJcblxyXG4gICAgICAgIHJldHVybiBTaGFkb3dydW5Sb2xsZXIuYWR2YW5jZWRSb2xsKHtcclxuICAgICAgICAgICAgYWN0b3I6IHRoaXMsXHJcbiAgICAgICAgICAgIHBhcnRzOiBwYXJ0cy5saXN0LFxyXG4gICAgICAgICAgICBldmVudDogb3B0aW9ucz8uZXZlbnQsXHJcbiAgICAgICAgICAgIHRpdGxlOiBvcHRpb25zLnRpdGxlID8/IGAke2xhYmVsMX0gKyAke2xhYmVsMn1gLFxyXG4gICAgICAgICAgICBoaWRlUm9sbE1lc3NhZ2U6IG9wdGlvbnMuaGlkZVJvbGxNZXNzYWdlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcm9sbE5hdHVyYWxSZWNvdmVyeSh0cmFjaywgb3B0aW9ucz86IEFjdG9yUm9sbE9wdGlvbnMpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNDaGFyYWN0ZXIoKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBsZXQgaWQxID0gJ2JvZHknO1xyXG4gICAgICAgIGxldCBpZDIgPSAnd2lsbHBvd2VyJztcclxuICAgICAgICBsZXQgdGl0bGUgPSAnTmF0dXJhbCBSZWNvdmVyJztcclxuICAgICAgICBpZiAodHJhY2sgPT09ICdwaHlzaWNhbCcpIHtcclxuICAgICAgICAgICAgaWQyID0gJ2JvZHknO1xyXG4gICAgICAgICAgICB0aXRsZSArPSAnIC0gUGh5c2ljYWwgLSAxIERheSc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGl0bGUgKz0gJyAtIFN0dW4gLSAxIEhvdXInO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYXR0MSA9IGR1cGxpY2F0ZSh0aGlzLmRhdGEuZGF0YS5hdHRyaWJ1dGVzW2lkMV0pO1xyXG4gICAgICAgIGxldCBhdHQyID0gZHVwbGljYXRlKHRoaXMuZGF0YS5kYXRhLmF0dHJpYnV0ZXNbaWQyXSk7XHJcbiAgICAgICAgY29uc3QgcGFydHMgPSBuZXcgUGFydHNMaXN0PG51bWJlcj4oKTtcclxuICAgICAgICBwYXJ0cy5hZGRQYXJ0KGF0dDEubGFiZWwsIGF0dDEudmFsdWUpO1xyXG4gICAgICAgIHBhcnRzLmFkZFBhcnQoYXR0Mi5sYWJlbCwgYXR0Mi52YWx1ZSk7XHJcblxyXG4gICAgICAgIHJldHVybiBTaGFkb3dydW5Sb2xsZXIuYWR2YW5jZWRSb2xsKHtcclxuICAgICAgICAgICAgZXZlbnQ6IG9wdGlvbnM/LmV2ZW50LFxyXG4gICAgICAgICAgICBhY3RvcjogdGhpcyxcclxuICAgICAgICAgICAgcGFydHM6IHBhcnRzLmxpc3QsXHJcbiAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcclxuICAgICAgICAgICAgZXh0ZW5kZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIGFmdGVyOiBhc3luYyAocm9sbDogUm9sbCB8IHVuZGVmaW5lZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFyb2xsKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBsZXQgaGl0cyA9IHJvbGwudG90YWw7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhLmRhdGEgYXMgQ2hhcmFjdGVyQWN0b3JEYXRhO1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnQgPSBkYXRhLnRyYWNrW3RyYWNrXS52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gTWF0aC5tYXgoY3VycmVudCAtIGhpdHMsIDApO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBrZXkgPSBgZGF0YS50cmFjay4ke3RyYWNrfS52YWx1ZWA7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHUgPSB7fTtcclxuICAgICAgICAgICAgICAgIHVba2V5XSA9IGN1cnJlbnQ7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh1KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByb2xsTWF0cml4QXR0cmlidXRlKGF0dHIsIG9wdGlvbnM/OiBBY3RvclJvbGxPcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKCEoXCJtYXRyaXhcIiBpbiB0aGlzLmRhdGEuZGF0YSkpIHJldHVybjtcclxuXHJcbiAgICAgICAgbGV0IG1hdHJpeF9hdHQgPSBkdXBsaWNhdGUodGhpcy5kYXRhLmRhdGEubWF0cml4W2F0dHJdKTtcclxuICAgICAgICBsZXQgdGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09ORklHLlNSNS5tYXRyaXhBdHRyaWJ1dGVzW2F0dHJdKTtcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IG5ldyBQYXJ0c0xpc3Q8bnVtYmVyPigpO1xyXG4gICAgICAgIHBhcnRzLmFkZFBhcnQoQ09ORklHLlNSNS5tYXRyaXhBdHRyaWJ1dGVzW2F0dHJdLCBtYXRyaXhfYXR0LnZhbHVlKTtcclxuXHJcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5ldmVudCAmJiBvcHRpb25zLmV2ZW50W0NPTkZJRy5TUjUua2Jtb2QuU1BFQ10pIHBhcnRzLmFkZFVuaXF1ZVBhcnQoJ1NSNS5TcGVjaWFsaXphdGlvbicsIDIpO1xyXG4gICAgICAgIGlmIChIZWxwZXJzLmhhc01vZGlmaWVycyhvcHRpb25zPy5ldmVudCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNoYWRvd3J1blJvbGxlci5hZHZhbmNlZFJvbGwoe1xyXG4gICAgICAgICAgICAgICAgZXZlbnQ6IG9wdGlvbnM/LmV2ZW50LFxyXG4gICAgICAgICAgICAgICAgYWN0b3I6IHRoaXMsXHJcbiAgICAgICAgICAgICAgICBwYXJ0czogcGFydHMubGlzdCxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBIZWxwZXJzLmZpbHRlcih0aGlzLmRhdGEuZGF0YS5hdHRyaWJ1dGVzLCAoWywgdmFsdWVdKSA9PiB2YWx1ZS52YWx1ZSA+IDApO1xyXG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9ICd3aWxscG93ZXInO1xyXG5cclxuICAgICAgICBsZXQgZGlhbG9nRGF0YSA9IHtcclxuICAgICAgICAgICAgYXR0cmlidXRlOiBhdHRyaWJ1dGUsXHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBidXR0b25zID0ge1xyXG4gICAgICAgICAgICByb2xsOiB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogJ0NvbnRpbnVlJyxcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiAoY2FuY2VsID0gZmFsc2UpLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxldCBjYW5jZWwgPSB0cnVlO1xyXG4gICAgICAgIHJlbmRlclRlbXBsYXRlKCdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL3JvbGxzL21hdHJpeC1yb2xsLmh0bWwnLCBkaWFsb2dEYXRhKS50aGVuKChkbGcpID0+IHtcclxuICAgICAgICAgICAgbmV3IERpYWxvZyh7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogYCR7dGl0bGV9IFRlc3RgLFxyXG4gICAgICAgICAgICAgICAgY29udGVudDogZGxnLFxyXG4gICAgICAgICAgICAgICAgYnV0dG9uczogYnV0dG9ucyxcclxuICAgICAgICAgICAgICAgIGNsb3NlOiBhc3luYyAoaHRtbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYW5jZWwpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdBdHQgPSBIZWxwZXJzLnBhcnNlSW5wdXRUb1N0cmluZygkKGh0bWwpLmZpbmQoJ1tuYW1lPWF0dHJpYnV0ZV0nKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGF0dDogQXR0cmlidXRlRmllbGQgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0F0dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHQgPSB0aGlzLmRhdGEuZGF0YS5hdHRyaWJ1dGVzW25ld0F0dF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlICs9IGAgKyAke2dhbWUuaTE4bi5sb2NhbGl6ZShDT05GSUcuU1I1LmF0dHJpYnV0ZXNbbmV3QXR0XSl9YDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHQudmFsdWUgJiYgYXR0LmxhYmVsKSBwYXJ0cy5hZGRQYXJ0KGF0dC5sYWJlbCwgYXR0LnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWRkTWF0cml4UGFydHMocGFydHMsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hZGRHbG9iYWxQYXJ0cyhwYXJ0cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTaGFkb3dydW5Sb2xsZXIuYWR2YW5jZWRSb2xsKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiBvcHRpb25zPy5ldmVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdG9yOiB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydHM6IHBhcnRzLmxpc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pLnJlbmRlcih0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm9tcHRSb2xsKG9wdGlvbnM/OiBBY3RvclJvbGxPcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3Qgcm9sbFByb3BzID0ge1xyXG4gICAgICAgICAgICBldmVudDogb3B0aW9ucz8uZXZlbnQsXHJcbiAgICAgICAgICAgIHRpdGxlOiAnUm9sbCcsXHJcbiAgICAgICAgICAgIHBhcnRzOiBbXSxcclxuICAgICAgICAgICAgYWN0b3I6IHRoaXNcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IGRpYWxvZ09wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIHBvb2w6IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFNoYWRvd3J1blJvbGxlci5hZHZhbmNlZFJvbGwocm9sbFByb3BzLCBkaWFsb2dPcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICByb2xsRGV2aWNlUmF0aW5nKG9wdGlvbnM/OiBBY3RvclJvbGxPcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3QgdGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5MYWJlbHMuQWN0b3JTaGVldC5EZXZpY2VSYXRpbmcnKTtcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IG5ldyBQYXJ0c0xpc3Q8bnVtYmVyPigpO1xyXG4gICAgICAgIGNvbnN0IHJhdGluZyA9IHRoaXMuZ2V0RGV2aWNlUmF0aW5nKCk7XHJcbiAgICAgICAgLy8gYWRkIGRldmljZSByYXRpbmcgdHdpY2UgYXMgdGhpcyBpcyB0aGUgbW9zdCBjb21tb24gcm9sbFxyXG4gICAgICAgIHBhcnRzLmFkZFBhcnQodGl0bGUsIHJhdGluZyk7XHJcbiAgICAgICAgcGFydHMuYWRkUGFydCh0aXRsZSwgcmF0aW5nKTtcclxuICAgICAgICB0aGlzLl9hZGRHbG9iYWxQYXJ0cyhwYXJ0cyk7XHJcbiAgICAgICAgcmV0dXJuIFNoYWRvd3J1blJvbGxlci5hZHZhbmNlZFJvbGwoe1xyXG4gICAgICAgICAgICBldmVudDogb3B0aW9ucz8uZXZlbnQsXHJcbiAgICAgICAgICAgIHRpdGxlLFxyXG4gICAgICAgICAgICBwYXJ0czogcGFydHMubGlzdCxcclxuICAgICAgICAgICAgYWN0b3I6IHRoaXMsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcm9sbEF0dHJpYnV0ZXNUZXN0KHJvbGxJZCwgb3B0aW9ucz86IEFjdG9yUm9sbE9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCB0aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT05GSUcuU1I1LmF0dHJpYnV0ZVJvbGxzW3JvbGxJZF0pO1xyXG4gICAgICAgIGNvbnN0IGF0dHMgPSB0aGlzLmRhdGEuZGF0YS5hdHRyaWJ1dGVzO1xyXG4gICAgICAgIGNvbnN0IG1vZGlmaWVycyA9IHRoaXMuZGF0YS5kYXRhLm1vZGlmaWVycztcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IG5ldyBQYXJ0c0xpc3Q8bnVtYmVyPigpO1xyXG4gICAgICAgIGlmIChyb2xsSWQgPT09ICdjb21wb3N1cmUnKSB7XHJcbiAgICAgICAgICAgIHBhcnRzLmFkZFVuaXF1ZVBhcnQoYXR0cy5jaGFyaXNtYS5sYWJlbCwgYXR0cy5jaGFyaXNtYS52YWx1ZSk7XHJcbiAgICAgICAgICAgIHBhcnRzLmFkZFVuaXF1ZVBhcnQoYXR0cy53aWxscG93ZXIubGFiZWwsIGF0dHMud2lsbHBvd2VyLnZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKG1vZGlmaWVycy5jb21wb3N1cmUpIHBhcnRzLmFkZFVuaXF1ZVBhcnQoJ1NSNS5Cb251cycsIG1vZGlmaWVycy5jb21wb3N1cmUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocm9sbElkID09PSAnanVkZ2VfaW50ZW50aW9ucycpIHtcclxuICAgICAgICAgICAgcGFydHMuYWRkVW5pcXVlUGFydChhdHRzLmNoYXJpc21hLmxhYmVsLCBhdHRzLmNoYXJpc21hLnZhbHVlKTtcclxuICAgICAgICAgICAgcGFydHMuYWRkVW5pcXVlUGFydChhdHRzLmludHVpdGlvbi5sYWJlbCwgYXR0cy5pbnR1aXRpb24udmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAobW9kaWZpZXJzLmp1ZGdlX2ludGVudGlvbnMpIHBhcnRzLmFkZFVuaXF1ZVBhcnQoJ1NSNS5Cb251cycsIG1vZGlmaWVycy5qdWRnZV9pbnRlbnRpb25zKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJvbGxJZCA9PT0gJ2xpZnRfY2FycnknKSB7XHJcbiAgICAgICAgICAgIHBhcnRzLmFkZFVuaXF1ZVBhcnQoYXR0cy5zdHJlbmd0aC5sYWJlbCwgYXR0cy5zdHJlbmd0aC52YWx1ZSk7XHJcbiAgICAgICAgICAgIHBhcnRzLmFkZFVuaXF1ZVBhcnQoYXR0cy5ib2R5LmxhYmVsLCBhdHRzLmJvZHkudmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAobW9kaWZpZXJzLmxpZnRfY2FycnkpIHBhcnRzLmFkZFVuaXF1ZVBhcnQoJ1NSNS5Cb251cycsIG1vZGlmaWVycy5saWZ0X2NhcnJ5KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJvbGxJZCA9PT0gJ21lbW9yeScpIHtcclxuICAgICAgICAgICAgcGFydHMuYWRkVW5pcXVlUGFydChhdHRzLndpbGxwb3dlci5sYWJlbCwgYXR0cy53aWxscG93ZXIudmFsdWUpO1xyXG4gICAgICAgICAgICBwYXJ0cy5hZGRVbmlxdWVQYXJ0KGF0dHMubG9naWMubGFiZWwsIGF0dHMubG9naWMudmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAobW9kaWZpZXJzLm1lbW9yeSkgcGFydHMuYWRkVW5pcXVlUGFydCgnU1I1LkJvbnVzJywgbW9kaWZpZXJzLm1lbW9yeSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9hZGRHbG9iYWxQYXJ0cyhwYXJ0cyk7XHJcbiAgICAgICAgcmV0dXJuIFNoYWRvd3J1blJvbGxlci5hZHZhbmNlZFJvbGwoe1xyXG4gICAgICAgICAgICBldmVudDogb3B0aW9ucz8uZXZlbnQsXHJcbiAgICAgICAgICAgIGFjdG9yOiB0aGlzLFxyXG4gICAgICAgICAgICBwYXJ0czogcGFydHMubGlzdCxcclxuICAgICAgICAgICAgdGl0bGU6IGAke3RpdGxlfSBUZXN0YCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByb2xsU2tpbGwoc2tpbGw6IFNraWxsRmllbGQsIG9wdGlvbnM/OiBTa2lsbFJvbGxPcHRpb25zKSB7XHJcbiAgICAgICAgLy8gTk9URTogQ3VycmVudGx5IGRlZmF1bHRpbmcgaGFwcGVucyBhdCBtdWx0aXBsZSBwbGFjZXMsIHdoaWNoIGlzIHdoeSBTa2lsbEZsb3cuaGFuZGxlRGVmYXVsdGluZyBpc24ndCB1c2VkXHJcbiAgICAgICAgLy8gICAgICAgaGVyZSwgeWV0LiBBIGdlbmVyYWwgc2tpbGwgdXNhZ2UgY2xlYW4gdXAgYmV0d2VlbiBTa2lsbCwgQXR0cmlidXRlIGFuZCBJdGVtIGFjdGlvbiBoYW5kbGluZyBpcyBuZWVkZWQuXHJcbiAgICAgICAgaWYgKCFTa2lsbEZsb3cuYWxsb3dSb2xsKHNraWxsKSkge1xyXG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuV2FybmluZ3MuU2tpbGxDYW50QmVEZWZhdWx0JykpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBMZWdhY3kgc2tpbGxzIGhhdmUgYSBsYWJlbCwgYnV0IG5vIG5hbWUuIEN1c3RvbSBza2lsbHMgaGF2ZSBhIG5hbWUgYnV0IG5vIGxhYmVsLlxyXG4gICAgICAgIGNvbnN0IGxhYmVsID0gc2tpbGwubGFiZWwgPyBnYW1lLmkxOG4ubG9jYWxpemUoc2tpbGwubGFiZWwpIDogc2tpbGwubmFtZTtcclxuICAgICAgICBjb25zdCB0aXRsZSA9IGxhYmVsO1xyXG5cclxuICAgICAgICAvLyBTaW5jZSBvcHRpb25zIGNhbiBwcm92aWRlIGFuIGF0dHJpYnV0ZSwgaWdub3JlIGluY29tcGxldGUgc2lsbCBhdHRyaWJ1dGUgY29uZmlndXJhdGlvbi5cclxuICAgICAgICBjb25zdCBhdHRyaWJ1dGVOYW1lID0gb3B0aW9ucz8uYXR0cmlidXRlID8gb3B0aW9ucy5hdHRyaWJ1dGUgOiBza2lsbC5hdHRyaWJ1dGU7XHJcbiAgICAgICAgY29uc3QgYXR0cmlidXRlID0gdGhpcy5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSk7XHJcbiAgICAgICAgaWYgKCFhdHRyaWJ1dGUpIHtcclxuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5FcnJvcnMuU2tpbGxXaXRob3V0QXR0cmlidXRlJykpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBsaW1pdCA9IGF0dHJpYnV0ZS5saW1pdCA/IHRoaXMuZ2V0TGltaXQoYXR0cmlidXRlLmxpbWl0KSA6IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBwYXJ0cyB3aXRoIGFsd2F5cyBuZWVkZWQgc2tpbGwgZGF0YS5cclxuICAgICAgICBjb25zdCBwYXJ0cyA9IG5ldyBQYXJ0c0xpc3Q8bnVtYmVyPigpO1xyXG4gICAgICAgIHBhcnRzLmFkZFVuaXF1ZVBhcnQobGFiZWwsIHNraWxsLnZhbHVlKTtcclxuICAgICAgICB0aGlzLl9hZGRNYXRyaXhQYXJ0cyhwYXJ0cywgW2F0dHJpYnV0ZSwgc2tpbGxdKTtcclxuICAgICAgICB0aGlzLl9hZGRHbG9iYWxQYXJ0cyhwYXJ0cyk7XHJcblxyXG4gICAgICAgIC8vIERpcmVjdGx5IHRlc3QsIHdpdGhvdXQgZnVydGhlciBza2lsbCBkaWFsb2cuXHJcbiAgICAgICAgaWYgKG9wdGlvbnM/LmV2ZW50ICYmIEhlbHBlcnMuaGFzTW9kaWZpZXJzKG9wdGlvbnM/LmV2ZW50KSkge1xyXG4gICAgICAgICAgICBwYXJ0cy5hZGRVbmlxdWVQYXJ0KGF0dHJpYnV0ZS5sYWJlbCwgYXR0cmlidXRlLnZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZXZlbnRbQ09ORklHLlNSNS5rYm1vZC5TUEVDXSkgcGFydHMuYWRkVW5pcXVlUGFydCgnU1I1LlNwZWNpYWxpemF0aW9uJywgMik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgU2hhZG93cnVuUm9sbGVyLmFkdmFuY2VkUm9sbCh7XHJcbiAgICAgICAgICAgICAgICBldmVudDogb3B0aW9ucy5ldmVudCxcclxuICAgICAgICAgICAgICAgIGFjdG9yOiB0aGlzLFxyXG4gICAgICAgICAgICAgICAgcGFydHM6IHBhcnRzLmxpc3QsXHJcbiAgICAgICAgICAgICAgICBsaW1pdCxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBgJHt0aXRsZX0gJHtnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5UZXN0Jyl9YCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGaXJzdCBhc2sgdXNlciBhYm91dCBza2lsbCBkZXRhaWxzLlxyXG4gICAgICAgIGNvbnN0IHNraWxsUm9sbERpYWxvZ09wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIHNraWxsLFxyXG4gICAgICAgICAgICBhdHRyaWJ1dGU6IGF0dHJpYnV0ZU5hbWVcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHNraWxsRGlhbG9nID0gYXdhaXQgU2hhZG93cnVuQWN0b3JEaWFsb2dzLmNyZWF0ZVNraWxsRGlhbG9nKHRoaXMsIHNraWxsUm9sbERpYWxvZ09wdGlvbnMsIHBhcnRzKTtcclxuICAgICAgICBjb25zdCBza2lsbEFjdGlvbkRhdGEgPSBhd2FpdCBza2lsbERpYWxvZy5zZWxlY3QoKTtcclxuXHJcbiAgICAgICAgaWYgKHNraWxsRGlhbG9nLmNhbmNlbGVkKSByZXR1cm47XHJcblxyXG4gICAgICAgIHJldHVybiBhd2FpdCBTaGFkb3dydW5Sb2xsZXIuYWR2YW5jZWRSb2xsKHtcclxuICAgICAgICAgICAgZXZlbnQ6IG9wdGlvbnM/LmV2ZW50LFxyXG4gICAgICAgICAgICBhY3RvcjogdGhpcyxcclxuICAgICAgICAgICAgcGFydHM6IHNraWxsQWN0aW9uRGF0YS5wYXJ0cy5saXN0LFxyXG4gICAgICAgICAgICBsaW1pdDogc2tpbGxBY3Rpb25EYXRhLmxpbWl0LFxyXG4gICAgICAgICAgICB0aXRsZTogc2tpbGxBY3Rpb25EYXRhLnRpdGxlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHJvbGxEcm9uZVBlcmNlcHRpb24ob3B0aW9ucz86IEFjdG9yUm9sbE9wdGlvbnMpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNWZWhpY2xlKCkpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgYWN0b3JEYXRhID0gZHVwbGljYXRlKHRoaXMuZGF0YS5kYXRhKSBhcyBWZWhpY2xlQWN0b3JEYXRhO1xyXG4gICAgICAgIGlmIChhY3RvckRhdGEuY29udHJvbE1vZGUgPT09ICdhdXRvcGlsb3QnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbmV3IFBhcnRzTGlzdDxudW1iZXI+KCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwaWxvdCA9IEhlbHBlcnMuY2FsY1RvdGFsKGFjdG9yRGF0YS52ZWhpY2xlX3N0YXRzLnBpbG90KTtcclxuICAgICAgICAgICAgLy8gVE9ETyBwb3NzaWJseSBsb29rIGZvciBhdXRvc29mdCBpdGVtIGxldmVsP1xyXG4gICAgICAgICAgICBjb25zdCBwZXJjZXB0aW9uID0gdGhpcy5maW5kQWN0aXZlU2tpbGwoJ3BlcmNlcHRpb24nKTtcclxuICAgICAgICAgICAgY29uc3QgbGltaXQgPSB0aGlzLmZpbmRMaW1pdCgnc2Vuc29yJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAocGVyY2VwdGlvbiAmJiBsaW1pdCkge1xyXG4gICAgICAgICAgICAgICAgcGFydHMuYWRkUGFydCgnU1I1LlZlaGljbGUuQ2xlYXJzaWdodCcsIEhlbHBlcnMuY2FsY1RvdGFsKHBlcmNlcHRpb24pKTtcclxuICAgICAgICAgICAgICAgIHBhcnRzLmFkZFBhcnQoJ1NSNS5WZWhpY2xlLlN0YXRzLlBpbG90JywgcGlsb3QpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2FkZEdsb2JhbFBhcnRzKHBhcnRzKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU2hhZG93cnVuUm9sbGVyLmFkdmFuY2VkUm9sbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IG9wdGlvbnM/LmV2ZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdG9yOiB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnRzOiBwYXJ0cy5saXN0LFxyXG4gICAgICAgICAgICAgICAgICAgIGxpbWl0LFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5MYWJlbHMuQWN0b3JTaGVldC5Sb2xsRHJvbmVQZXJjZXB0aW9uJyksXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucm9sbEFjdGl2ZVNraWxsKCdwZXJjZXB0aW9uJywgb3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHJvbGxQaWxvdFZlaGljbGUob3B0aW9ucz86IEFjdG9yUm9sbE9wdGlvbnMpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNWZWhpY2xlKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYWN0b3JEYXRhID0gZHVwbGljYXRlKHRoaXMuZGF0YS5kYXRhKSBhcyBWZWhpY2xlQWN0b3JEYXRhO1xyXG4gICAgICAgIGlmIChhY3RvckRhdGEuY29udHJvbE1vZGUgPT09ICdhdXRvcGlsb3QnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbmV3IFBhcnRzTGlzdDxudW1iZXI+KCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwaWxvdCA9IEhlbHBlcnMuY2FsY1RvdGFsKGFjdG9yRGF0YS52ZWhpY2xlX3N0YXRzLnBpbG90KTtcclxuICAgICAgICAgICAgbGV0IHNraWxsOiBTa2lsbEZpZWxkIHwgdW5kZWZpbmVkID0gdGhpcy5nZXRWZWhpY2xlVHlwZVNraWxsKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVudmlyb25tZW50ID0gYWN0b3JEYXRhLmVudmlyb25tZW50O1xyXG4gICAgICAgICAgICBjb25zdCBsaW1pdCA9IHRoaXMuZmluZExpbWl0KGVudmlyb25tZW50KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChza2lsbCAmJiBsaW1pdCkge1xyXG4gICAgICAgICAgICAgICAgcGFydHMuYWRkUGFydCgnU1I1LlZlaGljbGUuU3RhdHMuUGlsb3QnLCBwaWxvdCk7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPIHBvc3NpYmx5IGxvb2sgZm9yIGF1dG9zb2Z0IGl0ZW0gbGV2ZWw/XHJcbiAgICAgICAgICAgICAgICBwYXJ0cy5hZGRQYXJ0KCdTUjUuVmVoaWNsZS5NYW5ldXZlcmluZycsIEhlbHBlcnMuY2FsY1RvdGFsKHNraWxsKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5fYWRkR2xvYmFsUGFydHMocGFydHMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBTaGFkb3dydW5Sb2xsZXIuYWR2YW5jZWRSb2xsKHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudDogb3B0aW9ucz8uZXZlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0b3I6IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFydHM6IHBhcnRzLmxpc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgbGltaXQsXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkxhYmVscy5BY3RvclNoZWV0LlJvbGxQaWxvdFZlaGljbGVUZXN0JyksXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNraWxsTmFtZSA9IHRoaXMuZ2V0VmVoaWNsZVR5cGVTa2lsbE5hbWUoKTtcclxuICAgICAgICAgICAgaWYgKCFza2lsbE5hbWUpIHJldHVybjtcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucm9sbEFjdGl2ZVNraWxsKHNraWxsTmFtZSwgb3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHJvbGxEcm9uZUluZmlsdHJhdGlvbihvcHRpb25zPzogQWN0b3JSb2xsT3B0aW9ucykge1xyXG4gICAgICAgIGlmICghdGhpcy5pc1ZlaGljbGUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBhY3RvckRhdGEgPSBkdXBsaWNhdGUodGhpcy5kYXRhLmRhdGEpIGFzIFZlaGljbGVBY3RvckRhdGE7XHJcbiAgICAgICAgaWYgKGFjdG9yRGF0YS5jb250cm9sTW9kZSA9PT0gJ2F1dG9waWxvdCcpIHtcclxuICAgICAgICAgICAgY29uc3QgcGFydHMgPSBuZXcgUGFydHNMaXN0PG51bWJlcj4oKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHBpbG90ID0gSGVscGVycy5jYWxjVG90YWwoYWN0b3JEYXRhLnZlaGljbGVfc3RhdHMucGlsb3QpO1xyXG4gICAgICAgICAgICAvLyBUT0RPIHBvc3NpYmx5IGxvb2sgZm9yIGF1dG9zb2Z0IGl0ZW0gbGV2ZWw/XHJcbiAgICAgICAgICAgIGNvbnN0IHNuZWFraW5nID0gdGhpcy5maW5kQWN0aXZlU2tpbGwoJ3NuZWFraW5nJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbWl0ID0gdGhpcy5maW5kTGltaXQoJ3NlbnNvcicpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNuZWFraW5nICYmIGxpbWl0KSB7XHJcbiAgICAgICAgICAgICAgICBwYXJ0cy5hZGRQYXJ0KCdTUjUuVmVoaWNsZS5TdGVhbHRoJywgSGVscGVycy5jYWxjVG90YWwoc25lYWtpbmcpKTtcclxuICAgICAgICAgICAgICAgIHBhcnRzLmFkZFBhcnQoJ1NSNS5WZWhpY2xlLlN0YXRzLlBpbG90JywgcGlsb3QpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2FkZEdsb2JhbFBhcnRzKHBhcnRzKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU2hhZG93cnVuUm9sbGVyLmFkdmFuY2VkUm9sbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IG9wdGlvbnM/LmV2ZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdG9yOiB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnRzOiBwYXJ0cy5saXN0LFxyXG4gICAgICAgICAgICAgICAgICAgIGxpbWl0LFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5MYWJlbHMuQWN0b3JTaGVldC5Sb2xsRHJvbmVJbmZpbHRyYXRpb24nKSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yb2xsQWN0aXZlU2tpbGwoJ3NuZWFraW5nJywgb3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJvbGxLbm93bGVkZ2VTa2lsbChjYXRJZDogc3RyaW5nLCBza2lsbElkOiBzdHJpbmcsIG9wdGlvbnM/OiBTa2lsbFJvbGxPcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3QgY2F0ZWdvcnkgPSBkdXBsaWNhdGUodGhpcy5kYXRhLmRhdGEuc2tpbGxzLmtub3dsZWRnZVtjYXRJZF0pO1xyXG4gICAgICAgIGNvbnN0IHNraWxsID0gZHVwbGljYXRlKGNhdGVnb3J5LnZhbHVlW3NraWxsSWRdKTtcclxuICAgICAgICBza2lsbC5hdHRyaWJ1dGUgPSBjYXRlZ29yeS5hdHRyaWJ1dGU7XHJcbiAgICAgICAgc2tpbGwubGFiZWwgPSBza2lsbC5uYW1lO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJvbGxTa2lsbChza2lsbCwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgcm9sbExhbmd1YWdlU2tpbGwoc2tpbGxJZDogc3RyaW5nLCBvcHRpb25zPzogU2tpbGxSb2xsT3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IHNraWxsID0gZHVwbGljYXRlKHRoaXMuZGF0YS5kYXRhLnNraWxscy5sYW5ndWFnZS52YWx1ZVtza2lsbElkXSk7XHJcbiAgICAgICAgc2tpbGwuYXR0cmlidXRlID0gJ2ludHVpdGlvbic7XHJcbiAgICAgICAgc2tpbGwubGFiZWwgPSBza2lsbC5uYW1lO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJvbGxTa2lsbChza2lsbCwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgcm9sbEFjdGl2ZVNraWxsKHNraWxsSWQ6IHN0cmluZywgb3B0aW9ucz86IFNraWxsUm9sbE9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBza2lsbCA9IGR1cGxpY2F0ZSh0aGlzLmRhdGEuZGF0YS5za2lsbHMuYWN0aXZlW3NraWxsSWRdKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5yb2xsU2tpbGwoc2tpbGwsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJvbGxBdHRyaWJ1dGUoYXR0SWQsIG9wdGlvbnM/OiBBY3RvclJvbGxPcHRpb25zKSB7XHJcbiAgICAgICAgbGV0IHRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKENPTkZJRy5TUjUuYXR0cmlidXRlc1thdHRJZF0pO1xyXG4gICAgICAgIGNvbnN0IGF0dCA9IGR1cGxpY2F0ZSh0aGlzLmRhdGEuZGF0YS5hdHRyaWJ1dGVzW2F0dElkXSk7XHJcbiAgICAgICAgY29uc3QgYXR0cyA9IGR1cGxpY2F0ZSh0aGlzLmRhdGEuZGF0YS5hdHRyaWJ1dGVzKTtcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IG5ldyBQYXJ0c0xpc3Q8bnVtYmVyPigpO1xyXG4gICAgICAgIHBhcnRzLmFkZFBhcnQoYXR0LmxhYmVsLCBhdHQudmFsdWUpO1xyXG4gICAgICAgIGxldCBkaWFsb2dEYXRhID0ge1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGU6IGF0dCxcclxuICAgICAgICAgICAgYXR0cmlidXRlczogYXR0cyxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGxldCBjYW5jZWwgPSB0cnVlO1xyXG4gICAgICAgIHJlbmRlclRlbXBsYXRlKCdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL3JvbGxzL3NpbmdsZS1hdHRyaWJ1dGUuaHRtbCcsIGRpYWxvZ0RhdGEpLnRoZW4oKGRsZykgPT4ge1xyXG4gICAgICAgICAgICBuZXcgRGlhbG9nKHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBgJHt0aXRsZX0gQXR0cmlidXRlIFRlc3RgLFxyXG4gICAgICAgICAgICAgICAgY29udGVudDogZGxnLFxyXG4gICAgICAgICAgICAgICAgYnV0dG9uczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvbGw6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDb250aW51ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiAoY2FuY2VsID0gZmFsc2UpLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogJ3JvbGwnLFxyXG4gICAgICAgICAgICAgICAgY2xvc2U6IGFzeW5jIChodG1sKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbmNlbCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhdHQySWQ6IHN0cmluZyA9IEhlbHBlcnMucGFyc2VJbnB1dFRvU3RyaW5nKCQoaHRtbCkuZmluZCgnW25hbWU9YXR0cmlidXRlMl0nKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGF0dDI6IEF0dHJpYnV0ZUZpZWxkIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhdHQySWQgIT09ICdub25lJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHQyID0gYXR0c1thdHQySWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0Mj8ubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRzLmFkZFBhcnQoYXR0Mi5sYWJlbCwgYXR0Mi52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhdHQySWRMYWJlbCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT05GSUcuU1I1LmF0dHJpYnV0ZXNbYXR0MklkXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZSArPSBgICsgJHthdHQySWRMYWJlbH1gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhdHQySWQgPT09ICdkZWZhdWx0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0cy5hZGRVbmlxdWVQYXJ0KCdTUjUuRGVmYXVsdGluZycsIC0xKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWRkTWF0cml4UGFydHMocGFydHMsIFthdHQsIGF0dDJdKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hZGRHbG9iYWxQYXJ0cyhwYXJ0cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNoYWRvd3J1blJvbGxlci5hZHZhbmNlZFJvbGwoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudDogb3B0aW9ucz8uZXZlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBgJHt0aXRsZX0gVGVzdGAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdG9yOiB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0czogcGFydHMubGlzdCxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pLnJlbmRlcih0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfYWRkTWF0cml4UGFydHMocGFydHM6IFBhcnRzTGlzdDxudW1iZXI+LCBhdHRzKSB7XHJcbiAgICAgICAgaWYgKEhlbHBlcnMuaXNNYXRyaXgoYXR0cykpIHtcclxuICAgICAgICAgICAgaWYgKCEoXCJtYXRyaXhcIiBpbiB0aGlzLmRhdGEuZGF0YSkpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1hdHJpeCA9IHRoaXMuZGF0YS5kYXRhLm1hdHJpeDtcclxuICAgICAgICAgICAgaWYgKG1hdHJpeC5ob3Rfc2ltKSBwYXJ0cy5hZGRVbmlxdWVQYXJ0KCdTUjUuSG90U2ltJywgMik7XHJcbiAgICAgICAgICAgIGlmIChtYXRyaXgucnVubmluZ19zaWxlbnQpIHBhcnRzLmFkZFVuaXF1ZVBhcnQoJ1NSNS5SdW5uaW5nU2lsZW50JywgLTIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9hZGRHbG9iYWxQYXJ0cyhwYXJ0czogUGFydHNMaXN0PG51bWJlcj4pIHtcclxuICAgICAgICBpZiAodGhpcy5kYXRhLmRhdGEubW9kaWZpZXJzLmdsb2JhbCkge1xyXG4gICAgICAgICAgICBwYXJ0cy5hZGRVbmlxdWVQYXJ0KCdTUjUuR2xvYmFsJywgdGhpcy5kYXRhLmRhdGEubW9kaWZpZXJzLmdsb2JhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9hZGREZWZlbnNlUGFydHMocGFydHM6IFBhcnRzTGlzdDxudW1iZXI+KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNWZWhpY2xlKCkpIHtcclxuICAgICAgICAgICAgY29uc3QgcGlsb3QgPSB0aGlzLmZpbmRWZWhpY2xlU3RhdCgncGlsb3QnKTtcclxuICAgICAgICAgICAgaWYgKHBpbG90KSB7XHJcbiAgICAgICAgICAgICAgICBwYXJ0cy5hZGRVbmlxdWVQYXJ0KHBpbG90LmxhYmVsLCBIZWxwZXJzLmNhbGNUb3RhbChwaWxvdCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5nZXRWZWhpY2xlVHlwZVNraWxsKCk7XHJcbiAgICAgICAgICAgIGlmIChza2lsbCkge1xyXG4gICAgICAgICAgICAgICAgcGFydHMuYWRkVW5pcXVlUGFydCgnU1I1LlZlaGljbGUuTWFuZXV2ZXJpbmcnLCBIZWxwZXJzLmNhbGNUb3RhbChza2lsbCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgcmVhY3Rpb24gPSB0aGlzLmZpbmRBdHRyaWJ1dGUoJ3JlYWN0aW9uJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGludHVpdGlvbiA9IHRoaXMuZmluZEF0dHJpYnV0ZSgnaW50dWl0aW9uJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVhY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIHBhcnRzLmFkZFVuaXF1ZVBhcnQocmVhY3Rpb24ubGFiZWwgfHwgJ1NSNS5SZWFjdGlvbicsIHJlYWN0aW9uLnZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW50dWl0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJ0cy5hZGRVbmlxdWVQYXJ0KGludHVpdGlvbi5sYWJlbCB8fCAnU1I1LkludHVpdGlvbicsIGludHVpdGlvbi52YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG1vZCA9IHRoaXMuZ2V0TW9kaWZpZXIoJ2RlZmVuc2UnKTtcclxuICAgICAgICBpZiAobW9kKSB7XHJcbiAgICAgICAgICAgIHBhcnRzLmFkZFVuaXF1ZVBhcnQoJ1NSNS5Cb251cycsIG1vZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9hZGRBcm1vclBhcnRzKHBhcnRzOiBQYXJ0c0xpc3Q8bnVtYmVyPikge1xyXG4gICAgICAgIGNvbnN0IGFybW9yID0gdGhpcy5nZXRBcm1vcigpO1xyXG4gICAgICAgIGlmIChhcm1vcikge1xyXG4gICAgICAgICAgICBwYXJ0cy5hZGRVbmlxdWVQYXJ0KGFybW9yLmxhYmVsIHx8ICdTUjUuQXJtb3InLCBhcm1vci5iYXNlKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgcGFydCBvZiBhcm1vci5tb2QpIHtcclxuICAgICAgICAgICAgICAgIHBhcnRzLmFkZFVuaXF1ZVBhcnQocGFydC5uYW1lLCBwYXJ0LnZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYXN5bmMgcHVzaFRoZUxpbWl0KGxpKSB7XHJcbiAgICAgICAgbGV0IG1zZzogQ2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChsaS5kYXRhKCkubWVzc2FnZUlkKTtcclxuXHJcbiAgICAgICAgaWYgKG1zZy5nZXRGbGFnKFNZU1RFTV9OQU1FLCBGTEFHUy5NZXNzYWdlQ3VzdG9tUm9sbCkpIHtcclxuICAgICAgICAgICAgbGV0IGFjdG9yID0gKG1zZy51c2VyLmNoYXJhY3RlciBhcyB1bmtub3duKSBhcyBTUjVBY3RvcjtcclxuICAgICAgICAgICAgaWYgKCFhY3Rvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdG9rZW5zID0gSGVscGVycy5nZXRDb250cm9sbGVkVG9rZW5zKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodG9rZW5zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0b2tlbiBvZiB0b2tlbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuLmFjdG9yLm93bmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RvciA9IHRva2VuLmFjdG9yIGFzIFNSNUFjdG9yO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGFjdG9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IG5ldyBQYXJ0c0xpc3Q8bnVtYmVyPigpO1xyXG4gICAgICAgICAgICAgICAgcGFydHMuYWRkVW5pcXVlUGFydCgnU1I1LlB1c2hUaGVMaW1pdCcsIGFjdG9yLmdldEVkZ2UoKS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBTaGFkb3dydW5Sb2xsZXIuYmFzaWNSb2xsKHtcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogYCAtICR7Z2FtZS5pMThuLmxvY2FsaXplKCdTUjUuUHVzaFRoZUxpbWl0Jyl9YCxcclxuICAgICAgICAgICAgICAgICAgICBwYXJ0czogcGFydHMubGlzdCxcclxuICAgICAgICAgICAgICAgICAgICBhY3RvcjogYWN0b3IsXHJcbiAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBhY3Rvci51cGRhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGF0YS5hdHRyaWJ1dGVzLmVkZ2UudXNlcyc6IGFjdG9yLmdldEVkZ2UoKS51c2VzIC0gMSxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LlNlbGVjdFRva2VuTWVzc2FnZScpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYXN5bmMgc2Vjb25kQ2hhbmNlKGxpKSB7XHJcbiAgICAgICAgbGV0IG1zZzogQ2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChsaS5kYXRhKCkubWVzc2FnZUlkKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgbGV0IHJvbGw6IFJvbGwgPSBKU09OLnBhcnNlKG1zZy5kYXRhPy5yb2xsKTtcclxuICAgICAgICBsZXQgZm9ybXVsYSA9IHJvbGwuZm9ybXVsYTtcclxuICAgICAgICBsZXQgaGl0cyA9IHJvbGwudG90YWw7XHJcbiAgICAgICAgbGV0IHJlID0gLyhcXGQrKWQ2LztcclxuICAgICAgICBsZXQgbWF0Y2hlcyA9IGZvcm11bGEubWF0Y2gocmUpO1xyXG4gICAgICAgIGlmIChtYXRjaGVzICYmIG1hdGNoZXNbMV0pIHtcclxuICAgICAgICAgICAgbGV0IG1hdGNoID0gbWF0Y2hlc1sxXTtcclxuICAgICAgICAgICAgbGV0IHBvb2wgPSBwYXJzZUludChtYXRjaC5yZXBsYWNlKCdkNicsICcnKSk7XHJcbiAgICAgICAgICAgIGlmICghaXNOYU4ocG9vbCkgJiYgIWlzTmFOKGhpdHMpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYWN0b3IgPSAobXNnLnVzZXIuY2hhcmFjdGVyIGFzIHVua25vd24pIGFzIFNSNUFjdG9yO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFhY3Rvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VucyA9IEhlbHBlcnMuZ2V0Q29udHJvbGxlZFRva2VucygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0b2tlbiBvZiB0b2tlbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbi5hY3Rvci5vd25lcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdG9yID0gdG9rZW4uYWN0b3IgYXMgU1I1QWN0b3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoYWN0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IG5ldyBQYXJ0c0xpc3Q8bnVtYmVyPigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcnRzLmFkZFVuaXF1ZVBhcnQoJ1NSNS5PcmlnaW5hbERpY2VQb29sJywgcG9vbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFydHMuYWRkVW5pcXVlUGFydCgnU1I1LlN1Y2Nlc3NlcycsIC1oaXRzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNoYWRvd3J1blJvbGxlci5iYXNpY1JvbGwoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogYCAtIFNlY29uZCBDaGFuY2VgLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0czogcGFydHMubGlzdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0b3I6IGFjdG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rvci51c2VFZGdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuU2VsZWN0VG9rZW5NZXNzYWdlJykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogT3ZlcnJpZGUgc2V0RmxhZyB0byByZW1vdmUgdGhlICdTUjUuJyBmcm9tIGtleXMgaW4gbW9kbGlzdHMsIG90aGVyd2lzZSBpdCBoYW5kbGVzIHRoZW0gYXMgZW1iZWRkZWQga2V5c1xyXG4gICAgICogQHBhcmFtIHNjb3BlXHJcbiAgICAgKiBAcGFyYW0ga2V5XHJcbiAgICAgKiBAcGFyYW0gdmFsdWVcclxuICAgICAqL1xyXG4gICAgc2V0RmxhZyhzY29wZTogc3RyaW5nLCBrZXk6IHN0cmluZywgdmFsdWU6IGFueSk6IFByb21pc2U8YW55PiB7XHJcbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBIZWxwZXJzLm9uU2V0RmxhZyh2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLnNldEZsYWcoc2NvcGUsIGtleSwgbmV3VmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogT3ZlcnJpZGUgZ2V0RmxhZyB0byBhZGQgYmFjayB0aGUgJ1NSNS4nIGtleXMgY29ycmVjdGx5IHRvIGJlIGhhbmRsZWRcclxuICAgICAqIEBwYXJhbSBzY29wZVxyXG4gICAgICogQHBhcmFtIGtleVxyXG4gICAgICovXHJcbiAgICBnZXRGbGFnKHNjb3BlOiBzdHJpbmcsIGtleTogc3RyaW5nKTogYW55IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gc3VwZXIuZ2V0RmxhZyhzY29wZSwga2V5KTtcclxuICAgICAgICByZXR1cm4gSGVscGVycy5vbkdldEZsYWcoZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFJldHVybiBlaXRoZXIgdGhlIGxpbmtlZCB0b2tlbiBvciB0aGUgdG9rZW4gb2YgdGhlIHN5bnRoZXRpYyBhY3Rvci5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0cnVuIFdpbGwgcmV0dXJuIG51bGwgc2hvdWxkIG5vIHRva2VuIGhhdmUgYmVlbiBwbGFjZWQgb24gc2NlbmUuXHJcbiAgICAgKi9cclxuICAgIGdldFRva2VuKCk6IFRva2VuIHtcclxuICAgICAgICAvLyBMaW5rZWQgYWN0b3JzIGNhbiBvbmx5IGhhdmUgb25lIHRva2VuLCB3aGljaCBpc24ndCBzdG9yZWQgd2l0aGluIGFjdG9yIGRhdGEuLi5cclxuICAgICAgICBpZiAodGhpcy5faXNMaW5rZWRUb1Rva2VuKCkgJiYgdGhpcy5oYXNUb2tlbigpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmtlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnN0IHRva2VucyA9IHRoaXMuZ2V0QWN0aXZlVG9rZW5zKGxpbmtlZCk7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgYXNzdW1lcyBmb3IgYSB0b2tlbiB0byBleGlzdCBhbmQgc2hvdWxkIGZhaWwgaWYgbm90LlxyXG4gICAgICAgICAgICByZXR1cm4gdG9rZW5zWzBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVW5saW5rZWQgYWN0b3JzIGNhbiBoYXZlIG11bHRpcGxlIGFjdGl2ZSB0b2tlbiBidXQgZWFjaCBoYXZlIHRoZWlycyBkaXJlY3RseSBhdHRhY2hlZC4uLlxyXG4gICAgICAgIHJldHVybiB0aGlzLnRva2VuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlcmUgaXMgbm8gbmVlZCBmb3IgYSB0b2tlbiB0byBwbGFjZWQuIFRoZSBwcm90b3R5cGUgdG9rZW4gaXMgZW5vdWdoLlxyXG4gICAgICovXHJcbiAgICBfaXNMaW5rZWRUb1Rva2VuKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgIC8vIElmIGFuIGFjdG9yIGlzIGxpbmtlZCwgYWxsIGl0J3MgY29waWVzIGFsc28gY29udGFpbiB0aGlzIGxpbmtlZCBzdGF0dXMsIGV2ZW4gaWYgdGhleSdyZSBub3QuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS50b2tlbi5hY3RvckxpbmsgJiYgIXRoaXMudG9rZW47XHJcbiAgICB9XHJcblxyXG4gICAgaGFzVG9rZW4oKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWN0aXZlVG9rZW5zKCkubGVuZ3RoID4gMDtcclxuICAgIH1cclxuXHJcbiAgICBoYXNBY3RpdmVQbGF5ZXJPd25lcigpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBwbGF5ZXJzID0gdGhpcy5nZXRBY3RpdmVQbGF5ZXJPd25lcnMoKTtcclxuICAgICAgICByZXR1cm4gcGxheWVycy5sZW5ndGggPiAwO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFjdGl2ZVBsYXllcigpOiBVc2VyfG51bGwge1xyXG4gICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgIGlmICghdGhpcy5oYXNQbGF5ZXJPd25lcikge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgdXNlciBvZiBnYW1lLnVzZXJzLmVudGl0aWVzKSB7XHJcbiAgICAgICAgICAgIGlmICghdXNlci5hY3RpdmUgfHwgdXNlci5pc0dNKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5pZCA9PT0gdXNlci5jaGFyYWN0ZXIuaWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1c2VyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBY3RpdmVQbGF5ZXJPd25lcnMoKTogVXNlcltdIHtcclxuICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICBjb25zdCB1c2VycyA9IHRoaXMuZ2V0VXNlcnMoJ09XTkVSJyk7XHJcbiAgICAgICAgcmV0dXJuIHVzZXJzLmZpbHRlcih1c2VyID0+IHVzZXIuYWN0aXZlKTtcclxuICAgIH1cclxuXHJcbiAgICBfX2FkZERhbWFnZVRvVHJhY2tWYWx1ZShkYW1hZ2U6IERhbWFnZURhdGEsIHRyYWNrOiBUcmFja1R5cGV8T3ZlcmZsb3dUcmFja1R5cGV8Q29uZGl0aW9uRGF0YSk6IFRyYWNrVHlwZXxPdmVyZmxvd1RyYWNrVHlwZXxDb25kaXRpb25EYXRhIHtcclxuICAgICAgICBpZiAoZGFtYWdlLnZhbHVlID09PSAwKSByZXR1cm4gdHJhY2s7XHJcbiAgICAgICAgaWYgKHRyYWNrLnZhbHVlID09PSB0cmFjay5tYXgpIHJldHVybiB0cmFjaztcclxuXHJcbiAgICAgICAgLy8gIEF2b2lkIGNyb3NzIHJlZmVyZW5jaW5nLlxyXG4gICAgICAgIHRyYWNrID0gZHVwbGljYXRlKHRyYWNrKTtcclxuXHJcbiAgICAgICAgdHJhY2sudmFsdWUgKz0gZGFtYWdlLnZhbHVlO1xyXG4gICAgICAgIGlmICh0cmFjay52YWx1ZSA+IHRyYWNrLm1heCkge1xyXG4gICAgICAgICAgICAvLyBkZXYgZXJyb3IsIG5vdCByZWFsbHkgbWVhbnQgdG8gYmUgZXZlciBzZWVuIGJ5IHVzZXJzLiBUaGVyZWZvcmUgbm8gbG9jYWxpemF0aW9uLlxyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRGFtYWdlIGRpZCBvdmVyZmxvdyB0aGUgdHJhY2ssIHdoaWNoIHNob3VsZG4ndCBoYXBwZW4gYXQgdGhpcyBzdGFnZS4gRGFtYWdlIGhhcyBiZWVuIHNldCB0byBtYXguIFBsZWFzZSB1c2UgYXBwbHlEYW1hZ2UuXCIpXHJcbiAgICAgICAgICAgIHRyYWNrLnZhbHVlID0gdHJhY2subWF4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRyYWNrO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIF9hZGREYW1hZ2VUb0RldmljZVRyYWNrKGRhbWFnZTogRGFtYWdlRGF0YSwgZGV2aWNlOiBTUjVJdGVtKSB7XHJcbiAgICAgICAgaWYgKCFkZXZpY2UpIHJldHVybjtcclxuXHJcbiAgICAgICAgbGV0IGNvbmRpdGlvbiA9IGRldmljZS5nZXRDb25kaXRpb24oKTtcclxuICAgICAgICBpZiAoIWNvbmRpdGlvbikgcmV0dXJuIGRhbWFnZTtcclxuXHJcbiAgICAgICAgaWYgKGRhbWFnZS52YWx1ZSA9PT0gMCkgcmV0dXJuO1xyXG4gICAgICAgIGlmIChjb25kaXRpb24udmFsdWUgPT09IGNvbmRpdGlvbi5tYXgpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uZGl0aW9uID0gdGhpcy5fX2FkZERhbWFnZVRvVHJhY2tWYWx1ZShkYW1hZ2UsIGNvbmRpdGlvbik7XHJcblxyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7WydkYXRhLnRlY2hub2xvZ3kuY29uZGl0aW9uX21vbml0b3InXTogY29uZGl0aW9ufTtcclxuICAgICAgICBhd2FpdCBkZXZpY2UudXBkYXRlKGRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIF9hZGREYW1hZ2VUb1RyYWNrKGRhbWFnZTogRGFtYWdlRGF0YSwgdHJhY2s6IFRyYWNrVHlwZXxPdmVyZmxvd1RyYWNrVHlwZXxDb25kaXRpb25EYXRhKSB7XHJcbiAgICAgICAgaWYgKGRhbWFnZS52YWx1ZSA9PT0gMCkgcmV0dXJuO1xyXG4gICAgICAgIGlmICh0cmFjay52YWx1ZSA9PT0gdHJhY2subWF4KSByZXR1cm47XHJcblxyXG4gICAgICAgIHRyYWNrID0gdGhpcy5fX2FkZERhbWFnZVRvVHJhY2tWYWx1ZShkYW1hZ2UsIHRyYWNrKTtcclxuICAgICAgICAvLyAvLyAgQXZvaWQgY3Jvc3MgcmVmZXJlbmNpbmcuXHJcbiAgICAgICAgLy8gdHJhY2sgPSBkdXBsaWNhdGUodHJhY2spO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gdHJhY2sudmFsdWUgKz0gZGFtYWdlLnZhbHVlO1xyXG4gICAgICAgIC8vIGlmICh0cmFjay52YWx1ZSA+IHRyYWNrLm1heCkge1xyXG4gICAgICAgIC8vICAgICAvLyBkZXYgZXJyb3IsIG5vdCByZWFsbHkgbWVhbnQgdG8gYmUgZXZlciBzZWVuIGJ5IHVzZXJzLiBUaGVyZWZvcmUgbm8gbG9jYWxpemF0aW9uLlxyXG4gICAgICAgIC8vICAgICBjb25zb2xlLmVycm9yKFwiRGFtYWdlIGRpZCBvdmVyZmxvdyB0aGUgdHJhY2ssIHdoaWNoIHNob3VsZG4ndCBoYXBwZW4gYXQgdGhpcyBzdGFnZS4gRGFtYWdlIGhhcyBiZWVuIHNldCB0byBtYXguIFBsZWFzZSB1c2UgYXBwbHlEYW1hZ2UuXCIpXHJcbiAgICAgICAgLy8gICAgIHRyYWNrLnZhbHVlID0gdHJhY2subWF4O1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHtbYGRhdGEudHJhY2suJHtkYW1hZ2UudHlwZS52YWx1ZX1gXTogdHJhY2t9O1xyXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKGRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIF9hZGREYW1hZ2VUb092ZXJmbG93KGRhbWFnZTogRGFtYWdlRGF0YSwgdHJhY2s6IE92ZXJmbG93VHJhY2tUeXBlKSB7XHJcbiAgICAgICAgaWYgKGRhbWFnZS52YWx1ZSA9PT0gMCkgcmV0dXJuO1xyXG4gICAgICAgIGlmICh0cmFjay5vdmVyZmxvdy52YWx1ZSA9PT0gdHJhY2sub3ZlcmZsb3cubWF4KSByZXR1cm47XHJcblxyXG4gICAgICAgIC8vICBBdm9pZCBjcm9zcyByZWZlcmVuY2luZy5cclxuICAgICAgICBjb25zdCBvdmVyZmxvdyA9IGR1cGxpY2F0ZSh0cmFjay5vdmVyZmxvdyk7XHJcblxyXG4gICAgICAgIC8vIERvbid0IG92ZXIgYXBwbHkgZGFtYWdlIHRvIHRoZSB0cmFjayBvdmVyZmxvdy5cclxuICAgICAgICBvdmVyZmxvdy52YWx1ZSArPSBkYW1hZ2UudmFsdWU7XHJcbiAgICAgICAgb3ZlcmZsb3cudmFsdWUgPSBNYXRoLm1pbihvdmVyZmxvdy52YWx1ZSwgb3ZlcmZsb3cubWF4KTtcclxuXHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHtbYGRhdGEudHJhY2suJHtkYW1hZ2UudHlwZS52YWx1ZX0ub3ZlcmZsb3dgXTogb3ZlcmZsb3d9O1xyXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKGRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBBcHBseSBkYW1hZ2UgdG8gdGhlIHN0dW4gdHJhY2sgYW5kIGdldCBvdmVyZmxvdyBkYW1hZ2UgZm9yIHRoZSBwaHlzaWNhbCB0cmFjay5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgYWRkU3R1bkRhbWFnZShkYW1hZ2U6IERhbWFnZURhdGEpOiBQcm9taXNlPERhbWFnZURhdGE+IHtcclxuICAgICAgICBpZiAoZGFtYWdlLnR5cGUudmFsdWUgIT09ICdzdHVuJykgcmV0dXJuIGRhbWFnZTtcclxuXHJcbiAgICAgICAgY29uc3QgdHJhY2sgPSB0aGlzLmdldFN0dW5UcmFjaygpO1xyXG4gICAgICAgIGlmICghdHJhY2spXHJcbiAgICAgICAgICAgIHJldHVybiBkYW1hZ2U7XHJcblxyXG4gICAgICAgIGNvbnN0IHtvdmVyZmxvdywgcmVzdH0gPSB0aGlzLl9jYWxjRGFtYWdlT3ZlcmZsb3coZGFtYWdlLCB0cmFjayk7XHJcblxyXG4gICAgICAgIC8vIE9ubHkgY2hhbmdlIGRhbWFnZSB0eXBlIHdoZW4gbmVlZGVkLCBpbiBvcmRlciB0byBhdm9pZCBjb25mdXNpb24gb2YgY2FsbGVycy5cclxuICAgICAgICBpZiAob3ZlcmZsb3cudmFsdWUgPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIEFwcGx5IFN0dW4gb3ZlcmZsb3cgZGFtYWdlIHRvIHBoeXNpY2FsIHRyYWNrIGFjY29yZGluZyB0bzogU1I1RSMxNzBcclxuICAgICAgICAgICAgb3ZlcmZsb3cudmFsdWUgPSBNYXRoLmZsb29yKG92ZXJmbG93LnZhbHVlIC8gMik7XHJcbiAgICAgICAgICAgIG92ZXJmbG93LnR5cGUudmFsdWUgPSAncGh5c2ljYWwnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5fYWRkRGFtYWdlVG9UcmFjayhyZXN0LCB0cmFjayk7XHJcbiAgICAgICAgcmV0dXJuIG92ZXJmbG93O1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGFkZFBoeXNpY2FsRGFtYWdlKGRhbWFnZTogRGFtYWdlRGF0YSkge1xyXG4gICAgICAgIGlmIChkYW1hZ2UudHlwZS52YWx1ZSAhPT0gJ3BoeXNpY2FsJykgcmV0dXJuIGRhbWFnZTtcclxuXHJcbiAgICAgICAgY29uc3QgdHJhY2sgPSB0aGlzLmdldFBoeXNpY2FsVHJhY2soKTtcclxuICAgICAgICBpZiAoIXRyYWNrKVxyXG4gICAgICAgICAgICByZXR1cm4gZGFtYWdlO1xyXG5cclxuICAgICAgICBjb25zdCB7b3ZlcmZsb3csIHJlc3R9ID0gdGhpcy5fY2FsY0RhbWFnZU92ZXJmbG93KGRhbWFnZSwgdHJhY2spO1xyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLl9hZGREYW1hZ2VUb1RyYWNrKHJlc3QsIHRyYWNrKTtcclxuICAgICAgICBhd2FpdCB0aGlzLl9hZGREYW1hZ2VUb092ZXJmbG93KG92ZXJmbG93LCB0cmFjayk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEFkZGluZyBkYW1hZ2UgdG8gYSBkZXZpY2UgdHJhY2sgaW5zdGVhZCBvZiBhbiBhY3RvcnMgdHJhY2ssIGFzIHRoZXkgY29udGFpbiB0aGVpciBvd24gdHJhY2sgd2l0aGluIHRoZWlyIGRhdGEuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGFkZE1hdHJpeERhbWFnZShkYW1hZ2U6IERhbWFnZURhdGEpOiBQcm9taXNlPERhbWFnZURhdGE+IHtcclxuICAgICAgICBpZiAoZGFtYWdlLnR5cGUudmFsdWUgIT09ICdtYXRyaXgnKSByZXR1cm4gZGFtYWdlO1xyXG5cclxuICAgICAgICBjb25zdCBkZXZpY2UgPSB0aGlzLmdldE1hdHJpeERldmljZSgpO1xyXG4gICAgICAgIGlmICghZGV2aWNlKSByZXR1cm4gZGFtYWdlO1xyXG5cclxuICAgICAgICBjb25zdCB0cmFjayA9IHRoaXMuZ2V0TWF0cml4VHJhY2soKTtcclxuICAgICAgICAvLyBBY3RvciBtaWdodCBub3QgaGF2ZSBhIGNvbW1saW5rL2N5YmVyZGVjayBlcXVpcHBlZC5cclxuICAgICAgICBpZiAoIXRyYWNrKSByZXR1cm4gZGFtYWdlO1xyXG5cclxuICAgICAgICBjb25zdCB7b3ZlcmZsb3csIHJlc3R9ID0gdGhpcy5fY2FsY0RhbWFnZU92ZXJmbG93KGRhbWFnZSwgdHJhY2spO1xyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLl9hZGREYW1hZ2VUb0RldmljZVRyYWNrKHJlc3QsIGRldmljZSk7XHJcblxyXG4gICAgICAgIC8vIFJldHVybiBvdmVyZmxvdyBmb3IgY29uc2lzdGVuY3ksIHlldCBub3RoaW5nIHdpbGwgdGFrZSBvdmVyZmxvd2luZyBtYXRyaXggZGFtYWdlLlxyXG4gICAgICAgIHJldHVybiBvdmVyZmxvdztcclxuICAgIH1cclxuXHJcbiAgICAvKiogQ2FsY3VsYXRlIGRhbWFnZSBvdmVyZmxvdyBvbmx5IGJhc2VkIG9uIG1heCBhbmQgY3VycmVudCB0cmFjayB2YWx1ZXMuXHJcbiAgICAgKi9cclxuICAgIF9jYWxjRGFtYWdlT3ZlcmZsb3coZGFtYWdlOiBEYW1hZ2VEYXRhLCB0cmFjazogVHJhY2tUeXBlfENvbmRpdGlvbkRhdGEpOiB7b3ZlcmZsb3c6IERhbWFnZURhdGEsIHJlc3Q6IERhbWFnZURhdGF9IHtcclxuICAgICAgICBjb25zdCBmcmVlVHJhY2tEYW1hZ2UgPSB0cmFjay5tYXggLSB0cmFjay52YWx1ZTtcclxuICAgICAgICBjb25zdCBvdmVyZmxvd0RhbWFnZSA9IGRhbWFnZS52YWx1ZSA+IGZyZWVUcmFja0RhbWFnZSA/XHJcbiAgICAgICAgICAgIGRhbWFnZS52YWx1ZSAtIGZyZWVUcmFja0RhbWFnZSA6XHJcbiAgICAgICAgICAgIDA7XHJcbiAgICAgICAgY29uc3QgcmVzdERhbWFnZSA9IGRhbWFnZS52YWx1ZSAtIG92ZXJmbG93RGFtYWdlO1xyXG5cclxuICAgICAgICAvLyAgQXZvaWQgY3Jvc3MgcmVmZXJlbmNpbmcuXHJcbiAgICAgICAgY29uc3Qgb3ZlcmZsb3cgPSBkdXBsaWNhdGUoZGFtYWdlKTtcclxuICAgICAgICBjb25zdCByZXN0ID0gZHVwbGljYXRlKGRhbWFnZSk7XHJcblxyXG4gICAgICAgIG92ZXJmbG93LnZhbHVlID0gb3ZlcmZsb3dEYW1hZ2U7XHJcbiAgICAgICAgcmVzdC52YWx1ZSA9IHJlc3REYW1hZ2U7XHJcblxyXG4gICAgICAgIHJldHVybiB7b3ZlcmZsb3csIHJlc3R9O1xyXG4gICAgfVxyXG5cclxuICAgIGdldFN0dW5UcmFjaygpOiBUcmFja1R5cGUgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGlmIChcInRyYWNrXCIgaW4gdGhpcy5kYXRhLmRhdGEgJiYgXCJzdHVuXCIgaW4gdGhpcy5kYXRhLmRhdGEudHJhY2spXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEuZGF0YS50cmFjay5zdHVuO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFBoeXNpY2FsVHJhY2soKTogT3ZlcmZsb3dUcmFja1R5cGUgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGlmIChcInRyYWNrXCIgaW4gdGhpcy5kYXRhLmRhdGEpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEuZGF0YS50cmFjay5waHlzaWNhbDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRNYXRyaXhUcmFjaygpOiBDb25kaXRpb25EYXRhfHVuZGVmaW5lZCB7XHJcbiAgICAgICAgY29uc3QgZGV2aWNlID0gdGhpcy5nZXRNYXRyaXhEZXZpY2UoKTtcclxuICAgICAgICBpZiAoIWRldmljZSkgcmV0dXJuIHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRldmljZS5nZXRDb25kaXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRNb2RpZmllZEFybW9yKGRhbWFnZTogRGFtYWdlRGF0YSk6IEFjdG9yQXJtb3JEYXRhIHtcclxuICAgICAgICBpZiAoIWRhbWFnZS5hcD8udmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXJtb3IoKTtcclxuICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbW9kaWZpZWQgPSBkdXBsaWNhdGUodGhpcy5nZXRBcm1vcigpKTtcclxuICAgICAgICBpZiAobW9kaWZpZWQpIHtcclxuICAgICAgICAgICAgbW9kaWZpZWQubW9kID0gUGFydHNMaXN0LkFkZFVuaXF1ZVBhcnQobW9kaWZpZWQubW9kLCAnU1I1LkRWJywgZGFtYWdlLmFwLnZhbHVlKTtcclxuICAgICAgICAgICAgbW9kaWZpZWQudmFsdWUgPSBIZWxwZXJzLmNhbGNUb3RhbChtb2RpZmllZCwge21pbjogMH0pO1xyXG4gICAgICAgIH1cclxuIFxyXG4gICAgICAgIHJldHVybiBtb2RpZmllZDtcclxuICAgIH1cclxuXHJcbiAgICAvKiogUmVkdWNlIHRoZSBpbml0aWF0aXZlIG9mIHRoZSBhY3RvciBpbiB0aGUgY3VycmVudGx5IG9wZW4gLyBzZWxlY3RlZCBjb21iYXQuXHJcbiAgICAgKiBTaG91bGQgYSB0b2tlbnMgYWN0b3IgYmUgaW4gbXVsdGlwbGUgY29tYmF0cyBpdCB3aWxsIGFsc28gb25seSBhZmZlY3QgdGhlIGN1cnJlbnRseSBvcGVuIGNvbWJhdCxcclxuICAgICAqIHNpbmNlIHRoYXQgaXMgd2hhdCdzIHNldCBpbiBnYW1lLmNvbWJhdFxyXG4gICAgICpcclxuICAgICAqIFRPRE86IFRoZXJlIGlzIGFuIGlzc3VlIHdpdGggbGlua2VkIGFjdG9ycyB0aGF0IGhhdmUgbXVsdGlwbGUgdG9rZW5zIHBsYWNlZCwgd2l0aCBlYWNoIGluIGRpZmZlcmVudCBjb21iYXRzLlxyXG4gICAgICogICAgICAgVGhlIGRlZmVuc2UgdGVzdCBuZWVkcyB0byBiZSBkb25lIHVzaW5nIHRoZSBjb3JyZWN0IHRva2VuLCBub3QganVzdCBieSB0aGUgYWN0b3IgKGZyb20gdGhlIHNpZGViYXIpLlxyXG4gICAgICogICAgICAgT25lIGNvdWxkIGFyZ3VlIHRoaXMgdG8gYmUgY29ycmVjdCBiZWhhdmlvciwganVzdCBjb25mdXNpbmcgd2l0aCBub3JtYWwgbGlua2VkIGFjdG9yIC8gdG9rZW4gdXNhZ2UuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGNoYW5nZUNvbWJhdEluaXRpYXRpdmUobW9kaWZpZXI6IG51bWJlcikge1xyXG4gICAgICAgIC8vIE5vIGNoYW5nZSBuZWVkZWQgZm9yIG5vdGhpbmcgdG8gY2hhbmdlLlxyXG4gICAgICAgIGlmIChtb2RpZmllciA9PT0gMCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBjb21iYXQ6IFNSNUNvbWJhdCA9IGdhbWUuY29tYmF0IGFzIFNSNUNvbWJhdDtcclxuICAgICAgICBjb25zdCBjb21iYXRhbnQgPSBjb21iYXQuZ2V0QWN0b3JDb21iYXRhbnQodGhpcyk7XHJcblxyXG4gICAgICAgIC8vIFRva2VuIG1pZ2h0IG5vdCBiZSBwYXJ0IG9mIGFjdGl2ZSBjb21iYXQuXHJcbiAgICAgICAgaWYgKCFjb21iYXRhbnQpIHJldHVybjtcclxuXHJcbiAgICAgICAgYXdhaXQgY29tYmF0LmFkanVzdEluaXRpYXRpdmUoY29tYmF0YW50LCBtb2RpZmllcik7XHJcbiAgICB9XHJcblxyXG4gICAgaGFzRGFtYWdlVHJhY2tzKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBcInRyYWNrXCIgaW4gdGhpcy5kYXRhLmRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgYXNWZWhpY2xlRGF0YSgpOiBTUjVWZWhpY2xlVHlwZSB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNWZWhpY2xlKCkpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEgYXMgU1I1VmVoaWNsZVR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgYXNDaGFyYWN0ZXJEYXRhKCk6IFNSNUNoYXJhY3RlclR5cGUgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGlmICh0aGlzLmlzQ2hhcmFjdGVyKCkpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEgYXMgU1I1Q2hhcmFjdGVyVHlwZTtcclxuICAgIH1cclxuXHJcbiAgICBhc1NwaXJpdERhdGEoKTogU1I1U3Bpcml0VHlwZSB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNTcGlyaXQoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhIGFzIFNSNVNwaXJpdFR5cGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzU3ByaXRlRGF0YSgpOiBTUjVTcHJpdGVUeXBlIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAodGhpcy5pc1Nwcml0ZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEgYXMgU1I1U3ByaXRlVHlwZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXNDcml0dGVyRGF0YSgpOiBTUjVDcml0dGVyVHlwZSB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNDcml0dGVyKCkpe1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhIGFzIFNSNUNyaXR0ZXJUeXBlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRWZWhpY2xlU3RhdHMoKTogVmVoaWNsZVN0YXRzIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAodGhpcy5pc1ZlaGljbGUoKSAmJiBcInZlaGljbGVfc3RhdHNcIiBpbiB0aGlzLmRhdGEuZGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmRhdGEudmVoaWNsZV9zdGF0cztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEFkZCBhbm90aGVyIGFjdG9yIGFzIHRoZSBkcml2ZXIgb2YgYSB2ZWhpY2xlIHRvIGFsbG93IGZvciB0aGVpciB2YWx1ZXMgdG8gYmUgdXNlZCBpbiB0ZXN0aW5nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpZCBBbiBhY3RvcnMgaWQuIFNob3VsZCBiZSBhIGNoYXJhY3RlciBhYmxlIHRvIGRyaXZlIGEgdmVoaWNsZVxyXG4gICAgICovXHJcbiAgICBhc3luYyBhZGRWZWhpY2xlRHJpdmVyKGlkOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNWZWhpY2xlKCkpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgZHJpdmVyID0gZ2FtZS5hY3RvcnMuZ2V0KGlkKSBhcyBTUjVBY3RvcjtcclxuICAgICAgICBpZiAoIWRyaXZlcikgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyBOT1RFOiBJbiBUSEVPUlkgYWxtb3N0IGFsbCBhY3RvciB0eXBlcyBjYW4gZHJpdmUgYSB2ZWhpY2xlLlxyXG4gICAgICAgIC8vIC4uLiBkcmVrLCBpbiB0aGVvcnkgYSBkcm9uZSBjb3VsZCBkcml2ZSBhbm90aGVyIHZlaGljbGUgZXZlbi4uLlxyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7J2RhdGEuZHJpdmVyJzogZHJpdmVyLmlkfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcmVtb3ZlVmVoaWNsZURyaXZlcigpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaGFzRHJpdmVyKCkpIHJldHVybjtcclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeydkYXRhLmRyaXZlcic6ICcnfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFzRHJpdmVyKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmFzVmVoaWNsZURhdGEoKTtcclxuXHJcbiAgICAgICAgaWYgKCFkYXRhKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEuZGF0YS5kcml2ZXIubGVuZ3RoID4gMDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRWZWhpY2xlRHJpdmVyKCk6IFNSNUFjdG9yfHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmhhc0RyaXZlcigpKSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuYXNWZWhpY2xlRGF0YSgpO1xyXG4gICAgICAgIGlmICghZGF0YSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBkcml2ZXIgPSBnYW1lLmFjdG9ycy5nZXQoZGF0YS5kYXRhLmRyaXZlcikgYXMgU1I1QWN0b3I7XHJcbiAgICAgICAgLy8gSWYgbm8gZHJpdmVyIGlkIGlzIHNldCwgd2Ugd29uJ3QgZ2V0IGFuIGFjdG9yIGFuZCBzaG91bGQgZXhwbGljaXRseSByZXR1cm4gdW5kZWZpbmVkLlxyXG4gICAgICAgIGlmICghZHJpdmVyKSByZXR1cm47XHJcbiAgICAgICAgcmV0dXJuIGRyaXZlcjtcclxuICAgIH1cclxuXHJcbiAgICAvKiogQ2hlY2sgaWYgdGhpcyBhY3RvciBpcyBvZiBvbmUgb3IgbXVsdGlwbGUgZ2l2ZW4gYWN0b3IgdHlwZXNcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdHlwZXMgQSBsaXN0IG9mIGFjdG9yIHR5cGVzIHRvIGNoZWNrLlxyXG4gICAgICovXHJcbiAgICBtYXRjaGVzQWN0b3JUeXBlcyh0eXBlczogc3RyaW5nW10pOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdHlwZXMuaW5jbHVkZXModGhpcy5kYXRhLnR5cGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBUT0RPOiBtZXRob2QgZG9jdW1lbnRhdGlvblxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpZ25vcmVTY2VuZSBTZXQgdG8gdHJ1ZSB0byBpZ25vcmUgbW9kaWZpZXJzIHNldCBvbiBhY3RpdmUgb3IgZ2l2ZW4gc2NlbmUuXHJcbiAgICAgKiBAcGFyYW0gc2NlbmUgU2hvdWxkIGEgc2NlbmUgYmUgdXNlZCBhcyBhIGZhbGxiYWNrLCBwcm92aWRlIHRoaXMgaGVyZS4gT3RoZXJ3aXNlIGN1cnJlbnQgc2NlbmUgd2lsbCBiZSB1c2VkLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRNb2RpZmllcnMoaWdub3JlU2NlbmU6IGJvb2xlYW49ZmFsc2UsIHNjZW5lOiBTY2VuZT1jYW52YXMuc2NlbmUpOiBQcm9taXNlPE1vZGlmaWVycz4ge1xyXG4gICAgICAgIGNvbnN0IG9uQWN0b3IgPSBhd2FpdCBNb2RpZmllcnMuZ2V0TW9kaWZpZXJzRnJvbUVudGl0eSh0aGlzKTtcclxuXHJcbiAgICAgICAgaWYgKG9uQWN0b3IuaGFzQWN0aXZlRW52aXJvbm1lbnRhbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gb25BY3RvcjtcclxuICAgICAgICB9IGVsc2UgaWYgKGlnbm9yZVNjZW5lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgTW9kaWZpZXJzKE1vZGlmaWVycy5nZXREZWZhdWx0TW9kaWZpZXJzKCkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBNb2RpZmllcnMuZ2V0TW9kaWZpZXJzRnJvbUVudGl0eShzY2VuZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNldE1vZGlmaWVycyhtb2RpZmllcnM6IE1vZGlmaWVycykge1xyXG4gICAgICAgIGF3YWl0IE1vZGlmaWVycy5zZXRNb2RpZmllcnNPbkVudGl0eSh0aGlzLCBtb2RpZmllcnMubW9kaWZpZXJzKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQge0hlbHBlcnN9IGZyb20gJy4uL2hlbHBlcnMnO1xyXG5pbXBvcnQge0NodW1tZXJJbXBvcnRGb3JtfSBmcm9tICcuLi9hcHBzL2NodW1tZXItaW1wb3J0LWZvcm0nO1xyXG5pbXBvcnQge1NraWxsRWRpdEZvcm19IGZyb20gJy4uL2FwcHMvc2tpbGxzL1NraWxsRWRpdEZvcm0nO1xyXG5pbXBvcnQge0tub3dsZWRnZVNraWxsRWRpdEZvcm19IGZyb20gJy4uL2FwcHMvc2tpbGxzL0tub3dsZWRnZVNraWxsRWRpdEZvcm0nO1xyXG5pbXBvcnQge0xhbmd1YWdlU2tpbGxFZGl0Rm9ybX0gZnJvbSAnLi4vYXBwcy9za2lsbHMvTGFuZ3VhZ2VTa2lsbEVkaXRGb3JtJztcclxuaW1wb3J0IHtTUjVBY3Rvcn0gZnJvbSAnLi9TUjVBY3Rvcic7XHJcbmltcG9ydCB7U1I1fSBmcm9tICcuLi9jb25maWcnO1xyXG5pbXBvcnQge1NSNUl0ZW19IGZyb20gXCIuLi9pdGVtL1NSNUl0ZW1cIjtcclxuaW1wb3J0IFNSNUFjdG9yU2hlZXREYXRhID0gU2hhZG93cnVuLlNSNUFjdG9yU2hlZXREYXRhO1xyXG5pbXBvcnQgU1I1U2hlZXRGaWx0ZXJzID0gU2hhZG93cnVuLlNSNVNoZWV0RmlsdGVycztcclxuaW1wb3J0IFNraWxscyA9IFNoYWRvd3J1bi5Ta2lsbHM7XHJcbmltcG9ydCBNYXRyaXhBdHRyaWJ1dGUgPSBTaGFkb3dydW4uTWF0cml4QXR0cmlidXRlO1xyXG5pbXBvcnQgU2tpbGxGaWVsZCA9IFNoYWRvd3J1bi5Ta2lsbEZpZWxkO1xyXG5pbXBvcnQgRGV2aWNlRGF0YSA9IFNoYWRvd3J1bi5EZXZpY2VEYXRhO1xyXG5cclxuLy8gVXNlIFNSNUFjdG9yU2hlZXQuX3Nob3dTa2lsbEVkaXRGb3JtIHRvIG9ubHkgZXZlciByZW5kZXIgb25lIFNraWxsRWRpdEZvcm0gaW5zdGFuY2UuXHJcbi8vIFNob3VsZCBtdWx0aXBsZSBpbnN0YW5jZXMgYmUgb3BlbiwgRm91bmRyeSB3aWxsIGNhdXNlIGNyb3NzIHRhbGsgYmV0d2VlbiBza2lsbHMgYW5kIGFjdG9ycyxcclxuLy8gd2hlbiBvcGVuZWQgaW4gc3VjY2Vzc2lvbiwgY2F1c2luZyBTa2lsbEVkaXRGb3JtIHRvIHdyb25nZnVsbHkgb3ZlcndyaXRlIHRoZSB3cm9uZyBkYXRhLlxyXG5sZXQgZ2xvYmFsU2tpbGxBcHBJZDogbnVtYmVyID0gLTE7XHJcblxyXG4vKipcclxuICogRXh0ZW5kIHRoZSBiYXNpYyBBY3RvclNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXHJcbiAqXHJcbiAqIE5PVEU6IEFjdG9yU2hlZXQ8VCwgQT4gZXhwZWN0cyBBY3Rvci5kYXRhLmRhdGEgdHlwaW5nLCB5ZXQgY29tcGxhaW5zIGFib3V0IGl0J3MgZ2VuZXJhbCB0eXBlIGJlaW5nIG5vdCBjb21wYXRpYmxlXHJcbiAqICAgICAgIHdpdGggU1I1QWN0b3JEYXRhXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU1I1QWN0b3JTaGVldCBleHRlbmRzIEFjdG9yU2hlZXQ8e30sIFNSNUFjdG9yPiB7XHJcbiAgICBfc2hvd25EZXNjOiBzdHJpbmdbXTtcclxuICAgIF9maWx0ZXJzOiBTUjVTaGVldEZpbHRlcnM7XHJcbiAgICBfc2Nyb2xsOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoLi4uYXJncykge1xyXG4gICAgICAgIHN1cGVyKC4uLmFyZ3MpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBLZWVwIHRyYWNrIG9mIHRoZSBjdXJyZW50bHkgYWN0aXZlIHNoZWV0IHRhYlxyXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fc2hvd25EZXNjID0gW107XHJcbiAgICAgICAgdGhpcy5fZmlsdGVycyA9IHtcclxuICAgICAgICAgICAgc2tpbGxzOiAnJyxcclxuICAgICAgICAgICAgc2hvd1VudHJhaW5lZFNraWxsczogdHJ1ZSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgNWUgQWN0b3IgU2hlZXRcclxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XHJcbiAgICAgICAgICAgIGNsYXNzZXM6IFsnc3I1JywgJ3NoZWV0JywgJ2FjdG9yJ10sXHJcbiAgICAgICAgICAgIHdpZHRoOiA4ODAsXHJcbiAgICAgICAgICAgIGhlaWdodDogNjkwLFxyXG4gICAgICAgICAgICB0YWJzOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmF2U2VsZWN0b3I6ICcudGFicycsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0Ym9keScsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbDogJ3NraWxscycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB0ZW1wbGF0ZSgpIHtcclxuICAgICAgICBjb25zdCBwYXRoID0gJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMnO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5hY3Rvci5oYXNQZXJtKGdhbWUudXNlciwgJ0xJTUlURUQnLCB0cnVlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYCR7cGF0aH0vYWN0b3ItbGltaXRlZC8ke3RoaXMuYWN0b3IuZGF0YS50eXBlfS5odG1sYDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBgJHtwYXRofS9hY3Rvci8ke3RoaXMuYWN0b3IuZGF0YS50eXBlfS5odG1sYDtcclxuICAgIH1cclxuXHJcbiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHJlcGFyZSBkYXRhIGZvciByZW5kZXJpbmcgdGhlIEFjdG9yIHNoZWV0XHJcbiAgICAgKiBUaGUgcHJlcGFyZWQgZGF0YSBvYmplY3QgY29udGFpbnMgYm90aCB0aGUgYWN0b3IgZGF0YSBhcyB3ZWxsIGFzIGFkZGl0aW9uYWwgc2hlZXQgb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBnZXREYXRhKCkge1xyXG4gICAgICAgIGNvbnN0IGRhdGE6IFNSNUFjdG9yU2hlZXREYXRhID0gKHN1cGVyLmdldERhdGEoKSBhcyB1bmtub3duKSBhcyBTUjVBY3RvclNoZWV0RGF0YTtcclxuXHJcbiAgICAgICAgLy8gR2VuZXJhbCBwdXJwb3NlIGZpZWxkcy4uLlxyXG4gICAgICAgIGRhdGEuY29uZmlnID0gQ09ORklHLlNSNTtcclxuICAgICAgICBkYXRhLmZpbHRlcnMgPSB0aGlzLl9maWx0ZXJzO1xyXG5cclxuICAgICAgICB0aGlzLl9wcmVwYXJlTWF0cml4QXR0cmlidXRlcyhkYXRhKTtcclxuICAgICAgICB0aGlzLl9wcmVwYXJlQWN0b3JBdHRyaWJ1dGVzKGRhdGEpO1xyXG5cclxuICAgICAgICB0aGlzLl9wcmVwYXJlSXRlbXMoZGF0YSk7XHJcbiAgICAgICAgdGhpcy5fcHJlcGFyZVNraWxsc1dpdGhGaWx0ZXJzKGRhdGEpO1xyXG4gICAgICAgIHRoaXMuX3ByZXBhcmVBY3RvclR5cGVGaWVsZHMoZGF0YSk7XHJcbiAgICAgICAgdGhpcy5fcHJlcGFyZUNoYXJhY3RlckZpZWxkcyhkYXRhKTtcclxuICAgICAgICB0aGlzLl9wcmVwYXJlVmVoaWNsZUZpZWxkcyhkYXRhKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgX2lzU2tpbGxNYWdpYyhpZCwgc2tpbGwpIHtcclxuICAgICAgICByZXR1cm4gc2tpbGwuYXR0cmlidXRlID09PSAnbWFnaWMnIHx8IGlkID09PSAnYXN0cmFsX2NvbWJhdCcgfHwgaWQgPT09ICdhc3NlbnNpbmcnO1xyXG4gICAgfVxyXG5cclxuICAgIF9pc1NraWxsUmVzb25hbmNlKHNraWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIHNraWxsLmF0dHJpYnV0ZSA9PT0gJ3Jlc29uYW5jZSc7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFNraWxsTGFiZWxPck5hbWUoc2tpbGwpIHtcclxuICAgICAgICAvLyBDdXN0b20gc2tpbGxzIGRvbid0IGhhdmUgbGFiZWxzLCB1c2UgdGhlaXIgbmFtZSBpbnN0ZWFkLlxyXG4gICAgICAgIHJldHVybiBza2lsbC5sYWJlbCA/IGdhbWUuaTE4bi5sb2NhbGl6ZShza2lsbC5sYWJlbCkgOiBza2lsbC5uYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIF9kb2VzU2tpbGxDb250YWluVGV4dChrZXksIHNraWxsLCB0ZXh0KSB7XHJcbiAgICAgICAgaWYgKCF0ZXh0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2VhcmNoIGJvdGggZW5nbGlzaCBrZXlzLCBsb2NhbGl6ZWQgbGFiZWxzIGFuZCBhbGwgc3BlY2lhbGl6YXRpb25zLlxyXG4gICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLl9nZXRTa2lsbExhYmVsT3JOYW1lKHNraWxsKTtcclxuICAgICAgICBjb25zdCBzZWFyY2hLZXkgPSBza2lsbC5uYW1lID09PSB1bmRlZmluZWQgPyBrZXkgOiAnJztcclxuICAgICAgICAvLyBzb21lIFwic3BlY3NcIiB3ZXJlIGEgc3RyaW5nIGZyb20gb2xkIGNvZGUgSSB0aGlua1xyXG4gICAgICAgIGNvbnN0IHNwZWNzID0gc2tpbGwuc3BlY3MgIT09IHVuZGVmaW5lZCAmJiBBcnJheS5pc0FycmF5KHNraWxsLnNwZWNzKSA/IHNraWxsLnNwZWNzLmpvaW4oJyAnKSA6ICcnO1xyXG4gICAgICAgIGxldCBzZWFyY2hTdHJpbmcgPSBgJHtzZWFyY2hLZXl9ICR7bmFtZX0gJHtzcGVjc31gO1xyXG5cclxuICAgICAgICByZXR1cm4gc2VhcmNoU3RyaW5nLnRvTG93ZXJDYXNlKCkuc2VhcmNoKHRleHQudG9Mb3dlckNhc2UoKSkgPiAtMTtcclxuICAgIH1cclxuXHJcbiAgICBfcHJlcGFyZUNoYXJhY3RlckZpZWxkcyhkYXRhOiBTUjVBY3RvclNoZWV0RGF0YSkge1xyXG4gICAgICAgIC8vIEVtcHR5IHplcm8gdmFsdWUgbW9kaWZpZXJzIGZvciBkaXNwbGF5IHB1cnBvc2VzLlxyXG4gICAgICAgIGNvbnN0IHsgbW9kaWZpZXJzOiBtb2RzIH0gPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKG1vZHMpKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gMCkgbW9kc1trZXldID0gJyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkYXRhLmF3YWtlbmVkID0gZGF0YS5kYXRhLnNwZWNpYWwgPT09ICdtYWdpYyc7XHJcbiAgICAgICAgZGF0YS5lbWVyZ2VkID0gZGF0YS5kYXRhLnNwZWNpYWwgPT09ICdyZXNvbmFuY2UnO1xyXG4gICAgICAgIGRhdGEud291bmRUb2xlcmFuY2UgPSAzICsgKE51bWJlcihtb2RzWyd3b3VuZF90b2xlcmFuY2UnXSkgfHwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgX3ByZXBhcmVWZWhpY2xlRmllbGRzKGRhdGE6IFNSNUFjdG9yU2hlZXREYXRhKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmFjdG9yLmlzVmVoaWNsZSgpKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGRyaXZlciA9IHRoaXMuYWN0b3IuZ2V0VmVoaWNsZURyaXZlcigpO1xyXG5cclxuICAgICAgICBkYXRhLnZlaGljbGUgPSB7XHJcbiAgICAgICAgICAgIGRyaXZlclxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgX3ByZXBhcmVBY3RvclR5cGVGaWVsZHMoZGF0YTogU1I1QWN0b3JTaGVldERhdGEpIHtcclxuICAgICAgICBkYXRhLmlzQ2hhcmFjdGVyID0gdGhpcy5hY3Rvci5pc0NoYXJhY3RlcigpO1xyXG4gICAgICAgIGRhdGEuaXNTcGlyaXQgPSB0aGlzLmFjdG9yLmlzU3Bpcml0KCk7XHJcbiAgICAgICAgZGF0YS5pc0NyaXR0ZXIgPSB0aGlzLmFjdG9yLmlzQ3JpdHRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIF9wcmVwYXJlTWF0cml4QXR0cmlidXRlcyhkYXRhKSB7XHJcbiAgICAgICAgY29uc3QgeyBtYXRyaXggfSA9IGRhdGEuZGF0YTtcclxuICAgICAgICBpZiAobWF0cml4KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNsZWFudXBBdHRyaWJ1dGUgPSAoYXR0cmlidXRlOiBNYXRyaXhBdHRyaWJ1dGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGF0dCA9IG1hdHJpeFthdHRyaWJ1dGVdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGF0dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYXR0Lm1vZCkgYXR0Lm1vZCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhdHQudGVtcCA9PT0gMCkgZGVsZXRlIGF0dC50ZW1wO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgWydmaXJld2FsbCcsICdkYXRhX3Byb2Nlc3NpbmcnLCAnc2xlYXplJywgJ2F0dGFjayddLmZvckVhY2goKGF0dDogTWF0cml4QXR0cmlidXRlKSA9PiBjbGVhbnVwQXR0cmlidXRlKGF0dCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfcHJlcGFyZUFjdG9yQXR0cmlidXRlcyhkYXRhOiBTUjVBY3RvclNoZWV0RGF0YSkge1xyXG4gICAgICAgIC8vIENsZWFyIHZpc2libGUsIHplcm8gdmFsdWUgYXR0cmlidXRlcyB0ZW1wb3JhcnkgbW9kaWZpZXJzIHNvIHRoZXkgYXBwZWFyIGJsYW5rLlxyXG4gICAgICAgIGNvbnN0IGF0dHJzID0gZGF0YS5kYXRhLmF0dHJpYnV0ZXM7XHJcbiAgICAgICAgZm9yIChsZXQgWywgYXR0XSBvZiBPYmplY3QuZW50cmllcyhhdHRycykpIHtcclxuICAgICAgICAgICAgaWYgKCFhdHQuaGlkZGVuKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXR0LnRlbXAgPT09IDApIGRlbGV0ZSBhdHQudGVtcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfcHJlcGFyZVNraWxsc1dpdGhGaWx0ZXJzKGRhdGE6IFNSNUFjdG9yU2hlZXREYXRhKSB7XHJcbiAgICAgICAgdGhpcy5fZmlsdGVyQWN0aXZlU2tpbGxzKGRhdGEpO1xyXG4gICAgICAgIHRoaXMuX2ZpbHRlcktub3dsZWRnZVNraWxscyhkYXRhKTtcclxuICAgICAgICB0aGlzLl9maWx0ZXJMYW5ndWFnZVNraWxscyhkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBfZmlsdGVyQWN0aXZlU2tpbGxzKGRhdGE6IFNSNUFjdG9yU2hlZXREYXRhKSB7XHJcbiAgICAgICAgLy8gSGFuZGxlIGFjdGl2ZSBza2lsbHMgZGlyZWN0bHksIGFzIGl0IGRvZXNuJ3QgdXNlIHN1Yi1jYXRlZ29yaWVzLlxyXG4gICAgICAgIGRhdGEuZGF0YS5za2lsbHMuYWN0aXZlID0gdGhpcy5fZmlsdGVyU2tpbGxzKGRhdGEsIGRhdGEuZGF0YS5za2lsbHMuYWN0aXZlKTtcclxuICAgIH1cclxuXHJcbiAgICBfZmlsdGVyS25vd2xlZGdlU2tpbGxzKGRhdGE6IFNSNUFjdG9yU2hlZXREYXRhKSB7XHJcbiAgICAgICAgLy8gS25vd2xlZGdlIHNraWxsIGhhdmUgc2VwYXJhdGUgc3ViLWNhdGVnb3JpZXMuXHJcbiAgICAgICAgT2JqZWN0LmtleXMoU1I1Lmtub3dsZWRnZVNraWxsQ2F0ZWdvcmllcykuZm9yRWFjaCgoY2F0ZWdvcnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFkYXRhLmRhdGEuc2tpbGxzLmtub3dsZWRnZS5oYXNPd25Qcm9wZXJ0eShjYXRlZ29yeSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgS25vd2xlZGdlIFNraWxsIGRvZXNuJ3QgcHJvdmlkZSBjb25maWd1cmVkIGNhdGVnb3J5ICR7Y2F0ZWdvcnl9YCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGF0YS5kYXRhLnNraWxscy5rbm93bGVkZ2VbY2F0ZWdvcnldLnZhbHVlID0gdGhpcy5fZmlsdGVyU2tpbGxzKGRhdGEsIGRhdGEuZGF0YS5za2lsbHMua25vd2xlZGdlW2NhdGVnb3J5XS52YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2ZpbHRlckxhbmd1YWdlU2tpbGxzKGRhdGE6IFNSNUFjdG9yU2hlZXREYXRhKSB7XHJcbiAgICAgICAgLy8gTGFuZ3VhZ2UgU2tpbGxzIGhhdmUgbm8gc3ViLWNhdGVnb3JpZXMuXHJcbiAgICAgICAgZGF0YS5kYXRhLnNraWxscy5sYW5ndWFnZS52YWx1ZSA9IHRoaXMuX2ZpbHRlclNraWxscyhkYXRhLCBkYXRhLmRhdGEuc2tpbGxzLmxhbmd1YWdlLnZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBfZmlsdGVyU2tpbGxzKGRhdGE6IFNSNUFjdG9yU2hlZXREYXRhLCBza2lsbHM6IFNraWxscykge1xyXG4gICAgICAgIGNvbnN0IGZpbHRlcmVkU2tpbGxzID0ge307XHJcbiAgICAgICAgZm9yIChsZXQgW2tleSwgc2tpbGxdIG9mIE9iamVjdC5lbnRyaWVzKHNraWxscykpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3Nob3dTa2lsbChrZXksIHNraWxsLCBkYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgZmlsdGVyZWRTa2lsbHNba2V5XSA9IHNraWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gSGVscGVycy5zb3J0U2tpbGxzKGZpbHRlcmVkU2tpbGxzKTtcclxuICAgIH1cclxuXHJcbiAgICBfc2hvd1NraWxsKGtleSwgc2tpbGwsIGRhdGEpIHtcclxuICAgICAgICBpZiAodGhpcy5fc2hvd01hZ2ljU2tpbGxzKGtleSwgc2tpbGwsIGRhdGEpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5fc2hvd1Jlc29uYW5jZVNraWxscyhrZXksIHNraWxsLCBkYXRhKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9zaG93R2VuZXJhbFNraWxsKGtleSwgc2tpbGwpO1xyXG4gICAgfVxyXG5cclxuICAgIF9pc1NraWxsRmlsdGVyZWQoc2tpbGxJZCwgc2tpbGwpIHtcclxuICAgICAgICAvLyBhIG5ld2x5IGNyZWF0ZWQgc2tpbGwgc2hvdWxkbid0IGJlIGZpbHRlcmVkLCBubyBtYXR0ZXIgd2hhdC5cclxuICAgICAgICAvLyBUaGVyZWZvcmUgZGlzcXVhbGlmeSBlbXB0eSBza2lsbCBsYWJlbHMvbmFtZXMgZnJvbSBmaWx0ZXJpbmcgYW5kIGFsd2F5cyBzaG93IHRoZW0uXHJcbiAgICAgICAgY29uc3QgaXNGaWx0ZXJhYmxlID0gdGhpcy5fZ2V0U2tpbGxMYWJlbE9yTmFtZShza2lsbCkubGVuZ3RoID4gMDtcclxuICAgICAgICBjb25zdCBpc0hpZGRlbkZvclRleHQgPSAhdGhpcy5fZG9lc1NraWxsQ29udGFpblRleHQoc2tpbGxJZCwgc2tpbGwsIHRoaXMuX2ZpbHRlcnMuc2tpbGxzKTtcclxuICAgICAgICBjb25zdCBpc0hpZGRlbkZvclVudHJhaW5lZCA9ICF0aGlzLl9maWx0ZXJzLnNob3dVbnRyYWluZWRTa2lsbHMgJiYgc2tpbGwudmFsdWUgPT09IDA7XHJcblxyXG4gICAgICAgIHJldHVybiAhKGlzRmlsdGVyYWJsZSAmJiAoaXNIaWRkZW5Gb3JVbnRyYWluZWQgfHwgaXNIaWRkZW5Gb3JUZXh0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3Nob3dHZW5lcmFsU2tpbGwoc2tpbGxJZCwgc2tpbGw6IFNraWxsRmllbGQpIHtcclxuICAgICAgICByZXR1cm4gIXRoaXMuX2lzU2tpbGxNYWdpYyhza2lsbElkLCBza2lsbCkgJiYgIXRoaXMuX2lzU2tpbGxSZXNvbmFuY2Uoc2tpbGwpICYmIHRoaXMuX2lzU2tpbGxGaWx0ZXJlZChza2lsbElkLCBza2lsbCk7XHJcbiAgICB9XHJcblxyXG4gICAgX3Nob3dNYWdpY1NraWxscyhza2lsbElkLCBza2lsbDogU2tpbGxGaWVsZCwgZGF0YTogU1I1QWN0b3JTaGVldERhdGEpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNTa2lsbE1hZ2ljKHNraWxsSWQsIHNraWxsKSAmJiBkYXRhLmRhdGEuc3BlY2lhbCA9PT0gJ21hZ2ljJyAmJiB0aGlzLl9pc1NraWxsRmlsdGVyZWQoc2tpbGxJZCwgc2tpbGwpO1xyXG4gICAgfVxyXG5cclxuICAgIF9zaG93UmVzb25hbmNlU2tpbGxzKHNraWxsSWQsIHNraWxsOiBTa2lsbEZpZWxkLCBkYXRhOiBTUjVBY3RvclNoZWV0RGF0YSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pc1NraWxsUmVzb25hbmNlKHNraWxsKSAmJiBkYXRhLmRhdGEuc3BlY2lhbCA9PT0gJ3Jlc29uYW5jZScgJiYgdGhpcy5faXNTa2lsbEZpbHRlcmVkKHNraWxsSWQsIHNraWxsKTtcclxuICAgIH1cclxuXHJcbiAgICBfcHJlcGFyZUl0ZW1zKGRhdGEpIHtcclxuICAgICAgICBjb25zdCBpbnZlbnRvcnkgPSB7fTtcclxuXHJcbiAgICAgICAgLy8gQWxsIGFjdGluZyBlbnRpdGllcyBzaG91bGQgYmUgYWxsb3dlZCB0byBjYXJyeSBzb21lIHByb3RlY3Rpb24hXHJcbiAgICAgICAgaW52ZW50b3J5Wyd3ZWFwb24nXSA9IHtcclxuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1Lkl0ZW1UeXBlcy5XZWFwb24nKSxcclxuICAgICAgICAgICAgaXRlbXM6IFtdLFxyXG4gICAgICAgICAgICBkYXRhc2V0OiB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnd2VhcG9uJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBDcml0dGVycyBhcmUgcGVvcGxlIHRvLi4uIFN1cHBvcnQgeW91ciBsb2NhbCBITUhWViBzdXBwb3J0IGdyb3VwcyFcclxuICAgICAgICBpZiAodGhpcy5hY3Rvci5tYXRjaGVzQWN0b3JUeXBlcyhbJ2NoYXJhY3RlcicsICdjcml0dGVyJywgJ3ZlaGljbGUnXSkpIHtcclxuICAgICAgICAgICAgaW52ZW50b3J5Wydhcm1vciddID0ge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1Lkl0ZW1UeXBlcy5Bcm1vcicpLFxyXG4gICAgICAgICAgICAgICAgaXRlbXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgZGF0YXNldDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdhcm1vcicsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpbnZlbnRvcnlbJ2RldmljZSddID0ge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1Lkl0ZW1UeXBlcy5EZXZpY2UnKSxcclxuICAgICAgICAgICAgICAgIGl0ZW1zOiBbXSxcclxuICAgICAgICAgICAgICAgIGRhdGFzZXQ6IHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGV2aWNlJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGludmVudG9yeVsnZXF1aXBtZW50J10gPSB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuSXRlbVR5cGVzLkVxdWlwbWVudCcpLFxyXG4gICAgICAgICAgICAgICAgaXRlbXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgZGF0YXNldDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcXVpcG1lbnQnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaW52ZW50b3J5WydhbW1vJ10gPSB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuSXRlbVR5cGVzLkFtbW8nKSxcclxuICAgICAgICAgICAgICAgIGl0ZW1zOiBbXSxcclxuICAgICAgICAgICAgICAgIGRhdGFzZXQ6IHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYW1tbycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpbnZlbnRvcnlbJ2N5YmVyd2FyZSddID0ge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1Lkl0ZW1UeXBlcy5DeWJlcndhcmUnKSxcclxuICAgICAgICAgICAgICAgIGl0ZW1zOiBbXSxcclxuICAgICAgICAgICAgICAgIGRhdGFzZXQ6IHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY3liZXJ3YXJlJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGludmVudG9yeVsnYmlvd2FyZSddID0ge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1Lkl0ZW1UeXBlcy5CaW93YXJlJyksXHJcbiAgICAgICAgICAgICAgICBpdGVtczogW10sXHJcbiAgICAgICAgICAgICAgICBkYXRhc2V0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Jpb3dhcmUnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBbXHJcbiAgICAgICAgICAgIGl0ZW1zLFxyXG4gICAgICAgICAgICBzcGVsbHMsXHJcbiAgICAgICAgICAgIHF1YWxpdGllcyxcclxuICAgICAgICAgICAgYWRlcHRfcG93ZXJzLFxyXG4gICAgICAgICAgICBhY3Rpb25zLFxyXG4gICAgICAgICAgICBjb21wbGV4X2Zvcm1zLFxyXG4gICAgICAgICAgICBsaWZlc3R5bGVzLFxyXG4gICAgICAgICAgICBjb250YWN0cyxcclxuICAgICAgICAgICAgc2lucyxcclxuICAgICAgICAgICAgcHJvZ3JhbXMsXHJcbiAgICAgICAgICAgIGNyaXR0ZXJfcG93ZXJzLFxyXG4gICAgICAgICAgICBzcHJpdGVfcG93ZXJzLFxyXG4gICAgICAgIF0gPSBkYXRhLml0ZW1zLnJlZHVjZShcclxuICAgICAgICAgICAgKGFyciwgaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gRHVwbGljYXRlIHRvIGF2b2lkIGxhdGVyIHVwZGF0ZXMgcHJvcGFnYXRpbmcgY2hhbmdlZCBpdGVtIGRhdGEuXHJcbiAgICAgICAgICAgICAgICAvLyBOT1RFOiBJZiBubyBkdXBsaWNhdGlvbiBpcyBkb25lLCBhZGRlZCBmaWVsZHMgd2lsbCBiZSBzdG9yZWQgaW4gdGhlIGRhdGFiYXNlIG9uIHVwZGF0ZXMhXHJcbiAgICAgICAgICAgICAgICBpdGVtID0gZHVwbGljYXRlKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgLy8gU2hvdyBpdGVtIHByb3BlcnRpZXMgYW5kIGRlc2NyaXB0aW9uIGluIHRoZSBpdGVtIGxpc3Qgb3ZlcnZpZXdzLlxyXG4gICAgICAgICAgICAgICAgY29uc3QgYWN0b3JJdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoaXRlbS5faWQpIGFzIFNSNUl0ZW07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaGF0RGF0YSA9IGFjdG9ySXRlbS5nZXRDaGF0RGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5kZXNjcmlwdGlvbiA9IGNoYXREYXRhLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSAvLyBUaGlzIGlzIGEgaGFja3kgbW9ua2V5IHBhdGNoIHNvbHV0aW9uIHRvIHBhc3MgdGVtcGxhdGUgZGF0YSB0aHJvdWdoIGR1cGxpY2F0ZWQgaXRlbSBkYXRhLlxyXG4gICAgICAgICAgICAgICAgaXRlbS5wcm9wZXJ0aWVzID0gY2hhdERhdGEucHJvcGVydGllcztcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBpc1N0YWNrIHByb3BlcnR5IGlzbid0IHVzZWQgZWxzZXdoZXJlLiBSZW1vdmUgaWYgdW5uZWNlc3NhcnkuXHJcbiAgICAgICAgICAgICAgICBpdGVtLmlzU3RhY2sgPSBpdGVtLmRhdGEucXVhbnRpdHkgPyBpdGVtLmRhdGEucXVhbnRpdHkgPiAxIDogZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnc3BlbGwnKSBhcnJbMV0ucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ3F1YWxpdHknKSBhcnJbMl0ucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ2FkZXB0X3Bvd2VyJykgYXJyWzNdLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdhY3Rpb24nKSBhcnJbNF0ucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ2NvbXBsZXhfZm9ybScpIGFycls1XS5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXRlbS50eXBlID09PSAnbGlmZXN0eWxlJykgYXJyWzZdLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdjb250YWN0JykgYXJyWzddLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdzaW4nKSBhcnJbOF0ucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ3Byb2dyYW0nKSBhcnJbOV0ucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ2NyaXR0ZXJfcG93ZXInKSBhcnJbMTBdLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdzcHJpdGVfcG93ZXInKSBhcnJbMTFdLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChPYmplY3Qua2V5cyhpbnZlbnRvcnkpLmluY2x1ZGVzKGl0ZW0udHlwZSkpIGFyclswXS5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFycjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgW1tdLCBbXSwgW10sIFtdLCBbXSwgW10sIFtdLCBbXSwgW10sIFtdLCBbXSwgW11dLFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNvcnRCeU5hbWUgPSAoaTEsIGkyKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpMS5uYW1lID4gaTIubmFtZSkgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIGlmIChpMS5uYW1lIDwgaTIubmFtZSkgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHNvcnRCeUVxdWlwcGVkID0gKGxlZnQsIHJpZ2h0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxlZnRFcXVpcHBlZCA9IGxlZnQuZGF0YT8udGVjaG5vbG9neT8uZXF1aXBwZWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHJpZ2h0RXF1aXBwZWQgPSByaWdodC5kYXRhPy50ZWNobm9sb2d5Py5lcXVpcHBlZDtcclxuICAgICAgICAgICAgaWYgKGxlZnRFcXVpcHBlZCAmJiAhcmlnaHRFcXVpcHBlZCkgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICBpZiAocmlnaHRFcXVpcHBlZCAmJiAhbGVmdEVxdWlwcGVkKSByZXR1cm4gMTtcclxuICAgICAgICAgICAgaWYgKGxlZnQubmFtZSA+IHJpZ2h0Lm5hbWUpIHJldHVybiAxO1xyXG4gICAgICAgICAgICBpZiAobGVmdC5uYW1lIDwgcmlnaHQubmFtZSkgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGFjdGlvbnMuc29ydChzb3J0QnlOYW1lKTtcclxuICAgICAgICBhZGVwdF9wb3dlcnMuc29ydChzb3J0QnlOYW1lKTtcclxuICAgICAgICBjb21wbGV4X2Zvcm1zLnNvcnQoc29ydEJ5TmFtZSk7XHJcbiAgICAgICAgaXRlbXMuc29ydChzb3J0QnlFcXVpcHBlZCk7XHJcbiAgICAgICAgc3BlbGxzLnNvcnQoc29ydEJ5TmFtZSk7XHJcbiAgICAgICAgY29udGFjdHMuc29ydChzb3J0QnlOYW1lKTtcclxuICAgICAgICBsaWZlc3R5bGVzLnNvcnQoc29ydEJ5TmFtZSk7XHJcbiAgICAgICAgc2lucy5zb3J0KHNvcnRCeU5hbWUpO1xyXG4gICAgICAgIHByb2dyYW1zLnNvcnQoc29ydEJ5RXF1aXBwZWQpO1xyXG4gICAgICAgIGNyaXR0ZXJfcG93ZXJzLnNvcnQoc29ydEJ5TmFtZSk7XHJcbiAgICAgICAgc3ByaXRlX3Bvd2Vycy5zb3J0KHNvcnRCeU5hbWUpO1xyXG5cclxuICAgICAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIGludmVudG9yeVtpdGVtLnR5cGVdLml0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGRhdGEuaW52ZW50b3J5ID0gT2JqZWN0LnZhbHVlcyhpbnZlbnRvcnkpO1xyXG4gICAgICAgIGRhdGEubWFnaWMgPSB7XHJcbiAgICAgICAgICAgIHNwZWxsYm9vazogc3BlbGxzLFxyXG4gICAgICAgICAgICBwb3dlcnM6IGFkZXB0X3Bvd2VycyxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGRhdGEuYWN0aW9ucyA9IGFjdGlvbnM7XHJcbiAgICAgICAgZGF0YS5jb21wbGV4X2Zvcm1zID0gY29tcGxleF9mb3JtcztcclxuICAgICAgICBkYXRhLmxpZmVzdHlsZXMgPSBsaWZlc3R5bGVzO1xyXG4gICAgICAgIGRhdGEuY29udGFjdHMgPSBjb250YWN0cztcclxuICAgICAgICBkYXRhLnNpbnMgPSBzaW5zO1xyXG4gICAgICAgIGRhdGEucHJvZ3JhbXMgPSBwcm9ncmFtcztcclxuICAgICAgICBkYXRhLmNyaXR0ZXJfcG93ZXJzID0gY3JpdHRlcl9wb3dlcnM7XHJcbiAgICAgICAgZGF0YS5zcHJpdGVfcG93ZXJzID0gc3ByaXRlX3Bvd2VycztcclxuXHJcbiAgICAgICAgcXVhbGl0aWVzLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgaWYgKGEuZGF0YS50eXBlID09PSAncG9zaXRpdmUnICYmIGIuZGF0YS50eXBlID09PSAnbmVnYXRpdmUnKSByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIGlmIChhLmRhdGEudHlwZSA9PT0gJ25lZ2F0aXZlJyAmJiBiLmRhdGEudHlwZSA9PT0gJ3Bvc2l0aXZlJykgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIHJldHVybiBhLm5hbWUgPCBiLm5hbWUgPyAtMSA6IDE7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZGF0YS5xdWFsaXRpZXMgPSBxdWFsaXRpZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxyXG4gICAgICogQHBhcmFtIGh0bWwgVGhlIHByZXBhcmVkIEhUTUwgb2JqZWN0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIERPTVxyXG4gICAgICovXHJcbiAgICBhY3RpdmF0ZUxpc3RlbmVycyhodG1sKSB7XHJcbiAgICAgICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbCk7XHJcblxyXG4gICAgICAgIGh0bWwuZmluZCgnLmhpZGRlbicpLmhpZGUoKTtcclxuXHJcbiAgICAgICAgaHRtbC5maW5kKCcuaGFzLWRlc2MnKS5jbGljaygoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgY29uc3QgaXRlbSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLmxpc3QtaXRlbScpO1xyXG4gICAgICAgICAgICBjb25zdCBpaWQgPSAkKGl0ZW0pLmRhdGEoKS5pdGVtO1xyXG4gICAgICAgICAgICBjb25zdCBmaWVsZCA9IGl0ZW0ubmV4dCgpO1xyXG4gICAgICAgICAgICBmaWVsZC50b2dnbGUoKTtcclxuICAgICAgICAgICAgaWYgKGlpZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkLmlzKCc6dmlzaWJsZScpKSB0aGlzLl9zaG93bkRlc2MucHVzaChpaWQpO1xyXG4gICAgICAgICAgICAgICAgZWxzZSB0aGlzLl9zaG93bkRlc2MgPSB0aGlzLl9zaG93bkRlc2MuZmlsdGVyKCh2YWwpID0+IHZhbCAhPT0gaWlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBodG1sLmZpbmQoJy5za2lsbC1oZWFkZXInKS5maW5kKCcuaXRlbS1uYW1lJykuY2xpY2sodGhpcy5fb25GaWx0ZXJVbnRyYWluZWRTa2lsbHMuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgaHRtbC5maW5kKCcuc2tpbGwtaGVhZGVyJykuZmluZCgnLnNraWxsLXNwZWMtaXRlbScpLmNsaWNrKHRoaXMuX29uRmlsdGVyVW50cmFpbmVkU2tpbGxzLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGh0bWwuZmluZCgnLnNraWxsLWhlYWRlcicpLmZpbmQoJy5ydGcnKS5jbGljayh0aGlzLl9vbkZpbHRlclVudHJhaW5lZFNraWxscy5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgaHRtbC5maW5kKCcuY2VsbC1pbnB1dC1yb2xsJykuY2xpY2sodGhpcy5fb25Sb2xsQ2VsbElucHV0LmJpbmQodGhpcykpO1xyXG4gICAgICAgIGh0bWwuZmluZCgnLmF0dHJpYnV0ZS1yb2xsJykuY2xpY2sodGhpcy5fb25Sb2xsQXR0cmlidXRlLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGh0bWwuZmluZCgnLnNraWxsLXJvbGwnKS5jbGljayh0aGlzLl9vblJvbGxBY3RpdmVTa2lsbC5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgaHRtbC5maW5kKCcjZmlsdGVyLXNraWxscycpLm9uKCdpbnB1dCcsIHRoaXMuX29uRmlsdGVyU2tpbGxzLmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICBodG1sLmZpbmQoJy5za2lsbC1lZGl0JykuY2xpY2sodGhpcy5fb25TaG93RWRpdFNraWxsLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGh0bWwuZmluZCgnLmtub3dsZWRnZS1za2lsbC1lZGl0JykuY2xpY2sodGhpcy5fb25TaG93RWRpdEtub3dsZWRnZVNraWxsLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGh0bWwuZmluZCgnLmxhbmd1YWdlLXNraWxsLWVkaXQnKS5jbGljayh0aGlzLl9vblNob3dFZGl0TGFuZ3VhZ2VTa2lsbC5iaW5kKHRoaXMpKTtcclxuICAgICAgICBodG1sLmZpbmQoJy5hZGQta25vd2xlZGdlJykuY2xpY2sodGhpcy5fb25BZGRLbm93bGVkZ2VTa2lsbC5iaW5kKHRoaXMpKTtcclxuICAgICAgICBodG1sLmZpbmQoJy5hZGQtbGFuZ3VhZ2UnKS5jbGljayh0aGlzLl9vbkFkZExhbmd1YWdlU2tpbGwuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgaHRtbC5maW5kKCcuYWRkLWFjdGl2ZScpLmNsaWNrKHRoaXMuX29uQWRkQWN0aXZlU2tpbGwuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgaHRtbC5maW5kKCcucmVtb3ZlLWtub3dsZWRnZScpLmNsaWNrKHRoaXMuX29uUmVtb3ZlS25vd2xlZGdlU2tpbGwuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgaHRtbC5maW5kKCcucmVtb3ZlLWxhbmd1YWdlJykuY2xpY2sodGhpcy5fb25SZW1vdmVMYW5ndWFnZVNraWxsLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGh0bWwuZmluZCgnLnJlbW92ZS1hY3RpdmUnKS5jbGljayh0aGlzLl9vblJlbW92ZUFjdGl2ZVNraWxsLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGh0bWwuZmluZCgnLmtub3dsZWRnZS1za2lsbCcpLmNsaWNrKHRoaXMuX29uUm9sbEtub3dsZWRnZVNraWxsLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGh0bWwuZmluZCgnLmxhbmd1YWdlLXNraWxsJykuY2xpY2sodGhpcy5fb25Sb2xsTGFuZ3VhZ2VTa2lsbC5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgaHRtbC5maW5kKCcuaXRlbS1yb2xsJykuY2xpY2sodGhpcy5fb25Sb2xsSXRlbS5iaW5kKHRoaXMpKTtcclxuICAgICAgICBodG1sLmZpbmQoJy5pdGVtLWVxdWlwLXRvZ2dsZScpLmNsaWNrKHRoaXMuX29uRXF1aXBJdGVtLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGh0bWwuZmluZCgnLml0ZW0tcXR5JykuY2hhbmdlKHRoaXMuX29uQ2hhbmdlUXR5LmJpbmQodGhpcykpO1xyXG4gICAgICAgIGh0bWwuZmluZCgnLml0ZW0tcnRnJykuY2hhbmdlKHRoaXMuX29uQ2hhbmdlUnRnLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGh0bWwuZmluZCgnLml0ZW0tY3JlYXRlJykuY2xpY2sodGhpcy5fb25JdGVtQ3JlYXRlLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGh0bWwuZmluZCgnLnJlbG9hZC1hbW1vJykuY2xpY2sodGhpcy5fb25SZWxvYWRBbW1vLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGh0bWwuZmluZCgnLm1hdHJpeC1hdHQtc2VsZWN0b3InKS5jaGFuZ2UodGhpcy5fb25NYXRyaXhBdHRyaWJ1dGVTZWxlY3RlZC5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgaHRtbC5maW5kKCcuaW1wb3J0LWNoYXJhY3RlcicpLmNsaWNrKHRoaXMuX29uU2hvd0ltcG9ydENoYXJhY3Rlci5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogT3BlbiB0aGUgUERGIGZvciBhbiBpdGVtIG9uIHRoZSBhY3RvclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgICQoaHRtbClcclxuICAgICAgICAgICAgLmZpbmQoJy5vcGVuLXNvdXJjZS1wZGYnKVxyXG4gICAgICAgICAgICAub24oJ2NsaWNrJywgYXN5bmMgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5saXN0LWl0ZW0nKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlpZCA9ICQoZmllbGQpLmRhdGEoKS5pdGVtSWQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5nZXRPd25lZFNSNUl0ZW0oaWlkKTtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaXRlbS5vcGVuUGRmU291cmNlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKGh0bWwpLmZpbmQoJy5ob3Jpem9udGFsLWNlbGwtaW5wdXQgLmNlbGwnKS5vbignY2xpY2snLCB0aGlzLl9vblNldENlbGxJbnB1dC5iaW5kKHRoaXMpKTtcclxuICAgICAgICAkKGh0bWwpLmZpbmQoJy5ob3Jpem9udGFsLWNlbGwtaW5wdXQgLmNlbGwnKS5vbignY29udGV4dG1lbnUnLCB0aGlzLl9vbkNsZWFyQ2VsbElucHV0LmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBOZXcgQVBJIHRvIHVzZSBmb3Igcm9sbGluZyBmcm9tIHRoZSBhY3RvciBzaGVldFxyXG4gICAgICAgICAqIHRoZSBjbGlja2FibGUgbGFiZWwgbmVlZHMgdGhlIGNzcyBjbGFzcyBSb2xsXHJcbiAgICAgICAgICogYSBwYXJlbnQgb2YgdGhlIGxhYmVsIG5lZWRzIHRvIGhhdmUgdGhlIGNzcyBjbGFzcyBSb2xsSWQsIGFuZCB0aGVuIGhhdmUgZGF0YS1yb2xsLWlkIHNldFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgICQoaHRtbCkuZmluZCgnLlJvbGwnKS5vbignY2xpY2snLCB0aGlzLl9vblJvbGxGcm9tU2hlZXQuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgIC8vIHVwZGF0ZXMgbWF0cml4IGNvbmRpdGlvbiBtb25pdG9yIG9uIHRoZSBkZXZpY2UgdGhlIGFjdG9yIGhhcyBlcXVpcHBlXHJcbiAgICAgICAgJChodG1sKVxyXG4gICAgICAgICAgICAuZmluZCgnW25hbWU9XCJkYXRhLm1hdHJpeC5jb25kaXRpb25fbW9uaXRvci52YWx1ZVwiXScpXHJcbiAgICAgICAgICAgIC5vbignY2hhbmdlJywgYXN5bmMgKGV2ZW50OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IEhlbHBlcnMucGFyc2VJbnB1dFRvTnVtYmVyKGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWF0cml4RGV2aWNlID0gdGhpcy5hY3Rvci5nZXRNYXRyaXhEZXZpY2UoKTtcclxuICAgICAgICAgICAgICAgIGlmIChtYXRyaXhEZXZpY2UgJiYgIWlzTmFOKHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLnRlY2hub2xvZ3kuY29uZGl0aW9uX21vbml0b3IudmFsdWUnXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG1hdHJpeERldmljZS51cGRhdGUodXBkYXRlRGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgSW52ZW50b3J5IEl0ZW1cclxuICAgICAgICBodG1sLmZpbmQoJy5pdGVtLWVkaXQnKS5jbGljaygoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgY29uc3QgaWlkID0gSGVscGVycy5saXN0SXRlbUlkKGV2ZW50KTtcclxuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuZ2V0T3duZWRTUjVJdGVtKGlpZCk7XHJcbiAgICAgICAgICAgIGlmIChpdGVtKSBpdGVtLnNoZWV0LnJlbmRlcih0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBEZWxldGUgSW52ZW50b3J5IEl0ZW1cclxuICAgICAgICBodG1sLmZpbmQoJy5pdGVtLWRlbGV0ZScpLmNsaWNrKGV2ZW50ID0+IHRoaXMuZGVsZXRlT3duZWRJdGVtKGV2ZW50KSk7XHJcbiAgICAgICAgLy8gRHJhZyBpbnZlbnRvcnkgaXRlbVxyXG4gICAgICAgIGxldCBoYW5kbGVyID0gKGV2KSA9PiB0aGlzLl9vbkRyYWdTdGFydChldik7XHJcbiAgICAgICAgaHRtbC5maW5kKCcubGlzdC1pdGVtJykuZWFjaCgoaSwgaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXRlbS5kYXRhc2V0ICYmIGl0ZW0uZGF0YXNldC5pdGVtSWQpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uc2V0QXR0cmlidXRlKCdkcmFnZ2FibGUnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgaGFuZGxlciwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGh0bWwuZmluZCgnLmRyaXZlci1yZW1vdmUnKS5jbGljayh0aGlzLmhhbmRsZVJlbW92ZVZlaGljbGVEcml2ZXIuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEhhbmRsZSBhbGwgZW50aXR5IGRyb3BzIG9udG8gYWxsIGFjdG9yIHNoZWV0IHR5cGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBldmVudFxyXG4gICAgICovXHJcbiAgICBhc3luYyBfb25Ecm9wKGV2ZW50OiBEcmFnRXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICBpZiAoIWV2ZW50LmRhdGFUcmFuc2ZlcikgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBkcm9wRGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKSk7XHJcblxyXG4gICAgICAgIC8vIEhhbmRsZSBzcGVjaWZpYyBzeXN0ZW0gZHJvcCBldmVudHMuXHJcbiAgICAgICAgc3dpdGNoIChkcm9wRGF0YS50eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJBY3RvclwiOlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5hZGRWZWhpY2xlRHJpdmVyKGRyb3BEYXRhLmlkKVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBIYW5kbGUgbm9uZSBzcGVjaWZpYyBkcm9wIGV2ZW50cy5cclxuICAgICAgICBhd2FpdCBzdXBlci5fb25Ecm9wKGV2ZW50KTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIGFzeW5jIGRlbGV0ZU93bmVkSXRlbShldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHVzZXJDb25zZW50ZWQgPSBhd2FpdCBIZWxwZXJzLmNvbmZpcm1EZWxldGlvbigpO1xyXG4gICAgICAgIGlmICghdXNlckNvbnNlbnRlZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBpaWQgPSBIZWxwZXJzLmxpc3RJdGVtSWQoZXZlbnQpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuYWN0b3IuZGVsZXRlT3duZWRJdGVtKGlpZCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgX29uUm9sbEZyb21TaGVldChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgLy8gbG9vayBmb3Igcm9sbCBpZCBkYXRhIGluIHRoZSBjdXJyZW50IGxpbmVcclxuICAgICAgICBsZXQgcm9sbElkID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5kYXRhKCk/LnJvbGxJZDtcclxuICAgICAgICAvLyBpZiB0aGF0IGRvZXNuJ3QgZXhpc3QsIGxvb2sgZm9yIGEgcHJlbnQgd2l0aCBSb2xsSWQgbmFtZVxyXG4gICAgICAgIHJvbGxJZCA9IHJvbGxJZCA/PyAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudCgnLlJvbGxJZCcpLmRhdGEoKS5yb2xsSWQ7XHJcblxyXG4gICAgICAgIGNvbnN0IHNwbGl0ID0gcm9sbElkLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHsgZXZlbnQgfTtcclxuICAgICAgICBzd2l0Y2ggKHNwbGl0WzBdKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3Byb21wdC1yb2xsJzpcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWN0b3IucHJvbXB0Um9sbChvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdhcm1vcic6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnJvbGxBcm1vcihvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdmYWRlJzpcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWN0b3Iucm9sbEZhZGUob3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZHJhaW4nOlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5yb2xsRHJhaW4ob3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZGVmZW5zZSc6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnJvbGxBdHRhY2tEZWZlbnNlKG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2RhbWFnZS1yZXNpc3QnOlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5yb2xsU29hayhvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgLy8gYXR0cmlidXRlIG9ubHkgcm9sbHNcclxuICAgICAgICAgICAgY2FzZSAnY29tcG9zdXJlJzpcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWN0b3Iucm9sbEF0dHJpYnV0ZXNUZXN0KCdjb21wb3N1cmUnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdqdWRnZS1pbnRlbnRpb25zJzpcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWN0b3Iucm9sbEF0dHJpYnV0ZXNUZXN0KCdqdWRnZV9pbnRlbnRpb25zJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnbGlmdC1jYXJyeSc6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnJvbGxBdHRyaWJ1dGVzVGVzdCgnbGlmdF9jYXJyeScpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ21lbW9yeSc6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnJvbGxBdHRyaWJ1dGVzVGVzdCgnbWVtb3J5Jyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ3ZlaGljbGUtc3RhdCc6XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncm9sbCB2ZWhpY2xlIHN0YXQnLCByb2xsSWQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlICdkcm9uZSc6XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9wID0gc3BsaXRbMV07IC8vIHdlIGV4cGVjdCBhbm90aGVyIGZvciBcImRyb25lXCIgY2F0ZWdvcnlcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BlcmNlcHRpb24nOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnJvbGxEcm9uZVBlcmNlcHRpb24ob3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2luZmlsdHJhdGlvbic6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWN0b3Iucm9sbERyb25lSW5maWx0cmF0aW9uKG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdwaWxvdC12ZWhpY2xlJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5yb2xsUGlsb3RWZWhpY2xlKG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAvLyBlbmQgZHJvbmVcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ2F0dHJpYnV0ZSc6XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGUgPSBzcGxpdFsxXTtcclxuICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnJvbGxBdHRyaWJ1dGUoYXR0cmlidXRlLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAvLyBlbmQgYXR0cmlidXRlXHJcblxyXG4gICAgICAgICAgICBjYXNlICdza2lsbCc6XHJcbiAgICAgICAgICAgICAgICBjb25zdCBza2lsbFR5cGUgPSBzcGxpdFsxXTtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoc2tpbGxUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWN0aXZlJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBza2lsbElkID0gc3BsaXRbMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWN0b3Iucm9sbEFjdGl2ZVNraWxsKHNraWxsSWQsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbGFuZ3VhZ2UnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNraWxsSWQgPSBzcGxpdFsyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5yb2xsTGFuZ3VhZ2VTa2lsbChza2lsbElkLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2tub3dsZWRnZSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2F0ZWdvcnkgPSBzcGxpdFsyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2tpbGxJZCA9IHNwbGl0WzNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnJvbGxLbm93bGVkZ2VTa2lsbChjYXRlZ29yeSwgc2tpbGxJZCwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAvLyBlbmQgc2tpbGxcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ21hdHJpeCc6XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJrZXkgPSBzcGxpdFsxXTtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoc3Via2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYXR0cmlidXRlJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXR0ciA9IHNwbGl0WzJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnJvbGxNYXRyaXhBdHRyaWJ1dGUoYXR0ciwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RldmljZS1yYXRpbmcnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnJvbGxEZXZpY2VSYXRpbmcob3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAvLyBlbmQgbWF0cml4XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFNldHVwIHNraWxsIG5hbWUgZmlsdGVyIHdpdGhpbiBnZXREYXRhXHJcbiAgICBhc3luYyBfb25GaWx0ZXJTa2lsbHMoZXZlbnQpIHtcclxuICAgICAgICB0aGlzLl9maWx0ZXJzLnNraWxscyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWU7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTZXR1cCB1bnRyYWluZWQgc2tpbGwgZmlsdGVyIHdpdGhpbiBnZXREYXRhXHJcbiAgICBhc3luYyBfb25GaWx0ZXJVbnRyYWluZWRTa2lsbHMoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMuX2ZpbHRlcnMuc2hvd1VudHJhaW5lZFNraWxscyA9ICF0aGlzLl9maWx0ZXJzLnNob3dVbnRyYWluZWRTa2lsbHM7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBfb25SZWxvYWRBbW1vKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zdCBpaWQgPSBIZWxwZXJzLmxpc3RJdGVtSWQoZXZlbnQpO1xyXG4gICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLmdldE93bmVkU1I1SXRlbShpaWQpO1xyXG4gICAgICAgIGlmIChpdGVtKSByZXR1cm4gaXRlbS5yZWxvYWRBbW1vKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgX29uTWF0cml4QXR0cmlidXRlU2VsZWN0ZWQoZXZlbnQpIHtcclxuICAgICAgICBpZiAoIShcIm1hdHJpeFwiIGluIHRoaXMuYWN0b3IuZGF0YS5kYXRhKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBsZXQgaWlkID0gdGhpcy5hY3Rvci5kYXRhLmRhdGEubWF0cml4LmRldmljZTtcclxuICAgICAgICBsZXQgaXRlbSA9IHRoaXMuYWN0b3IuZ2V0T3duZWRTUjVJdGVtKGlpZCk7XHJcbiAgICAgICAgaWYgKCFpdGVtKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2NvdWxkIG5vdCBmaW5kIGl0ZW0nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBncmFiIG1hdHJpeCBhdHRyaWJ1dGUgKHNsZWF6ZSwgYXR0YWNrLCBldGMuKVxyXG4gICAgICAgIGxldCBhdHQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYXR0O1xyXG4gICAgICAgIC8vIGdyYWIgZGV2aWNlIGF0dHJpYnV0ZSAoYXR0MSwgYXR0MiwgLi4uKVxyXG4gICAgICAgIGxldCBkZXZpY2VBdHQgPSBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlO1xyXG5cclxuICAgICAgICAvLyBnZXQgY3VycmVudCBtYXRyaXggYXR0cmlidXRlIG9uIHRoZSBkZXZpY2VcclxuICAgICAgICBjb25zdCBkZXZpY2VEYXRhID0gaXRlbS5kYXRhLmRhdGEgYXMgRGV2aWNlRGF0YTtcclxuICAgICAgICBsZXQgb2xkVmFsID0gZGV2aWNlRGF0YS5hdHRzW2RldmljZUF0dF0uYXR0O1xyXG4gICAgICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgICAgICBfaWQ6IGlpZCxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBnbyB0aHJvdWdoIGF0dHMgb24gZGV2aWNlLCBzZXR1cCBtYXRyaXggYXR0cmlidXRlcyBvbiBpdFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDQ7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdG1wID0gYGF0dCR7aX1gO1xyXG4gICAgICAgICAgICBsZXQga2V5ID0gYGRhdGEuYXR0cy5hdHQke2l9LmF0dGA7XHJcbiAgICAgICAgICAgIGlmICh0bXAgPT09IGRldmljZUF0dCkge1xyXG4gICAgICAgICAgICAgICAgZGF0YVtrZXldID0gYXR0O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRldmljZURhdGEuYXR0c1tgYXR0JHtpfWBdLmF0dCA9PT0gYXR0KSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhW2tleV0gPSBvbGRWYWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci51cGRhdGVPd25lZEl0ZW0oZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uSXRlbUNyZWF0ZShldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgY29uc3QgdHlwZSA9IEhlbHBlcnMubGlzdEl0ZW1JZChldmVudCk7XHJcbiAgICAgICAgY29uc3QgaXRlbURhdGEgPSB7XHJcbiAgICAgICAgICAgIG5hbWU6IGBOZXcgJHt0eXBlfWAsXHJcbiAgICAgICAgICAgIHR5cGU6IHR5cGUsXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5hY3Rvci5jcmVhdGVPd25lZEl0ZW0oaXRlbURhdGEsIHsgcmVuZGVyU2hlZXQ6IHRydWUgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgX29uQWRkTGFuZ3VhZ2VTa2lsbChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgY29uc3Qgc2tpbGxJZCA9IGF3YWl0IHRoaXMuYWN0b3IuYWRkTGFuZ3VhZ2VTa2lsbCh7IG5hbWU6ICcnIH0pO1xyXG4gICAgICAgIGlmICghc2tpbGxJZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyBOT1RFOiBDYXVzZXMgaXNzdWVzIHdpdGggYWRkaW5nIGtub3dsZWRnZSBza2lsbHMgKGNhdGVnb3J5IHVuZGVmaW5lZClcclxuICAgICAgICAvLyBhd2FpdCB0aGlzLl9zaG93U2tpbGxFZGl0Rm9ybShMYW5ndWFnZVNraWxsRWRpdEZvcm0sIHRoaXMuYWN0b3IsIHtldmVudH0sIHNraWxsSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIF9vblJlbW92ZUxhbmd1YWdlU2tpbGwoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICBjb25zdCB1c2VyQ29uc2VudGVkID0gYXdhaXQgSGVscGVycy5jb25maXJtRGVsZXRpb24oKTtcclxuICAgICAgICBpZiAoIXVzZXJDb25zZW50ZWQpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3Qgc2tpbGxJZCA9IEhlbHBlcnMubGlzdEl0ZW1JZChldmVudCk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5yZW1vdmVMYW5ndWFnZVNraWxsKHNraWxsSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIF9vbkFkZEtub3dsZWRnZVNraWxsKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zdCBjYXRlZ29yeSA9IEhlbHBlcnMubGlzdEl0ZW1JZChldmVudCk7XHJcbiAgICAgICAgY29uc3Qgc2tpbGxJZCA9IGF3YWl0IHRoaXMuYWN0b3IuYWRkS25vd2xlZGdlU2tpbGwoY2F0ZWdvcnkpO1xyXG4gICAgICAgIGlmICghc2tpbGxJZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyBOT1RFOiBDYXVzZXMgaXNzdWVzIHdpdGggYWRkaW5nIGtub3dsZWRnZSBza2lsbHMgKGNhdGVnb3J5IHVuZGVmaW5lZClcclxuICAgICAgICAvLyBhd2FpdCB0aGlzLl9zaG93U2tpbGxFZGl0Rm9ybShLbm93bGVkZ2VTa2lsbEVkaXRGb3JtLCB0aGlzLmFjdG9yLCB7ZXZlbnR9LCBza2lsbElkKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBfb25SZW1vdmVLbm93bGVkZ2VTa2lsbChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHVzZXJDb25zZW50ZWQgPSBhd2FpdCBIZWxwZXJzLmNvbmZpcm1EZWxldGlvbigpO1xyXG4gICAgICAgIGlmICghdXNlckNvbnNlbnRlZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBbc2tpbGxJZCwgY2F0ZWdvcnldID0gSGVscGVycy5saXN0SXRlbUlkKGV2ZW50KS5zcGxpdCgnLicpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuYWN0b3IucmVtb3ZlS25vd2xlZGdlU2tpbGwoc2tpbGxJZCwgY2F0ZWdvcnkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBBZGQgYW4gYWN0aXZlIHNraWxsIGFuZCBzaG93IHRoZSBtYXRjaGluZyBlZGl0IGFwcGxpY2F0aW9uIGFmdGVyd2FyZHMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGV2ZW50IFRoZSBIVE1MIGV2ZW50IGZyb20gd2hpY2ggdGhlIGFjdGlvbiByZXN1bHRlZC5cclxuICAgICAqL1xyXG4gICAgIGFzeW5jIF9vbkFkZEFjdGl2ZVNraWxsKGV2ZW50OiBFdmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgY29uc3Qgc2tpbGxJZCA9IGF3YWl0IHRoaXMuYWN0b3IuYWRkQWN0aXZlU2tpbGwoKTtcclxuICAgICAgICBpZiAoIXNraWxsSWQpIHJldHVybjtcclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5fc2hvd1NraWxsRWRpdEZvcm0oU2tpbGxFZGl0Rm9ybSwgdGhpcy5hY3RvciwgeyBldmVudDogZXZlbnQgfSwgc2tpbGxJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgX29uUmVtb3ZlQWN0aXZlU2tpbGwoZXZlbnQ6IEV2ZW50KSB7XHJcbiAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHVzZXJDb25zZW50ZWQgPSBhd2FpdCBIZWxwZXJzLmNvbmZpcm1EZWxldGlvbigpO1xyXG4gICAgICAgIGlmICghdXNlckNvbnNlbnRlZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBza2lsbElkID0gSGVscGVycy5saXN0SXRlbUlkKGV2ZW50KTtcclxuICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnJlbW92ZUFjdGl2ZVNraWxsKHNraWxsSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIF9vbkNoYW5nZVJ0ZyhldmVudCkge1xyXG4gICAgICAgIGNvbnN0IGlpZCA9IEhlbHBlcnMubGlzdEl0ZW1JZChldmVudCk7XHJcbiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuZ2V0T3duZWRTUjVJdGVtKGlpZCk7XHJcbiAgICAgICAgY29uc3QgcnRnID0gcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSk7XHJcbiAgICAgICAgaWYgKGl0ZW0gJiYgcnRnKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IGl0ZW0udXBkYXRlKHsgJ2RhdGEudGVjaG5vbG9neS5yYXRpbmcnOiBydGcgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIF9vbkNoYW5nZVF0eShldmVudCkge1xyXG4gICAgICAgIGNvbnN0IGlpZCA9IEhlbHBlcnMubGlzdEl0ZW1JZChldmVudCk7XHJcbiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuZ2V0T3duZWRTUjVJdGVtKGlpZCk7XHJcbiAgICAgICAgY29uc3QgcXR5ID0gcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSk7XHJcbiAgICAgICAgaWYgKGl0ZW0gJiYgcXR5ICYmIFwidGVjaG5vbG9neVwiIGluIGl0ZW0uZGF0YS5kYXRhKSB7XHJcbiAgICAgICAgICAgIGl0ZW0uZGF0YS5kYXRhLnRlY2hub2xvZ3kucXVhbnRpdHkgPSBxdHk7XHJcbiAgICAgICAgICAgIGF3YWl0IGl0ZW0udXBkYXRlKHsgJ2RhdGEudGVjaG5vbG9neS5xdWFudGl0eSc6IHF0eSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgX29uRXF1aXBJdGVtKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zdCBpaWQgPSBIZWxwZXJzLmxpc3RJdGVtSWQoZXZlbnQpO1xyXG4gICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLmdldE93bmVkU1I1SXRlbShpaWQpO1xyXG4gICAgICAgIGlmIChpdGVtKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0l0ZW1zID0gW10gYXMgYW55W107XHJcbiAgICAgICAgICAgIGlmIChpdGVtLmlzRGV2aWNlKCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIE9ubHkgYWxsb3cgb25lIGVxdWlwcGVkIGRldmljZSBpdGVtLiBVbmVxdWlwIGFsbCBvdGhlci5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGl0ZSBvZiB0aGlzLmFjdG9yLml0ZW1zLmZpbHRlcigoYWN0b3JJdGVtOiBTUjVJdGVtKSA9PiBhY3Rvckl0ZW0uaXNEZXZpY2UoKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXdJdGVtcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ19pZCc6IGl0ZS5faWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhLnRlY2hub2xvZ3kuZXF1aXBwZWQnOiBpdGUuX2lkID09PSBpaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gVG9nZ2xlIGVxdWlwIHN0YXR1cy5cclxuICAgICAgICAgICAgICAgIG5ld0l0ZW1zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICdfaWQnOiBpaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEudGVjaG5vbG9neS5lcXVpcHBlZCc6ICFpdGVtLmlzRXF1aXBwZWQoKSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgLy8gVE9ETzogZm91bmRyeS1wYy10eXBlIGRlZmluZXMgRW50aXR5LnVwZGF0ZUVtYmVkZGVkRW50aXR5IGFzIHN0YXRpYyBidXQgaXQncyBub3QuXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWN0b3IudXBkYXRlRW1iZWRkZWRFbnRpdHkoJ093bmVkSXRlbScsIG5ld0l0ZW1zKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWN0b3IucmVuZGVyKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgX29uU2V0Q2VsbElucHV0KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBOdW1iZXIoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnZhbHVlKTtcclxuICAgICAgICBjb25zdCBjbUlkID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCcuaG9yaXpvbnRhbC1jZWxsLWlucHV0JykuZGF0YSgpLmlkO1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7fTtcclxuICAgICAgICBpZiAoY21JZCA9PT0gJ3N0dW4nIHx8IGNtSWQgPT09ICdwaHlzaWNhbCcpIHtcclxuICAgICAgICAgICAgY29uc3QgcHJvcGVydHkgPSBgZGF0YS50cmFjay4ke2NtSWR9LnZhbHVlYDtcclxuICAgICAgICAgICAgZGF0YVtwcm9wZXJ0eV0gPSB2YWx1ZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNtSWQgPT09ICdlZGdlJykge1xyXG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IGBkYXRhLmF0dHJpYnV0ZXMuZWRnZS51c2VzYDtcclxuICAgICAgICAgICAgZGF0YVtwcm9wZXJ0eV0gPSB2YWx1ZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNtSWQgPT09ICdvdmVyZmxvdycpIHtcclxuICAgICAgICAgICAgY29uc3QgcHJvcGVydHkgPSAnZGF0YS50cmFjay5waHlzaWNhbC5vdmVyZmxvdy52YWx1ZSc7XHJcbiAgICAgICAgICAgIGRhdGFbcHJvcGVydHldID0gdmFsdWU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjbUlkID09PSAnbWF0cml4Jykge1xyXG4gICAgICAgICAgICBjb25zdCBtYXRyaXhEZXZpY2UgPSB0aGlzLmFjdG9yLmdldE1hdHJpeERldmljZSgpO1xyXG4gICAgICAgICAgICBpZiAobWF0cml4RGV2aWNlICYmICFpc05hTih2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEudGVjaG5vbG9neS5jb25kaXRpb25fbW9uaXRvci52YWx1ZSddID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBtYXRyaXhEZXZpY2UudXBkYXRlKHVwZGF0ZURhdGEpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGF0YVsnZGF0YS5tYXRyaXguY29uZGl0aW9uX21vbml0b3IudmFsdWUnXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGF3YWl0IHRoaXMuYWN0b3IudXBkYXRlKGRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIF9vbkNsZWFyQ2VsbElucHV0KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgY21JZCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLmhvcml6b250YWwtY2VsbC1pbnB1dCcpLmRhdGEoKS5pZDtcclxuICAgICAgICBjb25zdCBkYXRhID0ge307XHJcbiAgICAgICAgaWYgKGNtSWQgPT09ICdzdHVuJykge1xyXG4gICAgICAgICAgICBkYXRhW2BkYXRhLnRyYWNrLnN0dW4udmFsdWVgXSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIENsZWFyaW5nIHRoZSBwaHlzaWNhbCBtb25pdG9yIHNob3VsZCBhbHNvIGNsZWFyIHRoZSBvdmVyZmxvdy5cclxuICAgICAgICBlbHNlIGlmIChjbUlkID09PSAncGh5c2ljYWwnKSB7XHJcbiAgICAgICAgICAgIGRhdGFbYGRhdGEudHJhY2sucGh5c2ljYWwudmFsdWVgXSA9IDA7XHJcbiAgICAgICAgICAgIGRhdGFbJ2RhdGEudHJhY2sucGh5c2ljYWwub3ZlcmZsb3cudmFsdWUnXSA9IDA7XHJcblxyXG4gICAgICAgIH0gZWxzZSBpZiAoY21JZCA9PT0gJ2VkZ2UnKSB7XHJcbiAgICAgICAgICAgIGRhdGFbYGRhdGEuYXR0cmlidXRlcy5lZGdlLnVzZXNgXSA9IDA7XHJcblxyXG4gICAgICAgIH0gZWxzZSBpZiAoY21JZCA9PT0gJ292ZXJmbG93Jykge1xyXG4gICAgICAgICAgICBkYXRhWydkYXRhLnRyYWNrLnBoeXNpY2FsLm92ZXJmbG93LnZhbHVlJ10gPSAwO1xyXG5cclxuICAgICAgICB9IGVsc2UgaWYgKGNtSWQgPT09ICdtYXRyaXgnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hdHJpeERldmljZSA9IHRoaXMuYWN0b3IuZ2V0TWF0cml4RGV2aWNlKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAobWF0cml4RGV2aWNlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLnRlY2hub2xvZ3kuY29uZGl0aW9uX21vbml0b3IudmFsdWUnXSA9IDA7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBtYXRyaXhEZXZpY2UudXBkYXRlKHVwZGF0ZURhdGEpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRhdGFbJ2RhdGEubWF0cml4LmNvbmRpdGlvbl9tb25pdG9yLnZhbHVlJ10gPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnVwZGF0ZShkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBfb25Sb2xsQ2VsbElucHV0KGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBsZXQgdHJhY2sgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJy5ob3Jpem9udGFsLWNlbGwtaW5wdXQnKS5kYXRhKCkuaWQ7XHJcbiAgICAgICAgaWYgKHRyYWNrID09PSAnc3R1bicgfHwgdHJhY2sgPT09ICdwaHlzaWNhbCcpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5yb2xsTmF0dXJhbFJlY292ZXJ5KHRyYWNrLCBldmVudCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0cmFjayA9PT0gJ2VkZ2UnKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWN0b3Iucm9sbEF0dHJpYnV0ZSgnZWRnZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBfb25Sb2xsSXRlbShldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgY29uc3QgaWlkID0gSGVscGVycy5saXN0SXRlbUlkKGV2ZW50KTtcclxuICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5nZXRPd25lZFNSNUl0ZW0oaWlkKTtcclxuICAgICAgICBpZiAoaXRlbSkge1xyXG4gICAgICAgICAgICBhd2FpdCBpdGVtLmNhc3RBY3Rpb24oZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBfb25Sb2xsS25vd2xlZGdlU2tpbGwoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGNvbnN0IGlkID0gSGVscGVycy5saXN0SXRlbUlkKGV2ZW50KTtcclxuICAgICAgICBjb25zdCBbc2tpbGwsIGNhdGVnb3J5XSA9IGlkLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWN0b3Iucm9sbEtub3dsZWRnZVNraWxsKGNhdGVnb3J5LCBza2lsbCwgeyBldmVudDogZXZlbnQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgX29uUm9sbExhbmd1YWdlU2tpbGwoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGNvbnN0IHNraWxsID0gSGVscGVycy5saXN0SXRlbUlkKGV2ZW50KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5hY3Rvci5yb2xsTGFuZ3VhZ2VTa2lsbChza2lsbCwgeyBldmVudDogZXZlbnQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgX29uUm9sbEFjdGl2ZVNraWxsKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zdCBza2lsbCA9IEhlbHBlcnMubGlzdEl0ZW1JZChldmVudCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWN0b3Iucm9sbEFjdGl2ZVNraWxsKHNraWxsLCB7IGV2ZW50OiBldmVudCB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBfb25Sb2xsQXR0cmlidXRlKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zdCBhdHRyID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYXR0cmlidXRlJykuZGF0YXNldC5hdHRyaWJ1dGU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWN0b3Iucm9sbEF0dHJpYnV0ZShhdHRyLCB7IGV2ZW50OiBldmVudCB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIF9maW5kQWN0aXZlTGlzdCgpIHtcclxuICAgICAgICByZXR1cm4gJCh0aGlzLmVsZW1lbnQpLmZpbmQoJy50YWIuYWN0aXZlIC5zY3JvbGwtYXJlYScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgYXN5bmMgX3JlbmRlciguLi5hcmdzKSB7XHJcbiAgICAgICAgY29uc3QgZm9jdXNMaXN0ID0gJCh0aGlzLmVsZW1lbnQpLmZpbmQoJzpmb2N1cycpO1xyXG4gICAgICAgIGNvbnN0IGZvY3VzOiBhbnkgPSBmb2N1c0xpc3QubGVuZ3RoID8gZm9jdXNMaXN0WzBdIDogbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5fc2F2ZVNjcm9sbFBvc2l0aW9ucygpO1xyXG4gICAgICAgIGF3YWl0IHN1cGVyLl9yZW5kZXIoLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fcmVzdG9yZVNjcm9sbFBvc2l0aW9ucygpO1xyXG5cclxuICAgICAgICBpZiAoZm9jdXMgJiYgZm9jdXMubmFtZSkge1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5mb3JtW2ZvY3VzLm5hbWVdO1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgLy8gc2V0IHRoZSBzZWxlY3Rpb24gcmFuZ2Ugb24gdGhlIGZvY3VzIGZvcm1lZCBmcm9tIGJlZm9yZSAoa2VlcHMgdHJhY2sgb2YgY3Vyc29yIGluIGlucHV0KVxyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5zZXRTZWxlY3Rpb25SYW5nZSAmJiBlbGVtZW50LnNldFNlbGVjdGlvblJhbmdlKGZvY3VzLnNlbGVjdGlvblN0YXJ0LCBmb2N1cy5zZWxlY3Rpb25FbmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX3Jlc3RvcmVTY3JvbGxQb3NpdGlvbnMoKSB7XHJcbiAgICAgICAgY29uc3QgYWN0aXZlTGlzdCA9IHRoaXMuX2ZpbmRBY3RpdmVMaXN0KCk7XHJcbiAgICAgICAgaWYgKGFjdGl2ZUxpc3QubGVuZ3RoICYmIHRoaXMuX3Njcm9sbCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZUxpc3QucHJvcCgnc2Nyb2xsVG9wJywgdGhpcy5fc2Nyb2xsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBfc2F2ZVNjcm9sbFBvc2l0aW9ucygpIHtcclxuICAgICAgICBjb25zdCBhY3RpdmVMaXN0ID0gdGhpcy5fZmluZEFjdGl2ZUxpc3QoKTtcclxuICAgICAgICBpZiAoYWN0aXZlTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsID0gYWN0aXZlTGlzdC5wcm9wKCdzY3JvbGxUb3AnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgX2Nsb3NlT3BlblNraWxsQXBwKCkge1xyXG4gICAgICAgIGlmIChnbG9iYWxTa2lsbEFwcElkICE9PSAtMSkge1xyXG4gICAgICAgICAgICBpZiAodWkud2luZG93c1tnbG9iYWxTa2lsbEFwcElkXSkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdWkud2luZG93c1tnbG9iYWxTa2lsbEFwcElkXS5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGdsb2JhbFNraWxsQXBwSWQgPSAtMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEtlZXAgdHJhY2sgb2YgZWFjaCBTa2lsbEVkaXRGb3JtIGluc3RhbmNlIGFuZCBjbG9zZSBiZWZvcmUgb3BlbmluZyBhbm90aGVyLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBza2lsbEVkaXRGb3JtSW1wbGVtZW50YXRpb24gQW55IGV4dGVuZGluZyBjbGFzcyEgb2YgU2tpbGxFZGl0Rm9ybVxyXG4gICAgICogQHBhcmFtIGFjdG9yXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xyXG4gICAgICogQHBhcmFtIGFyZ3MgQ29sbGVjdCBhcmd1bWVudHMgb2YgdGhlIGRpZmZlcmVudCByZW5kZXJXaXRoU2tpbGwgaW1wbGVtZW50YXRpb25zLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBfc2hvd1NraWxsRWRpdEZvcm0oc2tpbGxFZGl0Rm9ybUltcGxlbWVudGF0aW9uLCBhY3RvcjogU1I1QWN0b3IsIG9wdGlvbnM6IG9iamVjdCwgLi4uYXJncykge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuX2Nsb3NlT3BlblNraWxsQXBwKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNraWxsRWRpdEZvcm0gPSBuZXcgc2tpbGxFZGl0Rm9ybUltcGxlbWVudGF0aW9uKGFjdG9yLCBvcHRpb25zLCAuLi5hcmdzKTtcclxuICAgICAgICBnbG9iYWxTa2lsbEFwcElkID0gc2tpbGxFZGl0Rm9ybS5hcHBJZDtcclxuICAgICAgICBhd2FpdCBza2lsbEVkaXRGb3JtLnJlbmRlcih0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25TaG93RWRpdEtub3dsZWRnZVNraWxsKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zdCBbc2tpbGwsIGNhdGVnb3J5XSA9IEhlbHBlcnMubGlzdEl0ZW1JZChldmVudCkuc3BsaXQoJy4nKTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2hvd1NraWxsRWRpdEZvcm0oXHJcbiAgICAgICAgICAgIEtub3dsZWRnZVNraWxsRWRpdEZvcm0sXHJcbiAgICAgICAgICAgIHRoaXMuYWN0b3IsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50OiBldmVudCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2tpbGwsXHJcbiAgICAgICAgICAgIGNhdGVnb3J5LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgX29uU2hvd0VkaXRMYW5ndWFnZVNraWxsKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zdCBza2lsbCA9IEhlbHBlcnMubGlzdEl0ZW1JZChldmVudCk7XHJcbiAgICAgICAgLy8gbmV3IExhbmd1YWdlU2tpbGxFZGl0Rm9ybSh0aGlzLmFjdG9yLCBza2lsbCwgeyBldmVudDogZXZlbnQgfSkucmVuZGVyKHRydWUpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuX3Nob3dTa2lsbEVkaXRGb3JtKExhbmd1YWdlU2tpbGxFZGl0Rm9ybSwgdGhpcy5hY3RvciwgeyBldmVudDogZXZlbnQgfSwgc2tpbGwpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIF9vblNob3dFZGl0U2tpbGwoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGNvbnN0IHNraWxsID0gSGVscGVycy5saXN0SXRlbUlkKGV2ZW50KTtcclxuICAgICAgICAvLyBuZXcgU2tpbGxFZGl0Rm9ybSh0aGlzLmFjdG9yLCBza2lsbCwgeyBldmVudDogZXZlbnQgfSkucmVuZGVyKHRydWUpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuX3Nob3dTa2lsbEVkaXRGb3JtKFNraWxsRWRpdEZvcm0sIHRoaXMuYWN0b3IsIHsgZXZlbnQ6IGV2ZW50IH0sIHNraWxsKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25TaG93SW1wb3J0Q2hhcmFjdGVyKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBuYW1lOiAnY2h1bW1lci1pbXBvcnQnLFxyXG4gICAgICAgICAgICB0aXRsZTogJ0NodW1tZXIgSW1wb3J0JyxcclxuICAgICAgICB9O1xyXG4gICAgICAgIG5ldyBDaHVtbWVySW1wb3J0Rm9ybSh0aGlzLmFjdG9yLCBvcHRpb25zKS5yZW5kZXIodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgaGFuZGxlUmVtb3ZlVmVoaWNsZURyaXZlcihldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5yZW1vdmVWZWhpY2xlRHJpdmVyKCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IFNraWxsRmllbGQgPSBTaGFkb3dydW4uU2tpbGxGaWVsZDtcclxuaW1wb3J0IHtTa2lsbFJ1bGVzfSBmcm9tIFwiLi9Ta2lsbFJ1bGVzXCI7XHJcbmltcG9ydCB7UGFydHNMaXN0fSBmcm9tIFwiLi4vcGFydHMvUGFydHNMaXN0XCI7XHJcbmltcG9ydCB7RkxBR1MsIFNZU1RFTV9OQU1FfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU2tpbGxGbG93IHtcclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlIGV2ZXJ5dGhpbmcgYXJvdW5kIGhvdyBhIHNraWxsIHNob3VsZCBiZSBkZWZhdWx0ZWRcclxuICAgICAqIEBwYXJhbSBza2lsbFxyXG4gICAgICogQHBhcmFtIHBhcnRzXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBoYW5kbGVEZWZhdWx0aW5nKHNraWxsOiBTa2lsbEZpZWxkLCBwYXJ0czogUGFydHNMaXN0PG51bWJlcj4pIHtcclxuICAgICAgICBpZiAoIVNraWxsUnVsZXMubXVzdERlZmF1bHRUb1JvbGwoc2tpbGwpKSByZXR1cm47XHJcblxyXG4gICAgICAgIGlmICghU2tpbGxGbG93LmFsbG93RGVmYXVsdGluZ1JvbGwoc2tpbGwpKSB7XHJcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5XYXJuaW5ncy5Ta2lsbENhbnRCZURlZmF1bHQnKSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFNraWxsUnVsZXMuYWRkRGVmYXVsdGluZ1BhcnQocGFydHMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgZWl0aGVyIHRoZSBzeXN0ZW0gc2V0dGluZ3Mgb3Igc2tpbGwgY29uZmlndXJhdGlvbiBhbGxvdyBmb3IgYSBza2lsbCB0byBiZSBkZWZhdWx0ZWQuXHJcbiAgICAgKiBAcGFyYW0gc2tpbGxcclxuICAgICAqIEByZXR1cm4gdHJ1ZSB3aWxsIGFsbG93IGEgcm9sZSBvbiB0aGUgc2tpbGwgdGhhdCBuZWVkcyBkZWZhdWx0aW5nLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYWxsb3dEZWZhdWx0aW5nUm9sbChza2lsbDogU2tpbGxGaWVsZCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIC8vIENoZWNrIGlmIHNldHRpbmdzIGFsbG93IHJvbGxzIG9mIHNraWxscyB0aGF0IG90aGVyd2lzZSB3b3VsZCBuZWVkIHRvIGJlIGRlZmF1bHRlZC5cclxuICAgICAgICBjb25zdCBhbGxvd1VuaW1wcm92aXNlYWJsZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KFNZU1RFTV9OQU1FLCBGTEFHUy5Pbmx5QWxsb3dSb2xsT25EZWZhdWx0YWJsZVNraWxscykgPT09IGZhbHNlO1xyXG4gICAgICAgIGlmIChhbGxvd1VuaW1wcm92aXNlYWJsZSlcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgIHJldHVybiBTa2lsbFJ1bGVzLmFsbG93RGVmYXVsdGluZ1JvbGwoc2tpbGwpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBhbGxvd1JvbGwoc2tpbGw6IFNraWxsRmllbGQpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoU2tpbGxSdWxlcy5tdXN0RGVmYXVsdFRvUm9sbChza2lsbCkgJiYgU2tpbGxGbG93LmFsbG93RGVmYXVsdGluZ1JvbGwoc2tpbGwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gU2tpbGxSdWxlcy5hbGxvd1JvbGwoc2tpbGwpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFNraWxsRmllbGQgPSBTaGFkb3dydW4uU2tpbGxGaWVsZDtcclxuaW1wb3J0IHtQYXJ0c0xpc3R9IGZyb20gXCIuLi9wYXJ0cy9QYXJ0c0xpc3RcIjtcclxuaW1wb3J0IHtTUjV9IGZyb20gXCIuLi9jb25maWdcIjtcclxuaW1wb3J0IHtTUn0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNraWxsUnVsZXMge1xyXG5cclxuICAgIHN0YXRpYyBtdXN0RGVmYXVsdFRvUm9sbChza2lsbDogU2tpbGxGaWVsZCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBza2lsbC5iYXNlID09PSAwO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBbGxvdyBkZWZhdWx0aW5nIGEgc2tpbGwgcm9sZS5cclxuICAgICAqIEBQREYgU1I1IzEzMFxyXG4gICAgICogQHBhcmFtIHNraWxsIENoZWNrIGZvciB0aGlzIHNraWxscyBhYmlsaXR5IHRvIGJlIGRlZmF1bHRlZC5cclxuICAgICAqIEByZXR1cm4gdHJ1ZSB3aWxsIGFsbG93IGZvciBhIFN1Y2Nlc3NUZXN0IC8gcm9sZSB0byBwcm9jZWVkLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYWxsb3dEZWZhdWx0aW5nUm9sbChza2lsbDogU2tpbGxGaWVsZCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIC8vIENoZWNrIGZvciBza2lsbCBkZWZhdWx0aW5nIGF0IHRoZSBiYXNlLCBzaW5jZSBtb2RpZmllcnMgb3IgYm9udXMgY2FuIGNhdXNlIGEgcG9zaXRpdmUgcG9vbCwgd2hpbGVcclxuICAgICAgICAvLyBzdGlsbCBkZWZhdWx0aW5nLlxyXG4gICAgICAgIHJldHVybiBza2lsbC5jYW5EZWZhdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWxsb3cgYSBza2lsbCByb2xlLlxyXG4gICAgICogQFBERiBTUjUjMTMwXHJcbiAgICAgKiBAcGFyYW0gc2tpbGwgQ2hlY2sgZm9yIHRoaXMgc2tpbGxzIGFiaWxpdHkgdG8gYmUgcm9sbGVkLlxyXG4gICAgICogQHJldHVybiB0cnVlIHdpbGwgYWxsb3cgZm9yIGEgU3VjY2Vzc1Rlc3QgLyByb2xlIHRvIHByb2NlZWQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhbGxvd1JvbGwoc2tpbGw6IFNraWxsRmllbGQpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gIVNraWxsUnVsZXMubXVzdERlZmF1bHRUb1JvbGwoc2tpbGwpIHx8IFNraWxsUnVsZXMuYWxsb3dEZWZhdWx0aW5nUm9sbChza2lsbCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgdGhlIGRlZmF1bHRpbmcgbW9kaWZpZXIgcGFydCB0byBhIHBhcnRzIGxpc3RcclxuICAgICAqIEBwYXJhbSBwYXJ0cyBTaG91bGQgYmUgYSBQYXJ0c0xpc3QgaW52b2x2ZWQgd2l0aCBza2lsbHMuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhZGREZWZhdWx0aW5nUGFydChwYXJ0czogUGFydHNMaXN0PG51bWJlcj4pIHtcclxuICAgICAgICBwYXJ0cy5hZGRVbmlxdWVQYXJ0KCdTUjUuRGVmYXVsdGluZycsIFNraWxsUnVsZXMuZ2V0RGVmYXVsdGluZ01vZGlmaWVyKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXREZWZhdWx0aW5nTW9kaWZpZXIoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gU1Iuc2tpbGwuREVGQVVMVElOR19NT0RJRklFUjtcclxuICAgIH1cclxufSIsImltcG9ydCB7U2hhZG93cnVuUm9sbCwgU2hhZG93cnVuUm9sbGVyfSBmcm9tICcuLi9yb2xscy9TaGFkb3dydW5Sb2xsZXInO1xyXG5pbXBvcnQge1NSNUFjdG9yfSBmcm9tIFwiLi9TUjVBY3RvclwiO1xyXG5pbXBvcnQge1NvYWtSdWxlc30gZnJvbSBcIi4vU29ha1J1bGVzXCI7XHJcbmltcG9ydCB7IEhlbHBlcnMgfSBmcm9tICcuLi9oZWxwZXJzJztcclxuaW1wb3J0IFNvYWtSb2xsT3B0aW9ucyA9IFNoYWRvd3J1bi5Tb2FrUm9sbE9wdGlvbnM7XHJcbmltcG9ydCBNb2RMaXN0ID0gU2hhZG93cnVuLk1vZExpc3Q7XHJcbmltcG9ydCB7Y3JlYXRlUm9sbENoYXRNZXNzYWdlfSBmcm9tIFwiLi4vY2hhdFwiO1xyXG5pbXBvcnQgRGFtYWdlRGF0YSA9IFNoYWRvd3J1bi5EYW1hZ2VEYXRhO1xyXG5pbXBvcnQgRGFtYWdlRWxlbWVudCA9IFNoYWRvd3J1bi5EYW1hZ2VFbGVtZW50O1xyXG5pbXBvcnQgRGFtYWdlVHlwZSA9IFNoYWRvd3J1bi5EYW1hZ2VUeXBlO1xyXG5pbXBvcnQge1BhcnRzTGlzdH0gZnJvbSBcIi4uL3BhcnRzL1BhcnRzTGlzdFwiO1xyXG5pbXBvcnQge0RlZmF1bHRWYWx1ZXN9IGZyb20gXCIuLi9kYXRhVGVtcGxhdGVzXCI7XHJcbmltcG9ydCB7IFNoYWRvd3J1bkFjdG9yRGlhbG9ncyB9IGZyb20gJy4uL2FwcHMvZGlhbG9ncy9TaGFkb3dydW5BY3RvckRpYWxvZ3MnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNvYWtGbG93IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJ1bnMgdGhlIHNvYWsgZmxvdyB3aXRoIHVzZXIgaW50ZXJhY3Rpb25cclxuICAgICAqIEBwYXJhbSBhY3RvciBUaGUgYWN0b3IgZG9pbmcgdGhlIHNvYWtpbmdcclxuICAgICAqIEBwYXJhbSBzb2FrUm9sbE9wdGlvbnMgSW5mb3JtYXRpb24gYWJvdXQgdGhlIGluY29taW5nIGRhbWFnZSAoaWYgaXQgaXMgYWxyZWFkeSBrbm93bilcclxuICAgICAqIEBwYXJhbSBwYXJ0c1Byb3BzIE9wdGlvbmFsIG1vZGlmaWVycyBmb3IgdGhlIHNvYWsgdGVzdFxyXG4gICAgICovXHJcbiAgICBhc3luYyBydW5Tb2FrVGVzdChhY3RvcjogU1I1QWN0b3IsIHNvYWtSb2xsT3B0aW9uczogU29ha1JvbGxPcHRpb25zLCBwYXJ0c1Byb3BzOiBNb2RMaXN0PG51bWJlcj4gPSBbXSk6IFByb21pc2U8U2hhZG93cnVuUm9sbHx1bmRlZmluZWQ+IHtcclxuICAgICAgICBjb25zdCBpbml0aWFsRGFtYWdlRGF0YSA9IHNvYWtSb2xsT3B0aW9ucy5kYW1hZ2UgPyBzb2FrUm9sbE9wdGlvbnMuZGFtYWdlIDogRGVmYXVsdFZhbHVlcy5kYW1hZ2VEYXRhKCk7XHJcbiAgICAgICAgY29uc3QgcHJldmlld1NvYWtEZWZlbnNlUGFydHMgPSBuZXcgUGFydHNMaXN0PG51bWJlcj4oZHVwbGljYXRlKHBhcnRzUHJvcHMpKTtcclxuICAgICAgICBTb2FrUnVsZXMuYXBwbHlBbGxTb2FrUGFydHMocHJldmlld1NvYWtEZWZlbnNlUGFydHMsIGFjdG9yLCBpbml0aWFsRGFtYWdlRGF0YSk7XHJcblxyXG4gICAgICAgIC8vIEFzayB0aGUgdXNlciBmb3IgdGhlIGRhbWFnZSBkYXRhIC8gdXBkYXRlIHRoZSBpbmNvbWluZyBkYW1hZ2UgZGF0YSBcclxuICAgICAgICBjb25zdCBkYW1hZ2VEYXRhT3JVbmRlZiA9IGF3YWl0IHRoaXMucHJvbXB0RGFtYWdlRGF0YShzb2FrUm9sbE9wdGlvbnMsIHByZXZpZXdTb2FrRGVmZW5zZVBhcnRzKTsgXHJcbiAgICAgICAgaWYgKCFkYW1hZ2VEYXRhT3JVbmRlZikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBcclxuXHJcbiAgICAgICAgY29uc3QgZGFtYWdlRGF0YSA9IGRhbWFnZURhdGFPclVuZGVmO1xyXG4gICAgICAgIGNvbnN0IGZpbmFsU29ha0RlZmVuc2VQYXJ0cyA9IG5ldyBQYXJ0c0xpc3Q8bnVtYmVyPihkdXBsaWNhdGUocGFydHNQcm9wcykpO1xyXG4gICAgICAgIFNvYWtSdWxlcy5hcHBseUFsbFNvYWtQYXJ0cyhmaW5hbFNvYWtEZWZlbnNlUGFydHMsIGFjdG9yLCBkYW1hZ2VEYXRhKTsgXHJcblxyXG4gICAgICAgIC8vIFF1ZXJ5IHVzZXIgZm9yIHJvbGwgb3B0aW9ucyBhbmQgZG8gdGhlIGFjdHVhbCBzb2FrIHRlc3QuXHJcbiAgICAgICAgY29uc3QgdGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5Tb2FrVGVzdCcpO1xyXG4gICAgICAgIGNvbnN0IHJvbGwgPSBhd2FpdCBTaGFkb3dydW5Sb2xsZXIuYWR2YW5jZWRSb2xsKHtcclxuICAgICAgICAgICAgZXZlbnQ6IHNvYWtSb2xsT3B0aW9ucz8uZXZlbnQsXHJcbiAgICAgICAgICAgIGV4dGVuZGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgYWN0b3IsXHJcbiAgICAgICAgICAgIHBhcnRzOiBmaW5hbFNvYWtEZWZlbnNlUGFydHMubGlzdCxcclxuICAgICAgICAgICAgdGl0bGUsXHJcbiAgICAgICAgICAgIHdvdW5kczogZmFsc2UsXHJcbiAgICAgICAgICAgIGhpZGVSb2xsTWVzc2FnZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoIXJvbGwpIHJldHVybjtcclxuXHJcbiAgICAgICAgLy8gTW9kaWZ5IGRhbWFnZSBhbmQgcmVkdWNlIGRhbWFnZSBieSBuZXQgaGl0cyBhbmQgc2hvdyByZXN1bHRcclxuICAgICAgICBjb25zdCBpbmNvbWluZyA9IGR1cGxpY2F0ZShkYW1hZ2VEYXRhKTtcclxuICAgICAgICBsZXQgbW9kaWZpZWQgPSBTb2FrUnVsZXMubW9kaWZ5RGFtYWdlVHlwZShpbmNvbWluZywgYWN0b3IpO1xyXG4gICAgICAgIG1vZGlmaWVkID0gU29ha1J1bGVzLnJlZHVjZURhbWFnZShtb2RpZmllZCwgcm9sbC5oaXRzKS5tb2RpZmllZDtcclxuICAgICAgICBjb25zdCBpbmNBbmRNb2REYW1hZ2UgPSB7aW5jb21pbmcsIG1vZGlmaWVkfTtcclxuXHJcbiAgICAgICAgYXdhaXQgY3JlYXRlUm9sbENoYXRNZXNzYWdlKHt0aXRsZSwgcm9sbCwgYWN0b3IsIGRhbWFnZTogaW5jQW5kTW9kRGFtYWdlfSk7XHJcblxyXG4gICAgICAgIHJldHVybiByb2xsO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgcHJvbXB0RGFtYWdlRGF0YShzb2FrUm9sbE9wdGlvbnM6IFNvYWtSb2xsT3B0aW9ucywgc29ha0RlZmVuc2VQYXJ0czogUGFydHNMaXN0PG51bWJlcj4pIFxyXG4gICAgICAgIDogUHJvbWlzZTxEYW1hZ2VEYXRhIHwgdW5kZWZpbmVkPiB7XHJcblxyXG4gICAgICAgIC8vIEFzayB1c2VyIGZvciBpbmNvbWluZyBkYW1hZ2UsIGFwIGFuZCBlbGVtZW50XHJcbiAgICAgICAgY29uc3QgZGFtYWdlRGF0YURpYWxvZyA9IGF3YWl0IFNoYWRvd3J1bkFjdG9yRGlhbG9ncy5jcmVhdGVTb2FrRGlhbG9nKHNvYWtSb2xsT3B0aW9ucywgc29ha0RlZmVuc2VQYXJ0cyk7XHJcbiAgICAgICAgY29uc3QgdXNlckRhdGEgPSBhd2FpdCBkYW1hZ2VEYXRhRGlhbG9nLnNlbGVjdCgpO1xyXG4gICAgICAgIGlmIChkYW1hZ2VEYXRhRGlhbG9nLmNhbmNlbGVkKSByZXR1cm47XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBkYW1hZ2Ugd2l0aCB0aGUgdXNlciBpbnB1dFxyXG4gICAgICAgIGNvbnN0IGluaXRpYWxEYW1hZ2VEYXRhOiBEYW1hZ2VEYXRhID0gc29ha1JvbGxPcHRpb25zPy5kYW1hZ2VcclxuICAgICAgICAgICAgICAgID8gc29ha1JvbGxPcHRpb25zLmRhbWFnZVxyXG4gICAgICAgICAgICAgICAgOiBEZWZhdWx0VmFsdWVzLmRhbWFnZURhdGEoKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVEYW1hZ2VXaXRoVXNlckRhdGEoaW5pdGlhbERhbWFnZURhdGEsIHVzZXJEYXRhLmluY29taW5nRGFtYWdlLCB1c2VyRGF0YS5kYW1hZ2VUeXBlLCB1c2VyRGF0YS5hcCwgdXNlckRhdGEuZWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlRGFtYWdlV2l0aFVzZXJEYXRhKGluaXRpYWxEYW1hZ2VEYXRhOiBEYW1hZ2VEYXRhLCBpbmNvbWluZ0RhbWFnZSA6IG51bWJlciwgZGFtYWdlVHlwZSA6IERhbWFnZVR5cGUsIGFwOiBudW1iZXIsIGVsZW1lbnQ6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IGRhbWFnZURhdGE6IERhbWFnZURhdGEgPSBkdXBsaWNhdGUoaW5pdGlhbERhbWFnZURhdGEpO1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgZGFtYWdlIGRhdGEsIGRpZmYgY2hhbmdlcyBpbnN0ZWFkIG9mIHNpbXBseSByZXBsYWNpbmdcclxuICAgICAgICBjb25zdCB0b3RhbERhbWFnZSA9IEhlbHBlcnMuY2FsY1RvdGFsKGRhbWFnZURhdGEpO1xyXG4gICAgICAgIGlmICh0b3RhbERhbWFnZSAhPT0gaW5jb21pbmdEYW1hZ2UpIHtcclxuICAgICAgICAgICAgY29uc3QgZGlmZiA9IGluY29taW5nRGFtYWdlIC0gdG90YWxEYW1hZ2U7XHJcbiAgICAgICAgICAgIGRhbWFnZURhdGEubW9kID0gUGFydHNMaXN0LkFkZFVuaXF1ZVBhcnQoZGFtYWdlRGF0YS5tb2QsICdTUjUuVXNlcklucHV0JywgZGlmZik7XHJcbiAgICAgICAgICAgIGRhbWFnZURhdGEudmFsdWUgPSBIZWxwZXJzLmNhbGNUb3RhbChkYW1hZ2VEYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpbml0aWFsRGFtYWdlRGF0YS50eXBlLmJhc2UgIT09IGRhbWFnZVR5cGUpIHtcclxuICAgICAgICAgICAgZGFtYWdlRGF0YS50eXBlLmJhc2UgPSBkYW1hZ2VUeXBlO1xyXG4gICAgICAgICAgICBkYW1hZ2VEYXRhLnR5cGUudmFsdWUgPSBkYW1hZ2VUeXBlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIGFwLCBkaWZmIGNoYW5nZXMgaW5zdGVhZCBvZiBzaW1wbHkgcmVwbGFjaW5nXHJcbiAgICAgICAgY29uc3QgdG90YWxBcCA9IEhlbHBlcnMuY2FsY1RvdGFsKGRhbWFnZURhdGEuYXApO1xyXG4gICAgICAgIGlmICh0b3RhbEFwICE9PSBhcCkge1xyXG4gICAgICAgICAgICBjb25zdCBkaWZmID0gYXAgLSB0b3RhbEFwO1xyXG4gICAgICAgICAgICBkYW1hZ2VEYXRhLmFwLm1vZCA9IFBhcnRzTGlzdC5BZGRVbmlxdWVQYXJ0KGRhbWFnZURhdGEuYXAubW9kLCAnU1I1LlVzZXJJbnB1dCcsIGRpZmYpO1xyXG4gICAgICAgICAgICBkYW1hZ2VEYXRhLmFwLnZhbHVlID0gSGVscGVycy5jYWxjVG90YWwoZGFtYWdlRGF0YS5hcCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBkYW1hZ2VEYXRhLmVsZW1lbnQudmFsdWUgPSBlbGVtZW50IGFzIERhbWFnZUVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZGFtYWdlRGF0YTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IFNSNUFjdG9yIH0gZnJvbSAnLi9TUjVBY3Rvcic7XHJcbmltcG9ydCB7IFNSNSB9IGZyb20gJy4uL2NvbmZpZyc7XHJcbmltcG9ydCB7IEhlbHBlcnMgfSBmcm9tICcuLi9oZWxwZXJzJztcclxuaW1wb3J0IHsgUGFydHNMaXN0IH0gZnJvbSAnLi4vcGFydHMvUGFydHNMaXN0JztcclxuaW1wb3J0IERhbWFnZURhdGEgPSBTaGFkb3dydW4uRGFtYWdlRGF0YTtcclxuaW1wb3J0IEFjdG9yQXJtb3JEYXRhID0gU2hhZG93cnVuLkFjdG9yQXJtb3JEYXRhO1xyXG5pbXBvcnQgTW9kaWZpZWREYW1hZ2VEYXRhID0gU2hhZG93cnVuLk1vZGlmaWVkRGFtYWdlRGF0YTtcclxuaW1wb3J0IE1vZGlmaWFibGVWYWx1ZSA9IFNoYWRvd3J1bi5Nb2RpZmlhYmxlVmFsdWU7XHJcbmltcG9ydCBDaGFyYWN0ZXJBY3RvckRhdGEgPSBTaGFkb3dydW4uQ2hhcmFjdGVyQWN0b3JEYXRhO1xyXG5cclxuLyoqXHJcbiAqIFNvYWtpbmcgcnVsZXMgZm9yIGFjdG9yc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNvYWtSdWxlcyB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZXRlcm1pbmVzIHRoZSBzb2FrIHBhcnRzIGJhc2VkIG9uIHRoZSBkYW1hZ2UgYW5kIHRoZSBhY3RvciB0eXBlXHJcbiAgICAgKiBAcGFyYW0gc29ha1BhcnRzIExpc3Qgb2YgKHBvdGVudGlhbGx5IHByZWZpbGxlZCkgc29hayBwYXJ0c1xyXG4gICAgICogQHBhcmFtIGFjdG9yIFRoZSBhY3RvciBhZmZlY3RlZCBieSB0aGUgZGFtYWdlXHJcbiAgICAgKiBAcGFyYW0gZGFtYWdlRGF0YSBUaGUgZGFtYWdlXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhcHBseUFsbFNvYWtQYXJ0cyhzb2FrUGFydHM6IFBhcnRzTGlzdDxudW1iZXI+LCBhY3RvcjogU1I1QWN0b3IsIGRhbWFnZURhdGE6IERhbWFnZURhdGEpIHtcclxuICAgICAgICBpZiAoZGFtYWdlRGF0YS50eXBlLmJhc2UgIT09ICdtYXRyaXgnKSB7XHJcbiAgICAgICAgICAgIFNvYWtSdWxlcy5hcHBseU11bmRhbmVBdHRhY2tTb2FrUGFydHMoc29ha1BhcnRzLCBhY3RvciwgZGFtYWdlRGF0YSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgU29ha1J1bGVzLmFwcGx5TWF0cml4U29ha1BhcnRzKHNvYWtQYXJ0cywgYWN0b3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBhcHBseU11bmRhbmVBdHRhY2tTb2FrUGFydHMoc29ha1BhcnRzOiBQYXJ0c0xpc3Q8bnVtYmVyPiwgYWN0b3I6IFNSNUFjdG9yLCBkYW1hZ2VEYXRhOiBEYW1hZ2VEYXRhKSB7XHJcbiAgICAgICAgU29ha1J1bGVzLmFwcGx5Qm9keUFuZEFybW9yUGFydHMoc29ha1BhcnRzLCBhY3Rvcik7XHJcblxyXG4gICAgICAgIGNvbnN0IGFybW9yID0gYWN0b3IuZ2V0QXJtb3IoKTtcclxuICAgICAgICBTb2FrUnVsZXMuYXBwbHlBcm1vclBlbmV0cmF0aW9uKHNvYWtQYXJ0cywgYXJtb3IsIGRhbWFnZURhdGEpO1xyXG4gICAgICAgIFNvYWtSdWxlcy5hcHBseUVsZW1lbnRhbEFybW9yKHNvYWtQYXJ0cywgYXJtb3IsIGRhbWFnZURhdGEuZWxlbWVudC5iYXNlKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBhcHBseUJvZHlBbmRBcm1vclBhcnRzKHNvYWtQYXJ0czogUGFydHNMaXN0PG51bWJlcj4sIGFjdG9yOiBTUjVBY3Rvcikge1xyXG4gICAgICAgIGNvbnN0IGJvZHkgPSBhY3Rvci5maW5kQXR0cmlidXRlKCdib2R5Jyk7XHJcbiAgICAgICAgaWYgKGJvZHkpIHtcclxuICAgICAgICAgICAgc29ha1BhcnRzLmFkZFVuaXF1ZVBhcnQoYm9keS5sYWJlbCB8fCAnU1I1LkJvZHknLCBib2R5LnZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG1vZCA9IGFjdG9yLmdldE1vZGlmaWVyKCdzb2FrJyk7XHJcbiAgICAgICAgaWYgKG1vZCkge1xyXG4gICAgICAgICAgICBzb2FrUGFydHMuYWRkVW5pcXVlUGFydCgnU1I1LkJvbnVzJywgbW9kKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGFjdG9yLl9hZGRBcm1vclBhcnRzKHNvYWtQYXJ0cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgYXBwbHlBcm1vclBlbmV0cmF0aW9uKHNvYWtQYXJ0czogUGFydHNMaXN0PG51bWJlcj4sIGFybW9yOiBBY3RvckFybW9yRGF0YSwgZGFtYWdlRGF0YTogRGFtYWdlRGF0YSkge1xyXG4gICAgICAgIGNvbnN0IGJvbnVzQXJtb3IgPSBhcm1vcltkYW1hZ2VEYXRhLmVsZW1lbnQudmFsdWVdID8/IDA7XHJcbiAgICAgICAgY29uc3QgdG90YWxBcm1vciA9IGFybW9yLnZhbHVlICsgYm9udXNBcm1vcjtcclxuICAgICAgICBjb25zdCBhcCA9IEhlbHBlcnMuY2FsY1RvdGFsKGRhbWFnZURhdGEuYXApO1xyXG5cclxuICAgICAgICBzb2FrUGFydHMuYWRkVW5pcXVlUGFydCgnU1I1LkFQJywgTWF0aC5tYXgoYXAsIC10b3RhbEFybW9yKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgYXBwbHlFbGVtZW50YWxBcm1vcihzb2FrUGFydHM6IFBhcnRzTGlzdDxudW1iZXI+LCBhcm1vcjogQWN0b3JBcm1vckRhdGEsIGVsZW1lbnQ6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IGJvbnVzQXJtb3IgPSBhcm1vcltlbGVtZW50XSA/PyAwO1xyXG4gICAgICAgIGlmIChib251c0FybW9yKSB7XHJcbiAgICAgICAgICAgIHNvYWtQYXJ0cy5hZGRVbmlxdWVQYXJ0KENPTkZJRy5TUjUuZWxlbWVudFR5cGVzW2VsZW1lbnRdLCBib251c0FybW9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgYXBwbHlNYXRyaXhTb2FrUGFydHMoc29ha1BhcnRzOiBQYXJ0c0xpc3Q8bnVtYmVyPiwgYWN0b3I6IFNSNUFjdG9yKSB7XHJcbiAgICAgICAgY29uc3QgYWN0b3JEYXRhID0gYWN0b3IuZGF0YS5kYXRhIGFzIENoYXJhY3RlckFjdG9yRGF0YTtcclxuXHJcbiAgICAgICAgLy8gQWxsIGFjdG9ycyBoYXZlIHRoZSBzYW1lIHNvYWsgcnVsZXMgd2hlbiB0aGV5IGFyZSBub3QgYWN0aXZlIGluIHRoZSBtYXRyaXhcclxuICAgICAgICAvLyBUT0RPIFRlY2hub21hbmNlciBhbmQgU3ByaXRlcyBzcGVjaWFsIHJ1bGVzP1xyXG4gICAgICAgIGlmIChhY3RvckRhdGEuaW5pdGlhdGl2ZS5wZXJjZXB0aW9uID09PSAnbWF0cml4Jykge1xyXG4gICAgICAgICAgICBpZiAoYWN0b3IuaXNWZWhpY2xlKCkpe1xyXG4gICAgICAgICAgICAgICAgLy8gVmVoaWNsZXMgY2FuIGhhdmUgYSBtYXRyaXggaW5pdGlhdGl2ZSBidXQgZG8gbm90IHRha2UgYmlvZmVlZGJhY2tcclxuICAgICAgICAgICAgICAgIFNvYWtSdWxlcy5hcHBseVJhdGluZ0FuZEZpcmV3YWxsUGFydHMoYWN0b3JEYXRhLCBzb2FrUGFydHMpOyAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBTb2FrUnVsZXMuYXBwbHlCaW9mZWVkYmFja1BhcnRzKHNvYWtQYXJ0cywgYWN0b3IsIGFjdG9yRGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBTb2FrUnVsZXMuYXBwbHlSYXRpbmdBbmRGaXJld2FsbFBhcnRzKGFjdG9yRGF0YSwgc29ha1BhcnRzKTsgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGFwcGx5QmlvZmVlZGJhY2tQYXJ0cyhzb2FrUGFydHM6IFBhcnRzTGlzdDxudW1iZXI+LCBhY3RvcjogU1I1QWN0b3IsIGFjdG9yRGF0YTogQ2hhcmFjdGVyQWN0b3JEYXRhKSB7XHJcbiAgICAgICAgU29ha1J1bGVzLmFkZFVuaXF1ZVBhcnQoc29ha1BhcnRzLCBhY3Rvci5nZXRBdHRyaWJ1dGUoJ3dpbGxwb3dlcicpLCBTUjUuYXR0cmlidXRlcy53aWxscG93ZXIpO1xyXG5cclxuICAgICAgICBpZiAoIWFjdG9yRGF0YS5tYXRyaXgpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgU29ha1J1bGVzLmFkZFVuaXF1ZVBhcnQoc29ha1BhcnRzLCBhY3RvckRhdGEubWF0cml4LmZpcmV3YWxsLCBTUjUubWF0cml4QXR0cmlidXRlcy5maXJld2FsbCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgYXBwbHlSYXRpbmdBbmRGaXJld2FsbFBhcnRzKGFjdG9yRGF0YTogQ2hhcmFjdGVyQWN0b3JEYXRhLCBzb2FrUGFydHM6IFBhcnRzTGlzdDxudW1iZXI+KSB7XHJcbiAgICAgICAgaWYgKCFhY3RvckRhdGEubWF0cml4KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGRldmljZVJhdGluZyA9IGFjdG9yRGF0YS5tYXRyaXgucmF0aW5nO1xyXG4gICAgICAgIGlmIChkZXZpY2VSYXRpbmcpIHtcclxuICAgICAgICAgICAgc29ha1BhcnRzLmFkZFVuaXF1ZVBhcnQoJ1NSNS5MYWJlbHMuQWN0b3JTaGVldC5EZXZpY2VSYXRpbmcnLCBkZXZpY2VSYXRpbmcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5hZGRVbmlxdWVQYXJ0KHNvYWtQYXJ0cywgYWN0b3JEYXRhLm1hdHJpeC5maXJld2FsbCwgU1I1Lm1hdHJpeEF0dHJpYnV0ZXMuZmlyZXdhbGwpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGFkZFVuaXF1ZVBhcnQocGFydHNMaXN0OiBQYXJ0c0xpc3Q8bnVtYmVyPiwgbW9kaWZpYWJsZVZhbHVlIDogTW9kaWZpYWJsZVZhbHVlLCBsYWJlbCA6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHRvdGFsVmFsdWUgPSBIZWxwZXJzLmNhbGNUb3RhbChtb2RpZmlhYmxlVmFsdWUpO1xyXG4gICAgICAgIHBhcnRzTGlzdC5hZGRVbmlxdWVQYXJ0KGxhYmVsLCB0b3RhbFZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlZHVjZXMgdGhlIGRhbWFnZSB2YWx1ZVxyXG4gICAgICogQXQgdGhlIG1vbWVudCBqdXN0IHJlZHVjZXMgdGhlIGRhbWFnZSBieSB0aGUgbnVtYmVyIG9mIGhpdHMuXHJcbiAgICAgKiBAcGFyYW0gZGFtYWdlRGF0YSBUaGUgaW5jb21pbmcgZGFtYWdlXHJcbiAgICAgKiBAcGFyYW0gaGl0cyBUaGUgbnVtYmVyIG9mIGhpdHMgb24gdGhlIHNvYWsgdGVzdHNcclxuICAgICAqIEByZXR1cm5zIFRoZSB1cGRhdGVkIGRhbWFnZSBkYXRhXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyByZWR1Y2VEYW1hZ2UoZGFtYWdlRGF0YTogRGFtYWdlRGF0YSwgaGl0czogbnVtYmVyKTogTW9kaWZpZWREYW1hZ2VEYXRhIHtcclxuICAgICAgICByZXR1cm4gSGVscGVycy5yZWR1Y2VEYW1hZ2VCeUhpdHMoZGFtYWdlRGF0YSwgaGl0cywgJ1NSNS5Tb2FrVGVzdCcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hhbmdlcyB0aGUgZGFtYWdlIHR5cGUgYmFzZWQgb24gdGhlIGluY29taW5nIGRhbWFnZSB0eXBlIGFuZCB0aGUgYWN0b3Igc3RhdGUgKGFybW9yLCBtYXRyaXggcGVyY2VwdGlvbi4uKVxyXG4gICAgICogQHBhcmFtIGRhbWFnZSBUaGUgaW5jb21pbmcgZGFtYWdlXHJcbiAgICAgKiBAcGFyYW0gYWN0b3IgVGhlIGFjdG9yIGFmZmVjdGVkIGJ5IHRoZSBkYW1hZ2UgXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgdXBkYXRlZCBkYW1hZ2UgZGF0YSBcclxuICAgICAqL1xyXG4gICAgc3RhdGljIG1vZGlmeURhbWFnZVR5cGUoZGFtYWdlOiBEYW1hZ2VEYXRhLCBhY3RvciA6IFNSNUFjdG9yKSA6IERhbWFnZURhdGEge1xyXG4gICAgICAgIC8vIENhcmVmdWwsIG9yZGVyIGlzIHZlcnkgaW1wb3J0YW50XHJcbiAgICAgICAgY29uc3QgdXBkYXRlZERhbWFnZSA9IFNvYWtSdWxlcy5tb2RpZnlQaHlzaWNhbERhbWFnZUZvckFybW9yKGRhbWFnZSwgYWN0b3IpO1xyXG4gICAgICAgIHJldHVybiBTb2FrUnVsZXMubW9kaWZ5TWF0cml4RGFtYWdlRm9yQmlvZmVlZGJhY2sodXBkYXRlZERhbWFnZSwgYWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVHVybnMgcGh5c2ljYWwgZGFtYWdlIHRvIHN0dW4gZGFtYWdlIGJhc2VkIG9uIHRoZSBkYW1hZ2UgYW5kIGFybW9yXHJcbiAgICAgKiBAcGFyYW0gZGFtYWdlIFRoZSBpbmNvbWluZyBkYW1hZ2VcclxuICAgICAqIEBwYXJhbSBhY3RvciBUaGUgYWN0b3IgYWZmZWN0ZWQgYnkgdGhlIGRhbWFnZSBcclxuICAgICAqIEByZXR1cm5zIFRoZSB1cGRhdGVkIGRhbWFnZSBkYXRhIFxyXG4gICAgICovXHJcbiAgICAgc3RhdGljIG1vZGlmeVBoeXNpY2FsRGFtYWdlRm9yQXJtb3IoZGFtYWdlOiBEYW1hZ2VEYXRhLCBhY3RvciA6IFNSNUFjdG9yKTogRGFtYWdlRGF0YSB7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlZERhbWFnZSA9IGR1cGxpY2F0ZShkYW1hZ2UpO1xyXG5cclxuICAgICAgICBpZiAoZGFtYWdlLnR5cGUudmFsdWUgPT09ICdwaHlzaWNhbCcpIHtcclxuICAgICAgICAgICAgLy8gUGh5c2ljYWwgZGFtYWdlIGlzIG9ubHkgdHJhbnNmb3JtZWQgZm9yIHNvbWUgYWN0b3JzIChlLmcuIG5vdCB2ZWhpY2xlcykgXHJcbiAgICAgICAgICAgIGlmICghYWN0b3IuaXNDaGFyYWN0ZXIoKSAmJiAhYWN0b3IuaXNTcGlyaXQoKSAmJiAhYWN0b3IuaXNDcml0dGVyKCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVkRGFtYWdlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb2RpZmllZEFybW9yID0gYWN0b3IuZ2V0TW9kaWZpZWRBcm1vcihkYW1hZ2UpO1xyXG4gICAgICAgICAgICBpZiAobW9kaWZpZWRBcm1vcikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYXJtb3JXaWxsQ2hhbmdlRGFtYWdlVHlwZSA9IG1vZGlmaWVkQXJtb3IudmFsdWUgPiBkYW1hZ2UudmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGFybW9yV2lsbENoYW5nZURhbWFnZVR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkRGFtYWdlLnR5cGUudmFsdWUgPSAnc3R1bic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB1cGRhdGVkRGFtYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVHVybnMgbWF0cml4IGRhbWFnZSB0byBiaW9mZWVkYmFjayBiYXNlZCBvbiB0aGUgYWN0b3Igc3RhdGVcclxuICAgICAqIEBwYXJhbSBkYW1hZ2UgVGhlIGluY29taW5nIGRhbWFnZVxyXG4gICAgICogQHBhcmFtIGFjdG9yIFRoZSBhY3RvciBhZmZlY3RlZCBieSB0aGUgZGFtYWdlIFxyXG4gICAgICogQHJldHVybnMgVGhlIHVwZGF0ZWQgZGFtYWdlIGRhdGEgXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBtb2RpZnlNYXRyaXhEYW1hZ2VGb3JCaW9mZWVkYmFjayhkYW1hZ2U6IERhbWFnZURhdGEsIGFjdG9yIDogU1I1QWN0b3IpOiBEYW1hZ2VEYXRhIHtcclxuICAgICAgICBjb25zdCB1cGRhdGVkRGFtYWdlID0gZHVwbGljYXRlKGRhbWFnZSk7XHJcblxyXG4gICAgICAgIGlmIChkYW1hZ2UudHlwZS52YWx1ZSA9PT0gJ21hdHJpeCcpIHtcclxuICAgICAgICAgICAgY29uc3QgYWN0b3JEYXRhID0gYWN0b3IuZGF0YS5kYXRhIGFzIENoYXJhY3RlckFjdG9yRGF0YTtcclxuXHJcbiAgICAgICAgICAgIC8vIE9ubHkgY2hhcmFjdGVycyBjYW4gcmVjZWl2ZSBiaW9mZWVkYmFjayBkYW1hZ2UgYXQgdGhlIG1vbWVudC4gXHJcbiAgICAgICAgICAgIC8vIFRPRE8gVGVjaG5vbWFuY2VyIGFuZCBTcHJpdGVzIHNwZWNpYWwgcnVsZXM/XHJcbiAgICAgICAgICAgIGlmICghYWN0b3IuaXNDaGFyYWN0ZXIoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWREYW1hZ2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoYWN0b3JEYXRhLmluaXRpYXRpdmUucGVyY2VwdGlvbiA9PT0gJ21hdHJpeCcpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhY3RvckRhdGEubWF0cml4LmhvdF9zaW0pIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkRGFtYWdlLnR5cGUudmFsdWUgPSAncGh5c2ljYWwnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZERhbWFnZS50eXBlLnZhbHVlID0gJ3N0dW4nOyAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHVwZGF0ZWREYW1hZ2U7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgU1I1QWN0b3JUeXBlID0gU2hhZG93cnVuLlNSNUFjdG9yVHlwZTtcclxuaW1wb3J0IHsgQ2hhcmFjdGVyUHJlcCB9IGZyb20gJy4vQ2hhcmFjdGVyUHJlcCc7XHJcbmltcG9ydCB7IFNwaXJpdFByZXAgfSBmcm9tICcuL1NwaXJpdFByZXAnO1xyXG5pbXBvcnQgeyBTcHJpdGVQcmVwIH0gZnJvbSAnLi9TcHJpdGVQcmVwJztcclxuaW1wb3J0IHsgVmVoaWNsZVByZXAgfSBmcm9tICcuL1ZlaGljbGVQcmVwJztcclxuaW1wb3J0IHsgQ3JpdHRlclByZXAgfSBmcm9tICcuL0NyaXR0ZXJQcmVwJztcclxuXHJcbmV4cG9ydCBjbGFzcyBBY3RvclByZXBGYWN0b3J5IHtcclxuICAgIHN0YXRpYyBDcmVhdGUoZGF0YTogU1I1QWN0b3JUeXBlKSB7XHJcbiAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ2NoYXJhY3RlcicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDaGFyYWN0ZXJQcmVwKGRhdGEpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnc3Bpcml0Jykge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFNwaXJpdFByZXAoZGF0YSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdzcHJpdGUnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3ByaXRlUHJlcChkYXRhKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3ZlaGljbGUnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVoaWNsZVByZXAoZGF0YSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdjcml0dGVyJykge1xyXG4gICAgICAgICAgICAgIHJldHVybiBuZXcgQ3JpdHRlclByZXAoZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBTUjVBY3RvclR5cGUgPSBTaGFkb3dydW4uU1I1QWN0b3JUeXBlO1xyXG5pbXBvcnQgeyBTUjVJdGVtRGF0YVdyYXBwZXIgfSBmcm9tICcuLi8uLi9pdGVtL1NSNUl0ZW1EYXRhV3JhcHBlcic7XHJcbmltcG9ydCBTUjVBY3RvckRhdGEgPSBTaGFkb3dydW4uU1I1QWN0b3JEYXRhO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhc2VBY3RvclByZXA8QWN0b3JUeXBlIGV4dGVuZHMgU1I1QWN0b3JUeXBlLCBEYXRhVHlwZSBleHRlbmRzIFNSNUFjdG9yRGF0YT4ge1xyXG4gICAgZGF0YTogRGF0YVR5cGU7XHJcbiAgICBpdGVtczogU1I1SXRlbURhdGFXcmFwcGVyW107XHJcblxyXG4gICAgY29uc3RydWN0b3IoZGF0YTogQWN0b3JUeXBlKSB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGEuZGF0YTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgdGhpcy5pdGVtcyA9IGRhdGEuaXRlbXMubWFwKChpdGVtKSA9PiBuZXcgU1I1SXRlbURhdGFXcmFwcGVyKGl0ZW0pKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBvdmVycmlkZSB3aXRoIHRoZSBjb3JyZWN0IG9yZGVyIGFuZCBmdW5jdGlvbnMgdG8gcHJlcGFyZSB0aGUgYWN0b3JcclxuICAgIGFic3RyYWN0IHByZXBhcmUoKTogdm9pZDtcclxufVxyXG4iLCJpbXBvcnQgeyBCYXNlQWN0b3JQcmVwIH0gZnJvbSAnLi9CYXNlQWN0b3JQcmVwJztcclxuaW1wb3J0IHsgSW5pdGlhdGl2ZVByZXAgfSBmcm9tICcuL2Z1bmN0aW9ucy9Jbml0aWF0aXZlUHJlcCc7XHJcbmltcG9ydCB7IE1vZGlmaWVyc1ByZXAgfSBmcm9tICcuL2Z1bmN0aW9ucy9Nb2RpZmllcnNQcmVwJztcclxuaW1wb3J0IHsgTWF0cml4UHJlcCB9IGZyb20gJy4vZnVuY3Rpb25zL01hdHJpeFByZXAnO1xyXG5pbXBvcnQgeyBJdGVtUHJlcCB9IGZyb20gJy4vZnVuY3Rpb25zL0l0ZW1QcmVwJztcclxuaW1wb3J0IHsgU2tpbGxzUHJlcCB9IGZyb20gJy4vZnVuY3Rpb25zL1NraWxsc1ByZXAnO1xyXG5pbXBvcnQgeyBMaW1pdHNQcmVwIH0gZnJvbSAnLi9mdW5jdGlvbnMvTGltaXRzUHJlcCc7XHJcbmltcG9ydCB7IENvbmRpdGlvbk1vbml0b3JzUHJlcCB9IGZyb20gJy4vZnVuY3Rpb25zL0NvbmRpdGlvbk1vbml0b3JzUHJlcCc7XHJcbmltcG9ydCB7IE1vdmVtZW50UHJlcCB9IGZyb20gJy4vZnVuY3Rpb25zL01vdmVtZW50UHJlcCc7XHJcbmltcG9ydCB7IFdvdW5kc1ByZXAgfSBmcm9tICcuL2Z1bmN0aW9ucy9Xb3VuZHNQcmVwJztcclxuaW1wb3J0IHsgQXR0cmlidXRlc1ByZXAgfSBmcm9tICcuL2Z1bmN0aW9ucy9BdHRyaWJ1dGVzUHJlcCc7XHJcbmltcG9ydCB7IE5QQ1ByZXAgfSBmcm9tICcuL2Z1bmN0aW9ucy9OUENQcmVwJztcclxuaW1wb3J0IFNSNUNoYXJhY3RlclR5cGUgPSBTaGFkb3dydW4uU1I1Q2hhcmFjdGVyVHlwZTtcclxuaW1wb3J0IENoYXJhY3RlckFjdG9yRGF0YSA9IFNoYWRvd3J1bi5DaGFyYWN0ZXJBY3RvckRhdGE7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2hhcmFjdGVyUHJlcCBleHRlbmRzIEJhc2VBY3RvclByZXA8U1I1Q2hhcmFjdGVyVHlwZSwgQ2hhcmFjdGVyQWN0b3JEYXRhPiB7XHJcbiAgICBwcmVwYXJlKCkge1xyXG4gICAgICAgIE1vZGlmaWVyc1ByZXAucHJlcGFyZU1vZGlmaWVycyh0aGlzLmRhdGEpO1xyXG4gICAgICAgIE1vZGlmaWVyc1ByZXAuY2xlYXJBdHRyaWJ1dGVNb2RzKHRoaXMuZGF0YSk7XHJcblxyXG4gICAgICAgIEl0ZW1QcmVwLnByZXBhcmVBcm1vcih0aGlzLmRhdGEsIHRoaXMuaXRlbXMpO1xyXG4gICAgICAgIEl0ZW1QcmVwLnByZXBhcmVCb2R5d2FyZSh0aGlzLmRhdGEsIHRoaXMuaXRlbXMpO1xyXG5cclxuICAgICAgICBTa2lsbHNQcmVwLnByZXBhcmVTa2lsbHModGhpcy5kYXRhKTtcclxuICAgICAgICBBdHRyaWJ1dGVzUHJlcC5wcmVwYXJlQXR0cmlidXRlcyh0aGlzLmRhdGEpO1xyXG5cclxuICAgICAgICAvLyBOUENQcmVwIGlzIHJlbGlhbnQgdG8gYmUgY2FsbGVkIGFmdGVyIEF0dHJpYnV0ZXNQcmVwLlxyXG4gICAgICAgIE5QQ1ByZXAucHJlcGFyZU5QQ0RhdGEodGhpcy5kYXRhKTtcclxuXHJcbiAgICAgICAgTGltaXRzUHJlcC5wcmVwYXJlTGltaXRCYXNlRnJvbUF0dHJpYnV0ZXModGhpcy5kYXRhKTtcclxuICAgICAgICBMaW1pdHNQcmVwLnByZXBhcmVMaW1pdHModGhpcy5kYXRhKTtcclxuXHJcbiAgICAgICAgTWF0cml4UHJlcC5wcmVwYXJlTWF0cml4KHRoaXMuZGF0YSwgdGhpcy5pdGVtcyk7XHJcbiAgICAgICAgTWF0cml4UHJlcC5wcmVwYXJlTWF0cml4VG9MaW1pdHNBbmRBdHRyaWJ1dGVzKHRoaXMuZGF0YSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRhdGEuaXNfbnBjICYmIHRoaXMuZGF0YS5ucGMuaXNfZ3J1bnQpIHtcclxuICAgICAgICAgICAgQ29uZGl0aW9uTW9uaXRvcnNQcmVwLnByZXBhcmVHcnVudCh0aGlzLmRhdGEpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIENvbmRpdGlvbk1vbml0b3JzUHJlcC5wcmVwYXJlUGh5c2ljYWwodGhpcy5kYXRhKTtcclxuICAgICAgICAgICAgQ29uZGl0aW9uTW9uaXRvcnNQcmVwLnByZXBhcmVTdHVuKHRoaXMuZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBNb3ZlbWVudFByZXAucHJlcGFyZU1vdmVtZW50KHRoaXMuZGF0YSk7XHJcbiAgICAgICAgV291bmRzUHJlcC5wcmVwYXJlV291bmRzKHRoaXMuZGF0YSk7XHJcblxyXG4gICAgICAgIEluaXRpYXRpdmVQcmVwLnByZXBhcmVNZWF0c3BhY2VJbml0KHRoaXMuZGF0YSk7XHJcbiAgICAgICAgSW5pdGlhdGl2ZVByZXAucHJlcGFyZUFzdHJhbEluaXQodGhpcy5kYXRhKTtcclxuICAgICAgICBJbml0aWF0aXZlUHJlcC5wcmVwYXJlTWF0cml4SW5pdCh0aGlzLmRhdGEpO1xyXG4gICAgICAgIEluaXRpYXRpdmVQcmVwLnByZXBhcmVDdXJyZW50SW5pdGlhdGl2ZSh0aGlzLmRhdGEpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEJhc2VBY3RvclByZXAgfSBmcm9tICcuL0Jhc2VBY3RvclByZXAnO1xyXG5pbXBvcnQgeyBJbml0aWF0aXZlUHJlcCB9IGZyb20gJy4vZnVuY3Rpb25zL0luaXRpYXRpdmVQcmVwJztcclxuaW1wb3J0IHsgTW9kaWZpZXJzUHJlcCB9IGZyb20gJy4vZnVuY3Rpb25zL01vZGlmaWVyc1ByZXAnO1xyXG5pbXBvcnQgeyBNYXRyaXhQcmVwIH0gZnJvbSAnLi9mdW5jdGlvbnMvTWF0cml4UHJlcCc7XHJcbmltcG9ydCB7IEl0ZW1QcmVwIH0gZnJvbSAnLi9mdW5jdGlvbnMvSXRlbVByZXAnO1xyXG5pbXBvcnQgeyBTa2lsbHNQcmVwIH0gZnJvbSAnLi9mdW5jdGlvbnMvU2tpbGxzUHJlcCc7XHJcbmltcG9ydCB7IExpbWl0c1ByZXAgfSBmcm9tICcuL2Z1bmN0aW9ucy9MaW1pdHNQcmVwJztcclxuaW1wb3J0IHsgQ29uZGl0aW9uTW9uaXRvcnNQcmVwIH0gZnJvbSAnLi9mdW5jdGlvbnMvQ29uZGl0aW9uTW9uaXRvcnNQcmVwJztcclxuaW1wb3J0IHsgTW92ZW1lbnRQcmVwIH0gZnJvbSAnLi9mdW5jdGlvbnMvTW92ZW1lbnRQcmVwJztcclxuaW1wb3J0IHsgV291bmRzUHJlcCB9IGZyb20gJy4vZnVuY3Rpb25zL1dvdW5kc1ByZXAnO1xyXG5pbXBvcnQgeyBBdHRyaWJ1dGVzUHJlcCB9IGZyb20gJy4vZnVuY3Rpb25zL0F0dHJpYnV0ZXNQcmVwJztcclxuaW1wb3J0IFNSNUNyaXR0ZXJUeXBlID0gU2hhZG93cnVuLlNSNUNyaXR0ZXJUeXBlO1xyXG5pbXBvcnQgQ3JpdHRlckFjdG9yRGF0YSA9IFNoYWRvd3J1bi5Dcml0dGVyQWN0b3JEYXRhO1xyXG5pbXBvcnQgU1I1QWN0b3JEYXRhID0gU2hhZG93cnVuLlNSNUFjdG9yRGF0YTtcclxuaW1wb3J0IFR3b1RyYWNrQWN0b3JEYXRhID0gU2hhZG93cnVuLlR3b1RyYWNrQWN0b3JEYXRhO1xyXG5pbXBvcnQge0NoYXJhY3RlclByZXB9IGZyb20gXCIuL0NoYXJhY3RlclByZXBcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDcml0dGVyUHJlcCBleHRlbmRzIEJhc2VBY3RvclByZXA8U1I1Q3JpdHRlclR5cGUsIENyaXR0ZXJBY3RvckRhdGE+IHtcclxuICAgIHByZXBhcmUoKSB7XHJcbiAgICAgICAgTW9kaWZpZXJzUHJlcC5wcmVwYXJlTW9kaWZpZXJzKHRoaXMuZGF0YSk7XHJcbiAgICAgICAgTW9kaWZpZXJzUHJlcC5jbGVhckF0dHJpYnV0ZU1vZHModGhpcy5kYXRhKTtcclxuXHJcbiAgICAgICAgSXRlbVByZXAucHJlcGFyZUFybW9yKHRoaXMuZGF0YSwgdGhpcy5pdGVtcyk7XHJcbiAgICAgICAgSXRlbVByZXAucHJlcGFyZUJvZHl3YXJlKHRoaXMuZGF0YSwgdGhpcy5pdGVtcyk7XHJcblxyXG4gICAgICAgIFNraWxsc1ByZXAucHJlcGFyZVNraWxscyh0aGlzLmRhdGEpO1xyXG4gICAgICAgIEF0dHJpYnV0ZXNQcmVwLnByZXBhcmVBdHRyaWJ1dGVzKHRoaXMuZGF0YSk7XHJcbiAgICAgICAgTGltaXRzUHJlcC5wcmVwYXJlTGltaXRCYXNlRnJvbUF0dHJpYnV0ZXModGhpcy5kYXRhKTtcclxuICAgICAgICBMaW1pdHNQcmVwLnByZXBhcmVMaW1pdHModGhpcy5kYXRhKTtcclxuXHJcbiAgICAgICAgTWF0cml4UHJlcC5wcmVwYXJlTWF0cml4KHRoaXMuZGF0YSwgdGhpcy5pdGVtcyk7XHJcbiAgICAgICAgTWF0cml4UHJlcC5wcmVwYXJlTWF0cml4VG9MaW1pdHNBbmRBdHRyaWJ1dGVzKHRoaXMuZGF0YSk7XHJcblxyXG4gICAgICAgIENvbmRpdGlvbk1vbml0b3JzUHJlcC5wcmVwYXJlUGh5c2ljYWwodGhpcy5kYXRhKTtcclxuICAgICAgICBDb25kaXRpb25Nb25pdG9yc1ByZXAucHJlcGFyZVN0dW4odGhpcy5kYXRhKTtcclxuXHJcbiAgICAgICAgTW92ZW1lbnRQcmVwLnByZXBhcmVNb3ZlbWVudCh0aGlzLmRhdGEpO1xyXG4gICAgICAgIFdvdW5kc1ByZXAucHJlcGFyZVdvdW5kcyh0aGlzLmRhdGEpO1xyXG5cclxuICAgICAgICBJbml0aWF0aXZlUHJlcC5wcmVwYXJlTWVhdHNwYWNlSW5pdCh0aGlzLmRhdGEpO1xyXG4gICAgICAgIEluaXRpYXRpdmVQcmVwLnByZXBhcmVBc3RyYWxJbml0KHRoaXMuZGF0YSk7XHJcbiAgICAgICAgSW5pdGlhdGl2ZVByZXAucHJlcGFyZU1hdHJpeEluaXQodGhpcy5kYXRhKTtcclxuICAgICAgICBJbml0aWF0aXZlUHJlcC5wcmVwYXJlQ3VycmVudEluaXRpYXRpdmUodGhpcy5kYXRhKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBCYXNlQWN0b3JQcmVwIH0gZnJvbSAnLi9CYXNlQWN0b3JQcmVwJztcclxuaW1wb3J0IFNwaXJpdEFjdG9yRGF0YSA9IFNoYWRvd3J1bi5TcGlyaXRBY3RvckRhdGE7XHJcbmltcG9ydCBTUjVTcGlyaXRUeXBlID0gU2hhZG93cnVuLlNSNVNwaXJpdFR5cGU7XHJcbmltcG9ydCB7IFNraWxsc1ByZXAgfSBmcm9tICcuL2Z1bmN0aW9ucy9Ta2lsbHNQcmVwJztcclxuaW1wb3J0IHsgQXR0cmlidXRlc1ByZXAgfSBmcm9tICcuL2Z1bmN0aW9ucy9BdHRyaWJ1dGVzUHJlcCc7XHJcbmltcG9ydCB7IExpbWl0c1ByZXAgfSBmcm9tICcuL2Z1bmN0aW9ucy9MaW1pdHNQcmVwJztcclxuaW1wb3J0IHsgQ29uZGl0aW9uTW9uaXRvcnNQcmVwIH0gZnJvbSAnLi9mdW5jdGlvbnMvQ29uZGl0aW9uTW9uaXRvcnNQcmVwJztcclxuaW1wb3J0IHsgTW92ZW1lbnRQcmVwIH0gZnJvbSAnLi9mdW5jdGlvbnMvTW92ZW1lbnRQcmVwJztcclxuaW1wb3J0IHsgV291bmRzUHJlcCB9IGZyb20gJy4vZnVuY3Rpb25zL1dvdW5kc1ByZXAnO1xyXG5pbXBvcnQgeyBNb2RpZmllcnNQcmVwIH0gZnJvbSAnLi9mdW5jdGlvbnMvTW9kaWZpZXJzUHJlcCc7XHJcbmltcG9ydCB7IEluaXRpYXRpdmVQcmVwIH0gZnJvbSAnLi9mdW5jdGlvbnMvSW5pdGlhdGl2ZVByZXAnO1xyXG5pbXBvcnQgU3Bpcml0VHlwZSA9IFNoYWRvd3J1bi5TcGlyaXRUeXBlO1xyXG5pbXBvcnQgeyBIZWxwZXJzIH0gZnJvbSAnLi4vLi4vaGVscGVycyc7XHJcbmltcG9ydCB7UGFydHNMaXN0fSBmcm9tIFwiLi4vLi4vcGFydHMvUGFydHNMaXN0XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU3Bpcml0UHJlcCBleHRlbmRzIEJhc2VBY3RvclByZXA8U1I1U3Bpcml0VHlwZSwgU3Bpcml0QWN0b3JEYXRhPiB7XHJcbiAgICBwcmVwYXJlKCkge1xyXG4gICAgICAgIE1vZGlmaWVyc1ByZXAucHJlcGFyZU1vZGlmaWVycyh0aGlzLmRhdGEpO1xyXG4gICAgICAgIE1vZGlmaWVyc1ByZXAuY2xlYXJBdHRyaWJ1dGVNb2RzKHRoaXMuZGF0YSk7XHJcblxyXG4gICAgICAgIFNwaXJpdFByZXAucHJlcGFyZVNwaXJpdEJhc2VEYXRhKHRoaXMuZGF0YSk7XHJcblxyXG4gICAgICAgIFNraWxsc1ByZXAucHJlcGFyZVNraWxscyh0aGlzLmRhdGEpO1xyXG4gICAgICAgIEF0dHJpYnV0ZXNQcmVwLnByZXBhcmVBdHRyaWJ1dGVzKHRoaXMuZGF0YSk7XHJcbiAgICAgICAgTGltaXRzUHJlcC5wcmVwYXJlTGltaXRCYXNlRnJvbUF0dHJpYnV0ZXModGhpcy5kYXRhKTtcclxuICAgICAgICBMaW1pdHNQcmVwLnByZXBhcmVMaW1pdHModGhpcy5kYXRhKTtcclxuXHJcbiAgICAgICAgU3Bpcml0UHJlcC5wcmVwYXJlU3Bpcml0QXJtb3IodGhpcy5kYXRhKTtcclxuXHJcbiAgICAgICAgQ29uZGl0aW9uTW9uaXRvcnNQcmVwLnByZXBhcmVTdHVuKHRoaXMuZGF0YSk7XHJcbiAgICAgICAgQ29uZGl0aW9uTW9uaXRvcnNQcmVwLnByZXBhcmVQaHlzaWNhbCh0aGlzLmRhdGEpO1xyXG5cclxuICAgICAgICBNb3ZlbWVudFByZXAucHJlcGFyZU1vdmVtZW50KHRoaXMuZGF0YSk7XHJcbiAgICAgICAgV291bmRzUHJlcC5wcmVwYXJlV291bmRzKHRoaXMuZGF0YSk7XHJcblxyXG4gICAgICAgIEluaXRpYXRpdmVQcmVwLnByZXBhcmVDdXJyZW50SW5pdGlhdGl2ZSh0aGlzLmRhdGEpO1xyXG5cclxuICAgICAgICB0aGlzLmRhdGEuc3BlY2lhbCA9ICdtYWdpYyc7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHByZXBhcmVTcGlyaXRCYXNlRGF0YShkYXRhOiBTcGlyaXRBY3RvckRhdGEpIHtcclxuICAgICAgICBjb25zdCBvdmVycmlkZXMgPSB0aGlzLmdldFNwaXJpdFN0YXRNb2RpZmllcnMoZGF0YS5zcGlyaXRUeXBlKTtcclxuXHJcbiAgICAgICAgaWYgKG92ZXJyaWRlcykge1xyXG4gICAgICAgICAgICBjb25zdCB7IGF0dHJpYnV0ZXMsIHNraWxscywgaW5pdGlhdGl2ZSwgZm9yY2UsIG1vZGlmaWVycyB9ID0gZGF0YTtcclxuXHJcbiAgICAgICAgICAgIC8vIHNldCB0aGUgYmFzZSBvZiBhdHRyaWJ1dGVzIHRvIHRoZSBwcm92aWRlZCB2YWx1ZVxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IFthdHRJZCwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKG92ZXJyaWRlcy5hdHRyaWJ1dGVzKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZXNbYXR0SWRdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzW2F0dElkXS5iYXNlID0gdmFsdWUgKyBmb3JjZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBbc2tpbGxJZCwgc2tpbGxdIG9mIE9iamVjdC5lbnRyaWVzKHNraWxscy5hY3RpdmUpKSB7XHJcbiAgICAgICAgICAgICAgICBza2lsbC5iYXNlID0gb3ZlcnJpZGVzLnNraWxscy5maW5kKChzKSA9PiBzID09PSBza2lsbElkKSA/IGZvcmNlIDogMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gcHJlcGFyZSBpbml0aWF0aXZlIGRhdGFcclxuICAgICAgICAgICAgaW5pdGlhdGl2ZS5tZWF0c3BhY2UuYmFzZS5iYXNlID0gZm9yY2UgKiAyICsgb3ZlcnJpZGVzLmluaXQgKyBOdW1iZXIobW9kaWZpZXJzWydhc3RyYWxfaW5pdGlhdGl2ZSddKTtcclxuICAgICAgICAgICAgaW5pdGlhdGl2ZS5tZWF0c3BhY2UuYmFzZS5tb2QgPSBQYXJ0c0xpc3QuQWRkVW5pcXVlUGFydChpbml0aWF0aXZlLm1lYXRzcGFjZS5iYXNlLm1vZCwgXCJTUjUuQm9udXNcIiwgTnVtYmVyKG1vZGlmaWVyc1snbWVhdF9pbml0aWF0aXZlJ10pKTtcclxuICAgICAgICAgICAgaW5pdGlhdGl2ZS5tZWF0c3BhY2UuZGljZS5iYXNlID0gMjtcclxuICAgICAgICAgICAgaW5pdGlhdGl2ZS5tZWF0c3BhY2UuZGljZS5tb2QgPSBQYXJ0c0xpc3QuQWRkVW5pcXVlUGFydChpbml0aWF0aXZlLm1lYXRzcGFjZS5kaWNlLm1vZCwgXCJTUjUuQm9udXNcIiwgTnVtYmVyKG1vZGlmaWVyc1snbWVhdF9pbml0aWF0aXZlX2RpY2UnXSkpO1xyXG5cclxuICAgICAgICAgICAgaW5pdGlhdGl2ZS5hc3RyYWwuYmFzZS5iYXNlID0gZm9yY2UgKiAyICsgb3ZlcnJpZGVzLmFzdHJhbF9pbml0ICsgTnVtYmVyKG1vZGlmaWVyc1snYXN0cmFsX2luaXRpYXRpdmVfZGljZSddKTtcclxuICAgICAgICAgICAgaW5pdGlhdGl2ZS5hc3RyYWwuYmFzZS5tb2QgPSBQYXJ0c0xpc3QuQWRkVW5pcXVlUGFydChpbml0aWF0aXZlLmFzdHJhbC5iYXNlLm1vZCwgXCJTUjUuQm9udXNcIiwgTnVtYmVyKG1vZGlmaWVyc1snYXN0cmFsX2luaXRpYXRpdmUnXSkpO1xyXG4gICAgICAgICAgICBpbml0aWF0aXZlLmFzdHJhbC5kaWNlLmJhc2UgPSAzO1xyXG4gICAgICAgICAgICBpbml0aWF0aXZlLmFzdHJhbC5kaWNlLm1vZCA9IFBhcnRzTGlzdC5BZGRVbmlxdWVQYXJ0KGluaXRpYXRpdmUuYXN0cmFsLmRpY2UubW9kLCBcIlNSNS5Cb251c1wiLCBOdW1iZXIobW9kaWZpZXJzWydhc3RyYWxfaW5pdGlhdGl2ZV9kaWNlJ10pKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHByZXBhcmVTcGlyaXRBcm1vcihkYXRhOiBTcGlyaXRBY3RvckRhdGEpIHtcclxuICAgICAgICBjb25zdCB7IGFybW9yLCBhdHRyaWJ1dGVzIH0gPSBkYXRhO1xyXG4gICAgICAgIGFybW9yLmJhc2UgPSAoYXR0cmlidXRlcy5lc3NlbmNlLnZhbHVlID8/IDApICogMjtcclxuICAgICAgICBhcm1vci52YWx1ZSA9IEhlbHBlcnMuY2FsY1RvdGFsKGFybW9yKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGdldCB0aGUgYXR0cmlidXRlIGFuZCBpbml0aWF0aXZlIG1vZGlmaWVycyBhbmQgc2tpbGxzXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXRTcGlyaXRTdGF0TW9kaWZpZXJzKHNwaXJpdFR5cGU6IFNwaXJpdFR5cGUpIHtcclxuICAgICAgICBjb25zdCBvdmVycmlkZXMgPSB7XHJcbiAgICAgICAgICAgIC8vIHZhbHVlIG9mIDAgZm9yIGF0dHJpYnV0ZSBtYWtlcyBpdCBlcXVhbCB0byB0aGUgRm9yY2VcclxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgYm9keTogMCxcclxuICAgICAgICAgICAgICAgIGFnaWxpdHk6IDAsXHJcbiAgICAgICAgICAgICAgICByZWFjdGlvbjogMCxcclxuICAgICAgICAgICAgICAgIHN0cmVuZ3RoOiAwLFxyXG4gICAgICAgICAgICAgICAgd2lsbHBvd2VyOiAwLFxyXG4gICAgICAgICAgICAgICAgbG9naWM6IDAsXHJcbiAgICAgICAgICAgICAgICBpbnR1aXRpb246IDAsXHJcbiAgICAgICAgICAgICAgICBjaGFyaXNtYTogMCxcclxuICAgICAgICAgICAgICAgIG1hZ2ljOiAwLFxyXG4gICAgICAgICAgICAgICAgZXNzZW5jZTogMCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gbW9kaWZpZXJzIGZvciBhZnRlciB0aGUgRm9yY2UgeCAyIGNhbGN1bGF0aW9uXHJcbiAgICAgICAgICAgIGluaXQ6IDAsXHJcbiAgICAgICAgICAgIGFzdHJhbF9pbml0OiAwLFxyXG4gICAgICAgICAgICAvLyBza2lsbHMgYXJlIGFsbCBzZXQgdG8gRm9yY2VcclxuICAgICAgICAgICAgc2tpbGxzOiBbXSBhcyBzdHJpbmdbXSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHN3aXRjaCAoc3Bpcml0VHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdhaXInOlxyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuYm9keSA9IC0yO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuYWdpbGl0eSA9IDM7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5yZWFjdGlvbiA9IDQ7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5zdHJlbmd0aCA9IC0zO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmluaXQgPSA0O1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLnNraWxscy5wdXNoKCdhc3NlbnNpbmcnLCAnYXN0cmFsX2NvbWJhdCcsICdleG90aWNfcmFuZ2UnLCAncGVyY2VwdGlvbicsICd1bmFybWVkX2NvbWJhdCcpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2JlYXN0cyc6XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5ib2R5ID0gMjtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLmFnaWxpdHkgPSAxO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuc3RyZW5ndGggPSAyO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLnNraWxscy5wdXNoKCdhc3NlbnNpbmcnLCAnYXN0cmFsX2NvbWJhdCcsICdwZXJjZXB0aW9uJywgJ3VuYXJtZWRfY29tYmF0Jyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZWFydGgnOlxyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuYm9keSA9IDQ7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5hZ2lsaXR5ID0gLTI7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5yZWFjdGlvbiA9IC0xO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuc3RyZW5ndGggPSA0O1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMubG9naWMgPSAtMTtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5pbml0ID0gLTE7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuc2tpbGxzLnB1c2goJ2Fzc2Vuc2luZycsICdhc3RyYWxfY29tYmF0JywgJ2V4b3RpY19yYW5nZScsICdwZXJjZXB0aW9uJywgJ3VuYXJtZWRfY29tYmF0Jyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZmlyZSc6XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5ib2R5ID0gMTtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLmFnaWxpdHkgPSAyO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMucmVhY3Rpb24gPSAzO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuc3RyZW5ndGggPSAtMjtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLmludHVpdGlvbiA9IDE7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuaW5pdCA9IDM7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuc2tpbGxzLnB1c2goJ2Fzc2Vuc2luZycsICdhc3RyYWxfY29tYmF0JywgJ2V4b3RpY19yYW5nZScsICdmbGlnaHQnLCAncGVyY2VwdGlvbicsICd1bmFybWVkX2NvbWJhdCcpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2d1YXJkaWFuJzpcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLmJvZHkgPSAxO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuYWdpbGl0eSA9IDI7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5yZWFjdGlvbiA9IDM7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5zdHJlbmd0aCA9IDI7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuaW5pdCA9IDE7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuc2tpbGxzLnB1c2goJ2Fzc2Vuc2luZycsICdhc3RyYWxfY29tYmF0JywgJ2JsYWRlcycsICdjbHVicycsICdjb3VudGVyX3NwZWxsaW5nJywgJ2V4b3RpY19yYW5nZScsICdwZXJjZXB0aW9uJywgJ3VuYXJtZWRfY29tYmF0Jyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZ3VpZGFuY2UnOlxyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuYm9keSA9IDM7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5hZ2lsaXR5ID0gLTE7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5yZWFjdGlvbiA9IDI7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5zdHJlbmd0aCA9IDE7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuc2tpbGxzLnB1c2goJ2FyY2FuYScsICdhc3NlbnNpbmcnLCAnYXN0cmFsX2NvbWJhdCcsICdjb3VudGVyX3NwZWxsaW5nJywgJ3BlcmNlcHRpb24nLCAndW5hcm1lZF9jb21iYXQnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdtYW4nOlxyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuYm9keSA9IDE7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5yZWFjdGlvbiA9IDI7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5zdHJlbmd0aCA9IC0yO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuaW50dWl0aW9uID0gMTtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5pbml0ID0gMjtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5za2lsbHMucHVzaCgnYXNzZW5zaW5nJywgJ2FzdHJhbF9jb21iYXQnLCAncGVyY2VwdGlvbicsICdzcGVsbGNhc3RpbmcnLCAndW5hcm1lZF9jb21iYXQnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdwbGFudCc6XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5ib2R5ID0gMjtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLmFnaWxpdHkgPSAtMTtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLnN0cmVuZ3RoID0gMTtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLmxvZ2ljID0gLTE7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuc2tpbGxzLnB1c2goJ2Fzc2Vuc2luZycsICdhc3RyYWxfY29tYmF0JywgJ3BlcmNlcHRpb24nLCAnZXhvdGljX3JhbmdlJywgJ3VuYXJtZWRfY29tYmF0Jyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAndGFzayc6XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5yZWFjdGlvbiA9IDI7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5zdHJlbmd0aCA9IDI7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuaW5pdCA9IDI7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuc2tpbGxzLnB1c2goJ2FydGlzYW4nLCAnYXNzZW5zaW5nJywgJ2FzdHJhbF9jb21iYXQnLCAncGVyY2VwdGlvbicsICd1bmFybWVkX2NvbWJhdCcpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3dhdGVyJzpcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLmFnaWxpdHkgPSAxO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMucmVhY3Rpb24gPSAyO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmluaXQgPSAyO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLnNraWxscy5wdXNoKCdhc3NlbnNpbmcnLCAnYXN0cmFsX2NvbWJhdCcsICdleG90aWNfcmFuZ2UnLCAncGVyY2VwdGlvbicsICd1bmFybWVkX2NvbWJhdCcpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlICd0b3hpY19haXInOlxyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuYm9keSA9IC0yO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuYWdpbGl0eSA9IDM7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5yZWFjdGlvbiA9IDQ7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5zdHJlbmd0aCA9IC0zO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmluaXQgPSA0O1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLnNraWxscy5wdXNoKCdhc3NlbnNpbmcnLCAnYXN0cmFsX2NvbWJhdCcsICdleG90aWNfcmFuZ2UnLCAncGVyY2VwdGlvbicsICdydW5uaW5nJywgJ3VuYXJtZWRfY29tYmF0Jyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAndG94aWNfYmVhc3RzJzpcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLmJvZHkgPSAyO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuYWdpbGl0eSA9IDE7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5zdHJlbmd0aCA9IDI7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuc2tpbGxzLnB1c2goJ2Fzc2Vuc2luZycsICdhc3RyYWxfY29tYmF0JywgJ2V4b3RpY19yYW5nZScsICdneW1uYXN0aWNzJywgJ3BlcmNlcHRpb24nLCAncnVubmluZycsICd1bmFybWVkX2NvbWJhdCcpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3RveGljX2VhcnRoJzpcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLmJvZHkgPSA0O1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuYWdpbGl0eSA9IC0yO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMucmVhY3Rpb24gPSAtMTtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLnN0cmVuZ3RoID0gNDtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLmxvZ2ljID0gLTE7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuaW5pdCA9IC0xO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLnNraWxscy5wdXNoKCdhc3NlbnNpbmcnLCAnYXN0cmFsX2NvbWJhdCcsICdleG90aWNfcmFuZ2UnLCAncGVyY2VwdGlvbicsICd1bmFybWVkX2NvbWJhdCcpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3RveGljX2ZpcmUnOlxyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuYm9keSA9IDE7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5hZ2lsaXR5ID0gMjtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLnJlYWN0aW9uID0gMztcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLnN0cmVuZ3RoID0gLTI7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5pbnR1aXRpb24gPSAxO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmluaXQgPSAzO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLnNraWxscy5wdXNoKCdhc3NlbnNpbmcnLCAnYXN0cmFsX2NvbWJhdCcsICdleG90aWNfcmFuZ2UnLCAncGVyY2VwdGlvbicsICdmbGlnaHQnLCAndW5hcm1lZF9jb21iYXQnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICd0b3hpY19tYW4nOlxyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMucmVhY3Rpb24gPSAyO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuc3RyZW5ndGggPSAtMjtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLmludHVpdGlvbiA9IDE7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuaW5pdCA9IDI7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuc2tpbGxzLnB1c2goJ2Fzc2Vuc2luZycsICdhc3RyYWxfY29tYmF0JywgJ3BlcmNlcHRpb24nLCAnc3BlbGxfY2FzdGluZycsICd1bmFybWVkX2NvbWJhdCcpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3RveGljX3dhdGVyJzpcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLmJvZHkgPSAxO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuYWdpbGl0eSA9IDE7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5yZWFjdGlvbiA9IDI7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuaW5pdCA9IDI7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuc2tpbGxzLnB1c2goJ2Fzc2Vuc2luZycsICdhc3RyYWxfY29tYmF0JywgJ2V4b3RpY19yYW5nZScsICdwZXJjZXB0aW9uJywgJ3VuYXJtZWRfY29tYmF0Jyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ2Jsb29kJzpcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLmJvZHkgPSAyO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuYWdpbGl0eSA9IDI7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5zdHJlbmd0aCA9IDI7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5sb2dpYyA9IC0xO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLnNraWxscy5wdXNoKCdhc3NlbnNpbmcnLCAnYXN0cmFsX2NvbWJhdCcsICdwZXJjZXB0aW9uJywgJ3J1bm5pbmcnLCAndW5hcm1lZF9jb21iYXQnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAnbXVzZSc6XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5hZ2lsaXR5ID0gMztcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLnJlYWN0aW9uID0gMjtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLndpbGxwb3dlciA9IDE7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuaW5pdCA9IDM7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuc2tpbGxzLnB1c2goJ2Fzc2Vuc2luZycsICdhc3RyYWxfY29tYmF0JywgJ2NvbicsICdneW1uYXN0aWNzJywgJ2ludGltaWRhdGlvbicsICdwZXJjZXB0aW9uJywgJ3VuYXJtZWRfY29tYmF0Jyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnbmlnaHRtYXJlJzpcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLmFnaWxpdHkgPSAzO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMucmVhY3Rpb24gPSAyO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMud2lsbHBvd2VyID0gMTtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLmludHVpdGlvbiA9IDE7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5jaGFyaXNtYSA9IDI7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuaW5pdCA9IDM7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuc2tpbGxzLnB1c2goJ2Fzc2Vuc2luZycsICdhc3RyYWxfY29tYmF0JywgJ2NvbicsICdneW1uYXN0aWNzJywgJ2ludGltaWRhdGlvbicsICdwZXJjZXB0aW9uJywgJ3VuYXJtZWRfY29tYmF0Jyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnc2hhZGUnOlxyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuYWdpbGl0eSA9IDM7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5yZWFjdGlvbiA9IDI7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy53aWxscG93ZXIgPSAxO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuaW50dWl0aW9uID0gMTtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLmNoYXJpc21hID0gMjtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5pbml0ID0gMztcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5za2lsbHMucHVzaCgnYXNzZW5zaW5nJywgJ2FzdHJhbF9jb21iYXQnLCAnY29uJywgJ2d5bW5hc3RpY3MnLCAnaW50aW1pZGF0aW9uJywgJ3BlcmNlcHRpb24nLCAndW5hcm1lZF9jb21iYXQnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdzdWNjdWJ1cyc6XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5hZ2lsaXR5ID0gMztcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLnJlYWN0aW9uID0gMjtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLndpbGxwb3dlciA9IDE7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5pbnR1aXRpb24gPSAxO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuY2hhcmlzbWEgPSAyO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmluaXQgPSAzO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLnNraWxscy5wdXNoKCdhc3NlbnNpbmcnLCAnYXN0cmFsX2NvbWJhdCcsICdjb24nLCAnZ3ltbmFzdGljcycsICdpbnRpbWlkYXRpb24nLCAncGVyY2VwdGlvbicsICd1bmFybWVkX2NvbWJhdCcpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3dyYWl0aCc6XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5hZ2lsaXR5ID0gMztcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLnJlYWN0aW9uID0gMjtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLndpbGxwb3dlciA9IDE7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5pbnR1aXRpb24gPSAxO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuY2hhcmlzbWEgPSAyO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmluaXQgPSAzO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLnNraWxscy5wdXNoKCdhc3NlbnNpbmcnLCAnYXN0cmFsX2NvbWJhdCcsICdjb24nLCAnZ3ltbmFzdGljcycsICdpbnRpbWlkYXRpb24nLCAncGVyY2VwdGlvbicsICd1bmFybWVkX2NvbWJhdCcpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlICdzaGVkaW0nOlxyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMucmVhY3Rpb24gPSAyO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuc3RyZW5ndGggPSAxO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmluaXQgPSAyO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLnNraWxscy5wdXNoKCdhc3NlbnNpbmcnLCAnYXN0cmFsX2NvbWJhdCcsICdwZXJjZXB0aW9uJywgJ3VuYXJtZWRfY29tYmF0Jyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnbWFzdGVyX3NoZWRpbSc6XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5yZWFjdGlvbiA9IDI7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5zdHJlbmd0aCA9IDE7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5sb2dpYyA9IDE7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5pbnR1aXRpb24gPSAxO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmluaXQgPSAzO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLnNraWxscy5wdXNoKCdhc3NlbnNpbmcnLCAnYXN0cmFsX2NvbWJhdCcsICdjb3VudGVyc3BlbGxpbmcnLCAncGVyY2VwdGlvbicsICdzcGVsbGNhc3RpbmcnLCAndW5hcm1lZF9jb21iYXQnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgLy8gaW5zZWN0XHJcbiAgICAgICAgICAgIGNhc2UgJ2NhcmV0YWtlcic6XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5hZ2lsaXR5ID0gMTtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLnJlYWN0aW9uID0gMTtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5pbml0ID0gMTtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5za2lsbHMucHVzaCgnYXNzZW5zaW5nJywgJ2FzdHJhbF9jb21iYXQnLCAnbGVhZGVyc2hpcCcsICdwZXJjZXB0aW9uJywgJ3VuYXJtZWRfY29tYmF0Jyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnbnltcGgnOlxyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuYm9keSA9IDE7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5yZWFjdGlvbiA9IDM7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5zdHJlbmd0aCA9IDE7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuaW5pdCA9IDM7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuc2tpbGxzLnB1c2goJ2Fzc2Vuc2luZycsICdhc3RyYWxfY29tYmF0JywgJ3BlcmNlcHRpb24nLCAnZ3ltbmFzdGljcycsICdzcGVsbGNhc3RpbmcnLCAndW5hcm1lZF9jb21iYXQnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdzY291dCc6XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5hZ2lsaXR5ID0gMjtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLnJlYWN0aW9uID0gMjtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5pbml0ID0gMjtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5za2lsbHMucHVzaCgnYXNzZW5zaW5nJywgJ2FzdHJhbF9jb21iYXQnLCAncGVyY2VwdGlvbicsICdneW1uYXN0aWNzJywgJ3NuZWFraW5nJywgJ3VuYXJtZWRfY29tYmF0Jyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnc29sZGllcic6XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5ib2R5ID0gMztcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLmFnaWxpdHkgPSAxO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMucmVhY3Rpb24gPSAxO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuc3RyZW5ndGggPSAzO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmluaXQgPSAxO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLnNraWxscy5wdXNoKCdhc3NlbnNpbmcnLCAnYXN0cmFsX2NvbWJhdCcsICdjb3VudGVyc3BlbGxpbmcnLCAnZXhvdGljX3JhbmdlJywgJ2d5bW5hc3RpY3MnLCAncGVyY2VwdGlvbicsICd1bmFybWVkX2NvbWJhdCcpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3dvcmtlcic6XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5zdHJlbmd0aCA9IDE7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuc2tpbGxzLnB1c2goJ2Fzc2Vuc2luZycsICdhc3RyYWxfY29tYmF0JywgJ3BlcmNlcHRpb24nLCAndW5hcm1lZF9jb21iYXQnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdxdWVlbic6XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuYXR0cmlidXRlcy5ib2R5ID0gNTtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLmFnaWxpdHkgPSAzO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMucmVhY3Rpb24gPSA0O1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMuc3RyZW5ndGggPSA1O1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dHJpYnV0ZXMud2lsbHBvd2VyID0gMTtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLmxvZ2ljID0gMTtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRyaWJ1dGVzLmludHVpdGlvbiA9IDE7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuaW5pdCA9IDU7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuc2tpbGxzLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgJ2Fzc2Vuc2luZycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2FzdHJhbF9jb21iYXQnLFxyXG4gICAgICAgICAgICAgICAgICAgICdjb24nLFxyXG4gICAgICAgICAgICAgICAgICAgICdjb3VudGVyc3BlbGxpbmcnLFxyXG4gICAgICAgICAgICAgICAgICAgICdneW1uYXN0aWNzJyxcclxuICAgICAgICAgICAgICAgICAgICAnbGVhZGVyc2hpcCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ25lZ290aWF0aW9uJyxcclxuICAgICAgICAgICAgICAgICAgICAncGVyY2VwdGlvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3NwZWxsY2FzdGluZycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3VuYXJtZWRfY29tYmF0JyxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG92ZXJyaWRlcztcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBCYXNlQWN0b3JQcmVwIH0gZnJvbSAnLi9CYXNlQWN0b3JQcmVwJztcclxuaW1wb3J0IFNSNVNwcml0ZVR5cGUgPSBTaGFkb3dydW4uU1I1U3ByaXRlVHlwZTtcclxuaW1wb3J0IFNwcml0ZUFjdG9yRGF0YSA9IFNoYWRvd3J1bi5TcHJpdGVBY3RvckRhdGE7XHJcbmltcG9ydCB7IFNraWxsc1ByZXAgfSBmcm9tICcuL2Z1bmN0aW9ucy9Ta2lsbHNQcmVwJztcclxuaW1wb3J0IHsgTW9kaWZpZXJzUHJlcCB9IGZyb20gJy4vZnVuY3Rpb25zL01vZGlmaWVyc1ByZXAnO1xyXG5pbXBvcnQgeyBJbml0aWF0aXZlUHJlcCB9IGZyb20gJy4vZnVuY3Rpb25zL0luaXRpYXRpdmVQcmVwJztcclxuaW1wb3J0IHsgQXR0cmlidXRlc1ByZXAgfSBmcm9tICcuL2Z1bmN0aW9ucy9BdHRyaWJ1dGVzUHJlcCc7XHJcbmltcG9ydCB7IExpbWl0c1ByZXAgfSBmcm9tICcuL2Z1bmN0aW9ucy9MaW1pdHNQcmVwJztcclxuaW1wb3J0IHsgTWF0cml4UHJlcCB9IGZyb20gJy4vZnVuY3Rpb25zL01hdHJpeFByZXAnO1xyXG5pbXBvcnQgU3ByaXRlVHlwZSA9IFNoYWRvd3J1bi5TcHJpdGVUeXBlO1xyXG5pbXBvcnQgeyBIZWxwZXJzIH0gZnJvbSAnLi4vLi4vaGVscGVycyc7XHJcbmltcG9ydCB7IFBhcnRzTGlzdCB9IGZyb20gJy4uLy4uL3BhcnRzL1BhcnRzTGlzdCc7XHJcblxyXG4vKipcclxuICogUHJlcGFyZSBhIFNwcml0ZSBUeXBlIG9mIEFjdG9yXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3ByaXRlUHJlcCBleHRlbmRzIEJhc2VBY3RvclByZXA8U1I1U3ByaXRlVHlwZSwgU3ByaXRlQWN0b3JEYXRhPiB7XHJcbiAgICBwcmVwYXJlKCkge1xyXG4gICAgICAgIE1vZGlmaWVyc1ByZXAucHJlcGFyZU1vZGlmaWVycyh0aGlzLmRhdGEpO1xyXG4gICAgICAgIE1vZGlmaWVyc1ByZXAuY2xlYXJBdHRyaWJ1dGVNb2RzKHRoaXMuZGF0YSk7XHJcblxyXG4gICAgICAgIFNwcml0ZVByZXAucHJlcGFyZVNwcml0ZURhdGEodGhpcy5kYXRhKTtcclxuICAgICAgICBNYXRyaXhQcmVwLnByZXBhcmVBdHRyaWJ1dGVzRm9yRGV2aWNlKHRoaXMuZGF0YSk7XHJcblxyXG4gICAgICAgIFNraWxsc1ByZXAucHJlcGFyZVNraWxscyh0aGlzLmRhdGEpO1xyXG4gICAgICAgIEF0dHJpYnV0ZXNQcmVwLnByZXBhcmVBdHRyaWJ1dGVzKHRoaXMuZGF0YSk7XHJcbiAgICAgICAgTGltaXRzUHJlcC5wcmVwYXJlTGltaXRzKHRoaXMuZGF0YSk7XHJcblxyXG4gICAgICAgIE1hdHJpeFByZXAucHJlcGFyZU1hdHJpeFRvTGltaXRzQW5kQXR0cmlidXRlcyh0aGlzLmRhdGEpO1xyXG5cclxuICAgICAgICBJbml0aWF0aXZlUHJlcC5wcmVwYXJlQ3VycmVudEluaXRpYXRpdmUodGhpcy5kYXRhKTtcclxuXHJcbiAgICAgICAgdGhpcy5kYXRhLnNwZWNpYWwgPSAncmVzb25hbmNlJztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFByZXBhcmVzIGJhc2ljIFNwcml0ZSBzcGVjaWZpYyBkYXRhXHJcbiAgICAgKiAtIG1hdHJpeCBhdHRyaWJ1dGUgdmFsdWVzXHJcbiAgICAgKiAtIGRldmljZSByYXRpbmdcclxuICAgICAqIC0gbWF0cml4IGNvbmRpdGlvbiBtb25pdG9yXHJcbiAgICAgKiAtIG1hdHJpeCBpbml0aWF0aXZlXHJcbiAgICAgKiAtIHNraWxsc1xyXG4gICAgICogQHBhcmFtIGRhdGFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHByZXBhcmVTcHJpdGVEYXRhKGRhdGE6IFNwcml0ZUFjdG9yRGF0YSkge1xyXG4gICAgICAgIGNvbnN0IHsgbGV2ZWwsIHNraWxscywgbWF0cml4LCBzcHJpdGVUeXBlLCBpbml0aWF0aXZlLCBhdHRyaWJ1dGVzLCBtb2RpZmllcnMgfSA9IGRhdGE7XHJcblxyXG4gICAgICAgIGNvbnN0IG1hdHJpeEF0dHMgPSBbJ2F0dGFjaycsICdzbGVhemUnLCAnZGF0YV9wcm9jZXNzaW5nJywgJ2ZpcmV3YWxsJ107XHJcblxyXG4gICAgICAgIGNvbnN0IG92ZXJyaWRlcyA9IHRoaXMuZ2V0U3ByaXRlU3RhdE1vZGlmaWVycyhzcHJpdGVUeXBlKTtcclxuXHJcbiAgICAgICAgLy8gYXBwbHkgdGhlIG1hdHJpeCBvdmVycmlkZXNcclxuICAgICAgICBtYXRyaXhBdHRzLmZvckVhY2goKGF0dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAobWF0cml4W2F0dF0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgbWF0cml4W2F0dF0uYmFzZSA9IGxldmVsICsgb3ZlcnJpZGVzW2F0dF07XHJcbiAgICAgICAgICAgICAgICBtYXRyaXhbYXR0XS52YWx1ZSA9IEhlbHBlcnMuY2FsY1RvdGFsKG1hdHJpeFthdHRdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBzZXR1cCBpbml0aWF0aXZlIGZyb20gb3ZlcnJpZGVzXHJcbiAgICAgICAgaW5pdGlhdGl2ZS5tYXRyaXguYmFzZS5iYXNlID0gbGV2ZWwgKiAyICsgb3ZlcnJpZGVzLmluaXQ7XHJcbiAgICAgICAgUGFydHNMaXN0LkFkZFVuaXF1ZVBhcnQoaW5pdGlhdGl2ZS5tYXRyaXguYmFzZS5tb2QsICdTUjUuQm9udXMnLCBtb2RpZmllcnNbJ21hdHJpeF9pbml0aWF0aXZlJ10pO1xyXG4gICAgICAgIEhlbHBlcnMuY2FsY1RvdGFsKGluaXRpYXRpdmUubWF0cml4LmJhc2UpO1xyXG5cclxuICAgICAgICBpbml0aWF0aXZlLm1hdHJpeC5kaWNlLmJhc2UgPSA0O1xyXG4gICAgICAgIFBhcnRzTGlzdC5BZGRVbmlxdWVQYXJ0KGluaXRpYXRpdmUubWF0cml4LmRpY2UubW9kLCAnU1I1LkJvbnVzJywgbW9kaWZpZXJzWydtYXRyaXhfaW5pdGlhdGl2ZV9kaWNlJ10pO1xyXG4gICAgICAgIEhlbHBlcnMuY2FsY1RvdGFsKGluaXRpYXRpdmUubWF0cml4LmRpY2UpO1xyXG5cclxuICAgICAgICAvLyBhbHdheXMgaW4gbWF0cml4IHBlcmNlcHRpb25cclxuICAgICAgICBpbml0aWF0aXZlLnBlcmNlcHRpb24gPSAnbWF0cml4JztcclxuXHJcbiAgICAgICAgLy8gY2FsY3VsYXRlIHJlc29uYW5jZSB2YWx1ZVxyXG4gICAgICAgIGF0dHJpYnV0ZXMucmVzb25hbmNlLmJhc2UgPSBsZXZlbCArIG92ZXJyaWRlcy5yZXNvbmFuY2U7XHJcbiAgICAgICAgSGVscGVycy5jYWxjVG90YWwoYXR0cmlidXRlcy5yZXNvbmFuY2UpO1xyXG5cclxuICAgICAgICAvLyBhcHBseSBza2lsbCBsZXZlbHNcclxuICAgICAgICAvLyBjbGVhciBza2lsbHMgdGhhdCB3ZSBkb24ndCBoYXZlXHJcbiAgICAgICAgZm9yIChjb25zdCBbc2tpbGxJZCwgc2tpbGxdIG9mIE9iamVjdC5lbnRyaWVzKHNraWxscy5hY3RpdmUpKSB7XHJcbiAgICAgICAgICAgIHNraWxsLmJhc2UgPSBvdmVycmlkZXMuc2tpbGxzLmZpbmQoKHMpID0+IHMgPT09IHNraWxsSWQpID8gbGV2ZWwgOiAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbWF0cml4LnJhdGluZyA9IGxldmVsO1xyXG4gICAgICAgIG1hdHJpeC5jb25kaXRpb25fbW9uaXRvci5tYXggPSA4ICsgTWF0aC5jZWlsKGxldmVsIC8gMik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIHN0YXQgbW9kaWZpZXJzIGZvciB0aGUgc3BlY2lmaWVkIHR5cGUgb2Ygc3ByaXRlXHJcbiAgICAgKiBAcGFyYW0gc3ByaXRlVHlwZVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0U3ByaXRlU3RhdE1vZGlmaWVycyhzcHJpdGVUeXBlOiBTcHJpdGVUeXBlKSB7XHJcbiAgICAgICAgY29uc3Qgb3ZlcnJpZGVzID0ge1xyXG4gICAgICAgICAgICBhdHRhY2s6IDAsXHJcbiAgICAgICAgICAgIHNsZWF6ZTogMCxcclxuICAgICAgICAgICAgZGF0YV9wcm9jZXNzaW5nOiAwLFxyXG4gICAgICAgICAgICBmaXJld2FsbDogMCxcclxuICAgICAgICAgICAgcmVzb25hbmNlOiAwLFxyXG4gICAgICAgICAgICBpbml0OiAwLFxyXG4gICAgICAgICAgICAvLyBhbGwgc3ByaXRlcyBoYXZlIGNvbXB1dGVyXHJcbiAgICAgICAgICAgIHNraWxsczogWydjb21wdXRlciddLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgc3dpdGNoIChzcHJpdGVUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2NvdXJpZXInOlxyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLnNsZWF6ZSA9IDM7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuZGF0YV9wcm9jZXNzaW5nID0gMTtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5maXJld2FsbCA9IDI7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuaW5pdCA9IDE7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuc2tpbGxzLnB1c2goJ2hhY2tpbmcnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdjcmFjayc6XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuc2xlYXplID0gMztcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5kYXRhX3Byb2Nlc3NpbmcgPSAyO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmZpcmV3YWxsID0gMTtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5pbml0ID0gMjtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5za2lsbHMucHVzaCgnaGFja2luZycsICdlbGVjdHJvbmljX3dhcmZhcmUnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdkYXRhJzpcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRhY2sgPSAtMTtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5kYXRhX3Byb2Nlc3NpbmcgPSA0O1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmZpcmV3YWxsID0gMTtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5pbml0ID0gNDtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5za2lsbHMucHVzaCgnZWxlY3Ryb25pY193YXJmYXJlJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZmF1bHQnOlxyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmF0dGFjayA9IDM7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuZGF0YV9wcm9jZXNzaW5nID0gMTtcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5maXJld2FsbCA9IDI7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuaW5pdCA9IDE7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuc2tpbGxzLnB1c2goJ2N5YmVyY29tYmF0JywgJ2hhY2tpbmcnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdtYWNoaW5lJzpcclxuICAgICAgICAgICAgICAgIG92ZXJyaWRlcy5hdHRhY2sgPSAxO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmRhdGFfcHJvY2Vzc2luZyA9IDM7XHJcbiAgICAgICAgICAgICAgICBvdmVycmlkZXMuZmlyZXdhbGwgPSAyO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLmluaXQgPSAzO1xyXG4gICAgICAgICAgICAgICAgb3ZlcnJpZGVzLnNraWxscy5wdXNoKCdlbGVjdHJvbmljX3dhcmZhcmUnLCAnaGFyZHdhcmUnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3ZlcnJpZGVzO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEJhc2VBY3RvclByZXAgfSBmcm9tICcuL0Jhc2VBY3RvclByZXAnO1xyXG5pbXBvcnQgU1I1VmVoaWNsZVR5cGUgPSBTaGFkb3dydW4uU1I1VmVoaWNsZVR5cGU7XHJcbmltcG9ydCBWZWhpY2xlQWN0b3JEYXRhID0gU2hhZG93cnVuLlZlaGljbGVBY3RvckRhdGE7XHJcbmltcG9ydCB7IFNraWxsc1ByZXAgfSBmcm9tICcuL2Z1bmN0aW9ucy9Ta2lsbHNQcmVwJztcclxuaW1wb3J0IHsgTW9kaWZpZXJzUHJlcCB9IGZyb20gJy4vZnVuY3Rpb25zL01vZGlmaWVyc1ByZXAnO1xyXG5pbXBvcnQgeyBJbml0aWF0aXZlUHJlcCB9IGZyb20gJy4vZnVuY3Rpb25zL0luaXRpYXRpdmVQcmVwJztcclxuaW1wb3J0IHsgQXR0cmlidXRlc1ByZXAgfSBmcm9tICcuL2Z1bmN0aW9ucy9BdHRyaWJ1dGVzUHJlcCc7XHJcbmltcG9ydCB7IExpbWl0c1ByZXAgfSBmcm9tICcuL2Z1bmN0aW9ucy9MaW1pdHNQcmVwJztcclxuaW1wb3J0IHsgTWF0cml4UHJlcCB9IGZyb20gJy4vZnVuY3Rpb25zL01hdHJpeFByZXAnO1xyXG5pbXBvcnQgeyBIZWxwZXJzIH0gZnJvbSAnLi4vLi4vaGVscGVycyc7XHJcbmltcG9ydCB7IFBhcnRzTGlzdCB9IGZyb20gJy4uLy4uL3BhcnRzL1BhcnRzTGlzdCc7XHJcblxyXG5leHBvcnQgY2xhc3MgVmVoaWNsZVByZXAgZXh0ZW5kcyBCYXNlQWN0b3JQcmVwPFNSNVZlaGljbGVUeXBlLCBWZWhpY2xlQWN0b3JEYXRhPiB7XHJcbiAgICBwcmVwYXJlKCkge1xyXG4gICAgICAgIE1vZGlmaWVyc1ByZXAucHJlcGFyZU1vZGlmaWVycyh0aGlzLmRhdGEpO1xyXG4gICAgICAgIE1vZGlmaWVyc1ByZXAuY2xlYXJBdHRyaWJ1dGVNb2RzKHRoaXMuZGF0YSk7XHJcblxyXG4gICAgICAgIFZlaGljbGVQcmVwLnByZXBhcmVWZWhpY2xlU3RhdHModGhpcy5kYXRhKTtcclxuICAgICAgICBWZWhpY2xlUHJlcC5wcmVwYXJlQXR0cmlidXRlcyh0aGlzLmRhdGEpO1xyXG4gICAgICAgIFZlaGljbGVQcmVwLnByZXBhcmVMaW1pdHModGhpcy5kYXRhKTtcclxuXHJcbiAgICAgICAgU2tpbGxzUHJlcC5wcmVwYXJlU2tpbGxzKHRoaXMuZGF0YSk7XHJcbiAgICAgICAgQXR0cmlidXRlc1ByZXAucHJlcGFyZUF0dHJpYnV0ZXModGhpcy5kYXRhKTtcclxuICAgICAgICBMaW1pdHNQcmVwLnByZXBhcmVMaW1pdHModGhpcy5kYXRhKTtcclxuXHJcbiAgICAgICAgVmVoaWNsZVByZXAucHJlcGFyZUNvbmRpdGlvbk1vbml0b3IodGhpcy5kYXRhKTtcclxuXHJcbiAgICAgICAgTWF0cml4UHJlcC5wcmVwYXJlTWF0cml4VG9MaW1pdHNBbmRBdHRyaWJ1dGVzKHRoaXMuZGF0YSk7XHJcbiAgICAgICAgTWF0cml4UHJlcC5wcmVwYXJlQXR0cmlidXRlc0ZvckRldmljZSh0aGlzLmRhdGEpO1xyXG5cclxuICAgICAgICBWZWhpY2xlUHJlcC5wcmVwYXJlTW92ZW1lbnQodGhpcy5kYXRhKTtcclxuXHJcbiAgICAgICAgVmVoaWNsZVByZXAucHJlcGFyZU1lYXRzcGFjZUluaXQodGhpcy5kYXRhKTtcclxuICAgICAgICBJbml0aWF0aXZlUHJlcC5wcmVwYXJlTWF0cml4SW5pdCh0aGlzLmRhdGEpO1xyXG4gICAgICAgIEluaXRpYXRpdmVQcmVwLnByZXBhcmVDdXJyZW50SW5pdGlhdGl2ZSh0aGlzLmRhdGEpO1xyXG5cclxuICAgICAgICBWZWhpY2xlUHJlcC5wcmVwYXJlQXJtb3IodGhpcy5kYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcHJlcGFyZVZlaGljbGVTdGF0cyhkYXRhOiBWZWhpY2xlQWN0b3JEYXRhKSB7XHJcbiAgICAgICAgY29uc3QgeyB2ZWhpY2xlX3N0YXRzLCBpc09mZlJvYWQgfSA9IGRhdGE7XHJcbiAgICAgICAgLy8gc2V0IHRoZSB2YWx1ZSBmb3IgdGhlIHN0YXRzXHJcbiAgICAgICAgZm9yIChsZXQgW2tleSwgc3RhdF0gb2YgT2JqZWN0LmVudHJpZXModmVoaWNsZV9zdGF0cykpIHtcclxuICAgICAgICAgICAgLy8gdGhpcyB0dXJucyB0aGUgT2JqZWN0IG1vZGVsIGludG8gdGhlIGxpc3QgbW9kXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RhdC5tb2QgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICBzdGF0Lm1vZCA9IG5ldyBQYXJ0c0xpc3Qoc3RhdC5tb2QpLmxpc3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgcGFydHMgPSBuZXcgUGFydHNMaXN0KHN0YXQubW9kKTtcclxuXHJcbiAgICAgICAgICAgIHBhcnRzLmFkZFVuaXF1ZVBhcnQoJ1NSNS5UZW1wb3JhcnknLCBzdGF0LnRlbXAgPz8gMCk7XHJcblxyXG4gICAgICAgICAgICBzdGF0Lm1vZCA9IHBhcnRzLmxpc3Q7XHJcbiAgICAgICAgICAgIEhlbHBlcnMuY2FsY1RvdGFsKHN0YXQpO1xyXG4gICAgICAgICAgICAvLyBhZGQgbGFiZWxzXHJcbiAgICAgICAgICAgIHN0YXQubGFiZWwgPSBDT05GSUcuU1I1LnZlaGljbGUuc3RhdHNba2V5XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGhpZGUgY2VydGFpbiBzdGF0cyBkZXBlbmRpbmcgb24gaWYgd2UncmUgb2Zmcm9hZFxyXG4gICAgICAgIGlmIChpc09mZlJvYWQpIHtcclxuICAgICAgICAgICAgdmVoaWNsZV9zdGF0cy5vZmZfcm9hZF9zcGVlZC5oaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgdmVoaWNsZV9zdGF0cy5vZmZfcm9hZF9oYW5kbGluZy5oaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgdmVoaWNsZV9zdGF0cy5zcGVlZC5oaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgICAgICB2ZWhpY2xlX3N0YXRzLmhhbmRsaW5nLmhpZGRlbiA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmVoaWNsZV9zdGF0cy5vZmZfcm9hZF9zcGVlZC5oaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgICAgICB2ZWhpY2xlX3N0YXRzLm9mZl9yb2FkX2hhbmRsaW5nLmhpZGRlbiA9IHRydWU7XHJcbiAgICAgICAgICAgIHZlaGljbGVfc3RhdHMuc3BlZWQuaGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZlaGljbGVfc3RhdHMuaGFuZGxpbmcuaGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBwcmVwYXJlQXR0cmlidXRlcyhkYXRhOiBWZWhpY2xlQWN0b3JEYXRhKSB7XHJcbiAgICAgICAgY29uc3QgeyBhdHRyaWJ1dGVzLCB2ZWhpY2xlX3N0YXRzIH0gPSBkYXRhO1xyXG5cclxuICAgICAgICBjb25zdCBhdHRyaWJ1dGVJZHMgPSBbJ2FnaWxpdHknLCAncmVhY3Rpb24nLCAnc3RyZW5ndGgnLCAnd2lsbHBvd2VyJywgJ2xvZ2ljJywgJ2ludHVpdGlvbicsICdjaGFyaXNtYSddO1xyXG5cclxuICAgICAgICBjb25zdCB0b3RhbFBpbG90ID0gSGVscGVycy5jYWxjVG90YWwodmVoaWNsZV9zdGF0cy5waWxvdCk7XHJcblxyXG4gICAgICAgIGF0dHJpYnV0ZUlkcy5mb3JFYWNoKChhdHRJZCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlc1thdHRJZF0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlc1thdHRJZF0uYmFzZSA9IHRvdGFsUGlsb3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcHJlcGFyZUxpbWl0cyhkYXRhOiBWZWhpY2xlQWN0b3JEYXRhKSB7XHJcbiAgICAgICAgY29uc3QgeyBsaW1pdHMsIHZlaGljbGVfc3RhdHMsIGlzT2ZmUm9hZCB9ID0gZGF0YTtcclxuXHJcbiAgICAgICAgbGltaXRzLm1lbnRhbC5iYXNlID0gSGVscGVycy5jYWxjVG90YWwodmVoaWNsZV9zdGF0cy5zZW5zb3IpO1xyXG5cclxuICAgICAgICAvLyBhZGQgc2Vuc29yLCBoYW5kbGluZywgYW5kIHNwZWVkIGFzIGxpbWl0c1xyXG4gICAgICAgIGxpbWl0cy5zZW5zb3IgPSB7IC4uLnZlaGljbGVfc3RhdHMuc2Vuc29yLCBoaWRkZW46IHRydWUgfTtcclxuICAgICAgICBsaW1pdHMuaGFuZGxpbmcgPSB7IC4uLihpc09mZlJvYWQgPyB2ZWhpY2xlX3N0YXRzLm9mZl9yb2FkX2hhbmRsaW5nIDogdmVoaWNsZV9zdGF0cy5oYW5kbGluZyksIGhpZGRlbjogdHJ1ZSB9O1xyXG4gICAgICAgIGxpbWl0cy5zcGVlZCA9IHsgLi4uKGlzT2ZmUm9hZCA/IHZlaGljbGVfc3RhdHMub2ZmX3JvYWRfc3BlZWQgOiB2ZWhpY2xlX3N0YXRzLnNwZWVkKSwgaGlkZGVuOiB0cnVlIH07XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHByZXBhcmVDb25kaXRpb25Nb25pdG9yKGRhdGE6IFZlaGljbGVBY3RvckRhdGEpIHtcclxuICAgICAgICBjb25zdCB7IHRyYWNrLCBhdHRyaWJ1dGVzLCBtYXRyaXgsIGlzRHJvbmUsIG1vZGlmaWVycyB9ID0gZGF0YTtcclxuXHJcbiAgICAgICAgY29uc3QgaGFsZkJvZHkgPSBNYXRoLmNlaWwoSGVscGVycy5jYWxjVG90YWwoYXR0cmlidXRlcy5ib2R5KSAvIDIpO1xyXG4gICAgICAgIC8vIENSQiBwZyAxOTkgZHJvbmUgdnMgdmVoaWNsZSBwaHlzaWNhbCBjb25kaXRpb24gbW9uaXRvciBydWxlc1xyXG4gICAgICAgIGlmIChpc0Ryb25lKSB7XHJcbiAgICAgICAgICAgIHRyYWNrLnBoeXNpY2FsLmJhc2UgPSA2ICsgaGFsZkJvZHk7XHJcbiAgICAgICAgICAgIHRyYWNrLnBoeXNpY2FsLm1heCA9IHRyYWNrLnBoeXNpY2FsLmJhc2UgKyAoTnVtYmVyKG1vZGlmaWVyc1sncGh5c2ljYWxfdHJhY2snXSkgfHwgMCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdHJhY2sucGh5c2ljYWwuYmFzZSA9IDEyICsgaGFsZkJvZHk7XHJcbiAgICAgICAgICAgIHRyYWNrLnBoeXNpY2FsLm1heCA9ICB0cmFjay5waHlzaWNhbC5iYXNlICsgKE51bWJlcihtb2RpZmllcnNbJ3BoeXNpY2FsX3RyYWNrJ10pIHx8IDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cmFjay5waHlzaWNhbC5sYWJlbCA9IENPTkZJRy5TUjUuZGFtYWdlVHlwZXMucGh5c2ljYWw7XHJcblxyXG4gICAgICAgIGNvbnN0IHJhdGluZyA9IG1hdHJpeC5yYXRpbmcgfHwgMDtcclxuICAgICAgICBtYXRyaXguY29uZGl0aW9uX21vbml0b3IubWF4ID0gOCArIE1hdGguY2VpbChyYXRpbmcgLyAyKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcHJlcGFyZU1vdmVtZW50KGRhdGE6IFZlaGljbGVBY3RvckRhdGEpIHtcclxuICAgICAgICBjb25zdCB7IHZlaGljbGVfc3RhdHMsIG1vdmVtZW50LCBpc09mZlJvYWQgfSA9IGRhdGE7XHJcblxyXG4gICAgICAgIGxldCBzcGVlZFRvdGFsID0gSGVscGVycy5jYWxjVG90YWwoaXNPZmZSb2FkID8gdmVoaWNsZV9zdGF0cy5vZmZfcm9hZF9zcGVlZCA6IHZlaGljbGVfc3RhdHMuc3BlZWQpO1xyXG5cclxuICAgICAgICAvLyBhbGdvcml0aG0gdG8gZGV0ZXJtaW5lIHNwZWVkLCBDUkIgcGcgMjAyIHRhYmxlXHJcbiAgICAgICAgbW92ZW1lbnQud2Fsay5iYXNlID0gNSAqIE1hdGgucG93KDIsIHNwZWVkVG90YWwgLSAxKTtcclxuICAgICAgICBtb3ZlbWVudC53YWxrLnZhbHVlID0gbW92ZW1lbnQud2Fsay5iYXNlO1xyXG5cclxuICAgICAgICBtb3ZlbWVudC5ydW4uYmFzZSA9IDEwICogTWF0aC5wb3coMiwgc3BlZWRUb3RhbCAtIDEpO1xyXG4gICAgICAgIG1vdmVtZW50LnJ1bi52YWx1ZSA9IG1vdmVtZW50LnJ1bi5iYXNlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBwcmVwYXJlTWVhdHNwYWNlSW5pdChkYXRhOiBWZWhpY2xlQWN0b3JEYXRhKSB7XHJcbiAgICAgICAgY29uc3QgeyB2ZWhpY2xlX3N0YXRzLCBpbml0aWF0aXZlIH0gPSBkYXRhO1xyXG5cclxuICAgICAgICBjb25zdCBwaWxvdCA9IEhlbHBlcnMuY2FsY1RvdGFsKHZlaGljbGVfc3RhdHMucGlsb3QpO1xyXG5cclxuICAgICAgICBpbml0aWF0aXZlLm1lYXRzcGFjZS5iYXNlLmJhc2UgPSBwaWxvdCAqIDI7XHJcbiAgICAgICAgaW5pdGlhdGl2ZS5tZWF0c3BhY2UuZGljZS5iYXNlID0gNDtcclxuICAgICAgICBIZWxwZXJzLmNhbGNUb3RhbChpbml0aWF0aXZlLm1lYXRzcGFjZS5iYXNlKTtcclxuICAgICAgICBIZWxwZXJzLmNhbGNUb3RhbChpbml0aWF0aXZlLm1lYXRzcGFjZS5kaWNlKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcHJlcGFyZUFybW9yKGRhdGE6IFZlaGljbGVBY3RvckRhdGEpIHtcclxuICAgICAgICBjb25zdCB7IGFybW9yIH0gPSBkYXRhO1xyXG4gICAgICAgIGFybW9yLm1vZCA9IFBhcnRzTGlzdC5BZGRVbmlxdWVQYXJ0KGFybW9yLm1vZCwgJ1NSNS5UZW1wb3JhcnknLCBhcm1vclsndGVtcCddKTtcclxuICAgICAgICBIZWxwZXJzLmNhbGNUb3RhbChhcm1vcik7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IFNSNUFjdG9yRGF0YSA9IFNoYWRvd3J1bi5TUjVBY3RvckRhdGE7XHJcbmltcG9ydCB7IFBhcnRzTGlzdCB9IGZyb20gJy4uLy4uLy4uL3BhcnRzL1BhcnRzTGlzdCc7XHJcbmltcG9ydCB7IEhlbHBlcnMgfSBmcm9tICcuLi8uLi8uLi9oZWxwZXJzJztcclxuaW1wb3J0IHtTUn0gZnJvbSBcIi4uLy4uLy4uL2NvbnN0YW50c1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEF0dHJpYnV0ZXNQcmVwIHtcclxuICAgIC8qKlxyXG4gICAgICogUHJlcGFyZSBhY3RvciBkYXRhIGZvciBhdHRyaWJ1dGVzXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBwcmVwYXJlQXR0cmlidXRlcyhkYXRhOiBTUjVBY3RvckRhdGEpIHtcclxuICAgICAgICBjb25zdCB7IGF0dHJpYnV0ZXMgfSA9IGRhdGE7XHJcblxyXG4gICAgICAgIC8vIGFsd2F5cyBoYXZlIHNwZWNpYWwgYXR0cmlidXRlcyBzZXQgdG8gaGlkZGVuXHJcbiAgICAgICAgYXR0cmlidXRlcy5tYWdpYy5oaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgIGF0dHJpYnV0ZXMucmVzb25hbmNlLmhpZGRlbiA9IHRydWU7XHJcbiAgICAgICAgYXR0cmlidXRlcy5lZGdlLmhpZGRlbiA9IHRydWU7XHJcbiAgICAgICAgYXR0cmlidXRlcy5lc3NlbmNlLmhpZGRlbiA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vIHNldCB0aGUgdmFsdWUgZm9yIHRoZSBhdHRyaWJ1dGVzXHJcbiAgICAgICAgZm9yIChsZXQgW2tleSwgYXR0cmlidXRlXSBvZiBPYmplY3QuZW50cmllcyhhdHRyaWJ1dGVzKSkge1xyXG4gICAgICAgICAgICAvLyBkb24ndCBtYW5hZ2UgdGhlIGF0dHJpYnV0ZSBpZiBpdCBpcyB1c2luZyB0aGUgb2xkIG1ldGhvZCBvZiBlZGdlIHRyYWNraW5nXHJcbiAgICAgICAgICAgIC8vIG5lZWRlZCB0byBiZSBhYmxlIHRvIG1pZ3JhdGUgdGhpbmdzIGNvcnJlY3RseVxyXG4gICAgICAgICAgICBpZiAoa2V5ID09PSAnZWRnZScgJiYgYXR0cmlidXRlWyd1c2VzJ10gPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IG5ldyBQYXJ0c0xpc3QoYXR0cmlidXRlLm1vZCk7XHJcblxyXG4gICAgICAgICAgICBhdHRyaWJ1dGUubW9kID0gcGFydHMubGlzdDtcclxuXHJcbiAgICAgICAgICAgIC8vIEVhY2ggYXR0cmlidXRlIGNhbiBoYXZlIGEgdW5pcXVlIHZhbHVlIHJhbmdlLlxyXG4gICAgICAgICAgICAvLyBUT0RPOiAgSW1wbGVtZW50IG1ldGF0eXBlIGF0dHJpYnV0ZSB2YWx1ZSByYW5nZXMgZm9yIGNoYXJhY3RlciBhY3RvcnMuXHJcbiAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gU1IuYXR0cmlidXRlcy5yYW5nZXNba2V5XTtcclxuICAgICAgICAgICAgSGVscGVycy5jYWxjVG90YWwoYXR0cmlidXRlLCByYW5nZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBhZGQgaTE4biBsYWJlbHMuXHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZS5sYWJlbCA9IENPTkZJRy5TUjUuYXR0cmlidXRlc1trZXldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgU1I1QWN0b3JEYXRhID0gU2hhZG93cnVuLlNSNUFjdG9yRGF0YTtcclxuaW1wb3J0IFBoeXNpY2FsVHJhY2tBY3RvckRhdGEgPSBTaGFkb3dydW4uUGh5c2ljYWxUcmFja0FjdG9yRGF0YTtcclxuaW1wb3J0IFN0dW5UcmFja0FjdG9yRGF0YSA9IFNoYWRvd3J1bi5TdHVuVHJhY2tBY3RvckRhdGE7XHJcbmltcG9ydCBUd29UcmFja0FjdG9yRGF0YSA9IFNoYWRvd3J1bi5Ud29UcmFja0FjdG9yRGF0YTtcclxuXHJcbmV4cG9ydCBjbGFzcyBDb25kaXRpb25Nb25pdG9yc1ByZXAge1xyXG4gICAgc3RhdGljIHByZXBhcmVTdHVuKGRhdGE6IFNSNUFjdG9yRGF0YSAmIFN0dW5UcmFja0FjdG9yRGF0YSkge1xyXG4gICAgICAgIGNvbnN0IHsgdHJhY2ssIGF0dHJpYnV0ZXMsIG1vZGlmaWVycyB9ID0gZGF0YTtcclxuXHJcbiAgICAgICAgdHJhY2suc3R1bi5iYXNlID0gOCArIE1hdGguY2VpbChhdHRyaWJ1dGVzLndpbGxwb3dlci52YWx1ZSAvIDIpO1xyXG4gICAgICAgIHRyYWNrLnN0dW4ubWF4ID0gdHJhY2suc3R1bi5iYXNlICsgTnVtYmVyKG1vZGlmaWVyc1snc3R1bl90cmFjayddKTtcclxuICAgICAgICB0cmFjay5zdHVuLmxhYmVsID0gQ09ORklHLlNSNS5kYW1hZ2VUeXBlcy5zdHVuO1xyXG4gICAgICAgIHRyYWNrLnN0dW4uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcHJlcGFyZVBoeXNpY2FsKGRhdGE6IFNSNUFjdG9yRGF0YSAmIFBoeXNpY2FsVHJhY2tBY3RvckRhdGEpIHtcclxuICAgICAgICBjb25zdCB7IHRyYWNrLCBhdHRyaWJ1dGVzLCBtb2RpZmllcnMgfSA9IGRhdGE7XHJcblxyXG4gICAgICAgIHRyYWNrLnBoeXNpY2FsLmJhc2UgPSA4ICsgTWF0aC5jZWlsKGF0dHJpYnV0ZXMuYm9keS52YWx1ZSAvIDIpO1xyXG4gICAgICAgIHRyYWNrLnBoeXNpY2FsLm1heCA9IHRyYWNrLnBoeXNpY2FsLmJhc2UgKyBOdW1iZXIobW9kaWZpZXJzWydwaHlzaWNhbF90cmFjayddKTtcclxuICAgICAgICB0cmFjay5waHlzaWNhbC5vdmVyZmxvdy5tYXggPSBhdHRyaWJ1dGVzLmJvZHkudmFsdWU7XHJcbiAgICAgICAgdHJhY2sucGh5c2ljYWwubGFiZWwgPSBDT05GSUcuU1I1LmRhbWFnZVR5cGVzLnBoeXNpY2FsO1xyXG4gICAgICAgIHRyYWNrLnBoeXNpY2FsLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHByZXBhcmVHcnVudChkYXRhOiBTUjVBY3RvckRhdGEgJiBUd29UcmFja0FjdG9yRGF0YSkge1xyXG4gICAgICAgIC8vIEdydW50cyB1c2Ugb25seSBvbmUgbW9uaXRvciwgdXNlIHBoeXNpY2FsIHRvIGdldCBvdmVyZmxvdyBmdW5jdGlvbmFsaXR5LlxyXG4gICAgICAgIENvbmRpdGlvbk1vbml0b3JzUHJlcC5wcmVwYXJlU3R1bihkYXRhKTtcclxuXHJcbiAgICAgICAgY29uc3QgeyB0cmFjaywgYXR0cmlidXRlcywgbW9kaWZpZXJzIH0gPSBkYXRhO1xyXG4gICAgICAgIC8vIE92ZXJ3cml0ZSBzdHVuIGRhbWFnZSB0byBhdm9pZCBpbnZpc2libGUgZGFtYWdlIG1vZGlmaWVycy5cclxuICAgICAgICB0cmFjay5zdHVuLnZhbHVlID0gMDtcclxuICAgICAgICB0cmFjay5zdHVuLmRpc2FibGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLy8gR3J1bnRzIHVzZSBlaXRoZXIgdGhlaXIgV0lMIG9yIEJPRCBhcyB0aGVpciBtb25pdG9ycyBhdHRyaWJ1dGUuXHJcbiAgICAgICAgY29uc3QgYXR0cmlidXRlID0gYXR0cmlidXRlcy53aWxscG93ZXIudmFsdWUgPiBhdHRyaWJ1dGVzLmJvZHkudmFsdWUgP1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGVzLndpbGxwb3dlcjpcclxuICAgICAgICAgICAgYXR0cmlidXRlcy5ib2R5O1xyXG5cclxuICAgICAgICB0cmFjay5waHlzaWNhbC5iYXNlID0gOCArIE1hdGguY2VpbChhdHRyaWJ1dGUudmFsdWUgLyAyKTtcclxuICAgICAgICB0cmFjay5waHlzaWNhbC5tYXggPSB0cmFjay5waHlzaWNhbC5iYXNlICsgTnVtYmVyKG1vZGlmaWVyc1sncGh5c2ljYWxfdHJhY2snXSk7XHJcbiAgICAgICAgdHJhY2sucGh5c2ljYWwub3ZlcmZsb3cubWF4ID0gYXR0cmlidXRlcy5ib2R5LnZhbHVlO1xyXG4gICAgICAgIHRyYWNrLnBoeXNpY2FsLmxhYmVsID0gXCJTUjUuQ29uZGl0aW9uTW9uaXRvclwiO1xyXG4gICAgICAgIHRyYWNrLnBoeXNpY2FsLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IFNSNUFjdG9yRGF0YSA9IFNoYWRvd3J1bi5TUjVBY3RvckRhdGE7XHJcbmltcG9ydCBNYWdpY0FjdG9yRGF0YSA9IFNoYWRvd3J1bi5NYWdpY0FjdG9yRGF0YTtcclxuaW1wb3J0IE1hdHJpeEFjdG9yRGF0YSA9IFNoYWRvd3J1bi5NYXRyaXhBY3RvckRhdGE7XHJcbmltcG9ydCB7IEhlbHBlcnMgfSBmcm9tICcuLi8uLi8uLi9oZWxwZXJzJztcclxuaW1wb3J0IHsgUGFydHNMaXN0IH0gZnJvbSAnLi4vLi4vLi4vcGFydHMvUGFydHNMaXN0JztcclxuXHJcbmV4cG9ydCBjbGFzcyBJbml0aWF0aXZlUHJlcCB7XHJcbiAgICBzdGF0aWMgcHJlcGFyZUN1cnJlbnRJbml0aWF0aXZlKGRhdGE6IFNSNUFjdG9yRGF0YSkge1xyXG4gICAgICAgIGNvbnN0IHsgaW5pdGlhdGl2ZSB9ID0gZGF0YTtcclxuXHJcbiAgICAgICAgaWYgKGluaXRpYXRpdmUucGVyY2VwdGlvbiA9PT0gJ21hdHJpeCcpIGluaXRpYXRpdmUuY3VycmVudCA9IGluaXRpYXRpdmUubWF0cml4O1xyXG4gICAgICAgIGVsc2UgaWYgKGluaXRpYXRpdmUucGVyY2VwdGlvbiA9PT0gJ2FzdHJhbCcpIGluaXRpYXRpdmUuY3VycmVudCA9IGluaXRpYXRpdmUuYXN0cmFsO1xyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpbml0aWF0aXZlLmN1cnJlbnQgPSBpbml0aWF0aXZlLm1lYXRzcGFjZTtcclxuICAgICAgICAgICAgaW5pdGlhdGl2ZS5wZXJjZXB0aW9uID0gJ21lYXRzcGFjZSc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbml0aWF0aXZlLmN1cnJlbnQuZGljZS52YWx1ZSA9IEhlbHBlcnMuY2FsY1RvdGFsKGluaXRpYXRpdmUuY3VycmVudC5kaWNlKTtcclxuICAgICAgICBpZiAoaW5pdGlhdGl2ZS5lZGdlKSBpbml0aWF0aXZlLmN1cnJlbnQuZGljZS52YWx1ZSA9IDU7XHJcbiAgICAgICAgaW5pdGlhdGl2ZS5jdXJyZW50LmRpY2UudmFsdWUgPSBNYXRoLm1pbig1LCBpbml0aWF0aXZlLmN1cnJlbnQuZGljZS52YWx1ZSk7IC8vIG1heGltdW0gb2YgNWQ2IGZvciBpbml0aWF0aXZlXHJcbiAgICAgICAgaW5pdGlhdGl2ZS5jdXJyZW50LmRpY2UudGV4dCA9IGAke2luaXRpYXRpdmUuY3VycmVudC5kaWNlLnZhbHVlfWQ2YDtcclxuXHJcbiAgICAgICAgaW5pdGlhdGl2ZS5jdXJyZW50LmJhc2UudmFsdWUgPSBIZWxwZXJzLmNhbGNUb3RhbChpbml0aWF0aXZlLmN1cnJlbnQuYmFzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHByZXBhcmVNZWF0c3BhY2VJbml0KGRhdGE6IFNSNUFjdG9yRGF0YSkge1xyXG4gICAgICAgIGNvbnN0IHsgaW5pdGlhdGl2ZSwgYXR0cmlidXRlcywgbW9kaWZpZXJzIH0gPSBkYXRhO1xyXG5cclxuICAgICAgICBpbml0aWF0aXZlLm1lYXRzcGFjZS5iYXNlLmJhc2UgPSBhdHRyaWJ1dGVzLmludHVpdGlvbi52YWx1ZSArIGF0dHJpYnV0ZXMucmVhY3Rpb24udmFsdWU7XHJcbiAgICAgICAgaW5pdGlhdGl2ZS5tZWF0c3BhY2UuYmFzZS5tb2QgPSBQYXJ0c0xpc3QuQWRkVW5pcXVlUGFydChpbml0aWF0aXZlLm1lYXRzcGFjZS5iYXNlLm1vZCwgXCJTUjUuQm9udXNcIiwgTnVtYmVyKG1vZGlmaWVyc1snbWVhdF9pbml0aWF0aXZlJ10pKTtcclxuXHJcbiAgICAgICAgaW5pdGlhdGl2ZS5tZWF0c3BhY2UuZGljZS5iYXNlID0gMTtcclxuICAgICAgICBpbml0aWF0aXZlLm1lYXRzcGFjZS5kaWNlLm1vZCA9IFBhcnRzTGlzdC5BZGRVbmlxdWVQYXJ0KGluaXRpYXRpdmUubWVhdHNwYWNlLmRpY2UubW9kLCBcIlNSNS5Cb251c1wiLCBOdW1iZXIobW9kaWZpZXJzWydtZWF0X2luaXRpYXRpdmVfZGljZSddKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHByZXBhcmVBc3RyYWxJbml0KGRhdGE6IFNSNUFjdG9yRGF0YSAmIE1hZ2ljQWN0b3JEYXRhKSB7XHJcbiAgICAgICAgY29uc3QgeyBpbml0aWF0aXZlLCBhdHRyaWJ1dGVzLCBtb2RpZmllcnMgfSA9IGRhdGE7XHJcblxyXG4gICAgICAgIGluaXRpYXRpdmUuYXN0cmFsLmJhc2UuYmFzZSA9IGF0dHJpYnV0ZXMuaW50dWl0aW9uLnZhbHVlICogMjtcclxuICAgICAgICBpbml0aWF0aXZlLmFzdHJhbC5iYXNlLm1vZCA9IFBhcnRzTGlzdC5BZGRVbmlxdWVQYXJ0KGluaXRpYXRpdmUuYXN0cmFsLmJhc2UubW9kLCBcIlNSNS5Cb251c1wiLCBOdW1iZXIobW9kaWZpZXJzWydhc3RyYWxfaW5pdGlhdGl2ZSddKSk7XHJcblxyXG4gICAgICAgIGluaXRpYXRpdmUuYXN0cmFsLmRpY2UuYmFzZSA9IDI7XHJcbiAgICAgICAgaW5pdGlhdGl2ZS5hc3RyYWwuZGljZS5tb2QgPSBQYXJ0c0xpc3QuQWRkVW5pcXVlUGFydChpbml0aWF0aXZlLmFzdHJhbC5kaWNlLm1vZCwgXCJTUjUuQm9udXNcIiwgTnVtYmVyKG1vZGlmaWVyc1snYXN0cmFsX2luaXRpYXRpdmVfZGljZSddKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHByZXBhcmVNYXRyaXhJbml0KGRhdGE6IFNSNUFjdG9yRGF0YSAmIE1hdHJpeEFjdG9yRGF0YSkge1xyXG4gICAgICAgIGNvbnN0IHsgaW5pdGlhdGl2ZSwgYXR0cmlidXRlcywgbW9kaWZpZXJzLCBtYXRyaXggfSA9IGRhdGE7XHJcbiAgICAgICAgaWYgKG1hdHJpeCkge1xyXG5cclxuICAgICAgICAgICAgaW5pdGlhdGl2ZS5tYXRyaXguYmFzZS5iYXNlID0gYXR0cmlidXRlcy5pbnR1aXRpb24udmFsdWUgKyBkYXRhLm1hdHJpeC5kYXRhX3Byb2Nlc3NpbmcudmFsdWU7XHJcbiAgICAgICAgICAgIGluaXRpYXRpdmUubWF0cml4LmJhc2UubW9kID0gUGFydHNMaXN0LkFkZFVuaXF1ZVBhcnQoaW5pdGlhdGl2ZS5tYXRyaXguYmFzZS5tb2QsIFwiU1I1LkJvbnVzXCIsIE51bWJlcihtb2RpZmllcnNbJ21hdHJpeF9pbml0aWF0aXZlJ10pKTtcclxuXHJcbiAgICAgICAgICAgIGluaXRpYXRpdmUubWF0cml4LmRpY2UuYmFzZSA9IChtYXRyaXguaG90X3NpbSA/IDQgOiAzKTtcclxuICAgICAgICAgICAgaW5pdGlhdGl2ZS5tYXRyaXguZGljZS5tb2QgPSBQYXJ0c0xpc3QuQWRkVW5pcXVlUGFydChpbml0aWF0aXZlLm1hdHJpeC5kaWNlLm1vZCwgXCJTUjUuQm9udXNcIiwgTnVtYmVyKG1vZGlmaWVyc1snbWF0cml4X2luaXRpYXRpdmVfZGljZSddKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBTUjVBY3RvckRhdGEgPSBTaGFkb3dydW4uU1I1QWN0b3JEYXRhO1xyXG5pbXBvcnQgeyBTUjVJdGVtRGF0YVdyYXBwZXIgfSBmcm9tICcuLi8uLi8uLi9pdGVtL1NSNUl0ZW1EYXRhV3JhcHBlcic7XHJcbmltcG9ydCB7IEhlbHBlcnMgfSBmcm9tICcuLi8uLi8uLi9oZWxwZXJzJztcclxuaW1wb3J0IHsgUGFydHNMaXN0IH0gZnJvbSAnLi4vLi4vLi4vcGFydHMvUGFydHNMaXN0JztcclxuaW1wb3J0IEFybW9yQWN0b3JEYXRhID0gU2hhZG93cnVuLkFybW9yQWN0b3JEYXRhO1xyXG5cclxuZXhwb3J0IGNsYXNzIEl0ZW1QcmVwIHtcclxuICAgIC8qKlxyXG4gICAgICogUHJlcGFyZSB0aGUgYXJtb3IgZGF0YSBmb3IgdGhlIEl0ZW1cclxuICAgICAqIC0gd2lsbCBvbmx5IGFsbG93IG9uZSBcIkJhc2VcIiBhcm1vciBpdGVtIHRvIGJlIHVzZWRcclxuICAgICAqIC0gYWxsIFwiYWNjZXNzb3JpZXNcIiB3aWxsIGJlIGFkZGVkIHRvIHRoZSBhcm1vclxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgcHJlcGFyZUFybW9yKGRhdGE6IFNSNUFjdG9yRGF0YSAmIEFybW9yQWN0b3JEYXRhLCBpdGVtczogU1I1SXRlbURhdGFXcmFwcGVyW10pIHtcclxuICAgICAgICBjb25zdCB7IGFybW9yIH0gPSBkYXRhO1xyXG4gICAgICAgIGFybW9yLmJhc2UgPSAwO1xyXG4gICAgICAgIGFybW9yLnZhbHVlID0gMDtcclxuICAgICAgICBhcm1vci5tb2QgPSBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgT2JqZWN0LmtleXMoQ09ORklHLlNSNS5lbGVtZW50VHlwZXMpKSB7XHJcbiAgICAgICAgICAgIGFybW9yW2VsZW1lbnRdID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGFybW9yTW9kUGFydHMgPSBuZXcgUGFydHNMaXN0PG51bWJlcj4oYXJtb3IubW9kKTtcclxuICAgICAgICBjb25zdCBlcXVpcHBlZEFybW9yID0gaXRlbXMuZmlsdGVyKChpdGVtKSA9PiBpdGVtLmNvdWxkSGF2ZUFybW9yKCkgJiYgaXRlbS5pc0VxdWlwcGVkKCkpO1xyXG4gICAgICAgIGVxdWlwcGVkQXJtb3I/LmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgLy8gRG9uJ3Qgc3BhbSBhcm1vciB2YWx1ZXMgd2l0aCBjbG90aGluZyBvciBhcm1vciBsaWtlIGl0ZW1zIHdpdGhvdXQgYW55IGFjdHVhbCBhcm1vci5cclxuICAgICAgICAgICAgaWYgKGl0ZW0uaGFzQXJtb3IoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gQXBwbHkgYXJtb3IgYmFzZSBhbmQgYWNjZXNzb3J5IHZhbHVlcy5cclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLmhhc0FybW9yQWNjZXNzb3J5KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcm1vck1vZFBhcnRzLmFkZFVuaXF1ZVBhcnQoaXRlbS5nZXROYW1lKCksIGl0ZW0uZ2V0QXJtb3JWYWx1ZSgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGFybW9yLmJhc2UgPSBpdGVtLmdldEFybW9yVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgICAgICBhcm1vci5sYWJlbCA9IGl0ZW0uZ2V0TmFtZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBBcHBseSBlbGVtZW50YWwgbW9kaWZpZXJzIG9mIGFsbCB3b3JuIGFybW9yIGFuZCBjbG90aGluZyBTUjUjMTY5LlxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgT2JqZWN0LmtleXMoQ09ORklHLlNSNS5lbGVtZW50VHlwZXMpKSB7XHJcbiAgICAgICAgICAgICAgICBhcm1vcltlbGVtZW50XSArPSBpdGVtLmdldEFybW9yRWxlbWVudHMoKVtlbGVtZW50XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoZGF0YS5tb2RpZmllcnNbJ2FybW9yJ10pIGFybW9yTW9kUGFydHMuYWRkVW5pcXVlUGFydChnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5Cb251cycpLCBkYXRhLm1vZGlmaWVyc1snYXJtb3InXSk7XHJcbiAgICAgICAgLy8gU0VUIEFSTU9SXHJcbiAgICAgICAgYXJtb3IudmFsdWUgPSBIZWxwZXJzLmNhbGNUb3RhbChhcm1vcik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFByZXBhcmUgYWN0b3IgZGF0YSBmb3Igd2FyZSBjaGFuZ2VzXHJcbiAgICAgKiAtIHRoaXMgY2FsY3VsYXRlcyB0aGUgYWN0b3JzIGVzc2VuY2VcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHByZXBhcmVCb2R5d2FyZShkYXRhOiBTUjVBY3RvckRhdGEsIGl0ZW1zOiBTUjVJdGVtRGF0YVdyYXBwZXJbXSkge1xyXG4gICAgICAgIGNvbnN0IHsgYXR0cmlidXRlcyB9ID0gZGF0YTtcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IG5ldyBQYXJ0c0xpc3Q8bnVtYmVyPigpO1xyXG4gICAgICAgIC8vIGFkZCBJdGVtcyBhcyB2YWx1ZXMgdG8gbG93ZXIgdGhlIHRvdGFsIHZhbHVlIG9mIGVzc2VuY2VcclxuICAgICAgICBpdGVtc1xyXG4gICAgICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtLmlzQm9keXdhcmUoKSAmJiBpdGVtLmlzRXF1aXBwZWQoKSlcclxuICAgICAgICAgICAgLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLmdldEVzc2VuY2VMb3NzKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJ0cy5hZGRVbmlxdWVQYXJ0KGl0ZW0uZ2V0TmFtZSgpLCAtTnVtYmVyKGl0ZW0uZ2V0RXNzZW5jZUxvc3MoKSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAvLyBhZGQgdGhlIGJvbnVzIGZyb20gdGhlIG1pc2MgdGFiIGlmIGFwcGxpZWRcclxuICAgICAgICBjb25zdCBlc3NlbmNlTW9kID0gZGF0YS5tb2RpZmllcnNbJ2Vzc2VuY2UnXTtcclxuICAgICAgICBpZiAoZXNzZW5jZU1vZCAmJiAhTnVtYmVyLmlzTmFOKGVzc2VuY2VNb2QpKSB7XHJcbiAgICAgICAgICAgIHBhcnRzLmFkZFVuaXF1ZVBhcnQoJ1NSNS5Cb251cycsIE51bWJlcihlc3NlbmNlTW9kKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhdHRyaWJ1dGVzLmVzc2VuY2UuYmFzZSA9IDY7XHJcbiAgICAgICAgYXR0cmlidXRlcy5lc3NlbmNlLm1vZCA9IHBhcnRzLmxpc3Q7XHJcbiAgICAgICAgYXR0cmlidXRlcy5lc3NlbmNlLnZhbHVlID0gSGVscGVycy5jYWxjVG90YWwoYXR0cmlidXRlcy5lc3NlbmNlKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgU1I1QWN0b3JEYXRhID0gU2hhZG93cnVuLlNSNUFjdG9yRGF0YTtcclxuaW1wb3J0IHsgUGFydHNMaXN0IH0gZnJvbSAnLi4vLi4vLi4vcGFydHMvUGFydHNMaXN0JztcclxuaW1wb3J0IHsgSGVscGVycyB9IGZyb20gJy4uLy4uLy4uL2hlbHBlcnMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIExpbWl0c1ByZXAge1xyXG4gICAgc3RhdGljIHByZXBhcmVMaW1pdHMoZGF0YTogU1I1QWN0b3JEYXRhKSB7XHJcbiAgICAgICAgY29uc3QgeyBsaW1pdHMsIG1vZGlmaWVycyB9ID0gZGF0YTtcclxuXHJcbiAgICAgICAgLy8gU0VUVVAgTElNSVRTXHJcbiAgICAgICAgbGltaXRzLnBoeXNpY2FsLm1vZCA9IFBhcnRzTGlzdC5BZGRVbmlxdWVQYXJ0KGxpbWl0cy5waHlzaWNhbC5tb2QsICdTUjUuQm9udXMnLCBOdW1iZXIobW9kaWZpZXJzWydwaHlzaWNhbF9saW1pdCddKSk7XHJcbiAgICAgICAgbGltaXRzLm1lbnRhbC5tb2QgPSBQYXJ0c0xpc3QuQWRkVW5pcXVlUGFydChsaW1pdHMubWVudGFsLm1vZCwgJ1NSNS5Cb251cycsIE51bWJlcihtb2RpZmllcnNbJ21lbnRhbF9saW1pdCddKSk7XHJcbiAgICAgICAgbGltaXRzLnNvY2lhbC5tb2QgPSBQYXJ0c0xpc3QuQWRkVW5pcXVlUGFydChsaW1pdHMuc29jaWFsLm1vZCwgXCJTUjUuQm9udXNcIiwgTnVtYmVyKG1vZGlmaWVyc1snc29jaWFsX2xpbWl0J10pKTtcclxuXHJcbiAgICAgICAgLy8gbGltaXQgbGFiZWxzXHJcbiAgICAgICAgZm9yIChsZXQgW2xpbWl0S2V5LCBsaW1pdFZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhsaW1pdHMpKSB7XHJcbiAgICAgICAgICAgIEhlbHBlcnMuY2FsY1RvdGFsKGxpbWl0VmFsdWUpO1xyXG4gICAgICAgICAgICBsaW1pdFZhbHVlLmxhYmVsID0gQ09ORklHLlNSNS5saW1pdHNbbGltaXRLZXldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcHJlcGFyZUxpbWl0QmFzZUZyb21BdHRyaWJ1dGVzKGRhdGE6IFNSNUFjdG9yRGF0YSkge1xyXG5cclxuICAgICAgICBjb25zdCB7IGxpbWl0cywgYXR0cmlidXRlcyB9ID0gZGF0YTtcclxuXHJcbiAgICAgICAgbGltaXRzLnBoeXNpY2FsLmJhc2UgPSBNYXRoLmNlaWwoKDIgKiBhdHRyaWJ1dGVzLnN0cmVuZ3RoLnZhbHVlICsgYXR0cmlidXRlcy5ib2R5LnZhbHVlICsgYXR0cmlidXRlcy5yZWFjdGlvbi52YWx1ZSkgLyAzKTtcclxuICAgICAgICBsaW1pdHMubWVudGFsLmJhc2UgPSBNYXRoLmNlaWwoKDIgKiBhdHRyaWJ1dGVzLmxvZ2ljLnZhbHVlICsgYXR0cmlidXRlcy5pbnR1aXRpb24udmFsdWUgKyBhdHRyaWJ1dGVzLndpbGxwb3dlci52YWx1ZSkgLyAzKTtcclxuICAgICAgICBsaW1pdHMuc29jaWFsLmJhc2UgPSBNYXRoLmNlaWwoKDIgKiBhdHRyaWJ1dGVzLmNoYXJpc21hLnZhbHVlICsgYXR0cmlidXRlcy53aWxscG93ZXIudmFsdWUgKyBhdHRyaWJ1dGVzLmVzc2VuY2UudmFsdWUpIC8gMyk7XHJcblxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBTUjVBY3RvckRhdGEgPSBTaGFkb3dydW4uU1I1QWN0b3JEYXRhO1xyXG5pbXBvcnQgTWF0cml4QWN0b3JEYXRhID0gU2hhZG93cnVuLk1hdHJpeEFjdG9yRGF0YTtcclxuaW1wb3J0IHsgSGVscGVycyB9IGZyb20gJy4uLy4uLy4uL2hlbHBlcnMnO1xyXG5pbXBvcnQgeyBTUjVJdGVtRGF0YVdyYXBwZXIgfSBmcm9tICcuLi8uLi8uLi9pdGVtL1NSNUl0ZW1EYXRhV3JhcHBlcic7XHJcbmltcG9ydCB7IFBhcnRzTGlzdCB9IGZyb20gJy4uLy4uLy4uL3BhcnRzL1BhcnRzTGlzdCc7XHJcblxyXG5leHBvcnQgY2xhc3MgTWF0cml4UHJlcCB7XHJcbiAgICAvKipcclxuICAgICAqIFByZXBhcmUgTWF0cml4IGRhdGEgb24gdGhlIGFjdG9yXHJcbiAgICAgKiAtIGlmIGFuIGl0ZW0gaXMgZXF1aXBwZWQsIGl0IHdpbGwgdXNlIHRoYXQgZGF0YVxyXG4gICAgICogLSBpZiBpdCBpc24ndCBhbmQgcGxheWVyIGlzIHRlY2hub21hbmNlciwgaXQgd2lsbCB1c2UgdGhhdCBkYXRhXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBwcmVwYXJlTWF0cml4KGFjdG9yRGF0YTogU1I1QWN0b3JEYXRhICYgTWF0cml4QWN0b3JEYXRhLCBpdGVtczogU1I1SXRlbURhdGFXcmFwcGVyW10pIHtcclxuICAgICAgICBjb25zdCB7IG1hdHJpeCwgYXR0cmlidXRlcyB9ID0gYWN0b3JEYXRhO1xyXG5cclxuICAgICAgICBjb25zdCBNYXRyaXhMaXN0ID0gWydmaXJld2FsbCcsICdzbGVhemUnLCAnZGF0YV9wcm9jZXNzaW5nJywgJ2F0dGFjayddO1xyXG5cclxuICAgICAgICAvLyBjbGVhciBtYXRyaXggZGF0YSB0byBkZWZhdWx0c1xyXG4gICAgICAgIE1hdHJpeExpc3QuZm9yRWFjaCgoa2V5KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbmV3IFBhcnRzTGlzdChtYXRyaXhba2V5XS5tb2QpO1xyXG4gICAgICAgICAgICBwYXJ0cy5hZGRVbmlxdWVQYXJ0KCdTUjUuVGVtcG9yYXJ5JywgbWF0cml4W2tleV0udGVtcCk7XHJcbiAgICAgICAgICAgIC8vIFRPRE8gTEVHQUNZIGZyb20gd2hlbiB0aGUgc2hlZXQgdXNlZCAnbW9kLlRlbXBvcmFyeSdcclxuICAgICAgICAgICAgcGFydHMucmVtb3ZlUGFydCgnVGVtcG9yYXJ5Jyk7XHJcbiAgICAgICAgICAgIG1hdHJpeFtrZXldLm1vZCA9IHBhcnRzLmxpc3Q7XHJcbiAgICAgICAgICAgIG1hdHJpeFtrZXldLnZhbHVlID0gcGFydHMudG90YWw7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbWF0cml4LmNvbmRpdGlvbl9tb25pdG9yLm1heCA9IDA7XHJcbiAgICAgICAgbWF0cml4LnJhdGluZyA9IDA7XHJcbiAgICAgICAgbWF0cml4Lm5hbWUgPSAnJztcclxuICAgICAgICBtYXRyaXguZGV2aWNlID0gJyc7XHJcbiAgICAgICAgbWF0cml4LmNvbmRpdGlvbl9tb25pdG9yLmxhYmVsID0gJ1NSNS5Db25kaXRpb25Nb25pdG9yJztcclxuXHJcbiAgICAgICAgLy8gZ2V0IHRoZSBmaXJzdCBlcXVpcHBlZCBkZXZpY2UsIHdlIGRvbid0IGNhcmUgaWYgdGhleSBoYXZlIG1vcmUgZXF1aXBwZWQgLS0gaXQgc2hvdWxkbid0IGhhcHBlblxyXG4gICAgICAgIGNvbnN0IGRldmljZSA9IGl0ZW1zLmZpbmQoKGl0ZW0pID0+IGl0ZW0uaXNFcXVpcHBlZCgpICYmIGl0ZW0uaXNEZXZpY2UoKSk7XHJcblxyXG4gICAgICAgIGlmIChkZXZpY2UpIHtcclxuICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uTW9uaXRvciA9IGRldmljZS5nZXRDb25kaXRpb25Nb25pdG9yKCk7XHJcbiAgICAgICAgICAgIG1hdHJpeC5kZXZpY2UgPSBkZXZpY2UuZ2V0SWQoKTtcclxuICAgICAgICAgICAgbWF0cml4LmNvbmRpdGlvbl9tb25pdG9yLm1heCA9IGNvbmRpdGlvbk1vbml0b3IubWF4O1xyXG4gICAgICAgICAgICBtYXRyaXguY29uZGl0aW9uX21vbml0b3IudmFsdWUgPSBjb25kaXRpb25Nb25pdG9yLnZhbHVlO1xyXG4gICAgICAgICAgICBtYXRyaXgucmF0aW5nID0gZGV2aWNlLmdldFJhdGluZygpO1xyXG4gICAgICAgICAgICBtYXRyaXguaXNfY3liZXJkZWNrID0gZGV2aWNlLmlzQ3liZXJkZWNrKCk7XHJcbiAgICAgICAgICAgIG1hdHJpeC5uYW1lID0gZGV2aWNlLmdldE5hbWUoKTtcclxuICAgICAgICAgICAgbWF0cml4Lml0ZW0gPSBkZXZpY2UuZ2V0RGF0YSgpO1xyXG4gICAgICAgICAgICBjb25zdCBkZXZpY2VBdHRzID0gZGV2aWNlLmdldEFTREYoKTtcclxuICAgICAgICAgICAgaWYgKGRldmljZUF0dHMpIHtcclxuICAgICAgICAgICAgICAgIC8vIHNldHVwIHRoZSBhY3R1YWwgbWF0cml4IGF0dHJpYnV0ZXMgZm9yIHRoZSBhY3RvclxyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGV2aWNlQXR0cykpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgJiYgbWF0cml4W2tleV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4W2tleV0uYmFzZSA9IHZhbHVlLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRyaXhba2V5XS5kZXZpY2VfYXR0ID0gdmFsdWUuZGV2aWNlX2F0dDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IC8vIGlmIHdlIGRvbid0IGhhdmUgYSBkZXZpY2UsIHVzZSBsaXZpbmcgcGVyc29uYVxyXG4gICAgICAgIGVsc2UgaWYgKGFjdG9yRGF0YS5zcGVjaWFsID09PSAncmVzb25hbmNlJykge1xyXG4gICAgICAgICAgICBtYXRyaXguZmlyZXdhbGwuYmFzZSA9IEhlbHBlcnMuY2FsY1RvdGFsKGF0dHJpYnV0ZXMud2lsbHBvd2VyKTtcclxuICAgICAgICAgICAgbWF0cml4LmRhdGFfcHJvY2Vzc2luZy5iYXNlID0gSGVscGVycy5jYWxjVG90YWwoYXR0cmlidXRlcy5sb2dpYyk7XHJcbiAgICAgICAgICAgIG1hdHJpeC5yYXRpbmcgPSBIZWxwZXJzLmNhbGNUb3RhbChhdHRyaWJ1dGVzLnJlc29uYW5jZSk7XHJcbiAgICAgICAgICAgIG1hdHJpeC5hdHRhY2suYmFzZSA9IEhlbHBlcnMuY2FsY1RvdGFsKGF0dHJpYnV0ZXMuY2hhcmlzbWEpO1xyXG4gICAgICAgICAgICBtYXRyaXguc2xlYXplLmJhc2UgPSBIZWxwZXJzLmNhbGNUb3RhbChhdHRyaWJ1dGVzLmludHVpdGlvbik7XHJcbiAgICAgICAgICAgIG1hdHJpeC5uYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuTGl2aW5nUGVyc29uYScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gc2V0IG1hdHJpeCBjb25kaXRpb24gbW9uaXRvciB0byBtYXggaWYgZ3JlYXRlciB0aGFuXHJcbiAgICAgICAgaWYgKG1hdHJpeC5jb25kaXRpb25fbW9uaXRvci52YWx1ZSA+IG1hdHJpeC5jb25kaXRpb25fbW9uaXRvci5tYXgpIHtcclxuICAgICAgICAgICAgbWF0cml4LmNvbmRpdGlvbl9tb25pdG9yLnZhbHVlID0gbWF0cml4LmNvbmRpdGlvbl9tb25pdG9yLm1heDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgTWF0cml4IEF0dHJpYnV0ZXMgdG8gTGltaXRzIGFuZCBBdHRyaWJ1dGVzXHJcbiAgICAgKiBAcGFyYW0gZGF0YVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgcHJlcGFyZU1hdHJpeFRvTGltaXRzQW5kQXR0cmlidXRlcyhkYXRhOiBTUjVBY3RvckRhdGEgJiBNYXRyaXhBY3RvckRhdGEpIHtcclxuICAgICAgICBjb25zdCB7IG1hdHJpeCwgYXR0cmlidXRlcywgbGltaXRzIH0gPSBkYXRhO1xyXG4gICAgICAgIGNvbnN0IE1hdHJpeExpc3QgPSBbJ2ZpcmV3YWxsJywgJ3NsZWF6ZScsICdkYXRhX3Byb2Nlc3NpbmcnLCAnYXR0YWNrJ107XHJcblxyXG4gICAgICAgIC8vIGFkZCBtYXRyaXggYXR0cmlidXRlcyB0byBib3RoIGxpbWl0cyBhbmQgYXR0cmlidXRlcyBhcyBoaWRkZW4gZW50cmllc1xyXG4gICAgICAgIE1hdHJpeExpc3QuZm9yRWFjaCgoa2V5KSA9PiB7XHJcbiAgICAgICAgICAgIEhlbHBlcnMuY2FsY1RvdGFsKG1hdHJpeFtrZXldKTtcclxuICAgICAgICAgICAgaWYgKG1hdHJpeFtrZXldKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsYWJlbCA9IENPTkZJRy5TUjUubWF0cml4QXR0cmlidXRlc1trZXldO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyB2YWx1ZSwgYmFzZSwgbW9kIH0gPSBtYXRyaXhba2V5XTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhpZGRlbiA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgbGltaXRzW2tleV0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZSxcclxuICAgICAgICAgICAgICAgICAgICBtb2QsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgaGlkZGVuLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXNba2V5XSA9IHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBiYXNlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vZCxcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbCxcclxuICAgICAgICAgICAgICAgICAgICBoaWRkZW4sXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcmVwYXJlIHRoZSBtZW50YWwgYXR0cmlidXRlcyBmb3IgYSBzaGVldCB0aGF0IGp1c3QgaGFzIGEgZGV2aWNlIHJhdGluZ1xyXG4gICAgICogQHBhcmFtIGRhdGFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHByZXBhcmVBdHRyaWJ1dGVzRm9yRGV2aWNlKGRhdGE6IFNSNUFjdG9yRGF0YSAmIE1hdHJpeEFjdG9yRGF0YSkge1xyXG4gICAgICAgIGNvbnN0IHsgbWF0cml4LCBhdHRyaWJ1dGVzIH0gPSBkYXRhO1xyXG4gICAgICAgIGNvbnN0IHJhdGluZyA9IG1hdHJpeC5yYXRpbmcgfHwgMDtcclxuICAgICAgICBjb25zdCBtZW50YWxBdHRyaWJ1dGVzID0gWydpbnR1aXRpb24nLCAnbG9naWMnLCAnY2hhcmlzbWEnLCAnd2lsbHBvd2VyJ107XHJcblxyXG4gICAgICAgIG1lbnRhbEF0dHJpYnV0ZXMuZm9yRWFjaCgoYXR0TGFiZWwpID0+IHtcclxuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZXNbYXR0TGFiZWxdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXNbYXR0TGFiZWxdLmJhc2UgPSByYXRpbmc7XHJcbiAgICAgICAgICAgICAgICBIZWxwZXJzLmNhbGNUb3RhbChhdHRyaWJ1dGVzW2F0dExhYmVsXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBiYXNpYyA9IFsnZmlyZXdhbGwnLCAnZGF0YV9wcm9jZXNzaW5nJ107XHJcbiAgICAgICAgYmFzaWMuZm9yRWFjaCgoYXR0SWQpID0+IHtcclxuICAgICAgICAgICAgbWF0cml4W2F0dElkXS5iYXNlID0gcmF0aW5nO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFsuLi5iYXNpYywgJ3NsZWF6ZScsICdhdHRhY2snXS5mb3JFYWNoKChhdHRJZCkgPT4ge1xyXG4gICAgICAgICAgICBIZWxwZXJzLmNhbGNUb3RhbChtYXRyaXhbYXR0SWRdKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgU1I1QWN0b3JEYXRhID0gU2hhZG93cnVuLlNSNUFjdG9yRGF0YTtcclxuXHJcbmV4cG9ydCBjbGFzcyBNb2RpZmllcnNQcmVwIHtcclxuICAgIC8qKlxyXG4gICAgICogUHJlcGFyZSB0aGUgbW9kaWZpZXJzIHRoYXQgYXJlIGRpc3BsYXllZCBpbiB0aGUgTWlzYy4gdGFiXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBwcmVwYXJlTW9kaWZpZXJzKGRhdGE6IFNSNUFjdG9yRGF0YSkge1xyXG4gICAgICAgIGlmICghZGF0YS5tb2RpZmllcnMpIGRhdGEubW9kaWZpZXJzID0ge307XHJcbiAgICAgICAgY29uc3QgbW9kaWZpZXJzID0ge307XHJcbiAgICAgICAgbGV0IG1pc2NUYWJNb2RpZmllcnMgPSBbXHJcbiAgICAgICAgICAgICdzb2FrJyxcclxuICAgICAgICAgICAgJ2RyYWluJyxcclxuICAgICAgICAgICAgJ2FybW9yJyxcclxuICAgICAgICAgICAgJ3BoeXNpY2FsX2xpbWl0JyxcclxuICAgICAgICAgICAgJ3NvY2lhbF9saW1pdCcsXHJcbiAgICAgICAgICAgICdtZW50YWxfbGltaXQnLFxyXG4gICAgICAgICAgICAnc3R1bl90cmFjaycsXHJcbiAgICAgICAgICAgICdwaHlzaWNhbF90cmFjaycsXHJcbiAgICAgICAgICAgICdtZWF0X2luaXRpYXRpdmUnLFxyXG4gICAgICAgICAgICAnbWVhdF9pbml0aWF0aXZlX2RpY2UnLFxyXG4gICAgICAgICAgICAnYXN0cmFsX2luaXRpYXRpdmUnLFxyXG4gICAgICAgICAgICAnYXN0cmFsX2luaXRpYXRpdmVfZGljZScsXHJcbiAgICAgICAgICAgICdtYXRyaXhfaW5pdGlhdGl2ZScsXHJcbiAgICAgICAgICAgICdtYXRyaXhfaW5pdGlhdGl2ZV9kaWNlJyxcclxuICAgICAgICAgICAgJ2NvbXBvc3VyZScsXHJcbiAgICAgICAgICAgICdsaWZ0X2NhcnJ5JyxcclxuICAgICAgICAgICAgJ2p1ZGdlX2ludGVudGlvbnMnLFxyXG4gICAgICAgICAgICAnbWVtb3J5JyxcclxuICAgICAgICAgICAgJ3dhbGsnLFxyXG4gICAgICAgICAgICAncnVuJyxcclxuICAgICAgICAgICAgJ2RlZmVuc2UnLFxyXG4gICAgICAgICAgICAnd291bmRfdG9sZXJhbmNlJyxcclxuICAgICAgICAgICAgJ2Vzc2VuY2UnLFxyXG4gICAgICAgICAgICAnZmFkZScsXHJcbiAgICAgICAgXTtcclxuICAgICAgICBtaXNjVGFiTW9kaWZpZXJzLnNvcnQoKTtcclxuICAgICAgICAvLyBmb3JjZSBnbG9iYWwgdG8gdGhlIHRvcFxyXG4gICAgICAgIG1pc2NUYWJNb2RpZmllcnMudW5zaGlmdCgnZ2xvYmFsJyk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGl0ZW0gb2YgbWlzY1RhYk1vZGlmaWVycykge1xyXG4gICAgICAgICAgICBtb2RpZmllcnNbaXRlbV0gPSBOdW1iZXIoZGF0YS5tb2RpZmllcnNbaXRlbV0pIHx8IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkYXRhLm1vZGlmaWVycyA9IG1vZGlmaWVycztcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY2xlYXJBdHRyaWJ1dGVNb2RzKGRhdGE6IFNSNUFjdG9yRGF0YSkge1xyXG4gICAgICAgIGNvbnN0IHsgYXR0cmlidXRlcyB9ID0gZGF0YTtcclxuICAgICAgICBmb3IgKGNvbnN0IFssIGF0dHJpYnV0ZV0gb2YgT2JqZWN0LmVudHJpZXMoYXR0cmlidXRlcykpIHtcclxuICAgICAgICAgICAgYXR0cmlidXRlLm1vZCA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgU1I1QWN0b3JEYXRhID0gU2hhZG93cnVuLlNSNUFjdG9yRGF0YTtcclxuaW1wb3J0IE1vdmVtZW50QWN0b3JEYXRhID0gU2hhZG93cnVuLk1vdmVtZW50QWN0b3JEYXRhO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1vdmVtZW50UHJlcCB7XHJcbiAgICBzdGF0aWMgcHJlcGFyZU1vdmVtZW50KGRhdGE6IFNSNUFjdG9yRGF0YSAmIE1vdmVtZW50QWN0b3JEYXRhKSB7XHJcbiAgICAgICAgY29uc3QgeyBhdHRyaWJ1dGVzLCBtb2RpZmllcnMgfSA9IGRhdGE7XHJcbiAgICAgICAgY29uc3QgbW92ZW1lbnQgPSBkYXRhLm1vdmVtZW50O1xyXG4gICAgICAgIC8vIGRlZmF1bHQgbW92ZW1lbnQ6IFdBTEsgPSBBR0kgKiAyLCBSVU4gPSBBR0kgKiA0XHJcbiAgICAgICAgbW92ZW1lbnQud2Fsay52YWx1ZSA9IGF0dHJpYnV0ZXMuYWdpbGl0eS52YWx1ZSAqICgyICsgTnVtYmVyKG1vZGlmaWVyc1snd2FsayddKSk7XHJcbiAgICAgICAgbW92ZW1lbnQucnVuLnZhbHVlID0gYXR0cmlidXRlcy5hZ2lsaXR5LnZhbHVlICogKDQgKyBOdW1iZXIobW9kaWZpZXJzWydydW4nXSkpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBDaGFyYWN0ZXJBY3RvckRhdGEgPSBTaGFkb3dydW4uQ2hhcmFjdGVyQWN0b3JEYXRhO1xyXG5pbXBvcnQge0RhdGFUZW1wbGF0ZXN9IGZyb20gXCIuLi8uLi8uLi9kYXRhVGVtcGxhdGVzXCI7XHJcbmltcG9ydCB7SGVscGVyc30gZnJvbSBcIi4uLy4uLy4uL2hlbHBlcnNcIjtcclxuaW1wb3J0IHtNRVRBVFlQRU1PRElGSUVSfSBmcm9tIFwiLi4vLi4vLi4vY29uc3RhbnRzXCI7XHJcbmltcG9ydCB7UGFydHNMaXN0fSBmcm9tIFwiLi4vLi4vLi4vcGFydHMvUGFydHNMaXN0XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTlBDUHJlcCB7XHJcbiAgICBzdGF0aWMgcHJlcGFyZU5QQ0RhdGEoZGF0YTogQ2hhcmFjdGVyQWN0b3JEYXRhKSB7XHJcbiAgICAgICAgLy8gQXBwbHkgdG8gTlBDIGFuZCBub25lIE5QQyB0byByZW1vdmUgbGluZ2VyaW5nIG1vZGlmaWVycyBhZnRlciBhY3RvciBoYXMgYmVlbiByZW1vdmVkIGl0J3MgbnBjIHN0YXR1cy5cclxuICAgICAgICBOUENQcmVwLmFwcGx5TWV0YXR5cGVNb2RpZmllcnMoZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFJlcGxhY2UgY3VycmVudCBtZXRhdHlwZSBtb2RpZmllcnMgd2l0aCwgZXZlbiBpZiBub3RoaW5nIGhhcyBjaGFuZ2VkLlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFwcGx5TWV0YXR5cGVNb2RpZmllcnMoZGF0YTogQ2hhcmFjdGVyQWN0b3JEYXRhKSB7XHJcbiAgICAgICAgY29uc3Qge21ldGF0eXBlfSA9IGRhdGE7XHJcbiAgICAgICAgbGV0IG1vZGlmaWVycyA9IERhdGFUZW1wbGF0ZXMuZ3J1bnQubWV0YXR5cGVfbW9kaWZpZXJzW21ldGF0eXBlXTtcclxuICAgICAgICBtb2RpZmllcnMgPSBtb2RpZmllcnMgPyBtb2RpZmllcnMgOiB7fTtcclxuXHJcbiAgICAgICAgY29uc3Qge2F0dHJpYnV0ZXN9ID0gZGF0YTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBbYXR0SWQsIGF0dHJpYnV0ZV0gb2YgT2JqZWN0LmVudHJpZXMoYXR0cmlidXRlcykpIHtcclxuICAgICAgICAgICAgLy8gb2xkLXN0eWxlIG9iamVjdCBtb2QgdHJhbnNmb3JtYXRpb24gaXMgaGFwcGVuaW5nIGluIEF0dHJpYnV0ZVByZXAgYW5kIGlzIG5lZWRlZCBoZXJlLiBPcmRlciBpcyBpbXBvcnRhbnQuXHJcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShhdHRyaWJ1dGUubW9kKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FjdG9yIGRhdGEgY29udGFpbnMgd3JvbmcgZGF0YSB0eXBlIGZvciBhdHRyaWJ1dGUubW9kJywgYXR0cmlidXRlLCAhQXJyYXkuaXNBcnJheShhdHRyaWJ1dGUubW9kKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RpZnlCeSA9IG1vZGlmaWVycz8uYXR0cmlidXRlcz8uW2F0dElkXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbmV3IFBhcnRzTGlzdChhdHRyaWJ1dGUubW9kKTtcclxuICAgICAgICAgICAgICAgIHBhcnRzLnJlbW92ZVBhcnQoTUVUQVRZUEVNT0RJRklFUik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuaXNfbnBjICYmIG1vZGlmeUJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFydHMuYWRkUGFydChNRVRBVFlQRU1PRElGSUVSLCBtb2RpZnlCeSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlLm1vZCA9IHBhcnRzLmxpc3Q7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRG9uJ3QgbW9kaWZ5IGF0dHJpYnV0ZSBiZWxvdyBvbmUuXHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBVc2UgYSBTUjUuVmFsdWVzLkF0dHJpYnV0ZSBjYWxjdWxhdGlvbiB0byBhdm9pZCBkdXBsaWNhdGlvbi5cclxuICAgICAgICAgICAgICAgIEhlbHBlcnMuY2FsY1RvdGFsKGF0dHJpYnV0ZSwge21pbjogMX0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBBZGROUENNZXRhdHlwZUF0dHJpYnV0ZU1vZGlmaWVyKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmFtZTogTUVUQVRZUEVNT0RJRklFUixcclxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlIGFzIG51bWJlclxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCBTUjVBY3RvckRhdGEgPSBTaGFkb3dydW4uU1I1QWN0b3JEYXRhO1xyXG5pbXBvcnQgeyBIZWxwZXJzIH0gZnJvbSAnLi4vLi4vLi4vaGVscGVycyc7XHJcbmltcG9ydCB7IFBhcnRzTGlzdCB9IGZyb20gJy4uLy4uLy4uL3BhcnRzL1BhcnRzTGlzdCc7XHJcbmltcG9ydCBTa2lsbEZpZWxkID0gU2hhZG93cnVuLlNraWxsRmllbGQ7XHJcblxyXG5leHBvcnQgY2xhc3MgU2tpbGxzUHJlcCB7XHJcbiAgICAvKipcclxuICAgICAqIFByZXBhcmUgYWN0b3IgZGF0YSBmb3Igc2tpbGxzXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBwcmVwYXJlU2tpbGxzKGRhdGE6IFNSNUFjdG9yRGF0YSkge1xyXG4gICAgICAgIGNvbnN0IHsgbGFuZ3VhZ2UsIGFjdGl2ZSwga25vd2xlZGdlIH0gPSBkYXRhLnNraWxscztcclxuICAgICAgICBpZiAobGFuZ3VhZ2UpIHtcclxuICAgICAgICAgICAgaWYgKCFsYW5ndWFnZS52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2UudmFsdWUgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gbGFuZ3VhZ2UudmFsdWUgaXMgZGVmaW5lZCBhcyBhbiBhcnJheSBpbiB0ZW1wbGF0ZS5qc29uIFxyXG4gICAgICAgICAgICAvLyBIb3dldmVyIHdoYXQgd2UgYWN0dWFsbHkgd2FudCBoZXJlIGlzIGFuIG9iamVjdCwgc28gd2Ugc2V0IGl0IG1hbnVhbGx5XHJcbiAgICAgICAgICAgIC8vIFRoZSBzYW1lIGlzIGRvbmUgZm9yIHRoZSBvdGhlciBrbm93bGVkZ2Ugc2tpbGxncm91cHMgJ3ZhbHVlJyBwcm9wZXJ0aWVzIGJlbG93XHJcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGxhbmd1YWdlLnZhbHVlKSAmJiBsYW5ndWFnZS52YWx1ZS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2UudmFsdWUgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGFuZ3VhZ2UuYXR0cmlidXRlID0gJ2ludHVpdGlvbic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBmdW5jdGlvbiB0aGF0IHdpbGwgc2V0IHRoZSB0b3RhbCBvZiBhIHNraWxsIGNvcnJlY3RseVxyXG4gICAgICAgIGNvbnN0IHByZXBhcmVTa2lsbCA9IChza2lsbCkgPT4ge1xyXG4gICAgICAgICAgICBza2lsbC5tb2QgPSBbXTtcclxuICAgICAgICAgICAgaWYgKCFza2lsbC5iYXNlKSBza2lsbC5iYXNlID0gMDtcclxuICAgICAgICAgICAgaWYgKHNraWxsLmJvbnVzPy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGJvbnVzIG9mIHNraWxsLmJvbnVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2tpbGwubW9kID0gUGFydHNMaXN0LkFkZFVuaXF1ZVBhcnQoc2tpbGwubW9kLCBib251cy5rZXksIE51bWJlcihib251cy52YWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNraWxsLnZhbHVlID0gSGVscGVycy5jYWxjVG90YWwoc2tpbGwpO1xyXG5cclxuICAgICAgICAgICAgLy8gT2xkZXIgQ2h1bW1lciBpbXBvcnRzIG1pc3Mgc29tZSBmaWVsZHMuXHJcbiAgICAgICAgICAgIF9tZXJnZVdpdGhNaXNzaW5nU2tpbGxGaWVsZHMoc2tpbGwpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIHNldHVwIGFjdGl2ZSBza2lsbHNcclxuICAgICAgICBmb3IgKGNvbnN0IHNraWxsIG9mIE9iamVjdC52YWx1ZXMoYWN0aXZlKSkge1xyXG4gICAgICAgICAgICBpZiAoIXNraWxsLmhpZGRlbikge1xyXG4gICAgICAgICAgICAgICAgcHJlcGFyZVNraWxsKHNraWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICBcclxuICAgICAgICBjb25zdCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMoZGF0YS5za2lsbHMubGFuZ3VhZ2UudmFsdWUpO1xyXG4gICAgICAgIC8vIHJlbW92ZSBlbnRyaWVzIHdoaWNoIGFyZSBkZWxldGVkIFRPRE8gZmlndXJlIG91dCBob3cgdG8gZGVsZXRlIHRoZXNlIGZyb20gdGhlIGRhdGFcclxuICAgICAgICBlbnRyaWVzLmZvckVhY2goKFtrZXksIHZhbF06IFtzdHJpbmcsIHsgX2RlbGV0ZT86IGJvb2xlYW4gfV0pID0+IHZhbC5fZGVsZXRlICYmIGRlbGV0ZSBkYXRhLnNraWxscy5sYW5ndWFnZS52YWx1ZVtrZXldKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgc2tpbGwgb2YgT2JqZWN0LnZhbHVlcyhsYW5ndWFnZS52YWx1ZSkpIHtcclxuICAgICAgICAgICAgcHJlcGFyZVNraWxsKHNraWxsKTtcclxuICAgICAgICAgICAgc2tpbGwuYXR0cmlidXRlID0gJ2ludHVpdGlvbic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBzZXR1cCBrbm93bGVkZ2Ugc2tpbGxzXHJcbiAgICAgICAgZm9yIChsZXQgWywgZ3JvdXBdIG9mIE9iamVjdC5lbnRyaWVzKGtub3dsZWRnZSkpIHtcclxuICAgICAgICAgICAgY29uc3QgZW50cmllcyA9IE9iamVjdC5lbnRyaWVzKGdyb3VwLnZhbHVlKTtcclxuICAgICAgICAgICAgLy8gcmVtb3ZlIGVudHJpZXMgd2hpY2ggYXJlIGRlbGV0ZWQgVE9ETyBmaWd1cmUgb3V0IGhvdyB0byBkZWxldGUgdGhlc2UgZnJvbSB0aGUgZGF0YVxyXG4gICAgICAgICAgICBncm91cC52YWx1ZSA9IGVudHJpZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKFssIHZhbF0pID0+ICF2YWwuX2RlbGV0ZSlcclxuICAgICAgICAgICAgICAgIC5yZWR1Y2UoKGFjYywgW2lkLCBza2lsbF0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBwcmVwYXJlU2tpbGwoc2tpbGwpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIGF0dHJpYnV0ZSBvbiB0aGUgc2tpbGxcclxuICAgICAgICAgICAgICAgICAgICBza2lsbC5hdHRyaWJ1dGUgPSBncm91cC5hdHRyaWJ1dGU7XHJcbiAgICAgICAgICAgICAgICAgICAgYWNjW2lkXSA9IHNraWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XHJcbiAgICAgICAgICAgICAgICB9LCB7fSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBza2lsbCBsYWJlbHNcclxuICAgICAgICBmb3IgKGxldCBbc2tpbGxLZXksIHNraWxsVmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGFjdGl2ZSkpIHtcclxuICAgICAgICAgICAgc2tpbGxWYWx1ZS5sYWJlbCA9IENPTkZJRy5TUjUuYWN0aXZlU2tpbGxzW3NraWxsS2V5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKiBKdXN0IGEgcXVpY2ssIHNlbWkgaGFja3kgd2F5IG9mIHNldHRpbmcgdXAgYSBjb21wbGV0ZSBza2lsbCBkYXRhIHN0cnVjdHVyZSwgd2hpbGUgc3RpbGwgYWxsb3dpbmdcclxuICogIGZpZWxkcyB0byBiZSBhZGRlZCBhdCBuZWVkLlxyXG4gKlxyXG4gKiBAcGFyYW0gZ2l2ZW5Ta2lsbFxyXG4gKiBAcmV0dXJuIG1lcmdlIGRlZmF1bHQgc2tpbGwgZmllbGRzIHdpdGggZmllbGRzIG9mIHRoZSBnaXZlbiBmaWVsZCwgb25seSBhZGRpbmcgbmV3IGZpZWxkcyBpbiB0aGUgcHJvY2Vzcy5cclxuICovXHJcbmV4cG9ydCBjb25zdCBfbWVyZ2VXaXRoTWlzc2luZ1NraWxsRmllbGRzID0gKGdpdmVuU2tpbGwpID0+IHtcclxuICAgIC8vIE9ubHkgdGhlIGFic29sdXRlIG1vc3QgbmVjZXNzYXJ5IGZpZWxkcywgbm90IGRhdGF0eXBlIGNvbXBsZXRlIHRvIFNraWxsRmllbGRcclxuICAgIGNvbnN0IHRlbXBsYXRlID0ge1xyXG4gICAgICAgIG5hbWU6IFwiXCIsXHJcbiAgICAgICAgYmFzZTogXCJcIixcclxuICAgICAgICB2YWx1ZTogMCxcclxuICAgICAgICBhdHRyaWJ1dGU6IFwiXCIsXHJcbiAgICAgICAgbW9kOiBbXSxcclxuICAgICAgICBzcGVjczogW10sXHJcbiAgICAgICAgaGlkZGVuOiBmYWxzZVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBVc2UgbWVyZ2VPYmplY3QgdG8gcmVzZXJ2ZSBvcmlnaW5hbCBvYmplY3QgaW5zdGFuY2UgaW4gY2FzZSByZXBsYWNpbmcgaXRcclxuICAgIC8vIGNhdXNlcyBwcm9ibGVtcyBkb3duIHRoZSBsaW5lIHdpdGggYWN0aXZlIHNraWxscyB0YWtlbiBmcm9tIGEgcHJlZXhpc3RpbmdcclxuICAgIC8vIGRhdGEgc3RydWN0dXJlLlxyXG4gICAgLy8gb3ZlcndyaXRlIGZhbHNlIHRvIHByb2hpYml0IGV4aXN0aW5nIHZhbHVlcyB0byBiZSBvdmVyd3JpdHRlbiB3aXRoIGVtcHR5IHZhbHVlcy5cclxuICAgIG1lcmdlT2JqZWN0KGdpdmVuU2tpbGwsIHRlbXBsYXRlLCB7b3ZlcndyaXRlOiBmYWxzZX0pO1xyXG59IiwiaW1wb3J0IFNSNUFjdG9yRGF0YSA9IFNoYWRvd3J1bi5TUjVBY3RvckRhdGE7XHJcbmltcG9ydCBUd29UcmFja0FjdG9yRGF0YSA9IFNoYWRvd3J1bi5Ud29UcmFja0FjdG9yRGF0YTtcclxuaW1wb3J0IFdvdW5kc0FjdG9yRGF0YSA9IFNoYWRvd3J1bi5Xb3VuZHNBY3RvckRhdGE7XHJcblxyXG5leHBvcnQgY2xhc3MgV291bmRzUHJlcCB7XHJcbiAgICBzdGF0aWMgcHJlcGFyZVdvdW5kcyhkYXRhOiBTUjVBY3RvckRhdGEgJiBUd29UcmFja0FjdG9yRGF0YSAmIFdvdW5kc0FjdG9yRGF0YSkge1xyXG4gICAgICAgIGNvbnN0IHsgbW9kaWZpZXJzLCB0cmFjayB9ID0gZGF0YTtcclxuICAgICAgICBjb25zdCBjb3VudCA9IDMgKyBOdW1iZXIobW9kaWZpZXJzWyd3b3VuZF90b2xlcmFuY2UnXSk7XHJcbiAgICAgICAgY29uc3Qgc3R1bldvdW5kcyA9IHRyYWNrLnN0dW4uZGlzYWJsZWQgPyAwIDogTWF0aC5mbG9vcih0cmFjay5zdHVuLnZhbHVlIC8gY291bnQpO1xyXG4gICAgICAgIGNvbnN0IHBoeXNpY2FsV291bmRzID0gdHJhY2sucGh5c2ljYWwuZGlzYWJsZWQgPyAwIDogTWF0aC5mbG9vcih0cmFjay5waHlzaWNhbC52YWx1ZSAvIGNvdW50KTtcclxuXHJcbiAgICAgICAgdHJhY2suc3R1bi53b3VuZHMgPSBzdHVuV291bmRzO1xyXG4gICAgICAgIHRyYWNrLnBoeXNpY2FsLndvdW5kcyA9IHBoeXNpY2FsV291bmRzO1xyXG5cclxuICAgICAgICBkYXRhLndvdW5kcyA9IHtcclxuICAgICAgICAgICAgdmFsdWU6IHN0dW5Xb3VuZHMgKyBwaHlzaWNhbFdvdW5kcyxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7RkxBR1MsIFNZU1RFTV9OQU1FfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2hhbmdlbG9nQXBwbGljYXRpb24gZXh0ZW5kcyBBcHBsaWNhdGlvbiB7XHJcbiAgICBnZXQgdGVtcGxhdGUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvYXBwcy9jaGFuZ2Vsb2cuaHRtbCc7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucygpIHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0gc3VwZXIuZGVmYXVsdE9wdGlvbnM7XHJcbiAgICAgICAgb3B0aW9ucy5jbGFzc2VzID0gWydzaGFkb3dydW41ZSddO1xyXG4gICAgICAgIG9wdGlvbnMudGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5DaGFuZ2Vsb2dBcHBsaWNhdGlvbi5UaXRsZScpO1xyXG4gICAgICAgIG9wdGlvbnMud2lkdGggPSA1MDA7XHJcbiAgICAgICAgb3B0aW9ucy5oZWlnaHQgPSAnYXV0byc7XHJcbiAgICAgICAgcmV0dXJuIG9wdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKGZvcmNlPzogYm9vbGVhbiwgb3B0aW9ucz86IEFwcGxpY2F0aW9uLlJlbmRlck9wdGlvbnMpOiBBcHBsaWNhdGlvbiB7XHJcbiAgICAgICAgQ2hhbmdlbG9nQXBwbGljYXRpb24uc2V0UmVuZGVyRm9yQ3VycmVudFZlcnNpb24oKTtcclxuICAgICAgICByZXR1cm4gc3VwZXIucmVuZGVyKGZvcmNlLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBMZXQgdGhlIGFzeW5jIG9wZXJhdGlvbiBoYXBwZW4gaW4gYmFja2dyb3VuZC5cclxuICAgIHByaXZhdGUgc3RhdGljIHNldFJlbmRlckZvckN1cnJlbnRWZXJzaW9uKCkge1xyXG4gICAgICAgIGdhbWUudXNlci5zZXRGbGFnKFNZU1RFTV9OQU1FLCBGTEFHUy5DaGFuZ2Vsb2dTaG93bkZvclZlcnNpb24sIGdhbWUuc3lzdGVtLmRhdGEudmVyc2lvbik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldCBzaG93QXBwbGljYXRpb24oKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKCFnYW1lLnVzZXIuaXNHTSB8fCAhZ2FtZS51c2VyLmlzVHJ1c3RlZCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICBjb25zdCBzaG93bkZvclZlcnNpb24gPSBnYW1lLnVzZXIuZ2V0RmxhZyhTWVNURU1fTkFNRSwgRkxBR1MuQ2hhbmdlbG9nU2hvd25Gb3JWZXJzaW9uKTtcclxuICAgICAgICByZXR1cm4gc2hvd25Gb3JWZXJzaW9uICE9PSBnYW1lLnN5c3RlbS5kYXRhLnZlcnNpb247XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge1NZU1RFTV9OQU1FfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XHJcbmltcG9ydCB7SGVscGVyc30gZnJvbSBcIi4uL2hlbHBlcnNcIjtcclxuaW1wb3J0IHtTUjVBY3Rvcn0gZnJvbSBcIi4uL2FjdG9yL1NSNUFjdG9yXCI7XHJcbmltcG9ydCB7TW9kaWZpZXJzfSBmcm9tIFwiLi4vc3I1L01vZGlmaWVyc1wiO1xyXG5pbXBvcnQgRW52aXJvbm1lbnRhbE1vZGlmaWVyQ2F0ZWdvcmllcyA9IFNoYWRvd3J1bi5FbnZpcm9ubWVudGFsTW9kaWZpZXJDYXRlZ29yaWVzO1xyXG5cclxuZXhwb3J0IHR5cGUgRW52TW9kaWZpZXJzVGFyZ2V0ID0gU2NlbmUgfCBTUjVBY3RvcjtcclxuXHJcbi8qKiBIZWxwZXIgd2luZG93IGZvciBlYXN5IG92ZXJ2aWV3IGFuZCBzZWxlY3Rpb24gb2YgZW52aXJvbm1lbnRhbCBtb2RpZmllcnMgYW5kIHRoZWlyIGNhbGN1bGF0ZWQgdG90YWwuXHJcbiAqXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRW52TW9kaWZpZXJzQXBwbGljYXRpb24gZXh0ZW5kcyBBcHBsaWNhdGlvbiB7XHJcbiAgICB0YXJnZXQ6IEVudk1vZGlmaWVyc1RhcmdldDtcclxuICAgIG1vZGlmaWVyczogTW9kaWZpZXJzO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHRhcmdldDogRW52TW9kaWZpZXJzVGFyZ2V0KSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHRlbXBsYXRlKCkge1xyXG4gICAgICAgIHJldHVybiAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9hcHBzL2Vudi1tb2RpZmllcnMuaHRtbCc7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucygpIHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0gc3VwZXIuZGVmYXVsdE9wdGlvbnM7XHJcbiAgICAgICAgb3B0aW9ucy5jbGFzc2VzID0gWydzcjUnLCAnZm9ybS1kaWFsb2cnXTtcclxuICAgICAgICBvcHRpb25zLmlkID0gJ2Vudi1tb2RpZmllcnMtYXBwbGljYXRpb24nO1xyXG4gICAgICAgIG9wdGlvbnMudGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5FbnZNb2RpZmllcnNBcHBsaWNhdGlvbi5UaXRsZScpO1xyXG4gICAgICAgIG9wdGlvbnMud2lkdGggPSAnYXV0byc7IC8vIGF1dG8gaXMgaW1wb3J0YW50IGZvciBkaWZmZXJpbmcgaTE4biB0ZXh0IGxlbmd0aC5cclxuICAgICAgICBvcHRpb25zLmhlaWdodCA9ICdhdXRvJztcclxuICAgICAgICBvcHRpb25zLnJlc2l6YWJsZSA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIG9wdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0RGF0YShvcHRpb25zPzogb2JqZWN0KTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gc3VwZXIuZ2V0RGF0YShvcHRpb25zKTtcclxuXHJcbiAgICAgICAgdGhpcy5tb2RpZmllcnMgPSBhd2FpdCB0aGlzLl9nZXRNb2RpZmllcnMoKTtcclxuXHJcbiAgICAgICAgZGF0YS5hY3RpdmUgPSB0aGlzLm1vZGlmaWVycy5lbnZpcm9ubWVudGFsLmFjdGl2ZTtcclxuICAgICAgICBkYXRhLnRvdGFsID0gdGhpcy5tb2RpZmllcnMuZW52aXJvbm1lbnRhbC50b3RhbDtcclxuXHJcbiAgICAgICAgZGF0YS5sZXZlbHMgPSBNb2RpZmllcnMuZ2V0RW52aXJvbm1lbnRhbE1vZGlmaWVyTGV2ZWxzKCk7XHJcblxyXG4gICAgICAgIGRhdGEudGFyZ2V0VHlwZSA9IHRoaXMuX2dldFRhcmdldFR5cGVMYWJlbCgpO1xyXG4gICAgICAgIGRhdGEudGFyZ2V0TmFtZSA9IHRoaXMudGFyZ2V0Lm5hbWU7XHJcbiAgICAgICAgZGF0YS5kaXNhYmxlRm9ybSA9IHRoaXMuX2Rpc2FibGVJbnB1dHNGb3JVc2VyKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBhY3RpdmF0ZUxpc3RlbmVycyhodG1sOiBKUXVlcnkgfCBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgICQoaHRtbCkuZmluZCgnYnV0dG9uLmVudi1tb2RpZmllcicpLm9uKCdjbGljaycsIHRoaXMuX2hhbmRsZU1vZGlmaWVyQ2hhbmdlLmJpbmQodGhpcykpO1xyXG4gICAgICAgICQoaHRtbCkuZmluZCgnYnV0dG9uLnJlbW92ZS1tb2RpZmllcnMtZnJvbS10YXJnZXQnKS5vbignY2xpY2snLCB0aGlzLl9oYW5kbGVSZW1vdmVNb2RpZmllcnNGcm9tVGFyZ2V0LmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIF9oYW5kbGVNb2RpZmllckNoYW5nZShldmVudDogRXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAvLyBIYW5kbGUgZGF0YSByZXRyaWV2YWwgZnJvbSBIVE1MIGRhdGFzZXRzLlxyXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG5cclxuICAgICAgICBpZiAoIWVsZW1lbnQuZGF0YXNldC5jYXRlZ29yeSB8fCAhZWxlbWVudC5kYXRhc2V0LnZhbHVlKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGNhdGVnb3J5ID0gZWxlbWVudC5kYXRhc2V0LmNhdGVnb3J5IGFzIGtleW9mIEVudmlyb25tZW50YWxNb2RpZmllckNhdGVnb3JpZXM7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBOdW1iZXIoZWxlbWVudC5kYXRhc2V0LnZhbHVlKTtcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlIG1vZGlmaWVyIGNhbGN1bGF0aW9uXHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQWN0aXZlTW9kaWZpZXJDYXRlZ29yeShjYXRlZ29yeSwgdmFsdWUpO1xyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLl9jbGVhck1vZGlmaWVyc09uVGFyZ2V0Rm9yTm9TZWxlY3Rpb24oKTtcclxuICAgICAgICBhd2FpdCB0aGlzLl9zdG9yZU1vZGlmaWVyc09uVGFyZ2V0KCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3VwZGF0ZVRva2VuSFVEVG90YWxEaXNwbGF5KCk7XHJcblxyXG4gICAgICAgIGF3YWl0IHRoaXMucmVuZGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFVwZGF0ZXMgb3BlbmVkIHRva2VuSFVEIG1vZGlmaWVyIHZhbHVlcy5cclxuICAgICAqXHJcbiAgICAgKiBEb2luZyBpdCB0aGlzIHdheSBpcyBqdXN0IGVhc2llciBhcyByZWx5aW5nIG9uIGFueSB1cGRhdGUgLyBob29rIHdvcmtmbG93LlxyXG4gICAgICovXHJcbiAgICBfdXBkYXRlVG9rZW5IVURUb3RhbERpc3BsYXkoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0IGluc3RhbmNlb2YgU1I1QWN0b3IpIHtcclxuICAgICAgICAgICAgJCgnLm1vZGlmaWVyLXZhbHVlLWVudmlyb25tZW50YWwnKS5lYWNoKChpbmRleCwgZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgJChlbGVtZW50KS5odG1sKHRoaXMubW9kaWZpZXJzLmVudmlyb25tZW50YWwudG90YWwudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBfaGFuZGxlUmVtb3ZlTW9kaWZpZXJzRnJvbVRhcmdldChldmVudDogRXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLmNsZWFyTW9kaWZpZXJzT25UYXJnZXQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fdXBkYXRlVG9rZW5IVURUb3RhbERpc3BsYXkoKTtcclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqL1xyXG4gICAgX3RvZ2dsZUFjdGl2ZU1vZGlmaWVyQ2F0ZWdvcnkoY2F0ZWdvcnk6IGtleW9mIEVudmlyb25tZW50YWxNb2RpZmllckNhdGVnb3JpZXMsIGxldmVsOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLm1vZGlmaWVycy50b2dnbGVFbnZpcm9ubWVudGFsQ2F0ZWdvcnkoY2F0ZWdvcnksIGxldmVsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogUmV0dXJuIHRoZSBtb2RpZmllcnMgdGhhdCBiZXN0IG1hdGNoIHRoZSBjdXJyZW50IHRhcmdldCB0eXBlXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIF9nZXRNb2RpZmllcnMoKTogUHJvbWlzZTxNb2RpZmllcnM+IHtcclxuICAgICAgICAvLyBBY3RvciB0YXJnZXRzIG1pZ2h0IGhhdmUgbm8gcGVyc29uYWwgbW9kaWZpZXJzLCBidXQgc3RpbGwgc2VlIHRoZSBzY2VuZSBtb2RpZmllcnMgdGhlbiwgYW5kIHVzZSB0aG9zZVxyXG4gICAgICAgIC8vIGFzIGEgdGVtcGxhdGUgZm9yIHRoZWlyIGxvY2FsIG1vZGlmaWVycy5cclxuICAgICAgICBpZiAodGhpcy50YXJnZXQgaW5zdGFuY2VvZiBTUjVBY3Rvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy50YXJnZXQuZ2V0TW9kaWZpZXJzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFsbCBvdGhlciB0eXBlcyBhcmUgaGFuZGxlZCB3aXRob3V0IHNwZWNpYWwgY2FzZXMuXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IE1vZGlmaWVycy5nZXRNb2RpZmllcnNGcm9tRW50aXR5KHRoaXMudGFyZ2V0KTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBfc3RvcmVNb2RpZmllcnNPblRhcmdldCgpIHtcclxuICAgICAgICBhd2FpdCBNb2RpZmllcnMuc2V0TW9kaWZpZXJzT25FbnRpdHkodGhpcy50YXJnZXQsIHRoaXMubW9kaWZpZXJzLmRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBDbGVhbnVwIHVudXNlZCBkYXRhIGluIEVudGl0eSBmbGFnLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBfY2xlYXJNb2RpZmllcnNPblRhcmdldEZvck5vU2VsZWN0aW9uKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5tb2RpZmllcnMuaGFzQWN0aXZlRW52aXJvbm1lbnRhbCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGlmaWVycyA9IGF3YWl0IE1vZGlmaWVycy5jbGVhckVudmlyb25tZW50YWxPbkVudGl0eSh0aGlzLnRhcmdldCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIF90YXJnZXRIYXNFbnZpcm9ubWVudGFsTW9kaWZpZXJzKCkge1xyXG4gICAgICAgIGNvbnN0IG1vZGlmaWVycyA9IGF3YWl0IE1vZGlmaWVycy5nZXRNb2RpZmllcnNGcm9tRW50aXR5KHRoaXMudGFyZ2V0KTtcclxuICAgICAgICByZXR1cm4gISFtb2RpZmllcnMuZW52aXJvbm1lbnRhbDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBjbGVhck1vZGlmaWVyc09uVGFyZ2V0KCkge1xyXG4gICAgICAgIGF3YWl0IE1vZGlmaWVycy5jbGVhckVudmlyb25tZW50YWxPbkVudGl0eSh0aGlzLnRhcmdldCk7XHJcbiAgICAgICAgLy8gUmVmcmVzaCBtb2RpZmllcnMuIFRoaXMgY2FuIGJlIG5lY2Vzc2FyeSBmb3IgQWN0b3IgdGFyZ2V0cyB3aXRob3V0IG1vZGlmaWVycyB3aGVuIFNjZW5lIG1vZGlmaWVycyBhcmUgcHJlc2VudC5cclxuICAgICAgICB0aGlzLm1vZGlmaWVycyA9IGF3YWl0IHRoaXMuX2dldE1vZGlmaWVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRUYXJnZXRUeXBlTGFiZWwoKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAodGhpcy50YXJnZXQgaW5zdGFuY2VvZiBTY2VuZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdFTlRJVFkuU2NlbmUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0IGluc3RhbmNlb2YgU1I1QWN0b3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnRU5USVRZLkFjdG9yJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIE9ubHkgYWxsb3cgaW50ZXJhY3Rpb25zIGZvciB1c2VyIHdpdGggYXBwcm9wcmlhdGUgcGVybWlzc2lvbnNcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIF9kaXNhYmxlSW5wdXRzRm9yVXNlcigpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBlbnRpdHkgPSB0aGlzLnRhcmdldCBpbnN0YW5jZW9mIFNSNUFjdG9yID8gdGhpcy50YXJnZXQgOiB0aGlzLnRhcmdldDtcclxuICAgICAgICByZXR1cm4gIShnYW1lLnVzZXIuaXNHTSB8fCBlbnRpdHkub3duZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBhc3luYyBvcGVuRm9yQ3VycmVudFNjZW5lKCkge1xyXG4gICAgICAgIGlmICghY2FudmFzLnNjZW5lKSByZXR1cm47XHJcbiAgICAgICAgYXdhaXQgbmV3IEVudk1vZGlmaWVyc0FwcGxpY2F0aW9uKGNhbnZhcy5zY2VuZSkucmVuZGVyKHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBQYXJ0IG9mIHRoZSB0b2tlbkhVRCB3b3JrZmxvdyBtYWtlcyBpdCBuZWNlc3NhcnkgdG8gaGF2ZSB0aGUgdG9rZW4gaWQgcGlwZWQgaW5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdG9rZW5JZFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgb3BlbkZvclRva2VuSFVEKHRva2VuSWQ6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHRva2VuID0gSGVscGVycy5nZXRUb2tlbih0b2tlbklkKTtcclxuXHJcbiAgICAgICAgLy8gV2hlbiB0aGUgdG9rZW4gaHVkIGNvbnRyb2wgaXMgYWN0aXZhdGVkLCB0aGlzIGlubGluZSBoYW5kbGVyIHdpbGwgYmUgY2FsbGVkIHdpdGggaXQuXHJcbiAgICAgICAgcmV0dXJuIGFzeW5jIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0b2tlbiB8fCAhdG9rZW4uYWN0b3IpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IG5ldyBFbnZNb2RpZmllcnNBcHBsaWNhdGlvbih0b2tlbi5hY3RvcikucmVuZGVyKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiogTGVmdCBzaWRlIHRvb2wgd2luZG93IGNvbnRyb2wgaWNvbiAvIGludGVyYWN0aW9uXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXRDb250cm9sKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdlbnZpcm9ubWVudGFsLW1vZGlmaWVycy1hcHBsaWNhdGlvbicsXHJcbiAgICAgICAgICAgIHRpdGxlOiAnQ09OVFJPTFMuU1I1LkVudmlyb25tZW50YWxNb2RpZmllcnMnLFxyXG4gICAgICAgICAgICBpY29uOiAnZmFzIGZhLWxpc3QnLFxyXG4gICAgICAgICAgICBvbkNsaWNrOiBFbnZNb2RpZmllcnNBcHBsaWNhdGlvbi5vcGVuRm9yQ3VycmVudFNjZW5lLFxyXG4gICAgICAgICAgICBidXR0b246IHRydWVcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVE9ETzogSW1wbGVtZW50IHN5c3RlbSB3aWRlIHRva2VuIEhVRCBtYW5hZ2VtZW50Li4uXHJcbiAgICBzdGF0aWMgYXN5bmMgYWRkVG9rZW5IVURGaWVsZHMoYXBwOiBUb2tlbkhVRCwgaHRtbDogSlF1ZXJ5LCBkYXRhKSB7XHJcbiAgICAgICAgaWYgKCFkYXRhLl9pZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhgJHtTWVNURU1fTkFNRX0gfCBFbnZpcm9ubWVudGFsIE1vZGlmaWVyIEhVRCBvbiByZW5kZXJUb2tlbkhVRGApO1xyXG5cclxuICAgICAgICBjb25zdCB0b2tlbiA9IEhlbHBlcnMuZ2V0VG9rZW4oZGF0YS5faWQpO1xyXG4gICAgICAgIGlmICghdG9rZW4pIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgYWN0b3IgPSB0b2tlbi5hY3RvciBhcyBTUjVBY3RvcjtcclxuICAgICAgICBjb25zdCBtb2RpZmllcnMgPSBhd2FpdCBhY3Rvci5nZXRNb2RpZmllcnMoKTtcclxuXHJcbiAgICAgICAgLy8gU2V0dXAgYW5kIGNvbm5lY3QgdG9rZW5IVUQgZWxlbWVudHMuXHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gJCgnPGRpdiBjbGFzcz1cImNvbCBmYXItcmlnaHQgc3ItbW9kaWZpZXItY29udGFpbmVyXCI+PC9kaXY+Jyk7XHJcbiAgICAgICAgY29uc3QgY29sdW1uID0gJCgnPGRpdiBjbGFzcz1cImNvbCBtb2RpZmllci1jb2x1bW5cIj48L2Rpdj4nKTtcclxuICAgICAgICBjb25zdCBtb2RpZmllciA9ICQoJzxkaXYgY2xhc3M9XCJtb2RpZmllci1yb3dcIj48L2Rpdj4nKTtcclxuICAgICAgICBjb25zdCBtb2RpZmllclZhbHVlID0gJChgPGRpdiBjbGFzcz1cIm1vZGlmaWVyLXZhbHVlIG1vZGlmaWVyLXZhbHVlLWVudmlyb25tZW50YWxcIj4ke21vZGlmaWVycy5lbnZpcm9ubWVudGFsLnRvdGFsfTwvZGl2PmApO1xyXG4gICAgICAgIGNvbnN0IG1vZGlmaWVyRGVzY3JpcHRpb24gPSAkKGA8ZGl2IGNsYXNzPVwibW9kaWZpZXItZGVzY3JpcHRpb24gb3Blbi1lbnZpcm9ubWVudGFsLW1vZGlmaWVyXCI+JHtnYW1lLmkxOG4ubG9jYWxpemUoXCJTUjUuRW52aXJvbm1lbnRNb2RpZmllclwiKX08L2Rpdj5gKTtcclxuICAgICAgICBtb2RpZmllckRlc2NyaXB0aW9uLm9uKCdjbGljaycsIEVudk1vZGlmaWVyc0FwcGxpY2F0aW9uLm9wZW5Gb3JUb2tlbkhVRChkYXRhLl9pZCkpO1xyXG5cclxuICAgICAgICBjb250YWluZXIuYXBwZW5kKGNvbHVtbik7XHJcbiAgICAgICAgY29sdW1uLmFwcGVuZChtb2RpZmllcik7XHJcbiAgICAgICAgbW9kaWZpZXIuYXBwZW5kKG1vZGlmaWVyVmFsdWUpO1xyXG4gICAgICAgIG1vZGlmaWVyLmFwcGVuZChtb2RpZmllckRlc2NyaXB0aW9uKTtcclxuXHJcbiAgICAgICAgLy8gQ29ubmVjdCBTUi1Gb3VuZHJ5VlRUIHRva2VuSFVEIGVsZW1lbnRzIHRvIEZvdW5kcnlWVFQgdG9rZW5IVUQgY29sdW1uIHN0cnVjdHVyZS5cclxuICAgICAgICBodG1sLmZpbmQoJy5jb2wucmlnaHQnKS5hZnRlcihjb250YWluZXIpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgcGFyc2VEZXNjcmlwdGlvbiwgZ2V0QXJyYXksIHBhcnNlVGVjaG5vbG9neSwgY3JlYXRlSXRlbURhdGEgfSBmcm9tIFwiLi9CYXNlUGFyc2VyRnVuY3Rpb25zLmpzXCJcclxuXHJcbmV4cG9ydCBjbGFzcyBBcm1vclBhcnNlciB7XHJcbiAgIFxyXG4gICAgcGFyc2VBcm1vcnMoY2h1bW1lckNoYXIpIHtcclxuICAgICAgICBjb25zdCBhcm1vcnMgPSBnZXRBcnJheShjaHVtbWVyQ2hhci5hcm1vcnMuYXJtb3IpO1xyXG4gICAgICAgIGNvbnN0IHBhcnNlZEFybW9ycyA9IFtdO1xyXG4gICAgICAgIGFybW9ycy5mb3JFYWNoKChjaHVtbWVyQXJtb3IpID0+IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1EYXRhID0gdGhpcy5wYXJzZUFybW9yKGNodW1tZXJBcm1vcik7XHJcbiAgICAgICAgICAgICAgICBwYXJzZWRBcm1vcnMucHVzaChpdGVtRGF0YSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHBhcnNlZEFybW9ycztcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZUFybW9yKGNodW1tZXJBcm1vcikge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7fTtcclxuICAgICAgICBjb25zdCBhcm1vciA9IHt9O1xyXG4gICAgICAgIGRhdGEuYXJtb3IgPSBhcm1vcjtcclxuXHJcbiAgICAgICAgbGV0IGRlc2MgPSAnJztcclxuICAgICAgICBhcm1vci5tb2QgPSBjaHVtbWVyQXJtb3IuYXJtb3IuaW5jbHVkZXMoJysnKTtcclxuICAgICAgICBhcm1vci52YWx1ZSA9IHBhcnNlSW50KGNodW1tZXJBcm1vci5hcm1vci5yZXBsYWNlKCcrJywgJycpKTtcclxuICAgICAgICBpZiAoY2h1bW1lckFybW9yLmRlc2NyaXB0aW9uKVxyXG4gICAgICAgICAgICBkZXNjID0gY2h1bW1lckFybW9yLmRlc2NyaXB0aW9uO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhjaHVtbWVyQXJtb3IpO1xyXG4gICAgICAgIGlmIChjaHVtbWVyQXJtb3IuYXJtb3Jtb2RzICYmIGNodW1tZXJBcm1vci5hcm1vcm1vZHMuYXJtb3Jtb2QpIHtcclxuICAgICAgICAgICAgYXJtb3IuZmlyZSA9IDA7XHJcbiAgICAgICAgICAgIGFybW9yLmVsZWN0cmljaXR5ID0gMDtcclxuICAgICAgICAgICAgYXJtb3IuY29sZCA9IDA7XHJcbiAgICAgICAgICAgIGFybW9yLmFjaWQgPSAwO1xyXG4gICAgICAgICAgICBhcm1vci5yYWRpYXRpb24gPSAwO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbW9kRGVzYyA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCBtb2RzID0gZ2V0QXJyYXkoY2h1bW1lckFybW9yLmFybW9ybW9kcy5hcm1vcm1vZCk7XHJcbiAgICAgICAgICAgIG1vZHMuZm9yRWFjaCgobW9kKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobW9kLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZmlyZSByZXNpc3RhbmNlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcm1vci5maXJlICs9IHBhcnNlSW50KG1vZC5yYXRpbmcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2QubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdub25jb25kdWN0aXZpdHknKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFybW9yLmVsZWN0cmljaXR5ICs9IHBhcnNlSW50KG1vZC5yYXRpbmcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2QubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdpbnN1bGF0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcm1vci5jb2xkICs9IHBhcnNlSW50KG1vZC5yYXRpbmcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2QubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdyYWRpYXRpb24gc2hpZWxkaW5nJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcm1vci5yYWRpYXRpb24gKz0gcGFyc2VJbnQobW9kLnJhdGluZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobW9kLnJhdGluZyAhPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICBtb2REZXNjLnB1c2goYCR7bW9kLm5hbWV9IFIke21vZC5yYXRpbmd9YCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZERlc2MucHVzaChtb2QubmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAobW9kRGVzYy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBhZGQgZGVzYyB0byBiZWdpbm5pbmdcclxuICAgICAgICAgICAgICAgIGRlc2MgPSBgJHttb2REZXNjLmpvaW4oJywnKX1cXG5cXG4ke2Rlc2N9YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGF0YS50ZWNobm9sb2d5ID0gcGFyc2VUZWNobm9sb2d5KGNodW1tZXJBcm1vcik7XHJcbiAgICAgICAgZGF0YS5kZXNjcmlwdGlvbiA9IHBhcnNlRGVzY3JpcHRpb24oY2h1bW1lckFybW9yKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gY3JlYXRlSXRlbURhdGEoY2h1bW1lckFybW9yLm5hbWUsICdhcm1vcicsIGRhdGEpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgRGVmYXVsdFZhbHVlcyB9IGZyb20gXCIuLi8uLi9kYXRhVGVtcGxhdGVzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0VmFsdWVzID0gKHZhbCkgPT4ge1xyXG4gICAgY29uc3QgcmVnZXggPSAvKC0/WzAtOV0rKSg/OihbMC05XSspKSovZztcclxuICAgIGNvbnN0IGwgPSB2YWwubWF0Y2gocmVnZXgpO1xyXG4gICAgcmV0dXJuIGwgfHwgWycwJ107XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0QXJyYXkgPSAodmFsdWUpID0+IHtcclxuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogW3ZhbHVlXTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiAgQ3JlYXRlcyB0aGUgZGVzY3JpcHRpb24gZGF0YSBmcm9tIHRoZSBjaHVtbWVyIGVudHJ5XHJcbiAqICBAcGFyYW0gY2h1bW1lckVudHJ5IFRoZSBjaHVtbWVyIGVudHJ5ICh0aGUgaXRlbSlcclxuICovXHJcbmV4cG9ydCBjb25zdCBwYXJzZURlc2NyaXB0aW9uID0gKGNodW1tZXJFbnRyeSkgPT4ge1xyXG4gICAgY29uc3QgcGFyc2VkRGVzY3JpcHRpb24gPSBEZWZhdWx0VmFsdWVzLmRlc2NyaXB0aW9uRGF0YSgpO1xyXG5cclxuICAgIGlmIChjaHVtbWVyRW50cnkuc291cmNlICYmIGNodW1tZXJFbnRyeS5wYWdlKSB7XHJcbiAgICAgICAgcGFyc2VkRGVzY3JpcHRpb24uc291cmNlID0gYCR7Y2h1bW1lckVudHJ5LnNvdXJjZX0gJHtjaHVtbWVyRW50cnkucGFnZX1gXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNodW1tZXJFbnRyeS5kZXNjcmlwdGlvbikge1xyXG4gICAgICAgIHBhcnNlZERlc2NyaXB0aW9uLnZhbHVlID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKGNodW1tZXJFbnRyeS5kZXNjcmlwdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHBhcnNlZERlc2NyaXB0aW9uXHJcbn1cclxuXHJcbi8qKlxyXG4gKiAgQ3JlYXRlcyB0aGUgdGVjaG5vbG9neSBkYXRhIGZyb20gdGhlIGNodW1tZXIgZW50cnlcclxuICogIEBwYXJhbSBjaHVtbWVyRW50cnkgVGhlIGNodW1tZXIgZW50cnkgKHRoZSBpdGVtKVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHBhcnNlVGVjaG5vbG9neSA9IChjaHVtbWVyRW50cnkpID0+IHtcclxuICAgIGNvbnN0IHBhcnNlZFRlY2hub2xvZ3kgPSBEZWZhdWx0VmFsdWVzLnRlY2hub2xvZ3lEYXRhKCk7XHJcblxyXG4gICAgaWYgKGNodW1tZXJFbnRyeS5yYXRpbmcpIHtcclxuICAgICAgICBwYXJzZWRUZWNobm9sb2d5LnJhdGluZyA9IGNodW1tZXJFbnRyeS5yYXRpbmc7IFxyXG4gICAgfVxyXG5cclxuICAgIGlmIChjaHVtbWVyRW50cnkuYXZhaWwpIHtcclxuICAgICAgICBwYXJzZWRUZWNobm9sb2d5LmF2YWlsYWJpbGl0eSA9IGNodW1tZXJFbnRyeS5hdmFpbDsgXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNodW1tZXJFbnRyeS5xdHkpIHtcclxuICAgICAgICBwYXJzZWRUZWNobm9sb2d5LnF1YW50aXR5ID0gY2h1bW1lckVudHJ5LnF0eTsgXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNodW1tZXJFbnRyeS5jb3N0KSB7XHJcbiAgICAgICAgcGFyc2VkVGVjaG5vbG9neS5jb3N0ID0gcGFyc2VGbG9hdChjaHVtbWVyRW50cnkuY29zdC5yZXBsYWNlKC9bXlxcZFxcLlxcLV0vZywgXCJcIikpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoY2h1bW1lckVudHJ5LmVxdWlwcGVkICYmIGNodW1tZXJFbnRyeS5lcXVpcHBlZC50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZScpIHtcclxuICAgICAgICBwYXJzZWRUZWNobm9sb2d5LmVxdWlwcGVkID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY2h1bW1lckVudHJ5LmNvbmRpdGlvbm1vbml0b3IpIHtcclxuICAgICAgICBwYXJzZWRUZWNobm9sb2d5LmNvbmRpdGlvbl9tb25pdG9yLm1heCA9IE51bWJlcihjaHVtbWVyRW50cnkuY29uZGl0aW9ubW9uaXRvcik7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNodW1tZXJFbnRyeS5jb25jZWFsKSB7XHJcbiAgICAgICAgcGFyc2VkVGVjaG5vbG9neS5jb25jZWFsLmJhc2UgPSBOdW1iZXIoY2h1bW1lckVudHJ5LmNvbmNlYWwpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBwYXJzZWRUZWNobm9sb2d5XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVJdGVtRGF0YSA9IChuYW1lLCB0eXBlLCBkYXRhKSA9PiB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgX2lkOiAnJyxcclxuICAgICAgICBmb2xkZXI6ICcnLFxyXG4gICAgICAgIGZsYWdzOiB7fSxcclxuICAgICAgICBpbWc6ICdpY29ucy9zdmcvbXlzdGVyeS1tYW4uc3ZnJyxcclxuICAgICAgICB0eXBlOiB0eXBlLFxyXG4gICAgICAgIGRhdGEsXHJcbiAgICAgICAgcGVybWlzc2lvbjoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiAyLFxyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG59XHJcblxyXG5cclxuIiwiaW1wb3J0IHtDaGFyYWN0ZXJJbmZvVXBkYXRlcn0gZnJvbSBcIi4vQ2hhcmFjdGVySW5mb1VwZGF0ZXJcIlxyXG5pbXBvcnQge0l0ZW1zUGFyc2VyfSBmcm9tIFwiLi9JdGVtc1BhcnNlclwiXHJcblxyXG4vKipcclxuICogSW1wb3J0cyBjaGFyYWN0ZXJzIGZyb20gb3RoZXIgdG9vbHMgaW50byBhbiBleGlzdGluZyBmb3VuZHJ5IGFjdG9yLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENoYXJhY3RlckltcG9ydGVyIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEltcG9ydHMgYSBjaHVtbWVyIGNoYXJhY3RlciBpbnRvIGFuIGV4aXN0aW5nIGFjdG9yLiBUaGUgYWN0b3Igd2lsbCBiZSB1cGRhdGVkLiBUaGlzIG1pZ2h0IGxlYWQgdG8gZHVwbGljYXRlIGl0ZW1zLlxyXG4gICAgICogQHBhcmFtIHsqfSBhY3RvciBUaGUgYWN0b3IgdGhhdCB3aWxsIGJlIHVwZGF0ZWQgd2l0aCB0aGUgY2h1bW1lciBjaGFyYWN0ZXIuXHJcbiAgICAgKiBAcGFyYW0geyp9IGNodW1tZXJGaWxlIFRoZSBjb21wbGV0ZSBjaHVtbWVyIGZpbGUgYXMganNvbiBvYmplY3QuIFRoZSBmaXJzdCBjaGFyYWN0ZXIgd2lsbCBiZSBzZWxlY3RlZCBmb3IgaW1wb3J0LlxyXG4gICAgICogQHBhcmFtIHsqfSBpbXBvcnRPcHRpb25zIEFkZGl0aW9uYWwgaW1wb3J0IG9wdGlvbiB0aGF0IHNwZWNpZnkgd2hhdCBwYXJ0cyBvZiB0aGUgY2h1bW1lciBmaWxlIHdpbGwgYmUgaW1wb3J0ZWQuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGltcG9ydENodW1tZXJDaGFyYWN0ZXIoYWN0b3IsIGNodW1tZXJGaWxlLCBpbXBvcnRPcHRpb25zKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0ltcG9ydGluZyB0aGUgZm9sbG93aW5nIGNoYXJhY3RlciBmaWxlIGNvbnRlbnQ6Jyk7XHJcbiAgICAgICAgY29uc29sZS5sb2coY2h1bW1lckZpbGUpO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnVXNpbmcgdGhlIGZvbGxvd2luZyBpbXBvcnQgb3B0aW9uczonKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGltcG9ydE9wdGlvbnMpO1xyXG5cclxuICAgICAgICBpZiAoIWNodW1tZXJGaWxlLmNoYXJhY3RlcnMgfHwgIWNodW1tZXJGaWxlLmNoYXJhY3RlcnMuY2hhcmFjdGVyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEaWQgbm90IGZpbmQgYSB2YWxpZCBjaGFyYWN0ZXIgdG8gaW1wb3J0ICAtIGFib3J0aW5nIGltcG9ydCcpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjaHVtbWVyQ2hhcmFjdGVyID0gY2h1bW1lckZpbGUuY2hhcmFjdGVycy5jaGFyYWN0ZXI7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlZEFjdG9yRGF0YSA9IG5ldyBDaGFyYWN0ZXJJbmZvVXBkYXRlcigpLnVwZGF0ZShhY3Rvci5kYXRhLCBjaHVtbWVyQ2hhcmFjdGVyKTtcclxuICAgICAgICBjb25zdCBpdGVtcyA9IG5ldyBJdGVtc1BhcnNlcigpLnBhcnNlKGNodW1tZXJDaGFyYWN0ZXIsIGltcG9ydE9wdGlvbnMpO1xyXG5cclxuICAgICAgICBhd2FpdCBhY3Rvci51cGRhdGUodXBkYXRlZEFjdG9yRGF0YSk7XHJcbiAgICAgICAgYXdhaXQgYWN0b3IuY3JlYXRlRW1iZWRkZWRFbnRpdHkoJ093bmVkSXRlbScsIGl0ZW1zKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7X21lcmdlV2l0aE1pc3NpbmdTa2lsbEZpZWxkc30gZnJvbSBcIi4uLy4uL2FjdG9yL3ByZXAvZnVuY3Rpb25zL1NraWxsc1ByZXBcIjtcclxuXHJcbi8qKlxyXG4gKiBQYXJzZXMgYWxsIG5vbi1pdGVtIGNoYXJhY3RlciBpbmZvcm1hdGlvbiBmcm9tIGEgY2h1bW1lciBjaGFyYWN0ZXIgb2JqZWN0LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENoYXJhY3RlckluZm9VcGRhdGVyIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqICBNYXBzIHRoZSBjaHVtbWVyIGF0dHJpYnV0ZSBuYW1lIHRvIG91ciBzcjUtZm91bmRyeSBhdHRyaWJ1dGUgbmFtZVxyXG4gICAgICogIEBwYXJhbSBhdHROYW1lIG5hbWUgb2YgdGhlIGNodW1tZXIgYXR0cmlidXRlXHJcbiAgICAgKi9cclxuICAgIHBhcnNlQXR0TmFtZSA9IChhdHROYW1lKSA9PiAge1xyXG4gICAgICAgIGlmIChhdHROYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdib2QnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnYm9keSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhdHROYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdhZ2knKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnYWdpbGl0eSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhdHROYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdyZWEnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAncmVhY3Rpb24nO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXR0TmFtZS50b0xvd2VyQ2FzZSgpID09PSAnc3RyJykge1xyXG4gICAgICAgICAgICByZXR1cm4gJ3N0cmVuZ3RoJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGF0dE5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2NoYScpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdjaGFyaXNtYSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhdHROYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbnQnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnaW50dWl0aW9uJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGF0dE5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2xvZycpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdsb2dpYyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhdHROYW1lLnRvTG93ZXJDYXNlKCkgPT09ICd3aWwnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnd2lsbHBvd2VyJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGF0dE5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2VkZycpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdlZGdlJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGF0dE5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ21hZycpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdtYWdpYyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhdHROYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdyZXMnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAncmVzb25hbmNlJztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGdldEFycmF5ID0gKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbdmFsdWVdO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAgQ29udmVydHMgdGhlIGNodW1tZXIgYXR0cmlidXRlIHZhbHVlIHRvIG91ciBzcjUtZm91bmRyeSBhdHRyaWJ1dGUgdmFsdWVcclxuICAgICAqICBAcGFyYW0gYXR0IHRoZSBjaHVtbWVyIGF0dHJpYnV0ZVxyXG4gICAgICovXHJcbiAgICBwYXJzZUF0dEJhc2VWYWx1ZSA9IChhdHQpID0+IHtcclxuICAgICAgICBpZiAoYXR0Lm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2VkZycpIHtcclxuICAgICAgICAgICAgLy8gVGhlIGVkZ2UgYXR0cmlidXRlIHZhbHVlIGlzIHN0b3JlZCBpbiB0aGUgXCJiYXNlXCIgZmllbGQgaW5zdGVhZCBvZiB0aGUgdG90YWwgZmllbGRcclxuICAgICAgICAgICAgLy8gSW4gY2h1bW1lciwgdGhlIFwidG90YWxcIiBmaWVsZCBpcyB1c2VkIGZvciB0aGUgYW1vdW50IG9mIGVkZ2UgcmVtYWluaW5nIHRvIGEgY2hhcmFjdGVyXHJcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUludChhdHQuYmFzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoYXR0LnRvdGFsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgdGhlIGFjdG9yIGRhdGEgZnJvbSB0aGUgY2h1bW1lciBmaWxlIGFuZCByZXR1cm5zIGFuIHVwZGF0ZWQgY2xvbmUgb2YgdGhlIGFjdG9yIGRhdGEuXHJcbiAgICAgKiBAcGFyYW0geyp9IGFjdG9yRGF0YSBUaGUgYWN0b3IgZGF0YSAoYWN0b3IuZGF0YSBub3QgYWN0b3IuZGF0YS5kYXRhKSB0aGF0IGlzIHVzZWQgYXMgdGhlIGJhc2lzIGZvciB0aGUgaW1wb3J0LiBXaWxsIG5vdCBiZSBjaGFuZ2VkLlxyXG4gICAgICogQHBhcmFtIHsqfSBjaHVtbWVyQ2hhciBUaGUgY2h1bW1lciBjaGFyYWN0ZXIgdG8gcGFyc2UuXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZShhY3RvckRhdGEsIGNodW1tZXJDaGFyKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGNsb25lZEFjdG9yRGF0YSA9IGR1cGxpY2F0ZShhY3RvckRhdGEpO1xyXG5cclxuICAgICAgICAvLyBOYW1lIGlzIHJlcXVpcmVkLCBzbyB3ZSBuZWVkIHRvIGFsd2F5cyBzZXQgc29tZXRoaW5nIChldmVuIGlmIHRoZSBjaHVtbWVyIGZpZWxkIGlzIGVtcHR5KVxyXG4gICAgICAgIGNsb25lZEFjdG9yRGF0YS5uYW1lID0gY2h1bW1lckNoYXIuYWxpYXMgPyBjaHVtbWVyQ2hhci5hbGlhcyA6ICdbTmFtZSBub3QgZm91bmRdJztcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmltcG9ydEJhc2ljRGF0YShjbG9uZWRBY3RvckRhdGEuZGF0YSwgY2h1bW1lckNoYXIpO1xyXG4gICAgICAgIHRoaXMuaW1wb3J0QmlvKGNsb25lZEFjdG9yRGF0YS5kYXRhLCBjaHVtbWVyQ2hhcik7XHJcbiAgICAgICAgdGhpcy5pbXBvcnRBdHRyaWJ1dGVzKGNsb25lZEFjdG9yRGF0YS5kYXRhLCBjaHVtbWVyQ2hhcilcclxuICAgICAgICB0aGlzLmltcG9ydEluaXRpYXRpdmUoY2xvbmVkQWN0b3JEYXRhLmRhdGEsIGNodW1tZXJDaGFyKTtcclxuICAgICAgICB0aGlzLmltcG9ydFNraWxscyhjbG9uZWRBY3RvckRhdGEuZGF0YSwgY2h1bW1lckNoYXIpO1xyXG5cclxuICAgICAgICByZXR1cm4gY2xvbmVkQWN0b3JEYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGltcG9ydEJhc2ljRGF0YShhY3RvckRhdGFEYXRhLCBjaHVtbWVyQ2hhcikge1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoY2h1bW1lckNoYXIucGxheWVybmFtZSkge1xyXG4gICAgICAgICAgICAgICAgYWN0b3JEYXRhRGF0YS5wbGF5ZXJfbmFtZSA9IGNodW1tZXJDaGFyLnBsYXllcm5hbWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNodW1tZXJDaGFyLmFsaWFzKSB7XHJcbiAgICAgICAgICAgICAgICBhY3RvckRhdGFEYXRhLm5hbWUgPSBjaHVtbWVyQ2hhci5hbGlhcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2h1bW1lckNoYXIubWV0YXR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGFjdG9yRGF0YURhdGEubWV0YXR5cGUgPSBjaHVtbWVyQ2hhci5tZXRhdHlwZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2h1bW1lckNoYXIuc2V4KSB7XHJcbiAgICAgICAgICAgICAgICBhY3RvckRhdGFEYXRhLnNleCA9IGNodW1tZXJDaGFyLnNleDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2h1bW1lckNoYXIuYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBhY3RvckRhdGFEYXRhLmFnZSA9IGNodW1tZXJDaGFyLmFnZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2h1bW1lckNoYXIuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICBhY3RvckRhdGFEYXRhLmhlaWdodCA9IGNodW1tZXJDaGFyLmhlaWdodDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2h1bW1lckNoYXIud2VpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICBhY3RvckRhdGFEYXRhLndlaWdodCA9IGNodW1tZXJDaGFyLndlaWdodDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2h1bW1lckNoYXIuY2FsY3VsYXRlZHN0cmVldGNyZWQpIHtcclxuICAgICAgICAgICAgICAgIGFjdG9yRGF0YURhdGEuc3RyZWV0X2NyZWQgPSBjaHVtbWVyQ2hhci5jYWxjdWxhdGVkc3RyZWV0Y3JlZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2h1bW1lckNoYXIuY2FsY3VsYXRlZG5vdG9yaWV0eSkge1xyXG4gICAgICAgICAgICAgICAgYWN0b3JEYXRhRGF0YS5ub3RvcmlldHkgPSBjaHVtbWVyQ2hhci5jYWxjdWxhdGVkbm90b3JpZXR5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjaHVtbWVyQ2hhci5jYWxjdWxhdGVkcHVibGljYXdhcmVuZXNzKSB7XHJcbiAgICAgICAgICAgICAgICBhY3RvckRhdGFEYXRhLnB1YmxpY19hd2FyZW5lc3MgPSBjaHVtbWVyQ2hhci5jYWxjdWxhdGVkcHVibGljYXdhcmVuZXNzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjaHVtbWVyQ2hhci5rYXJtYSkge1xyXG4gICAgICAgICAgICAgICAgYWN0b3JEYXRhRGF0YS5rYXJtYS52YWx1ZSA9IGNodW1tZXJDaGFyLmthcm1hO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjaHVtbWVyQ2hhci50b3RhbGthcm1hKSB7XHJcbiAgICAgICAgICAgICAgICBhY3RvckRhdGFEYXRhLmthcm1hLm1heCA9IGNodW1tZXJDaGFyLnRvdGFsa2FybWE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNodW1tZXJDaGFyLnRlY2hub21hbmNlciAmJiBjaHVtbWVyQ2hhci50ZWNobm9tYW5jZXIudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgICAgICAgICBhY3RvckRhdGFEYXRhLnNwZWNpYWwgPSAncmVzb25hbmNlJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAoY2h1bW1lckNoYXIubWFnaWNpYW4gJiYgY2h1bW1lckNoYXIubWFnaWNpYW4udG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnKSB8fFxyXG4gICAgICAgICAgICAgICAgKGNodW1tZXJDaGFyLmFkZXB0ICYmIGNodW1tZXJDaGFyLmFkZXB0LnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJylcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICBhY3RvckRhdGFEYXRhLnNwZWNpYWwgPSAnbWFnaWMnO1xyXG4gICAgICAgICAgICAgICAgbGV0IGF0dHIgPSBbXTtcclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICBjaHVtbWVyQ2hhci50cmFkaXRpb24gJiZcclxuICAgICAgICAgICAgICAgICAgICBjaHVtbWVyQ2hhci50cmFkaXRpb24uZHJhaW5hdHRyaWJ1dGUgJiZcclxuICAgICAgICAgICAgICAgICAgICBjaHVtbWVyQ2hhci50cmFkaXRpb24uZHJhaW5hdHRyaWJ1dGUuYXR0clxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXR0ciA9IGNodW1tZXJDaGFyLnRyYWRpdGlvbi5kcmFpbmF0dHJpYnV0ZS5hdHRyO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjaHVtbWVyQ2hhci50cmFkaXRpb24gJiYgY2h1bW1lckNoYXIudHJhZGl0aW9uLmRyYWluYXR0cmlidXRlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGF0dHIgPSBjaHVtbWVyQ2hhci50cmFkaXRpb24uZHJhaW5hdHRyaWJ1dGVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zcGxpdCgnKycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGl0ZW0pID0+IGl0ZW0udHJpbSgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGF0dHIuZm9yRWFjaCgoYXR0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXR0TmFtZSA9IHRoaXMucGFyc2VBdHROYW1lKGF0dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dE5hbWUgIT09ICd3aWxscG93ZXInKSBhY3RvckRhdGFEYXRhLm1hZ2ljLmF0dHJpYnV0ZSA9IGF0dDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjaHVtbWVyQ2hhci50b3RhbGVzcykge1xyXG4gICAgICAgICAgICAgICAgYWN0b3JEYXRhRGF0YS5hdHRyaWJ1dGVzLmVzc2VuY2UudmFsdWUgPSBjaHVtbWVyQ2hhci50b3RhbGVzcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2h1bW1lckNoYXIubnV5ZW4pIHtcclxuICAgICAgICAgICAgICAgIGFjdG9yRGF0YURhdGEubnV5ZW4gPSBwYXJzZUludChjaHVtbWVyQ2hhci5udXllbi5yZXBsYWNlKCcsJywgJycpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3Igd2hpbGUgcGFyc2luZyBjaGFyYWN0ZXIgaW5mb3JtYXRpb24gJHtlfWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpbXBvcnRCaW8oYWN0b3JEYXRhRGF0YSwgY2h1bW1lckNoYXIpIHtcclxuICAgICAgICBhY3RvckRhdGFEYXRhLmRlc2NyaXB0aW9uLnZhbHVlID0gJyc7XHJcblxyXG4gICAgICAgIC8vIENodW1tZXIgb3V0cHV0cyBodG1sIGFuZCB3cmFwcyBldmVyeSBzZWN0aW9uIGluIDxwPiB0YWdzLCBcclxuICAgICAgICAvLyBzbyB3ZSBqdXN0IGNvbmNhdCBldmVyeXRoaW5nIHdpdGggYW4gYWRkaXRpb25hbCBsaW5lYnJlYWsgaW4gYmV0d2VlblxyXG4gICAgICAgIGlmIChjaHVtbWVyQ2hhci5kZXNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICBhY3RvckRhdGFEYXRhLmRlc2NyaXB0aW9uLnZhbHVlICs9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChjaHVtbWVyQ2hhci5kZXNjcmlwdGlvbiArICc8YnIvPicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNodW1tZXJDaGFyLmJhY2tncm91bmQpIHtcclxuICAgICAgICAgICAgYWN0b3JEYXRhRGF0YS5kZXNjcmlwdGlvbi52YWx1ZSArPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoY2h1bW1lckNoYXIuYmFja2dyb3VuZCArICc8YnIvPicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNodW1tZXJDaGFyLmNvbmNlcHQpIHtcclxuICAgICAgICAgICAgYWN0b3JEYXRhRGF0YS5kZXNjcmlwdGlvbi52YWx1ZSArPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoY2h1bW1lckNoYXIuY29uY2VwdCArICc8YnIvPicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNodW1tZXJDaGFyLm5vdGVzKSB7XHJcbiAgICAgICAgICAgIGFjdG9yRGF0YURhdGEuZGVzY3JpcHRpb24udmFsdWUgKz0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKGNodW1tZXJDaGFyLm5vdGVzICsgJzxici8+Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGltcG9ydEF0dHJpYnV0ZXMoYWN0b3JEYXRhRGF0YSwgY2h1bW1lckNoYXIpIHtcclxuICAgICAgICBjb25zdCBhdHRzID0gY2h1bW1lckNoYXIuYXR0cmlidXRlc1sxXS5hdHRyaWJ1dGU7XHJcbiAgICAgICAgYXR0cy5mb3JFYWNoKChhdHQpID0+IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGF0dE5hbWUgPSB0aGlzLnBhcnNlQXR0TmFtZShhdHQubmFtZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXR0TmFtZSkgeyBcclxuICAgICAgICAgICAgICAgICAgICBhY3RvckRhdGFEYXRhLmF0dHJpYnV0ZXNbYXR0TmFtZV0uYmFzZSA9IHRoaXMucGFyc2VBdHRCYXNlVmFsdWUoYXR0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3Igd2hpbGUgcGFyc2luZyBhdHRyaWJ1dGVzICR7ZX1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGltcG9ydEluaXRpYXRpdmUoYWN0b3JEYXRhRGF0YSwgY2h1bW1lckNoYXIpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhY3RvckRhdGFEYXRhLm1vZGlmaWVycy5tZWF0X2luaXRpYXRpdmUgPSBjaHVtbWVyQ2hhci5pbml0Ym9udXM7XHJcblxyXG4gICAgICAgICAgICAvLyAnaW5pdGRpY2UnIGNvbnRhaW5zIHRoZSB0b3RhbCBhbW91bnQgb2YgaW5pdGlhdGl2ZSBkaWNlLCBub3QganVzdCB0aGUgYm9udXMuXHJcbiAgICAgICAgICAgIGFjdG9yRGF0YURhdGEubW9kaWZpZXJzLm1lYXRfaW5pdGlhdGl2ZV9kaWNlID0gY2h1bW1lckNoYXIuaW5pdGRpY2UgLSAxO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3Igd2hpbGUgcGFyc2luZyBpbml0aWF0aXZlICR7ZX1gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW1wb3J0U2tpbGxzKGFjdG9yRGF0YURhdGEsIGNodW1tZXJDaGFyKSB7XHJcbiAgICAgICAgY29uc3QgY2h1bW1lclNraWxscyA9IGNodW1tZXJDaGFyLnNraWxscy5za2lsbDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNodW1tZXJTa2lsbHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNodW1tZXJTa2lsbCA9IGNodW1tZXJTa2lsbHNbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoY2h1bW1lclNraWxsLnJhdGluZyA+IDAgJiYgY2h1bW1lclNraWxsLmlzbGFuZ3VhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZGV0ZXJtaW5lZEdyb3VwID0gJ2FjdGl2ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnNlZFNraWxsID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHJhbmRvbUlEKDE2KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2h1bW1lclNraWxsLmlzbGFuZ3VhZ2UgJiYgY2h1bW1lclNraWxsLmlzbGFuZ3VhZ2UudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZFNraWxsID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdG9yRGF0YURhdGEuc2tpbGxzLmxhbmd1YWdlLnZhbHVlW2lkXSA9IHBhcnNlZFNraWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRlcm1pbmVkR3JvdXAgPSAnbGFuZ3VhZ2UnO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY2h1bW1lclNraWxsLmtub3dsZWRnZSAmJiBjaHVtbWVyU2tpbGwua25vd2xlZGdlLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXRlZ29yeSA9IGNodW1tZXJTa2lsbC5za2lsbGNhdGVnb3J5X2VuZ2xpc2g7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZFNraWxsID0ge307XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIGNvcnJlY3Qga25vd2xlZGdlIHNraWxsIGNhdGVnb3J5IGFuZCBhc3NpZ24gdGhlIHNraWxsIHRvIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBza2lsbENhdGVnb3J5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2F0ZWdvcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhdCA9IGNhdGVnb3J5LnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2F0ID09PSAnc3RyZWV0JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2lsbENhdGVnb3J5ID0gYWN0b3JEYXRhRGF0YS5za2lsbHMua25vd2xlZGdlLnN0cmVldC52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYXQgPT09ICdhY2FkZW1pYycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpbGxDYXRlZ29yeSA9IGFjdG9yRGF0YURhdGEuc2tpbGxzLmtub3dsZWRnZS5hY2FkZW1pYy52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYXQgPT09ICdwcm9mZXNzaW9uYWwnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraWxsQ2F0ZWdvcnkgPSBhY3RvckRhdGFEYXRhLnNraWxscy5rbm93bGVkZ2UucHJvZmVzc2lvbmFsLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhdCA9PT0gJ2ludGVyZXN0JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2lsbENhdGVnb3J5ID0gYWN0b3JEYXRhRGF0YS5za2lsbHMua25vd2xlZGdlLmludGVyZXN0cy52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChza2lsbENhdGVnb3J5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraWxsQ2F0ZWdvcnlbaWRdID0gcGFyc2VkU2tpbGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNodW1tZXJTa2lsbC5hdHRyaWJ1dGUudG9Mb3dlckNhc2UoKSA9PT0gJ2ludCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RvckRhdGFEYXRhLnNraWxscy5rbm93bGVkZ2Uuc3RyZWV0LnZhbHVlW2lkXSA9IHBhcnNlZFNraWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNodW1tZXJTa2lsbC5hdHRyaWJ1dGUudG9Mb3dlckNhc2UoKSA9PT0gJ2xvZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RvckRhdGFEYXRhLnNraWxscy5rbm93bGVkZ2UucHJvZmVzc2lvbmFsLnZhbHVlW2lkXSA9IHBhcnNlZFNraWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGVybWluZWRHcm91cCA9ICdrbm93bGVkZ2UnO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuYW1lID0gY2h1bW1lclNraWxsLm5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxzL2csICdfJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8tL2csICdfJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYW1lLmluY2x1ZGVzKCdleG90aWMnKSAmJiBuYW1lLmluY2x1ZGVzKCdfd2VhcG9uJykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKCdfd2VhcG9uJywgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gJ3BpbG90X3dhdGVyY3JhZnQnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9ICdwaWxvdF93YXRlcl9jcmFmdCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZFNraWxsID0gYWN0b3JEYXRhRGF0YS5za2lsbHMuYWN0aXZlW25hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZFNraWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBDb3VsZG4ndCBwYXJzZSBza2lsbCAke2NodW1tZXJTa2lsbC5uYW1lfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWRTa2lsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGV0ZXJtaW5lZEdyb3VwICE9PSAnYWN0aXZlJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZFNraWxsLm5hbWUgPSBjaHVtbWVyU2tpbGwubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkU2tpbGwuYmFzZSA9IHBhcnNlSW50KGNodW1tZXJTa2lsbC5yYXRpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNodW1tZXJTa2lsbC5za2lsbHNwZWNpYWxpemF0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkU2tpbGwuc3BlY3MgPSB0aGlzLmdldEFycmF5KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW1tZXJTa2lsbC5za2lsbHNwZWNpYWxpemF0aW9ucy5za2lsbHNwZWNpYWxpemF0aW9uLm5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZFNraWxsID0gX21lcmdlV2l0aE1pc3NpbmdTa2lsbEZpZWxkcyhwYXJzZWRTa2lsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbn1cclxuXHJcbiIsImltcG9ydCB7IHBhcnNlRGVzY3JpcHRpb24sIGdldEFycmF5LCBjcmVhdGVJdGVtRGF0YSB9IGZyb20gXCIuL0Jhc2VQYXJzZXJGdW5jdGlvbnMuanNcIlxyXG5cclxuZXhwb3J0IGNsYXNzIENvbnRhY3RQYXJzZXIge1xyXG4gICAgcGFyc2VDb250YWN0cyhjaHVtbWVyQ2hhcikge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNodW1tZXJDb250YWN0cyA9IGdldEFycmF5KGNodW1tZXJDaGFyLmNvbnRhY3RzLmNvbnRhY3QpO1xyXG4gICAgICAgIGNvbnN0IHBhcnNlZENvbnRhY3RzID0gW107XHJcblxyXG4gICAgICAgIGNodW1tZXJDb250YWN0cy5mb3JFYWNoKChjaHVtbWVyQ29udGFjdCkgPT4ge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbURhdGEgPSB0aGlzLnBhcnNlQ29udGFjdChjaHVtbWVyQ29udGFjdCk7XHJcbiAgICAgICAgICAgICAgICBwYXJzZWRDb250YWN0cy5wdXNoKGl0ZW1EYXRhKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcGFyc2VkQ29udGFjdHM7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VDb250YWN0KGNodW1tZXJDb250YWN0KSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHt9O1xyXG4gICAgICAgIGRhdGEudHlwZSA9IGNodW1tZXJDb250YWN0LnJvbGU7XHJcblxyXG4gICAgICAgIC8vIEdyb3VwIGNvbnRhY3RzIGFyZSBzdG9yZWQgaW4gY2h1bW1lciBhcyAnR3JvdXAoY29ubmVjdGlvblJhdGluZyknLCBlLmcuICdHcm91cCg1KSdcclxuICAgICAgICAvLyBXZSBoYW5kbGUgZ3JvdXAgY29udGFjdHMgYXMgbm9ybWFsIGNvbnRhY3RzIHVudGlsIHRoZXkgYXJlIHN1cHBvcnRlZCBpbiB0aGUgY29kZWJhc2UuXHJcbiAgICAgICAgaWYgKGNodW1tZXJDb250YWN0LmNvbm5lY3Rpb24udG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZ3JvdXAnKSkge1xyXG4gICAgICAgICAgICBkYXRhLmNvbm5lY3Rpb24gPSBjaHVtbWVyQ29udGFjdC5jb25uZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoJ2dyb3VwKCcsICcnKVxyXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoJyknLCAnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkYXRhLmNvbm5lY3Rpb24gPSBjaHVtbWVyQ29udGFjdC5jb25uZWN0aW9uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGF0YS5sb3lhbHR5ID0gY2h1bW1lckNvbnRhY3QubG95YWx0eTtcclxuICAgICAgICBkYXRhLmZhbWlseSA9IChjaHVtbWVyQ29udGFjdC5mYW1pbHkudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnKTtcclxuICAgICAgICBkYXRhLmJsYWNrbWFpbCA9IChjaHVtbWVyQ29udGFjdC5ibGFja21haWwudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnKTtcclxuICAgICAgICBkYXRhLmRlc2NyaXB0aW9uID0gcGFyc2VEZXNjcmlwdGlvbihjaHVtbWVyQ29udGFjdCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGl0ZW1OYW1lID0gY2h1bW1lckNvbnRhY3QubmFtZSA/IGNodW1tZXJDb250YWN0Lm5hbWUgOiAnW1VubmFtZWQgY29ubmVjdGlvbl0nO1xyXG4gICAgICAgIGNvbnN0IGl0ZW1EYXRhID0gY3JlYXRlSXRlbURhdGEoaXRlbU5hbWUsICdjb250YWN0JywgZGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1EYXRhO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgcGFyc2VEZXNjcmlwdGlvbiwgZ2V0QXJyYXksIHBhcnNlVGVjaG5vbG9neSwgY3JlYXRlSXRlbURhdGEgfSBmcm9tIFwiLi9CYXNlUGFyc2VyRnVuY3Rpb25zLmpzXCJcclxuXHJcbmV4cG9ydCBjbGFzcyBDeWJlcndhcmVQYXJzZXIge1xyXG4gICBcclxuICAgIHBhcnNlQ3liZXJ3YXJlcyhjaHVtbWVyQ2hhcikge1xyXG4gICAgICAgIGNvbnN0IGNodW1tZXJDeWJlcndhcmVzID0gZ2V0QXJyYXkoY2h1bW1lckNoYXIuY3liZXJ3YXJlcy5jeWJlcndhcmUpO1xyXG4gICAgICAgIGNvbnN0IHBhcnNlZEN5YmVyd2FyZSA9IFtdO1xyXG4gICAgICAgIGNodW1tZXJDeWJlcndhcmVzLmZvckVhY2goKGNodW1tZXJDeWJlcikgPT4ge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbURhdGEgPSB0aGlzLnBhcnNlQ3liZXJ3YXJlKGNodW1tZXJDeWJlcik7XHJcbiAgICAgICAgICAgICAgICBwYXJzZWRDeWJlcndhcmUucHVzaChpdGVtRGF0YSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHBhcnNlZEN5YmVyd2FyZTtcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZUN5YmVyd2FyZShjaHVtbWVyQ3liZXIpIHtcclxuICAgICAgICBjb25zdCBkYXRhID0ge307XHJcbiAgICAgICAgZGF0YS5kZXNjcmlwdGlvbiA9IHBhcnNlRGVzY3JpcHRpb24oY2h1bW1lckN5YmVyKTtcclxuICAgICAgICBkYXRhLnRlY2hub2xvZ3kgPSBwYXJzZVRlY2hub2xvZ3koY2h1bW1lckN5YmVyKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDeWJlcndhcmUgaGFzIG5vIGVxdWlwcGVkIGZsYWcgaW4gY2h1bW1lciBzbyBpdCBjYW5ub3QgYmUgcGFyc2VkIC0gd2UgY29uc2lkZXIgaXQgYXMgYWx3YXlzIGVxdWlwcGVkXHJcbiAgICAgICAgZGF0YS50ZWNobm9sb2d5LmVxdWlwcGVkID0gdHJ1ZTtcclxuICAgICAgICBkYXRhLmVzc2VuY2UgPSBjaHVtbWVyQ3liZXIuZXNzO1xyXG4gICAgICAgIGRhdGEuZ3JhZGUgPSBjaHVtbWVyQ3liZXIuZ3JhZGU7XHJcblxyXG4gICAgICAgIHJldHVybiBjcmVhdGVJdGVtRGF0YShjaHVtbWVyQ3liZXIubmFtZSwgJ2N5YmVyd2FyZScsIGRhdGEpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgZ2V0QXJyYXkgfSBmcm9tIFwiLi9CYXNlUGFyc2VyRnVuY3Rpb25zLmpzXCJcclxuaW1wb3J0IHsgR2VhcnNQYXJzZXIgfSBmcm9tIFwiLi9nZWFySW1wb3J0L0dlYXJzUGFyc2VyXCJcclxuaW1wb3J0IHsgQXJtb3JQYXJzZXIgfSBmcm9tIFwiLi9Bcm1vclBhcnNlclwiO1xyXG5pbXBvcnQgeyBDeWJlcndhcmVQYXJzZXIgfSBmcm9tIFwiLi9DeWJlcndhcmVQYXJzZXJcIjtcclxuaW1wb3J0IHsgUXVhbGl0eVBhcnNlciB9IGZyb20gXCIuL1F1YWxpdHlQYXJzZXJcIjtcclxuaW1wb3J0IHsgUG93ZXJQYXJzZXIgfSBmcm9tIFwiLi9Qb3dlclBhcnNlclwiO1xyXG5pbXBvcnQgeyBTcGVsbFBhcnNlciB9IGZyb20gXCIuL1NwZWxsUGFyc2VyXCI7XHJcbmltcG9ydCB7IFdlYXBvblBhcnNlciB9IGZyb20gXCIuL1dlYXBvblBhcnNlclwiO1xyXG5pbXBvcnQgeyBMaWZlc3R5bGVQYXJzZXIgfSBmcm9tIFwiLi9MaWZlc3R5bGVQYXJzZXJcIjtcclxuaW1wb3J0IHsgQ29udGFjdFBhcnNlciB9IGZyb20gXCIuL0NvbnRhY3RQYXJzZXJcIjtcclxuXHJcbi8qKlxyXG4gKiBQYXJzZXMgYWxsIGl0ZW1zIChxdWFsaXRpZXMsIHdlYXBvbnMsIGdlYXIsIC4uLikgZnJvbSBhIGNodW1tZXIgY2hhcmFjdGVyLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEl0ZW1zUGFyc2VyIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlcyBhbGwgaXRlbXMgZnJvbSBhIGNodW1tZXIgY2hhciBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiB0aGUgY29ycmVzcG9uZGluZyBmb3VuZHJ5IGl0ZW1zLlxyXG4gICAgICogQHBhcmFtIHsqfSBjaHVtbWVyQ2hhciBUaGUgY2h1bW1lciBjaGFyIGhvbGRpbmcgdGhlIGl0ZW1zXHJcbiAgICAgKiBAcGFyYW0geyp9IGltcG9ydE9wdGlvbnMgQWRkaXRpb25hbCBpbXBvcnQgb3B0aW9uIHRoYXQgc3BlY2lmeSB3aGF0IGl0ZW1zIHdpbGwgYmUgaW1wb3J0ZWQuXHJcbiAgICAgKi9cclxuICAgIHBhcnNlKGNodW1tZXJDaGFyLCBpbXBvcnRPcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3QgcGFyc2VkSXRlbXMgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKGltcG9ydE9wdGlvbnMucXVhbGl0aWVzICYmIGNodW1tZXJDaGFyLnF1YWxpdGllcyAmJiBjaHVtbWVyQ2hhci5xdWFsaXRpZXMucXVhbGl0eSkge1xyXG4gICAgICAgICAgICBjb25zdCBwYXJzZWRRdWFsaXRpZXMgPSBuZXcgUXVhbGl0eVBhcnNlcigpLnBhcnNlUXVhbGl0aWVzKGNodW1tZXJDaGFyKTtcclxuICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkocGFyc2VkSXRlbXMsIHBhcnNlZFF1YWxpdGllcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaW1wb3J0T3B0aW9ucy53ZWFwb25zICYmIGNodW1tZXJDaGFyLndlYXBvbnMgIT0gbnVsbCAmJiBjaHVtbWVyQ2hhci53ZWFwb25zLndlYXBvbiAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZFdlYXBvbnMgPSBuZXcgV2VhcG9uUGFyc2VyKCkucGFyc2VXZWFwb25zKGNodW1tZXJDaGFyKTtcclxuICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkocGFyc2VkSXRlbXMsIHBhcnNlZFdlYXBvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGltcG9ydE9wdGlvbnMuYXJtb3IgJiYgY2h1bW1lckNoYXIuYXJtb3JzICYmIGNodW1tZXJDaGFyLmFybW9ycy5hcm1vcikge1xyXG4gICAgICAgICAgICBjb25zdCBwYXJzZWRBcm1vcnMgPSBuZXcgQXJtb3JQYXJzZXIoKS5wYXJzZUFybW9ycyhjaHVtbWVyQ2hhcik7XHJcbiAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHBhcnNlZEl0ZW1zLCBwYXJzZWRBcm1vcnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGltcG9ydE9wdGlvbnMuY3liZXJ3YXJlICYmIGNodW1tZXJDaGFyLmN5YmVyd2FyZXMgJiYgY2h1bW1lckNoYXIuY3liZXJ3YXJlcy5jeWJlcndhcmUpIHtcclxuICAgICAgICAgICAgY29uc3QgcGFyc2VkQ3liZXJ3YXJlID0gbmV3IEN5YmVyd2FyZVBhcnNlcigpLnBhcnNlQ3liZXJ3YXJlcyhjaHVtbWVyQ2hhcik7XHJcbiAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHBhcnNlZEl0ZW1zLCBwYXJzZWRDeWJlcndhcmUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGltcG9ydE9wdGlvbnMucG93ZXJzICYmIGNodW1tZXJDaGFyLnBvd2VycyAmJiBjaHVtbWVyQ2hhci5wb3dlcnMucG93ZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgcGFyc2VkUG93ZXJzID0gbmV3IFBvd2VyUGFyc2VyKCkucGFyc2VQb3dlcnMoY2h1bW1lckNoYXIpO1xyXG4gICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShwYXJzZWRJdGVtcywgcGFyc2VkUG93ZXJzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpbXBvcnRPcHRpb25zLmVxdWlwbWVudCAmJiBjaHVtbWVyQ2hhci5nZWFycyAmJiBjaHVtbWVyQ2hhci5nZWFycy5nZWFyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdlYXJzID0gZ2V0QXJyYXkoY2h1bW1lckNoYXIuZ2VhcnMuZ2Vhcik7XHJcbiAgICAgICAgICAgIGNvbnN0IGFsbEdlYXJEYXRhID0gbmV3IEdlYXJzUGFyc2VyKCkucGFyc2VHZWFycyhnZWFycyk7XHJcbiAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHBhcnNlZEl0ZW1zLCBhbGxHZWFyRGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaW1wb3J0T3B0aW9ucy5zcGVsbHMgJiYgY2h1bW1lckNoYXIuc3BlbGxzICYmIGNodW1tZXJDaGFyLnNwZWxscy5zcGVsbCkge1xyXG4gICAgICAgICAgICBjb25zdCBwYXJzZWRTcGVsbHMgPSBuZXcgU3BlbGxQYXJzZXIoKS5wYXJzZVNwZWxscyhjaHVtbWVyQ2hhcik7XHJcbiAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHBhcnNlZEl0ZW1zLCBwYXJzZWRTcGVsbHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGltcG9ydE9wdGlvbnMuY29udGFjdHMgJiYgY2h1bW1lckNoYXIuY29udGFjdHMgJiYgY2h1bW1lckNoYXIuY29udGFjdHMuY29udGFjdCkge1xyXG4gICAgICAgICAgICBjb25zdCBwYXJzZWRDb250YWN0cyA9IG5ldyBDb250YWN0UGFyc2VyKCkucGFyc2VDb250YWN0cyhjaHVtbWVyQ2hhcik7XHJcbiAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHBhcnNlZEl0ZW1zLCBwYXJzZWRDb250YWN0cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaW1wb3J0T3B0aW9ucy5saWZlc3R5bGVzICYmIGNodW1tZXJDaGFyLmxpZmVzdHlsZXMgJiYgY2h1bW1lckNoYXIubGlmZXN0eWxlcy5saWZlc3R5bGUpIHtcclxuICAgICAgICAgICAgY29uc3QgcGFyc2VkTGlmZXN0eWxlcyA9IG5ldyBMaWZlc3R5bGVQYXJzZXIoKS5wYXJzZUxpZmVzdHlsZXMoY2h1bW1lckNoYXIpO1xyXG4gICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShwYXJzZWRJdGVtcywgcGFyc2VkTGlmZXN0eWxlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcGFyc2VkSXRlbXM7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgcGFyc2VEZXNjcmlwdGlvbiwgZ2V0QXJyYXksIGNyZWF0ZUl0ZW1EYXRhIH0gZnJvbSBcIi4vQmFzZVBhcnNlckZ1bmN0aW9ucy5qc1wiXHJcbmltcG9ydCB7U1I1fSBmcm9tIFwiLi4vLi4vY29uZmlnXCJcclxuXHJcbmV4cG9ydCBjbGFzcyBMaWZlc3R5bGVQYXJzZXIge1xyXG4gICAgcGFyc2VMaWZlc3R5bGVzKGNodW1tZXJDaGFyKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY2h1bW1lckxpZmVzdHlsZSA9IGdldEFycmF5KGNodW1tZXJDaGFyLmxpZmVzdHlsZXMubGlmZXN0eWxlKTtcclxuICAgICAgICBjb25zdCBwYXJzZWRMaWZlc3R5bGUgPSBbXTtcclxuXHJcbiAgICAgICAgY2h1bW1lckxpZmVzdHlsZS5mb3JFYWNoKChjaHVtbWVyTGlmZXN0eWxlKSA9PiB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtRGF0YSA9IHRoaXMucGFyc2VMaWZlc3R5bGUoY2h1bW1lckxpZmVzdHlsZSk7XHJcbiAgICAgICAgICAgICAgICBwYXJzZWRMaWZlc3R5bGUucHVzaChpdGVtRGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBwYXJzZWRMaWZlc3R5bGU7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VMaWZlc3R5bGUoY2h1bW1lckxpZmVzdHlsZSkge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7fTtcclxuXHJcbiAgICAgICAgLy8gQWR2YW5jZWQgbGlmZXN0eWxlcyBhbmQgbGlmZXN0eWxlIHF1YWxpdGllcyBhcmUgbm90IHN1cHBvcnRlZCBhdCB0aGUgbW9tZW50XHJcbiAgICAgICAgLy8gTWFwIHRoZSBjaHVtbWVyIGxpZmVzdHlsZSB0eXBlIHRvIG91ciBzcjUgZm91bmRyeSB0eXBlLiBcclxuICAgICAgICBjb25zdCBjaHVtbWVyTGlmZXN0eWxlVHlwZSA9IGNodW1tZXJMaWZlc3R5bGUuYmFzZWxpZmVzdHlsZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGlmICgoY2h1bW1lckxpZmVzdHlsZVR5cGUgaW4gU1I1LmxpZmVzdHlsZVR5cGVzKSkge1xyXG4gICAgICAgICAgICBkYXRhLnR5cGUgPSBjaHVtbWVyTGlmZXN0eWxlVHlwZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugb2YgYSB0eXBvIGluIFNSNSBjb25maWcuXHJcbiAgICAgICAgICAgIGlmIChjaHVtbWVyTGlmZXN0eWxlVHlwZSA9PT0gJ2x1eHVyeScpIHtcclxuICAgICAgICAgICAgICAgIGRhdGEudHlwZSA9ICdsdXhvcnknO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGF0YS50eXBlID0gJ290aGVyJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGF0YS5jb3N0ID0gY2h1bW1lckxpZmVzdHlsZS50b3RhbG1vbnRobHljb3N0O1xyXG4gICAgICAgIGRhdGEucGVybWFuZW50ID0gY2h1bW1lckxpZmVzdHlsZS5wdXJjaGFzZWQ7XHJcbiAgICAgICAgZGF0YS5kZXNjcmlwdGlvbiA9IHBhcnNlRGVzY3JpcHRpb24oY2h1bW1lckxpZmVzdHlsZSk7XHJcblxyXG4gICAgICAgIC8vIFRoZSBuYW1lIG9mIHRoZSBsaWZlc3R5bGUgaXMgb3B0aW9uYWwsIHNvIHdlIHVzZSBhIGZhbGxiYWNrIGhlcmUuXHJcbiAgICAgICAgY29uc3QgaXRlbU5hbWUgPSBjaHVtbWVyTGlmZXN0eWxlLm5hbWUgPyBjaHVtbWVyTGlmZXN0eWxlLm5hbWUgOiBjaHVtbWVyTGlmZXN0eWxlLmJhc2VsaWZlc3R5bGU7XHJcbiAgICAgICAgY29uc3QgaXRlbURhdGEgPSBjcmVhdGVJdGVtRGF0YShpdGVtTmFtZSwgJ2xpZmVzdHlsZScsIGRhdGEpO1xyXG4gICAgICAgIHJldHVybiBpdGVtRGF0YTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IHBhcnNlRGVzY3JpcHRpb24sIGdldEFycmF5LCBjcmVhdGVJdGVtRGF0YSB9IGZyb20gXCIuL0Jhc2VQYXJzZXJGdW5jdGlvbnMuanNcIlxyXG5cclxuZXhwb3J0IGNsYXNzIFBvd2VyUGFyc2VyIHtcclxuXHJcbiAgICBwYXJzZVBvd2VycyhjaHVtbWVyQ2hhcikge1xyXG4gICAgICAgIGNvbnN0IHBvd2VycyA9IGdldEFycmF5KGNodW1tZXJDaGFyLnBvd2Vycy5wb3dlcik7XHJcbiAgICAgICAgY29uc3QgcGFyc2VkUG93ZXJzID0gW107XHJcblxyXG4gICAgICAgIHBvd2Vycy5mb3JFYWNoKChjaHVtbWVyUG93ZXIpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaXRlbURhdGEgPSB0aGlzLnBhcnNlUG93ZXIoY2h1bW1lclBvd2VyKTtcclxuICAgICAgICAgICAgcGFyc2VkUG93ZXJzLnB1c2goaXRlbURhdGEpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcGFyc2VkUG93ZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlUG93ZXIoY2h1bW1lclBvd2VyKSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHt9O1xyXG4gICAgICAgIGRhdGEuZGVzY3JpcHRpb24gPSBwYXJzZURlc2NyaXB0aW9uKGNodW1tZXJQb3dlcik7XHJcblxyXG4gICAgICAgIGRhdGEubGV2ZWwgPSBwYXJzZUludChjaHVtbWVyUG93ZXIucmF0aW5nKTtcclxuICAgICAgICBkYXRhLnBwID0gcGFyc2VGbG9hdChjaHVtbWVyUG93ZXIudG90YWxwb2ludHMpO1xyXG4gICAgICAgIGNvbnN0IGl0ZW1EYXRhID0gY3JlYXRlSXRlbURhdGEoY2h1bW1lclBvd2VyLmZ1bGxuYW1lLCAnYWRlcHRfcG93ZXInLCBkYXRhKTtcclxuICAgICAgICByZXR1cm4gaXRlbURhdGE7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBwYXJzZURlc2NyaXB0aW9uLCBnZXRBcnJheSwgY3JlYXRlSXRlbURhdGEgfSBmcm9tIFwiLi9CYXNlUGFyc2VyRnVuY3Rpb25zLmpzXCJcclxuaW1wb3J0IHsgRGVmYXVsdFZhbHVlcyB9IGZyb20gXCIuLi8uLi9kYXRhVGVtcGxhdGVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUXVhbGl0eVBhcnNlciB7XHJcbiAgIFxyXG4gICAgcGFyc2VRdWFsaXRpZXMoY2h1bW1lckNoYXIpIHtcclxuICAgICAgICBjb25zdCBxdWFsaXRpZXMgPSBnZXRBcnJheShjaHVtbWVyQ2hhci5xdWFsaXRpZXMucXVhbGl0eSk7XHJcbiAgICAgICAgY29uc3QgcGFyc2VkUXVhbGl0aWVzID0gW107XHJcblxyXG4gICAgICAgIHF1YWxpdGllcy5mb3JFYWNoKChjaHVtbWVyUXVhbGl0eSkgPT4ge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbURhdGEgPSB0aGlzLnBhcnNlUXVhbGl0eShjaHVtbWVyUXVhbGl0eSk7XHJcbiAgICAgICAgICAgICAgICBwYXJzZWRRdWFsaXRpZXMucHVzaChpdGVtRGF0YSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHBhcnNlZFF1YWxpdGllcztcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZVF1YWxpdHkoY2h1bW1lclF1YWxpdHkpIHtcclxuICAgICAgICBjb25zdCBkYXRhID0gRGVmYXVsdFZhbHVlcy5xdWFsaXR5RGF0YSgpO1xyXG4gICAgICAgIGRhdGEudHlwZSA9IGNodW1tZXJRdWFsaXR5LnF1YWxpdHl0eXBlLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgZGF0YS5kZXNjcmlwdGlvbiA9IHBhcnNlRGVzY3JpcHRpb24oY2h1bW1lclF1YWxpdHkpO1xyXG5cclxuICAgICAgICBjb25zdCBpdGVtRGF0YSA9IGNyZWF0ZUl0ZW1EYXRhKGNodW1tZXJRdWFsaXR5Lm5hbWUsICdxdWFsaXR5JywgZGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1EYXRhO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgcGFyc2VEZXNjcmlwdGlvbiwgZ2V0QXJyYXksIGNyZWF0ZUl0ZW1EYXRhIH0gZnJvbSBcIi4vQmFzZVBhcnNlckZ1bmN0aW9ucy5qc1wiXHJcblxyXG5leHBvcnQgY2xhc3MgU3BlbGxQYXJzZXIge1xyXG4gICAgcGFyc2VTcGVsbHMoY2h1bW1lckNoYXIpIHtcclxuICAgICAgICBjb25zdCBzcGVsbHMgPSBnZXRBcnJheShjaHVtbWVyQ2hhci5zcGVsbHMuc3BlbGwpO1xyXG4gICAgICAgIGNvbnN0IHBhcnNlZFNwZWxscyA9IFtdO1xyXG4gICAgICAgIHNwZWxscy5mb3JFYWNoKChjaHVtbWVyU3BlbGwpID0+IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmIChjaHVtbWVyU3BlbGwuYWxjaGVteS50b0xvd2VyQ2FzZSgpICE9PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtRGF0YSA9IHRoaXMucGFyc2VTcGVsbChjaHVtbWVyU3BlbGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZFNwZWxscy5wdXNoKGl0ZW1EYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcGFyc2VkU3BlbGxzO1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlU3BlbGwoY2h1bW1lclNwZWxsKSB7XHJcbiAgICAgICAgY29uc3QgYWN0aW9uID0ge307XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHt9O1xyXG4gICAgICAgIGRhdGEuYWN0aW9uID0gYWN0aW9uO1xyXG4gICAgICAgIGRhdGEuY2F0ZWdvcnkgPSBjaHVtbWVyU3BlbGwuY2F0ZWdvcnkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgJ18nKTtcclxuICAgICAgICBkYXRhLm5hbWUgPSBjaHVtbWVyU3BlbGwubmFtZTtcclxuICAgICAgICBkYXRhLnR5cGUgPSBjaHVtbWVyU3BlbGwudHlwZSA9PT0gJ00nID8gJ21hbmEnIDogJ3BoeXNpY2FsJztcclxuICAgICAgICBkYXRhLnJhbmdlID1cclxuICAgICAgICAgICAgY2h1bW1lclNwZWxsLnJhbmdlID09PSAnVCdcclxuICAgICAgICAgICAgICAgID8gJ3RvdWNoJ1xyXG4gICAgICAgICAgICAgICAgOiBjaHVtbWVyU3BlbGwucmFuZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xccy9nLCAnXycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCcoJywgJycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCcpJywgJycpO1xyXG4gICAgICAgIGRhdGEuZHJhaW4gPSBwYXJzZUludChjaHVtbWVyU3BlbGwuZHYucmVwbGFjZSgnRicsICcnKSk7XHJcbiAgICAgICAgZGF0YS5kZXNjcmlwdGlvbiA9IHBhcnNlRGVzY3JpcHRpb24oY2h1bW1lclNwZWxsKTtcclxuXHJcbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uID0gJyc7XHJcbiAgICAgICAgaWYgKGNodW1tZXJTcGVsbC5kZXNjcmlwdG9ycykgZGVzY3JpcHRpb24gPSBjaHVtbWVyU3BlbGwuZGVzY3JpcHRvcnM7XHJcbiAgICAgICAgaWYgKGNodW1tZXJTcGVsbC5kZXNjcmlwdGlvbikgZGVzY3JpcHRpb24gKz0gYFxcbiR7Y2h1bW1lclNwZWxsLmRlc2NyaXB0aW9ufWA7XHJcbiAgICAgICAgZGF0YS5kZXNjcmlwdGlvbi52YWx1ZSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChkZXNjcmlwdGlvbik7XHJcblxyXG4gICAgICAgIGlmIChjaHVtbWVyU3BlbGwuZHVyYXRpb24udG9Mb3dlckNhc2UoKSA9PT0gJ3MnKSBkYXRhLmR1cmF0aW9uID0gJ3N1c3RhaW5lZCc7XHJcbiAgICAgICAgZWxzZSBpZiAoY2h1bW1lclNwZWxsLmR1cmF0aW9uLnRvTG93ZXJDYXNlKCkgPT09ICdpJylcclxuICAgICAgICAgICAgZGF0YS5kdXJhdGlvbiA9ICdpbnN0YW50JztcclxuICAgICAgICBlbHNlIGlmIChjaHVtbWVyU3BlbGwuZHVyYXRpb24udG9Mb3dlckNhc2UoKSA9PT0gJ3AnKVxyXG4gICAgICAgICAgICBkYXRhLmR1cmF0aW9uID0gJ3Blcm1hbmVudCc7XHJcblxyXG4gICAgICAgIGFjdGlvbi50eXBlID0gJ3Zhcmllcyc7XHJcbiAgICAgICAgYWN0aW9uLnNraWxsID0gJ3NwZWxsY2FzdGluZyc7XHJcbiAgICAgICAgYWN0aW9uLmF0dHJpYnV0ZSA9ICdtYWdpYyc7XHJcblxyXG4gICAgICAgIGlmIChjaHVtbWVyU3BlbGwuZGVzY3JpcHRvcnMpIHtcclxuICAgICAgICAgICAgY29uc3QgZGVzYyA9IGNodW1tZXJTcGVsbC5kZXNjcmlwdG9ycy50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICBpZiAoY2h1bW1lclNwZWxsLmNhdGVnb3J5LnRvTG93ZXJDYXNlKCkgPT09ICdjb21iYXQnKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhLmNvbWJhdCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgaWYgKGRlc2MuaW5jbHVkZXMoJ2RpcmVjdCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5jb21iYXQudHlwZSA9ICdpbmRpcmVjdCc7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uLm9wcG9zZWQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkZWZlbnNlJyxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLmNvbWJhdC50eXBlID0gJ2RpcmVjdCc7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ21hbmEnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbi5vcHBvc2VkID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2N1c3RvbScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6ICd3aWxscG93ZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAncGh5c2ljYWwnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbi5vcHBvc2VkID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2N1c3RvbScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6ICdib2R5JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNodW1tZXJTcGVsbC5jYXRlZ29yeS50b0xvd2VyQ2FzZSgpID09PSAnZGV0ZWN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgZGF0YS5kZXRlY3Rpb24gPSB7fTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNwbGl0ID0gZGVzYy5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICAgICAgc3BsaXQuZm9yRWFjaCgodG9rZW4pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IHRva2VuIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuID0gdG9rZW4ucmVwbGFjZSgnIGRldGVjdGlvbiBzcGVsbCcsICcnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRva2VuKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuLmluY2x1ZGVzKCdhcmVhJykpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuLmluY2x1ZGVzKCdwYXNzaXZlJykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZGV0ZWN0aW9uLnBhc3NpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRva2VuLmluY2x1ZGVzKCdhY3RpdmUnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5kZXRlY3Rpb24ucGFzc2l2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRva2VuKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmRldGVjdGlvbi50eXBlID0gdG9rZW4udG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhLmRldGVjdGlvbi5wYXNzaXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uLm9wcG9zZWQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjdXN0b20nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6ICd3aWxscG93ZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGUyOiAnbG9naWMnLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNodW1tZXJTcGVsbC5jYXRlZ29yeS50b0xvd2VyQ2FzZSgpID09PSAnaWxsdXNpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhLmlsbHVzaW9uID0ge307XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcGxpdCA9IGRlc2Muc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgICAgIHNwbGl0LmZvckVhY2goKHRva2VuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW4gPSB0b2tlbiB8fCAnJztcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IHRva2VuLnJlcGxhY2UoJyBpbGx1c2lvbiBzcGVsbCcsICcnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRva2VuKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuLmluY2x1ZGVzKCdhcmVhJykpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuLmluY2x1ZGVzKCdzZW5zZScpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmlsbHVzaW9uLnNlbnNlID0gdG9rZW4udG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0b2tlbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5pbGx1c2lvbi50eXBlID0gdG9rZW4udG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ21hbmEnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uLm9wcG9zZWQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjdXN0b20nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6ICd3aWxscG93ZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGUyOiAnbG9naWMnLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbi5vcHBvc2VkID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY3VzdG9tJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlOiAnaW50dWl0aW9uJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlMjogJ2xvZ2ljJyxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjaHVtbWVyU3BlbGwuY2F0ZWdvcnkudG9Mb3dlckNhc2UoKSA9PT0gJ21hbmlwdWxhdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIGRhdGEubWFuaXB1bGF0aW9uID0ge307XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVzYy5pbmNsdWRlcygnZW52aXJvbm1lbnRhbCcpKVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEubWFuaXB1bGF0aW9uLmVudmlyb25tZW50YWwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRlc2MuaW5jbHVkZXMoJ3BoeXNpY2FsJykpXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5tYW5pcHVsYXRpb24ucGh5c2ljYWwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRlc2MuaW5jbHVkZXMoJ21lbnRhbCcpKVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEubWFuaXB1bGF0aW9uLm1lbnRhbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPIGZpZ3VyZSBvdXQgaG93IHRvIHBhcnNlIGRhbWFnaW5nXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEubWFuaXB1bGF0aW9uLm1lbnRhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbi5vcHBvc2VkID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY3VzdG9tJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlOiAnd2lsbHBvd2VyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlMjogJ2xvZ2ljJyxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEubWFuaXB1bGF0aW9uLnBoeXNpY2FsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uLm9wcG9zZWQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjdXN0b20nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6ICdib2R5JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlMjogJ3N0cmVuZ3RoJyxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY3JlYXRlSXRlbURhdGEoY2h1bW1lclNwZWxsLm5hbWUsICdzcGVsbCcsIGRhdGEpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgcGFyc2VEZXNjcmlwdGlvbiwgZ2V0QXJyYXksIGdldFZhbHVlcywgcGFyc2VUZWNobm9sb2d5LCBjcmVhdGVJdGVtRGF0YSB9IGZyb20gXCIuL0Jhc2VQYXJzZXJGdW5jdGlvbnMuanNcIlxyXG5cclxuZXhwb3J0IGNsYXNzIFdlYXBvblBhcnNlciB7XHJcbiAgICBwYXJzZURhbWFnZSA9ICh2YWwpID0+IHtcclxuICAgICAgICBjb25zdCBkYW1hZ2UgPSB7XHJcbiAgICAgICAgICAgIGRhbWFnZTogMCxcclxuICAgICAgICAgICAgdHlwZTogJ3BoeXNpY2FsJyxcclxuICAgICAgICAgICAgcmFkaXVzOiAwLFxyXG4gICAgICAgICAgICBkcm9wb2ZmOiAwLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3Qgc3BsaXQgPSB2YWwuc3BsaXQoJywnKTtcclxuICAgICAgICBpZiAoc3BsaXQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBsID0gc3BsaXRbMF0ubWF0Y2goLyhcXGQrKShcXHcrKS8pO1xyXG4gICAgICAgICAgICBpZiAobCAmJiBsWzFdKSBkYW1hZ2UuZGFtYWdlID0gcGFyc2VJbnQobFsxXSk7XHJcbiAgICAgICAgICAgIGlmIChsICYmIGxbMl0pIGRhbWFnZS50eXBlID0gbFsyXSA9PT0gJ1AnID8gJ3BoeXNpY2FsJyA6ICdzdHVuJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzcGxpdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBsID0gc3BsaXRbaV0ubWF0Y2goLygtP1xcZCspKC4qKS8pO1xyXG4gICAgICAgICAgICBpZiAobCAmJiBsWzJdKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobFsyXS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCcvbScpKSBkYW1hZ2UuZHJvcG9mZiA9IHBhcnNlSW50KGxbMV0pO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBkYW1hZ2UucmFkaXVzID0gcGFyc2VJbnQobFsxXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRhbWFnZTtcclxuICAgIH07XHJcblxyXG4gICAgcGFyc2VXZWFwb25zKGNodW1tZXJDaGFyKSB7XHJcbiAgICAgICAgY29uc3Qgd2VhcG9ucyA9IGdldEFycmF5KGNodW1tZXJDaGFyLndlYXBvbnMud2VhcG9uKTtcclxuICAgICAgICBjb25zdCBwYXJzZWRXZWFwb25zID0gW107XHJcblxyXG4gICAgICAgIHdlYXBvbnMuZm9yRWFjaCgoY2h1bW1lcldlYXBvbikgPT4ge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbURhdGEgPSB0aGlzLnBhcnNlV2VhcG9uKGNodW1tZXJXZWFwb24pO1xyXG4gICAgICAgICAgICAgICAgcGFyc2VkV2VhcG9ucy5wdXNoKGl0ZW1EYXRhKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIHBhcnNlZFdlYXBvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VXZWFwb24oY2h1bW1lcldlYXBvbikge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7fTtcclxuICAgICAgICBjb25zdCBhY3Rpb24gPSB7fTtcclxuICAgICAgICBjb25zdCBkYW1hZ2UgPSB7fTtcclxuICAgICAgICBhY3Rpb24uZGFtYWdlID0gZGFtYWdlO1xyXG4gICAgICAgIGRhdGEuYWN0aW9uID0gYWN0aW9uO1xyXG5cclxuICAgICAgICBkYXRhLmRlc2NyaXB0aW9uID0gcGFyc2VEZXNjcmlwdGlvbihjaHVtbWVyV2VhcG9uKTtcclxuICAgICAgICBkYXRhLnRlY2hub2xvZ3kgPSBwYXJzZVRlY2hub2xvZ3koY2h1bW1lcldlYXBvbik7XHJcblxyXG4gICAgICAgIGRhbWFnZS5hcCA9IHtcclxuICAgICAgICAgICAgYmFzZTogcGFyc2VJbnQoZ2V0VmFsdWVzKGNodW1tZXJXZWFwb24uYXApWzBdKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgYWN0aW9uLnR5cGUgPSAndmFyaWVzJztcclxuICAgICAgICBpZiAoY2h1bW1lcldlYXBvbi5za2lsbClcclxuICAgICAgICAgICAgYWN0aW9uLnNraWxsID0gY2h1bW1lcldlYXBvbi5za2lsbC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnXycpO1xyXG4gICAgICAgIGVsc2UgaWYgKGNodW1tZXJXZWFwb24uY2F0ZWdvcnkgJiYgY2h1bW1lcldlYXBvbi5jYXRlZ29yeS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdleG90aWMnKSlcclxuICAgICAgICAgICAgYWN0aW9uLnNraWxsID0gY2h1bW1lcldlYXBvbi5jYXRlZ29yeVxyXG4gICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKCcgd2VhcG9ucycsICcnKVxyXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xccy9nLCAnXycpO1xyXG4gICAgICAgIGlmIChhY3Rpb24uc2tpbGwuaW5jbHVkZXMoJ2V4b3RpYycpKVxyXG4gICAgICAgICAgICBhY3Rpb24uc2tpbGwgPSBhY3Rpb24uc2tpbGwucmVwbGFjZSgnX3dlYXBvbicsICcnKTtcclxuICAgICAgICBhY3Rpb24uYXR0cmlidXRlID0gJ2FnaWxpdHknO1xyXG4gICAgICAgIGFjdGlvbi5saW1pdCA9IHtcclxuICAgICAgICAgICAgYmFzZTogcGFyc2VJbnQoZ2V0VmFsdWVzKGNodW1tZXJXZWFwb24uYWNjdXJhY3kpWzBdKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgYWN0aW9uLm9wcG9zZWQgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdkZWZlbnNlJyxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAoY2h1bW1lcldlYXBvbi50eXBlLnRvTG93ZXJDYXNlKCkgPT09ICdtZWxlZScpIHtcclxuICAgICAgICAgICAgYWN0aW9uLnR5cGUgPSAnY29tcGxleCc7XHJcbiAgICAgICAgICAgIGRhdGEuY2F0ZWdvcnkgPSAnbWVsZWUnO1xyXG4gICAgICAgICAgICBjb25zdCBtZWxlZSA9IHt9O1xyXG4gICAgICAgICAgICBkYXRhLm1lbGVlID0gbWVsZWU7XHJcbiAgICAgICAgICAgIG1lbGVlLnJlYWNoID0gcGFyc2VJbnQoY2h1bW1lcldlYXBvbi5yZWFjaCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjaHVtbWVyV2VhcG9uLnR5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ3JhbmdlZCcpIHtcclxuICAgICAgICAgICAgZGF0YS5jYXRlZ29yeSA9ICdyYW5nZSc7XHJcbiAgICAgICAgICAgIGlmIChjaHVtbWVyV2VhcG9uLnNraWxsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3Rocm93JykpIHtcclxuICAgICAgICAgICAgICAgIGRhdGEuY2F0ZWdvcnkgPSAndGhyb3duJzsgLy8gVE9ETyBjbGVhbiB0aGlzIHVwXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgcmFuZ2UgPSB7fTtcclxuICAgICAgICAgICAgZGF0YS5yYW5nZSA9IHJhbmdlO1xyXG4gICAgICAgICAgICByYW5nZS5yYyA9IHtcclxuICAgICAgICAgICAgICAgIGJhc2U6IHBhcnNlSW50KGdldFZhbHVlcyhjaHVtbWVyV2VhcG9uLnJjKVswXSksXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmIChjaHVtbWVyV2VhcG9uLm1vZGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIEhlcm9MYWIgZXhwb3J0IGRvZXNuJ3QgaGF2ZSBtb2RlXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsb3dlciA9IGNodW1tZXJXZWFwb24ubW9kZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgcmFuZ2UubW9kZXMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2luZ2xlX3Nob3Q6IGxvd2VyLmluY2x1ZGVzKCdzcycpLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbWlfYXV0bzogbG93ZXIuaW5jbHVkZXMoJ3NhJyksXHJcbiAgICAgICAgICAgICAgICAgICAgYnVyc3RfZmlyZTogbG93ZXIuaW5jbHVkZXMoJ2JmJyksXHJcbiAgICAgICAgICAgICAgICAgICAgZnVsbF9hdXRvOiBsb3dlci5pbmNsdWRlcygnZmEnKSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNodW1tZXJXZWFwb24uY2xpcHMgIT0gbnVsbCAmJiBjaHVtbWVyV2VhcG9uLmNsaXBzLmNsaXAgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gSGVyb0xhYiBleHBvcnQgZG9lc24ndCBoYXZlIGNsaXBzXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjbGlwcyA9IEFycmF5LmlzQXJyYXkoY2h1bW1lcldlYXBvbi5jbGlwcy5jbGlwKVxyXG4gICAgICAgICAgICAgICAgICAgID8gY2h1bW1lcldlYXBvbi5jbGlwcy5jbGlwXHJcbiAgICAgICAgICAgICAgICAgICAgOiBbY2h1bW1lcldlYXBvbi5jbGlwcy5jbGlwXTtcclxuICAgICAgICAgICAgICAgIGNsaXBzLmZvckVhY2goKGNsaXApID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjbGlwKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjaHVtbWVyV2VhcG9uLnJhbmdlcyAmJlxyXG4gICAgICAgICAgICAgICAgY2h1bW1lcldlYXBvbi5yYW5nZXMuc2hvcnQgJiZcclxuICAgICAgICAgICAgICAgIGNodW1tZXJXZWFwb24ucmFuZ2VzLm1lZGl1bSAmJlxyXG4gICAgICAgICAgICAgICAgY2h1bW1lcldlYXBvbi5yYW5nZXMubG9uZyAmJlxyXG4gICAgICAgICAgICAgICAgY2h1bW1lcldlYXBvbi5yYW5nZXMuZXh0cmVtZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2h1bW1lcldlYXBvbi5yYW5nZXMpO1xyXG4gICAgICAgICAgICAgICAgcmFuZ2UucmFuZ2VzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3J0OiBwYXJzZUludChjaHVtbWVyV2VhcG9uLnJhbmdlcy5zaG9ydC5zcGxpdCgnLScpWzFdKSxcclxuICAgICAgICAgICAgICAgICAgICBtZWRpdW06IHBhcnNlSW50KGNodW1tZXJXZWFwb24ucmFuZ2VzLm1lZGl1bS5zcGxpdCgnLScpWzFdKSxcclxuICAgICAgICAgICAgICAgICAgICBsb25nOiBwYXJzZUludChjaHVtbWVyV2VhcG9uLnJhbmdlcy5sb25nLnNwbGl0KCctJylbMV0pLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4dHJlbWU6IHBhcnNlSW50KGNodW1tZXJXZWFwb24ucmFuZ2VzLmV4dHJlbWUuc3BsaXQoJy0nKVsxXSksXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFRPRE8gZmlndXJlIG91dCBob3cgdG8gYWRkIG1vZHMgdG8gd2VhcG9uc1xyXG4gICAgICAgICAgICAvLyBpZiAody5hY2Nlc3NvcmllcyAmJiB3LmFjY2Vzc29yaWVzLmFjY2Vzc29yeSkge1xyXG4gICAgICAgICAgICAvLyAgICAgcmFuZ2UubW9kcyA9IFtdO1xyXG4gICAgICAgICAgICAvLyAgICAgY29uc3QgYWNjZXNzb3JpZXMgPSBnZXRBcnJheSh3LmFjY2Vzc29yaWVzLmFjY2Vzc29yeSk7XHJcbiAgICAgICAgICAgIC8vICAgICBhY2Nlc3Nvcmllcy5mb3JFYWNoKChhKSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgaWYgKGEpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgcmFuZ2UubW9kcy5wdXNoKHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIG5hbWU6IGEubmFtZSxcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGNodW1tZXJXZWFwb24udHlwZS50b0xvd2VyQ2FzZSgpID09PSAndGhyb3duJykge1xyXG4gICAgICAgICAgICBkYXRhLmNhdGVnb3J5ID0gJ3Rocm93bic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8gVE9ETyBoYW5kbGUgcmF3IGRhbWFnZSBpZiBwcmVzZW50XHJcbiAgICAgICAgICAgIGNvbnN0IGQgPSB0aGlzLnBhcnNlRGFtYWdlKGNodW1tZXJXZWFwb24uZGFtYWdlX2VuZ2xpc2gpO1xyXG4gICAgICAgICAgICBkYW1hZ2UuYmFzZSA9IGQuZGFtYWdlO1xyXG4gICAgICAgICAgICBkYW1hZ2UudHlwZSA9IHt9O1xyXG4gICAgICAgICAgICBkYW1hZ2UudHlwZS5iYXNlID0gZC50eXBlO1xyXG4gICAgICAgICAgICBpZiAoZC5kcm9wb2ZmIHx8IGQucmFkaXVzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0aHJvd24gPSB7fTtcclxuICAgICAgICAgICAgICAgIGRhdGEudGhyb3duID0gdGhyb3duO1xyXG4gICAgICAgICAgICAgICAgdGhyb3duLmJsYXN0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJhZGl1czogZC5yYWRpdXMsXHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcG9mZjogZC5kcm9wb2ZmLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgaXRlbURhdGEgPSBjcmVhdGVJdGVtRGF0YShjaHVtbWVyV2VhcG9uLm5hbWUsICd3ZWFwb24nLCBkYXRhKTtcclxuICAgICAgICByZXR1cm4gaXRlbURhdGE7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBCYXNlR2VhclBhcnNlciB9IGZyb20gXCIuL0Jhc2VHZWFyUGFyc2VyXCJcclxuXHJcbi8qKlxyXG4gKiBQYXJzZXMgYW1tdW5pdGlvblxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEFtbW9QYXJzZXIgZXh0ZW5kcyBCYXNlR2VhclBhcnNlciB7XHJcbiAgIFxyXG4gICAgcGFyc2UoY2h1bW1lckdlYXIgOiBhbnkpIDogYW55IHtcclxuICAgICAgICBjb25zdCBwYXJzZWRHZWFyID0gIHN1cGVyLnBhcnNlKGNodW1tZXJHZWFyKTtcclxuICAgICAgICBwYXJzZWRHZWFyLnR5cGUgPSAnYW1tbyc7XHJcblxyXG4gICAgICAgIGlmIChjaHVtbWVyR2Vhci53ZWFwb25ib251c2FwKSB7XHJcbiAgICAgICAgICAgIHBhcnNlZEdlYXIuZGF0YS5hcCA9IHBhcnNlSW50KGNodW1tZXJHZWFyLndlYXBvbmJvbnVzYXApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNodW1tZXJHZWFyLndlYXBvbmJvbnVzZGFtYWdlKSB7XHJcbiAgICAgICAgICAgIHBhcnNlZEdlYXIuZGF0YS5kYW1hZ2UgPSBwYXJzZUludChjaHVtbWVyR2Vhci53ZWFwb25ib251c2RhbWFnZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoY2h1bW1lckdlYXIud2VhcG9uYm9udXNkYW1hZ2UuaW5jbHVkZXMoJ1AnKSkge1xyXG4gICAgICAgICAgICAgICAgcGFyc2VkR2Vhci5kYXRhLmRhbWFnZVR5cGUgPSAncGh5c2ljYWwnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNodW1tZXJHZWFyLndlYXBvbmJvbnVzZGFtYWdlLmluY2x1ZGVzKCdTJykpIHtcclxuICAgICAgICAgICAgICAgIHBhcnNlZEdlYXIuZGF0YS5kYW1hZ2VUeXBlID0gJ3N0dW4nO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNodW1tZXJHZWFyLndlYXBvbmJvbnVzZGFtYWdlLmluY2x1ZGVzKCdNJykpIHtcclxuICAgICAgICAgICAgICAgIHBhcnNlZEdlYXIuZGF0YS5kYW1hZ2VUeXBlID0gJ21hdHJpeCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwYXJzZWRHZWFyLmRhdGEuZGFtYWdlVHlwZSA9ICdwaHlzaWNhbCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBwYXJzZWRHZWFyO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgRGVmYXVsdFZhbHVlcyB9IGZyb20gXCIuLi8uLi8uLi9kYXRhVGVtcGxhdGVzXCI7XHJcbmltcG9ydCB7IHBhcnNlRGVzY3JpcHRpb24sIGdldEFycmF5LCBnZXRWYWx1ZXMsIHBhcnNlVGVjaG5vbG9neSwgY3JlYXRlSXRlbURhdGEgfSBmcm9tIFwiLi4vQmFzZVBhcnNlckZ1bmN0aW9ucy5qc1wiXHJcblxyXG5pbXBvcnQgRXF1aXBtZW50ID0gU2hhZG93cnVuLkVxdWlwbWVudDtcclxuXHJcbi8qKlxyXG4gKiBQYXJzZXMgYSBjZXJ0YWluIGNsYXNzIG9mIGdlYXIgKGRlcGVuZGluZyBvbiB0aGUgaW1wbGVtZW50YXRpb24pLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBHZWFyUGFyc2VyIHtcclxuICAgIC8qKlxyXG4gICAgICogUGFyc2VzIGEgZ2VhciBlbnRyeSBhbmQgcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyBmb3VuZHJ5IHNyIGl0ZW0gZGF0YS5cclxuICAgICAqIEBwYXJhbSBjaHVtbWVyR2VhciBBIGNodW1tZXIgZ2VhciBlbnRyeVxyXG4gICAgICovXHJcbiAgICBwYXJzZShjaHVtbWVyR2VhciA6IGFueSkgOiBhbnlcclxufVxyXG5cclxuLyoqXHJcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBnZWFyIHBhcnNlcnMuIFBhcnNlcyBjb21tb24gaW5mb3JtYXRpb24gYWNyb3NzIGFsbCBnZWFyLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJhc2VHZWFyUGFyc2VyIGltcGxlbWVudHMgR2VhclBhcnNlciB7XHJcbiAgICBwYXJzZShjaHVtbWVyR2VhciA6IGFueSkgOiBhbnkge1xyXG4gICAgICAgIGNvbnN0IHBhcnNlZEdlYXIgPSB0aGlzLmdldERlZmF1bHREYXRhKCk7XHJcbiAgICAgICAgcGFyc2VkR2Vhci5uYW1lID0gY2h1bW1lckdlYXIubmFtZTtcclxuICAgICAgICBpZiAoY2h1bW1lckdlYXIuZXh0cmEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwYXJzZWRHZWFyLm5hbWUgKz0gYCAoJHtjaHVtbWVyR2Vhci5leHRyYX0pYDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHBhcnNlZEdlYXIuZGF0YS50ZWNobm9sb2d5ID0gcGFyc2VUZWNobm9sb2d5KGNodW1tZXJHZWFyKTtcclxuICAgICAgICBwYXJzZWRHZWFyLmRhdGEuZGVzY3JpcHRpb24gPSBwYXJzZURlc2NyaXB0aW9uKGNodW1tZXJHZWFyKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHBhcnNlZEdlYXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXREZWZhdWx0RGF0YSgpIDogRXF1aXBtZW50IHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuYW1lOiAnJyxcclxuICAgICAgICAgICAgX2lkOiAnJyxcclxuICAgICAgICAgICAgZm9sZGVyOiAnJyxcclxuICAgICAgICAgICAgZmxhZ3M6IHt9LFxyXG4gICAgICAgICAgICBpbWc6ICdpY29ucy9zdmcvbXlzdGVyeS1tYW4uc3ZnJyxcclxuICAgICAgICAgICAgdHlwZTogJ2VxdWlwbWVudCcsXHJcbiAgICAgICAgICAgIGRhdGE6IERlZmF1bHRWYWx1ZXMuZXF1aXBtZW50RGF0YSgpLFxyXG4gICAgICAgICAgICBwZXJtaXNzaW9uOiB7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiAyLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IEJhc2VHZWFyUGFyc2VyIH0gZnJvbSBcIi4vQmFzZUdlYXJQYXJzZXJcIlxyXG5cclxuLyoqXHJcbiAqIFBhcnNlcyBkZXZpY2VzIChjb21tbGlua3MgYW5kIGRlY2tzKVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERldmljZVBhcnNlciBleHRlbmRzIEJhc2VHZWFyUGFyc2VyIHtcclxuICAgXHJcbiAgICBwYXJzZShjaHVtbWVyR2VhciA6IGFueSkgOiBhbnkge1xyXG4gICAgICAgIGNvbnN0IHBhcnNlZEdlYXIgPSAgc3VwZXIucGFyc2UoY2h1bW1lckdlYXIpO1xyXG4gICAgICAgIHBhcnNlZEdlYXIudHlwZSA9ICdkZXZpY2UnO1xyXG4gICAgICAgIHBhcnNlZEdlYXIuZGF0YS50ZWNobm9sb2d5LnJhdGluZyA9IGNodW1tZXJHZWFyLmRldmljZXJhdGluZztcclxuXHJcbiAgICAgICAgcGFyc2VkR2Vhci5kYXRhLmF0dHMgPSB7XHJcbiAgICAgICAgICAgIGF0dDE6XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBjaHVtbWVyR2Vhci5hdHRhY2ssXHJcbiAgICAgICAgICAgICAgICBhdHQ6ICdhdHRhY2snXHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBhdHQyOlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogY2h1bW1lckdlYXIuc2xlYXplLFxyXG4gICAgICAgICAgICAgICAgYXR0OiAnc2xlYXplJ1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgYXR0MzpcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGNodW1tZXJHZWFyLmRhdGFwcm9jZXNzaW5nLFxyXG4gICAgICAgICAgICAgICAgYXR0OiAnZGF0YV9wcm9jZXNzaW5nJ1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgYXR0NDpcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGNodW1tZXJHZWFyLmZpcmV3YWxsLFxyXG4gICAgICAgICAgICAgICAgYXR0OiAnZmlyZXdhbGwnXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKGNodW1tZXJHZWFyLmNhdGVnb3J5ID09PSAnQ3liZXJkZWNrcycpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwYXJzZWRHZWFyLmRhdGEuY2F0ZWdvcnkgPSAnY3liZXJkZWNrJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaHVtbWVyR2Vhci5jYXRlZ29yeSA9PT0gJ0NvbW1saW5rcycpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwYXJzZWRHZWFyLmRhdGEuY2F0ZWdvcnkgPSAnY29tbWxpbmsnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNodW1tZXJHZWFyLmNhdGVnb3J5ID09PSAnUmlnZ2VyIENvbW1hbmQgQ29uc29sZXMnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8gV2UgYXJlIGhhbmRsaW5nIHJjY3MgYXMgY29tbWxpbmtzIGZvciB0aGUgbW9tZW50IHNpbmNlIHdlIGhhdmUgbm8gc3VwcG9ydCBmb3IgcmlnZ2VyIGNvbW1hbmQgY29uc29sZXMgeWV0LlxyXG4gICAgICAgICAgICBwYXJzZWRHZWFyLmRhdGEuY2F0ZWdvcnkgPSAnY29tbWxpbmsnOyBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBwYXJzZWRHZWFyO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgUGFyc2VyU2VsZWN0b3IgfSBmcm9tIFwiLi9QYXJzZXJTZWxlY3RvclwiO1xyXG5cclxuLyoqXHJcbiAqIFBhcnNlcyBhbGwgZ2VhciBmcm9tIGEgY2h1bW1lciBjaGFyYWN0ZXIgZmlsZSBhbmQgdHVybnMgdGhlbSBpbnRvIGZvdW5kcnkgc3IgaXRlbSBkYXRhIG9iamVjdHNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBHZWFyc1BhcnNlciB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgYWxsIGNodW1tZXIgZ2VhciBlbnRyaWVzXHJcbiAgICAgKiBAcGFyYW0gY2h1bW1lckdlYXJzIEFycmF5IG9mIGNodW1tZXIgZ2VhciBlbnRyaWVzXHJcbiAgICAgKi9cclxuICAgIHBhcnNlR2VhcnMoY2h1bW1lckdlYXJzIDogYW55KSA6IGFueSB7XHJcbiAgICAgICAgbGV0IGl0ZW1zIDogYW55W10gPSBbXTtcclxuXHJcbiAgICAgICAgY2h1bW1lckdlYXJzLmZvckVhY2goKGNodW1tZXJHZWFyKSA9PiB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAvLyBGaXJzdCBmaWx0ZXIgb3V0IGdlYXIgZW50cmllcywgdGhhdCB3ZSBkbyBub3Qgd2FudCB0byBoYW5kbGUuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZ2VhclNob3VsZEJlUGFyc2VkKGNodW1tZXJHZWFyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtc0RhdGEgPSB0aGlzLnBhcnNlR2VhckVudHJ5KGNodW1tZXJHZWFyKTtcclxuICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goaXRlbXNEYXRhKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGl0ZW1zO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGFyc2VHZWFyRW50cnkoY2h1bW1lckdlYXIgOiBhbnkpIDogYW55IHtcclxuICAgICAgICBjb25zdCBwYXJzZXJTZWxlY3RvciA9IG5ldyBQYXJzZXJTZWxlY3RvcigpO1xyXG4gICAgICAgIGNvbnN0IHBhcnNlciA9IHBhcnNlclNlbGVjdG9yLnNlbGVjdChjaHVtbWVyR2Vhcik7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlci5wYXJzZShjaHVtbWVyR2Vhcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZWFyU2hvdWxkQmVQYXJzZWQoY2h1bW1lckdlYXIgOiBhbnkpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgLy8gV2UgZG8gbm90IGhhbmRsZSBncmVuYWRlcyBhbmQgcm9ja2V0cyBoZXJlIHNpbmNlIHRoZXkgYXJlIGFsc28gaW4gdGhlIHdlYXBvbnMgc2VjdGlvbiB3aXRoIG1vcmUgaW5mby5cclxuICAgICAgICBjb25zdCBlbmdsaXNoR2Vhck5hbWUgPSAoY2h1bW1lckdlYXIubmFtZV9lbmdsaXNoIGFzIHN0cmluZykudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICBpZiAoZW5nbGlzaEdlYXJOYW1lLnN0YXJ0c1dpdGgoJ2dyZW5hZGUnKSB8fCBcclxuICAgICAgICAgICAgZW5nbGlzaEdlYXJOYW1lLnN0YXJ0c1dpdGgoJ21pbmlncmVuYWRlJykgfHwgXHJcbiAgICAgICAgICAgIGVuZ2xpc2hHZWFyTmFtZS5zdGFydHNXaXRoKCdyb2NrZXQnKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEdlYXJQYXJzZXIsIEJhc2VHZWFyUGFyc2VyIH0gZnJvbSBcIi4vQmFzZUdlYXJQYXJzZXJcIjtcclxuaW1wb3J0IHsgU2luUGFyc2VyIH0gZnJvbSBcIi4vU2luUGFyc2VyXCI7XHJcbmltcG9ydCB7IERldmljZVBhcnNlciB9IGZyb20gXCIuL0RldmljZVBhcnNlclwiO1xyXG5pbXBvcnQgeyBQcm9ncmFtUGFyc2VyIH0gZnJvbSBcIi4vUHJvZ3JhbVBhcnNlclwiO1xyXG5pbXBvcnQgeyBBbW1vUGFyc2VyIH0gZnJvbSBcIi4vQW1tb1BhcnNlclwiO1xyXG5cclxuLyoqXHJcbiAqIFJlc3BvbnNpYmxlIGZvciBzZWxlY3RpbmcgdGhlIGNvcnJlY3QgR2VhclBhcnNlciBkZXBlbmRpbmcgb24gdGhlIGdlYXIuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUGFyc2VyU2VsZWN0b3Ige1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VsZWN0cyB0aGUgY29ycmVjdCBHZWFyUGFyc2VyIGRlcGVuZGluZyBvbiB0aGUgZ2Vhci5cclxuICAgICAqIEBwYXJhbSBjaHVtbWVyR2VhciBUaGUgZ2VhciB0aGF0IG5lZWRzIHRvIGJlIHBhcnNlZFxyXG4gICAgICogVGhlIGNvcnJlY3QgR2VhclBhcnNlciBmb3IgdGhpcyBnZWFyIGVudHJ5LlxyXG4gICAgICovIFxyXG4gICAgc2VsZWN0KGNodW1tZXJHZWFyIDogYW55KSA6IEdlYXJQYXJzZXIge1xyXG4gICAgICAgIGlmIChjaHVtbWVyR2Vhci5pc3NpbiA9PT0gJ1RydWUnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaW5QYXJzZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaHVtbWVyR2Vhci5pc2NvbW1saW5rID09PSAnVHJ1ZScpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERldmljZVBhcnNlcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNodW1tZXJHZWFyLmlzYW1tbyA9PT0gJ1RydWUnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBbW1vUGFyc2VyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2h1bW1lckdlYXIuY2F0ZWdvcnkgPT09ICdDb21tb24gUHJvZ3JhbXMnIHx8IFxyXG4gICAgICAgICAgICBjaHVtbWVyR2Vhci5jYXRlZ29yeSA9PT0gJ0hhY2tpbmcgUHJvZ3JhbXMnIHx8IFxyXG4gICAgICAgICAgICBjaHVtbWVyR2Vhci5jYXRlZ29yeSA9PT0gJ1NvZnR3YXJlJylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvZ3JhbVBhcnNlcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBCYXNlR2VhclBhcnNlcigpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQmFzZUdlYXJQYXJzZXIgfSBmcm9tIFwiLi9CYXNlR2VhclBhcnNlclwiXHJcblxyXG4vKipcclxuICogUGFyc2VzIGNvbW1vbiwgaGFja2luZyBhbmQgYWdlbnQgcHJvZ3JhbXMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUHJvZ3JhbVBhcnNlciBleHRlbmRzIEJhc2VHZWFyUGFyc2VyIHtcclxuICAgIHBhcnNlKGNodW1tZXJHZWFyIDogYW55KSA6IGFueSB7XHJcbiAgICAgICAgY29uc3QgcGFyc2VkR2VhciA9ICBzdXBlci5wYXJzZShjaHVtbWVyR2Vhcik7XHJcbiAgICAgICAgcGFyc2VkR2Vhci50eXBlID0gJ3Byb2dyYW0nO1xyXG5cclxuICAgICAgICBpZiAoY2h1bW1lckdlYXIuY2F0ZWdvcnkgPT09ICdDb21tb24gUHJvZ3JhbXMnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcGFyc2VkR2Vhci5kYXRhLnR5cGUgPSAnY29tbW9uX3Byb2dyYW0nXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNodW1tZXJHZWFyLmNhdGVnb3J5ID09PSAnSGFja2luZyBQcm9ncmFtcycpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwYXJzZWRHZWFyLmRhdGEudHlwZSA9ICdoYWNraW5nX3Byb2dyYW0nXHJcbiAgICAgICAgfSBcclxuICAgICAgICBlbHNlIGlmIChjaHVtbWVyR2Vhci5jYXRlZ29yeSA9PT0gJ1NvZnR3YXJlJylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHBhcnNlZEdlYXIuZGF0YS50eXBlID0gJ2FnZW50J1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHBhcnNlZEdlYXI7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBCYXNlR2VhclBhcnNlciB9IGZyb20gXCIuL0Jhc2VHZWFyUGFyc2VyXCJcclxuXHJcbi8qKlxyXG4gKiBQYXJzZXMgU0lOcyBhbmQgdGhlIGF0dGFjaGVkIGxpY2Vuc2VzLlxyXG4gKiBMaWNlbnNlcyB0aGF0IGFyZSBub3QgYXR0YWNoZWQgdG8gYSBTSU4gYXJlIG5vdCBoYW5kbGVkLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNpblBhcnNlciBleHRlbmRzIEJhc2VHZWFyUGFyc2VyIHtcclxuICAgIHBhcnNlKGNodW1tZXJHZWFyIDogYW55KSA6IGFueSB7XHJcbiAgICAgICAgY29uc3QgcGFyc2VkR2VhciA9ICBzdXBlci5wYXJzZShjaHVtbWVyR2Vhcik7XHJcbiAgICAgICAgcGFyc2VkR2Vhci50eXBlID0gJ3Npbic7XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBsaWNlbnNlcyBpZiB0aGVyZSBhcmUgYW55XHJcbiAgICAgICAgaWYgKGNodW1tZXJHZWFyLmNoaWxkcmVuKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBcImdlYXJcIiBpcyBlaXRoZXIgIGEgc2luZ2xlIGdlYXIgZW50cnkgb3IgYW4gYXJyYXkgb2YgZ2VhciBlbnRyaWVzIGRlcGVuZGluZyBvbiB0aGUgbnVtYmVyIG9mIGxpY2Vuc2VzXHJcbiAgICAgICAgICAgIGNvbnN0IGNodW1tZXJMaWNlbnNlcyA6IGFueVtdID0gW107XHJcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShjaHVtbWVyR2Vhci5jaGlsZHJlbi5nZWFyKSkge1xyXG4gICAgICAgICAgICAgICAgY2h1bW1lckxpY2Vuc2VzLnB1c2goY2h1bW1lckdlYXIuY2hpbGRyZW4uZ2VhcilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNodW1tZXJMaWNlbnNlcy5wdXNoKC4uLmNodW1tZXJHZWFyLmNoaWxkcmVuLmdlYXIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwYXJzZWRHZWFyLmRhdGEubGljZW5zZXMgPSB0aGlzLnBhcnNlTGljZW5zZXMoY2h1bW1lckxpY2Vuc2VzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlZEdlYXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwYXJzZUxpY2Vuc2VzKGNodW1tZXJMaWNlbnNlcyA6IGFueSkgOiBhbnlbXSB7XHJcbiAgICAgICAgY29uc3QgcGFyc2VkTGljZW5zZXMgOiBhbnlbXSA9IFtdOyBcclxuXHJcbiAgICAgICAgY2h1bW1lckxpY2Vuc2VzLmZvckVhY2goY2h1bW1lckxpY2Vuc2UgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY2h1bW1lckxpY2Vuc2UuY2F0ZWdvcnkgPT09ICdJRC9DcmVkc3RpY2tzJylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGFyc2VkTGljZW5zZXMucHVzaChcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGNodW1tZXJMaWNlbnNlLmV4dHJhLCAvLyAnZXh0cmEnIGhvbGRzIHRoZSB0eXBlIG9mIGxpY2Vuc2UgZnJvbSBjaHVtbWVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ0ZzogY2h1bW1lckxpY2Vuc2UucmF0aW5nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJydcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBwYXJzZWRMaWNlbnNlcztcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQge19tZXJnZVdpdGhNaXNzaW5nU2tpbGxGaWVsZHN9IGZyb20gXCIuLi9hY3Rvci9wcmVwL2Z1bmN0aW9ucy9Ta2lsbHNQcmVwXCI7XHJcbmltcG9ydCB7Q2hhcmFjdGVySW1wb3J0ZXJ9IGZyb20gXCIuL2NoYXJhY3RlckltcG9ydC9DaGFyYWN0ZXJJbXBvcnRlclwiXHJcblxyXG5leHBvcnQgY2xhc3MgQ2h1bW1lckltcG9ydEZvcm0gZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xyXG4gICAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucygpIHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0gc3VwZXIuZGVmYXVsdE9wdGlvbnM7XHJcbiAgICAgICAgb3B0aW9ucy5pZCA9ICdjaHVtbWVyLWltcG9ydCc7XHJcbiAgICAgICAgb3B0aW9ucy5jbGFzc2VzID0gWydzaGFkb3dydW41ZSddO1xyXG4gICAgICAgIG9wdGlvbnMudGl0bGUgPSAnQ2h1bW1lci9IZXJvIExhYiBJbXBvcnQnO1xyXG4gICAgICAgIG9wdGlvbnMudGVtcGxhdGUgPSAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9hcHBzL2ltcG9ydC5odG1sJztcclxuICAgICAgICBvcHRpb25zLndpZHRoID0gNjAwO1xyXG4gICAgICAgIG9wdGlvbnMuaGVpZ2h0ID0gJ2F1dG8nO1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgfVxyXG5cclxuICAgIGFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpIHtcclxuICAgICAgICBodG1sLmZpbmQoJy5zdWJtaXQtY2h1bW1lci1pbXBvcnQnKS5jbGljayhhc3luYyAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNodW1tZXJGaWxlID0gSlNPTi5wYXJzZSgkKCcuY2h1bW1lci10ZXh0JykudmFsKCkpO1xyXG4gICAgICAgICAgICBjb25zdCBpbXBvcnRPcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgd2VhcG9uczogJCgnLndlYXBvbnMnKS5pcygnOmNoZWNrZWQnKSxcclxuICAgICAgICAgICAgICAgIGFybW9yOiAkKCcuYXJtb3InKS5pcygnOmNoZWNrZWQnKSxcclxuICAgICAgICAgICAgICAgIGN5YmVyd2FyZTogJCgnLmN5YmVyd2FyZScpLmlzKCc6Y2hlY2tlZCcpLFxyXG4gICAgICAgICAgICAgICAgZXF1aXBtZW50OiAkKCcuZ2VhcicpLmlzKCc6Y2hlY2tlZCcpLFxyXG4gICAgICAgICAgICAgICAgcXVhbGl0aWVzOiAkKCcucXVhbGl0aWVzJykuaXMoJzpjaGVja2VkJyksXHJcbiAgICAgICAgICAgICAgICBwb3dlcnM6ICQoJy5wb3dlcnMnKS5pcygnOmNoZWNrZWQnKSxcclxuICAgICAgICAgICAgICAgIHNwZWxsczogJCgnLnNwZWxscycpLmlzKCc6Y2hlY2tlZCcpLFxyXG4gICAgICAgICAgICAgICAgY29udGFjdHM6ICQoJy5jb250YWN0cycpLmlzKCc6Y2hlY2tlZCcpLFxyXG4gICAgICAgICAgICAgICAgbGlmZXN0eWxlczogJCgnLmxpZmVzdHlsZXMnKS5pcygnOmNoZWNrZWQnKSxcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgaW1wb3J0ZXIgPSBuZXcgQ2hhcmFjdGVySW1wb3J0ZXIoKTtcclxuICAgICAgICAgICAgYXdhaXQgaW1wb3J0ZXIuaW1wb3J0Q2h1bW1lckNoYXJhY3Rlcih0aGlzLm9iamVjdCwgY2h1bW1lckZpbGUsIGltcG9ydE9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxyXG4gICAgICAgICAgICAgICAgJ0NvbXBsZXRlISBDaGVjayBldmVyeXRoaW5nLiBOb3RhYmx5OiBSYW5nZWQgd2VhcG9uIG1vZHMgYW5kIGFtbW87IFN0cmVuZ3RoIGJhc2VkIHdlYXBvbiBkYW1hZ2U7IFNwZWNpYWxpemF0aW9ucyBvbiBhbGwgc3BlbGxzLCBwb3dlcnMsIGFuZCB3ZWFwb25zOydcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7Rm9ybURpYWxvZywgRm9ybURpYWxvZ0RhdGF9IGZyb20gXCIuL0Zvcm1EaWFsb2dcIjtcclxuaW1wb3J0IERhbWFnZURhdGEgPSBTaGFkb3dydW4uRGFtYWdlRGF0YTtcclxuaW1wb3J0IEFjdG9yQXJtb3JEYXRhID0gU2hhZG93cnVuLkFjdG9yQXJtb3JEYXRhO1xyXG5pbXBvcnQge1NSNUFjdG9yfSBmcm9tIFwiLi4vLi4vYWN0b3IvU1I1QWN0b3JcIjtcclxuXHJcbmV4cG9ydCB0eXBlIERhbWFnZUFuZFNvYWtQZXJBY3RvciA9IHtcclxuICAgIGFjdG9yOiBTUjVBY3RvcjtcclxuICAgIG1vZGlmaWVkOiBEYW1hZ2VEYXRhO1xyXG4gICAgYXJtb3I6IEFjdG9yQXJtb3JEYXRhO1xyXG4gICAgcGVyY2VwdGlvbj86IHN0cmluZztcclxuICAgIGhvdHNpbT86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBEYW1hZ2VBcHBsaWNhdGlvbkRpYWxvZyBleHRlbmRzIEZvcm1EaWFsb2cge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGRhbWFnZVBlckFjdG9yIDogRGFtYWdlQW5kU29ha1BlckFjdG9yW10sIGRhbWFnZTogRGFtYWdlRGF0YSwgb3B0aW9ucz86IEFwcGxpY2F0aW9uLk9wdGlvbnMpIHtcclxuXHJcbiAgICAgICAgY29uc3QgZGlhbG9nRGF0YSA9IERhbWFnZUFwcGxpY2F0aW9uRGlhbG9nLmdldERpYWxvZ0RhdGEoZGFtYWdlUGVyQWN0b3IsIGRhbWFnZSk7XHJcbiAgICAgICAgc3VwZXIoZGlhbG9nRGF0YSwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucygpIHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0gc3VwZXIuZGVmYXVsdE9wdGlvbnM7XHJcbiAgICAgICAgb3B0aW9ucy5pZCA9ICdkYW1hZ2UtYXBwbGljYXRpb24nO1xyXG4gICAgICAgIC8vIFRPRE86IENsYXNzIERpYWxvZyBoZXJlIGlzIG5lZWRlZCBmb3IgZGlhbG9nIGJ1dHRvbiBzdHlsaW5nLlxyXG4gICAgICAgIG9wdGlvbnMuY2xhc3NlcyA9IFsnc3I1JywgJ2Zvcm0tZGlhbG9nJ107XHJcbiAgICAgICAgb3B0aW9ucy5yZXNpemFibGUgPSB0cnVlO1xyXG4gICAgICAgIG9wdGlvbnMuaGVpZ2h0ID0gJ2F1dG8nO1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zOyBcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0RGlhbG9nRGF0YShkYW1hZ2VQZXJBY3RvciA6IERhbWFnZUFuZFNvYWtQZXJBY3RvcltdLCBkYW1hZ2U6IERhbWFnZURhdGEpOiBGb3JtRGlhbG9nRGF0YSB7XHJcbiAgICAgICAgY29uc3QgdGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5EYW1hZ2VBcHBsaWNhdGlvbi5UaXRsZScpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlUGF0aCA9ICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2FwcHMvZGlhbG9ncy9kYW1hZ2UtYXBwbGljYXRpb24uaHRtbCc7XHJcblxyXG4gICAgICAgIGNvbnN0IGFjdG9yRGFtYWdlIDogYW55ID0gZGFtYWdlUGVyQWN0b3I7XHJcblxyXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlRGF0YSA9IHtcclxuICAgICAgICAgICAgZGFtYWdlLFxyXG4gICAgICAgICAgICBhY3RvckRhbWFnZSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBidXR0b25zID0ge1xyXG4gICAgICAgICAgICBkYW1hZ2U6IHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5EYW1hZ2VBcHBsaWNhdGlvbi5BcHBseURhbWFnZScpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG9uQWZ0ZXJDbG9zZSA9ICgpID0+IGFjdG9yRGFtYWdlO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0aXRsZSxcclxuICAgICAgICAgICAgdGVtcGxhdGVQYXRoLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZURhdGEsXHJcbiAgICAgICAgICAgIG9uQWZ0ZXJDbG9zZSxcclxuICAgICAgICAgICAgYnV0dG9ucyxcclxuICAgICAgICAgICAgZGVmYXVsdDogJ2RhbWFnZSdcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge0Zvcm1EaWFsb2d9IGZyb20gXCIuL0Zvcm1EaWFsb2dcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBEZWxldGVDb25maXJtYXRpb25EaWFsb2cgZXh0ZW5kcyBGb3JtRGlhbG9nIHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBBcHBsaWNhdGlvbi5PcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3QgZGlhbG9nRGF0YSA9IERlbGV0ZUNvbmZpcm1hdGlvbkRpYWxvZy5nZXREaWFsb2dEYXRhKCk7XHJcblxyXG4gICAgICAgIHN1cGVyKGRpYWxvZ0RhdGEsIG9wdGlvbnMpXHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldERpYWxvZ0RhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZShcIlNSNS5EZWxldGVDb25maXJtYXRpb25BcHBsaWNhdGlvbi5UaXRsZVwiKSxcclxuICAgICAgICAgICAgYnV0dG9uczoge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkRlbGV0ZUNvbmZpcm1hdGlvbkFwcGxpY2F0aW9uLkRlbGV0ZScpXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgY2FuY2VsOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkRlbGV0ZUNvbmZpcm1hdGlvbkFwcGxpY2F0aW9uLkNhbmNlbCcpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6ICdjYW5jZWwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZURhdGE6IHt9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVBhdGg6ICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2FwcHMvZGlhbG9ncy9kZWxldGUtY29uZmlybWF0aW9uLWRpYWxvZy5odG1sJ1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zKCkge1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBzdXBlci5kZWZhdWx0T3B0aW9ucztcclxuICAgICAgICBvcHRpb25zLmlkID0gJ2RlbGV0ZS1jb25maXJtYXRpb24tYXBwbGljYXRpb24nO1xyXG4gICAgICAgIC8vIENsYXNzIERpYWxvZyBoZXJlIGlzIG5lZWRlZCBmb3IgZGlhbG9nIGJ1dHRvbiBzdHlsaW5nLlxyXG4gICAgICAgIG9wdGlvbnMuY2xhc3NlcyA9IFsnc3I1JywgJ2Zvcm0tZGlhbG9nJ107XHJcbiAgICAgICAgb3B0aW9ucy5yZXNpemFibGUgPSB0cnVlO1xyXG4gICAgICAgIG9wdGlvbnMuaGVpZ2h0ID0gJ2F1dG8nO1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGludGVyZmFjZSBGb3JtRGlhbG9nRGF0YSB7XHJcbiAgICB0aXRsZT86IHN0cmluZztcclxuXHRidXR0b25zOiBSZWNvcmQ8c3RyaW5nLCBEaWFsb2dCdXR0b24+O1xyXG5cdGRlZmF1bHQ/OiBzdHJpbmc7XHJcblx0dGVtcGxhdGVEYXRhOiBvYmplY3Q7XHJcblx0dGVtcGxhdGVQYXRoOiBzdHJpbmc7XHJcblx0b25BZnRlckNsb3NlPzogRnVuY3Rpb247XHJcbn1cclxuXHJcbi8qKiBUT0RPOiBEb2N1bWVudGF0aW9uIHdpdGggdXNhZ2UgZXhhbXBsZVxyXG4gKiAgVE9ETzogUmV3b3JrIGdldERpYWxvZ0RhdGEgYXBwcm9hY2ggd2l0aCB0aGUgZ2VuZXJhbCBnZXREYXRhIEFwcGxpY2F0aW9uIHN0eWxlLFxyXG4gKiAgICAgICAgdG8gYWxsb3cgcmVyZW5kZXIgZnJvbSB3aXRoaW4gdGhlIERpYWxvZyBpbnN0YW5jZSB3aXRob3V0IGV4dGVybmFsIGRhdGFcclxuICogICAgICAgIHJlaW5pdGlhbGl6YXRpb24uXHJcbiAqICAgICAgICBUaGlzIHdvdWxkIGZvciB0aGluZ3MgbGlrZSB1cGRhdGluZyBhIGRpYWxvZyBiYXNlZCBvbiBjdXJyZW50bHkgc2VsZWN0ZWQgdG9rZW5zXHJcbiAqICAgICAgICB3aXRob3V0IHJlb3BlbmluZy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBGb3JtRGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcclxuICAgIHNlbGVjdGlvbjogb2JqZWN0O1xyXG4gICAgc2VsZWN0ZWRCdXR0b246IHN0cmluZztcclxuXHJcbiAgICBfb25BZnRlckNsb3NlOiBGdW5jdGlvbjtcclxuICAgIF9zZWxlY3Rpb25Qcm9taXNlOiBQcm9taXNlPG9iamVjdD47XHJcbiAgICBfc2VsZWN0aW9uUmVzb2x2ZTogRnVuY3Rpb247XHJcbiAgICBfc2VsZWN0aW9uUmVqZWN0OiBGdW5jdGlvbjtcclxuICAgIF90ZW1wbGF0ZURhdGE6IG9iamVjdDtcclxuICAgIF90ZW1wbGF0ZVBhdGg6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihkaWFsb2dEYXRhOiBGb3JtRGlhbG9nRGF0YSwgb3B0aW9ucz86IEFwcGxpY2F0aW9uLk9wdGlvbnMpIHtcclxuICAgICAgICBzdXBlcihkaWFsb2dEYXRhLCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgY29uc3Qge3RlbXBsYXRlRGF0YSwgdGVtcGxhdGVQYXRofSA9IGRpYWxvZ0RhdGE7XHJcbiAgICAgICAgdGhpcy5fdGVtcGxhdGVEYXRhID0gdGVtcGxhdGVEYXRhO1xyXG4gICAgICAgIHRoaXMuX3RlbXBsYXRlUGF0aCA9IHRlbXBsYXRlUGF0aDtcclxuXHJcbiAgICAgICAgdGhpcy5fb25BZnRlckNsb3NlID0gZGlhbG9nRGF0YS5vbkFmdGVyQ2xvc2UgPyBkaWFsb2dEYXRhLm9uQWZ0ZXJDbG9zZSA6ICgpID0+IHt9O1xyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdGlvbiA9IHRoaXMuX2VtcHR5U2VsZWN0aW9uKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NlbGVjdGlvblByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdGlvblJlc29sdmUgPSByZXNvbHZlO1xyXG4gICAgICAgICAgICAvLyBSZWplY3QgaXMgc3RvcmVkLCBidXQgbmV2ZXIgdXNlZCBpbiBmYXZvciBvZiBGb3JtRGlhbG9nLmNhbmNlbGVkXHJcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdGlvblJlamVjdCA9IHJlamVjdDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fYW1lbmRCdXR0b25zV2l0aE5hbWUoKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBjbG9zZSgpIHtcclxuICAgICAgICBhd2FpdCBzdXBlci5jbG9zZSgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5jYW5jZWxlZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zZWxlY3Rpb25SZXNvbHZlKHRoaXMuc2VsZWN0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc3VibWl0KGJ1dHRvbikge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRCdXR0b24gPSBidXR0b24ubmFtZSA/PyBidXR0b24ubGFiZWw7XHJcblxyXG4gICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgIHN1cGVyLnN1Ym1pdChidXR0b24pO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuYWZ0ZXJTdWJtaXQoXCJqUXVlcnlcIiBpbiB0aGlzLm9wdGlvbnMgPyB0aGlzLmVsZW1lbnQgOiB0aGlzLmVsZW1lbnQgWzBdKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBhZnRlclN1Ym1pdChodG1sOiBKUXVlcnkpIHtcclxuICAgICAgICAvLyBBd2FpdCBpbiBjYXNlIG9mIGEgcG9zc2libGUgYXN5bmMgaGFuZGxlci5cclxuICAgICAgICB0aGlzLnNlbGVjdGlvbiA9IGF3YWl0IHRoaXMuX29uQWZ0ZXJDbG9zZShodG1sLCB0aGlzLnNlbGVjdGVkQnV0dG9uKTtcclxuICAgICAgICB0aGlzLl9zZWxlY3Rpb25SZXNvbHZlKHRoaXMuc2VsZWN0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXREYXRhKG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy5fdGVtcGxhdGVQYXRoLCB0aGlzLl90ZW1wbGF0ZURhdGEpO1xyXG4gICAgICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5nZXREYXRhKCksIHtcclxuICAgICAgICAgICAgY29udGVudFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNlbGVjdCgpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIGF3YWl0IHRoaXMucmVuZGVyKHRydWUpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fc2VsZWN0aW9uUHJvbWlzZSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuc2VsZWN0aW9uID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2VtcHR5U2VsZWN0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9zZWxlY3Rpb25Qcm9taXNlO1xyXG4gICAgfVxyXG5cclxuICAgIF9lbXB0eVNlbGVjdGlvbigpOiBvYmplY3Qge1xyXG4gICAgICAgIHJldHVybiB7fTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogRGlhbG9nIGhhcyBiZWVuIGNvbmZpcm1lZCBhbmQgc29tZXRoaW5nIGhhcyBiZWVuIHNlbGVjdGVkLlxyXG4gICAgICovXHJcbiAgICBnZXQgc2VsZWN0ZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICF0aGlzLmNhbmNlbGVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBEaWFsb2cgaGFzIGJlZW4gY2FuY2VsZWQgYW5kIG5vdGhpbmcgaGFzIGJlZW4gc2VsZWN0ZWRcclxuICAgICAqL1xyXG4gICAgZ2V0IGNhbmNlbGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAhdGhpcy5zZWxlY3RlZEJ1dHRvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKiogQG92ZXJyaWRlICovXHJcbiAgICBzdGF0aWMgZ2V0QnV0dG9ucygpOiBSZWNvcmQ8c3RyaW5nLCBEaWFsb2dCdXR0b24+IHtcclxuICAgICAgICByZXR1cm4ge307XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEFsbG93IGZvciB0aGUgc2VsZWN0ZWQgYnV0dG9uIHRvIGJlIGFkZHJlc3NlZCBieSBpdCdzIGtleSwgbm90IGl0J3MgbG9jYWxpemVkIGxhYmVsLlxyXG4gICAgICovXHJcbiAgICBfYW1lbmRCdXR0b25zV2l0aE5hbWUoKSB7XHJcbiAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5kYXRhLmJ1dHRvbnMpLmZvckVhY2gobmFtZSA9PiB0aGlzLmRhdGEuYnV0dG9uc1tuYW1lXS5uYW1lID0gbmFtZSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge0Zvcm1EaWFsb2csIEZvcm1EaWFsb2dEYXRhfSBmcm9tIFwiLi9Gb3JtRGlhbG9nXCI7XHJcbmltcG9ydCB7U1I1QWN0b3J9IGZyb20gXCIuLi8uLi9hY3Rvci9TUjVBY3RvclwiO1xyXG5pbXBvcnQge1BhcnRzTGlzdH0gZnJvbSBcIi4uLy4uL3BhcnRzL1BhcnRzTGlzdFwiO1xyXG5pbXBvcnQge0hlbHBlcnN9IGZyb20gXCIuLi8uLi9oZWxwZXJzXCI7XHJcbmltcG9ydCB7U2tpbGxGbG93fSBmcm9tIFwiLi4vLi4vYWN0b3IvU2tpbGxGbG93XCI7XHJcbmltcG9ydCBEZWZlbnNlUm9sbE9wdGlvbnMgPSBTaGFkb3dydW4uRGVmZW5zZVJvbGxPcHRpb25zO1xyXG5pbXBvcnQgTW9kTGlzdCA9IFNoYWRvd3J1bi5Nb2RMaXN0O1xyXG5pbXBvcnQgU29ha1JvbGxPcHRpb25zID0gU2hhZG93cnVuLlNvYWtSb2xsT3B0aW9ucztcclxuaW1wb3J0IFNraWxsRGlhbG9nT3B0aW9ucyA9IFNoYWRvd3J1bi5Ta2lsbERpYWxvZ09wdGlvbnM7XHJcbmltcG9ydCBDb21iYXREYXRhID0gU2hhZG93cnVuLkNvbWJhdERhdGE7XHJcbmltcG9ydCBEYW1hZ2VUeXBlID0gU2hhZG93cnVuLkRhbWFnZVR5cGU7XHJcblxyXG5leHBvcnQgY2xhc3MgU2hhZG93cnVuQWN0b3JEaWFsb2dzIHtcclxuICAgIHN0YXRpYyBhc3luYyBjcmVhdGVEZWZlbnNlRGlhbG9nKGFjdG9yOiBTUjVBY3Rvciwgb3B0aW9uczogRGVmZW5zZVJvbGxPcHRpb25zLCBwYXJ0c1Byb3BzOiBNb2RMaXN0PG51bWJlcj4pOiBQcm9taXNlPEZvcm1EaWFsb2c+IHtcclxuICAgICAgICBjb25zdCBkZWZlbnNlRGlhbG9nRGF0YSA9IFNoYWRvd3J1bkFjdG9yRGlhbG9ncy5nZXREZWZlbnNlRGlhbG9nRGF0YShhY3Rvciwgb3B0aW9ucywgcGFydHNQcm9wcyk7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgRm9ybURpYWxvZyhkZWZlbnNlRGlhbG9nRGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFzeW5jIGNyZWF0ZVNvYWtEaWFsb2cob3B0aW9uczogU29ha1JvbGxPcHRpb25zLCBzb2FrUGFydHM6IFBhcnRzTGlzdDxudW1iZXI+KTogUHJvbWlzZTxGb3JtRGlhbG9nPiB7XHJcbiAgICAgICAgY29uc3Qgc29ha0RpYWxvZ0RhdGEgPSBTaGFkb3dydW5BY3RvckRpYWxvZ3MuZ2V0U29ha0RpYWxvZ0RhdGEob3B0aW9ucywgc29ha1BhcnRzKTtcclxuICAgICAgICByZXR1cm4gbmV3IEZvcm1EaWFsb2coc29ha0RpYWxvZ0RhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBhc3luYyBjcmVhdGVTa2lsbERpYWxvZyhhY3RvcjogU1I1QWN0b3IsIG9wdGlvbnM6IFNraWxsRGlhbG9nT3B0aW9ucywgcGFydHNQcm9wczogUGFydHNMaXN0PG51bWJlcj4pOiBQcm9taXNlPEZvcm1EaWFsb2c+IHtcclxuICAgICAgICBjb25zdCBza2lsbERpYWxvZ0RhdGEgPSBTaGFkb3dydW5BY3RvckRpYWxvZ3MuZ2V0U2tpbGxEaWFsb2dEYXRhKGFjdG9yLCBvcHRpb25zLCBwYXJ0c1Byb3BzKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBGb3JtRGlhbG9nKHNraWxsRGlhbG9nRGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldERlZmVuc2VEaWFsb2dEYXRhKGFjdG9yOiBTUjVBY3RvciwgIG9wdGlvbnM6IERlZmVuc2VSb2xsT3B0aW9ucywgcGFydHNQcm9wczogTW9kTGlzdDxudW1iZXI+KTogRm9ybURpYWxvZ0RhdGEge1xyXG4gICAgICAgIGNvbnN0IHRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuRGVmZW5zZScpO1xyXG5cclxuICAgICAgICBjb25zdCBhY3RpdmVEZWZlbnNlcyA9IHtcclxuICAgICAgICAgICAgZnVsbF9kZWZlbnNlOiB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogJ1NSNS5GdWxsRGVmZW5zZScsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogYWN0b3IuZ2V0RnVsbERlZmVuc2VBdHRyaWJ1dGUoKT8udmFsdWUsXHJcbiAgICAgICAgICAgICAgICBpbml0TW9kOiAtMTAsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRvZGdlOiB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogJ1NSNS5Eb2RnZScsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogYWN0b3IuZmluZEFjdGl2ZVNraWxsKCdneW1uYXN0aWNzJyk/LnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgaW5pdE1vZDogLTUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJsb2NrOiB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogJ1NSNS5CbG9jaycsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogYWN0b3IuZmluZEFjdGl2ZVNraWxsKCd1bmFybWVkX2NvbWJhdCcpPy52YWx1ZSxcclxuICAgICAgICAgICAgICAgIGluaXRNb2Q6IC01LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IGVxdWlwcGVkTWVsZWVXZWFwb25zID0gYWN0b3IuZ2V0RXF1aXBwZWRXZWFwb25zKCkuZmlsdGVyKCh3KSA9PiB3LmlzTWVsZWVXZWFwb24oKSk7XHJcbiAgICAgICAgbGV0IGRlZmVuc2VSZWFjaCA9IDA7XHJcbiAgICAgICAgZXF1aXBwZWRNZWxlZVdlYXBvbnMuZm9yRWFjaCgod2VhcG9uKSA9PiB7XHJcbiAgICAgICAgICAgIGFjdGl2ZURlZmVuc2VzW2BwYXJyeS0ke3dlYXBvbi5uYW1lfWBdID0ge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdTUjUuUGFycnknLFxyXG4gICAgICAgICAgICAgICAgd2VhcG9uOiB3ZWFwb24ubmFtZSxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBhY3Rvci5maW5kQWN0aXZlU2tpbGwod2VhcG9uLmdldEFjdGlvblNraWxsKCkpPy52YWx1ZSxcclxuICAgICAgICAgICAgICAgIGluaXQ6IC01LFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBkZWZlbnNlUmVhY2ggPSBNYXRoLm1heChkZWZlbnNlUmVhY2gsIHdlYXBvbi5nZXRSZWFjaCgpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgcGFydHMgPSBuZXcgUGFydHNMaXN0KHBhcnRzUHJvcHMpO1xyXG4gICAgICAgIGFjdG9yLl9hZGREZWZlbnNlUGFydHMocGFydHMpO1xyXG5cclxuICAgICAgICAvLyBpZiB3ZSBhcmUgZGVmZW5kaW5nIGEgbWVsZWUgYXR0YWNrXHJcbiAgICAgICAgaWYgKG9wdGlvbnMuYXR0YWNrPy5yZWFjaCkge1xyXG4gICAgICAgICAgICBjb25zdCBpbmNvbWluZ1JlYWNoID0gb3B0aW9ucy5hdHRhY2sucmVhY2g7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ldFJlYWNoID0gZGVmZW5zZVJlYWNoIC0gaW5jb21pbmdSZWFjaDtcclxuICAgICAgICAgICAgaWYgKG5ldFJlYWNoICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJ0cy5hZGRVbmlxdWVQYXJ0KCdTUjUuUmVhY2gnLCBuZXRSZWFjaCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGJ1dHRvbnMgPSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlOiB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuQ29udGludWUnKSxcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7fSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBvbkFmdGVyQ2xvc2UgPSAoaHRtbCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb3ZlciA9IEhlbHBlcnMucGFyc2VJbnB1dFRvTnVtYmVyKCQoaHRtbCkuZmluZCgnW25hbWU9Y292ZXJdJykudmFsKCkpO1xyXG4gICAgICAgICAgICBjb25zdCBzcGVjaWFsID0gSGVscGVycy5wYXJzZUlucHV0VG9TdHJpbmcoJChodG1sKS5maW5kKCdbbmFtZT1hY3RpdmVEZWZlbnNlXScpLnZhbCgpKTtcclxuICAgICAgICAgICAgLy8gWmVybyB0byBpbmRpY2F0ZSBubyBpbml0aWF0aXZlIHJlc3VsdCBjaGFuZ2UuXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbWJhdDogQ29tYmF0RGF0YSA9IHt9O1xyXG5cclxuICAgICAgICAgICAgaWYgKGNvdmVyKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJ0cy5hZGRVbmlxdWVQYXJ0KCdTUjUuQ292ZXInLCBjb3ZlcilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc3BlY2lhbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gRGVmZW5zZSBwb29sIG1vZGlmaWVyXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWZlbnNlID0gYWN0aXZlRGVmZW5zZXNbc3BlY2lhbF07XHJcbiAgICAgICAgICAgICAgICBwYXJ0cy5hZGRVbmlxdWVQYXJ0KGRlZmVuc2UubGFiZWwsIGRlZmVuc2UudmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIENvbWJhdCBpbml0aWF0aXZlIG1vZGlmaWVyXHJcbiAgICAgICAgICAgICAgICBjb21iYXQuaW5pdGlhdGl2ZSA9IGRlZmVuc2UuaW5pdE1vZDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtjb3Zlciwgc3BlY2lhbCwgcGFydHMsIGNvbWJhdH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB0ZW1wbGF0ZVBhdGggPSAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9yb2xscy9yb2xsLWRlZmVuc2UuaHRtbCc7XHJcbiAgICAgICAgY29uc3QgdGVtcGxhdGVEYXRhID0ge1xyXG4gICAgICAgICAgICBwYXJ0czogcGFydHMuZ2V0TWVzc2FnZU91dHB1dCgpLFxyXG4gICAgICAgICAgICBjb3Zlcjogb3B0aW9ucy5jb3ZlcixcclxuICAgICAgICAgICAgYWN0aXZlRGVmZW5zZXNcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0aXRsZSxcclxuICAgICAgICAgICAgdGVtcGxhdGVEYXRhLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVBhdGgsXHJcbiAgICAgICAgICAgIGJ1dHRvbnMsXHJcbiAgICAgICAgICAgIG9uQWZ0ZXJDbG9zZVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgc3RhdGljIGdldFNvYWtEaWFsb2dEYXRhKHNvYWtSb2xsT3B0aW9uczogU29ha1JvbGxPcHRpb25zLCBzb2FrUGFydHMgOiBQYXJ0c0xpc3Q8bnVtYmVyPik6IEZvcm1EaWFsb2dEYXRhIHtcclxuICAgICAgICBjb25zdCB0aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkRhbWFnZVJlc2lzdGFuY2VUZXN0Jyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlUGF0aCA9ICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL3JvbGxzL3JvbGwtc29hay5odG1sJztcclxuICAgICAgICBjb25zdCB0ZW1wbGF0ZURhdGEgPSB7XHJcbiAgICAgICAgICAgIGRhbWFnZTogc29ha1JvbGxPcHRpb25zPy5kYW1hZ2UsXHJcbiAgICAgICAgICAgIHBhcnRzOiBzb2FrUGFydHMuZ2V0TWVzc2FnZU91dHB1dCgpLFxyXG4gICAgICAgICAgICBlbGVtZW50VHlwZXM6IENPTkZJRy5TUjUuZWxlbWVudFR5cGVzLFxyXG4gICAgICAgICAgICBkYW1hZ2VUeXBlczogQ09ORklHLlNSNS5kYW1hZ2VUeXBlc1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IGJ1dHRvbnMgPSAge1xyXG4gICAgICAgICAgICBjb250aW51ZToge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkNvbnRpbnVlJyksXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge30sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3Qgb25BZnRlckNsb3NlID0gKGh0bWw6IEpRdWVyeSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpbmNvbWluZ0RhbWFnZSA9IEhlbHBlcnMucGFyc2VJbnB1dFRvTnVtYmVyKCQoaHRtbCkuZmluZCgnW25hbWU9aW5jb21pbmdEYW1hZ2VdJykudmFsKCkpO1xyXG4gICAgICAgICAgICBjb25zdCBhcCA9IEhlbHBlcnMucGFyc2VJbnB1dFRvTnVtYmVyKCQoaHRtbCkuZmluZCgnW25hbWU9YXBdJykudmFsKCkpO1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gSGVscGVycy5wYXJzZUlucHV0VG9TdHJpbmcoJChodG1sKS5maW5kKCdbbmFtZT1lbGVtZW50XScpLnZhbCgpKTtcclxuICAgICAgICAgICAgY29uc3QgZGFtYWdlVHlwZSA9IEhlbHBlcnMucGFyc2VJbnB1dFRvU3RyaW5nKCQoaHRtbCkuZmluZCgnW25hbWU9ZGFtYWdlVHlwZV0nKS52YWwoKSkgYXMgRGFtYWdlVHlwZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7aW5jb21pbmdEYW1hZ2UsIGRhbWFnZVR5cGUsIGFwLCBlbGVtZW50fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRpdGxlLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVBhdGgsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlRGF0YSxcclxuICAgICAgICAgICAgYnV0dG9ucyxcclxuICAgICAgICAgICAgb25BZnRlckNsb3NlXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRTa2lsbERpYWxvZ0RhdGEoYWN0b3I6IFNSNUFjdG9yLCBvcHRpb25zOiBTa2lsbERpYWxvZ09wdGlvbnMsIHBhcnRzUHJvcHM6IFBhcnRzTGlzdDxudW1iZXI+KTogRm9ybURpYWxvZ0RhdGEge1xyXG4gICAgICAgIGNvbnN0IHRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKG9wdGlvbnMuc2tpbGwubGFiZWwgfHwgb3B0aW9ucy5za2lsbC5uYW1lKTtcclxuICAgICAgICBjb25zdCB0ZW1wbGF0ZVBhdGggPSAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9yb2xscy9za2lsbC1yb2xsLmh0bWwnO1xyXG5cclxuICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gYWN0b3IuZ2V0QXR0cmlidXRlcygpO1xyXG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IGFjdG9yLmdldEF0dHJpYnV0ZShvcHRpb25zLmF0dHJpYnV0ZSA/IG9wdGlvbnMuYXR0cmlidXRlIDogb3B0aW9ucy5za2lsbC5hdHRyaWJ1dGUpO1xyXG4gICAgICAgIGNvbnN0IGxpbWl0cyA9IGFjdG9yLmdldExpbWl0cygpO1xyXG5cclxuICAgICAgICBjb25zdCB0ZW1wbGF0ZURhdGEgPSB7XHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZTogb3B0aW9ucy5za2lsbC5hdHRyaWJ1dGUsXHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IEhlbHBlcnMuZmlsdGVyKGF0dHJpYnV0ZXMsIChbLCB2YWx1ZV0pID0+IHZhbHVlLnZhbHVlID4gMCksXHJcbiAgICAgICAgICAgIGxpbWl0OiBhdHRyaWJ1dGUubGltaXQsXHJcbiAgICAgICAgICAgIGxpbWl0c1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGNvbnN0IGJ1dHRvbnMgPSB7XHJcbiAgICAgICAgICAgIHJvbGw6IHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5Ob3JtYWxTa2lsbEJ1dHRvbicpLFxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHt9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gYWRkIHNwZWNpYWxpemF0aW9ucyB0byBkaWFsb2cgYXMgYnV0dG9uc1xyXG4gICAgICAgIGlmIChvcHRpb25zLnNraWxsLnNwZWNzPy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgb3B0aW9ucy5za2lsbC5zcGVjcy5mb3JFYWNoKFxyXG4gICAgICAgICAgICAgICAgKHNwZWMpID0+XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1dHRvbnNbc3BlY10gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBzcGVjLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge30sXHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBvbkFmdGVyQ2xvc2UgPSAoaHRtbDogSlF1ZXJ5LCBzZWxlY3RlZEJ1dHRvbikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBuZXdBdHQgPSBIZWxwZXJzLnBhcnNlSW5wdXRUb1N0cmluZygkKGh0bWwpLmZpbmQoJ1tuYW1lPVwiYXR0cmlidXRlXCJdJykudmFsKCkpO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdMaW1pdCA9IEhlbHBlcnMucGFyc2VJbnB1dFRvU3RyaW5nKCQoaHRtbCkuZmluZCgnW25hbWU9XCJhdHRyaWJ1dGUubGltaXRcIl0nKS52YWwoKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IGFjdG9yLmdldEF0dHJpYnV0ZShuZXdBdHQpO1xyXG4gICAgICAgICAgICBjb25zdCBsaW1pdCA9IGFjdG9yLmdldExpbWl0KG5ld0xpbWl0KTtcclxuICAgICAgICAgICAgLy8gTGVnYWN5IHNraWxscyBoYXZlIGEgbGFiZWwsIGJ1dCBubyBuYW1lLiBDdXN0b20gc2tpbGxzIGhhdmUgYSBuYW1lIGJ1dCBubyBsYWJlbC5cclxuICAgICAgICAgICAgY29uc3Qgc2tpbGxMYWJlbCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShvcHRpb25zLnNraWxsLmxhYmVsIHx8IG9wdGlvbnMuc2tpbGwubmFtZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZUxhYmVsID0gZ2FtZS5pMThuLmxvY2FsaXplKENPTkZJRy5TUjUuYXR0cmlidXRlc1tuZXdBdHRdKTtcclxuICAgICAgICAgICAgY29uc3QgdGVzdExhYmVsID0gZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuVGVzdCcpXHJcblxyXG4gICAgICAgICAgICBjb25zdCBza2lsbFRlc3RUaXRsZSA9IGAke3NraWxsTGFiZWx9ICsgJHthdHRyaWJ1dGVMYWJlbH0gJHt0ZXN0TGFiZWx9YDtcclxuXHJcbiAgICAgICAgICAgIHBhcnRzUHJvcHMuYWRkVW5pcXVlUGFydChhdHRyaWJ1dGUubGFiZWwsIGF0dHJpYnV0ZS52YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICBTa2lsbEZsb3cuaGFuZGxlRGVmYXVsdGluZyhvcHRpb25zLnNraWxsLCBwYXJ0c1Byb3BzKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFBvc3NpYmxlIHNwZWNpYWxpemF0aW9uIGJhc2VkIG9uIGJ1dHRvbiBsYWJlbC5cclxuICAgICAgICAgICAgY29uc3QgaXNTcGVjaWFsaXphdGlvbiA9IG9wdGlvbnMuc2tpbGwuc3BlY3MuaW5jbHVkZXMoc2VsZWN0ZWRCdXR0b24pO1xyXG4gICAgICAgICAgICBpZiAoaXNTcGVjaWFsaXphdGlvbikge1xyXG4gICAgICAgICAgICAgICAgcGFydHNQcm9wcy5hZGRVbmlxdWVQYXJ0KCdTUjUuU3BlY2lhbGl6YXRpb24nLCAyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBza2lsbFRlc3RUaXRsZSxcclxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZSxcclxuICAgICAgICAgICAgICAgIGxpbWl0LFxyXG4gICAgICAgICAgICAgICAgc2tpbGw6IG9wdGlvbnMuc2tpbGwsXHJcbiAgICAgICAgICAgICAgICBwYXJ0czogcGFydHNQcm9wc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0aXRsZSxcclxuICAgICAgICAgICAgdGVtcGxhdGVQYXRoLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZURhdGEsXHJcbiAgICAgICAgICAgIGJ1dHRvbnMsXHJcbiAgICAgICAgICAgIG9uQWZ0ZXJDbG9zZVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7U1I1SXRlbX0gZnJvbSAnLi4vLi4vaXRlbS9TUjVJdGVtJztcclxuaW1wb3J0IHtIZWxwZXJzfSBmcm9tICcuLi8uLi9oZWxwZXJzJztcclxuaW1wb3J0IHtMRU5HVEhfVU5JVCwgU1J9IGZyb20gXCIuLi8uLi9jb25zdGFudHNcIjtcclxuaW1wb3J0IHtTUjVBY3Rvcn0gZnJvbSBcIi4uLy4uL2FjdG9yL1NSNUFjdG9yXCI7XHJcbmltcG9ydCBGaXJlTW9kZURhdGEgPSBTaGFkb3dydW4uRmlyZU1vZGVEYXRhO1xyXG5pbXBvcnQgUmFuZ2VzVGVtcGxhdGVEYXRhID0gU2hhZG93cnVuLlJhbmdlc1RlbXBsYXRlRGF0YTtcclxuaW1wb3J0IFJhbmdlRGF0YSA9IFNoYWRvd3J1bi5SYW5nZURhdGE7XHJcbmltcG9ydCB7Rm9ybURpYWxvZ30gZnJvbSBcIi4vRm9ybURpYWxvZ1wiO1xyXG5pbXBvcnQgV2VhcG9uRGF0YSA9IFNoYWRvd3J1bi5XZWFwb25EYXRhO1xyXG5pbXBvcnQge01vZGlmaWVyc30gZnJvbSBcIi4uLy4uL3NyNS9Nb2RpZmllcnNcIjtcclxuXHJcbnR5cGUgSXRlbURpYWxvZ0RhdGEgPSB7XHJcbiAgICBkaWFsb2dEYXRhOiBEaWFsb2dEYXRhIHwgdW5kZWZpbmVkLFxyXG4gICAgZ2V0QWN0aW9uVGVzdERhdGE6IEZ1bmN0aW9uIHwgdW5kZWZpbmVkLFxyXG4gICAgaXRlbUhhc05vRGlhbG9nOiBib29sZWFuXHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBSYW5nZWRXZWFwb25BY3Rpb25UZXN0RGF0YSA9IHtcclxuICAgIGVudmlyb25tZW50YWw6IHtcclxuICAgICAgICByYW5nZT86IG51bWJlclxyXG4gICAgfSxcclxuICAgIGZpcmVNb2RlOiBGaXJlTW9kZURhdGEsXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFNwZWxsQWN0aW9uVGVzdERhdGEgPSB7XHJcbiAgICBmb3JjZTogbnVtYmVyLFxyXG4gICAgcmVja2xlc3M6IGJvb2xlYW4sXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIENvbXBsZXhGb3JtVGVzdERhdGEgPSB7XHJcbiAgICBsZXZlbDogbnVtYmVyXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEFjdGlvblRlc3REYXRhID0ge1xyXG4gICAgcmFuZ2VkV2VhcG9uPzogUmFuZ2VkV2VhcG9uQWN0aW9uVGVzdERhdGEsXHJcbiAgICBzcGVsbD86IFNwZWxsQWN0aW9uVGVzdERhdGEsXHJcbiAgICBjb21wbGV4Rm9ybT86IENvbXBsZXhGb3JtVGVzdERhdGEsXHJcbiAgICB0YXJnZXRJZD86IHN0cmluZ1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFNoYWRvd3J1bkl0ZW1EaWFsb2cge1xyXG4gICAgc3RhdGljIGFzeW5jIGNyZWF0ZShpdGVtOiBTUjVJdGVtLCBldmVudD86IE1vdXNlRXZlbnQpOiBQcm9taXNlPEZvcm1EaWFsb2d8dW5kZWZpbmVkPiB7XHJcblxyXG4gICAgICAgIGlmIChpdGVtLmlzUmFuZ2VkV2VhcG9uKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNoYWRvd3J1bkl0ZW1EaWFsb2cuY3JlYXRlUmFuZ2VkV2VhcG9uRGlhbG9nKGl0ZW0sIGV2ZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpdGVtLmlzU3BlbGwoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gU2hhZG93cnVuSXRlbURpYWxvZy5jcmVhdGVTcGVsbERpYWxvZyhpdGVtLCBldmVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaXRlbS5pc0NvbXBsZXhGb3JtKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNoYWRvd3J1bkl0ZW1EaWFsb2cuY3JlYXRlQ29tcGxleEZvcm1EaWFsb2coaXRlbSwgZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYXN5bmMgY3JlYXRlUmFuZ2VkV2VhcG9uRGlhbG9nKGl0ZW06IFNSNUl0ZW0sIGV2ZW50PzogTW91c2VFdmVudCk6IFByb21pc2U8Rm9ybURpYWxvZz4ge1xyXG4gICAgICAgIGNvbnN0IGRpYWxvZ0RhdGEgPSB7dGl0bGU6IGl0ZW0ubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlUGF0aCA9ICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL3JvbGxzL3JhbmdlLXdlYXBvbi1yb2xsLmh0bWwnO1xyXG5cclxuICAgICAgICAvLyBQcmVwYXJlIHRlbXBsYXRlIGRhdGEgZm9yIGRpc3BsYXkuXHJcbiAgICAgICAgY29uc3QgbW9kaWZpZXJzID0gYXdhaXQgaXRlbS5hY3Rvci5nZXRNb2RpZmllcnMoKTtcclxuXHJcbiAgICAgICAgLy8gRGlzYWJsZSBtYW51YWwgcmFuZ2Ugc2VsZWN0aW9uIHdoZW4gYSBvdmVyd3JpdGUgaXMgc2V0LlxyXG4gICAgICAgIGNvbnN0IHRhcmdldFJhbmdlID0gbW9kaWZpZXJzLmVudmlyb25tZW50YWwuYWN0aXZlLnJhbmdlO1xyXG4gICAgICAgIGNvbnN0IGRpc2FibGVUYXJnZXRSYW5nZSA9IG1vZGlmaWVycy5oYXNBY3RpdmVFbnZpcm9ubWVudGFsT3ZlcndyaXRlO1xyXG5cclxuICAgICAgICBjb25zb2xlLmVycm9yKG1vZGlmaWVycyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlRGF0YSA9IHtcclxuICAgICAgICAgICAgdGFyZ2V0UmFuZ2UsXHJcbiAgICAgICAgICAgIGRpc2FibGVUYXJnZXRSYW5nZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3Qgb25BZnRlckNsb3NlID0gU2hhZG93cnVuSXRlbURpYWxvZy5hZGRSYW5nZWRXZWFwb25EYXRhKHRlbXBsYXRlRGF0YSwgZGlhbG9nRGF0YSwgaXRlbSk7XHJcblxyXG4gICAgICAgIGRpYWxvZ0RhdGFbJ3RlbXBsYXRlRGF0YSddID0gdGVtcGxhdGVEYXRhO1xyXG4gICAgICAgIGRpYWxvZ0RhdGFbJ3RlbXBsYXRlUGF0aCddID0gdGVtcGxhdGVQYXRoO1xyXG4gICAgICAgIGRpYWxvZ0RhdGFbJ29uQWZ0ZXJDbG9zZSddID0gb25BZnRlckNsb3NlO1xyXG5cclxuICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICByZXR1cm4gbmV3IEZvcm1EaWFsb2coZGlhbG9nRGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFzeW5jIGNyZWF0ZVNwZWxsRGlhbG9nKGl0ZW06IFNSNUl0ZW0sIGV2ZW50PzogTW91c2VFdmVudCk6IFByb21pc2U8Rm9ybURpYWxvZz4ge1xyXG4gICAgICAgIGNvbnN0IGRpYWxvZ0RhdGEgPSB7dGl0bGU6IGl0ZW0ubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlUGF0aCA9ICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL3JvbGxzL3JvbGwtc3BlbGwuaHRtbCc7XHJcbiAgICAgICAgY29uc3QgdGVtcGxhdGVEYXRhID0ge307XHJcbiAgICAgICAgY29uc3Qgb25BZnRlckNsb3NlID0gU2hhZG93cnVuSXRlbURpYWxvZy5hZGRTcGVsbERhdGEodGVtcGxhdGVEYXRhLCBkaWFsb2dEYXRhLCBpdGVtKTtcclxuXHJcbiAgICAgICAgZGlhbG9nRGF0YVsndGVtcGxhdGVEYXRhJ10gPSB0ZW1wbGF0ZURhdGE7XHJcbiAgICAgICAgZGlhbG9nRGF0YVsndGVtcGxhdGVQYXRoJ10gPSB0ZW1wbGF0ZVBhdGg7XHJcbiAgICAgICAgZGlhbG9nRGF0YVsnb25BZnRlckNsb3NlJ10gPSBvbkFmdGVyQ2xvc2U7XHJcblxyXG4gICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgIHJldHVybiBuZXcgRm9ybURpYWxvZyhkaWFsb2dEYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYXN5bmMgY3JlYXRlQ29tcGxleEZvcm1EaWFsb2coaXRlbTogU1I1SXRlbSwgZXZlbnQ/OiBNb3VzZUV2ZW50KTogUHJvbWlzZTxGb3JtRGlhbG9nPiB7XHJcbiAgICAgICAgY29uc3QgZGlhbG9nRGF0YSA9IHt0aXRsZTogaXRlbS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgdGVtcGxhdGVQYXRoID0gJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvcm9sbHMvcm9sbC1jb21wbGV4LWZvcm0uaHRtbCc7XHJcbiAgICAgICAgY29uc3QgdGVtcGxhdGVEYXRhID0ge307XHJcbiAgICAgICAgY29uc3Qgb25BZnRlckNsb3NlID0gU2hhZG93cnVuSXRlbURpYWxvZy5hZGRDb21wbGV4Rm9ybURhdGEodGVtcGxhdGVEYXRhLCBkaWFsb2dEYXRhLCBpdGVtKTtcclxuXHJcbiAgICAgICAgZGlhbG9nRGF0YVsndGVtcGxhdGVEYXRhJ10gPSB0ZW1wbGF0ZURhdGE7XHJcbiAgICAgICAgZGlhbG9nRGF0YVsndGVtcGxhdGVQYXRoJ10gPSB0ZW1wbGF0ZVBhdGg7XHJcbiAgICAgICAgZGlhbG9nRGF0YVsnb25BZnRlckNsb3NlJ10gPSBvbkFmdGVyQ2xvc2U7XHJcblxyXG4gICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgIHJldHVybiBuZXcgRm9ybURpYWxvZyhkaWFsb2dEYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYWRkQ29tcGxleEZvcm1EYXRhKHRlbXBsYXRlRGF0YTogb2JqZWN0LCBkaWFsb2dEYXRhOiBEaWFsb2dEYXRhLCBpdGVtOiBTUjVJdGVtKTogRnVuY3Rpb24ge1xyXG4gICAgICAgIGNvbnN0IGZhZGUgPSBpdGVtLmdldEZhZGUoKTtcclxuICAgICAgICBjb25zdCB0aXRsZSA9IGAke0hlbHBlcnMubGFiZWwoaXRlbS5uYW1lKX0gTGV2ZWxgO1xyXG5cclxuICAgICAgICBjb25zdCBsZXZlbCA9IGl0ZW0uZ2V0TGFzdENvbXBsZXhGb3JtTGV2ZWwoKT8udmFsdWUgfHwgMiAtIGZhZGU7XHJcblxyXG4gICAgICAgIHRlbXBsYXRlRGF0YVsnZmFkZSddID0gZmFkZSA+PSAwID8gYCske2ZhZGV9YCA6IGZhZGU7XHJcbiAgICAgICAgdGVtcGxhdGVEYXRhWydsZXZlbCddID0gbGV2ZWw7XHJcbiAgICAgICAgdGVtcGxhdGVEYXRhWyd0aXRsZSddID0gdGl0bGU7XHJcblxyXG4gICAgICAgIGxldCBjYW5jZWwgPSB0cnVlO1xyXG4gICAgICAgIGRpYWxvZ0RhdGEuYnV0dG9ucyA9IHtcclxuICAgICAgICAgICAgcm9sbDoge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdDb250aW51ZScsXHJcbiAgICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtZGljZS1zaXhcIj48L2k+JyxcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiAoY2FuY2VsID0gZmFsc2UpLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBhc3luYyAoaHRtbDogSlF1ZXJ5KTogUHJvbWlzZTxBY3Rpb25UZXN0RGF0YXx1bmRlZmluZWQ+ID0+IHtcclxuICAgICAgICAgICAgaWYgKGNhbmNlbCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgYWN0aW9uVGVzdERhdGEgPSB7fSBhcyBDb21wbGV4Rm9ybVRlc3REYXRhO1xyXG5cclxuICAgICAgICAgICAgbWVyZ2VPYmplY3QoYWN0aW9uVGVzdERhdGEsIFNoYWRvd3J1bkl0ZW1EaWFsb2cuX2dldFNlbGVjdGVkQ29tcGxleEZvcm1MZXZlbChodG1sKSlcclxuXHJcbiAgICAgICAgICAgIC8vIFRPRE86IFJlbW5hbnRzIG9mIG9sZCBzdHlsZSBkYXRhIGZsb3cuIExvb2sgaW50byBSYW5nZWRXZWFwb24gZm9yIG5ld2VyIHN0eWxlLlxyXG4gICAgICAgICAgICBhd2FpdCBpdGVtLnNldExhc3RDb21wbGV4Rm9ybUxldmVsKHt2YWx1ZTogYWN0aW9uVGVzdERhdGEubGV2ZWx9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7Y29tcGxleEZvcm06IGFjdGlvblRlc3REYXRhfTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBfZ2V0U2VsZWN0ZWRDb21wbGV4Rm9ybUxldmVsKGh0bWw6IEpRdWVyeSk6IG9iamVjdCB7XHJcbiAgICAgICAgY29uc3QgbGV2ZWwgPSBIZWxwZXJzLnBhcnNlSW5wdXRUb051bWJlcigkKGh0bWwpLmZpbmQoJ1tuYW1lPWxldmVsXScpLnZhbCgpKTtcclxuICAgICAgICByZXR1cm4ge2xldmVsfTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYWRkU3BlbGxEYXRhKHRlbXBsYXRlRGF0YTogb2JqZWN0LCBkaWFsb2dEYXRhOiBEaWFsb2dEYXRhLCBpdGVtOiBTUjVJdGVtKTogRnVuY3Rpb24ge1xyXG4gICAgICAgIGNvbnN0IHRpdGxlID0gYCR7SGVscGVycy5sYWJlbChpdGVtLm5hbWUpfSBGb3JjZWA7XHJcbiAgICAgICAgY29uc3QgZHJhaW4gPSBpdGVtLmdldERyYWluKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZvcmNlID0gaXRlbS5nZXRMYXN0U3BlbGxGb3JjZSgpPy52YWx1ZSB8fCAyIC0gZHJhaW47XHJcblxyXG4gICAgICAgIHRlbXBsYXRlRGF0YVsnZHJhaW4nXSA9IGRyYWluID49IDAgPyBgKyR7ZHJhaW59YCA6IGAke2RyYWlufWA7XHJcbiAgICAgICAgdGVtcGxhdGVEYXRhWydmb3JjZSddID0gZm9yY2U7XHJcbiAgICAgICAgdGVtcGxhdGVEYXRhWyd0aXRsZSddID0gdGl0bGU7XHJcblxyXG4gICAgICAgIGRpYWxvZ0RhdGEudGl0bGUgPSB0aXRsZTtcclxuICAgICAgICBsZXQgY2FuY2VsID0gdHJ1ZTtcclxuICAgICAgICBsZXQgcmVja2xlc3MgPSBmYWxzZTtcclxuICAgICAgICBkaWFsb2dEYXRhLmJ1dHRvbnMgPSB7XHJcbiAgICAgICAgICAgIG5vcm1hbDoge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1Lk5vcm1hbFNwZWxsQnV0dG9uJyksXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4gKGNhbmNlbCA9IGZhbHNlKSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcmVja2xlc3M6IHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5SZWNrbGVzc1NwZWxsQnV0dG9uJyksXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlY2tsZXNzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBjYW5jZWwgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuICAgICAgICBkaWFsb2dEYXRhLmRlZmF1bHQgPSAnbm9ybWFsJztcclxuXHJcbiAgICAgICAgcmV0dXJuIGFzeW5jIChodG1sOiBKUXVlcnkpOiBQcm9taXNlPEFjdGlvblRlc3REYXRhfHVuZGVmaW5lZD4gPT4ge1xyXG4gICAgICAgICAgICBpZiAoY2FuY2VsKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBjb25zdCBhY3Rpb25UZXN0RGF0YSA9IHt9IGFzIFNwZWxsQWN0aW9uVGVzdERhdGE7XHJcblxyXG4gICAgICAgICAgICBtZXJnZU9iamVjdChhY3Rpb25UZXN0RGF0YSwgU2hhZG93cnVuSXRlbURpYWxvZy5fZ2V0U2VsZWN0ZWRTcGVsbEZvcmNlKGh0bWwpKTtcclxuICAgICAgICAgICAgbWVyZ2VPYmplY3QoYWN0aW9uVGVzdERhdGEsIFNoYWRvd3J1bkl0ZW1EaWFsb2cuX2dldFNlbGVjdGVkU3BlbGxSZWNrbGVzcyhyZWNrbGVzcykpO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgaXRlbS5zZXRMYXN0U3BlbGxGb3JjZSh7dmFsdWU6IGFjdGlvblRlc3REYXRhLmZvcmNlLCByZWNrbGVzczogYWN0aW9uVGVzdERhdGEucmVja2xlc3N9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7c3BlbGw6IGFjdGlvblRlc3REYXRhfTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBfZ2V0U2VsZWN0ZWRTcGVsbEZvcmNlKGh0bWw6IEpRdWVyeSk6IG9iamVjdCB7XHJcbiAgICAgICAgY29uc3QgZm9yY2UgPSBIZWxwZXJzLnBhcnNlSW5wdXRUb051bWJlcigkKGh0bWwpLmZpbmQoJ1tuYW1lPWZvcmNlXScpLnZhbCgpKTtcclxuICAgICAgICByZXR1cm4ge2ZvcmNlfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBfZ2V0U2VsZWN0ZWRTcGVsbFJlY2tsZXNzKHJlY2tsZXNzOiBib29sZWFuKTogb2JqZWN0IHtcclxuICAgICAgICByZXR1cm4ge3JlY2tsZXNzfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBhZGRSYW5nZWRXZWFwb25EYXRhKHRlbXBsYXRlRGF0YTogb2JqZWN0LCBkaWFsb2dEYXRhOiBEaWFsb2dEYXRhLCBpdGVtOiBTUjVJdGVtKTogRnVuY3Rpb24ge1xyXG4gICAgICAgIGxldCB0aXRsZSA9IGRpYWxvZ0RhdGEudGl0bGUgfHwgaXRlbS5uYW1lO1xyXG5cclxuICAgICAgICBjb25zdCBpdGVtRGF0YSA9IGl0ZW0uZGF0YS5kYXRhIGFzIFdlYXBvbkRhdGE7XHJcbiAgICAgICAgY29uc3QgZmlyZU1vZGVzID0ge307XHJcblxyXG4gICAgICAgIGNvbnN0IHttb2RlcywgcmFuZ2VzfSA9IGl0ZW1EYXRhLnJhbmdlO1xyXG4gICAgICAgIGNvbnN0IHthbW1vfSA9IGl0ZW1EYXRhO1xyXG4gICAgICAgIC8vIFRPRE86IFRoaXMgc2hvdWxkIGJlIG1vdmVkIGludG8gY29uc3RhbnRzIG9yIHNvbWUga2luZCBvZiAncnVsZXNEYXRhJ1xyXG4gICAgICAgIGlmIChtb2Rlcy5zaW5nbGVfc2hvdCkge1xyXG4gICAgICAgICAgICBmaXJlTW9kZXNbJzEnXSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcIlNSNS5XZWFwb25Nb2RlU2luZ2xlU2hvdFNob3J0XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobW9kZXMuc2VtaV9hdXRvKSB7XHJcbiAgICAgICAgICAgIGZpcmVNb2Rlc1snMSddID0gZ2FtZS5pMThuLmxvY2FsaXplKFwiU1I1LldlYXBvbk1vZGVTZW1pQXV0b1Nob3J0XCIpO1xyXG4gICAgICAgICAgICBmaXJlTW9kZXNbJzMnXSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcIlNSNS5XZWFwb25Nb2RlU2VtaUF1dG9CdXJzdFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG1vZGVzLmJ1cnN0X2ZpcmUpIHtcclxuICAgICAgICAgICAgZmlyZU1vZGVzWyczJ10gPSBgJHttb2Rlcy5zZW1pX2F1dG8gPyBgJHtnYW1lLmkxOG4ubG9jYWxpemUoXCJTUjUuV2VhcG9uTW9kZVNlbWlBdXRvQnVyc3RcIil9L2AgOiAnJ30ke2dhbWUuaTE4bi5sb2NhbGl6ZShcIlNSNS5XZWFwb25Nb2RlQnVyc3RGaXJlU2hvcnRcIil9YDtcclxuICAgICAgICAgICAgZmlyZU1vZGVzWyc2J10gPSBnYW1lLmkxOG4ubG9jYWxpemUoXCJTUjUuV2VhcG9uTW9kZUJ1cnN0RmlyZUxvbmdcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChtb2Rlcy5mdWxsX2F1dG8pIHtcclxuICAgICAgICAgICAgZmlyZU1vZGVzWyc2J10gPSBgJHttb2Rlcy5idXJzdF9maXJlID8gJ0xCLycgOiAnJ30ke2dhbWUuaTE4bi5sb2NhbGl6ZShcIlNSNS5XZWFwb25Nb2RlRnVsbEF1dG9TaG9ydFwiKX0ocylgO1xyXG4gICAgICAgICAgICBmaXJlTW9kZXNbJzEwJ10gPSBgJHtnYW1lLmkxOG4ubG9jYWxpemUoXCJTUjUuV2VhcG9uTW9kZUZ1bGxBdXRvU2hvcnRcIil9KGMpYDtcclxuICAgICAgICAgICAgZmlyZU1vZGVzWycyMCddID0gZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuU3VwcHJlc3NpbmcnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlUmFuZ2VzID0gdGhpcy5fZ2V0UmFuZ2VXZWFwb25UZW1wbGF0ZURhdGEocmFuZ2VzKTtcclxuICAgICAgICBjb25zdCBmaXJlTW9kZSA9IGl0ZW0uZ2V0TGFzdEZpcmVNb2RlKCk7XHJcbiAgICAgICAgY29uc3QgcmMgPSBpdGVtLmdldFJlY29pbENvbXBlbnNhdGlvbih0cnVlKTtcclxuICAgICAgICB0ZW1wbGF0ZURhdGFbJ2ZpcmVNb2RlcyddID0gZmlyZU1vZGVzO1xyXG4gICAgICAgIHRlbXBsYXRlRGF0YVsnZmlyZU1vZGUnXSA9IGZpcmVNb2RlPy52YWx1ZTtcclxuICAgICAgICB0ZW1wbGF0ZURhdGFbJ3JjJ10gPSByYztcclxuICAgICAgICB0ZW1wbGF0ZURhdGFbJ2FtbW8nXSA9IGFtbW87XHJcbiAgICAgICAgdGVtcGxhdGVEYXRhWyd0aXRsZSddID0gdGl0bGU7XHJcbiAgICAgICAgdGVtcGxhdGVEYXRhWydyYW5nZXMnXSA9IHRlbXBsYXRlUmFuZ2VzO1xyXG5cclxuICAgICAgICBpZiAoaXRlbS5hY3Rvci5nZXRUb2tlbigpICYmIEhlbHBlcnMudXNlckhhc1RhcmdldHMoKSkge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZURhdGFbJ3RhcmdldHNTZWxlY3RlZCddID0gSGVscGVycy51c2VySGFzVGFyZ2V0cygpO1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZURhdGFbJ3RhcmdldHMnXSA9IFNoYWRvd3J1bkl0ZW1EaWFsb2cuX2dldFRhcmdldFJhbmdlVGVtcGxhdGVEYXRhKGl0ZW0uYWN0b3IsIHRlbXBsYXRlUmFuZ2VzKTtcclxuICAgICAgICB9IGVsc2UgaWYgKCFpdGVtLmFjdG9yLmdldFRva2VuKCkgJiYgSGVscGVycy51c2VySGFzVGFyZ2V0cygpKSB7XHJcbiAgICAgICAgICAgIC8vIEluZm9ybSB1c2VyIGFib3V0IHVzYWdlIG9mIGFjdG9ycyB3aXRob3V0IHRva2VucyFcclxuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LlRhcmdldGluZ05lZWRzQWN0b3JXaXRoVG9rZW4nKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgY2FuY2VsID0gdHJ1ZTtcclxuICAgICAgICBkaWFsb2dEYXRhLmJ1dHRvbnMgPSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlOiB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuQ29udGludWUnKSxcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiAoY2FuY2VsID0gZmFsc2UpLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFRPRE86IE1vdmUgdGhpcyBzZWxlY3Rpb24gaGFuZGxlciB0byBhbiBhcHByb3ByaWF0ZSBwbGFjZS4gTWF5YmUgc3BsaXQgU2hhZG93cnVuSXRlbURpYWxvZyBpbnRvIHN1YmNsYXNzZXMuXHJcbiAgICAgICAgcmV0dXJuIGFzeW5jIChodG1sKTogUHJvbWlzZTxBY3Rpb25UZXN0RGF0YXx1bmRlZmluZWQ+ID0+IHtcclxuICAgICAgICAgICAgaWYgKGNhbmNlbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBhY3Rpb25UZXN0RGF0YSA9IHt9IGFzIFJhbmdlZFdlYXBvbkFjdGlvblRlc3REYXRhO1xyXG5cclxuICAgICAgICAgICAgaWYgKEhlbHBlcnMudXNlckhhc1RhcmdldHMoKSkge1xyXG4gICAgICAgICAgICAgICAgbWVyZ2VPYmplY3QoYWN0aW9uVGVzdERhdGEsIFNoYWRvd3J1bkl0ZW1EaWFsb2cuX2dldFNlbGVjdGVkVGFyZ2V0UmFuZ2VNb2RpZmllcihodG1sKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBtZXJnZU9iamVjdChhY3Rpb25UZXN0RGF0YSwgU2hhZG93cnVuSXRlbURpYWxvZy5fZ2V0U2VsZWN0ZWRSYW5nZU1vZGlmaWVyKGh0bWwpKTtcclxuICAgICAgICAgICAgICAgIC8vIFN0b3JlIGxhc3RGaXJlUmFuZ2UgZm9yIGdlbmVyaWMgcmFuZ2Ugc2VsZWN0aW9uLlxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBtZXJnZU9iamVjdChhY3Rpb25UZXN0RGF0YSwgU2hhZG93cnVuSXRlbURpYWxvZy5fZ2V0U2VsZWN0ZWRGaXJlTW9kZShodG1sLCBmaXJlTW9kZXMpKVxyXG5cclxuICAgICAgICAgICAgY29uc3Qge3RhcmdldElkfSA9IFNoYWRvd3J1bkl0ZW1EaWFsb2cuX2dldFNlbGVjdGVkVGFyZ2V0VG9rZW5JZChodG1sKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFN0b3JlIHNlbGVjdGlvbnMgZm9yIG5leHQgZGlhbG9nLlxyXG5cclxuICAgICAgICAgICAgaWYgKGFjdGlvblRlc3REYXRhLmVudmlyb25tZW50YWwucmFuZ2UgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ2hhbmdlIGVudmlyb25tZW50YWwgbW9kaWZpZXJzIGZvciB0aGUgYWN0b3IuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RpZmllcnMgPSBhd2FpdCBpdGVtLmFjdG9yLmdldE1vZGlmaWVycygpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFtb2RpZmllcnMuaGFzQWN0aXZlRW52aXJvbm1lbnRhbE92ZXJ3cml0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGlmaWVycy5hY3RpdmF0ZUVudmlyb25tZW50YWxDYXRlZ29yeSgncmFuZ2UnLCBhY3Rpb25UZXN0RGF0YS5lbnZpcm9ubWVudGFsLnJhbmdlKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBpdGVtLmFjdG9yLnNldE1vZGlmaWVycyhtb2RpZmllcnMpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdUaGUgYWN0b3IgaGFzIGFuIGFjdGl2ZSBlbnZpcm9ubWVudGFsIG92ZXJ3cml0ZSwgeWV0IGNvdWxkIGRlZmluZSBhIG1hbnVhbCByYW5nZSBzZWxlY3Rpb24uJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYXdhaXQgaXRlbS5zZXRMYXN0RmlyZVJhbmdlTW9kKHt2YWx1ZTogYWN0aW9uVGVzdERhdGEuZW52aXJvbm1lbnRhbC5yYW5nZX0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhY3Rpb25UZXN0RGF0YS5maXJlTW9kZSkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgaXRlbS5zZXRMYXN0RmlyZU1vZGUoYWN0aW9uVGVzdERhdGEuZmlyZU1vZGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge3JhbmdlZFdlYXBvbjogYWN0aW9uVGVzdERhdGEsIHRhcmdldElkfTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBfZ2V0UmFuZ2VXZWFwb25UZW1wbGF0ZURhdGEocmFuZ2VzOiBSYW5nZURhdGEpOiBSYW5nZXNUZW1wbGF0ZURhdGEge1xyXG4gICAgICAgIGNvbnN0IHtyYW5nZV9tb2RpZmllcnN9ID0gU1IuY29tYmF0LmVudmlyb25tZW50YWw7XHJcbiAgICAgICAgY29uc3QgbmV3UmFuZ2VzID0ge30gYXMgUmFuZ2VzVGVtcGxhdGVEYXRhO1xyXG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHJhbmdlcykpIHtcclxuICAgICAgICAgICAgY29uc3QgZGlzdGFuY2UgPSB2YWx1ZSBhcyBudW1iZXI7XHJcbiAgICAgICAgICAgIG5ld1Jhbmdlc1trZXldID0gSGVscGVycy5jcmVhdGVSYW5nZURlc2NyaXB0aW9uKENPTkZJRy5TUjUud2VhcG9uUmFuZ2VzW2tleV0sIGRpc3RhbmNlLCByYW5nZV9tb2RpZmllcnNba2V5XSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXdSYW5nZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEJ1aWxkIHRlbXBsYXRlIGRhdGEgZm9yIHRhcmdldCBkaXN0YW5jZXMgYW5kIHJlc3VsdGluZyByYW5nZSBtb2RpZmllcnNcclxuICAgICAqXHJcbiAgICAgKiBJdCBpcyBtYW5kYXRvcnkgZm9yIGFuIGFjdG9yIHRvIGhhdmUgdG9rZW4gcGxhY2VkLFxyXG4gICAgICogc28gZGlzdGFuY2UgbWVhc3VyZW1lbnRzIGNhbiBiZSB0YWtlbi5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBfZ2V0VGFyZ2V0UmFuZ2VUZW1wbGF0ZURhdGEoYWN0b3I6IFNSNUFjdG9yLCByYW5nZXMpIHtcclxuICAgICAgICBjb25zdCBhdHRhY2tlciA9IGFjdG9yLmdldFRva2VuKCk7XHJcblxyXG4gICAgICAgIGlmICghYXR0YWNrZXIgfHwgIUhlbHBlcnMudXNlckhhc1RhcmdldHMoKSkge1xyXG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuVGFyZ2V0aW5nTmVlZHNBY3RvcldpdGhUb2tlbicpKTtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdGFyZ2V0cyA9IEhlbHBlcnMuZ2V0VXNlclRhcmdldHMoKTtcclxuXHJcbiAgICAgICAgY29uc3QgdGFyZ2V0c1RlbXBsYXRlRGF0YSA9IHRhcmdldHMubWFwKHRhcmdldCA9PiB7XHJcbiAgICAgICAgICAgIC8vQHRzLWlnbm9yZSAvLyB1bmRlZmluZWQgYWN0b3IgaXMgb2theVxyXG4gICAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IEhlbHBlcnMubWVhc3VyZVRva2VuRGlzdGFuY2UoYXR0YWNrZXIsIHRhcmdldCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gSGVscGVycy5nZXRXZWFwb25SYW5nZShkaXN0YW5jZSwgcmFuZ2VzKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGlkOiB0YXJnZXQuaWQsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiB0YXJnZXQubmFtZSxcclxuICAgICAgICAgICAgICAgIHJhbmdlOiByYW5nZSxcclxuICAgICAgICAgICAgICAgIHVuaXQ6IExFTkdUSF9VTklULFxyXG4gICAgICAgICAgICAgICAgZGlzdGFuY2VcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgcmV0dXJuIHRhcmdldHNUZW1wbGF0ZURhdGEuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYS5kaXN0YW5jZSA8IGIuZGlzdGFuY2UpIHJldHVybiAtMTtcclxuICAgICAgICAgICAgaWYgKGEuZGlzdGFuY2UgPiBiLmRpc3RhbmNlKSByZXR1cm4gMTtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIF9nZXRTZWxlY3RlZFRhcmdldFJhbmdlTW9kaWZpZXIoaHRtbDogSlF1ZXJ5KTogb2JqZWN0IHtcclxuICAgICAgICBjb25zdCBzZWxlY3RFbGVtZW50ID0gJChodG1sKS5maW5kKCdbbmFtZT1cInNlbGVjdGVkLXRhcmdldFwiXScpO1xyXG4gICAgICAgIGNvbnN0IHJhbmdlID0gSGVscGVycy5wYXJzZUlucHV0VG9OdW1iZXIoc2VsZWN0RWxlbWVudC5maW5kKCc6c2VsZWN0ZWQnKS5kYXRhKCdyYW5nZS1tb2RpZmllcicpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZW52aXJvbm1lbnRhbDoge3JhbmdlfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIF9nZXRTZWxlY3RlZFRhcmdldFRva2VuSWQoaHRtbDogSlF1ZXJ5KSB7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0RWxlbWVudCA9ICQoaHRtbCkuZmluZCgnW25hbWU9XCJzZWxlY3RlZC10YXJnZXRcIl0nKTtcclxuICAgICAgICBjb25zdCB0YXJnZXRJZCA9IHNlbGVjdEVsZW1lbnQudmFsKCkgYXMgc3RyaW5nO1xyXG4gICAgICAgIHJldHVybiB7dGFyZ2V0SWR9O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBfZ2V0U2VsZWN0ZWRSYW5nZU1vZGlmaWVyKGh0bWw6IEpRdWVyeSk6IG9iamVjdCB7XHJcbiAgICAgICAgY29uc3QgcmFuZ2UgPSBIZWxwZXJzLnBhcnNlSW5wdXRUb051bWJlcigkKGh0bWwpLmZpbmQoJ1tuYW1lPVwicmFuZ2VcIl0nKS52YWwoKSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7ZW52aXJvbm1lbnRhbDoge3JhbmdlfX1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgX2dldFNlbGVjdGVkRmlyZU1vZGUoaHRtbDogSlF1ZXJ5LCBmaXJlTW9kZXMpOiBvYmplY3Qge1xyXG4gICAgICAgIGNvbnN0IGZpcmVNb2RlVmFsdWUgPSBIZWxwZXJzLnBhcnNlSW5wdXRUb051bWJlcigkKGh0bWwpLmZpbmQoJ1tuYW1lPVwiZmlyZU1vZGVcIl0nKS52YWwoKSk7XHJcbiAgICAgICAgaWYgKGZpcmVNb2RlVmFsdWUpIHtcclxuICAgICAgICAgICAgY29uc3QgZmlyZU1vZGVTdHJpbmcgPSBmaXJlTW9kZXNbZmlyZU1vZGVWYWx1ZV07XHJcbiAgICAgICAgICAgIGNvbnN0IGRlZmVuc2VNb2RpZmllciA9IEhlbHBlcnMubWFwUm91bmRzVG9EZWZlbnNlRGVzYyhmaXJlTW9kZVZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGZpcmVNb2RlOiBGaXJlTW9kZURhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogZmlyZU1vZGVTdHJpbmcsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogZmlyZU1vZGVWYWx1ZSxcclxuICAgICAgICAgICAgICAgIGRlZmVuc2U6IGRlZmVuc2VNb2RpZmllcixcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7ZmlyZU1vZGV9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7Rm9ybURpYWxvZywgRm9ybURpYWxvZ0RhdGF9IGZyb20gXCIuL0Zvcm1EaWFsb2dcIjtcclxuaW1wb3J0IHtSb2xsRGlhbG9nT3B0aW9uc30gZnJvbSBcIi4uLy4uL3JvbGxzL1NoYWRvd3J1blJvbGxlclwiO1xyXG5pbXBvcnQge1BhcnRzTGlzdH0gZnJvbSBcIi4uLy4uL3BhcnRzL1BhcnRzTGlzdFwiO1xyXG5pbXBvcnQge1NSNUFjdG9yfSBmcm9tIFwiLi4vLi4vYWN0b3IvU1I1QWN0b3JcIjtcclxuaW1wb3J0IHtDT1JFX0ZMQUdTLCBDT1JFX05BTUUsIEZMQUdTLCBTWVNURU1fTkFNRX0gZnJvbSBcIi4uLy4uL2NvbnN0YW50c1wiO1xyXG5pbXBvcnQge0hlbHBlcnN9IGZyb20gXCIuLi8uLi9oZWxwZXJzXCI7XHJcbmltcG9ydCBNb2RMaXN0ID0gU2hhZG93cnVuLk1vZExpc3Q7XHJcbmltcG9ydCBCYXNlVmFsdWVQYWlyID0gU2hhZG93cnVuLkJhc2VWYWx1ZVBhaXI7XHJcbmltcG9ydCBMYWJlbEZpZWxkID0gU2hhZG93cnVuLkxhYmVsRmllbGQ7XHJcblxyXG5pbnRlcmZhY2UgQWR2YW5jZWRUZXN0Um9sbE9wdGlvbnMge1xyXG4gICAgdGl0bGU/OiBzdHJpbmc7XHJcbiAgICBkaWFsb2dPcHRpb25zPzogUm9sbERpYWxvZ09wdGlvbnM7XHJcbiAgICBleHRlbmRlZD86IGJvb2xlYW47XHJcbiAgICBsaW1pdD86IEJhc2VWYWx1ZVBhaXI8bnVtYmVyPiAmIExhYmVsRmllbGQ7XHJcbiAgICB3b3VuZHM/OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU2hhZG93cnVuVGVzdERpYWxvZyB7XHJcbiAgICBzdGF0aWMgYXN5bmMgY3JlYXRlKGFjdG9yOiBTUjVBY3Rvcnx1bmRlZmluZWQsIG9wdGlvbnM6IEFkdmFuY2VkVGVzdFJvbGxPcHRpb25zLCBwYXJ0c1Byb3BzOiBNb2RMaXN0PG51bWJlcj4pOiBQcm9taXNlPEZvcm1EaWFsb2c+IHtcclxuICAgICAgICBjb25zdCB0ZXN0RGlhbG9nRGF0YSA9IFNoYWRvd3J1blRlc3REaWFsb2cuZ2V0QWR2YW5jZWRUZXN0RGF0YShhY3Rvciwgb3B0aW9ucywgcGFydHNQcm9wcyk7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgRm9ybURpYWxvZyh0ZXN0RGlhbG9nRGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldEFkdmFuY2VkVGVzdERhdGEoYWN0b3IsIG9wdGlvbnM6IEFkdmFuY2VkVGVzdFJvbGxPcHRpb25zLCBwYXJ0c1Byb3BzOiBNb2RMaXN0PG51bWJlcj4pOiBGb3JtRGlhbG9nRGF0YSB7XHJcbiAgICAgICAgY29uc3QgdGl0bGUgPSBvcHRpb25zLnRpdGxlO1xyXG4gICAgICAgIGNvbnN0IHBhcnRzID0gbmV3IFBhcnRzTGlzdChwYXJ0c1Byb3BzKTtcclxuXHJcbiAgICAgICAgY29uc3QgdGVtcGxhdGVEYXRhID0ge1xyXG4gICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zLmRpYWxvZ09wdGlvbnMsXHJcbiAgICAgICAgICAgIGV4dGVuZGVkOiBvcHRpb25zLmV4dGVuZGVkLFxyXG4gICAgICAgICAgICBwb29sOiBwYXJ0cy50b3RhbCxcclxuICAgICAgICAgICAgcGFydHM6IHBhcnRzLmdldE1lc3NhZ2VPdXRwdXQoKSxcclxuICAgICAgICAgICAgbGltaXRWYWx1ZTogb3B0aW9ucy5saW1pdD8udmFsdWUsXHJcbiAgICAgICAgICAgIHdvdW5kczogb3B0aW9ucy53b3VuZHMsXHJcbiAgICAgICAgICAgIHdvdW5kVmFsdWU6IGFjdG9yPy5nZXRXb3VuZE1vZGlmaWVyKCksXHJcbiAgICAgICAgICAgIHJvbGxNb2RlOiBnYW1lLnNldHRpbmdzLmdldChDT1JFX05BTUUsIENPUkVfRkxBR1MuUm9sbE1vZGUpLFxyXG4gICAgICAgICAgICByb2xsTW9kZXM6IENPTkZJRy5EaWNlLnJvbGxNb2Rlc1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHRlbXBsYXRlUGF0aCA9ICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL3JvbGxzL3JvbGwtZGlhbG9nLmh0bWwnO1xyXG5cclxuICAgICAgICBjb25zdCByb2xsQnV0dG9uTmFtZSA9ICdyb2xsJ1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvbnMgPSB7XHJcbiAgICAgICAgICAgIFtyb2xsQnV0dG9uTmFtZV06IHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5Sb2xsJyksXHJcbiAgICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtZGljZS1zaXhcIj48L2k+JyxcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKGFjdG9yKSB7XHJcbiAgICAgICAgICAgIGJ1dHRvbnNbJ2VkZ2UnXSA9IHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5QdXNoVGhlTGltaXQnKX0gKCske2FjdG9yLmdldEVkZ2UoKS52YWx1ZX0pYCxcclxuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1ib21iXCI+PC9pPicsXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG9uQWZ0ZXJDbG9zZSA9IGFzeW5jIChodG1sOiBKUXVlcnkpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGljZVBvb2xWYWx1ZSA9IEhlbHBlcnMucGFyc2VJbnB1dFRvTnVtYmVyKCQoaHRtbCkuZmluZCgnW25hbWU9XCJwb29sXCJdJykudmFsKCkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGlhbG9nT3B0aW9ucz8ucG9vbCkge1xyXG4gICAgICAgICAgICAgICAgcGFydHMuY2xlYXIoKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGdhbWUudXNlci5zZXRGbGFnKFNZU1RFTV9OQU1FLCBGTEFHUy5MYXN0Um9sbFByb21wdFZhbHVlLCBkaWNlUG9vbFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHBhcnRzLmFkZFVuaXF1ZVBhcnQoJ1NSNS5CYXNlJywgZGljZVBvb2xWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGxpbWl0VmFsdWUgPSBIZWxwZXJzLnBhcnNlSW5wdXRUb051bWJlcigkKGh0bWwpLmZpbmQoJ1tuYW1lPVwibGltaXRWYWx1ZVwiXScpLnZhbCgpKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHtsaW1pdH0gPSBvcHRpb25zO1xyXG4gICAgICAgICAgICBpZiAobGltaXQgJiYgbGltaXQudmFsdWUgIT09IGxpbWl0VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGxpbWl0LnZhbHVlID0gbGltaXRWYWx1ZTtcclxuICAgICAgICAgICAgICAgIGxpbWl0LmJhc2UgPSBsaW1pdFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgbGltaXQubGFiZWwgPSAnU1I1Lk92ZXJyaWRlJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3Qgd291bmRWYWx1ZSA9IEhlbHBlcnMucGFyc2VJbnB1dFRvTnVtYmVyKCQoaHRtbCkuZmluZCgnW25hbWU9XCJ3b3VuZHNcIl0nKS52YWwoKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNpdHVhdGlvbk1vZCA9IEhlbHBlcnMucGFyc2VJbnB1dFRvTnVtYmVyKCQoaHRtbCkuZmluZCgnW25hbWU9XCJkcF9tb2RcIl0nKS52YWwoKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVudmlyb25tZW50TW9kID0gSGVscGVycy5wYXJzZUlucHV0VG9OdW1iZXIoJChodG1sKS5maW5kKCdbbmFtZT1cIm9wdGlvbnMuZW52aXJvbm1lbnRhbFwiXScpLnZhbCgpKTtcclxuXHJcbiAgICAgICAgICAgIGxldCB7d291bmRzfSA9IG9wdGlvbnM7XHJcbiAgICAgICAgICAgIGlmICh3b3VuZHMgJiYgd291bmRWYWx1ZSAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcGFydHMuYWRkVW5pcXVlUGFydCgnU1I1LldvdW5kcycsIHdvdW5kVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgd291bmRzID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc2l0dWF0aW9uTW9kKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJ0cy5hZGRVbmlxdWVQYXJ0KCdTUjUuU2l0dWF0aW9uYWxNb2RpZmllcicsIHNpdHVhdGlvbk1vZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGVudmlyb25tZW50TW9kKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJ0cy5hZGRVbmlxdWVQYXJ0KCdTUjUuRW52aXJvbm1lbnRNb2RpZmllcicsIGVudmlyb25tZW50TW9kKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZXh0ZW5kZWRTdHJpbmcgPSBIZWxwZXJzLnBhcnNlSW5wdXRUb1N0cmluZygkKGh0bWwpLmZpbmQoJ1tuYW1lPVwiZXh0ZW5kZWRcIl0nKS52YWwoKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4dGVuZGVkID0gZXh0ZW5kZWRTdHJpbmcgPT09ICd0cnVlJztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJvbGxNb2RlID0gSGVscGVycy5wYXJzZUlucHV0VG9TdHJpbmcoJChodG1sKS5maW5kKCdbbmFtZT1yb2xsTW9kZV0nKS52YWwoKSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbGltaXQsXHJcbiAgICAgICAgICAgICAgICB3b3VuZHMsXHJcbiAgICAgICAgICAgICAgICBwYXJ0cyxcclxuICAgICAgICAgICAgICAgIGV4dGVuZGVkLFxyXG4gICAgICAgICAgICAgICAgcm9sbE1vZGVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRpdGxlLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZURhdGEsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlUGF0aCxcclxuICAgICAgICAgICAgYnV0dG9ucyxcclxuICAgICAgICAgICAgZGVmYXVsdDogcm9sbEJ1dHRvbk5hbWUsXHJcbiAgICAgICAgICAgIG9uQWZ0ZXJDbG9zZVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8qKlxyXG4gKiBBIEdNLVRvb2wgdG8ga2VlcCB0cmFjayBvZiBhbGwgcGxheWVycyBvdmVyd2F0Y2ggc2NvcmVzXHJcbiAqL1xyXG5pbXBvcnQge0hlbHBlcnN9IGZyb20gXCIuLi8uLi9oZWxwZXJzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgT3ZlcndhdGNoU2NvcmVUcmFja2VyIGV4dGVuZHMgQXBwbGljYXRpb24ge1xyXG4gICAgc3RhdGljIE1hdHJpeE92ZXJ3YXRjaERpY2VDb3VudCA9ICcyZDYnO1xyXG4gICAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucygpIHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0gc3VwZXIuZGVmYXVsdE9wdGlvbnM7XHJcbiAgICAgICAgb3B0aW9ucy5pZCA9ICdvdmVyd2F0Y2gtc2NvcmUtdHJhY2tlcic7XHJcbiAgICAgICAgb3B0aW9ucy5jbGFzc2VzID0gWydzcjUnXTtcclxuICAgICAgICBvcHRpb25zLnRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuT3ZlcndhdGNoU2NvcmVUcmFja2VyVGl0bGUnKTtcclxuICAgICAgICBvcHRpb25zLnRlbXBsYXRlID0gJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvYXBwcy9nbXRvb2xzL292ZXJ3YXRjaC1zY29yZS10cmFja2VyLmh0bWwnO1xyXG4gICAgICAgIG9wdGlvbnMud2lkdGggPSA0NTA7XHJcbiAgICAgICAgb3B0aW9ucy5oZWlnaHQgPSAnYXV0byc7XHJcbiAgICAgICAgb3B0aW9ucy5yZXNpemFibGUgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBhZGRlZEFjdG9ycyA9IFtdO1xyXG5cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgICAgLy8gZ2V0IGxpc3Qgb2YgYWN0b3JzIHRoYXQgYmVsb25nIHRvIHVzZXJzXHJcbiAgICAgICAgY29uc3QgYWN0b3JzID0gZ2FtZS51c2Vycy5yZWR1Y2UoKGFjYywgdXNlcikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXVzZXIuaXNHTSAmJiB1c2VyLmNoYXJhY3Rlcikge1xyXG4gICAgICAgICAgICAgICAgYWNjLnB1c2godXNlci5jaGFyYWN0ZXIuZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgICB9LCBbXSk7XHJcblxyXG4gICAgICAgIE92ZXJ3YXRjaFNjb3JlVHJhY2tlci5hZGRlZEFjdG9ycy5mb3JFYWNoKChpZCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmZpbmQoKGEpID0+IGEuX2lkID09PSBpZCk7XHJcbiAgICAgICAgICAgIGlmIChhY3Rvcikge1xyXG4gICAgICAgICAgICAgICAgYWN0b3JzLnB1c2goYWN0b3IuZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYWN0b3JzLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbCkge1xyXG4gICAgICAgIGh0bWwuZmluZCgnLm92ZXJ3YXRjaC1zY29yZS1yZXNldCcpLm9uKCdjbGljaycsIHRoaXMuX3Jlc2V0T3ZlcndhdGNoU2NvcmUuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgaHRtbC5maW5kKCcub3ZlcndhdGNoLXNjb3JlLWFkZCcpLm9uKCdjbGljaycsIHRoaXMuX2FkZE92ZXJ3YXRjaFNjb3JlLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGh0bWwuZmluZCgnLm92ZXJ3YXRjaC1zY29yZS1pbnB1dCcpLm9uKCdjaGFuZ2UnLCB0aGlzLl9zZXRPdmVyd2F0Y2hTY29yZS5iaW5kKHRoaXMpKTtcclxuICAgICAgICBodG1sLmZpbmQoJy5vdmVyd2F0Y2gtc2NvcmUtcm9sbC0xNS1taW51dGVzJykub24oJ2NsaWNrJywgdGhpcy5fcm9sbEZvcjE1TWludXRlcy5iaW5kKHRoaXMpKTtcclxuICAgICAgICBodG1sLmZpbmQoJy5vdmVyd2F0Y2gtc2NvcmUtYWRkLWFjdG9yJykub24oJ2NsaWNrJywgdGhpcy5fb25BZGRBY3Rvci5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm5zIHRoZSBhY3RvciB0aGF0IHRoaXMgZXZlbnQgaXMgYWN0aW5nIG9uXHJcbiAgICBfZ2V0QWN0b3JGcm9tRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCBpZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmxpc3QtaXRlbScpLmRhdGFzZXQuYWN0b3JJZDtcclxuICAgICAgICBpZiAoaWQpIHJldHVybiBnYW1lLmFjdG9ycy5maW5kKChhKSA9PiBhLl9pZCA9PT0gaWQpO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbkFkZEFjdG9yKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zdCB0b2tlbnMgPSBIZWxwZXJzLmdldENvbnRyb2xsZWRUb2tlbnMoKTtcclxuICAgICAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuT3ZlcndhdGNoU2NvcmVUcmFja2VyLk5vdGlmeU5vU2VsZWN0ZWRUb2tlbnMnKSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdG9rZW5zLmZvckVhY2goKHRva2VuKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFjdG9ySWQgPSB0b2tlbi5kYXRhLmFjdG9ySWQ7XHJcbiAgICAgICAgICAgIE92ZXJ3YXRjaFNjb3JlVHJhY2tlci5hZGRlZEFjdG9ycy5wdXNoKGFjdG9ySWQpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXRPdmVyd2F0Y2hTY29yZShldmVudCkge1xyXG4gICAgICAgIGNvbnN0IGFjdG9yID0gdGhpcy5fZ2V0QWN0b3JGcm9tRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIGNvbnN0IGFtb3VudCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWU7XHJcbiAgICAgICAgaWYgKGFtb3VudCAmJiBhY3Rvcikge1xyXG4gICAgICAgICAgICBhY3Rvci5zZXRPdmVyd2F0Y2hTY29yZShhbW91bnQpLnRoZW4oKCkgPT4gdGhpcy5yZW5kZXIoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9hZGRPdmVyd2F0Y2hTY29yZShldmVudCkge1xyXG4gICAgICAgIGNvbnN0IGFjdG9yID0gdGhpcy5fZ2V0QWN0b3JGcm9tRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIGNvbnN0IGFtb3VudCA9IHBhcnNlSW50KGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hbW91bnQpO1xyXG4gICAgICAgIGlmIChhbW91bnQgJiYgYWN0b3IpIHtcclxuICAgICAgICAgICAgY29uc3Qgb3MgPSBhY3Rvci5nZXRPdmVyd2F0Y2hTY29yZSgpO1xyXG4gICAgICAgICAgICBhY3Rvci5zZXRPdmVyd2F0Y2hTY29yZShvcyArIGFtb3VudCkudGhlbigoKSA9PiB0aGlzLnJlbmRlcigpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX3Jlc2V0T3ZlcndhdGNoU2NvcmUoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGNvbnN0IGFjdG9yID0gdGhpcy5fZ2V0QWN0b3JGcm9tRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIGlmIChhY3Rvcikge1xyXG4gICAgICAgICAgICBhY3Rvci5zZXRPdmVyd2F0Y2hTY29yZSgwKS50aGVuKCgpID0+IHRoaXMucmVuZGVyKCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfcm9sbEZvcjE1TWludXRlcyhldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgY29uc3QgYWN0b3IgPSB0aGlzLl9nZXRBY3RvckZyb21FdmVudChldmVudCk7XHJcbiAgICAgICAgaWYgKGFjdG9yKSB7XHJcbiAgICAgICAgICAgIC8vICB1c2Ugc3RhdGljIHZhbHVlIHNvIGl0IGNhbiBiZSBtb2RpZmllZCBpbiBtb2R1bGVzXHJcbiAgICAgICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgUm9sbChPdmVyd2F0Y2hTY29yZVRyYWNrZXIuTWF0cml4T3ZlcndhdGNoRGljZUNvdW50KTtcclxuICAgICAgICAgICAgcm9sbC5yb2xsKCk7XHJcblxyXG4gICAgICAgICAgICAvLyB1c2UgR00gUm9sbCBNb2RlIHNvIHBsYXllcnMgZG9uJ3Qgc2VlXHJcbiAgICAgICAgICAgIC8vIGNvbnN0IHJvbGxNb2RlID0gQ09ORklHLkRpY2Uucm9sbE1vZGVzLmdtcm9sbDtcclxuICAgICAgICAgICAgLy8gcm9sbC50b01lc3NhZ2UoeyByb2xsTW9kZSB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyb2xsLnRvdGFsKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvcyA9IGFjdG9yLmdldE92ZXJ3YXRjaFNjb3JlKCk7XHJcbiAgICAgICAgICAgICAgICBhY3Rvci5zZXRPdmVyd2F0Y2hTY29yZShvcyArIHJvbGwudG90YWwpLnRoZW4oKCkgPT4gdGhpcy5yZW5kZXIoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgTGFuZ3VhZ2VTa2lsbEVkaXRGb3JtIH0gZnJvbSAnLi9MYW5ndWFnZVNraWxsRWRpdEZvcm0nO1xyXG5pbXBvcnQgS25vd2xlZGdlU2tpbGxDYXRlZ29yeSA9IFNoYWRvd3J1bi5Lbm93bGVkZ2VTa2lsbENhdGVnb3J5O1xyXG5cclxuZXhwb3J0IGNsYXNzIEtub3dsZWRnZVNraWxsRWRpdEZvcm0gZXh0ZW5kcyBMYW5ndWFnZVNraWxsRWRpdEZvcm0ge1xyXG4gICAgY2F0ZWdvcnk6IEtub3dsZWRnZVNraWxsQ2F0ZWdvcnk7XHJcbiAgICBjb25zdHJ1Y3RvcihhY3Rvciwgb3B0aW9ucywgc2tpbGxJZCwgY2F0ZWdvcnkpIHtcclxuICAgICAgICBzdXBlcihhY3Rvciwgb3B0aW9ucywgc2tpbGxJZCk7XHJcbiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IGNhdGVnb3J5O1xyXG4gICAgfVxyXG4gICAgX3VwZGF0ZVN0cmluZygpIHtcclxuICAgICAgICByZXR1cm4gYGRhdGEuc2tpbGxzLmtub3dsZWRnZS4ke3RoaXMuY2F0ZWdvcnl9LnZhbHVlLiR7dGhpcy5za2lsbElkfWA7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgU2tpbGxFZGl0Rm9ybSB9IGZyb20gJy4vU2tpbGxFZGl0Rm9ybSc7XHJcbmltcG9ydCBTa2lsbEVkaXRGb3JtRGF0YSA9IFNoYWRvd3J1bi5Ta2lsbEVkaXRGb3JtRGF0YTtcclxuXHJcbmV4cG9ydCBjbGFzcyBMYW5ndWFnZVNraWxsRWRpdEZvcm0gZXh0ZW5kcyBTa2lsbEVkaXRGb3JtIHtcclxuICAgIF91cGRhdGVTdHJpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIGBkYXRhLnNraWxscy5sYW5ndWFnZS52YWx1ZS4ke3RoaXMuc2tpbGxJZH1gO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmdldERhdGEoKSwge1xyXG4gICAgICAgICAgICBlZGl0YWJsZV9uYW1lOiB0cnVlLFxyXG4gICAgICAgICAgICBlZGl0YWJsZV9jYW5EZWZhdWx0OiBmYWxzZSxcclxuICAgICAgICAgICAgZWRpdGFibGVfYXR0cmlidXRlOiBmYWxzZVxyXG4gICAgICAgIH0gYXMgU2tpbGxFZGl0Rm9ybURhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBAb3ZlcnJpZGUgKi9cclxuICAgIF9vblVwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEsIHVwZGF0ZURhdGEpIHtcclxuICAgICAgICBzdXBlci5fb25VcGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhLCB1cGRhdGVEYXRhKTtcclxuICAgICAgICBjb25zdCBuYW1lID0gZm9ybURhdGFbJ2RhdGEubmFtZSddO1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnREYXRhID0gdXBkYXRlRGF0YVt0aGlzLl91cGRhdGVTdHJpbmcoKV0gfHwge307XHJcbiAgICAgICAgdXBkYXRlRGF0YVt0aGlzLl91cGRhdGVTdHJpbmcoKV0gPSB7XHJcbiAgICAgICAgICAgIC4uLmN1cnJlbnREYXRhLFxyXG4gICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IFNraWxsRWRpdEZvcm1EYXRhID0gU2hhZG93cnVuLlNraWxsRWRpdEZvcm1EYXRhO1xyXG5pbXBvcnQge1NSNUFjdG9yfSBmcm9tIFwiLi4vLi4vYWN0b3IvU1I1QWN0b3JcIjtcclxuaW1wb3J0IEF0dHJpYnV0ZXMgPSBTaGFkb3dydW4uQXR0cmlidXRlcztcclxuaW1wb3J0IFNraWxsRmllbGQgPSBTaGFkb3dydW4uU2tpbGxGaWVsZDtcclxuXHJcbmV4cG9ydCBjbGFzcyBTa2lsbEVkaXRGb3JtIGV4dGVuZHMgQmFzZUVudGl0eVNoZWV0IHtcclxuICAgIHNraWxsSWQ6IHN0cmluZztcclxuXHJcbiAgICBnZXQgZW50aXR5KCk6IFNSNUFjdG9yIHtcclxuICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICByZXR1cm4gc3VwZXIuZW50aXR5O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFjdG9yLCBvcHRpb25zLCBza2lsbElkKSB7XHJcbiAgICAgICAgc3VwZXIoYWN0b3IsIG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuc2tpbGxJZCA9IHNraWxsSWQ7XHJcbiAgICB9XHJcblxyXG4gICAgX3VwZGF0ZVN0cmluZygpIHtcclxuICAgICAgICByZXR1cm4gYGRhdGEuc2tpbGxzLmFjdGl2ZS4ke3RoaXMuc2tpbGxJZH1gO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMoKSB7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHN1cGVyLmRlZmF1bHRPcHRpb25zO1xyXG4gICAgICAgIHJldHVybiBtZXJnZU9iamVjdChvcHRpb25zLCB7XHJcbiAgICAgICAgICAgIGlkOiAnc2tpbGwtZWRpdG9yJyxcclxuICAgICAgICAgICAgY2xhc3NlczogWydzcjUnLCAnc2hlZXQnLCAnc2tpbGwtZWRpdC13aW5kb3cnXSxcclxuICAgICAgICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2FwcHMvc2tpbGwtZWRpdC5odG1sJyxcclxuICAgICAgICAgICAgd2lkdGg6IDMwMCxcclxuICAgICAgICAgICAgc3VibWl0T25DbG9zZTogdHJ1ZSxcclxuICAgICAgICAgICAgc3VibWl0T25DaGFuZ2U6IHRydWUsXHJcbiAgICAgICAgICAgIGNsb3NlT25TdWJtaXQ6IGZhbHNlLFxyXG4gICAgICAgICAgICByZXNpemFibGU6IHRydWUsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHRpdGxlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgbGFiZWwgPSB0aGlzLmVudGl0eS5nZXRTa2lsbExhYmVsKHRoaXMuc2tpbGxJZCk7XHJcbiAgICAgICAgcmV0dXJuIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkVkaXRTa2lsbCcpfSAtICR7Z2FtZS5pMThuLmxvY2FsaXplKGxhYmVsKX1gO1xyXG4gICAgfVxyXG5cclxuICAgIF9vblVwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEsIHVwZGF0ZURhdGEpIHtcclxuICAgICAgICAvLyBnZXQgc2tpbGwgbmFtZS5cclxuICAgICAgICAvLyBOT1RFOiBUaGlzIGRpZmZlcnMgZnJvbSB0aGUgc2tpbGwgaWQsIHdoaWNoIGlzIHVzZWQgdG8gaWRlbnRpZnkgdGhlIHNraWxsIGludGVybmFsbHkuXHJcbiAgICAgICAgY29uc3QgbmFtZSA9IGZvcm1EYXRhWydkYXRhLm5hbWUnXTtcclxuXHJcbiAgICAgICAgLy8gZ2V0IGF0dHJpYnV0ZSBuYW1lXHJcbiAgICAgICAgY29uc3QgYXR0cmlidXRlID0gZm9ybURhdGFbJ2RhdGEuYXR0cmlidXRlJ107XHJcblxyXG4gICAgICAgIC8vIGdldCBiYXNlIHZhbHVlXHJcbiAgICAgICAgY29uc3QgYmFzZSA9IGZvcm1EYXRhWydkYXRhLmJhc2UnXTtcclxuXHJcbiAgICAgICAgLy8gZ2V0IGNhbiBkZWZhdWx0XHJcbiAgICAgICAgY29uc3QgY2FuRGVmYXVsdCA9IGZvcm1EYXRhWydkYXRhLmNhbkRlZmF1bHQnXTtcclxuXHJcbiAgICAgICAgLy8gcHJvY2VzcyBzcGVjaWFsaXphdGlvbnNcclxuICAgICAgICBjb25zdCBzcGVjc1JlZ2V4ID0gL2RhdGFcXC5zcGVjc1xcLihcXGQrKS87XHJcbiAgICAgICAgY29uc3Qgc3BlY3MgPSBPYmplY3QuZW50cmllcyhmb3JtRGF0YSkucmVkdWNlKChydW5uaW5nLCBba2V5LCB2YWxdOiBbc3RyaW5nLCBhbnldKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZvdW5kID0ga2V5Lm1hdGNoKHNwZWNzUmVnZXgpO1xyXG4gICAgICAgICAgICBpZiAoZm91bmQgJiYgZm91bmRbMF0pIHtcclxuICAgICAgICAgICAgICAgIHJ1bm5pbmcucHVzaCh2YWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBydW5uaW5nO1xyXG4gICAgICAgIH0sIFtdIGFzIGFueVtdKTtcclxuXHJcbiAgICAgICAgLy8gcHJvY2VzcyBib251c2VzXHJcbiAgICAgICAgY29uc3QgYm9udXNLZXlSZWdleCA9IC9kYXRhXFwuYm9udXNcXC4oXFxkKykua2V5LztcclxuICAgICAgICBjb25zdCBib251c1ZhbHVlUmVnZXggPSAvZGF0YVxcLmJvbnVzXFwuKFxcZCspLnZhbHVlLztcclxuICAgICAgICBjb25zdCBib251cyA9IE9iamVjdC5lbnRyaWVzKGZvcm1EYXRhKS5yZWR1Y2UoKHJ1bm5pbmcsIFtrZXksIHZhbHVlXTogW3N0cmluZywgYW55XSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBmb3VuZEtleSA9IGtleS5tYXRjaChib251c0tleVJlZ2V4KTtcclxuICAgICAgICAgICAgY29uc3QgZm91bmRWYWwgPSBrZXkubWF0Y2goYm9udXNWYWx1ZVJlZ2V4KTtcclxuICAgICAgICAgICAgaWYgKGZvdW5kS2V5ICYmIGZvdW5kS2V5WzBdICYmIGZvdW5kS2V5WzFdKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGZvdW5kS2V5WzFdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJ1bm5pbmdbaW5kZXhdID09PSB1bmRlZmluZWQpIHJ1bm5pbmdbaW5kZXhdID0ge307XHJcbiAgICAgICAgICAgICAgICBydW5uaW5nW2luZGV4XS5rZXkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChmb3VuZFZhbCAmJiBmb3VuZFZhbFswXSAmJiBmb3VuZFZhbFsxXSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBmb3VuZFZhbFsxXTtcclxuICAgICAgICAgICAgICAgIGlmIChydW5uaW5nW2luZGV4XSA9PT0gdW5kZWZpbmVkKSBydW5uaW5nW2luZGV4XSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgcnVubmluZ1tpbmRleF0udmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJ1bm5pbmc7XHJcbiAgICAgICAgfSwgW10gYXMgYW55W10pO1xyXG5cclxuICAgICAgICBjb25zdCBjdXJyZW50RGF0YSA9IHVwZGF0ZURhdGFbdGhpcy5fdXBkYXRlU3RyaW5nKCldIHx8IHt9O1xyXG4gICAgICAgIHVwZGF0ZURhdGFbdGhpcy5fdXBkYXRlU3RyaW5nKCldID0ge1xyXG4gICAgICAgICAgICAuLi5jdXJyZW50RGF0YSxcclxuICAgICAgICAgICAgYmFzZSxcclxuICAgICAgICAgICAgc3BlY3MsXHJcbiAgICAgICAgICAgIGJvbnVzLFxyXG4gICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICBhdHRyaWJ1dGUsXHJcbiAgICAgICAgICAgIGNhbkRlZmF1bHRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBAb3ZlcnJpZGUgKi9cclxuICAgIGFzeW5jIF91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKSB7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9O1xyXG4gICAgICAgIHRoaXMuX29uVXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSwgdXBkYXRlRGF0YSk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5lbnRpdHkudXBkYXRlKHVwZGF0ZURhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIGFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpIHtcclxuICAgICAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKTtcclxuICAgICAgICAkKGh0bWwpLmZpbmQoJy5hZGQtc3BlYycpLm9uKCdjbGljaycsIHRoaXMuX2FkZE5ld1NwZWMuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgJChodG1sKS5maW5kKCcucmVtb3ZlLXNwZWMnKS5vbignY2xpY2snLCB0aGlzLl9yZW1vdmVTcGVjLmJpbmQodGhpcykpO1xyXG4gICAgICAgICQoaHRtbCkuZmluZCgnLmFkZC1ib251cycpLm9uKCdjbGljaycsIHRoaXMuX2FkZE5ld0JvbnVzLmJpbmQodGhpcykpO1xyXG4gICAgICAgICQoaHRtbCkuZmluZCgnLnJlbW92ZS1ib251cycpLm9uKCdjbGljaycsIHRoaXMuX3JlbW92ZUJvbnVzLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIF9hZGROZXdCb251cyhldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9O1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmdldERhdGEoKS5kYXRhO1xyXG4gICAgICAgIGlmICghZGF0YSkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHsgYm9udXMgPSBbXSB9ID0gZGF0YTtcclxuICAgICAgICAvLyBhZGQgYmxhbmsgbGluZSBmb3IgbmV3IGJvbnVzXHJcbiAgICAgICAgdXBkYXRlRGF0YVtgJHt0aGlzLl91cGRhdGVTdHJpbmcoKX0uYm9udXNgXSA9IFsuLi5ib251cywgeyBrZXk6ICcnLCB2YWx1ZTogMCB9XTtcclxuICAgICAgICBhd2FpdCB0aGlzLmVudGl0eS51cGRhdGUodXBkYXRlRGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgX3JlbW92ZUJvbnVzKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0ge307XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZ2V0RGF0YSgpLmRhdGE7XHJcbiAgICAgICAgaWYgKGRhdGE/LmJvbnVzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgYm9udXMgfSA9IGRhdGE7XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNwZWM7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBib251cy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVtgJHt0aGlzLl91cGRhdGVTdHJpbmcoKX0uYm9udXNgXSA9IGJvbnVzO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5lbnRpdHkudXBkYXRlKHVwZGF0ZURhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIF9hZGROZXdTcGVjKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0ge307XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZ2V0RGF0YSgpLmRhdGE7XHJcbiAgICAgICAgaWYgKGRhdGE/LnNwZWNzKSB7XHJcbiAgICAgICAgICAgIC8vIGFkZCBhIGJsYW5rIGxpbmUgdG8gc3BlY3NcclxuICAgICAgICAgICAgY29uc3QgeyBzcGVjcyB9ID0gZGF0YTtcclxuICAgICAgICAgICAgdXBkYXRlRGF0YVtgJHt0aGlzLl91cGRhdGVTdHJpbmcoKX0uc3BlY3NgXSA9IFsuLi5zcGVjcywgJyddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhd2FpdCB0aGlzLmVudGl0eS51cGRhdGUodXBkYXRlRGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgX3JlbW92ZVNwZWMoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fTtcclxuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5nZXREYXRhKCkuZGF0YTtcclxuICAgICAgICBpZiAoZGF0YT8uc3BlY3MpIHtcclxuICAgICAgICAgICAgY29uc3QgeyBzcGVjcyB9ID0gZGF0YTtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc3BlYztcclxuICAgICAgICAgICAgaWYgKGluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgICAgIHNwZWNzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhW2Ake3RoaXMuX3VwZGF0ZVN0cmluZygpfS5zcGVjc2BdID0gc3BlY3M7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmVudGl0eS51cGRhdGUodXBkYXRlRGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEVuaGFuY2UgYXR0cmlidXRlIHNlbGVjdGlvbiBieSBhbiBlbXB0eSBvcHRpb24gdG8gYWxsb3cgbmV3bHkgY3JlYXRlZCBza2lsbHMgdG8gaGF2ZSBubyBhdHRyaWJ1dGUgc2VsZWN0ZWQuXHJcbiAgICAgKi9cclxuICAgIF9nZXRTa2lsbEF0dHJpYnV0ZXNGb3JTZWxlY3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHsuLi5DT05GSUcuU1I1LmF0dHJpYnV0ZXMsICcnOiAnJ307XHJcbiAgICB9XHJcblxyXG4gICAgX2FsbG93U2tpbGxOYW1lRWRpdGluZygpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuZW50aXR5LmdldFNraWxsKHRoaXMuc2tpbGxJZCk7XHJcbiAgICAgICAgLy8gVHlwZXNjcmlwdCBzZWVzIHN0cmluZyBoZXJlPyBEb3VibGUgbmVnYXRlIGZvciBib29sZWFuIHR5cGUgY2FzdC4uLlxyXG4gICAgICAgIHJldHVybiAhISgoIXNraWxsPy5uYW1lICYmICFza2lsbD8ubGFiZWwpIHx8IChza2lsbD8ubmFtZSAmJiAhc2tpbGw/LmxhYmVsKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGF0YSgpOiBTa2lsbEVkaXRGb3JtRGF0YSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHN1cGVyLmdldERhdGEoKTtcclxuICAgICAgICBjb25zdCBhY3RvciA9IGRhdGEuZW50aXR5O1xyXG5cclxuICAgICAgICBkYXRhWydkYXRhJ10gPSBhY3RvciA/IGdldFByb3BlcnR5KGFjdG9yLCB0aGlzLl91cGRhdGVTdHJpbmcoKSkgOiB7fTtcclxuICAgICAgICBkYXRhWydlZGl0YWJsZV9uYW1lJ10gPSB0aGlzLl9hbGxvd1NraWxsTmFtZUVkaXRpbmcoKTtcclxuICAgICAgICBkYXRhWydlZGl0YWJsZV9jYW5EZWZhdWx0J10gPSB0cnVlO1xyXG4gICAgICAgIGRhdGFbJ2VkaXRhYmxlX2F0dHJpYnV0ZSddID0gdHJ1ZTtcclxuICAgICAgICBkYXRhWydhdHRyaWJ1dGVzJ10gPSB0aGlzLl9nZXRTa2lsbEF0dHJpYnV0ZXNGb3JTZWxlY3QoKTtcclxuICAgICAgICByZXR1cm4gZGF0YSBhcyBTa2lsbEVkaXRGb3JtRGF0YTtcclxuICAgIH1cclxufVxyXG4iLCIvLyBkaXJlY3RseSBwdWxsZWQgZnJvbSBETkQ1ZSwganVzdCBjaGFuZ2VkIHRoZVxyXG5leHBvcnQgY29uc3QgbWVhc3VyZURpc3RhbmNlID0gZnVuY3Rpb24gKHNlZ21lbnRzLCBvcHRpb25zID0ge30pIHtcclxuICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgLy8gYmFzZWdyaWQgaXNuJ3QgdHlwZWQsIG9wdGlvbnMgYXJlbid0IHJlYWxseSBpbXBvcnRhbnRcclxuICAgIGlmICghb3B0aW9ucy5ncmlkU3BhY2VzKSByZXR1cm4gQmFzZUdyaWQucHJvdG90eXBlLm1lYXN1cmVEaXN0YW5jZXMuY2FsbCh0aGlzLCBzZWdtZW50cywgb3B0aW9ucyk7XHJcblxyXG4gICAgLy8gVHJhY2sgdGhlIHRvdGFsIG51bWJlciBvZiBkaWFnb25hbHNcclxuICAgIGxldCBuRGlhZ29uYWwgPSAwO1xyXG4gICAgY29uc3QgcnVsZSA9IHRoaXMucGFyZW50LmRpYWdvbmFsUnVsZTtcclxuICAgIGNvbnN0IGQgPSBjYW52YXMuZGltZW5zaW9ucztcclxuXHJcbiAgICAvLyBJdGVyYXRlIG92ZXIgbWVhc3VyZWQgc2VnbWVudHNcclxuICAgIHJldHVybiBzZWdtZW50cy5tYXAoKHMpID0+IHtcclxuICAgICAgICBsZXQgciA9IHMucmF5O1xyXG5cclxuICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIHRvdGFsIGRpc3RhbmNlIHRyYXZlbGVkXHJcbiAgICAgICAgbGV0IG54ID0gTWF0aC5hYnMoTWF0aC5jZWlsKHIuZHggLyBkLnNpemUpKTtcclxuICAgICAgICBsZXQgbnkgPSBNYXRoLmFicyhNYXRoLmNlaWwoci5keSAvIGQuc2l6ZSkpO1xyXG5cclxuICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIG51bWJlciBvZiBzdHJhaWdodCBhbmQgZGlhZ29uYWwgbW92ZXNcclxuICAgICAgICBsZXQgbmQgPSBNYXRoLm1pbihueCwgbnkpO1xyXG4gICAgICAgIGxldCBucyA9IE1hdGguYWJzKG55IC0gbngpO1xyXG4gICAgICAgIG5EaWFnb25hbCArPSBuZDtcclxuXHJcbiAgICAgICAgLy8gQ29tbW9uIGhvdXNlcnVsZSB2YXJpYW50XHJcbiAgICAgICAgaWYgKHJ1bGUgPT09ICcxLTItMScpIHtcclxuICAgICAgICAgICAgbGV0IG5kMTAgPSBNYXRoLmZsb29yKG5EaWFnb25hbCAvIDIpIC0gTWF0aC5mbG9vcigobkRpYWdvbmFsIC0gbmQpIC8gMik7XHJcbiAgICAgICAgICAgIGxldCBzcGFjZXMgPSBuZDEwICogMiArIChuZCAtIG5kMTApICsgbnM7XHJcbiAgICAgICAgICAgIHJldHVybiBzcGFjZXMgKiBjYW52YXMuZGltZW5zaW9ucy5kaXN0YW5jZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEV1Y2xpZGVhbiBNZWFzdXJlbWVudFxyXG4gICAgICAgIGVsc2UgaWYgKHJ1bGUgPT09ICdFVUNMJykge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChNYXRoLmh5cG90KG54LCBueSkgKiBjYW52YXMuc2NlbmUuZGF0YS5ncmlkRGlzdGFuY2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZGlhZyBhbmQgc3RyYWlnaHQgYXJlIHNhbWUgc3BhY2UgY291bnRcclxuICAgICAgICBlbHNlIHJldHVybiAobnMgKyBuZCkgKiBjYW52YXMuc2NlbmUuZGF0YS5ncmlkRGlzdGFuY2U7XHJcbiAgICB9KTtcclxufTtcclxuIiwiaW1wb3J0IHsgU1I1QWN0b3IgfSBmcm9tICcuL2FjdG9yL1NSNUFjdG9yJztcclxuaW1wb3J0IHsgU1I1SXRlbSB9IGZyb20gJy4vaXRlbS9TUjVJdGVtJztcclxuaW1wb3J0IFRlbXBsYXRlIGZyb20gJy4vdGVtcGxhdGUnO1xyXG5pbXBvcnQgQXR0YWNrRGF0YSA9IFNoYWRvd3J1bi5BdHRhY2tEYXRhO1xyXG5pbXBvcnQge0NPUkVfRkxBR1MsIENPUkVfTkFNRSwgRkxBR1MsIFNZU1RFTV9OQU1FfSBmcm9tICcuL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7U2hhZG93cnVuUm9sbCwgVGVzdH0gZnJvbSBcIi4vcm9sbHMvU2hhZG93cnVuUm9sbGVyXCI7XHJcbmltcG9ydCBEcmFpbkRhdGEgPSBTaGFkb3dydW4uRHJhaW5EYXRhO1xyXG5pbXBvcnQge0hlbHBlcnN9IGZyb20gXCIuL2hlbHBlcnNcIjtcclxuaW1wb3J0IE1vZGlmaWVkRGFtYWdlRGF0YSA9IFNoYWRvd3J1bi5Nb2RpZmllZERhbWFnZURhdGE7XHJcbmltcG9ydCBEYW1hZ2VUeXBlID0gU2hhZG93cnVuLkRhbWFnZVR5cGU7XHJcbmltcG9ydCBEYW1hZ2VFbGVtZW50ID0gU2hhZG93cnVuLkRhbWFnZUVsZW1lbnQ7XHJcbmltcG9ydCBDb21iYXREYXRhID0gU2hhZG93cnVuLkNvbWJhdERhdGE7XHJcbmltcG9ydCB7IERhbWFnZUFwcGxpY2F0aW9uRmxvdyB9IGZyb20gJy4vYWN0b3IvRGFtYWdlQXBwbGljYXRpb25GbG93JztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUm9sbFRhcmdldENoYXRNZXNzYWdlIHtcclxuICAgIGFjdG9yOiBTUjVBY3RvclxyXG4gICAgdGFyZ2V0PzogVG9rZW58dW5kZWZpbmVkXHJcbiAgICB0YXJnZXRzPzogVG9rZW5bXVxyXG4gICAgaXRlbTogU1I1SXRlbVxyXG4gICAgdGVzdHM6IFRlc3RbXVxyXG4gICAgcm9sbDogU2hhZG93cnVuUm9sbFxyXG4gICAgYXR0YWNrPzogQXR0YWNrRGF0YVxyXG4gICAgcm9sbE1vZGU/OiBrZXlvZiB0eXBlb2YgQ09ORklHLkRpY2Uucm9sbE1vZGVzXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGFyZ2V0Q2hhdE1lc3NhZ2VPcHRpb25zIGV4dGVuZHMgUm9sbFRhcmdldENoYXRNZXNzYWdle1xyXG4gICAgd2hpc3BlclRvOiBVc2VyXHJcbn1cclxuXHJcbi8vIFNpbXBsZSBjYXJkIHRleHQgbWVzc2FnZXNcclxuZXhwb3J0IGludGVyZmFjZSBJdGVtQ2hhdE1lc3NhZ2VPcHRpb25zIHtcclxuICAgIGFjdG9yOiBTUjVBY3RvclxyXG4gICAgaXRlbTogU1I1SXRlbVxyXG4gICAgZGVzY3JpcHRpb246IG9iamVjdFxyXG4gICAgdGVzdHM/OiBUZXN0W11cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSb2xsQ2hhdE1lc3NhZ2VPcHRpb25zIHtcclxuICAgIHRpdGxlOiBzdHJpbmdcclxuICAgIHJvbGw6IFNoYWRvd3J1blJvbGxcclxuICAgIGFjdG9yPzogU1I1QWN0b3JcclxuICAgIHRhcmdldD86IFRva2VuXHJcbiAgICB0YXJnZXRzPzogVG9rZW5bXVxyXG5cclxuICAgIGl0ZW0/OiBTUjVJdGVtXHJcblxyXG4gICAgZGVzY3JpcHRpb24/OiBvYmplY3RcclxuXHJcbiAgICByb2xsTW9kZT86IGtleW9mIHR5cGVvZiBDT05GSUcuZGljZS5yb2xsTW9kZXNcclxuICAgIHByZXZpZXdUZW1wbGF0ZT86IGJvb2xlYW5cclxuXHJcbiAgICBhdHRhY2s/OiBBdHRhY2tEYXRhXHJcbiAgICBpbmNvbWluZ0F0dGFjaz86IEF0dGFja0RhdGFcclxuICAgIGluY29taW5nRHJhaW4/OiBEcmFpbkRhdGFcclxuICAgIGRhbWFnZT86IE1vZGlmaWVkRGFtYWdlRGF0YVxyXG4gICAgdGVzdHM/OiBUZXN0W11cclxuICAgIGNvbWJhdD86IENvbWJhdERhdGFcclxuICAgIHJlYWNoPzogbnVtYmVyXHJcbn1cclxuXHJcbmludGVyZmFjZSBJdGVtQ2hhdFRlbXBsYXRlRGF0YSB7XHJcbiAgICB0aXRsZTogc3RyaW5nXHJcbiAgICBhY3RvcjogU1I1QWN0b3JcclxuICAgIHRva2VuSWQ/OiBzdHJpbmdcclxuICAgIGl0ZW06IFNSNUl0ZW1cclxuICAgIGRlc2NyaXB0aW9uOiBvYmplY3RcclxuICAgIHRlc3RzPzogVGVzdFtdXHJcbn1cclxuXHJcbmludGVyZmFjZSBSb2xsQ2hhdFRlbXBsYXRlRGF0YSBleHRlbmRzIFJvbGxDaGF0TWVzc2FnZU9wdGlvbnMge1xyXG4gICAgdG9rZW5JZD86IHN0cmluZ1xyXG4gICAgdGFyZ2V0VG9rZW5JZD86IHN0cmluZ1xyXG4gICAgcm9sbE1vZGU6IGtleW9mIHR5cGVvZiBDT05GSUcuZGljZS5yb2xsTW9kZXNcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlQ2hhdE1lc3NhZ2UodGVtcGxhdGVEYXRhLCBvcHRpb25zPzogQ2hhdERhdGFPcHRpb25zKTogUHJvbWlzZTxFbnRpdHk8YW55Pj4ge1xyXG4gICAgY29uc3QgY2hhdERhdGEgPSBhd2FpdCBjcmVhdGVDaGF0RGF0YSh0ZW1wbGF0ZURhdGEsIG9wdGlvbnMpO1xyXG4gICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSk7XHJcblxyXG4gICAgLy8gU3RvcmUgZGF0YSBpbiBjaGF0IG1lc3NhZ2UgZm9yIGxhdGVyIHVzZSAob3Bwb3NlZCB0ZXN0cylcclxuICAgIGlmICh0ZW1wbGF0ZURhdGEucm9sbCkgYXdhaXQgbWVzc2FnZS5zZXRGbGFnKFNZU1RFTV9OQU1FLCBGTEFHUy5Sb2xsLCB0ZW1wbGF0ZURhdGEucm9sbCk7XHJcbiAgICBpZiAodGVtcGxhdGVEYXRhLmF0dGFjaykgYXdhaXQgbWVzc2FnZS5zZXRGbGFnKFNZU1RFTV9OQU1FLCBGTEFHUy5BdHRhY2ssIHRlbXBsYXRlRGF0YS5hdHRhY2spO1xyXG4gICAgLy8gQ29udmVydCB0YXJnZXRzIGludG8gc2NlbmUgdG9rZW4gaWRzLlxyXG4gICAgaWYgKHRlbXBsYXRlRGF0YS50YXJnZXRzKSBhd2FpdCBtZXNzYWdlLnNldEZsYWcoU1lTVEVNX05BTUUsIEZMQUdTLlRhcmdldHNTY2VuZVRva2VuSWRzLCB0ZW1wbGF0ZURhdGEudGFyZ2V0cy5tYXAodGFyZ2V0ID0+IGdldFRva2VuU2NlbmVJZCh0YXJnZXQpKSk7XHJcblxyXG4gICAgY29uc29sZS5sb2coJ0NoYXQgTWVzc2FnZScsIG1lc3NhZ2UsIGNoYXREYXRhKTtcclxuICAgIHJldHVybiBtZXNzYWdlO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgQ2hhdERhdGFPcHRpb25zIHtcclxuICAgIHJvbGw/OiBTaGFkb3dydW5Sb2xsLFxyXG4gICAgd2hpc3BlclRvPzogVXNlclxyXG59XHJcbi8vIHRlbXBsYXRlRGF0YSBoYXMgbm8gZGF0YXR5cGUgdG8gcGlwZSB0aHJvdWdoIHdoYXRldmVyIGl0J3MgZ2l2ZW4uXHJcbi8vIENsZWFuIHVwIHlvdXIgZGF0YSB3aXRoaW4gdGVtcGxhdGVEYXRhIGNyZWF0aW9uIGZ1bmN0aW9ucyFcclxuY29uc3QgY3JlYXRlQ2hhdERhdGEgPSBhc3luYyAodGVtcGxhdGVEYXRhLCBvcHRpb25zPzogQ2hhdERhdGFPcHRpb25zKSA9PiB7XHJcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IGBzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL3JvbGxzL3JvbGwtY2FyZC5odG1sYDtcclxuICAgIGNvbnN0IGFjdG9yID0gdGVtcGxhdGVEYXRhLmFjdG9yO1xyXG4gICAgY29uc3QgdG9rZW4gPSBhY3Rvcj8uZ2V0VG9rZW4oKTtcclxuXHJcbiAgICAvL0B0cy1pZ25vcmVcclxuICAgIGNvbnN0IGVuaGFuY2VkVGVtcGxhdGVEYXRhID0ge1xyXG4gICAgICAgIC4uLnRlbXBsYXRlRGF0YSxcclxuICAgICAgICBzcGVha2VyOiB7XHJcbiAgICAgICAgICAgIGFjdG9yLCB0b2tlblxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2hvd0dsaXRjaEFuaW1hdGlvbjogZ2FtZS5zZXR0aW5ncy5nZXQoU1lTVEVNX05BTUUsIEZMQUdTLlNob3dHbGl0Y2hBbmltYXRpb24pLFxyXG4gICAgfTtcclxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgZW5oYW5jZWRUZW1wbGF0ZURhdGEpO1xyXG5cclxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xyXG4gICAgICAgIHVzZXI6IGdhbWUudXNlci5faWQsXHJcbiAgICAgICAgdHlwZTogb3B0aW9ucz8ucm9sbCA/IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5ST0xMIDogQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLk9USEVSLFxyXG4gICAgICAgIHNvdW5kOiBvcHRpb25zPy5yb2xsID8gQ09ORklHLnNvdW5kcy5kaWNlIDogdW5kZWZpbmVkLFxyXG4gICAgICAgIGNvbnRlbnQ6IGh0bWwsXHJcbiAgICAgICAgcm9sbDogb3B0aW9ucz8ucm9sbCA/IEpTT04uc3RyaW5naWZ5KG9wdGlvbnM/LnJvbGwpIDogdW5kZWZpbmVkLFxyXG4gICAgICAgIHNwZWFrZXI6IHtcclxuICAgICAgICAgICAgYWN0b3I6IGFjdG9yPy5faWQsXHJcbiAgICAgICAgICAgIHRva2VuOiBhY3Rvcj8uZ2V0VG9rZW4oKSxcclxuICAgICAgICAgICAgYWxpYXM6IGdhbWUudXNlci5uYW1lXHJcbiAgICAgICAgfSxcclxuICAgICAgICBmbGFnczoge1xyXG4gICAgICAgICAgICBzaGFkb3dydW41ZToge1xyXG4gICAgICAgICAgICAgICAgY3VzdG9tUm9sbDogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHJvbGxNb2RlID0gdGVtcGxhdGVEYXRhLnJvbGxNb2RlID8/IGdhbWUuc2V0dGluZ3MuZ2V0KENPUkVfTkFNRSwgQ09SRV9GTEFHUy5Sb2xsTW9kZSk7XHJcblxyXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHJvbGxNb2RlIGFzIHN0cmluZykpIGNoYXREYXRhWyd3aGlzcGVyJ10gPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKTtcclxuICAgIGlmIChyb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCcpIGNoYXREYXRhWydibGluZCddID0gdHJ1ZTtcclxuXHJcbiAgICBpZiAob3B0aW9ucz8ud2hpc3BlclRvKSB7XHJcbiAgICAgICAgY2hhdERhdGFbJ3doaXNwZXInXSA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKG9wdGlvbnMud2hpc3BlclRvLm5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjaGF0RGF0YTtcclxufTtcclxuXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaWZDb25maWd1cmVkQ3JlYXRlRGVmYXVsdENoYXRNZXNzYWdlKHtyb2xsLCBhY3RvciwgdGl0bGUsIHJvbGxNb2RlfTogUGFydGlhbDxSb2xsQ2hhdE1lc3NhZ2VPcHRpb25zPikge1xyXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KFNZU1RFTV9OQU1FLCBGTEFHUy5EaXNwbGF5RGVmYXVsdFJvbGxDYXJkKSAmJiByb2xsKSB7XHJcbiAgICAgICAgYXdhaXQgcm9sbC50b01lc3NhZ2Uoe1xyXG4gICAgICAgICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHsgYWN0b3I6IGFjdG9yIH0pLFxyXG4gICAgICAgICAgICBmbGF2b3I6IHRpdGxlLFxyXG4gICAgICAgICAgICByb2xsTW9kZTogcm9sbE1vZGUsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVUYXJnZXRDaGF0TWVzc2FnZShvcHRpb25zOiBUYXJnZXRDaGF0TWVzc2FnZU9wdGlvbnMpIHtcclxuICAgIGNvbnN0IHJvbGxDaGF0T3B0aW9ucyA9IHsuLi5vcHRpb25zfTtcclxuICAgIGNvbnN0IG1lc3NhZ2VPcHRpb25zID0ge3doaXNwZXJUbzogb3B0aW9ucy53aGlzcGVyVG99O1xyXG4gICAgLy9AdHMtaWdub3JlXHJcbiAgICBjb25zdCB0ZW1wbGF0ZURhdGEgPSBnZXRSb2xsQ2hhdFRlbXBsYXRlRGF0YShyb2xsQ2hhdE9wdGlvbnMpO1xyXG4gICAgcmV0dXJuIGF3YWl0IGNyZWF0ZUNoYXRNZXNzYWdlKHRlbXBsYXRlRGF0YSwgbWVzc2FnZU9wdGlvbnMpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlSXRlbUNoYXRNZXNzYWdlKG9wdGlvbnM6IEl0ZW1DaGF0TWVzc2FnZU9wdGlvbnMpIHtcclxuICAgIGNvbnN0IHRlbXBsYXRlRGF0YSA9IGNyZWF0ZUNoYXRUZW1wbGF0ZURhdGEob3B0aW9ucyk7XHJcbiAgICByZXR1cm4gYXdhaXQgY3JlYXRlQ2hhdE1lc3NhZ2UodGVtcGxhdGVEYXRhKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2hhdFRlbXBsYXRlRGF0YShvcHRpb25zOiBJdGVtQ2hhdE1lc3NhZ2VPcHRpb25zKTogSXRlbUNoYXRUZW1wbGF0ZURhdGEge1xyXG4gICAgLy8gZmllbGQgZXh0cmFjdGlvbiBpcyBleHBsaWNpdCB0byBlbmZvcmNlIHZpc2libGUgZGF0YSBmbG93IHRvIGVuc3VyZSBjbGVhbiBkYXRhLlxyXG4gICAgLy8gTk9URTogQXMgc29vbiBhcyBjbGVhciBkYXRhIGR5bmFtaWMgZGF0YSBmbG93IGNhbiBiZSBlc3RhYmxpc2hlZCwgdGhpcyBzaG91bGQgYmUgcmVtb3ZlZCBmb3IgYSBzaW1wbGUgey4uLm9wdGlvbnN9XHJcbiAgICBsZXQge2FjdG9yLCBpdGVtLCBkZXNjcmlwdGlvbiwgdGVzdHN9ID0gb3B0aW9ucztcclxuXHJcbiAgICBjb25zdCB0b2tlbiA9IGFjdG9yPy5nZXRUb2tlbigpO1xyXG4gICAgY29uc3QgdG9rZW5JZCA9IGdldFRva2VuU2NlbmVJZCh0b2tlbik7XHJcbiAgICBjb25zdCB0aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcIlNSNS5EZXNjcmlwdGlvblwiKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHRpdGxlLFxyXG4gICAgICAgIGFjdG9yLFxyXG4gICAgICAgIHRva2VuSWQsXHJcbiAgICAgICAgaXRlbSxcclxuICAgICAgICBkZXNjcmlwdGlvbixcclxuICAgICAgICB0ZXN0c1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlUm9sbENoYXRNZXNzYWdlKG9wdGlvbnM6IFJvbGxDaGF0TWVzc2FnZU9wdGlvbnMpOiBQcm9taXNlPEVudGl0eTxhbnk+PiB7XHJcbiAgICBhd2FpdCBpZkNvbmZpZ3VyZWRDcmVhdGVEZWZhdWx0Q2hhdE1lc3NhZ2Uob3B0aW9ucyk7XHJcblxyXG4gICAgY29uc3QgdGVtcGxhdGVEYXRhID0gZ2V0Um9sbENoYXRUZW1wbGF0ZURhdGEob3B0aW9ucyk7XHJcbiAgICBjb25zdCBjaGF0T3B0aW9ucyA9IHtyb2xsOiBvcHRpb25zLnJvbGx9O1xyXG4gICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IGNyZWF0ZUNoYXRNZXNzYWdlKHRlbXBsYXRlRGF0YSwgY2hhdE9wdGlvbnMpO1xyXG5cclxuICAgIHJldHVybiBtZXNzYWdlO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gZ2V0Um9sbENoYXRUZW1wbGF0ZURhdGEob3B0aW9uczogUm9sbENoYXRNZXNzYWdlT3B0aW9ucyk6IFJvbGxDaGF0VGVtcGxhdGVEYXRhIHtcclxuICAgIGNvbnN0IHRva2VuID0gb3B0aW9ucy5hY3Rvcj8uZ2V0VG9rZW4oKTtcclxuXHJcbiAgICBjb25zdCByb2xsTW9kZSA9IG9wdGlvbnMucm9sbE1vZGUgPz8gZ2FtZS5zZXR0aW5ncy5nZXQoQ09SRV9OQU1FLCBDT1JFX0ZMQUdTLlJvbGxNb2RlKTtcclxuICAgIGNvbnN0IHRva2VuSWQgPSBnZXRUb2tlblNjZW5lSWQodG9rZW4pO1xyXG5cclxuICAgIGNvbnN0IHRhcmdldFRva2VuSWQgPSBnZXRUb2tlblNjZW5lSWQob3B0aW9ucy50YXJnZXQpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAuLi5vcHRpb25zLFxyXG4gICAgICAgIHRva2VuSWQsXHJcbiAgICAgICAgdGFyZ2V0VG9rZW5JZCxcclxuICAgICAgICByb2xsTW9kZSxcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VG9rZW5TY2VuZUlkKHRva2VuOiBUb2tlbnx1bmRlZmluZWQpOiBzdHJpbmd8dW5kZWZpbmVkIHtcclxuICAgIHJldHVybiB0b2tlbiA/IGAke3Rva2VuLnNjZW5lLl9pZH0uJHt0b2tlbi5pZH1gIDogdW5kZWZpbmVkO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgYWRkQ2hhdE1lc3NhZ2VDb250ZXh0T3B0aW9ucyA9IChodG1sLCBvcHRpb25zKSA9PiB7XHJcbiAgICBjb25zdCBjYW5Sb2xsID0gKGxpKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbXNnID0gZ2FtZS5tZXNzYWdlcy5nZXQobGkuZGF0YSgpLm1lc3NhZ2VJZCk7XHJcblxyXG4gICAgICAgIHJldHVybiBtc2cuZ2V0RmxhZyhTWVNURU1fTkFNRSwgRkxBR1MuTWVzc2FnZUN1c3RvbVJvbGwpO1xyXG4gICAgfTtcclxuXHJcbiAgICBvcHRpb25zLnB1c2goXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5QdXNoVGhlTGltaXQnKSxcclxuICAgICAgICAgICAgY2FsbGJhY2s6IChsaSkgPT4gU1I1QWN0b3IucHVzaFRoZUxpbWl0KGxpKSxcclxuICAgICAgICAgICAgY29uZGl0aW9uOiBjYW5Sb2xsLFxyXG4gICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtbWV0ZW9yXCI+PC9pPicsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LlNlY29uZENoYW5nZScpLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogKGxpKSA9PiBTUjVBY3Rvci5zZWNvbmRDaGFuY2UobGkpLFxyXG4gICAgICAgICAgICBjb25kaXRpb246IGNhblJvbGwsXHJcbiAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1kaWNlLWQ2XCI+PC9pPicsXHJcbiAgICAgICAgfVxyXG4gICAgKTtcclxuICAgIHJldHVybiBvcHRpb25zO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGFkZFJvbGxMaXN0ZW5lcnMgPSAoYXBwOiBDaGF0TWVzc2FnZSwgaHRtbCkgPT4ge1xyXG4gICAgaWYgKCFhcHAuZ2V0RmxhZyhTWVNURU1fTkFNRSwgRkxBR1MuTWVzc2FnZUN1c3RvbVJvbGwpKSB7XHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgaHRtbC5vbignY2xpY2snLCAnLnRlc3QnLCBhc3luYyAoZXZlbnQpID0+IHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VJZCA9IGh0bWwuZGF0YSgnbWVzc2FnZUlkJyk7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZCk7XHJcbiAgICAgICAgY29uc3QgYXR0YWNrID0gbWVzc2FnZS5nZXRGbGFnKFNZU1RFTV9OQU1FLCBGTEFHUy5BdHRhY2spO1xyXG4gICAgICAgIGNvbnN0IGl0ZW0gPSBTUjVJdGVtLmdldEl0ZW1Gcm9tTWVzc2FnZShodG1sKTtcclxuXHJcbiAgICAgICAgY29uc3QgdHlwZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb247XHJcbiAgICAgICAgaWYgKCFpdGVtKSB7XHJcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuTWlzc2luZ0l0ZW1Gb3JPcHBvc2VkVGVzdCcpKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2VsZWN0aW9uIHdpbGwgb3ZlcndyaXRlIGNoYXQgc3BlY2lmaWMgdGFyZ2V0aW5nXHJcbiAgICAgICAgY29uc3QgYWN0b3JzID0gSGVscGVycy5nZXRTZWxlY3RlZEFjdG9yc09yQ2hhcmFjdGVyKCk7XHJcblxyXG4gICAgICAgIC8vIE5vIHNlbGVjdGlvbiwgZmFsbCBiYWNrIHRvIHRhcmdldGluZy5cclxuICAgICAgICBpZiAoYWN0b3JzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRTY2VuZUlkcyA9IG1lc3NhZ2UuZ2V0RmxhZyhTWVNURU1fTkFNRSwgRkxBR1MuVGFyZ2V0c1NjZW5lVG9rZW5JZHMpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCB0YXJnZXRTY2VuZUlkIG9mIHRhcmdldFNjZW5lSWRzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0b2tlbiA9IEhlbHBlcnMuZ2V0U2NlbmVUb2tlbih0YXJnZXRTY2VuZUlkKTtcclxuICAgICAgICAgICAgICAgIGlmICghdG9rZW4pIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGFjdG9yID0gdG9rZW4uYWN0b3IgYXMgU1I1QWN0b3I7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWFjdG9yKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBhY3RvcnMucHVzaChhY3Rvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghYWN0b3JzKSByZXR1cm47XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgYWN0b3Igb2YgYWN0b3JzKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IGl0ZW0ucm9sbFRlc3RUeXBlKHR5cGUsIGF0dGFjaywgZXZlbnQsIGFjdG9yKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIGh0bWwub24oJ2NsaWNrJywgJy5wbGFjZS10ZW1wbGF0ZScsIChldmVudCkgPT4ge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgY29uc3QgaXRlbSA9IFNSNUl0ZW0uZ2V0SXRlbUZyb21NZXNzYWdlKGh0bWwpO1xyXG5cclxuICAgICAgICBpZiAoaXRlbSkge1xyXG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IFRlbXBsYXRlLmZyb21JdGVtKGl0ZW0pO1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZT8uZHJhd1ByZXZpZXcoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBodG1sLm9uKCdjbGljaycsICcuY2FyZC1tYWluLWNvbnRlbnQnLCBldmVudCA9PiB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAvLyBOT1RFOiBUaGlzIGRlcGVuZHMgb24gdGhlIGV4YWN0IGNhcmQgdGVtcGxhdGUgSFRNTCBzdHJ1Y3R1cmUuXHJcbiAgICAgICAgY29uc3QgY2FyZCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLmNoYXQtY2FyZCcpO1xyXG4gICAgICAgIGNhcmQuY2hpbGRyZW4oJy5kaWNlLXJvbGxzJykudG9nZ2xlKCk7XHJcbiAgICAgICAgY2FyZC5jaGlsZHJlbignLmNhcmQtZGVzY3JpcHRpb24nKS50b2dnbGUoKTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvKiogT3BlbiB0aGUgc2hlZXRzIG9mIGRpZmZlcmVudCBlbnRpdHkgdHlwZXMgYmFzZWQgb24gdGhlIGNoYXQgY2FyZC5cclxuICAgICAqL1xyXG4gICAgaHRtbC5vbignY2xpY2snLCAnLmNoYXQtZW50aXR5LWxpbmsnLCBldmVudCA9PiB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgY29uc3QgZW50aXR5TGluayA9ICQoZXZlbnQuY3VycmVudFRhcmdldCk7XHJcbiAgICAgICAgY29uc3QgaWQgPSBlbnRpdHlMaW5rLmRhdGEoJ2lkJyk7XHJcbiAgICAgICAgY29uc3QgdHlwZSA9IGVudGl0eUxpbmsuZGF0YSgnZW50aXR5Jyk7XHJcblxyXG4gICAgICAgIGlmICghaWQpIHJldHVybjtcclxuXHJcbiAgICAgICBpZiAodHlwZSA9PT0gJ1Rva2VuJykge1xyXG4gICAgICAgICAgIGNvbnN0IHRva2VuID0gY2FudmFzLnRva2Vucy5nZXQoaWQpO1xyXG4gICAgICAgICAgIHRva2VuLmFjdG9yLnNoZWV0LnJlbmRlcih0cnVlLCB7dG9rZW59KTtcclxuICAgICAgIH1cclxuICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdBY3RvcicpIHtcclxuICAgICAgICAgICBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChpZCk7XHJcbiAgICAgICAgICAgYWN0b3Iuc2hlZXQucmVuZGVyKHRydWUpO1xyXG4gICAgICAgfVxyXG4gICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ0l0ZW0nKSB7XHJcbiAgICAgICAgICAgY29uc3QgY2FyZCA9IGVudGl0eUxpbmsuY2xvc2VzdCgnLmNoYXQtY2FyZCcpO1xyXG4gICAgICAgICAgIGNvbnN0IHNjZW5lVG9rZW5JZCA9IGNhcmQuZGF0YSgndG9rZW5JZCcpO1xyXG5cclxuICAgICAgICAgICBjb25zdCB0b2tlbiA9IEhlbHBlcnMuZ2V0U2NlbmVUb2tlbihzY2VuZVRva2VuSWQpXHJcblxyXG4gICAgICAgICAgIGlmICghdG9rZW4pIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgY29uc3QgaXRlbSA9IHRva2VuLmFjdG9yLmdldE93bmVkSXRlbShpZCk7XHJcbiAgICAgICAgICAgaWYgKGl0ZW0pIGl0ZW0uc2hlZXQucmVuZGVyKHRydWUpO1xyXG4gICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqIFNlbGVjdCBhIFRva2VuIG9uIHRoZSBjdXJyZW50IHNjZW5lIGJhc2VkIG9uIHRoZSBsaW5rIGlkLlxyXG4gICAgICovXHJcbiAgICBodG1sLm9uKCdjbGljaycsICcuY2hhdC1zZWxlY3QtbGluaycsIGV2ZW50ID0+IHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICBjb25zdCBzZWxlY3RMaW5rID0gJChldmVudC5jdXJyZW50VGFyZ2V0KTtcclxuICAgICAgICBjb25zdCB0b2tlbklkID0gc2VsZWN0TGluay5kYXRhKCd0b2tlbklkJyk7XHJcbiAgICAgICAgY29uc3QgdG9rZW4gPSBjYW52YXMudG9rZW5zLmdldCh0b2tlbklkKTtcclxuXHJcbiAgICAgICAgaWYgKHRva2VuKSB7XHJcbiAgICAgICAgICAgIHRva2VuLmNvbnRyb2woKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuTm9TZWxlY3RhYmxlVG9rZW4nKSlcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKiogQXBwbHkgZGFtYWdlIHRvIHRoZSBhY3RvciBzcGVha2luZyB0aGUgY2hhdCBjYXJkLlxyXG4gICAgICovXHJcbiAgICBodG1sLm9uKCdjbGljaycsICcuYXBwbHktZGFtYWdlJywgYXN5bmMgZXZlbnQgPT4ge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGNvbnN0IGFwcGx5RGFtYWdlID0gJChldmVudC5jdXJyZW50VGFyZ2V0KTtcclxuXHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBOdW1iZXIoYXBwbHlEYW1hZ2UuZGF0YSgnZGFtYWdlVmFsdWUnKSk7XHJcbiAgICAgICAgY29uc3QgdHlwZSA9IFN0cmluZyhhcHBseURhbWFnZS5kYXRhKCdkYW1hZ2VUeXBlJykpIGFzIERhbWFnZVR5cGU7XHJcbiAgICAgICAgY29uc3QgYXAgPSBOdW1iZXIoYXBwbHlEYW1hZ2UuZGF0YSgnZGFtYWdlQXAnKSk7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IFN0cmluZyhhcHBseURhbWFnZS5kYXRhKCdkYW1hZ2VFbGVtZW50JykpIGFzIERhbWFnZUVsZW1lbnQ7XHJcbiAgICAgICAgbGV0IGRhbWFnZSA9IEhlbHBlcnMuY3JlYXRlRGFtYWdlRGF0YSh2YWx1ZSwgdHlwZSwgYXAsIGVsZW1lbnQpO1xyXG5cclxuICAgICAgICBsZXQgYWN0b3JzID0gSGVscGVycy5nZXRTZWxlY3RlZEFjdG9yc09yQ2hhcmFjdGVyKCk7XHJcblxyXG4gICAgICAgIC8vIFNob3VsZCBubyBzZWxlY3Rpb24gYmUgYXZhaWxhYmxlIHRyeSBndWVzc2luZy5cclxuICAgICAgICBpZiAoYWN0b3JzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlSWQgPSBodG1sLmRhdGEoJ21lc3NhZ2VJZCcpO1xyXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKTtcclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0SWRzID0gbWVzc2FnZS5nZXRGbGFnKFNZU1RFTV9OQU1FLCBGTEFHUy5UYXJnZXRzU2NlbmVUb2tlbklkcyk7XHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0YXJnZXRpbmcgaXMgYXZhaWxhYmxlLCB1c2UgdGhhdC5cclxuICAgICAgICAgICAgaWYgKHRhcmdldElkcykge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0SWRzLmZvckVhY2godGFyZ2V0SWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuID0gSGVscGVycy5nZXRTY2VuZVRva2VuKHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3RvciA9IHRva2VuPy5hY3RvciBhcyBTUjVBY3RvcjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWFjdG9yKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0b3JzLnB1c2goYWN0b3IpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UgYXBwbHkgdG8gdGhlIGFjdG9yIGNhc3RpbmcgdGhlIGRhbWFnZS5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNjZW5lVG9rZW5JZCA9IGh0bWwuZmluZCgnLmNoYXQtY2FyZCcpLmRhdGEoJ3Rva2VuSWQnKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuID0gSGVscGVycy5nZXRTY2VuZVRva2VuKHNjZW5lVG9rZW5JZCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhY3RvciA9IHRva2VuPy5hY3RvciBhcyBTUjVBY3RvcjtcclxuICAgICAgICAgICAgICAgIGlmIChhY3Rvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdG9ycy5wdXNoKGFjdG9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGFjdG9ycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoXCJTUjUuV2FybmluZ3MuVG9rZW5TZWxlY3Rpb25OZWVkZWRcIikpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBuZXcgRGFtYWdlQXBwbGljYXRpb25GbG93KCkucnVuQXBwbHlEYW1hZ2UoYWN0b3JzLCBkYW1hZ2UpO1xyXG4gICAgfSk7XHJcbn07IiwiaW1wb3J0IHtTUjVBY3Rvcn0gZnJvbSBcIi4uL2FjdG9yL1NSNUFjdG9yXCI7XHJcbmltcG9ydCB7Q29tYmF0UnVsZXN9IGZyb20gXCIuLi9zcjUvQ29tYmF0XCI7XHJcbmltcG9ydCB7RkxBR1MsIFNSLCBTWVNURU1fTkFNRSwgU1lTVEVNX1NPQ0tFVH0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xyXG5cclxuLyoqXHJcbiAqIEZvdW5kcnkgY29tYmF0IGltcGxlbWVudGF0aW9uIGZvciBTaGFkb3dydW41IHJ1bGVzLlxyXG4gKlxyXG4gKiBUT0RPOiBTdG9yZSB3aGF0IGNvbWJhdGFudHMgYWxyZWFkeSBhY3RlZCBhbmQgd2l0aCB3aGF0IGluaXRpYXRpdmUgYmFzZSBhbmQgZGljZSB0aGV5IGRpZC4gVGhpcyBjYW4gYmUgdXNlZCB0byBhbHRlclxyXG4gKiAgICAgICBpbml0aWF0aXZlIHNjb3JlIHdpdGhvdXQgZnVsbHkgcmVyb2xsaW5nIGFuZCBtYWludGFpbiBwcm9wcGVyIHR1cm4gb3JkZXIgYWZ0ZXIgYW4gYWN0b3IgcmFpc2VkIHRoZXkgaW5pIHdoaWxlXHJcbiAqICAgICAgIHN0ZXBwaW5nIG92ZXIgb3RoZXIgYWN0b3JzIHRoYXQgYWxyZWFkeSBoYWQgdGhlaXIgYWN0aW9uIHBoYXNlIGluIHRoZSBjdXJyZW50IGluaXRpYXRpdmUgcGFzcy5cclxuICogICAgICAgQFBERiBTUjUjMTYwICdDaGFuaW5nIEluaXRpYXRpdmUnXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU1I1Q29tYmF0IGV4dGVuZHMgQ29tYmF0IHtcclxuICAgIGdldCBpbml0aWF0aXZlUGFzcygpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEZsYWcoU1lTVEVNX05BTUUsIEZMQUdTLkNvbWJhdEluaXRpYXRpdmVQYXNzKSB8fCBTUi5jb21iYXQuSU5JVElBTF9JTklfUEFTUztcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYXN5bmMgc2V0SW5pdGlhdGl2ZVBhc3MoY29tYmF0OiBTUjVDb21iYXQsIHBhc3M6IG51bWJlcikge1xyXG4gICAgICAgIGF3YWl0IGNvbWJhdC51bnNldEZsYWcoU1lTVEVNX05BTUUsIEZMQUdTLkNvbWJhdEluaXRpYXRpdmVQYXNzKTtcclxuICAgICAgICBhd2FpdCBjb21iYXQuc2V0RmxhZyhTWVNURU1fTkFNRSwgRkxBR1MuQ29tYmF0SW5pdGlhdGl2ZVBhc3MsIHBhc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgc3VwZXIoLi4uYXJncyk7XHJcblxyXG4gICAgICAgIHRoaXMuX3JlZ2lzdGVyU29ja2V0TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2UgdGhlIGdpdmVuIGFjdG9ycyB0b2tlbiB0byBnZXQgdGhlIGNvbWJhdGFudC5cclxuICAgICAqIE5PVEU6IFRoZSB0b2tlbiBtdXN0IGJlIHVzZWQsIGluc3RlYWQgb2YganVzdCB0aGUgYWN0b3IsIGFzIHVubGlua2VkIHRva2VucyB3aWxsIGFsbCB1c2UgdGhlIHNhbWUgYWN0b3IgaWQuXHJcbiAgICAgKi9cclxuICAgIGdldEFjdG9yQ29tYmF0YW50KGFjdG9yOiBTUjVBY3Rvcik6IHVuZGVmaW5lZCB8IGFueSB7XHJcbiAgICAgICAgY29uc3QgdG9rZW4gPSBhY3Rvci5nZXRUb2tlbigpO1xyXG4gICAgICAgIGlmICghdG9rZW4pIHJldHVybjtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRDb21iYXRhbnRCeVRva2VuKHRva2VuLmlkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZCBDb250ZXh0TWVudSBvcHRpb25zIHRvIENvbWJhdFRyYWNrZXIgRW50cmllcyAtLSBhZGRzIHRoZSBiYXNpYyBJbml0aWF0aXZlIFN1YnRyYWN0aW9uc1xyXG4gICAgICogQHBhcmFtIGh0bWxcclxuICAgICAqIEBwYXJhbSBvcHRpb25zXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhZGRDb21iYXRUcmFja2VyQ29udGV4dE9wdGlvbnMoaHRtbCwgb3B0aW9uczogYW55W10pIHtcclxuICAgICAgICBvcHRpb25zLnB1c2goXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkNPTUJBVC5SZWR1Y2VJbml0QnlPbmUnKSxcclxuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1jYXJldC1kb3duXCI+PC9pPicsXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKGxpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbWJhdGFudCA9IGF3YWl0IGdhbWUuY29tYmF0LmdldENvbWJhdGFudChsaS5kYXRhKCdjb21iYXRhbnQtaWQnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbWJhdGFudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21iYXQ6IFNSNUNvbWJhdCA9IGdhbWUuY29tYmF0IGFzIFNSNUNvbWJhdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY29tYmF0LmFkanVzdEluaXRpYXRpdmUoY29tYmF0YW50LCAtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuQ09NQkFULlJlZHVjZUluaXRCeUZpdmUnKSxcclxuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1hbmdsZS1kb3duXCI+PC9pPicsXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKGxpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbWJhdGFudCA9IGF3YWl0IGdhbWUuY29tYmF0LmdldENvbWJhdGFudChsaS5kYXRhKCdjb21iYXRhbnQtaWQnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbWJhdGFudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21iYXQ6IFNSNUNvbWJhdCA9IGdhbWUuY29tYmF0IGFzIFNSNUNvbWJhdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY29tYmF0LmFkanVzdEluaXRpYXRpdmUoY29tYmF0YW50LCAtNSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuQ09NQkFULlJlZHVjZUluaXRCeVRlbicpLFxyXG4gICAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWFuZ2xlLWRvdWJsZS1kb3duXCI+PC9pPicsXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKGxpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbWJhdGFudCA9IGF3YWl0IGdhbWUuY29tYmF0LmdldENvbWJhdGFudChsaS5kYXRhKCdjb21iYXRhbnQtaWQnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbWJhdGFudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21iYXQ6IFNSNUNvbWJhdCA9IGdhbWUuY29tYmF0IGFzIFNSNUNvbWJhdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY29tYmF0LmFkanVzdEluaXRpYXRpdmUoY29tYmF0YW50LCAtMTApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gb3B0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY29tYmF0YW50XHJcbiAgICAgKiBAcGFyYW0gYWRqdXN0bWVudFxyXG4gICAgICovXHJcbiAgICBhc3luYyBhZGp1c3RJbml0aWF0aXZlKGNvbWJhdGFudDogc3RyaW5nIHwgYW55LCBhZGp1c3RtZW50OiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb21iYXRhbnQgPSB0eXBlb2YgY29tYmF0YW50ID09PSAnc3RyaW5nJyA/IHRoaXMuY29tYmF0YW50cy5maW5kKChjKSA9PiBjLl9pZCA9PT0gY29tYmF0YW50KSA6IGNvbWJhdGFudDtcclxuICAgICAgICBpZiAoIWNvbWJhdGFudCB8fCB0eXBlb2YgY29tYmF0YW50ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDb3VsZCBub3QgZmluZCBjb21iYXRhbnQgd2l0aCBpZCAnLCBjb21iYXRhbnQpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG5ld0NvbWJhdGFudCA9IHtcclxuICAgICAgICAgICAgX2lkOiBjb21iYXRhbnQuX2lkLFxyXG4gICAgICAgICAgICBpbml0aWF0aXZlOiBOdW1iZXIoY29tYmF0YW50LmluaXRpYXRpdmUpICsgYWRqdXN0bWVudCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUNvbWJhdGFudChuZXdDb21iYXRhbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlIHRoZSBjaGFuZ2Ugb2YgYW4gaW5pdGlhdGl2ZSBwYXNzLiBUaGlzIG5lZWRzIG93bmVyIHBlcm1pc3Npb25zIG9uIHRoZSBjb21iYXQgZW50aXR5LlxyXG4gICAgICogQHBhcmFtIGNvbWJhdElkXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyBoYW5kbGVJbmlQYXNzKGNvbWJhdElkOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBjb21iYXQgPSBnYW1lLmNvbWJhdHMuZ2V0KGNvbWJhdElkKSBhcyBTUjVDb21iYXQ7XHJcbiAgICAgICAgaWYgKCFjb21iYXQpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgaW5pdGlhdGl2ZVBhc3MgPSBjb21iYXQuaW5pdGlhdGl2ZVBhc3MgKyAxO1xyXG4gICAgICAgIC8vIFN0YXJ0IGF0IHRoZSB0b3AhXHJcbiAgICAgICAgY29uc3QgdHVybiA9IDA7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbWJhdGFudHM6IGFueVtdID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCBjb21iYXRhbnQgb2YgY29tYmF0LmNvbWJhdGFudHMpIHtcclxuICAgICAgICAgICAgY29uc3QgaW5pdGlhdGl2ZSA9IENvbWJhdFJ1bGVzLnJlZHVjZUluaVJlc3VsdEFmdGVyUGFzcyhOdW1iZXIoY29tYmF0YW50LmluaXRpYXRpdmUpKTtcclxuICAgICAgICAgICAgY29tYmF0YW50cy5wdXNoKHtfaWQ6IGNvbWJhdGFudC5faWQsIGluaXRpYXRpdmV9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbWJhdGFudHMubGVuZ3RoID4gMClcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBhd2FpdCBjb21iYXQudXBkYXRlQ29tYmF0YW50KGNvbWJhdGFudHMpO1xyXG5cclxuICAgICAgICBhd2FpdCBTUjVDb21iYXQuc2V0SW5pdGlhdGl2ZVBhc3MoY29tYmF0LCBpbml0aWF0aXZlUGFzcyk7XHJcbiAgICAgICAgYXdhaXQgY29tYmF0LnVwZGF0ZSh7dHVybn0pO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZSB0aGUgY2hhbmdlIG9mIGEgaW5pdGlhdGl2ZSByb3VuZC4gVGhpcyBuZWVkcyBvd25lciBwZXJtaXNzaW9uIG9uIHRoZSBjb21iYXQgZW50aXR5LlxyXG4gICAgICogQHBhcmFtIGNvbWJhdElkXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyBoYW5kbGVOZXh0Um91bmQoY29tYmF0SWQ6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IGNvbWJhdCA9IGdhbWUuY29tYmF0cy5nZXQoY29tYmF0SWQpIGFzIFNSNUNvbWJhdDtcclxuICAgICAgICBpZiAoIWNvbWJhdCkgcmV0dXJuO1xyXG4gICAgICAgIGF3YWl0IGNvbWJhdC5yZXNldEFsbCgpO1xyXG5cclxuICAgICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoU1lTVEVNX05BTUUsIEZMQUdTLk9ubHlBdXRvUm9sbE5QQ0luQ29tYmF0KSkge1xyXG4gICAgICAgICAgICBhd2FpdCBjb21iYXQucm9sbE5QQygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGF3YWl0IGNvbWJhdC5yb2xsQWxsKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB0dXJuID0gMFxyXG4gICAgICAgIGF3YWl0IGNvbWJhdC51cGRhdGUoe3R1cm59KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1ha2Ugc3VyZSBTaGFkb3dydW4gaW5pdGlhdGl2ZSBvcmRlciBpcyBhcHBsaWVkLlxyXG4gICAgICovXHJcbiAgICBzZXR1cFR1cm5zKCk6IGFueVtdIHtcclxuICAgICAgICBjb25zdCB0dXJucyA9IHN1cGVyLnNldHVwVHVybnMoKTtcclxuICAgICAgICByZXR1cm4gdHVybnMuc29ydChTUjVDb21iYXQuc29ydEJ5UkVSSUMpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBzb3J0QnlSRVJJQyhsZWZ0LCByaWdodCk6IG51bWJlciB7XHJcbiAgICAgICAgLy8gRmlyc3Qgc29ydCBieSBpbml0aWF0aXZlIHZhbHVlIGlmIGRpZmZlcmVudFxyXG4gICAgICAgIGNvbnN0IGxlZnRJbml0ID0gTnVtYmVyKGxlZnQuaW5pdGlhdGl2ZSk7XHJcbiAgICAgICAgY29uc3QgcmlnaHRJbml0ID0gTnVtYmVyKHJpZ2h0LmluaXRpYXRpdmUpO1xyXG4gICAgICAgIGlmIChpc05hTihsZWZ0SW5pdCkpIHJldHVybiAxO1xyXG4gICAgICAgIGlmIChpc05hTihyaWdodEluaXQpKSByZXR1cm4gLTE7XHJcbiAgICAgICAgaWYgKGxlZnRJbml0ID4gcmlnaHRJbml0KSByZXR1cm4gLTE7XHJcbiAgICAgICAgaWYgKGxlZnRJbml0IDwgcmlnaHRJbml0KSByZXR1cm4gMTtcclxuXHJcbiAgICAgICAgLy8gbm93IHdlIHNvcnQgYnkgRVJJQ1xyXG4gICAgICAgIGNvbnN0IGdlbkRhdGEgPSAoYWN0b3IpID0+IHtcclxuICAgICAgICAgICAgLy8gZWRnZSwgcmVhY3Rpb24sIGludHVpdGlvbiwgY29pbiBmbGlwXHJcbiAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgICBOdW1iZXIoYWN0b3IuZ2V0RWRnZSgpLnZhbHVlKSxcclxuICAgICAgICAgICAgICAgIE51bWJlcihhY3Rvci5maW5kQXR0cmlidXRlKCdyZWFjdGlvbicpPy52YWx1ZSksXHJcbiAgICAgICAgICAgICAgICBOdW1iZXIoYWN0b3IuZmluZEF0dHJpYnV0ZSgnaW50dWl0aW9uJyk/LnZhbHVlKSxcclxuICAgICAgICAgICAgICAgIG5ldyBSb2xsKCcxZDInKS5yb2xsKCkudG90YWwsXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgbGVmdERhdGEgPSBnZW5EYXRhKGxlZnQuYWN0b3IpO1xyXG4gICAgICAgIGNvbnN0IHJpZ2h0RGF0YSA9IGdlbkRhdGEocmlnaHQuYWN0b3IpO1xyXG4gICAgICAgIC8vIGlmIHdlIGZpbmQgYSBkaWZmZXJlbmNlIHRoYXQgaXNuJ3QgMCwgcmV0dXJuIGl0XHJcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGxlZnREYXRhLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICBjb25zdCBkaWZmID0gcmlnaHREYXRhW2luZGV4XSAtIGxlZnREYXRhW2luZGV4XTtcclxuICAgICAgICAgICAgaWYgKGRpZmYgIT09IDApIHJldHVybiBkaWZmO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gdGhlIHBvc2l0aW9uIGluIHRoZSBjdXJyZW50IGluaSBwYXNzIG9mIHRoZSBuZXh0IHVuZGVmZWF0ZWQgY29tYmF0YW50LlxyXG4gICAgICovXHJcbiAgICBnZXQgbmV4dFVuZGVmZWF0ZWRUdXJuUG9zaXRpb24oKTogbnVtYmVyIHtcclxuICAgICAgICBmb3IgKGxldCBbdHVybkluUGFzcywgY29tYmF0YW50XSBvZiB0aGlzLnR1cm5zLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICAvLyBTa2lwcGluZyBpcyBvbmx5IGludGVyZXN0aW5nIHdoZW4gbW92aW5nIGZvcndhcmQuXHJcbiAgICAgICAgICAgIGlmICh0dXJuSW5QYXNzIDw9IHRoaXMudHVybikgY29udGludWU7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgaWYgKCFjb21iYXRhbnQuZGVmZWF0ZWQgJiYgY29tYmF0YW50LmluaXRpYXRpdmUgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHVybkluUGFzcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUaGUgY3VycmVudCB0dXJuIGlzIHRoZSBsYXN0IHVuZGVmZWF0ZWQgY29tYmF0YW50LiBTbyBnbyB0byB0aGUgZW5kIGFuZCBiZWVlZXlvb29uZC5cclxuICAgICAgICByZXR1cm4gdGhpcy50dXJucy5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gdGhlIHBvc2l0aW9uIGluIHRoZSBjdXJyZW50IGluaSBwYXNzIG9mIHRoZSBuZXh0IGNvbWJhdGFudCB0aGF0IGhhcyBhbiBhY3Rpb24gcGhhc2UgbGVmdC5cclxuICAgICAqL1xyXG4gICAgZ2V0IG5leHRWaWFibGVUdXJuUG9zaXRpb24oKTogbnVtYmVyIHtcclxuICAgICAgICAvLyBTdGFydCBhdCB0aGUgbmV4dCBwb3NpdGlvbiBhZnRlciB0aGUgY3VycmVudCBvbmUuXHJcbiAgICAgICAgZm9yIChsZXQgbiA9IHRoaXMudHVybiArIDE7IG4rKzsgbiA8IHRoaXMuY29tYmF0YW50cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3QgY29tYmF0YW50ID0gdGhpcy5jb21iYXRhbnRzW25dO1xyXG4gICAgICAgICAgICBpZiAoY29tYmF0YW50LmluaXRpYXRpdmUgPiAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIG5vdGhpbmcgaXMgZm91bmQsIHN0YXJ0IGF0IHRoZSB0b3AuXHJcbiAgICAgICAgcmV0dXJuIDBcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERldGVybWluZSB3aGV0ZXIgdGhlIGN1cnJlbnQgY29tYmF0IHNpdHVhdGlvbiAoY3VycmVudCB0dXJuIG9yZGVyKSBuZWVkcyBhbmQgY2FuIGhhdmUgYW4gaW5pdGlhdGl2ZSBwYXNzIGFwcGxpZWQuXHJcbiAgICAgKiBAcmV0dXJuIHRydWUgbWVhbnMgdGhhdCBhbiBpbml0aWF0aXZlIHBhc3MgbXVzdCBiZSBhcHBsaWVkXHJcbiAgICAgKi9cclxuICAgIGRvSW5pUGFzcyhuZXh0VHVybjogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgLy8gV2UncmUgY3VycmVudGx5IG9ubHkgc3RlcHBpbmcgZnJvbSBjb21iYXRhbnQgdG8gY29tYmF0YW50LlxyXG4gICAgICAgIGlmIChuZXh0VHVybiA8IHRoaXMudHVybnMubGVuZ3RoKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8gUHJlcGFyZSBhbm90aGVyIHBvc3NpYmxlIGluaXRpYXRpdmUgb3JkZXIuXHJcbiAgICAgICAgY29uc3QgY3VycmVudFNjb3JlcyA9IHRoaXMuY29tYmF0YW50cy5tYXAoY29tYmF0YW50ID0+IE51bWJlcihjb21iYXRhbnQuaW5pdGlhdGl2ZSkpO1xyXG5cclxuICAgICAgICByZXR1cm4gQ29tYmF0UnVsZXMuaW5pT3JkZXJDYW5Eb0Fub3RoZXJQYXNzKGN1cnJlbnRTY29yZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWZ0ZXIgYWxsIGNvbWJhdGFudHMgaGF2ZSBoYWQgdGhlaXIgYWN0aW9uIHBoYXNlIChjbGljayBvbiBuZXh0ICd0dXJuJykgaGFuZGxlIHNoYWRvd3J1biBydWxlcyBmb3JcclxuICAgICAqIGluaXRpYXRpdmUgcGFzcyBhbmQgY29tYmF0IHR1cm4uXHJcbiAgICAgKlxyXG4gICAgICogQXMgbG9uZyBhcyBhIGNvbWJhdGFudCBzdGlsbCBoYXMgYSBwb3NpdGl2ZSBpbml0aWF0aXZlIHNjb3JlIGxlZnQsIGdvIHRvIHRoZSBuZXh0IHBhc3MuXHJcbiAgICAgKiAgUmFpc2UgdGhlIEZvdW5kcnkgdHVybiBhbmQgZG9uJ3QgcmFpc2UgdGhlIEZvdW5kcnkgcm91bmQuXHJcbiAgICAgKiBBcyBzb29ucyBhcyBhbGwgY29tYmF0YW50cyBoYXZlIG5vIGluaXRpYXRpdmUgc2NvcmUgbGVmdCwgZ28gdG8gdGhlIG5leHQgY29tYmF0IHJvdW5kLlxyXG4gICAgICogIFJlc2V0IHRoZSBGb3VuZHJ5IHBhc3MgYW5kIGRvbid0IHJhaXNlIHRoZSBGb3VuZHJ5IHR1cm4uXHJcbiAgICAgKlxyXG4gICAgICogUmV0cmlnZ2VyIEluaXRpYXRpdmUgUm9sbHMgb24gZWFjaCBuZXcgRm91bmRyeSByb3VuZC5cclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogKiBAT3ZlcnJpZGVcclxuICAgICAqL1xyXG4gICAgYXN5bmMgbmV4dFR1cm4oKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgLy8gTWF5YmUgYWR2YW5jZSB0byB0aGUgbmV4dCByb3VuZC9pbml0IHBhc3NcclxuICAgICAgICBsZXQgbmV4dFJvdW5kID0gdGhpcy5yb3VuZDtcclxuICAgICAgICBsZXQgaW5pdGlhdGl2ZVBhc3MgPSB0aGlzLmluaXRpYXRpdmVQYXNzO1xyXG4gICAgICAgIC8vIEdldCB0aGUgbmV4dCB2aWFibGUgdHVybiBwb3NpdGlvbi5cclxuICAgICAgICBsZXQgbmV4dFR1cm4gPSB0aGlzLnNldHRpbmdzLnNraXBEZWZlYXRlZCA/XHJcbiAgICAgICAgICAgIHRoaXMubmV4dFVuZGVmZWF0ZWRUdXJuUG9zaXRpb24gOlxyXG4gICAgICAgICAgICB0aGlzLm5leHRWaWFibGVUdXJuUG9zaXRpb247XHJcblxyXG4gICAgICAgIC8vIFN0YXJ0IG9mIHRoZSBjb21iYXQgSGFuZGxpbmdcclxuICAgICAgICBpZiAobmV4dFJvdW5kID09PSAwICYmIGluaXRpYXRpdmVQYXNzID09PSAwKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc3RhcnRDb21iYXQoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSnVzdCBzdGVwIGZyb20gb25lIGNvbWJhdGFudCB0byB0aGUgbmV4dCFcclxuICAgICAgICBpZiAobmV4dFR1cm4gPCB0aGlzLnR1cm5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7dHVybjogbmV4dFR1cm59KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSW5pdGlhdGl2ZSBQYXNzIEhhbmRsaW5nLiBPd25lciBwZXJtaXNzaW9ucyBhcmUgbmVlZGVkIHRvIGNoYW5nZSB0aGUgaW5pdGlhdGl2ZSBwYXNzLlxyXG4gICAgICAgIGlmICghZ2FtZS51c2VyLmlzR00gJiYgdGhpcy5kb0luaVBhc3MobmV4dFR1cm4pKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2NyZWF0ZURvSW5pUGFzc1NvY2tldE1lc3NhZ2UoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNICYmIHRoaXMuZG9JbmlQYXNzKG5leHRUdXJuKSkge1xyXG4gICAgICAgICAgICBhd2FpdCBTUjVDb21iYXQuaGFuZGxlSW5pUGFzcyh0aGlzLmlkKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJbml0aWF0aXZlIFJvdW5kIEhhbmRsaW5nLlxyXG4gICAgICAgIC8vIE5PVEU6IEl0J3Mgbm90IGNoZWNrZWQgaWYgdGhlIG5leHQgaXMgbmVlZGVkLiBUaGlzIHNob3VsZCByZXN1bHQgaW50IGhlIHVzZXIgbm90aWNpbmcgdGhlIHR1cm4gZ29pbmcgdXAsIHdoZW4gaXRcclxuICAgICAgICAvLyAgICAgICBtYXliZSBzaG91bGRuJ3QgYW5kIHJlcG9ydGluZyBhIHVuaGFuZGxlZCBjb21iYXQgcGhhc2UgZmxvdyBjYXNlLlxyXG4gICAgICAgIHJldHVybiB0aGlzLm5leHRSb3VuZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHN0YXJ0Q29tYmF0KCkge1xyXG4gICAgICAgIGNvbnN0IG5leHRSb3VuZCA9IFNSLmNvbWJhdC5JTklUSUFMX0lOSV9ST1VORDtcclxuICAgICAgICBjb25zdCBpbml0aWF0aXZlUGFzcyA9IFNSLmNvbWJhdC5JTklUSUFMX0lOSV9QQVNTO1xyXG4gICAgICAgIC8vIFN0YXJ0IGF0IHRoZSB0b3AhXHJcbiAgICAgICAgY29uc3QgbmV4dFR1cm4gPSAwO1xyXG5cclxuICAgICAgICBhd2FpdCBTUjVDb21iYXQuc2V0SW5pdGlhdGl2ZVBhc3ModGhpcywgaW5pdGlhdGl2ZVBhc3MpO1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7cm91bmQ6IG5leHRSb3VuZCwgdHVybjogbmV4dFR1cm59KTtcclxuXHJcbiAgICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KFNZU1RFTV9OQU1FLCBGTEFHUy5Pbmx5QXV0b1JvbGxOUENJbkNvbWJhdCkpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yb2xsTlBDKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yb2xsQWxsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIG5leHRSb3VuZCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICAvLyBMZXQgRm91bmRyeSBoYW5kbGUgdGltZSBhbmQgc29tZSBvdGhlciB0aGluZ3MuXHJcbiAgICAgICAgYXdhaXQgc3VwZXIubmV4dFJvdW5kKCk7XHJcbiAgICAgICAgYXdhaXQgU1I1Q29tYmF0LnNldEluaXRpYXRpdmVQYXNzKHRoaXMsIFNSLmNvbWJhdC5JTklUSUFMX0lOSV9QQVNTKTtcclxuXHJcbiAgICAgICAgLy8gT3duZXIgcGVybWlzc2lvbnMgYXJlIG5lZWRlZCB0byBjaGFuZ2UgdGhlIHNoYWRvd3J1biBpbml0aWF0aXZlIHJvdW5kLlxyXG4gICAgICAgIGlmICghZ2FtZS51c2VyLmlzR00pIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fY3JlYXRlRG9OZXh0Um91bmRTb2NrZXRNZXNzYWdlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYXdhaXQgU1I1Q29tYmF0LmhhbmRsZU5leHRSb3VuZCh0aGlzLmlkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiB1c2UgZGVmYXVsdCBiZWhhdmlvdXIgYnV0IEFMV0FZUyBzdGFydCBhdCB0aGUgdG9wIVxyXG4gICAgICovXHJcbiAgICBhc3luYyByb2xsQWxsKCk6IFByb21pc2U8U1I1Q29tYmF0PiB7XHJcbiAgICAgICAgY29uc3QgY29tYmF0ID0gYXdhaXQgc3VwZXIucm9sbEFsbCgpIGFzIFNSNUNvbWJhdDtcclxuICAgICAgICBpZiAoY29tYmF0LnR1cm4gIT09IDApXHJcbiAgICAgICAgICAgIGF3YWl0IGNvbWJhdC51cGRhdGUoe3R1cm46IDB9KTtcclxuICAgICAgICByZXR1cm4gY29tYmF0O1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHVwZGF0ZU5ld0NvbWJhdGFudHMoaWRzOiBzdHJpbmdbXSkge1xyXG4gICAgICAgIGNvbnN0IG5ld0NvbWJhdGFudHMgPSB0aGlzLmNvbWJhdGFudHMuZmlsdGVyKGNvbWJhdGFudCA9PiBpZHMuaW5jbHVkZXMoY29tYmF0YW50Ll9pZCkpO1xyXG4gICAgICAgIGlmICghbmV3Q29tYmF0YW50cykgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyBSZWR1Y2UgaW5pdGlhdGl2ZSBzY29yZSBmb3Igb25nb2luZyBpbml0aWF0aXZlIHBhc3Nlcy5cclxuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0gbmV3Q29tYmF0YW50cy5tYXAoY29tYmF0YW50ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW5pdGlhdGl2ZSA9IENvbWJhdFJ1bGVzLnJlZHVjZUluaU9uTGF0ZVNwYXduKGNvbWJhdGFudC5pbml0aWF0aXZlLCB0aGlzLmluaXRpYXRpdmVQYXNzKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIF9pZDogY29tYmF0YW50Ll9pZCxcclxuICAgICAgICAgICAgICAgIGluaXRpYXRpdmVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUNvbWJhdGFudCh1cGRhdGVEYXRhKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaGFkb3dydW4gc3RhcnRzIGF0IHRoZSB0b3AsIGV4Y2VwdCBmb3Igc3Vic2VxdWVudCBpbml0aWF0aXZlIHBhc3NlcywgdGhlbiBpdCBkZXBlbmRzIG9uIHRoZSBuZXcgdmFsdWVzLlxyXG4gICAgICovXHJcbiAgICBhc3luYyByb2xsSW5pdGlhdGl2ZShpZHMsIG9wdGlvbnMpOiBQcm9taXNlPFNSNUNvbWJhdD4ge1xyXG4gICAgICAgIGNvbnN0IG5ld0lkcyA9IEFycmF5LmlzQXJyYXkoaWRzKSA/IGlkcyA6IFtpZHNdO1xyXG4gICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgIGNvbnN0IGNvbWJhdCA9IGF3YWl0IHN1cGVyLnJvbGxJbml0aWF0aXZlKGlkcywgb3B0aW9ucykgYXMgU1I1Q29tYmF0O1xyXG5cclxuICAgICAgICAvLyBpZiAodGhpcy5pbml0aWF0aXZlUGFzcyA+IFNSLmNvbWJhdC5JTklUSUFMX0lOSV9QQVNTKVxyXG4gICAgICAgIC8vICAgICBhd2FpdCB0aGlzLnVwZGF0ZU5ld0NvbWJhdGFudHMobmV3SWRzKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaW5pdGlhdGl2ZVBhc3MgPT09IFNSLmNvbWJhdC5JTklUSUFMX0lOSV9QQVNTKVxyXG4gICAgICAgICAgICBhd2FpdCBjb21iYXQudXBkYXRlKHt0dXJuOiAwfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb21iYXQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbHRlciBpbml0aWF0aXZlIGZvcm11bGEgdG8gaW5jbHVkZSBpbml0aWF0aXZlIHBhc3MgcmVkdWN0aW9uLlxyXG4gICAgICpcclxuICAgICAqIE5PVEU6IFNob3VsZCB0aGlzIGhlcmUgZmFpbCBvciBiZSBidWdneSwgdGhlcmUgYWx3YXlzIGlzIFNSNUNvbWJhdC51cGRhdGVOZXdDb21iYXRhbnRzIHdoaWNoIGNhbiBiZSB1bmNvbW1lbnRlZCBpbiBTUjVDb21iYXQucm9sbEluaXRpYXRpdmVcclxuICAgICAqIEBwYXJhbSBjb21iYXRhbnRcclxuICAgICAqL1xyXG4gICAgX2dldEluaXRpYXRpdmVGb3JtdWxhKGNvbWJhdGFudDogRW50aXR5KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW5pdGlhdGl2ZVBhc3MgPT09IFNSLmNvbWJhdC5JTklUSUFMX0lOSV9QQVNTKSB7IC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLl9nZXRJbml0aWF0aXZlRm9ybXVsYShjb21iYXRhbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVkdWNlIGZvciBpbml0aWF0aXZlIHBhc3NlcyB1bnRpbCB6ZXJvLlxyXG4gICAgICAgIHJldHVybiBgbWF4KCR7Z2FtZS5zeXN0ZW0uZGF0YS5pbml0aWF0aXZlfSAtJHsodGhpcy5pbml0aWF0aXZlUGFzcyAtIDEpICogLVNSLmNvbWJhdC5JTklfUkVTVUxUX01PRF9BRlRFUl9JTklfUEFTU30sIDApYDtcclxuICAgIH1cclxuXHJcbiAgICBfcmVnaXN0ZXJTb2NrZXRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGdhbWUuc29ja2V0Lm9uKFNZU1RFTV9TT0NLRVQsIGFzeW5jIChtZXNzYWdlKSA9PiB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAobWVzc2FnZS50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIChGTEFHUy5Eb05leHRSb3VuZCk6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlLmRhdGEuaGFzT3duUHJvcGVydHkoJ2lkJykgJiYgdHlwZW9mIG1lc3NhZ2UuZGF0YS5pZCAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgU1I1Q29tYmF0IFNvY2tldCBNZXNzYWdlICR7RkxBR1MuRG9OZXh0Um91bmR9IGRhdGEuaWQgbXVzdCBiZSBhIHN0cmluZyAoY29tYmF0IGlkKSBidXQgaXMgJHt0eXBlb2YgbWVzc2FnZS5kYXRhfSAoJHttZXNzYWdlLmRhdGF9KSFgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IFNSNUNvbWJhdC5oYW5kbGVOZXh0Um91bmQobWVzc2FnZS5kYXRhLmlkKTtcclxuICAgICAgICAgICAgICAgIGNhc2UgKEZMQUdTLkRvSW5pdFBhc3MpOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbWVzc2FnZS5kYXRhLmhhc093blByb3BlcnR5KCdpZCcpICYmIHR5cGVvZiBtZXNzYWdlLmRhdGEuaWQgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFNSNUNvbWJhdCBTb2NrZXQgTWVzc2FnZSAke0ZMQUdTLkRvSW5pdFBhc3N9IGRhdGEuaWQgbXVzdCBiZSBhIHN0cmluZyAoY29tYmF0IGlkKSBidXQgaXMgJHt0eXBlb2YgbWVzc2FnZS5kYXRhfSAoJHttZXNzYWdlLmRhdGF9KSFgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IFNSNUNvbWJhdC5oYW5kbGVJbmlQYXNzKG1lc3NhZ2UuZGF0YS5pZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIF9jcmVhdGVEb05leHRSb3VuZFNvY2tldE1lc3NhZ2UoKSB7XHJcbiAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgYXdhaXQgZ2FtZS5zb2NrZXQuZW1pdChgJHtTWVNURU1fU09DS0VUfWAsIHt0eXBlOiBGTEFHUy5Eb05leHRSb3VuZCwgZGF0YToge2lkOiB0aGlzLmlkfX0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIF9jcmVhdGVEb0luaVBhc3NTb2NrZXRNZXNzYWdlKCkge1xyXG4gICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgIGF3YWl0IGdhbWUuc29ja2V0LmVtaXQoYCR7U1lTVEVNX1NPQ0tFVH1gLCB7dHlwZTogRkxBR1MuRG9Jbml0UGFzcywgZGF0YToge2lkOiB0aGlzLmlkfX0pO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBTUjUgPSB7XHJcbiAgICBpdGVtVHlwZXM6IHtcclxuICAgICAgICBhY3Rpb246ICdTUjUuSXRlbVR5cGVzLkFjdGlvbicsXHJcbiAgICAgICAgYWRlcHRfcG93ZXI6ICdTUjUuSXRlbVR5cGVzLkFkZXB0UG93ZXInLFxyXG4gICAgICAgIGFtbW86ICdTUjUuSXRlbVR5cGVzLkFtbW8nLFxyXG4gICAgICAgIGFybW9yOiAnU1I1Lkl0ZW1UeXBlcy5Bcm1vcicsXHJcbiAgICAgICAgY29tcGxleF9mb3JtOiAnU1I1Lkl0ZW1UeXBlcy5Db21wbGV4Rm9ybScsXHJcbiAgICAgICAgY29udGFjdDogJ1NSNS5JdGVtVHlwZXMuQ29udGFjdCcsXHJcbiAgICAgICAgY3JpdHRlcl9wb3dlcjogJ1NSNS5JdGVtVHlwZXMuQ3JpdHRlclBvd2VyJyxcclxuICAgICAgICBjeWJlcndhcmU6ICdTUjUuSXRlbVR5cGVzLkN5YmVyd2FyZScsXHJcbiAgICAgICAgYmlvd2FyZTogJ1NSNS5JdGVtVHlwZXMuQmlvd2FyZScsXHJcbiAgICAgICAgZGV2aWNlOiAnU1I1Lkl0ZW1UeXBlcy5EZXZpY2UnLFxyXG4gICAgICAgIGVxdWlwbWVudDogJ1NSNS5JdGVtVHlwZXMuRXF1aXBtZW50JyxcclxuICAgICAgICBsaWZlc3R5bGU6ICdTUjUuSXRlbVR5cGVzLkxpZmVzdHlsZScsXHJcbiAgICAgICAgbW9kaWZpY2F0aW9uOiAnU1I1Lkl0ZW1UeXBlcy5Nb2RpZmljYXRpb24nLFxyXG4gICAgICAgIHF1YWxpdHk6ICdTUjUuSXRlbVR5cGVzLlF1YWxpdHknLFxyXG4gICAgICAgIHNpbjogJ1NSNS5JdGVtVHlwZXMuU2luJyxcclxuICAgICAgICBzcGVsbDogJ1NSNS5JdGVtVHlwZXMuU3BlbGwnLFxyXG4gICAgICAgIHdlYXBvbjogJ1NSNS5JdGVtVHlwZXMuV2VhcG9uJyxcclxuICAgIH0sXHJcblxyXG4gICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgIGJvZHk6ICdTUjUuQXR0ckJvZHknLFxyXG4gICAgICAgIGFnaWxpdHk6ICdTUjUuQXR0ckFnaWxpdHknLFxyXG4gICAgICAgIHJlYWN0aW9uOiAnU1I1LkF0dHJSZWFjdGlvbicsXHJcbiAgICAgICAgc3RyZW5ndGg6ICdTUjUuQXR0clN0cmVuZ3RoJyxcclxuICAgICAgICB3aWxscG93ZXI6ICdTUjUuQXR0cldpbGxwb3dlcicsXHJcbiAgICAgICAgbG9naWM6ICdTUjUuQXR0ckxvZ2ljJyxcclxuICAgICAgICBpbnR1aXRpb246ICdTUjUuQXR0ckludHVpdGlvbicsXHJcbiAgICAgICAgY2hhcmlzbWE6ICdTUjUuQXR0ckNoYXJpc21hJyxcclxuICAgICAgICBtYWdpYzogJ1NSNS5BdHRyTWFnaWMnLFxyXG4gICAgICAgIHJlc29uYW5jZTogJ1NSNS5BdHRyUmVzb25hbmNlJyxcclxuICAgICAgICBlZGdlOiAnU1I1LkF0dHJFZGdlJyxcclxuICAgICAgICBlc3NlbmNlOiAnU1I1LkF0dHJFc3NlbmNlJyxcclxuICAgICAgICBhdHRhY2s6ICdTUjUuTWF0cml4QXR0ckF0dGFjaycsXHJcbiAgICAgICAgc2xlYXplOiAnU1I1Lk1hdHJpeEF0dHJTbGVhemUnLFxyXG4gICAgICAgIGRhdGFfcHJvY2Vzc2luZzogJ1NSNS5NYXRyaXhBdHRyRGF0YVByb2MnLFxyXG4gICAgICAgIGZpcmV3YWxsOiAnU1I1Lk1hdHJpeEF0dHJGaXJld2FsbCcsXHJcbiAgICB9LFxyXG5cclxuICAgIGxpbWl0czoge1xyXG4gICAgICAgIHBoeXNpY2FsOiAnU1I1LkxpbWl0UGh5c2ljYWwnLFxyXG4gICAgICAgIHNvY2lhbDogJ1NSNS5MaW1pdFNvY2lhbCcsXHJcbiAgICAgICAgbWVudGFsOiAnU1I1LkxpbWl0TWVudGFsJyxcclxuICAgICAgICBhdHRhY2s6ICdTUjUuTWF0cml4QXR0ckF0dGFjaycsXHJcbiAgICAgICAgc2xlYXplOiAnU1I1Lk1hdHJpeEF0dHJTbGVhemUnLFxyXG4gICAgICAgIGRhdGFfcHJvY2Vzc2luZzogJ1NSNS5NYXRyaXhBdHRyRGF0YVByb2MnLFxyXG4gICAgICAgIGZpcmV3YWxsOiAnU1I1Lk1hdHJpeEF0dHJGaXJld2FsbCcsXHJcbiAgICB9LFxyXG5cclxuICAgIHNwZWNpYWxUeXBlczoge1xyXG4gICAgICAgIG11bmRhbmU6ICdTUjUuTXVuZGFuZScsXHJcbiAgICAgICAgbWFnaWM6ICdTUjUuQXdha2VuZWQnLFxyXG4gICAgICAgIHJlc29uYW5jZTogJ1NSNS5FbWVyZ2VkJyxcclxuICAgIH0sXHJcblxyXG4gICAgZGFtYWdlVHlwZXM6IHtcclxuICAgICAgICBwaHlzaWNhbDogJ1NSNS5EbWdUeXBlUGh5c2ljYWwnLFxyXG4gICAgICAgIHN0dW46ICdTUjUuRG1nVHlwZVN0dW4nLFxyXG4gICAgICAgIG1hdHJpeDogJ1NSNS5EbWdUeXBlTWF0cml4JyxcclxuICAgIH0sXHJcblxyXG4gICAgZWxlbWVudFR5cGVzOiB7XHJcbiAgICAgICAgZmlyZTogJ1NSNS5FbGVtZW50RmlyZScsXHJcbiAgICAgICAgY29sZDogJ1NSNS5FbGVtZW50Q29sZCcsXHJcbiAgICAgICAgYWNpZDogJ1NSNS5FbGVtZW50QWNpZCcsXHJcbiAgICAgICAgZWxlY3RyaWNpdHk6ICdTUjUuRWxlbWVudEVsZWN0cmljaXR5JyxcclxuICAgICAgICByYWRpYXRpb246ICdTUjUuRWxlbWVudFJhZGlhdGlvbicsXHJcbiAgICB9LFxyXG5cclxuICAgIHNwZWxsQ2F0ZWdvcmllczoge1xyXG4gICAgICAgIGNvbWJhdDogJ1NSNS5TcGVsbENhdENvbWJhdCcsXHJcbiAgICAgICAgZGV0ZWN0aW9uOiAnU1I1LlNwZWxsQ2F0RGV0ZWN0aW9uJyxcclxuICAgICAgICBoZWFsdGg6ICdTUjUuU3BlbGxDYXRIZWFsdGgnLFxyXG4gICAgICAgIGlsbHVzaW9uOiAnU1I1LlNwZWxsQ2F0SWxsdXNpb24nLFxyXG4gICAgICAgIG1hbmlwdWxhdGlvbjogJ1NSNS5TcGVsbENhdE1hbmlwdWxhdGlvbicsXHJcbiAgICB9LFxyXG5cclxuICAgIHNwZWxsVHlwZXM6IHtcclxuICAgICAgICBwaHlzaWNhbDogJ1NSNS5TcGVsbFR5cGVQaHlzaWNhbCcsXHJcbiAgICAgICAgbWFuYTogJ1NSNS5TcGVsbFR5cGVNYW5hJyxcclxuICAgIH0sXHJcblxyXG4gICAgc3BlbGxSYW5nZXM6IHtcclxuICAgICAgICB0b3VjaDogJ1NSNS5TcGVsbFJhbmdlVG91Y2gnLFxyXG4gICAgICAgIGxvczogJ1NSNS5TcGVsbFJhbmdlTG9zJyxcclxuICAgICAgICBsb3NfYTogJ1NSNS5TcGVsbFJhbmdlTG9zQScsXHJcbiAgICB9LFxyXG5cclxuICAgIGNvbWJhdFNwZWxsVHlwZXM6IHtcclxuICAgICAgICBkaXJlY3Q6ICdTUjUuU3BlbGxDb21iYXREaXJlY3QnLFxyXG4gICAgICAgIGluZGlyZWN0OiAnU1I1LlNwZWxsQ29tYmF0SW5kaXJlY3QnLFxyXG4gICAgfSxcclxuXHJcbiAgICBkZXRlY3Rpb25TcGVsbFR5cGVzOiB7XHJcbiAgICAgICAgZGlyZWN0aW9uYWw6ICdTUjUuU3BlbGxEZXRlY3Rpb25EaXJlY3Rpb25hbCcsXHJcbiAgICAgICAgcHN5Y2hpYzogJ1NSNS5TcGVsbERldGVjdGlvblBzeWNoaWMnLFxyXG4gICAgICAgIGFyZWE6ICdTUjUuU3BlbGxEZXRlY3Rpb25BcmVhJyxcclxuICAgIH0sXHJcblxyXG4gICAgaWxsdXNpb25TcGVsbFR5cGVzOiB7XHJcbiAgICAgICAgb2J2aW91czogJ1NSNS5TcGVsbElsbHVzaW9uT2J2aW91cycsXHJcbiAgICAgICAgcmVhbGlzdGljOiAnU1I1LlNwZWxsSWxsdXNpb25SZWFsaXN0aWMnLFxyXG4gICAgfSxcclxuXHJcbiAgICBpbGx1c2lvblNwZWxsU2Vuc2VzOiB7XHJcbiAgICAgICAgJ3NpbmdsZS1zZW5zZSc6ICdTUjUuU3BlbGxJbGx1c2lvblNpbmdsZVNlbnNlJyxcclxuICAgICAgICAnbXVsdGktc2Vuc2UnOiAnU1I1LlNwZWxsSWxsdXNpb25NdWx0aVNlbnNlJyxcclxuICAgIH0sXHJcblxyXG4gICAgYXR0cmlidXRlUm9sbHM6IHtcclxuICAgICAgICBjb21wb3N1cmU6ICdTUjUuUm9sbENvbXBvc3VyZScsXHJcbiAgICAgICAgbGlmdF9jYXJyeTogJ1NSNS5Sb2xsTGlmdENhcnJ5JyxcclxuICAgICAgICBqdWRnZV9pbnRlbnRpb25zOiAnU1I1LlJvbGxKdWRnZUludGVudGlvbnMnLFxyXG4gICAgICAgIG1lbW9yeTogJ1NSNS5Sb2xsTWVtb3J5JyxcclxuICAgIH0sXHJcblxyXG4gICAgbWF0cml4VGFyZ2V0czoge1xyXG4gICAgICAgIHBlcnNvbmE6ICdTUjUuVGFyZ2V0UGVyc29uYScsXHJcbiAgICAgICAgZGV2aWNlOiAnU1I1LlRhcmdldERldmljZScsXHJcbiAgICAgICAgZmlsZTogJ1NSNS5UYXJnZXRGaWxlJyxcclxuICAgICAgICBzZWxmOiAnU1I1LlRhcmdldFNlbGYnLFxyXG4gICAgICAgIHNwcml0ZTogJ1NSNS5UYXJnZXRTcHJpdGUnLFxyXG4gICAgICAgIG90aGVyOiAnU1I1LlRhcmdldE90aGVyJyxcclxuICAgIH0sXHJcblxyXG4gICAgZHVyYXRpb25zOiB7XHJcbiAgICAgICAgaW5zdGFudDogJ1NSNS5EdXJhdGlvbkluc3RhbnQnLFxyXG4gICAgICAgIHN1c3RhaW5lZDogJ1NSNS5EdXJhdGlvblN1c3RhaW5lZCcsXHJcbiAgICAgICAgcGVybWFuZW50OiAnU1I1LkR1cmF0aW9uUGVybWFuZW50JyxcclxuICAgIH0sXHJcblxyXG4gICAgd2VhcG9uQ2F0ZWdvcmllczoge1xyXG4gICAgICAgIHJhbmdlOiAnU1I1LldlYXBvbkNhdFJhbmdlJyxcclxuICAgICAgICBtZWxlZTogJ1NSNS5XZWFwb25DYXRNZWxlZScsXHJcbiAgICAgICAgdGhyb3duOiAnU1I1LldlYXBvbkNhdFRocm93bicsXHJcbiAgICB9LFxyXG5cclxuICAgIHdlYXBvblJhbmdlczoge1xyXG4gICAgICAgIHNob3J0OiAnU1I1LldlYXBvblJhbmdlU2hvcnQnLFxyXG4gICAgICAgIG1lZGl1bTogJ1NSNS5XZWFwb25SYW5nZU1lZGl1bScsXHJcbiAgICAgICAgbG9uZzogJ1NSNS5XZWFwb25SYW5nZUxvbmcnLFxyXG4gICAgICAgIGV4dHJlbWU6ICdTUjUuV2VhcG9uUmFuZ2VFeHRyZW1lJyxcclxuICAgIH0sXHJcblxyXG4gICAgcXVhbGl0eVR5cGVzOiB7XHJcbiAgICAgICAgcG9zaXRpdmU6ICdTUjUuUXVhbGl0eVR5cGVQb3NpdGl2ZScsXHJcbiAgICAgICAgbmVnYXRpdmU6ICdTUjUuUXVhbGl0eVR5cGVOZWdhdGl2ZScsXHJcbiAgICB9LFxyXG5cclxuICAgIGFkZXB0UG93ZXI6IHtcclxuICAgICAgICB0eXBlczoge1xyXG4gICAgICAgICAgICBhY3RpdmU6ICdTUjUuQWRlcHRQb3dlci5UeXBlcy5BY3RpdmUnLFxyXG4gICAgICAgICAgICBwYXNzaXZlOiAnU1I1LkFkZXB0UG93ZXIuVHlwZXMuUGFzc2l2ZScsXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgZGV2aWNlQ2F0ZWdvcmllczoge1xyXG4gICAgICAgIGNvbW1saW5rOiAnU1I1LkRldmljZUNhdENvbW1saW5rJyxcclxuICAgICAgICBjeWJlcmRlY2s6ICdTUjUuRGV2aWNlQ2F0Q3liZXJkZWNrJyxcclxuICAgIH0sXHJcblxyXG4gICAgY3liZXJ3YXJlR3JhZGVzOiB7XHJcbiAgICAgICAgc3RhbmRhcmQ6ICdTUjUuQ3liZXJ3YXJlR3JhZGVTdGFuZGFyZCcsXHJcbiAgICAgICAgYWxwaGE6ICdTUjUuQ3liZXJ3YXJlR3JhZGVBbHBoYScsXHJcbiAgICAgICAgYmV0YTogJ1NSNS5DeWJlcndhcmVHcmFkZUJldGEnLFxyXG4gICAgICAgIGRlbHRhOiAnU1I1LkN5YmVyd2FyZUdyYWRlRGVsdGEnLFxyXG4gICAgICAgIHVzZWQ6ICdTUjUuQ3liZXJ3YXJlR3JhZGVVc2VkJyxcclxuICAgIH0sXHJcblxyXG4gICAga25vd2xlZGdlU2tpbGxDYXRlZ29yaWVzOiB7XHJcbiAgICAgICAgc3RyZWV0OiAnU1I1Lktub3dsZWRnZVNraWxsU3RyZWV0JyxcclxuICAgICAgICBhY2FkZW1pYzogJ1NSNS5Lbm93bGVkZ2VTa2lsbEFjYWRlbWljJyxcclxuICAgICAgICBwcm9mZXNzaW9uYWw6ICdTUjUuS25vd2xlZGdlU2tpbGxQcm9mZXNzaW9uYWwnLFxyXG4gICAgICAgIGludGVyZXN0czogJ1NSNS5Lbm93bGVkZ2VTa2lsbEludGVyZXN0cycsXHJcbiAgICB9LFxyXG5cclxuICAgIGFjdGl2ZVNraWxsczoge1xyXG4gICAgICAgIGFyY2hlcnk6ICdTUjUuU2tpbGxBcmNoZXJ5JyxcclxuICAgICAgICBhdXRvbWF0aWNzOiAnU1I1LlNraWxsQXV0b21hdGljcycsXHJcbiAgICAgICAgYmxhZGVzOiAnU1I1LlNraWxsQmxhZGVzJyxcclxuICAgICAgICBjbHViczogJ1NSNS5Ta2lsbENsdWJzJyxcclxuICAgICAgICBleG90aWNfbWVsZWU6ICdTUjUuU2tpbGxFeG90aWNNZWxlZScsXHJcbiAgICAgICAgZXhvdGljX3JhbmdlOiAnU1I1LlNraWxsRXhvdGljUmFuZ2UnLFxyXG4gICAgICAgIGhlYXZ5X3dlYXBvbnM6ICdTUjUuU2tpbGxIZWF2eVdlYXBvbnMnLFxyXG4gICAgICAgIGxvbmdhcm1zOiAnU1I1LlNraWxsTG9uZ2FybXMnLFxyXG4gICAgICAgIHBpc3RvbHM6ICdTUjUuU2tpbGxQaXN0b2xzJyxcclxuICAgICAgICB0aHJvd2luZ193ZWFwb25zOiAnU1I1LlNraWxsVGhyb3dpbmdXZWFwb25zJyxcclxuICAgICAgICB1bmFybWVkX2NvbWJhdDogJ1NSNS5Ta2lsbFVuYXJtZWRDb21iYXQnLFxyXG4gICAgICAgIGRpc2d1aXNlOiAnU1I1LlNraWxsRGlzZ3Vpc2UnLFxyXG4gICAgICAgIGRpdmluZzogJ1NSNS5Ta2lsbERpdmluZycsXHJcbiAgICAgICAgZXNjYXBlX2FydGlzdDogJ1NSNS5Ta2lsbEVzY2FwZUFydGlzdCcsXHJcbiAgICAgICAgZnJlZV9mYWxsOiAnU1I1LlNraWxsRnJlZUZhbGwnLFxyXG4gICAgICAgIGd5bW5hc3RpY3M6ICdTUjUuU2tpbGxHeW1uYXN0aWNzJyxcclxuICAgICAgICBwYWxtaW5nOiAnU1I1LlNraWxsUGFsbWluZycsXHJcbiAgICAgICAgcGVyY2VwdGlvbjogJ1NSNS5Ta2lsbFBlcmNlcHRpb24nLFxyXG4gICAgICAgIHJ1bm5pbmc6ICdTUjUuU2tpbGxSdW5uaW5nJyxcclxuICAgICAgICBzbmVha2luZzogJ1NSNS5Ta2lsbFNuZWFraW5nJyxcclxuICAgICAgICBzdXJ2aXZhbDogJ1NSNS5Ta2lsbFN1cnZpdmFsJyxcclxuICAgICAgICBzd2ltbWluZzogJ1NSNS5Ta2lsbFN3aW1taW5nJyxcclxuICAgICAgICB0cmFja2luZzogJ1NSNS5Ta2lsbFRyYWNraW5nJyxcclxuICAgICAgICBjb246ICdTUjUuU2tpbGxDb24nLFxyXG4gICAgICAgIGV0aXF1ZXR0ZTogJ1NSNS5Ta2lsbEV0aXF1ZXR0ZScsXHJcbiAgICAgICAgaW1wZXJzb25hdGlvbjogJ1NSNS5Ta2lsbEltcGVyc29uYXRpb24nLFxyXG4gICAgICAgIGluc3RydWN0aW9uOiAnU1I1LlNraWxsSW5zdHJ1Y3Rpb24nLFxyXG4gICAgICAgIGludGltaWRhdGlvbjogJ1NSNS5Ta2lsbEludGltaWRhdGlvbicsXHJcbiAgICAgICAgbGVhZGVyc2hpcDogJ1NSNS5Ta2lsbExlYWRlcnNoaXAnLFxyXG4gICAgICAgIG5lZ290aWF0aW9uOiAnU1I1LlNraWxsTmVnb3RpYXRpb24nLFxyXG4gICAgICAgIHBlcmZvcm1hbmNlOiAnU1I1LlNraWxsUGVyZm9ybWFuY2UnLFxyXG4gICAgICAgIGFsY2hlbXk6ICdTUjUuU2tpbGxBbGNoZW15JyxcclxuICAgICAgICBhcmNhbmE6ICdTUjUuU2tpbGxBcmNhbmEnLFxyXG4gICAgICAgIGFydGlmaWNpbmc6ICdTUjUuU2tpbGxBcnRpZmljaW5nJyxcclxuICAgICAgICBhc3NlbnNpbmc6ICdTUjUuU2tpbGxBc3NlbnNpbmcnLFxyXG4gICAgICAgIGFzdHJhbF9jb21iYXQ6ICdTUjUuU2tpbGxBc3RyYWxDb21iYXQnLFxyXG4gICAgICAgIGJhbmlzaGluZzogJ1NSNS5Ta2lsbEJhbmlzaGluZycsXHJcbiAgICAgICAgYmluZGluZzogJ1NSNS5Ta2lsbEJpbmRpbmcnLFxyXG4gICAgICAgIGNvdW50ZXJzcGVsbGluZzogJ1NSNS5Ta2lsbENvdW50ZXJzcGVsbGluZycsXHJcbiAgICAgICAgZGlzZW5jaGFudGluZzogJ1NSNS5Ta2lsbERpc2VuY2hhbnRpbmcnLFxyXG4gICAgICAgIHJpdHVhbF9zcGVsbGNhc3Rpbmc6ICdTUjUuU2tpbGxSaXR1YWxTcGVsbGNhc3RpbmcnLFxyXG4gICAgICAgIHNwZWxsY2FzdGluZzogJ1NSNS5Ta2lsbFNwZWxsY2FzdGluZycsXHJcbiAgICAgICAgc3VtbW9uaW5nOiAnU1I1LlNraWxsU3VtbW9uaW5nJyxcclxuICAgICAgICBjb21waWxpbmc6ICdTUjUuU2tpbGxDb21waWxpbmcnLFxyXG4gICAgICAgIGRlY29tcGlsaW5nOiAnU1I1LlNraWxsRGVjb21waWxpbmcnLFxyXG4gICAgICAgIHJlZ2lzdGVyaW5nOiAnU1I1LlNraWxsUmVnaXN0ZXJpbmcnLFxyXG4gICAgICAgIGFlcm9uYXV0aWNzX21lY2hhbmljOiAnU1I1LlNraWxsQWVyb25hdXRpY3NNZWNoYW5pYycsXHJcbiAgICAgICAgYXV0b21vdGl2ZV9tZWNoYW5pYzogJ1NSNS5Ta2lsbEF1dG9tb3RpdmVNZWNoYW5pYycsXHJcbiAgICAgICAgaW5kdXN0cmlhbF9tZWNoYW5pYzogJ1NSNS5Ta2lsbEluZHVzdHJpYWxNZWNoYW5pYycsXHJcbiAgICAgICAgbmF1dGljYWxfbWVjaGFuaWM6ICdTUjUuU2tpbGxOYXV0aWNhbE1lY2hhbmljJyxcclxuICAgICAgICBhbmltYWxfaGFuZGxpbmc6ICdTUjUuU2tpbGxBbmltYWxIYW5kbGluZycsXHJcbiAgICAgICAgYXJtb3JlcjogJ1NSNS5Ta2lsbEFybW9yZXInLFxyXG4gICAgICAgIGFydGlzYW46ICdTUjUuU2tpbGxBcnRpc2FuJyxcclxuICAgICAgICBiaW90ZWNobm9sb2d5OiAnU1I1LlNraWxsQmlvdGVjaG5vbG9neScsXHJcbiAgICAgICAgY2hlbWlzdHJ5OiAnU1I1LlNraWxsQ2hlbWlzdHJ5JyxcclxuICAgICAgICBjb21wdXRlcjogJ1NSNS5Ta2lsbENvbXB1dGVyJyxcclxuICAgICAgICBjeWJlcmNvbWJhdDogJ1NSNS5Ta2lsbEN5YmVyY29tYmF0JyxcclxuICAgICAgICBjeWJlcnRlY2hub2xvZ3k6ICdTUjUuU2tpbGxDeWJlcnRlY2hub2xvZ3knLFxyXG4gICAgICAgIGRlbW9saXRpb25zOiAnU1I1LlNraWxsRGVtb2xpdGlvbnMnLFxyXG4gICAgICAgIGVsZWN0cm9uaWNfd2FyZmFyZTogJ1NSNS5Ta2lsbEVsZWN0cm9uaWNXYXJmYXJlJyxcclxuICAgICAgICBmaXJzdF9haWQ6ICdTUjUuU2tpbGxGaXJzdEFpZCcsXHJcbiAgICAgICAgZm9yZ2VyeTogJ1NSNS5Ta2lsbEZvcmdlcnknLFxyXG4gICAgICAgIGhhY2tpbmc6ICdTUjUuU2tpbGxIYWNraW5nJyxcclxuICAgICAgICBoYXJkd2FyZTogJ1NSNS5Ta2lsbEhhcmR3YXJlJyxcclxuICAgICAgICBsb2Nrc21pdGg6ICdTUjUuU2tpbGxMb2Nrc21pdGgnLFxyXG4gICAgICAgIG1lZGljaW5lOiAnU1I1LlNraWxsTWVkaWNpbmUnLFxyXG4gICAgICAgIG5hdmlnYXRpb246ICdTUjUuU2tpbGxOYXZpZ2F0aW9uJyxcclxuICAgICAgICBzb2Z0d2FyZTogJ1NSNS5Ta2lsbFNvZnR3YXJlJyxcclxuICAgICAgICBndW5uZXJ5OiAnU1I1LlNraWxsR3VubmVyeScsXHJcbiAgICAgICAgcGlsb3RfYWVyb3NwYWNlOiAnU1I1LlNraWxsUGlsb3RBZXJvc3BhY2UnLFxyXG4gICAgICAgIHBpbG90X2FpcmNyYWZ0OiAnU1I1LlNraWxsUGlsb3RBaXJjcmFmdCcsXHJcbiAgICAgICAgcGlsb3Rfd2Fsa2VyOiAnU1I1LlNraWxsUGlsb3RXYWxrZXInLFxyXG4gICAgICAgIHBpbG90X2dyb3VuZF9jcmFmdDogJ1NSNS5Ta2lsbFBpbG90R3JvdW5kQ3JhZnQnLFxyXG4gICAgICAgIHBpbG90X3dhdGVyX2NyYWZ0OiAnU1I1LlNraWxsUGlsb3RXYXRlckNyYWZ0JyxcclxuICAgICAgICBwaWxvdF9leG90aWNfdmVoaWNsZTogJ1NSNS5Ta2lsbFBpbG90RXhvdGljVmVoaWNsZScsXHJcbiAgICB9LFxyXG5cclxuICAgIGFjdGlvblR5cGVzOiB7XHJcbiAgICAgICAgbm9uZTogJ1NSNS5BY3Rpb25UeXBlTm9uZScsXHJcbiAgICAgICAgZnJlZTogJ1NSNS5BY3Rpb25UeXBlRnJlZScsXHJcbiAgICAgICAgc2ltcGxlOiAnU1I1LkFjdGlvblR5cGVTaW1wbGUnLFxyXG4gICAgICAgIGNvbXBsZXg6ICdTUjUuQWN0aW9uVHlwZUNvbXBsZXgnLFxyXG4gICAgICAgIHZhcmllczogJ1NSNS5BY3Rpb25UeXBlVmFyaWVzJyxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gVXNlIHdpdGhpbiBhY3Rpb24gZGFtYWdlIGNhbGN1bGF0aW9uIChiYXNlIDxvcGVyYXRvcj4gYXR0cmlidXRlKSA9PiB2YWx1ZVxyXG4gICAgYWN0aW9uRGFtYWdlRm9ybXVsYU9wZXJhdG9yczoge1xyXG4gICAgICAgIGFkZDogJysnLFxyXG4gICAgICAgIHN1YnRyYWN0OiAnLScsXHJcbiAgICAgICAgbXVsdGlwbHk6ICcqJyxcclxuICAgICAgICBkaXZpZGU6ICcvJ1xyXG4gICAgfSxcclxuXHJcbiAgICBtYXRyaXhBdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgYXR0YWNrOiAnU1I1Lk1hdHJpeEF0dHJBdHRhY2snLFxyXG4gICAgICAgIHNsZWF6ZTogJ1NSNS5NYXRyaXhBdHRyU2xlYXplJyxcclxuICAgICAgICBkYXRhX3Byb2Nlc3Npbmc6ICdTUjUuTWF0cml4QXR0ckRhdGFQcm9jJyxcclxuICAgICAgICBmaXJld2FsbDogJ1NSNS5NYXRyaXhBdHRyRmlyZXdhbGwnLFxyXG4gICAgfSxcclxuXHJcbiAgICBpbml0aWF0aXZlQ2F0ZWdvcmllczoge1xyXG4gICAgICAgIG1lYXRzcGFjZTogJ1NSNS5Jbml0Q2F0TWVhdHNwYWNlJyxcclxuICAgICAgICBhc3RyYWw6ICdTUjUuSW5pdENhdEFzdHJhbCcsXHJcbiAgICAgICAgbWF0cml4OiAnU1I1LkluaXRDYXRNYXRyaXgnLFxyXG4gICAgfSxcclxuXHJcbiAgICBtb2RpZmljYXRpb25UeXBlczoge1xyXG4gICAgICAgIHdlYXBvbjogJ1NSNS5XZWFwb24nLFxyXG4gICAgICAgIGFybW9yOiAnU1I1LkFybW9yJyxcclxuICAgIH0sXHJcblxyXG4gICAgbW91bnRQb2ludHM6IHtcclxuICAgICAgICBiYXJyZWw6ICdTUjUuQmFycmVsJyxcclxuICAgICAgICB1bmRlcl9iYXJyZWw6ICdTUjUuVW5kZXJCYXJyZWwnLFxyXG4gICAgICAgIHN0b2NrOiAnU1I1LlN0b2NrJyxcclxuICAgICAgICB0b3A6ICdTUjUuVG9wJyxcclxuICAgICAgICBzaWRlOiAnU1I1LlNpZGUnLFxyXG4gICAgICAgIGludGVybmFsOiAnU1I1LkludGVybmFsJyxcclxuICAgIH0sXHJcblxyXG4gICAgbGlmZXN0eWxlVHlwZXM6IHtcclxuICAgICAgICBzdHJlZXQ6ICdTUjUuTGlmZXN0eWxlU3RyZWV0JyxcclxuICAgICAgICBzcXVhdHRlcjogJ1NSNS5MaWZlc3R5bGVTcXVhdHRlcicsXHJcbiAgICAgICAgbG93OiAnU1I1LkxpZmVzdHlsZUxvdycsXHJcbiAgICAgICAgbWVkaXVtOiAnU1I1LkxpZmVzdHlsZU1pZGRsZScsXHJcbiAgICAgICAgaGlnaDogJ1NSNS5MaWZlc3R5bGVIaWdoJyxcclxuICAgICAgICBsdXhvcnk6ICdTUjUuTGlmZXN0eWxlTHV4b3J5JyxcclxuICAgICAgICBvdGhlcjogJ1NSNS5MaWZlc3R5bGVPdGhlcicsXHJcbiAgICB9LFxyXG5cclxuICAgIGtibW9kOiB7XHJcbiAgICAgICAgU1RBTkRBUkQ6ICdzaGlmdEtleScsXHJcbiAgICAgICAgRURHRTogJ2FsdEtleScsXHJcbiAgICAgICAgU1BFQzogJ2N0cmxLZXknLFxyXG4gICAgfSxcclxuXHJcbiAgICBhY3Rvck1vZGlmaWVyczoge1xyXG4gICAgICAgIHNvYWs6ICdTUjUuUm9sbFNvYWsnLFxyXG4gICAgICAgIGRyYWluOiAnU1I1LkRyYWluJyxcclxuICAgICAgICBhcm1vcjogJ1NSNS5Bcm1vcicsXHJcbiAgICAgICAgcGh5c2ljYWxfbGltaXQ6ICdTUjUuUGh5c2ljYWxMaW1pdCcsXHJcbiAgICAgICAgc29jaWFsX2xpbWl0OiAnU1I1LlNvY2lhbExpbWl0JyxcclxuICAgICAgICBtZW50YWxfbGltaXQ6ICdTUjUuTWVudGFsTGltaXQnLFxyXG4gICAgICAgIHN0dW5fdHJhY2s6ICdTUjUuU3R1blRyYWNrJyxcclxuICAgICAgICBwaHlzaWNhbF90cmFjazogJ1NSNS5QaHlzaWNhbFRyYWNrJyxcclxuICAgICAgICBtZWF0X2luaXRpYXRpdmU6ICdTUjUuTWVhdFNwYWNlSW5pdCcsXHJcbiAgICAgICAgbWVhdF9pbml0aWF0aXZlX2RpY2U6ICdTUjUuTWVhdFNwYWNlRGljZScsXHJcbiAgICAgICAgYXN0cmFsX2luaXRpYXRpdmU6ICdTUjUuQXN0cmFsSW5pdCcsXHJcbiAgICAgICAgYXN0cmFsX2luaXRpYXRpdmVfZGljZTogJ1NSNS5Bc3RyYWxEaWNlJyxcclxuICAgICAgICBtYXRyaXhfaW5pdGlhdGl2ZTogJ1NSNS5NYXRyaXhJbml0JyxcclxuICAgICAgICBtYXRyaXhfaW5pdGlhdGl2ZV9kaWNlOiAnU1I1Lk1hdHJpeERpY2UnLFxyXG4gICAgICAgIGNvbXBvc3VyZTogJ1NSNS5Sb2xsQ29tcG9zdXJlJyxcclxuICAgICAgICBsaWZ0X2NhcnJ5OiAnU1I1LlJvbGxMaWZ0Q2FycnknLFxyXG4gICAgICAgIGp1ZGdlX2ludGVudGlvbnM6ICdTUjUuUm9sbEp1ZGdlSW50ZW50aW9ucycsXHJcbiAgICAgICAgbWVtb3J5OiAnU1I1LlJvbGxNZW1vcnknLFxyXG4gICAgICAgIHdhbGs6ICdTUjUuV2FsaycsXHJcbiAgICAgICAgcnVuOiAnU1I1LlJ1bicsXHJcbiAgICAgICAgZGVmZW5zZTogJ1NSNS5Sb2xsRGVmZW5zZScsXHJcbiAgICAgICAgd291bmRfdG9sZXJhbmNlOiAnU1I1LldvdW5kVG9sZXJhbmNlJyxcclxuICAgICAgICBlc3NlbmNlOiAnU1I1LkF0dHJFc3NlbmNlJyxcclxuICAgICAgICBmYWRlOiAnU1I1LlJvbGxGYWRlJyxcclxuICAgICAgICBnbG9iYWw6ICdTUjUuR2xvYmFsJyxcclxuICAgIH0sXHJcblxyXG4gICAgcHJvZ3JhbVR5cGVzOiB7XHJcbiAgICAgICAgY29tbW9uX3Byb2dyYW06ICdTUjUuQ29tbW9uUHJvZ3JhbScsXHJcbiAgICAgICAgaGFja2luZ19wcm9ncmFtOiAnU1I1LkhhY2tpbmdQcm9ncmFtJyxcclxuICAgICAgICBhZ2VudDogJ1NSNS5BZ2VudCcsXHJcbiAgICB9LFxyXG5cclxuICAgIHNwaXJpdFR5cGVzOiB7XHJcbiAgICAgICAgLy8gYmFzZSB0eXBlc1xyXG4gICAgICAgIGFpcjogJ1NSNS5TcGlyaXQuVHlwZXMuQWlyJyxcclxuICAgICAgICBiZWFzdHM6ICdTUjUuU3Bpcml0LlR5cGVzLkJlYXN0cycsXHJcbiAgICAgICAgZWFydGg6ICdTUjUuU3Bpcml0LlR5cGVzLkVhcnRoJyxcclxuICAgICAgICBmaXJlOiAnU1I1LlNwaXJpdC5UeXBlcy5GaXJlJyxcclxuICAgICAgICBndWFyZGlhbjogJ1NSNS5TcGlyaXQuVHlwZXMuR3VhcmRpYW4nLFxyXG4gICAgICAgIGd1aWRhbmNlOiAnU1I1LlNwaXJpdC5UeXBlcy5HdWlkYW5jZScsXHJcbiAgICAgICAgbWFuOiAnU1I1LlNwaXJpdC5UeXBlcy5NYW4nLFxyXG4gICAgICAgIHBsYW50OiAnU1I1LlNwaXJpdC5UeXBlcy5QbGFudCcsXHJcbiAgICAgICAgdGFzazogJ1NSNS5TcGlyaXQuVHlwZXMuVGFzaycsXHJcbiAgICAgICAgd2F0ZXI6ICdTUjUuU3Bpcml0LlR5cGVzLldhdGVyJyxcclxuXHJcbiAgICAgICAgLy8gdG94aWMgdHlwZXNcclxuICAgICAgICB0b3hpY19haXI6ICdTUjUuU3Bpcml0LlR5cGVzLlRveGljQWlyJyxcclxuICAgICAgICB0b3hpY19iZWFzdHM6ICdTUjUuU3Bpcml0LlR5cGVzLlRveGljQmVhc3RzJyxcclxuICAgICAgICB0b3hpY19lYXJ0aDogJ1NSNS5TcGlyaXQuVHlwZXMuVG94aWNFYXJ0aCcsXHJcbiAgICAgICAgdG94aWNfZmlyZTogJ1NSNS5TcGlyaXQuVHlwZXMuVG94aWNGaXJlJyxcclxuICAgICAgICB0b3hpY19tYW46ICdTUjUuU3Bpcml0LlR5cGVzLlRveGljTWFuJyxcclxuICAgICAgICB0b3hpY193YXRlcjogJ1NSNS5TcGlyaXQuVHlwZXMuVG94aWNXYXRlcicsXHJcblxyXG4gICAgICAgIC8vIGJsb29kIHR5cGVzXHJcbiAgICAgICAgYmxvb2Q6ICdTUjUuU3Bpcml0LlR5cGVzLkJsb29kJyxcclxuXHJcbiAgICAgICAgLy8gc2hhZG93IHR5cGVzXHJcbiAgICAgICAgbXVzZTogJ1NSNS5TcGlyaXQuVHlwZXMuTXVzZScsXHJcbiAgICAgICAgbmlnaHRtYXJlOiAnU1I1LlNwaXJpdC5UeXBlcy5OaWdodG1hcmUnLFxyXG4gICAgICAgIHNoYWRlOiAnU1I1LlNwaXJpdC5UeXBlcy5TaGFkZScsXHJcbiAgICAgICAgc3VjY3VidXM6ICdTUjUuU3Bpcml0LlR5cGVzLlN1Y2N1YnVzJyxcclxuICAgICAgICB3cmFpdGg6ICdTUjUuU3Bpcml0LlR5cGVzLldyYWl0aCcsXHJcblxyXG4gICAgICAgIC8vIHNoZWRpbSB0eXBlc1xyXG4gICAgICAgIHNoZWRpbTogJ1NSNS5TcGlyaXQuVHlwZXMuU2hlZGltJyxcclxuICAgICAgICBtYXN0ZXJfc2hlZGltOiAnU1I1LlNwaXJpdC5UeXBlcy5NYXN0ZXJTaGVkaW0nLFxyXG5cclxuICAgICAgICAvLyBpbnNlY3QgdHlwZXNcclxuICAgICAgICBjYXJldGFrZXI6ICdTUjUuU3Bpcml0LlR5cGVzLkNhcmV0YWtlcicsXHJcbiAgICAgICAgbnltcGg6ICdTUjUuU3Bpcml0LlR5cGVzLk55bXBoJyxcclxuICAgICAgICBzY291dDogJ1NSNS5TcGlyaXQuVHlwZXMuU2NvdXQnLFxyXG4gICAgICAgIHNvbGRpZXI6ICdTUjUuU3Bpcml0LlR5cGVzLlNvbGRpZXInLFxyXG4gICAgICAgIHdvcmtlcjogJ1NSNS5TcGlyaXQuVHlwZXMuV29ya2VyJyxcclxuICAgICAgICBxdWVlbjogJ1NSNS5TcGlyaXQuVHlwZXMuUXVlZW4nLFxyXG4gICAgfSxcclxuXHJcbiAgICBjcml0dGVyUG93ZXI6IHtcclxuICAgICAgICBjYXRlZ29yaWVzOiB7XHJcbiAgICAgICAgICBtdW5kYW5lOiAnU1I1LkNyaXR0ZXJQb3dlci5DYXRlZ29yaWVzLk11bmRhbmUnLFxyXG4gICAgICAgICAgcGFyYW5vcm1hbDogJ1NSNS5Dcml0dGVyUG93ZXIuQ2F0ZWdvcmllcy5QYXJhbm9ybWFsJyxcclxuICAgICAgICAgIGZyZWVfc3Bpcml0OiAnU1I1LkNyaXR0ZXJQb3dlci5DYXRlZ29yaWVzLkZyZWVTcGlyaXQnLFxyXG4gICAgICAgICAgZW1lcmdlbnQ6ICdTUjUuQ3JpdHRlclBvd2VyLkNhdGVnb3JpZXMuRW1lcmdlbnQnLFxyXG4gICAgICAgICAgc2hhcGVzaGlmdGVyOiAnU1I1LkNyaXR0ZXJQb3dlci5DYXRlZ29yaWVzLlNoYXBlc2hpZnRlcicsXHJcbiAgICAgICAgICBkcmFrZTogJ1NSNS5Dcml0dGVyUG93ZXIuQ2F0ZWdvcmllcy5EcmFrZScsXHJcbiAgICAgICAgICBlY2hvZXM6ICdTUjUuQ3JpdHRlclBvd2VyLkNhdGVnb3JpZXMuRWNob2VzJyxcclxuICAgICAgICAgIHdlYWtuZXNzOiAnU1I1LkNyaXR0ZXJQb3dlci5DYXRlZ29yaWVzLldlYWtuZXNzJyxcclxuICAgICAgICAgIHBhcmFub3JtYWxfaW5mZWN0ZWQ6ICdTUjUuQ3JpdHRlclBvd2VyLkNhdGVnb3JpZXMuUGFyYW5vcm1hbEluZmVjdGVkJyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHR5cGVzOiB7XHJcbiAgICAgICAgICAgIG1hbmE6ICdTUjUuQ3JpdHRlclBvd2VyLlR5cGVzLk1hbmEnLFxyXG4gICAgICAgICAgICBwaHlzaWNhbDogJ1NSNS5Dcml0dGVyUG93ZXIuVHlwZXMuUGh5c2ljYWwnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmFuZ2VzOiB7XHJcbiAgICAgICAgICAgIGxvczogJ1NSNS5Dcml0dGVyUG93ZXIuUmFuZ2VzLkxpbmVPZlNpZ2h0JyxcclxuICAgICAgICAgICAgc2VsZjogJ1NSNS5Dcml0dGVyUG93ZXIuUmFuZ2VzLlNlbGYnLFxyXG4gICAgICAgICAgICB0b3VjaDogJ1NSNS5Dcml0dGVyUG93ZXIuUmFuZ2VzLlRvdWNoJyxcclxuICAgICAgICAgICAgbG9zX2E6ICdTUjUuQ3JpdHRlclBvd2VyLlJhbmdlcy5MaW5lT2ZTaWdodEFyZWEnLFxyXG4gICAgICAgICAgICBzcGVjaWFsOiAnU1I1LkNyaXR0ZXJQb3dlci5SYW5nZXMuU3BlY2lhbCcsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkdXJhdGlvbnM6IHtcclxuICAgICAgICAgICAgYWx3YXlzOiAnU1I1LkNyaXR0ZXJQb3dlci5EdXJhdGlvbnMuQWx3YXlzJyxcclxuICAgICAgICAgICAgaW5zdGFudDogJ1NSNS5Dcml0dGVyUG93ZXIuRHVyYXRpb25zLkluc3RhbnQnLFxyXG4gICAgICAgICAgICBzdXN0YWluZWQ6ICdTUjUuQ3JpdHRlclBvd2VyLkR1cmF0aW9ucy5TdXN0YWluZWQnLFxyXG4gICAgICAgICAgICBwZXJtYW5lbnQ6ICdTUjUuQ3JpdHRlclBvd2VyLkR1cmF0aW9ucy5QZXJtYW5lbnQnLFxyXG4gICAgICAgICAgICBzcGVjaWFsOiAnU1I1LkNyaXR0ZXJQb3dlci5EdXJhdGlvbnMuU3BlY2lhbCcsXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgc3ByaXRlVHlwZXM6IHtcclxuICAgICAgICBjb3VyaWVyOiAnU1I1LlNwcml0ZS5UeXBlcy5Db3VyaWVyJyxcclxuICAgICAgICBjcmFjazogJ1NSNS5TcHJpdGUuVHlwZXMuQ3JhY2snLFxyXG4gICAgICAgIGRhdGE6ICdTUjUuU3ByaXRlLlR5cGVzLkRhdGEnLFxyXG4gICAgICAgIGZhdWx0OiAnU1I1LlNwcml0ZS5UeXBlcy5GYXVsdCcsXHJcbiAgICAgICAgbWFjaGluZTogJ1NSNS5TcHJpdGUuVHlwZXMuTWFjaGluZScsXHJcbiAgICB9LFxyXG5cclxuICAgIHZlaGljbGU6IHtcclxuICAgICAgICB0eXBlczoge1xyXG4gICAgICAgICAgICBhaXI6ICdTUjUuVmVoaWNsZS5UeXBlcy5BaXInLFxyXG4gICAgICAgICAgICBhZXJvc3BhY2U6ICdTUjUuVmVoaWNsZS5UeXBlcy5BZXJvc3BhY2UnLFxyXG4gICAgICAgICAgICBncm91bmQ6ICdTUjUuVmVoaWNsZS5UeXBlcy5Hcm91bmQnLFxyXG4gICAgICAgICAgICB3YXRlcjogJ1NSNS5WZWhpY2xlLlR5cGVzLldhdGVyJyxcclxuICAgICAgICAgICAgd2Fsa2VyOiAnU1I1LlZlaGljbGUuVHlwZXMuV2Fsa2VyJyxcclxuICAgICAgICAgICAgZXhvdGljOiAnU1I1LlZlaGljbGUuVHlwZXMuRXhvdGljJyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN0YXRzOiB7XHJcbiAgICAgICAgICAgIGhhbmRsaW5nOiAnU1I1LlZlaGljbGUuU3RhdHMuSGFuZGxpbmcnLFxyXG4gICAgICAgICAgICBvZmZfcm9hZF9oYW5kbGluZzogJ1NSNS5WZWhpY2xlLlN0YXRzLk9mZlJvYWRIYW5kbGluZycsXHJcbiAgICAgICAgICAgIHNwZWVkOiAnU1I1LlZlaGljbGUuU3RhdHMuU3BlZWQnLFxyXG4gICAgICAgICAgICBvZmZfcm9hZF9zcGVlZDogJ1NSNS5WZWhpY2xlLlN0YXRzLk9mZlJvYWRTcGVlZCcsXHJcbiAgICAgICAgICAgIGFjY2VsZXJhdGlvbjogJ1NSNS5WZWhpY2xlLlN0YXRzLkFjY2VsZXJhdGlvbicsXHJcbiAgICAgICAgICAgIHBpbG90OiAnU1I1LlZlaGljbGUuU3RhdHMuUGlsb3QnLFxyXG4gICAgICAgICAgICBzZW5zb3I6ICdTUjUuVmVoaWNsZS5TdGF0cy5TZW5zb3InLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29udHJvbF9tb2Rlczoge1xyXG4gICAgICAgICAgICBtYW51YWw6ICdTUjUuVmVoaWNsZS5Db250cm9sTW9kZXMuTWFudWFsJyxcclxuICAgICAgICAgICAgcmVtb3RlOiAnU1I1LlZlaGljbGUuQ29udHJvbE1vZGVzLlJlbW90ZScsXHJcbiAgICAgICAgICAgIHJpZ2dlcjogJ1NSNS5WZWhpY2xlLkNvbnRyb2xNb2Rlcy5SaWdnZXInLFxyXG4gICAgICAgICAgICBhdXRvcGlsb3Q6ICdTUjUuVmVoaWNsZS5Db250cm9sTW9kZXMuQXV0b3BpbG90JyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudmlyb25tZW50czoge1xyXG4gICAgICAgICAgICBzcGVlZDogJ1NSNS5WZWhpY2xlLkVudmlyb25tZW50cy5TcGVlZCcsXHJcbiAgICAgICAgICAgIGhhbmRsaW5nOiAnU1I1LlZlaGljbGUuRW52aXJvbm1lbnRzLkhhbmRsaW5nJyxcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuXHJcbiAgICBjaGFyYWN0ZXI6IHtcclxuICAgICAgICB0eXBlczoge1xyXG4gICAgICAgICAgICBodW1hbjogJ1NSNS5DaGFyYWN0ZXIuVHlwZXMuSHVtYW4nLFxyXG4gICAgICAgICAgICBlbGY6ICdTUjUuQ2hhcmFjdGVyLlR5cGVzLkVsZicsXHJcbiAgICAgICAgICAgIG9yazogJ1NSNS5DaGFyYWN0ZXIuVHlwZXMuT3JrJyxcclxuICAgICAgICAgICAgZHdhcmY6ICdTUjUuQ2hhcmFjdGVyLlR5cGVzLkR3YXJmJyxcclxuICAgICAgICAgICAgdHJvbGw6ICdTUjUuQ2hhcmFjdGVyLlR5cGVzLlRyb2xsJyxcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxufTtcclxuIiwiLyoqXHJcbiAqIFRoZSBjb25zdGFudHMgZmlsZSBpcyBhIGJpdCBvZiBhIG1lc3Mgb2Ygc3R1ZmYgdGhhdCBkb2Vzbid0IGNoYW5nZSBhbmQgc29tZSBzaGFkb3dydW4gc3BlY2lmaWMgcnVsZSB2YWx1ZXMuXHJcbiAqIEV2ZXJ5dGhpbmcgc2hvdWxkIGJlIHJldXNlZCBieSBzb21lcGxhY2UgZWxzZS4gVHJ5IHRvIGF2b2lkIGFueSBtYWdpYyB2YWx1ZXMgd2l0aGluZyB5b3VyIGNvZGUuXHJcbiAqXHJcbiAqIFRoZSBTUiBvYmplY3QgY29udGFpbnMgaW5pdGlhbCB2YWx1ZXMgYW5kIGNvbnN0YW50cy4gQ29uc3RhbnRzIGFyZSB3cml0dGVuIGluIEFMTF9DQVBTX0NPTlNUQU5UUyBhbmQgc2hvdWxkIG5ldmVyIGJlXHJcbiAqIGNoYW5nZWQgZHVyaW5nIHJ1bnRpbWUuXHJcbiAqIFJlZ2FyZGluZyBTaGFkb3dydW4gbW9kaWZpZXIgdmFsdWVzOiBJZiB0aGUgcnVsZXMgZGVmaW5lIGEgbmVnYXRpdmUgbW9kaWZpZXIsIGRlY2xhcmUgaXQgaGVyZSBhcyBzdWNoLiBEb24ndCB1c2UgYSBwb3NpdGl2ZVxyXG4gKiBtb2RpZmllciBhbmQgc3VidHJhY3QgYXQgdGhlIHBsYWNlIG9mIHVzZS5cclxuICpcclxuICogT3RoZXIgdGhhbiB0aGlzIGZpbGUgY29uZmlnLnRzIGV4aXN0cyBhbmQgb25seSBjb250YWlucyBtYXBwaW5ncyBiZXR3ZWVuIGZpeGVkIG5hbWVzL2lkcyBhbmQgdHJhbnNsYXRpb24gbGFiZWxzLlxyXG4gKlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFNZU1RFTV9OQU1FID0gJ3NoYWRvd3J1bjVlJztcclxuZXhwb3J0IGNvbnN0IFNZU1RFTV9TT0NLRVQgPSBgc3lzdGVtLiR7U1lTVEVNX05BTUV9YDtcclxuZXhwb3J0IGNvbnN0IEZMQUdTID0ge1xyXG4gICAgU2hvd0dsaXRjaEFuaW1hdGlvbjogJ3Nob3dHbGl0Y2hBbmltYXRpb24nLFxyXG4gICAgU2hvd1Rva2VuTmFtZUZvckNoYXRPdXRwdXQ6ICdzaG93VG9rZW5OYW1lSW5zdGVhZE9mQWN0b3InLFxyXG4gICAgV2hpc3Blck9wcG9zZWRUZXN0c1RvVGFyZ2V0ZWRQbGF5ZXJzOiAnd2hpc3Blck9wcG9zZWRUZXN0c1RvVGFyZ2V0ZWRQbGF5ZXJzJyxcclxuICAgIE9ubHlBbGxvd1JvbGxPbkRlZmF1bHRhYmxlU2tpbGxzOiAnb25seUFsbG93Um9sbE9uRGVmYXVsdGFibGVTa2lsbHMnLFxyXG4gICAgU2hvd1NraWxsc1dpdGhEZXRhaWxzOiAnc2hvd1NraWxsc1dpdGhEZXRhaWxzJyxcclxuICAgIE9ubHlBdXRvUm9sbE5QQ0luQ29tYmF0OiAnb25seUF1dG9Sb2xsTlBDSW5Db21iYXQnLFxyXG4gICAgTWVzc2FnZUN1c3RvbVJvbGw6ICdjdXN0b21Sb2xsJyxcclxuICAgIEFwcGx5TGltaXRzOiAnYXBwbHlMaW1pdHMnLFxyXG4gICAgTGFzdFJvbGxQcm9tcHRWYWx1ZTogJ2xhc3RSb2xsUHJvbXB0VmFsdWUnLFxyXG4gICAgRGlzcGxheURlZmF1bHRSb2xsQ2FyZDogJ2Rpc3BsYXlEZWZhdWx0Um9sbENhcmQnLFxyXG4gICAgQ29tYmF0SW5pdGlhdGl2ZVBhc3M6ICdjb21iYXRJbml0aWF0aXZlUGFzcycsXHJcbiAgICBFbWJlZGRlZEl0ZW1zOiAnZW1iZWRkZWRJdGVtcycsXHJcbiAgICBMYXN0RmlyZU1vZGU6ICdsYXN0RmlyZU1vZGUnLFxyXG4gICAgTGFzdFNwZWxsRm9yY2U6ICdsYXN0U3BlbGxGb3JjZScsXHJcbiAgICBMYXN0Q29tcGxleEZvcm1MZXZlbDogJ2xhc3RDb21wbGV4Rm9ybUxldmVsJyxcclxuICAgIExhc3RGaXJlUmFuZ2U6ICdsYXN0RmlyZVJhbmdlJyxcclxuICAgIEF0dGFjazogJ2F0dGFjaycsXHJcbiAgICBSb2xsOiAncm9sbCcsXHJcbiAgICBUYXJnZXRzU2NlbmVUb2tlbklkczogJ3RhcmdldHNTY2VuZVRva2VuSWRzJyxcclxuICAgIENoYW5nZWxvZ1Nob3duRm9yVmVyc2lvbjogJ2NoYW5nZWxvZ1Nob3duRm9yVmVyc2lvbicsXHJcbiAgICBNb2RpZmllcjogJ21vZGlmaWVyJyxcclxuICAgIERvSW5pdFBhc3M6ICdkb0luaXRQYXNzJyxcclxuICAgIERvTmV4dFJvdW5kOiAnZG9OZXh0Um91bmQnLFxyXG59O1xyXG5leHBvcnQgY29uc3QgQ09SRV9OQU1FID0gJ2NvcmUnO1xyXG5leHBvcnQgY29uc3QgQ09SRV9GTEFHUyA9IHtcclxuICAgIFJvbGxNb2RlOiAncm9sbE1vZGUnXHJcbn1cclxuZXhwb3J0IGNvbnN0IE1FVEFUWVBFTU9ESUZJRVIgPSAnU1I1LkNoYXJhY3Rlci5Nb2RpZmllcnMuTlBDTWV0YXR5cGVBdHRyaWJ1dGUnO1xyXG5cclxuZXhwb3J0IGNvbnN0IExFTkdUSF9VTklUX1RPX01FVEVSU19NVUxUSVBMSUVSUyA9IHtcclxuICAgICdtJzogMSxcclxuICAgICdtZXRlcic6IDEsXHJcbiAgICAnbWV0ZXJzJzogMSxcclxuICAgICdrbSc6IDEwMDAsXHJcbiAgICAna2lsb21ldGVycyc6IDEwMDAsXHJcbiAgICAna2lsb21ldGVyJzogMTAwMCxcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1JPTExfTkFNRSA9ICdSb2xsJztcclxuZXhwb3J0IGNvbnN0IExFTkdUSF9VTklUID0gJ20nO1xyXG5leHBvcnQgY29uc3QgU0tJTExfREVGQVVMVF9OQU1FID0gJyc7XHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX0lEX0xFTkdUSCA9IDE2O1xyXG5cclxuLy8gQ29udGFpbiBkYXRhIHJlZ2FyZGluZyBzaGFkb3dydW4gcnVsZXMsIG1vc3RseSB3aGF0ZXZlciBpcyBzdGF0ZWQgaW4gc29tZSB0YWJsZSB0byBiZSBsb29rZWQgdXAgaW4gb3RoZXIgcGxhY2VzLlxyXG5leHBvcnQgY29uc3QgU1IgPSB7XHJcbiAgICBjb21iYXQ6IHtcclxuICAgICAgICBlbnZpcm9ubWVudGFsOiB7XHJcbiAgICAgICAgICAgIHJhbmdlX21vZGlmaWVyczoge1xyXG4gICAgICAgICAgICAgICAgc2hvcnQ6IDAsXHJcbiAgICAgICAgICAgICAgICBtZWRpdW06IC0xLFxyXG4gICAgICAgICAgICAgICAgbG9uZzogLTMsXHJcbiAgICAgICAgICAgICAgICBleHRyZW1lOiAtNixcclxuICAgICAgICAgICAgICAgIC8vIEEgbW9kaWZpZXIgb2YgemVybyB3aWxsIGFsbG93IGZvciB1c2Vycy9nbSB0byBzdGlsbCB0ZXN0IG9vciB0YXJnZXRzIHdpdGggdGhlaXIgb3duIGp1ZGdlbWVudC5cclxuICAgICAgICAgICAgICAgIG91dF9vZl9yYW5nZTogMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsZXZlbHM6IHtcclxuICAgICAgICAgICAgICAgIGdvb2Q6IDAsXHJcbiAgICAgICAgICAgICAgICBsaWdodDogLTEsXHJcbiAgICAgICAgICAgICAgICBtb2RlcmF0ZTogLTMsXHJcbiAgICAgICAgICAgICAgICBoZWF2eTogLTYsXHJcbiAgICAgICAgICAgICAgICBleHRyZW1lOiAtMTAsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBJTklfUkVTVUxUX01PRF9BRlRFUl9JTklfUEFTUzogLTEwLFxyXG4gICAgICAgIElOSVRJQUxfSU5JX1BBU1M6IDEsXHJcbiAgICAgICAgSU5JVElBTF9JTklfUk9VTkQ6IDFcclxuICAgIH0sXHJcbiAgICBkaWU6IHtcclxuICAgICAgICBnbGl0Y2g6IFsxXSxcclxuICAgICAgICBzdWNjZXNzOiBbNSwgNl1cclxuICAgIH0sXHJcbiAgICBkZWZlbnNlOiB7XHJcbiAgICAgICAgc3BlbGw6IHtcclxuICAgICAgICAgICAgZGlyZWN0OiB7XHJcbiAgICAgICAgICAgICAgICBtYW5hOiAnd2lsbHBvd2VyJyxcclxuICAgICAgICAgICAgICAgIHBoeXNpY2FsOiAnYm9keSdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgcmFuZ2VzOiB7XHJcbiAgICAgICAgICAgIG1hZ2ljOiB7bWluOiAwfSxcclxuICAgICAgICAgICAgZWRnZToge21pbjogMH0sXHJcbiAgICAgICAgICAgIHJlc29uYW5jZToge21pbjogMH0sXHJcbiAgICAgICAgICAgIGVzc2VuY2U6IHttaW46IDB9LFxyXG4gICAgICAgICAgICBib2R5OiB7bWluOiAxfSxcclxuICAgICAgICAgICAgYWdpbGl0eToge21pbjogMX0sXHJcbiAgICAgICAgICAgIHJlYWN0aW9uOiB7bWluOiAxfSxcclxuICAgICAgICAgICAgc3RyZW5ndGg6IHttaW46IDF9LFxyXG4gICAgICAgICAgICB3aWxscG93ZXI6IHttaW46IDF9LFxyXG4gICAgICAgICAgICBsb2dpYzoge21pbjogMX0sXHJcbiAgICAgICAgICAgIGludHVpdGlvbjoge21pbjogMX0sXHJcbiAgICAgICAgICAgIGNoYXJpc21hOiB7bWluOiAxfSxcclxuICAgICAgICAgICAgYXR0YWNrOiB7bWluOiAwfSxcclxuICAgICAgICAgICAgc2xlYXplOiB7bWluOiAwfSxcclxuICAgICAgICAgICAgZGF0YV9wcm9jZXNzaW5nOiB7bWluOiAwfSxcclxuICAgICAgICAgICAgZmlyZXdhbGw6IHttaW46IDB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBTSE9SVF9OQU1FX0xFTkdUSDogM1xyXG4gICAgfSxcclxuICAgIHNraWxsOiB7XHJcbiAgICAgICAgLy8gQFBERiBTUjUjMTMwXHJcbiAgICAgICAgREVGQVVMVElOR19NT0RJRklFUjogLTEsXHJcbiAgICAgICAgU1BFQ0lBTElaQVRJT05fTU9ESUZJRVI6IDJcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgRGFtYWdlRGF0YSA9IFNoYWRvd3J1bi5EYW1hZ2VEYXRhO1xyXG5pbXBvcnQgQWN0b3JBcm1vckRhdGEgPSBTaGFkb3dydW4uQWN0b3JBcm1vckRhdGE7XHJcbmltcG9ydCBUZWNobm9sb2d5RGF0YSA9IFNoYWRvd3J1bi5UZWNobm9sb2d5RGF0YTtcclxuaW1wb3J0IERlc2NyaXB0aW9uRGF0YSA9IFNoYWRvd3J1bi5EZXNjcmlwdGlvbkRhdGE7XHJcbmltcG9ydCBFcXVpcG1lbnREYXRhID0gU2hhZG93cnVuLkVxdWlwbWVudERhdGE7XHJcbmltcG9ydCBRdWFsaXR5RGF0YSA9IFNoYWRvd3J1bi5RdWFsaXR5RGF0YTtcclxuaW1wb3J0IEFjdGlvblJvbGxEYXRhID0gU2hhZG93cnVuLkFjdGlvblJvbGxEYXRhO1xyXG5pbXBvcnQgTGltaXREYXRhID0gU2hhZG93cnVuLkxpbWl0RGF0YTtcclxuaW1wb3J0IE9wcG9zZWRUZXN0RGF0YSA9IFNoYWRvd3J1bi5PcHBvc2VkVGVzdERhdGE7XHJcbmltcG9ydCBTa2lsbEZpZWxkID0gU2hhZG93cnVuLlNraWxsRmllbGQ7XHJcbmltcG9ydCB7U0tJTExfREVGQVVMVF9OQU1FfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcclxuXHJcbi8qKlxyXG4gKiBUT0RPOiBBZGQgdW5pdHRlc3RpbmcgdG8gRGVmYXVsdFZhbHVlcyBoZWxwZXIuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRGVmYXVsdFZhbHVlcyB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcGFydGlhbERhbWFnZURhdGEgZ2l2ZSBwYXJ0aWFsIERhbWFnZURhdGEgZmllbGRzIHRvIG92ZXJ3cml0ZSBkZWZhdWx0IHZhbHVlc1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZGFtYWdlRGF0YShwYXJ0aWFsRGFtYWdlRGF0YTogUGFydGlhbDxEYW1hZ2VEYXRhPiA9IHt9KTogRGFtYWdlRGF0YSB7XHJcbiAgICAgICAgcmV0dXJuIG1lcmdlT2JqZWN0KHtcclxuICAgICAgICAgICAgdHlwZToge1xyXG4gICAgICAgICAgICAgICAgYmFzZTogJ3BoeXNpY2FsJyxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiAncGh5c2ljYWwnLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbGVtZW50OiB7XHJcbiAgICAgICAgICAgICAgICBiYXNlOiAnJyxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiAnJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYmFzZTogMCxcclxuICAgICAgICAgICAgdmFsdWU6IDAsXHJcbiAgICAgICAgICAgIGFwOiB7XHJcbiAgICAgICAgICAgICAgICBiYXNlOiAwLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IDAsXHJcbiAgICAgICAgICAgICAgICBtb2Q6IFtdLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhdHRyaWJ1dGU6ICcnLFxyXG4gICAgICAgICAgICBtb2Q6IFtdLFxyXG4gICAgICAgICAgICBiYXNlX2Zvcm11bGFfb3BlcmF0b3I6ICdhZGQnXHJcbiAgICAgICAgfSwgcGFydGlhbERhbWFnZURhdGEpIGFzIERhbWFnZURhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFjdG9yQXJtb3JEYXRhKHBhcnRpYWxBY3RvckFybW9yRGF0YTogUGFydGlhbDxBY3RvckFybW9yRGF0YT4gPSB7fSk6IEFjdG9yQXJtb3JEYXRhIHtcclxuICAgICAgICByZXR1cm4gbWVyZ2VPYmplY3Qoe1xyXG4gICAgICAgICAgICB2YWx1ZTogMCxcclxuICAgICAgICAgICAgbW9kOiBbXSxcclxuICAgICAgICAgICAgYmFzZTogMCxcclxuICAgICAgICAgICAgbGFiZWw6ICcnLFxyXG4gICAgICAgIH0sIHBhcnRpYWxBY3RvckFybW9yRGF0YSkgYXMgQWN0b3JBcm1vckRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGVxdWlwbWVudERhdGEocGFydGlhbEVxdWlwbWVudERhdGE6IFBhcnRpYWw8RXF1aXBtZW50RGF0YT4gPSB7fSk6IEVxdWlwbWVudERhdGEge1xyXG4gICAgICAgIHJldHVybiBtZXJnZU9iamVjdCh7XHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uRGF0YSgpLFxyXG4gICAgICAgICAgICB0ZWNobm9sb2d5OiB0aGlzLnRlY2hub2xvZ3lEYXRhKCksXHJcbiAgICAgICAgfSwgcGFydGlhbEVxdWlwbWVudERhdGEpIGFzIEVxdWlwbWVudERhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHF1YWxpdHlEYXRhKHBhcnRpYWxRdWFsaXR5RGF0YTogUGFydGlhbDxRdWFsaXR5RGF0YT4gPSB7fSk6IFF1YWxpdHlEYXRhIHtcclxuICAgICAgICByZXR1cm4gbWVyZ2VPYmplY3Qoe1xyXG4gICAgICAgICAgICB0eXBlOiAnJyxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb25EYXRhKCksXHJcbiAgICAgICAgICAgIGFjdGlvbjogdGhpcy5hY3Rpb25Sb2xsRGF0YSgpLFxyXG4gICAgICAgIH0sIHBhcnRpYWxRdWFsaXR5RGF0YSkgYXMgUXVhbGl0eURhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHRlY2hub2xvZ3lEYXRhKHBhcnRpYWxUZWNobm9sb2d5RGF0YTogUGFydGlhbDxUZWNobm9sb2d5RGF0YT4gPSB7fSk6IFRlY2hub2xvZ3lEYXRhIHtcclxuICAgICAgICByZXR1cm4gbWVyZ2VPYmplY3Qoe1xyXG4gICAgICAgICAgICByYXRpbmc6ICcnLFxyXG4gICAgICAgICAgICBhdmFpbGFiaWxpdHk6ICcnLFxyXG4gICAgICAgICAgICBxdWFudGl0eTogMSxcclxuICAgICAgICAgICAgY29zdDogMCxcclxuICAgICAgICAgICAgZXF1aXBwZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBjb25jZWFsOiB7XHJcbiAgICAgICAgICAgICAgICBiYXNlOiAwLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IDAsXHJcbiAgICAgICAgICAgICAgICBtb2Q6IFtdLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb25kaXRpb25fbW9uaXRvcjoge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6ICcnLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IDAsXHJcbiAgICAgICAgICAgICAgICBtYXg6IDAsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBwYXJ0aWFsVGVjaG5vbG9neURhdGEpIGFzIFRlY2hub2xvZ3lEYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBkZXNjcmlwdGlvbkRhdGEocGFydGlhbERlc2NyaXB0aW9uRGF0YTogUGFydGlhbDxEZXNjcmlwdGlvbkRhdGE+ID0ge30pOiBEZXNjcmlwdGlvbkRhdGEge1xyXG4gICAgICAgIHJldHVybiBtZXJnZU9iamVjdCh7XHJcbiAgICAgICAgICAgIHZhbHVlOiAnJyxcclxuICAgICAgICAgICAgY2hhdDogJycsXHJcbiAgICAgICAgICAgIHNvdXJjZTogJydcclxuICAgICAgICB9LCBwYXJ0aWFsRGVzY3JpcHRpb25EYXRhKSBhcyBEZXNjcmlwdGlvbkRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFjdGlvblJvbGxEYXRhKHBhcnRpYWxBY3Rpb25Sb2xsRGF0YTogUGFydGlhbDxBY3Rpb25Sb2xsRGF0YT4gPSB7fSk6IEFjdGlvblJvbGxEYXRhIHtcclxuICAgICAgICByZXR1cm4gbWVyZ2VPYmplY3Qoe1xyXG4gICAgICAgICAgICB0eXBlOiAnJyxcclxuICAgICAgICAgICAgY2F0ZWdvcnk6ICcnLFxyXG4gICAgICAgICAgICBhdHRyaWJ1dGU6ICcnLFxyXG4gICAgICAgICAgICBhdHRyaWJ1dGUyOiAnJyxcclxuICAgICAgICAgICAgc2tpbGw6ICcnLFxyXG4gICAgICAgICAgICBzcGVjOiBmYWxzZSxcclxuICAgICAgICAgICAgbW9kOiAwLFxyXG4gICAgICAgICAgICBtb2RfZGVzY3JpcHRpb246ICcnLFxyXG4gICAgICAgICAgICBsaW1pdDogdGhpcy5saW1pdERhdGEoKSxcclxuICAgICAgICAgICAgZXh0ZW5kZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBkYW1hZ2U6IHRoaXMuZGFtYWdlRGF0YSgpLFxyXG4gICAgICAgICAgICBvcHBvc2VkOiB0aGlzLm9wcG9zZWRUZXN0RGF0YSgpLFxyXG4gICAgICAgICAgICBhbHRfbW9kOiAwLFxyXG4gICAgICAgICAgICBkaWNlX3Bvb2xfbW9kOiBbXVxyXG4gICAgICAgIH0sIHBhcnRpYWxBY3Rpb25Sb2xsRGF0YSkgYXMgQWN0aW9uUm9sbERhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGxpbWl0RGF0YShwYXJ0aWFsTGltaXREYXRhOiBQYXJ0aWFsPExpbWl0RGF0YT4gPSB7fSk6IExpbWl0RGF0YSB7XHJcbiAgICAgICAgcmV0dXJuIG1lcmdlT2JqZWN0KHtcclxuICAgICAgICAgICAgdmFsdWU6IDAsXHJcbiAgICAgICAgICAgIGJhc2U6IDAsXHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZTogJycsXHJcbiAgICAgICAgICAgIG1vZDogW11cclxuICAgICAgICB9LCBwYXJ0aWFsTGltaXREYXRhKSBhcyBMaW1pdERhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIG9wcG9zZWRUZXN0RGF0YShwYXJ0aWFsT3Bwb3NlZFRlc3REYXRhOiBQYXJ0aWFsPE9wcG9zZWRUZXN0RGF0YT4gPSB7fSk6IE9wcG9zZWRUZXN0RGF0YSB7XHJcbiAgICAgICAgcmV0dXJuIG1lcmdlT2JqZWN0KHtcclxuICAgICAgICAgICAgdHlwZTogJycsXHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZTogJycsXHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZTI6ICcnLFxyXG4gICAgICAgICAgICBza2lsbDogJycsXHJcbiAgICAgICAgICAgIG1vZDogMCxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICcnXHJcbiAgICAgICAgfSwgcGFydGlhbE9wcG9zZWRUZXN0RGF0YSkgYXMgT3Bwb3NlZFRlc3REYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBza2lsbERhdGEocGFydGlhbFNraWxsRGF0YTogUGFydGlhbDxTa2lsbEZpZWxkPiA9IHt9KTogU2tpbGxGaWVsZCB7XHJcbiAgICAgICAgcmV0dXJuIG1lcmdlT2JqZWN0KHtcclxuICAgICAgICAgICAgbmFtZTogU0tJTExfREVGQVVMVF9OQU1FLFxyXG4gICAgICAgICAgICBiYXNlOiAwLFxyXG4gICAgICAgICAgICB2YWx1ZTogMCxcclxuICAgICAgICAgICAgaGlkZGVuOiBmYWxzZSxcclxuICAgICAgICAgICAgY2FuRGVmYXVsdDogZmFsc2UsXHJcbiAgICAgICAgICAgIGxhYmVsOiAnJyxcclxuICAgICAgICAgICAgYm9udXM6IFtdLFxyXG4gICAgICAgICAgICBzcGVjczogW10sXHJcbiAgICAgICAgICAgIG1vZDogW10sXHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZTogJydcclxuICAgICAgICB9LCBwYXJ0aWFsU2tpbGxEYXRhKSBhcyBTa2lsbEZpZWxkO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBUT0RPOiBNb3ZlIHRoZXNlIGludG8gRGVmYXVsdFZhbHVlcyBpbXBsZW1lbnRhdGlvbnMuXHJcbmV4cG9ydCBjb25zdCBEYXRhVGVtcGxhdGVzID0ge1xyXG4gICAgZ3J1bnQ6IHtcclxuICAgICAgICBtZXRhdHlwZV9tb2RpZmllcnM6IHtcclxuICAgICAgICAgICAgZWxmOiB7XHJcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWdpbGl0eTogKzEsXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhcmlzbWE6ICsyLFxyXG4gICAgICAgICAgICAgICAgICAgIGVkZ2U6IC0xXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9yazoge1xyXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6ICszLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cmVuZ3RoOiArMixcclxuICAgICAgICAgICAgICAgICAgICBsb2dpYzogLTEsXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhcmlzbWE6IC0xLFxyXG4gICAgICAgICAgICAgICAgICAgIGVkZ2U6IC0xXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRyb2xsOiB7XHJcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9keTogKzQsXHJcbiAgICAgICAgICAgICAgICAgICAgYWdpbGl0eTogLTEsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RyZW5ndGg6ICs0LFxyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2ljOiAtMSxcclxuICAgICAgICAgICAgICAgICAgICBpbnR1aXRpb246IC0xLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYXJpc21hOiAtMixcclxuICAgICAgICAgICAgICAgICAgICBlZGdlOiAtMSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBnZW5lcmFsOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJtb3I6ICsxXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGR3YXJmOiB7XHJcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9keTogKzIsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhY3Rpb246IC0xLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cmVuZ3RoOiArMixcclxuICAgICAgICAgICAgICAgICAgICB3aWxscG93ZXI6ICsxLFxyXG4gICAgICAgICAgICAgICAgICAgIGVkZ2U6IC0xXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgZGFtYWdlOiBEZWZhdWx0VmFsdWVzLmRhbWFnZURhdGEoe3R5cGU6IHtiYXNlOiAnJywgdmFsdWU6ICcnfX0pLFxyXG59IiwiZXhwb3J0IGFic3RyYWN0IGNsYXNzIERhdGFXcmFwcGVyPERhdGFUeXBlPiB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgZGF0YTogRGF0YVR5cGUpIHt9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IHJlZ2lzdGVyQXBwSGVscGVycyA9ICgpID0+IHtcclxuICAgIC8vIFRPRE86IEFkZCBtb2RpZmllcnMuZW52IHR5cGluZyBhbmQgYWRkIG1pc3NpbmcgdHlwZVxyXG4gICAgLyoqIERldGVybWluZSBpZiBhIGVudmlyb25tZW50YWwgbW9kaWZpZXIgb2YgYSBzcGVjaWZpYyBjYXRlZ29yeSBpcyBhY3RpdmVcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYWN0aXZlXHJcbiAgICAgKiBAcGFyYW0gY2F0ZWdvcnkgQSBlbnZpcm9ubWVudCBtb2RpZmllciBjYXRlZ29yeSAod2luZCwgcmFuZ2UsIC4uLilcclxuICAgICAqIEBwYXJhbSBtb2RpZmllciBBIGVudmlyb25tZW50YWwgbW9kaWZpZXIgdmFsdWUgKDAsIC0xKVxyXG4gICAgICovXHJcbiAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdJc0Vudk1vZGlmaWVyQWN0aXZlJywgKGFjdGl2ZSwgY2F0ZWdvcnk6IHN0cmluZywgbW9kaWZpZXI6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIHJldHVybiBhY3RpdmVbY2F0ZWdvcnldID09PSBtb2RpZmllcjtcclxuICAgIH0pXHJcbn0iLCJpbXBvcnQgeyBIZWxwZXJzIH0gZnJvbSAnLi4vaGVscGVycyc7XHJcbmltcG9ydCB7U2FmZVN0cmluZ30gZnJvbSBcImhhbmRsZWJhcnNcIjtcclxuaW1wb3J0IFNraWxsRmllbGQgPSBTaGFkb3dydW4uU2tpbGxGaWVsZDtcclxuaW1wb3J0IHtTUjV9IGZyb20gXCIuLi9jb25maWdcIjtcclxuaW1wb3J0IHtGTEFHUywgU1IsIFNZU1RFTV9OQU1FfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJCYXNpY0hlbHBlcnMgPSAoKSA9PiB7XHJcbiAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdsb2NhbGl6ZU9iJywgZnVuY3Rpb24gKHN0cklkLCBvYmopIHtcclxuICAgICAgICBpZiAob2JqKSBzdHJJZCA9IG9ialtzdHJJZF07XHJcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZShzdHJJZCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdsb2NhbGl6ZVNraWxsJywgZnVuY3Rpb24gKHNraWxsOiBTa2lsbEZpZWxkKTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCB0cmFuc2xhdGVkU2tpbGwgPSBza2lsbC5sYWJlbCA/IGdhbWUuaTE4bi5sb2NhbGl6ZShza2lsbC5sYWJlbCkgOiBza2lsbC5uYW1lO1xyXG4gICAgICAgIGlmICghZ2FtZS5zZXR0aW5ncy5nZXQoU1lTVEVNX05BTUUsIEZMQUdTLlNob3dTa2lsbHNXaXRoRGV0YWlscykgfHwgIXRyYW5zbGF0ZWRTa2lsbCB8fCAhc2tpbGwuYXR0cmlidXRlKVxyXG4gICAgICAgICAgICByZXR1cm4gdHJhbnNsYXRlZFNraWxsO1xyXG5cclxuICAgICAgICAvLyBUcnkgc2hvd2luZyB0aGUgZmlyc3QgdGhyZWUgbGV0dGVycywgb3IgbGVzcy5cclxuICAgICAgICBjb25zdCB0cmFuc2xhdGVkQXR0cmlidXRlID0gZ2FtZS5pMThuLmxvY2FsaXplKFNSNS5hdHRyaWJ1dGVzW3NraWxsLmF0dHJpYnV0ZV0pO1xyXG4gICAgICAgIGlmICghdHJhbnNsYXRlZEF0dHJpYnV0ZSkgcmV0dXJuIHRyYW5zbGF0ZWRTa2lsbDtcclxuXHJcbiAgICAgICAgY29uc3QgY3V0VG9JbmRleCA9IHRyYW5zbGF0ZWRBdHRyaWJ1dGUubGVuZ3RoIDwgU1IuYXR0cmlidXRlcy5TSE9SVF9OQU1FX0xFTkdUSCA/XHJcbiAgICAgICAgICAgIHRyYW5zbGF0ZWRBdHRyaWJ1dGUubGVuZ3RoIC0xIDpcclxuICAgICAgICAgICAgU1IuYXR0cmlidXRlcy5TSE9SVF9OQU1FX0xFTkdUSDtcclxuICAgICAgICBjb25zdCB0cmFuc2xhdGVkQXR0cmlidXRlU2hvcnRoYW5kID0gdHJhbnNsYXRlZEF0dHJpYnV0ZS5zdWJzdHJpbmcoMCwgY3V0VG9JbmRleCkudG9VcHBlckNhc2UoKTtcclxuICAgICAgICByZXR1cm4gYCR7dHJhbnNsYXRlZFNraWxsfSAoJHt0cmFuc2xhdGVkQXR0cmlidXRlU2hvcnRoYW5kfSlgO1xyXG4gICAgfSk7XHJcblxyXG4gICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigndG9IZWFkZXJDYXNlJywgZnVuY3Rpb24gKHN0cikge1xyXG4gICAgICAgIGlmIChzdHIpIHJldHVybiBIZWxwZXJzLmxhYmVsKHN0cik7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfSk7XHJcblxyXG4gICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignY29uY2F0U3RyaW5ncycsIGZ1bmN0aW9uICguLi5hcmdzKSB7XHJcbiAgICAgICAgcmV0dXJuIGFyZ3MuZmlsdGVyKGEgPT4gdHlwZW9mIGEgPT09ICdzdHJpbmcnKS5qb2luKCcnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2NvbmNhdCcsIGZ1bmN0aW9uIChzdHJzLCBjID0gJywnKSB7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc3RycykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cnMuam9pbihjKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN0cnM7XHJcbiAgICB9KTtcclxuXHJcbiAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdmb3InLCBmdW5jdGlvbiAoZnJvbTogbnVtYmVyLCB0bzogbnVtYmVyLCBvcHRpb25zKSB7XHJcbiAgICAgICAgbGV0IGFjY3VtID0gJyc7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IGZyb207IGkgPCB0bzsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgIGFjY3VtICs9IG9wdGlvbnMuZm4oaSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYWNjdW07XHJcbiAgICB9KTtcclxuICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ21vZHVsbycsIGZ1bmN0aW9uICh2MTogbnVtYmVyLCB2MjogbnVtYmVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHYxICUgdjI7XHJcbiAgICB9KTtcclxuICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2RpdmlkZScsIGZ1bmN0aW9uICh2MTogbnVtYmVyLCB2MjogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKHYyID09PSAwKSByZXR1cm4gMDtcclxuICAgICAgICByZXR1cm4gdjEgLyB2MjtcclxuICAgIH0pO1xyXG4gICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignaGFzcHJvcCcsIGZ1bmN0aW9uIChvYmosIHByb3AsIG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvcHRpb25zLmZuKHRoaXMpO1xyXG4gICAgICAgIH0gZWxzZSByZXR1cm4gb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG4gICAgfSk7XHJcbiAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdpZmluJywgZnVuY3Rpb24gKHZhbCwgYXJyLCBvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKGFyci5pbmNsdWRlcyh2YWwpKSByZXR1cm4gb3B0aW9ucy5mbih0aGlzKTtcclxuICAgICAgICBlbHNlIHJldHVybiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcbiAgICB9KTtcclxuICAgIC8vIGlmIGdyZWF0ZXIgdGhhblxyXG4gICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignaWZndCcsIGZ1bmN0aW9uICh2MSwgdjIsIG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAodjEgPiB2MikgcmV0dXJuIG9wdGlvbnMuZm4odGhpcyk7XHJcbiAgICAgICAgZWxzZSByZXR1cm4gb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG4gICAgfSk7XHJcbiAgICAvLyBpZiBsZXNzIHRoYW5cclxuICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2lmbHQnLCBmdW5jdGlvbiAodjEsIHYyLCBvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKHYxIDwgdjIpIHJldHVybiBvcHRpb25zLmZuKHRoaXMpO1xyXG4gICAgICAgIGVsc2UgcmV0dXJuIG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuICAgIH0pO1xyXG4gICAgLy8gaWYgbGVzcyB0aGFuIG9yIGVxdWFsXHJcbiAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdpZmx0ZScsIGZ1bmN0aW9uICh2MSwgdjIsIG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAodjEgPD0gdjIpIHJldHVybiBvcHRpb25zLmZuKHRoaXMpO1xyXG4gICAgICAgIGVsc2UgcmV0dXJuIG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuICAgIH0pO1xyXG4gICAgLy8gaWYgbm90IGVxdWFsXHJcbiAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdpZm5lJywgZnVuY3Rpb24gKHYxLCB2Miwgb3B0aW9ucykge1xyXG4gICAgICAgIGlmICh2MSAhPT0gdjIpIHJldHVybiBvcHRpb25zLmZuKHRoaXMpO1xyXG4gICAgICAgIGVsc2UgcmV0dXJuIG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuICAgIH0pO1xyXG4gICAgLy8gaWYgZXF1YWxcclxuICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2lmZScsIGZ1bmN0aW9uICh2MSwgdjIsIG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAodjEgPT09IHYyKSByZXR1cm4gb3B0aW9ucy5mbih0aGlzKTtcclxuICAgICAgICBlbHNlIHJldHVybiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcbiAgICB9KTtcclxuICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ25vdCcsIGZ1bmN0aW9uICh2MSkge1xyXG4gICAgICAgIHJldHVybiAhdjE7XHJcbiAgICB9KTtcclxuICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3N1bScsIGZ1bmN0aW9uICh2MSwgdjIpIHtcclxuICAgICAgICByZXR1cm4gdjEgKyB2MjtcclxuICAgIH0pO1xyXG5cclxuICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2lzRGVmaW5lZCcsIGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBudWxsO1xyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiBhIGRlZmF1bHQgdmFsdWUgaWYgdGhlIHByb3ZpZGVkIHZhbHVlIGlzIG5vdCBkZWZpbmVkIChudWxsIG9yIHVuZGVmaW5lZClcclxuICAgICAqL1xyXG4gICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignZGVmYXVsdCcsIGZ1bmN0aW9uICh2YWx1ZTogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiBuZXcgSGFuZGxlYmFycy5TYWZlU3RyaW5nKHZhbHVlID8/IGRlZmF1bHRWYWx1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdsb2cnLCBmdW5jdGlvbiAodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHZhbHVlKTtcclxuICAgIH0pO1xyXG4gICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignYnVpbGROYW1lJywgZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBoYXNoOiBzdHJpbmdbXSA9IEhlbHBlcnMub3JkZXJLZXlzKG9wdGlvbnMuaGFzaCk7XHJcbiAgICAgICAgY29uc3QgbmFtZSA9IE9iamVjdC52YWx1ZXMoaGFzaCkucmVkdWNlKChyZXRWYWwsIGN1cnJlbnQsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA+IDApIHJldFZhbCArPSAnLic7XHJcbiAgICAgICAgICAgIHJldHVybiByZXRWYWwgKyBjdXJyZW50O1xyXG4gICAgICAgIH0sICcnKTtcclxuICAgICAgICByZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhuYW1lKTtcclxuICAgIH0pO1xyXG4gICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignZGlzYWJsZWRIZWxwZXInLCBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICBjb25zdCB2YWwgPSBCb29sZWFuKHZhbHVlKTtcclxuICAgICAgICByZXR1cm4gdmFsID8gdmFsIDogdW5kZWZpbmVkO1xyXG4gICAgfSk7XHJcbiAgICAvLyBUT0RPOiBUaGlzIGhlbHBlciBkb2Vzbid0IHdvcmsuLi4gRG9uJ3Qgd2h5LCBidXQgaXQgZG9lc24ndC5cclxuICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2xvY2FsaXplU2hvcnRlbmVkJywgZnVuY3Rpb24gKGxhYmVsOiBzdHJpbmcsIGxlbmd0aDogbnVtYmVyLCBvcHRpb25zOiBhbnkpOiBTYWZlU3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhIZWxwZXJzLnNob3J0ZW5BdHRyaWJ1dGVMb2NhbGl6YXRpb24obGFiZWwsIGxlbmd0aCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbiIsImltcG9ydCB7IHByZWxvYWRIYW5kbGViYXJzVGVtcGxhdGVzIH0gZnJvbSAnLi9IYW5kbGViYXJUZW1wbGF0ZXMnO1xyXG5pbXBvcnQgeyByZWdpc3RlckJhc2ljSGVscGVycyB9IGZyb20gJy4vQmFzaWNIZWxwZXJzJztcclxuaW1wb3J0IHsgcmVnaXN0ZXJSb2xsQW5kTGFiZWxIZWxwZXJzIH0gZnJvbSAnLi9Sb2xsQW5kTGFiZWxIZWxwZXJzJztcclxuaW1wb3J0IHsgcmVnaXN0ZXJJdGVtTGluZUhlbHBlcnMgfSBmcm9tICcuL0l0ZW1MaW5lSGVscGVycyc7XHJcbmltcG9ydCB7IHJlZ2lzdGVyU2tpbGxMaW5lSGVscGVycyB9IGZyb20gJy4vU2tpbGxMaW5lSGVscGVycyc7XHJcbmltcG9ydCB7cmVnaXN0ZXJBcHBIZWxwZXJzfSBmcm9tIFwiLi9BcHBIZWxwZXJzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSGFuZGxlYmFyTWFuYWdlciB7XHJcbiAgICBzdGF0aWMgYXN5bmMgbG9hZFRlbXBsYXRlcygpIHtcclxuICAgICAgICBhd2FpdCBwcmVsb2FkSGFuZGxlYmFyc1RlbXBsYXRlcygpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIHJlZ2lzdGVySGVscGVycygpOiB2b2lkIHtcclxuICAgICAgICByZWdpc3RlckJhc2ljSGVscGVycygpO1xyXG4gICAgICAgIHJlZ2lzdGVyUm9sbEFuZExhYmVsSGVscGVycygpO1xyXG4gICAgICAgIHJlZ2lzdGVySXRlbUxpbmVIZWxwZXJzKCk7XHJcbiAgICAgICAgcmVnaXN0ZXJTa2lsbExpbmVIZWxwZXJzKCk7XHJcbiAgICAgICAgcmVnaXN0ZXJBcHBIZWxwZXJzKCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY29uc3QgcHJlbG9hZEhhbmRsZWJhcnNUZW1wbGF0ZXMgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCB0ZW1wbGF0ZVBhdGhzID0gW1xyXG4gICAgICAgIC8vIGFjdG9yIHRhYnNcclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9hY3Rvci90YWJzL0FjdGlvbnNUYWIuaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvYWN0b3IvdGFicy9CaW9UYWIuaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvYWN0b3IvdGFicy9HZWFyVGFiLmh0bWwnLFxyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2FjdG9yL3RhYnMvTWFnaWNUYWIuaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvYWN0b3IvdGFicy9NYXRyaXhUYWIuaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvYWN0b3IvdGFicy9NaXNjVGFiLmh0bWwnLFxyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2FjdG9yL3RhYnMvU2tpbGxzVGFiLmh0bWwnLFxyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2FjdG9yL3RhYnMvU29jaWFsVGFiLmh0bWwnLFxyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2FjdG9yL3RhYnMvU3BlbGxzVGFiLmh0bWwnLFxyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2FjdG9yL3RhYnMvQ3JpdHRlclBvd2Vyc1RhYi5odG1sJyxcclxuXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvYWN0b3IvdGFicy9zcGlyaXQvU3Bpcml0U2tpbGxzVGFiLmh0bWwnLFxyXG5cclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9hY3Rvci90YWJzL21hdHJpeC9TcHJpdGVTa2lsbHNUYWIuaHRtbCcsXHJcblxyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2FjdG9yL3RhYnMvdmVoaWNsZS9WZWhpY2xlU2tpbGxzVGFiLmh0bWwnLFxyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2FjdG9yL3RhYnMvdmVoaWNsZS9WZWhpY2xlTWF0cml4VGFiLmh0bWwnLFxyXG5cclxuICAgICAgICAvLyB1bmNhdGVnb3JpemVkIGxpc3RzXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvYWN0b3IvcGFydHMvSW5pdGlhdGl2ZS5odG1sJyxcclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9hY3Rvci9wYXJ0cy9Nb3ZlbWVudC5odG1sJyxcclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9hY3Rvci9wYXJ0cy9Qcm9maWxlSW1hZ2UuaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvYWN0b3IvcGFydHMvTmFtZUlucHV0Lmh0bWwnLFxyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2FjdG9yL3BhcnRzL0FjdGlvbkxpc3QuaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvYWN0b3IvcGFydHMvQ29udGFjdExpc3QuaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvYWN0b3IvcGFydHMvU2luQW5kTGlmZXN0eWxlTGlzdC5odG1sJyxcclxuXHJcbiAgICAgICAgLy8gbWFnaWNcclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9hY3Rvci9wYXJ0cy9tYWdpYy9BZGVwdFBvd2VyTGlzdC5odG1sJyxcclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9hY3Rvci9wYXJ0cy9tYWdpYy9TcGVsbExpc3QuaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvYWN0b3IvcGFydHMvbWFnaWMvU3BlbGxBbmRBZGVwdFBvd2VyTGlzdC5odG1sJyxcclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9hY3Rvci9wYXJ0cy9tYWdpYy9TcGlyaXRPcHRpb25zLmh0bWwnLFxyXG5cclxuICAgICAgICAvLyBtYXRyaXhcclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9hY3Rvci9wYXJ0cy9tYXRyaXgvUHJvZ3JhbUxpc3QuaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvYWN0b3IvcGFydHMvbWF0cml4L0NvbXBsZXhGb3JtTGlzdC5odG1sJyxcclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9hY3Rvci9wYXJ0cy9tYXRyaXgvTWF0cml4QXR0cmlidXRlLmh0bWwnLFxyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2FjdG9yL3BhcnRzL21hdHJpeC9TcHJpdGVQb3dlckxpc3QuaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvYWN0b3IvcGFydHMvbWF0cml4L0RldmljZVJhdGluZy5odG1sJyxcclxuXHJcbiAgICAgICAgLy8gYXR0cmlidXRlc1xyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2FjdG9yL3BhcnRzL2F0dHJpYnV0ZXMvQXR0cmlidXRlLmh0bWwnLFxyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2FjdG9yL3BhcnRzL2F0dHJpYnV0ZXMvQXR0cmlidXRlTGlzdC5odG1sJyxcclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9hY3Rvci9wYXJ0cy9hdHRyaWJ1dGVzL1NwZWNpYWxBdHRyaWJ1dGVMaXN0Lmh0bWwnLFxyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2FjdG9yL3BhcnRzL2F0dHJpYnV0ZXMvTGltaXRzLmh0bWwnLFxyXG5cclxuICAgICAgICAvLyBza2lsbHNcclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9hY3Rvci9wYXJ0cy9za2lsbHMvQWN0aXZlU2tpbGxMaXN0Lmh0bWwnLFxyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2FjdG9yL3BhcnRzL3NraWxscy9MYW5ndWFnZUFuZEtub3dsZWRnZVNraWxsTGlzdC5odG1sJyxcclxuXHJcbiAgICAgICAgLy8gdmVoaWNsZVxyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2FjdG9yL3BhcnRzL3ZlaGljbGUvVmVoaWNsZVN0YXRzTGlzdC5odG1sJyxcclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9hY3Rvci9wYXJ0cy92ZWhpY2xlL1ZlaGljbGVTZWNvbmRTdGF0c0xpc3QuaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvYWN0b3IvcGFydHMvdmVoaWNsZS9WZWhpY2xlTW92ZW1lbnQuaHRtbCcsXHJcblxyXG4gICAgICAgIC8vIGxpbWl0ZWQgYWN0b3JcclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9hY3Rvci1saW1pdGVkL2NoYXJhY3Rlci5odG1sJyxcclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9hY3Rvci1saW1pdGVkL3NwaXJpdC5odG1sJyxcclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9hY3Rvci1saW1pdGVkL3Nwcml0ZS5odG1sJyxcclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9hY3Rvci1saW1pdGVkL3ZlaGljbGUuaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvYWN0b3ItbGltaXRlZC9jcml0dGVyLmh0bWwnLFxyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2FjdG9yLWxpbWl0ZWQvcGFydHMvSGVhZGVyLmh0bWwnLFxyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2FjdG9yLWxpbWl0ZWQvcGFydHMvTWlzY0NoYXJhY3Rlci5odG1sJyxcclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9hY3Rvci1saW1pdGVkL3BhcnRzL01pc2NTcGlyaXQuaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvYWN0b3ItbGltaXRlZC9wYXJ0cy9NaXNjU3ByaXRlLmh0bWwnLFxyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2FjdG9yLWxpbWl0ZWQvcGFydHMvTWlzY1ZlaGljbGUuaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvYWN0b3ItbGltaXRlZC9wYXJ0cy9NaXNjQ3JpdHRlci5odG1sJyxcclxuXHJcblxyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2l0ZW0vcGFydHMvZGVzY3JpcHRpb24uaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvaXRlbS9wYXJ0cy90ZWNobm9sb2d5Lmh0bWwnLFxyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2l0ZW0vcGFydHMvaGVhZGVyLmh0bWwnLFxyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2l0ZW0vcGFydHMvd2VhcG9uLWFtbW8tbGlzdC5odG1sJyxcclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9pdGVtL3BhcnRzL3dlYXBvbi1tb2RzLWxpc3QuaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvaXRlbS9wYXJ0cy9hY3Rpb24uaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvaXRlbS9wYXJ0cy9kYW1hZ2UuaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvaXRlbS9wYXJ0cy9vcHBvc2VkLmh0bWwnLFxyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2l0ZW0vcGFydHMvc3BlbGwuaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvaXRlbS9wYXJ0cy9jb21wbGV4X2Zvcm0uaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvaXRlbS9wYXJ0cy93ZWFwb24uaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvaXRlbS9wYXJ0cy9hcm1vci5odG1sJyxcclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9pdGVtL3BhcnRzL21hdHJpeC5odG1sJyxcclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9pdGVtL3BhcnRzL3Npbi5odG1sJyxcclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9pdGVtL3BhcnRzL2NvbnRhY3QuaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvaXRlbS9wYXJ0cy9saWZlc3R5bGUuaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvaXRlbS9wYXJ0cy9hbW1vLmh0bWwnLFxyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2l0ZW0vcGFydHMvbW9kaWZpY2F0aW9uLmh0bWwnLFxyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2l0ZW0vcGFydHMvcHJvZ3JhbS5odG1sJyxcclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9pdGVtL3BhcnRzL2NyaXR0ZXJfcG93ZXIuaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvcm9sbHMvcGFydHMvcGFydHMtbGlzdC5odG1sJyxcclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9yb2xscy9wYXJ0cy9EYW1hZ2UuaHRtbCcsXHJcblxyXG4gICAgICAgIC8vIHRvIHdyYXAgdGhlIGJvZGllcyBvZiB0YWJzXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvY29tbW9uL1RhYldyYXBwZXIuaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvY29tbW9uL1ZhbHVlSW5wdXQuaHRtbCcsXHJcblxyXG4gICAgICAgIC8vIFVzZWZ1bCB3cmFwcGVyIGFuZCBpbXBsZW1lbnRlZCBjb21wb25lbnRzXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvY29tbW9uL1ZhbHVlTWF4QXR0cmlidXRlLmh0bWwnLFxyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2NvbW1vbi9BdHRyaWJ1dGUuaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvY29tbW9uL1ZhbHVlTW9kaWZpZXJzLmh0bWwnLFxyXG5cclxuICAgICAgICAvLyB1c2VmdWwgc2VsZWN0IHRlbXBsYXRlIGZvciB0aGUgY29tbW9uIHBhdHRlcm5cclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9jb21tb24vU2VsZWN0Lmh0bWwnLFxyXG5cclxuICAgICAgICAvLyB0byBjcmVhdGUgdGhlIGNvbmRpdGlvbiBtb25pdG9ycyBhbmQgZWRnZSBjb3VudGVyXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvY29tbW9uL0hvcml6b250YWxDZWxsSW5wdXQuaHRtbCcsXHJcblxyXG4gICAgICAgIC8vIGxvb2tzIGxpa2UgYSBMaXN0SGVhZGVyXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvY29tbW9uL0hlYWRlckJsb2NrLmh0bWwnLFxyXG5cclxuICAgICAgICAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9jb21tb24vTmFtZUxpbmVCbG9jay5odG1sJyxcclxuXHJcbiAgICAgICAgLy8gbGlzdCBjb21wb25lbnRzXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvY29tbW9uL0xpc3QvTGlzdEl0ZW0uaHRtbCcsXHJcbiAgICAgICAgJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvY29tbW9uL0xpc3QvTGlzdEhlYWRlci5odG1sJyxcclxuXHJcbiAgICAgICAgLy8gZGlhbG9nc1xyXG4gICAgICAgICdzeXN0ZW1zL3NoYWRvd3J1bjVlL2Rpc3QvdGVtcGxhdGVzL2FwcHMvZGlhbG9ncy9kYW1hZ2UtYXBwbGljYXRpb24uaHRtbCcsXHJcbiAgICBdO1xyXG5cclxuICAgIHJldHVybiBsb2FkVGVtcGxhdGVzKHRlbXBsYXRlUGF0aHMpO1xyXG59O1xyXG4iLCJpbXBvcnQgU1I1SXRlbVR5cGUgPSBTaGFkb3dydW4uU1I1SXRlbVR5cGU7XHJcbmltcG9ydCB7IFNSNUl0ZW1EYXRhV3JhcHBlciB9IGZyb20gJy4uL2l0ZW0vU1I1SXRlbURhdGFXcmFwcGVyJztcclxuXHJcbmV4cG9ydCBjb25zdCByZWdpc3Rlckl0ZW1MaW5lSGVscGVycyA9ICgpID0+IHtcclxuICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ0l0ZW1IZWFkZXJJY29ucycsIGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgIGNvbnN0IFBsdXNJY29uID0gJ2ZhcyBmYS1wbHVzJztcclxuICAgICAgICBjb25zdCBBZGRUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuQWRkJyk7XHJcbiAgICAgICAgY29uc3QgYWRkSWNvbiA9IHtcclxuICAgICAgICAgICAgaWNvbjogUGx1c0ljb24sXHJcbiAgICAgICAgICAgIHRleHQ6IEFkZFRleHQsXHJcbiAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5DcmVhdGVJdGVtJyksXHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAnaXRlbS1jcmVhdGUnLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgc3dpdGNoIChpZCkge1xyXG4gICAgICAgICAgICBjYXNlICdsaWZlc3R5bGUnOlxyXG4gICAgICAgICAgICAgICAgYWRkSWNvbi50aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkNyZWF0ZUl0ZW1MaWZlc3R5bGUnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbYWRkSWNvbl07XHJcbiAgICAgICAgICAgIGNhc2UgJ2NvbnRhY3QnOlxyXG4gICAgICAgICAgICAgICAgYWRkSWNvbi50aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkNyZWF0ZUl0ZW1Db250YWN0Jyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW2FkZEljb25dO1xyXG4gICAgICAgICAgICBjYXNlICdzaW4nOlxyXG4gICAgICAgICAgICAgICAgYWRkSWNvbi50aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkNyZWF0ZUl0ZW1TSU4nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbYWRkSWNvbl07XHJcbiAgICAgICAgICAgIGNhc2UgJ2xpY2Vuc2UnOlxyXG4gICAgICAgICAgICAgICAgYWRkSWNvbi50aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkNyZWF0ZUl0ZW1MaWNlbnNlJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW2FkZEljb25dO1xyXG4gICAgICAgICAgICBjYXNlICdxdWFsaXR5JzpcclxuICAgICAgICAgICAgICAgIGFkZEljb24udGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5DcmVhdGVJdGVtUXVhbGl0eScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFthZGRJY29uXTtcclxuICAgICAgICAgICAgY2FzZSAnYWRlcHRfcG93ZXInOlxyXG4gICAgICAgICAgICAgICAgYWRkSWNvbi50aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkNyZWF0ZUl0ZW1BZGVwdFBvd2VyJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW2FkZEljb25dO1xyXG4gICAgICAgICAgICBjYXNlICdhY3Rpb24nOlxyXG4gICAgICAgICAgICAgICAgYWRkSWNvbi50aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkNyZWF0ZUl0ZW1BY3Rpb24nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbYWRkSWNvbl07XHJcbiAgICAgICAgICAgIGNhc2UgJ3NwZWxsJzpcclxuICAgICAgICAgICAgICAgIGFkZEljb24udGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5DcmVhdGVJdGVtU3BlbGwnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbYWRkSWNvbl07XHJcbiAgICAgICAgICAgIGNhc2UgJ2dlYXInOlxyXG4gICAgICAgICAgICAgICAgYWRkSWNvbi50aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkNyZWF0ZUl0ZW1HZWFyJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW2FkZEljb25dO1xyXG4gICAgICAgICAgICBjYXNlICdjb21wbGV4X2Zvcm0nOlxyXG4gICAgICAgICAgICAgICAgYWRkSWNvbi50aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkNyZWF0ZUl0ZW1Db21wbGV4Rm9ybScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFthZGRJY29uXTtcclxuICAgICAgICAgICAgY2FzZSAncHJvZ3JhbSc6XHJcbiAgICAgICAgICAgICAgICBhZGRJY29uLnRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuQ3JlYXRlSXRlbVByb2dyYW0nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbYWRkSWNvbl07XHJcbiAgICAgICAgICAgIGNhc2UgJ3dlYXBvbic6XHJcbiAgICAgICAgICAgICAgICBhZGRJY29uLnRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuQ3JlYXRlSXRlbVdlYXBvbicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFthZGRJY29uXTtcclxuICAgICAgICAgICAgY2FzZSAnYXJtb3InOlxyXG4gICAgICAgICAgICAgICAgYWRkSWNvbi50aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkNyZWF0ZUl0ZW1Bcm1vcicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFthZGRJY29uXTtcclxuICAgICAgICAgICAgY2FzZSAnYW1tbyc6XHJcbiAgICAgICAgICAgICAgICBhZGRJY29uLnRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuQ3JlYXRlSXRlbUFtbW8nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbYWRkSWNvbl07XHJcbiAgICAgICAgICAgIGNhc2UgJ2RldmljZSc6XHJcbiAgICAgICAgICAgICAgICBhZGRJY29uLnRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuQ3JlYXRlSXRlbURldmljZScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFthZGRJY29uXTtcclxuICAgICAgICAgICAgY2FzZSAnZXF1aXBtZW50JzpcclxuICAgICAgICAgICAgICAgIGFkZEljb24udGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5DcmVhdGVJdGVtRXF1aXBtZW50Jyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW2FkZEljb25dO1xyXG4gICAgICAgICAgICBjYXNlICdjeWJlcndhcmUnOlxyXG4gICAgICAgICAgICAgICAgYWRkSWNvbi50aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkNyZWF0ZUl0ZW1DeWJlcndhcmUnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbYWRkSWNvbl07XHJcbiAgICAgICAgICAgIGNhc2UgJ2Jpb3dhcmUnOlxyXG4gICAgICAgICAgICAgICAgYWRkSWNvbi50aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkNyZWF0ZUl0ZW1CaW93YXJlJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW2FkZEljb25dO1xyXG4gICAgICAgICAgICBjYXNlICdjcml0dGVyX3Bvd2VyJzpcclxuICAgICAgICAgICAgICAgIGFkZEljb24udGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5DcmVhdGVJdGVtQ3JpdHRlclBvd2VyJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW2FkZEljb25dO1xyXG4gICAgICAgICAgICBjYXNlICdzcHJpdGVfcG93ZXInOlxyXG4gICAgICAgICAgICAgICAgYWRkSWNvbi50aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkNyZWF0ZUl0ZW1TcHJpdGVQb3dlcicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFthZGRJY29uXTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdJdGVtSGVhZGVyUmlnaHRTaWRlJywgZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgc3dpdGNoIChpZCkge1xyXG4gICAgICAgICAgICBjYXNlICdhY3Rpb24nOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LlNraWxsJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3NDbGFzczogJ3NpeCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkF0dHJpYnV0ZScpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzQ2xhc3M6ICdzaXgnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5BdHRyaWJ1dGUnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzc0NsYXNzOiAnc2l4JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuTGltaXQnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzc0NsYXNzOiAnc2l4JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuTW9kaWZpZXInKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzc0NsYXNzOiAnc2l4JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgY2FzZSAnd2VhcG9uJzpcclxuICAgICAgICAgICAgY2FzZSAnYXJtb3InOlxyXG4gICAgICAgICAgICBjYXNlICdkZXZpY2UnOlxyXG4gICAgICAgICAgICBjYXNlICdlcXVpcG1lbnQnOlxyXG4gICAgICAgICAgICBjYXNlICdjeWJlcndhcmUnOlxyXG4gICAgICAgICAgICBjYXNlICdiaW93YXJlJzpcclxuICAgICAgICAgICAgY2FzZSAnYW1tbyc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuUXR5JyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIGNhc2UgJ2NvbXBsZXhfZm9ybSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuVGFyZ2V0JyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkR1cmF0aW9uJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkZhZGUnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgY2FzZSAnYWRlcHRfcG93ZXInOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LlBvd2VyVHlwZScpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBjYXNlICdzcGVsbCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuU3BlbGxUeXBlJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LlNwZWxsUmFuZ2UnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuRHVyYXRpb24nKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuRHJhaW4nKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgY2FzZSAnY3JpdHRlcl9wb3dlcic6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuQ3JpdHRlclBvd2VyLlR5cGUnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuQ3JpdHRlclBvd2VyLlJhbmdlJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkNyaXR0ZXJQb3dlci5EdXJhdGlvbicpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBjYXNlICdxdWFsaXR5JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5RdWFsaXR5VHlwZScpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ0l0ZW1SaWdodFNpZGUnLCBmdW5jdGlvbiAoaXRlbTogU1I1SXRlbVR5cGUpIHtcclxuICAgICAgICBjb25zdCB3cmFwcGVyID0gbmV3IFNSNUl0ZW1EYXRhV3JhcHBlcihpdGVtKTtcclxuICAgICAgICBjb25zdCBxdHlJbnB1dCA9IHtcclxuICAgICAgICAgICAgaW5wdXQ6IHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHdyYXBwZXIuZ2V0UXVhbnRpdHkoKSxcclxuICAgICAgICAgICAgICAgIGNzc0NsYXNzOiAnaXRlbS1xdHknLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgc3dpdGNoIChpdGVtLnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnYWN0aW9uJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBnYW1lLmkxOG4ubG9jYWxpemUoQ09ORklHLlNSNS5hY3RpdmVTa2lsbHNbd3JhcHBlci5nZXRBY3Rpb25Ta2lsbCgpID8/ICcnXSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3NDbGFzczogJ3NpeCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGdhbWUuaTE4bi5sb2NhbGl6ZShDT05GSUcuU1I1LmF0dHJpYnV0ZXNbd3JhcHBlci5nZXRBY3Rpb25BdHRyaWJ1dGUoKSA/PyAnJ10pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzQ2xhc3M6ICdzaXgnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBnYW1lLmkxOG4ubG9jYWxpemUoQ09ORklHLlNSNS5hdHRyaWJ1dGVzW3dyYXBwZXIuZ2V0QWN0aW9uQXR0cmlidXRlMigpID8/ICcnXSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3NDbGFzczogJ3NpeCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHdyYXBwZXIuZ2V0TGltaXRBdHRyaWJ1dGUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZ2FtZS5pMThuLmxvY2FsaXplKENPTkZJRy5TUjUuYXR0cmlidXRlc1t3cmFwcGVyLmdldExpbWl0QXR0cmlidXRlKCkgPz8gJyddKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogd3JhcHBlci5nZXRBY3Rpb25MaW1pdCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzQ2xhc3M6ICdzaXgnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB3cmFwcGVyLmdldEFjdGlvbkRpY2VQb29sTW9kKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3NDbGFzczogJ3NpeCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIGNhc2UgJ2FybW9yJzpcclxuICAgICAgICAgICAgY2FzZSAnYW1tbyc6XHJcbiAgICAgICAgICAgIGNhc2UgJ2RldmljZSc6XHJcbiAgICAgICAgICAgIGNhc2UgJ2VxdWlwbWVudCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ2N5YmVyd2FyZSc6XHJcbiAgICAgICAgICAgIGNhc2UgJ2Jpb3dhcmUnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtxdHlJbnB1dF07XHJcbiAgICAgICAgICAgIGNhc2UgJ3dlYXBvbic6XHJcbiAgICAgICAgICAgICAgICBpZiAod3JhcHBlci5pc1JhbmdlZFdlYXBvbigpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY291bnQgPSB3cmFwcGVyLmdldEFtbW8oKT8uY3VycmVudC52YWx1ZSA/PyAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1heCA9IHdyYXBwZXIuZ2V0QW1tbygpPy5jdXJyZW50Lm1heCA/PyAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBjb3VudCA8IG1heCA/IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LldlYXBvblJlbG9hZCcpfSAoJHtjb3VudH0vJHttYXh9KWAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5BbW1vRnVsbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNzc0NsYXNzID0gJ25vLWJyZWFrJyArIChjb3VudCA8IG1heCA/ICcgcmVsb2FkLWFtbW8gcm9sbCcgOiAnZmFkZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LldlYXBvbkFtbW9Db3VudCcpfTogJHtjb3VudH1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzQ2xhc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdHlJbnB1dCxcclxuICAgICAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3F0eUlucHV0XTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ3F1YWxpdHknOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGdhbWUuaTE4bi5sb2NhbGl6ZShDT05GSUcuU1I1LnF1YWxpdHlUeXBlc1tpdGVtLmRhdGEudHlwZSA/PyAnJ10pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAnYWRlcHRfcG93ZXInOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGdhbWUuaTE4bi5sb2NhbGl6ZShDT05GSUcuU1I1LmFkZXB0UG93ZXIudHlwZXNbaXRlbS5kYXRhLnR5cGUgPz8gJyddKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgY2FzZSAnc3BlbGwnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGdhbWUuaTE4bi5sb2NhbGl6ZShDT05GSUcuU1I1LnNwZWxsVHlwZXNbaXRlbS5kYXRhLnR5cGUgPz8gJyddKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZ2FtZS5pMThuLmxvY2FsaXplKENPTkZJRy5TUjUuc3BlbGxSYW5nZXNbaXRlbS5kYXRhLnJhbmdlID8/ICcnXSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGdhbWUuaTE4bi5sb2NhbGl6ZShDT05GSUcuU1I1LmR1cmF0aW9uc1tpdGVtLmRhdGEuZHVyYXRpb24gPz8gJyddKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogd3JhcHBlci5nZXREcmFpbigpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBjYXNlICdjcml0dGVyX3Bvd2VyJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBnYW1lLmkxOG4ubG9jYWxpemUoQ09ORklHLlNSNS5jcml0dGVyUG93ZXIudHlwZXNbaXRlbS5kYXRhLnBvd2VyVHlwZSA/PyAnJ10pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBnYW1lLmkxOG4ubG9jYWxpemUoQ09ORklHLlNSNS5jcml0dGVyUG93ZXIucmFuZ2VzW2l0ZW0uZGF0YS5yYW5nZSA/PyAnJ10pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBnYW1lLmkxOG4ubG9jYWxpemUoQ09ORklHLlNSNS5jcml0dGVyUG93ZXIuZHVyYXRpb25zW2l0ZW0uZGF0YS5kdXJhdGlvbiA/PyAnJ10pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAnY29tcGxleF9mb3JtJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBnYW1lLmkxOG4ubG9jYWxpemUoQ09ORklHLlNSNS5tYXRyaXhUYXJnZXRzW2l0ZW0uZGF0YS50YXJnZXQgPz8gJyddKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZ2FtZS5pMThuLmxvY2FsaXplKENPTkZJRy5TUjUuZHVyYXRpb25zW2l0ZW0uZGF0YS5kdXJhdGlvbiA/PyAnJ10pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBTdHJpbmcoaXRlbS5kYXRhLmZhZGUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBjYXNlICdwcm9ncmFtJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b246IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzc0NsYXNzOiBgaXRlbS1lcXVpcC10b2dnbGUgJHt3cmFwcGVyLmlzRXF1aXBwZWQoKSA/ICdsaWdodCcgOiAnJ31gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB3cmFwcGVyLmlzRXF1aXBwZWQoKSA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkxvYWRlZCcpIDogZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuTG9hZCcpICsgJyA+PicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignSXRlbUljb25zJywgZnVuY3Rpb24gKGl0ZW06IFNSNUl0ZW1UeXBlKSB7XHJcbiAgICAgICAgY29uc3Qgd3JhcHBlciA9IG5ldyBTUjVJdGVtRGF0YVdyYXBwZXIoaXRlbSk7XHJcbiAgICAgICAgY29uc3QgZWRpdEljb24gPSB7XHJcbiAgICAgICAgICAgIGljb246ICdmYXMgZmEtZWRpdCBpdGVtLWVkaXQnLFxyXG4gICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuRWRpdEl0ZW0nKSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHJlbW92ZUljb24gPSB7XHJcbiAgICAgICAgICAgIGljb246ICdmYXMgZmEtdHJhc2ggaXRlbS1kZWxldGUnLFxyXG4gICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuRGVsZXRlSXRlbScpLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgZXF1aXBJY29uID0ge1xyXG4gICAgICAgICAgICBpY29uOiBgJHt3cmFwcGVyLmlzRXF1aXBwZWQoKSA/ICdmYXMgZmEtY2hlY2stY2lyY2xlJyA6ICdmYXIgZmEtY2lyY2xlJ30gaXRlbS1lcXVpcC10b2dnbGVgLFxyXG4gICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuVG9nZ2xlRXF1aXAnKSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHBkZkljb24gPSB7XHJcbiAgICAgICAgICAgIGljb246ICdmYXMgZmEtZmlsZSBvcGVuLXNvdXJjZS1wZGYnLFxyXG4gICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuT3BlblNvdXJjZVBkZicpLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IGljb25zID0gW2VkaXRJY29uLCByZW1vdmVJY29uXTtcclxuXHJcbiAgICAgICAgaWYgKHVpWydQREZvdW5kcnknXSkge1xyXG4gICAgICAgICAgICBpY29ucy51bnNoaWZ0KHBkZkljb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3dpdGNoICh3cmFwcGVyLmdldFR5cGUoKSkge1xyXG4gICAgICAgICAgICBjYXNlICdwcm9ncmFtJzpcclxuICAgICAgICAgICAgY2FzZSAnYXJtb3InOlxyXG4gICAgICAgICAgICBjYXNlICdkZXZpY2UnOlxyXG4gICAgICAgICAgICBjYXNlICdlcXVpcG1lbnQnOlxyXG4gICAgICAgICAgICBjYXNlICdjeWJlcndhcmUnOlxyXG4gICAgICAgICAgICBjYXNlICdiaW93YXJlJzpcclxuICAgICAgICAgICAgY2FzZSAnd2VhcG9uJzpcclxuICAgICAgICAgICAgICAgIGljb25zLnVuc2hpZnQoZXF1aXBJY29uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBpY29ucztcclxuICAgIH0pO1xyXG59O1xyXG4iLCJpbXBvcnQgeyBQYXJ0c0xpc3QgfSBmcm9tICcuLi9wYXJ0cy9QYXJ0c0xpc3QnO1xyXG5pbXBvcnQgTW9kTGlzdCA9IFNoYWRvd3J1bi5Nb2RMaXN0O1xyXG5pbXBvcnQge1NSNUFjdG9yfSBmcm9tIFwiLi4vYWN0b3IvU1I1QWN0b3JcIjtcclxuaW1wb3J0IHtGTEFHUywgU1lTVEVNX05BTUV9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcclxuaW1wb3J0IHtIZWxwZXJzfSBmcm9tIFwiLi4vaGVscGVyc1wiO1xyXG5pbXBvcnQge1NhZmVTdHJpbmd9IGZyb20gXCJoYW5kbGViYXJzXCI7XHJcbmltcG9ydCBEYW1hZ2VEYXRhID0gU2hhZG93cnVuLkRhbWFnZURhdGE7XHJcblxyXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJSb2xsQW5kTGFiZWxIZWxwZXJzID0gKCkgPT4ge1xyXG4gICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignZGFtYWdlQWJicmV2aWF0aW9uJywgZnVuY3Rpb24gKGRhbWFnZSkge1xyXG4gICAgICAgIGlmIChkYW1hZ2UgPT09ICdwaHlzaWNhbCcpIHJldHVybiAnUCc7XHJcbiAgICAgICAgaWYgKGRhbWFnZSA9PT0gJ3N0dW4nKSByZXR1cm4gJ1MnO1xyXG4gICAgICAgIGlmIChkYW1hZ2UgPT09ICdtYXRyaXgnKSByZXR1cm4gJ00nO1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH0pO1xyXG5cclxuICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2RhbWFnZUNvZGUnLCBmdW5jdGlvbihkYW1hZ2U6IERhbWFnZURhdGEpOiBTYWZlU3RyaW5nIHtcclxuICAgICAgICBjb25zdCB0eXBlQ29kZSA9IEhhbmRsZWJhcnMuaGVscGVycy5kYW1hZ2VBYmJyZXZpYXRpb24oZGFtYWdlLnR5cGUudmFsdWUpO1xyXG4gICAgICAgIGxldCBjb2RlID0gYCR7ZGFtYWdlLnZhbHVlfSR7dHlwZUNvZGV9YDtcclxuICAgICAgICByZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhjb2RlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2RpY2VJY29uJywgZnVuY3Rpb24gKHNpZGUpIHtcclxuICAgICAgICBpZiAoc2lkZSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHNpZGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3JlZCc7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdncmV5JztcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2dyZXknO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnZ3JleSc7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdncmVlbic7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdncmVlbic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdlbGVtZW50SWNvbicsIGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgbGV0IGljb24gPSAnJztcclxuICAgICAgICBpZiAoZWxlbWVudCA9PT0gJ2VsZWN0cmljaXR5Jykge1xyXG4gICAgICAgICAgICBpY29uID0gJ2ZhcyBmYS1ib2x0JztcclxuICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQgPT09ICdyYWRpYXRpb24nKSB7XHJcbiAgICAgICAgICAgIGljb24gPSAnZmFzIGZhLXJhZGlhdGlvbi1hbHQnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudCA9PT0gJ2ZpcmUnKSB7XHJcbiAgICAgICAgICAgIGljb24gPSAnZmFzIGZhLWZpcmUnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudCA9PT0gJ2FjaWQnKSB7XHJcbiAgICAgICAgICAgIGljb24gPSAnZmFzIGZhLXZpYWxzJztcclxuICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQgPT09ICdjb2xkJykge1xyXG4gICAgICAgICAgICBpY29uID0gJ2ZhcyBmYS1zbm93Zmxha2UnO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaWNvbjtcclxuICAgIH0pO1xyXG5cclxuICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3BhcnRzVG90YWwnLCBmdW5jdGlvbiAocGFydHNMaXN0OiBNb2RMaXN0PG51bWJlcj4pIHtcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IG5ldyBQYXJ0c0xpc3QocGFydHNMaXN0KTtcclxuICAgICAgICByZXR1cm4gcGFydHMudG90YWw7XHJcbiAgICB9KTtcclxuXHJcbiAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdzaWduZWRWYWx1ZScsIGZ1bmN0aW9uICh2YWx1ZTogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAodmFsdWUgPiAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBgKyR7dmFsdWV9YDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gYCR7dmFsdWV9YDtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdzcGVha2VyTmFtZScsIEhlbHBlcnMuZ2V0Q2hhdFNwZWFrZXJOYW1lKTtcclxufTtcclxuIiwiaW1wb3J0IFNraWxsRmllbGQgPSBTaGFkb3dydW4uU2tpbGxGaWVsZDtcclxuaW1wb3J0IHsgSGVscGVycyB9IGZyb20gJy4uL2hlbHBlcnMnO1xyXG5pbXBvcnQgU1I1U2hlZXRGaWx0ZXJzID0gU2hhZG93cnVuLlNSNVNoZWV0RmlsdGVycztcclxuaW1wb3J0IFNraWxsQ2F0ZWdvcmllcyA9IFNoYWRvd3J1bi5Ta2lsbENhdGVnb3JpZXM7XHJcbmltcG9ydCB7U2tpbGxSdWxlc30gZnJvbSBcIi4uL2FjdG9yL1NraWxsUnVsZXNcIjtcclxuaW1wb3J0IHtGTEFHUywgU1lTVEVNX05BTUV9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCByZWdpc3RlclNraWxsTGluZUhlbHBlcnMgPSAoKSA9PiB7XHJcbiAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdTa2lsbEhlYWRlckljb25zJywgZnVuY3Rpb24gKGNhdGVnb3J5OiBTa2lsbENhdGVnb3JpZXMpIHtcclxuICAgICAgICBjb25zdCBhZGRJY29uID0ge1xyXG4gICAgICAgICAgICBpY29uOiAnZmFzIGZhLXBsdXMnLFxyXG4gICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuQWRkU2tpbGwnKSxcclxuICAgICAgICAgICAgdGV4dDogZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuQWRkJyksXHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiAnJyxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHN3aXRjaCAoY2F0ZWdvcnkpIHtcclxuICAgICAgICAgICAgY2FzZSAnYWN0aXZlJzpcclxuICAgICAgICAgICAgICAgIGFkZEljb24uY3NzQ2xhc3MgPSAnYWRkLWFjdGl2ZSc7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW2FkZEljb25dO1xyXG4gICAgICAgICAgICBjYXNlICdsYW5ndWFnZSc6XHJcbiAgICAgICAgICAgICAgICBhZGRJY29uLmNzc0NsYXNzID0gJ2FkZC1sYW5ndWFnZSc7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW2FkZEljb25dO1xyXG4gICAgICAgICAgICBjYXNlICdrbm93bGVkZ2UnOlxyXG4gICAgICAgICAgICAgICAgYWRkSWNvbi5jc3NDbGFzcyA9ICdhZGQta25vd2xlZGdlJztcclxuICAgICAgICAgICAgICAgIHJldHVybiBbYWRkSWNvbl07XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignU2tpbGxIZWFkZXJSaWdodFNpZGUnLCBmdW5jdGlvbiAoaWQsIGZpbHRlcnM6IFNSNVNoZWV0RmlsdGVycykge1xyXG4gICAgICAgIGNvbnN0IHNwZWNzID0ge1xyXG4gICAgICAgICAgICB0ZXh0OiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5TcGVjaWFsaXphdGlvbicpLFxyXG4gICAgICAgICAgICAgICAgY3NzQ2xhc3M6ICdza2lsbC1zcGVjLWl0ZW0nLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHJ0ZyA9IHtcclxuICAgICAgICAgICAgLy8gQ2hhbmdlIFJhdGluZyBoZWFkZXIgdG8gc2hvdyBhY3RpdmUgZmlsdGVyaW5nLlxyXG4gICAgICAgICAgICB0ZXh0OiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiAhZmlsdGVycyB8fCBmaWx0ZXJzLnNob3dVbnRyYWluZWRTa2lsbHMgP1xyXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LlJ0ZycpIDpcclxuICAgICAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5SdGdBYm92ZVplcm8nKSxcclxuICAgICAgICAgICAgICAgIGNzc0NsYXNzOiAncnRnJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzd2l0Y2ggKGlkKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2FjdGl2ZSc6XHJcbiAgICAgICAgICAgIGNhc2UgJ2tub3dsZWRnZSc6XHJcbiAgICAgICAgICAgIGNhc2UgJ2xhbmd1YWdlJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBbc3BlY3MsIHJ0Z107XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdTa2lsbFJpZ2h0U2lkZScsIGZ1bmN0aW9uIChza2lsbFR5cGU6IHN0cmluZywgc2tpbGw6IFNraWxsRmllbGQpIHtcclxuICAgICAgICBjb25zdCBzcGVjcyA9IEFycmF5LmlzQXJyYXkoc2tpbGwuc3BlY3MpID8gc2tpbGwuc3BlY3MgOiBbc2tpbGwuc3BlY3NdO1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBzcGVjcy5qb2luKCcsICcpID8/ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNzc0NsYXNzOiAnc2tpbGwtc3BlYy1pdGVtJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBIZWxwZXJzLmNhbGNUb3RhbChza2lsbCksXHJcbiAgICAgICAgICAgICAgICAgICAgY3NzQ2xhc3M6ICdydGcnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICBdO1xyXG4gICAgfSk7XHJcblxyXG4gICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignU2tpbGxBZGRpdGlvbkNzc0NsYXNzJywgZnVuY3Rpb24oc2tpbGw6IFNraWxsRmllbGQpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgY29uc3QgY2xhc3Nlczogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgICAgICAgLy8gQFBERiBTUjUjMTUxIG5vdCBkZWZhdWx0YWJsZSBza2lsbHMgc2hvdWxkIGJlIHNob3duIGFzIGl0YWxpYy5cclxuICAgICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoU1lTVEVNX05BTUUsIEZMQUdTLlNob3dTa2lsbHNXaXRoRGV0YWlscykgJiYgIVNraWxsUnVsZXMuYWxsb3dEZWZhdWx0aW5nUm9sbChza2lsbCkpIHtcclxuICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKCdza2lsbC1yb2xsLW5vdC1kZWZhdWx0YWJsZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNsYXNzZXM7XHJcbiAgICB9KVxyXG5cclxuICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ1NraWxsSWNvbnMnLCBmdW5jdGlvbiAoc2tpbGxUeXBlOiBzdHJpbmcsIHNraWxsOiBTa2lsbEZpZWxkKSB7XHJcbiAgICAgICAgY29uc3QgZWRpdEljb24gPSB7XHJcbiAgICAgICAgICAgIGljb246ICdmYXMgZmEtZWRpdCcsXHJcbiAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5FZGl0U2tpbGwnKSxcclxuICAgICAgICAgICAgY3NzQ2xhc3M6ICcnLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgcmVtb3ZlSWNvbiA9IHtcclxuICAgICAgICAgICAgaWNvbjogJ2ZhcyBmYS10cmFzaCcsXHJcbiAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5EZWxldGVTa2lsbCcpLFxyXG4gICAgICAgICAgICBjc3NDbGFzczogJycsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBzd2l0Y2ggKHNraWxsVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdhY3RpdmUnOlxyXG4gICAgICAgICAgICAgICAgZWRpdEljb24uY3NzQ2xhc3MgPSAnc2tpbGwtZWRpdCc7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVJY29uLmNzc0NsYXNzID0gJ3JlbW92ZS1hY3RpdmUnXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW2VkaXRJY29uLCByZW1vdmVJY29uXTtcclxuICAgICAgICAgICAgY2FzZSAnbGFuZ3VhZ2UnOlxyXG4gICAgICAgICAgICAgICAgZWRpdEljb24uY3NzQ2xhc3MgPSAnbGFuZ3VhZ2Utc2tpbGwtZWRpdCc7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVJY29uLmNzc0NsYXNzID0gJ3JlbW92ZS1sYW5ndWFnZSc7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW2VkaXRJY29uLCByZW1vdmVJY29uXTtcclxuICAgICAgICAgICAgY2FzZSAna25vd2xlZGdlJzpcclxuICAgICAgICAgICAgICAgIGVkaXRJY29uLmNzc0NsYXNzID0gJ2tub3dsZWRnZS1za2lsbC1lZGl0JztcclxuICAgICAgICAgICAgICAgIHJlbW92ZUljb24uY3NzQ2xhc3MgPSAncmVtb3ZlLWtub3dsZWRnZSc7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW2VkaXRJY29uLCByZW1vdmVJY29uXTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBbZWRpdEljb25dO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxufTtcclxuIiwiaW1wb3J0IEF0dHJpYnV0ZUZpZWxkID0gU2hhZG93cnVuLkF0dHJpYnV0ZUZpZWxkO1xyXG5pbXBvcnQgU2tpbGxGaWVsZCA9IFNoYWRvd3J1bi5Ta2lsbEZpZWxkO1xyXG5pbXBvcnQgTW9kaWZpYWJsZVZhbHVlID0gU2hhZG93cnVuLk1vZGlmaWFibGVWYWx1ZTtcclxuaW1wb3J0IExhYmVsRmllbGQgPSBTaGFkb3dydW4uTGFiZWxGaWVsZDtcclxuaW1wb3J0IFJhbmdlc1RlbXBsYXRlRGF0YSA9IFNoYWRvd3J1bi5SYW5nZXNUZW1wbGF0ZURhdGE7XHJcbmltcG9ydCBSYW5nZVRlbXBsYXRlRGF0YSA9IFNoYWRvd3J1bi5SYW5nZVRlbXBsYXRlRGF0YTtcclxuaW1wb3J0IERhbWFnZURhdGEgPSBTaGFkb3dydW4uRGFtYWdlRGF0YTtcclxuaW1wb3J0IE1vZGlmaWVkRGFtYWdlRGF0YSA9IFNoYWRvd3J1bi5Nb2RpZmllZERhbWFnZURhdGE7XHJcbmltcG9ydCBEYW1hZ2VUeXBlID0gU2hhZG93cnVuLkRhbWFnZVR5cGU7XHJcbmltcG9ydCBEYW1hZ2VFbGVtZW50ID0gU2hhZG93cnVuLkRhbWFnZUVsZW1lbnQ7XHJcbmltcG9ydCB7UGFydHNMaXN0fSBmcm9tICcuL3BhcnRzL1BhcnRzTGlzdCc7XHJcbmltcG9ydCB7REVGQVVMVF9JRF9MRU5HVEgsIEZMQUdTLCBMRU5HVEhfVU5JVCwgTEVOR1RIX1VOSVRfVE9fTUVURVJTX01VTFRJUExJRVJTLCBTUiwgU1lTVEVNX05BTUV9IGZyb20gXCIuL2NvbnN0YW50c1wiO1xyXG5pbXBvcnQge1NSNUFjdG9yfSBmcm9tIFwiLi9hY3Rvci9TUjVBY3RvclwiO1xyXG5pbXBvcnQge0RhdGFUZW1wbGF0ZXN9IGZyb20gXCIuL2RhdGFUZW1wbGF0ZXNcIjtcclxuaW1wb3J0IHtEZWxldGVDb25maXJtYXRpb25EaWFsb2d9IGZyb20gXCIuL2FwcHMvZGlhbG9ncy9EZWxldGVDb25maXJtYXRpb25EaWFsb2dcIjtcclxuaW1wb3J0IFNraWxscyA9IFNoYWRvd3J1bi5Ta2lsbHM7XHJcblxyXG5pbnRlcmZhY2UgQ2FsY1RvdGFsT3B0aW9ucyB7XHJcbiAgICBtaW4/OiBudW1iZXIsXHJcbiAgICBtYXg/OiBudW1iZXJcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEhlbHBlcnMge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxjdWxhdGUgdGhlIHRvdGFsIHZhbHVlIGZvciBhIGRhdGEgb2JqZWN0XHJcbiAgICAgKiAtIHN0b3JlcyB0aGUgdG90YWwgdmFsdWUgYW5kIHJldHVybnMgaXRcclxuICAgICAqIEBwYXJhbSBkYXRhXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY2FsY1RvdGFsKGRhdGE6IE1vZGlmaWFibGVWYWx1ZSwgb3B0aW9ucz86IENhbGNUb3RhbE9wdGlvbnMpOiBudW1iZXIge1xyXG4gICAgICAgIGlmIChkYXRhLm1vZCA9PT0gdW5kZWZpbmVkKSBkYXRhLm1vZCA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHBhcnRzID0gbmV3IFBhcnRzTGlzdChkYXRhLm1vZCk7XHJcbiAgICAgICAgLy8gaWYgYSB0ZW1wIGZpZWxkIGlzIGZvdW5kLCBhZGQgaXQgYXMgYSB1bmlxdWUgcGFydFxyXG4gICAgICAgIGlmIChkYXRhWyd0ZW1wJ10gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBwYXJ0cy5hZGRVbmlxdWVQYXJ0KCdTUjUuVGVtcG9yYXJ5JywgZGF0YVsndGVtcCddKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRhdGEudmFsdWUgPSBIZWxwZXJzLnJvdW5kVG8ocGFydHMudG90YWwgKyBkYXRhLmJhc2UsIDMpO1xyXG4gICAgICAgIGRhdGEubW9kID0gcGFydHMubGlzdDtcclxuXHJcbiAgICAgICAgZGF0YS52YWx1ZSA9IEhlbHBlcnMuYXBwbHlWYWx1ZVJhbmdlKGRhdGEudmFsdWUsIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICByZXR1cm4gZGF0YS52YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogUm91bmQgYSBudW1iZXIgdG8gYSBnaXZlbiBkZWdyZWUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHZhbHVlIE51bWJlciB0byByb3VuZCB3aXRoLlxyXG4gICAgICogQHBhcmFtIGRlY2ltYWxzIEFtb3VudCBvZiBkZWNpbWFscyBhZnRlciB0aGUgZGVjaW1hbCBwb2ludC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIHJvdW5kVG8odmFsdWU6IG51bWJlciwgZGVjaW1hbHMpOiBudW1iZXIge1xyXG4gICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBNYXRoLnBvdygxMCwgZGVjaW1hbHMpO1xyXG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlICogbXVsdGlwbGllcikgLyBtdWx0aXBsaWVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBNYWtlIHN1cmUgYSBnaXZlbiB2YWx1ZSBpcyBpbiBiZXR3ZWVuIGEgcmFuZ2UuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHZhbHVlXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBEZWZpbmUgdGhlIHJhbmdlIHRoZSBnaXZlbiB2YWx1ZSBtdXN0IGJlIGluIChvciBub25lKVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXBwbHlWYWx1ZVJhbmdlKHZhbHVlOiBudW1iZXIsIG9wdGlvbnM/OiBDYWxjVG90YWxPcHRpb25zKTogbnVtYmVyIHtcclxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnM/Lm1pbiA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgdmFsdWUgPSBNYXRoLm1heChvcHRpb25zLm1pbiwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnM/Lm1heCA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgdmFsdWUgPSBNYXRoLm1pbihvcHRpb25zLm1heCwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBsaXN0SXRlbUlkKGV2ZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmxpc3QtaXRlbScpLmRhdGFzZXQuaXRlbUlkO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJlcGxhY2UgJ1NSNS4ncyBvbiBrZXlzIHdpdGggJ1NSNV9ET1RfJ1xyXG4gICAgc3RhdGljIG9uU2V0RmxhZyhkYXRhKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgaWYgKGRhdGEgPT09IHVuZGVmaW5lZCB8fCBkYXRhID09PSBudWxsKSByZXR1cm4gZGF0YTtcclxuICAgICAgICBjb25zdCBuZXdEYXRhID0ge307XHJcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YSkpIHtcclxuICAgICAgICAgICAgY29uc3QgbmV3S2V5ID0ga2V5LnJlcGxhY2UoJ1NSNS4nLCAnU1I1X0RPVF8nKTtcclxuICAgICAgICAgICAgbmV3RGF0YVtuZXdLZXldID0gdGhpcy5vblNldEZsYWcodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3RGF0YTtcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXBsYWNlICdTUjVfRE9UXycgd2l0aCAnU1I1Licgb24ga2V5c1xyXG4gICAgc3RhdGljIG9uR2V0RmxhZyhkYXRhKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JykgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgaWYgKGRhdGEgPT09IHVuZGVmaW5lZCB8fCBkYXRhID09PSBudWxsKSByZXR1cm4gZGF0YTtcclxuICAgICAgICBjb25zdCBuZXdEYXRhID0ge307XHJcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YSkpIHtcclxuICAgICAgICAgICAgY29uc3QgbmV3S2V5ID0ga2V5LnJlcGxhY2UoJ1NSNV9ET1RfJywgJ1NSNS4nKTtcclxuICAgICAgICAgICAgbmV3RGF0YVtuZXdLZXldID0gdGhpcy5vbkdldEZsYWcodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3RGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgaXNNYXRyaXgoYXR0cz86IGJvb2xlYW4gfCAoQXR0cmlidXRlRmllbGQgfCBzdHJpbmcgfCBTa2lsbEZpZWxkKVtdIHwgQXR0cmlidXRlRmllbGQgfCBzdHJpbmcgfCBTa2lsbEZpZWxkKSB7XHJcbiAgICAgICAgaWYgKCFhdHRzKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBhdHRzID09PSAnYm9vbGVhbicpIHJldHVybiBhdHRzO1xyXG4gICAgICAgIC8vIGFycmF5IG9mIGxhYmVscyB0byBjaGVjayBmb3Igb24gdGhlIGluY29taW5nIGRhdGFcclxuICAgICAgICBjb25zdCBtYXRyaXhMYWJlbHMgPSBbXHJcbiAgICAgICAgICAgICdTUjUuTWF0cml4QXR0ckZpcmV3YWxsJyxcclxuICAgICAgICAgICAgJ1NSNS5NYXRyaXhBdHRyRGF0YVByb2Nlc3NpbmcnLFxyXG4gICAgICAgICAgICAnU1I1Lk1hdHJpeEF0dHJTbGVhemUnLFxyXG4gICAgICAgICAgICAnU1I1Lk1hdHJpeEF0dHJBdHRhY2snLFxyXG4gICAgICAgICAgICAnU1I1LlNraWxsQ29tcHV0ZXInLFxyXG4gICAgICAgICAgICAnU1I1LlNraWxsSGFja2luZycsXHJcbiAgICAgICAgICAgICdTUjUuU2tpbGxDeWJlcmNvbWJhdCcsXHJcbiAgICAgICAgICAgICdTUjUuU2tpbGxFbGVjdHJvbmljV2FyZmFyZScsXHJcbiAgICAgICAgICAgICdTUjUuU29mdHdhcmUnLFxyXG4gICAgICAgIF07XHJcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGF0dHMpKSBhdHRzID0gW2F0dHNdO1xyXG4gICAgICAgIGF0dHMgPSBhdHRzLmZpbHRlcigoYXR0KSA9PiBhdHQpO1xyXG4gICAgICAgIC8vIGl0ZXJhdGUgb3ZlciB0aGUgYXR0cmlidXRlcyBhbmQgcmV0dXJuIHRydWUgaWYgd2UgZmluZCBhIG1hdHJpeCBhdHRcclxuICAgICAgICBmb3IgKGNvbnN0IGF0dCBvZiBhdHRzKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYXR0ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hdHJpeExhYmVscy5pbmRleE9mKGF0dCkgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhdHQgPT09ICdvYmplY3QnICYmIChhdHQgYXMgTGFiZWxGaWVsZCkubGFiZWwgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hdHJpeExhYmVscy5pbmRleE9mKGF0dC5sYWJlbCA/PyAnJykgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIHdlIGRvbid0IGZpbmQgYW55dGhpbmcgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBwYXJzZUlucHV0VG9TdHJpbmcodmFsOiBudW1iZXIgfCBzdHJpbmcgfCBzdHJpbmdbXSB8IHVuZGVmaW5lZCk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gJyc7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSByZXR1cm4gdmFsLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSByZXR1cm4gdmFsO1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbC5qb2luKCcsJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcGFyc2VJbnB1dFRvTnVtYmVyKHZhbDogbnVtYmVyIHwgc3RyaW5nIHwgc3RyaW5nW10gfCB1bmRlZmluZWQpOiBudW1iZXIge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykgcmV0dXJuIHZhbDtcclxuICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgY29uc3QgcmV0ID0gK3ZhbDtcclxuICAgICAgICAgICAgaWYgKCFpc05hTihyZXQpKSByZXR1cm4gcmV0O1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xyXG4gICAgICAgICAgICBjb25zdCBzdHIgPSB2YWwuam9pbignJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJldCA9ICtzdHI7XHJcbiAgICAgICAgICAgIGlmICghaXNOYU4ocmV0KSkgcmV0dXJuIHJldDtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBzZXR1cEN1c3RvbUNoZWNrYm94KGFwcCwgaHRtbCkge1xyXG4gICAgICAgIGNvbnN0IHNldENvbnRlbnQgPSAoZWwpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY2hlY2tib3ggPSAkKGVsKS5jaGlsZHJlbignaW5wdXRbdHlwZT1jaGVja2JveF0nKTtcclxuICAgICAgICAgICAgY29uc3QgY2hlY2ttYXJrID0gJChlbCkuY2hpbGRyZW4oJy5jaGVja21hcmsnKTtcclxuICAgICAgICAgICAgaWYgKCQoY2hlY2tib3gpLnByb3AoJ2NoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgJChjaGVja21hcmspLmFkZENsYXNzKCdmYS1jaGVjay1jaXJjbGUnKTtcclxuICAgICAgICAgICAgICAgICQoY2hlY2ttYXJrKS5yZW1vdmVDbGFzcygnZmEtY2lyY2xlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKGNoZWNrbWFyaykuYWRkQ2xhc3MoJ2ZhLWNpcmNsZScpO1xyXG4gICAgICAgICAgICAgICAgJChjaGVja21hcmspLnJlbW92ZUNsYXNzKCdmYS1jaGVjay1jaXJjbGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaHRtbC5maW5kKCdsYWJlbC5jaGVja2JveCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZXRDb250ZW50KHRoaXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGh0bWwuZmluZCgnbGFiZWwuY2hlY2tib3gnKS5jbGljaygoZXZlbnQpID0+IHNldENvbnRlbnQoZXZlbnQuY3VycmVudFRhcmdldCkpO1xyXG4gICAgICAgIGh0bWwuZmluZCgnLnN1Ym1pdC1jaGVja2JveCcpLmNoYW5nZSgoZXZlbnQpID0+IGFwcC5fb25TdWJtaXQoZXZlbnQpKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgbWFwUm91bmRzVG9EZWZlbnNlTW9kKHJvdW5kcykge1xyXG4gICAgICAgIGlmIChyb3VuZHMgPT09IDEpIHJldHVybiAwO1xyXG4gICAgICAgIGlmIChyb3VuZHMgPT09IDMpIHJldHVybiAtMjtcclxuICAgICAgICBpZiAocm91bmRzID09PSA2KSByZXR1cm4gLTU7XHJcbiAgICAgICAgaWYgKHJvdW5kcyA9PT0gMTApIHJldHVybiAtOTtcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgbWFwUm91bmRzVG9EZWZlbnNlRGVzYyhyb3VuZHMpIHtcclxuICAgICAgICBpZiAocm91bmRzID09PSAxKSByZXR1cm4gJyc7XHJcbiAgICAgICAgaWYgKHJvdW5kcyA9PT0gMykgcmV0dXJuICctMic7XHJcbiAgICAgICAgaWYgKHJvdW5kcyA9PT0gNikgcmV0dXJuICctNSc7XHJcbiAgICAgICAgaWYgKHJvdW5kcyA9PT0gMTApIHJldHVybiAnLTknO1xyXG4gICAgICAgIGlmIChyb3VuZHMgPT09IDIwKSByZXR1cm4gJ1NSNS5EdWNrT3JDb3Zlcic7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBsYWJlbChzdHIpIHtcclxuICAgICAgICBjb25zdCBmcmFncyA9IHN0ci5zcGxpdCgnXycpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZnJhZ3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZnJhZ3NbaV0gPSBmcmFnc1tpXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGZyYWdzW2ldLnNsaWNlKDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmcmFncy5mb3JFYWNoKChmcmFnLCBpZHgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGZyYWcgPT09ICdQcm9jZXNzaW5nJykgZnJhZ3NbaWR4XSA9ICdQcm9jLic7XHJcbiAgICAgICAgICAgIGlmIChmcmFnID09PSAnTWVjaGFuaWMnKSBmcmFnc1tpZHhdID0gJ01lY2guJztcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZnJhZ3Muam9pbignICcpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBvcmRlcktleXMob2JqKSB7XHJcbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG9iaikuc29ydChmdW5jdGlvbiBrZXlPcmRlcihrMSwgazIpIHtcclxuICAgICAgICAgICAgaWYgKGsxIDwgazIpIHJldHVybiAtMTtcclxuICAgICAgICAgICAgaWYgKGsxID4gazIpIHJldHVybiArMTtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBpO1xyXG4gICAgICAgIGNvbnN0IGFmdGVyID0ge307XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgYWZ0ZXJba2V5c1tpXV0gPSBvYmpba2V5c1tpXV07XHJcbiAgICAgICAgICAgIGRlbGV0ZSBvYmpba2V5c1tpXV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBvYmpba2V5c1tpXV0gPSBhZnRlcltrZXlzW2ldXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgaGFzTW9kaWZpZXJzKGV2ZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIGV2ZW50ICYmIChldmVudC5zaGlmdEtleSB8fCBldmVudC5hbHRLZXkgfHwgZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZmlsdGVyKG9iaiwgY29tcCkge1xyXG4gICAgICAgIGNvbnN0IHJldE9iaiA9IHt9O1xyXG4gICAgICAgIGlmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiBvYmogIT09IG51bGwpIHtcclxuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMob2JqKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChjb21wKFtrZXksIHZhbHVlXSkpIHJldE9ialtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmV0T2JqO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBhZGRMYWJlbHMob2JqLCBsYWJlbCkge1xyXG4gICAgICAgIGlmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiBvYmogIT09IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKCFvYmouaGFzT3duUHJvcGVydHkoJ2xhYmVsJykgJiYgb2JqLmhhc093blByb3BlcnR5KCd2YWx1ZScpICYmIGxhYmVsICE9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgb2JqLmxhYmVsID0gbGFiZWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMob2JqKVxyXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoWywgdmFsdWVdKSA9PiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKVxyXG4gICAgICAgICAgICAgICAgLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4gSGVscGVycy5hZGRMYWJlbHModmFsdWUsIGtleSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiBIYW5kbGUgU2hhZG93cnVuIHN0eWxlIHNob3J0ZW5lZCBhdHRyaWJ1dGUgbmFtZXMgd2l0aCB0eXBpY2FsIHRocmVlIGxldHRlciBzaG9ydGVuaW5nLiAqL1xyXG4gICAgc3RhdGljIHNob3J0ZW5BdHRyaWJ1dGVMb2NhbGl6YXRpb24obGFiZWw6IHN0cmluZywgbGVuZ3RoOiBudW1iZXIgPSAzKTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCBuYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKGxhYmVsKTtcclxuXHJcbiAgICAgICAgaWYgKGxlbmd0aCA8PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuYW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG5hbWUubGVuZ3RoIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGxlbmd0aCA9IG5hbWUubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5hbWUuc2xpY2UoMCwgbGVuZ3RoKS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRUb2tlbihpZD86IHN0cmluZyk6IFRva2VuIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIGNhbnZhcy50b2tlbnMucGxhY2VhYmxlcykge1xyXG4gICAgICAgICAgICBpZiAodG9rZW4uaWQgPT09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9rZW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFNjZW5lVG9rZW4oc2NlbmVUb2tlbklkOiBzdHJpbmcpOiBUb2tlbiB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgY29uc3QgW3NjZW5lSWQsIHRva2VuSWRdID0gc2NlbmVUb2tlbklkLnNwbGl0KCcuJyk7XHJcblxyXG4gICAgICAgIGNvbnN0IGlzQWN0aXZlU2NlbmUgPSBzY2VuZUlkID09PSBjYW52YXM/LnNjZW5lLl9pZDtcclxuICAgICAgICBpZiAoaXNBY3RpdmVTY2VuZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY2FudmFzLnRva2Vucy5nZXQodG9rZW5JZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBCdWlsZCBUb2tlbiB1c2luZyBpdCdzIGRhdGEgZnJvbSB0aGUgY29ubmVjdGVkIHNjZW5lIGFzIGEgZmFsbGJhY2suXHJcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZCk7XHJcbiAgICAgICAgaWYgKCFzY2VuZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICBjb25zdCB0b2tlbkRhdGEgPSBzY2VuZS5kYXRhLnRva2Vucy5maW5kKCh0KSA9PiB0LmlkID09PSBOdW1iZXIodG9rZW5JZCkpO1xyXG4gICAgICAgIGlmICghdG9rZW5EYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgVG9rZW4odG9rZW5EYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0VXNlclRhcmdldHModXNlcj86IFVzZXIpOiBUb2tlbltdIHtcclxuICAgICAgICB1c2VyID0gdXNlciA/IHVzZXIgOiBnYW1lLnVzZXI7XHJcblxyXG4gICAgICAgIGlmICh1c2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHVzZXIudGFyZ2V0cyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgdXNlckhhc1RhcmdldHModXNlcj86IFVzZXIpOiBib29sZWFuIHtcclxuICAgICAgICB1c2VyID0gdXNlciA/IHVzZXIgOiBnYW1lLnVzZXI7XHJcblxyXG4gICAgICAgIHJldHVybiB1c2VyLnRhcmdldHMuc2l6ZSA+IDA7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIG1lYXN1cmVUb2tlbkRpc3RhbmNlKHRva2VuT3JpZ2luOiBUb2tlbiwgdG9rZW5EZXN0OiBUb2tlbik6IG51bWJlciB7XHJcbiAgICAgICAgaWYgKCF0b2tlbk9yaWdpbiB8fCAhdG9rZW5EZXN0KSByZXR1cm4gMDtcclxuXHJcbiAgICAgICAgY29uc3Qgb3JpZ2luID0gbmV3IFBJWEkuUG9pbnQoLi4uY2FudmFzLmdyaWQuZ2V0Q2VudGVyKHRva2VuT3JpZ2luLmRhdGEueCwgdG9rZW5PcmlnaW4uZGF0YS55KSk7XHJcbiAgICAgICAgY29uc3QgZGVzdCA9IG5ldyBQSVhJLlBvaW50KC4uLmNhbnZhcy5ncmlkLmdldENlbnRlcih0b2tlbkRlc3QuZGF0YS54LCB0b2tlbkRlc3QuZGF0YS55KSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGRpc3RhbmNlSW5HcmlkVW5pdHMgPSBjYW52YXMuZ3JpZC5tZWFzdXJlRGlzdGFuY2Uob3JpZ2luLCBkZXN0LCB7Z3JpZFNwYWNlczogdHJ1ZX0pO1xyXG4gICAgICAgIGNvbnN0IHNjZW5lVW5pdCA9IGNhbnZhcy5zY2VuZS5kYXRhLmdyaWRVbml0cztcclxuICAgICAgICAvLyBUT0RPOiBEZWZpbmUgd2VhcG9uIHJhbmdlIHVuaXRzIHNvbWV3aGVyZSAoc2V0dGluZ3MpXHJcbiAgICAgICAgcmV0dXJuIEhlbHBlcnMuY29udmVydExlbmd0aFVuaXQoZGlzdGFuY2VJbkdyaWRVbml0cywgc2NlbmVVbml0KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY29udmVydExlbmd0aFVuaXQobGVuZ3RoOiBudW1iZXIsIGZyb21Vbml0OiBzdHJpbmcpOiBudW1iZXIge1xyXG4gICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgIGZyb21Vbml0ID0gZnJvbVVuaXQudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICAgICAgaWYgKCFMRU5HVEhfVU5JVF9UT19NRVRFUlNfTVVMVElQTElFUlMuaGFzT3duUHJvcGVydHkoZnJvbVVuaXQpKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYERpc3RhbmNlIGNhbid0IGJlIGNvbnZlcnRlZCBmcm9tICR7ZnJvbVVuaXR9IHRvICR7TEVOR1RIX1VOSVR9YCk7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUm91bmQgZG93biBzaW5jZSBYLjggd2lsbCBoaXQgWCBhbmQgbm90IFgrMS5cclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihsZW5ndGggKiBMRU5HVEhfVU5JVF9UT19NRVRFUlNfTVVMVElQTElFUlNbZnJvbVVuaXRdKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0V2VhcG9uUmFuZ2UoZGlzdGFuY2U6IG51bWJlciwgcmFuZ2VzOiBSYW5nZXNUZW1wbGF0ZURhdGEpOiBSYW5nZVRlbXBsYXRlRGF0YSB7XHJcbiAgICAgICAgLy8gQXNzdW1lIHJhbmdlcyB0byBiZSBpbiBBU0Mgb3JkZXIgYW5kIHRvIGRlZmluZSB0aGVpciBtYXggcmFuZ2UuXHJcbiAgICAgICAgLy8gU2hvdWxkIG5vIHJhbmdlIGJlIGZvdW5kLCBhc3N1bWUgZGlzdGFuY2UgdG8gYmUgb3V0IG9mIHJhbmdlLlxyXG4gICAgICAgIGNvbnN0IHJhbmdlS2V5ID0gT2JqZWN0LmtleXMocmFuZ2VzKS5maW5kKHJhbmdlID0+IGRpc3RhbmNlIDwgcmFuZ2VzW3JhbmdlXS5kaXN0YW5jZSk7XHJcbiAgICAgICAgaWYgKHJhbmdlS2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiByYW5nZXNbcmFuZ2VLZXldO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHtleHRyZW1lfSA9IHJhbmdlcztcclxuICAgICAgICAgICAgcmV0dXJuIEhlbHBlcnMuY3JlYXRlUmFuZ2VEZXNjcmlwdGlvbignU1I1Lk91dE9mUmFuZ2UnLCBleHRyZW1lLmRpc3RhbmNlLCBTUi5jb21iYXQuZW52aXJvbm1lbnRhbC5yYW5nZV9tb2RpZmllcnMub3V0X29mX3JhbmdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldENvbnRyb2xsZWRUb2tlbnMoKTogVG9rZW5bXSB7XHJcbiAgICAgICAgcmV0dXJuIGNhbnZhcy50b2tlbnMuY29udHJvbGxlZDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0U2VsZWN0ZWRBY3RvcnNPckNoYXJhY3RlcigpOiBTUjVBY3RvcltdIHtcclxuICAgICAgICBjb25zdCB0b2tlbnMgPSBIZWxwZXJzLmdldENvbnRyb2xsZWRUb2tlbnMoKTtcclxuICAgICAgICBjb25zdCBhY3RvcnMgPSB0b2tlbnMubWFwKHRva2VuID0+IHRva2VuLmFjdG9yKSBhcyBTUjVBY3RvcltdO1xyXG5cclxuICAgICAgICAvLyBUcnkgdG8gZGVmYXVsdCB0byBhIHVzZXJzIGNoYXJhY3Rlci5cclxuICAgICAgICBpZiAoYWN0b3JzLmxlbmd0aCA9PT0gMCAmJiBnYW1lLnVzZXI/LmNoYXJhY3Rlcikge1xyXG4gICAgICAgICAgICBhY3RvcnMucHVzaChnYW1lLnVzZXIuY2hhcmFjdGVyIGFzIFNSNUFjdG9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBhY3RvcnM7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNyZWF0ZVJhbmdlRGVzY3JpcHRpb24obGFiZWw6IHN0cmluZywgZGlzdGFuY2U6IG51bWJlciwgbW9kaWZpZXI6IG51bWJlcik6IFJhbmdlVGVtcGxhdGVEYXRhIHtcclxuICAgICAgICBsYWJlbCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShsYWJlbCk7XHJcbiAgICAgICAgcmV0dXJuIHtsYWJlbCwgZGlzdGFuY2UsIG1vZGlmaWVyfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjb252ZXJ0SW5kZXhlZE9iamVjdFRvQXJyYXkoaW5kZXhlZE9iamVjdDogb2JqZWN0KTogb2JqZWN0W10ge1xyXG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhpbmRleGVkT2JqZWN0KS5tYXAoKGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChOdW1iZXIuaXNOYU4oaW5kZXgpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0FuIG9iamVjdCB3aXRoIG5vIG51bWVyaWNhbCBpbmRleCB3YXMgZ2l2ZW4sIHdoaWNoIGlzIGxpa2VseSBhIGJ1Zy4nLCBpbmRleGVkT2JqZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaW5kZXhlZE9iamVjdFtpbmRleF07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldENoYXRTcGVha2VyTmFtZShhY3RvcjogU1I1QWN0b3IpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmICghYWN0b3IpIHJldHVybiAnJztcclxuXHJcbiAgICAgICAgY29uc3QgdXNlVG9rZW5OYW1lRm9yQ2hhdE91dHB1dCA9IGdhbWUuc2V0dGluZ3MuZ2V0KFNZU1RFTV9OQU1FLCBGTEFHUy5TaG93VG9rZW5OYW1lRm9yQ2hhdE91dHB1dCk7XHJcbiAgICAgICAgY29uc3QgdG9rZW4gPSBhY3Rvci5nZXRUb2tlbigpO1xyXG5cclxuICAgICAgICBpZiAodXNlVG9rZW5OYW1lRm9yQ2hhdE91dHB1dCAmJiB0b2tlbikgcmV0dXJuIHRva2VuLmRhdGEubmFtZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGFjdG9yLm5hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNyZWF0ZURhbWFnZURhdGEodmFsdWU6IG51bWJlciwgdHlwZTogRGFtYWdlVHlwZSwgYXA6IG51bWJlciA9IDAsIGVsZW1lbnQ6IERhbWFnZUVsZW1lbnQgPSAnJyk6IERhbWFnZURhdGEge1xyXG4gICAgICAgIGNvbnN0IGRhbWFnZSA9IGR1cGxpY2F0ZShEYXRhVGVtcGxhdGVzLmRhbWFnZSk7XHJcbiAgICAgICAgZGFtYWdlLmJhc2UgPSB2YWx1ZTtcclxuICAgICAgICBkYW1hZ2UudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICBkYW1hZ2UudHlwZS5iYXNlID0gdHlwZTtcclxuICAgICAgICBkYW1hZ2UudHlwZS52YWx1ZSA9IHR5cGU7XHJcbiAgICAgICAgZGFtYWdlLmFwLmJhc2UgPSBhcDtcclxuICAgICAgICBkYW1hZ2UuYXAudmFsdWUgPSBhcDtcclxuICAgICAgICBkYW1hZ2UuZWxlbWVudC5iYXNlID0gZWxlbWVudDtcclxuICAgICAgICBkYW1hZ2UuZWxlbWVudC52YWx1ZSA9IGVsZW1lbnQ7XHJcblxyXG4gICAgICAgIHJldHVybiBkYW1hZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIE1vZGlmaWVzIGdpdmVuIGRhbWFnZSB2YWx1ZSBhbmQgcmV0dXJucyBib3RoIG9yaWdpbmFsIGFuZCBtb2RpZmllZCBkYW1hZ2VcclxuICAgICAqXHJcbiAgICAgKiBGb3IgYmV0dGVyIHJlYWRhYmlsaXR5IHJlZHVjZURhbWFnZUJ5SGl0cyB3cmFwcyB0aGlzIG1ldGhvZCB0byBhdm9pZCBuZWdhdGl2ZSBwYXJhbXMgaW4gdGhlIGNhbGwgc2lnbmF0dXJlLlxyXG4gICAgICogc28gaW5zdGVhZCBvZlxyXG4gICAgICogPiBtb2RpZnlEYW1hZ2VCeUhpdHMoaW5jb21pbmcsIC1oaXRzLCBsYWJlbClcclxuICAgICAqIGRvIHRoaXMgaW5zdGVhZFxyXG4gICAgICogPiByZWR1Y2VEYW1hZ2VCeUhpdHMoaW5jb21pbmcsIGhpdHMsIGxhYmVsKVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbmNvbWluZyBBIERhbWFnZURhdGEgdmFsdWUgdG8gYmUgbW9kaWZpZWQgZnJvbVxyXG4gICAgICogQHBhcmFtIGhpdHMgUG9zaXRpdmUgb3IgbmVnYXRpdmUgaGl0cyB0byBjaGFuZ2UgdGhlIGRhbWFnZSB2YWx1ZSB3aXRoLlxyXG4gICAgICogQHBhcmFtIG1vZGlmaWNhdGlvbkxhYmVsIFRoZSB0cmFuc2xhdGFibGUgbGFiZWwgZm9yIHRoZSBtb2RpZmljYXRpb25cclxuICAgICAqL1xyXG4gICAgc3RhdGljIG1vZGlmeURhbWFnZUJ5SGl0cyhpbmNvbWluZzogRGFtYWdlRGF0YSwgaGl0czogbnVtYmVyLCBtb2RpZmljYXRpb25MYWJlbDogc3RyaW5nKTogTW9kaWZpZWREYW1hZ2VEYXRhIHtcclxuICAgICAgICBjb25zdCBtb2RpZmllZCA9IGR1cGxpY2F0ZShpbmNvbWluZyk7XHJcbiAgICAgICAgbW9kaWZpZWQubW9kID0gUGFydHNMaXN0LkFkZFVuaXF1ZVBhcnQobW9kaWZpZWQubW9kLCBtb2RpZmljYXRpb25MYWJlbCwgaGl0cyk7XHJcbiAgICAgICAgbW9kaWZpZWQudmFsdWUgPSBIZWxwZXJzLmNhbGNUb3RhbChtb2RpZmllZCwge21pbjogMH0pO1xyXG5cclxuICAgICAgICByZXR1cm4ge2luY29taW5nLCBtb2RpZmllZH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFJlZHVjZXMgZ2l2ZW4gZGFtYWdlIHZhbHVlIGFuZCByZXR1cm5zIGJvdGggb3JpZ2luYWwgYW5kIG1vZGlmaWVkIGRhbWFnZS5cclxuICAgICAqXHJcbiAgICAgKiBTaG91bGQgeW91IHdhbnQgUkFJU0UgdGhlIGRhbWFnZSB2YWx1ZSwgdXNlIG1vZGlmeURhbWFnZUJ5SGl0cyBkaXJlY3RseS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5jb21pbmcgQSBEYW1hZ2VEYXRhIHZhbHVlIHRvIGJlIG1vZGlmaWVkIGZyb21cclxuICAgICAqIEBwYXJhbSBoaXRzIFBvc2l0aXZlIGhpdHMgdG8gcmVkdWNlIHRoZSBkYW1hZ2UgdmFsdWUgd2l0aCEgU2hvdWxkIHRoZSBoaXRzIGFtb3VudCBiZSBuZWdhdGl2ZSwgdXNlIG1vZGlmeURhbWFnZUJ5SGl0cy5cclxuICAgICAqIEBwYXJhbSBtb2RpZmljYXRpb25MYWJlbCBUaGUgdHJhbnNsYXRhYmxlIGxhYmVsIGZvciB0aGUgbW9kaWZpY2F0aW9uXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyByZWR1Y2VEYW1hZ2VCeUhpdHMoaW5jb21pbmc6IERhbWFnZURhdGEsIGhpdHM6IG51bWJlciwgbW9kaWZpY2F0aW9uTGFiZWw6IHN0cmluZyk6IE1vZGlmaWVkRGFtYWdlRGF0YSB7XHJcbiAgICAgICAgaWYgKGhpdHMgPCAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignSGVscGVycy5yZWR1Y2VEYW1hZ2VCeUhpdHMgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIHdpdGggcG9zaXRpdmUgaGl0cyB2YWx1ZXMgdG8gYXZvaWQgY29uZnVzaW9uJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBIZWxwZXJzLm1vZGlmeURhbWFnZUJ5SGl0cyhpbmNvbWluZywgLWhpdHMsIG1vZGlmaWNhdGlvbkxhYmVsKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYXN5bmMgY29uZmlybURlbGV0aW9uKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIGNvbnN0IGRpYWxvZyA9IG5ldyBEZWxldGVDb25maXJtYXRpb25EaWFsb2coKTtcclxuICAgICAgICBhd2FpdCBkaWFsb2cuc2VsZWN0KCk7XHJcbiAgICAgICAgcmV0dXJuICFkaWFsb2cuY2FuY2VsZWQgJiYgZGlhbG9nLnNlbGVjdGVkQnV0dG9uID09PSAnZGVsZXRlJztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGFuIFNraWxsRmllbGQgaW50byB0aGUgU2tpbGxzIGRhdGEgcGF0aCBkdXJpbmcgdGhlIFNraWxsIGNyZWF0aW9uIHByb2Nlc3MuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHNraWxsRGF0YVBhdGggQ291bGQgYmUgJ2RhdGEuc2tpbGxzLmFjdGl2ZScgb3IgJ2RhdGEuc2tpbGwubGFuZ3VhZ2UudmFsdWUnIG9yIG1vcmVcclxuICAgICAqIEBwYXJhbSBza2lsbEZpZWxkIEEgU2tpbGxGaWVsZCB3aXRoIHdoYXRldmVyIHZhbHVlcy4gWW91IGNvdWxkIHVzZSBEZWZhdWx0VmFsdWVzLnNraWxsRGF0YSB0byBjcmVhdGUgb25lLlxyXG4gICAgICogQHBhcmFtIGlkTGVuZ3RoIEhvdyBsb25nIHNob3VsZCB0aGUgaWQgKEdVSUQpIGJlP1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0UmFuZG9tSWRTa2lsbEZpZWxkRGF0YUVudHJ5KHNraWxsRGF0YVBhdGg6IHN0cmluZywgc2tpbGxGaWVsZDogU2tpbGxGaWVsZCwgaWRMZW5ndGg6IG51bWJlciA9IERFRkFVTFRfSURfTEVOR1RIKTogeyBpZDogc3RyaW5nLCB1cGRhdGVTa2lsbERhdGE6IHsgW3NraWxsRGF0YVBhdGg6IHN0cmluZ106IHsgW2lkOiBzdHJpbmddOiBTa2lsbEZpZWxkIH0gfSB9IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAoIXNraWxsRGF0YVBhdGggfHwgc2tpbGxEYXRhUGF0aC5sZW5ndGggPT09IDApIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgaWQgPSByYW5kb21JRChpZExlbmd0aCk7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlU2tpbGxEYXRhID0ge1xyXG4gICAgICAgICAgICBbc2tpbGxEYXRhUGF0aF06IHtbaWRdOiBza2lsbEZpZWxkfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICB1cGRhdGVTa2lsbERhdGFcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEEgc2ltcGxlIGhlbHBlciB0byBkZWxldGUgZXhpc3RpbmcgZW50aXR5IGRhdGEga2V5cy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcGF0aCBUaGUgbWFpbiBkYXRhIHBhdGggYXMgZG90ZWQgc3RyaW5nIHJlbGF0aXZlIGZyb20gdGhlIGl0ZW0gdHlwZSBkYXRhIChub3QgZW50aXR5IGRhdGEpLiBkYXRhLnNraWxscy5hY3RpdmVcclxuICAgICAqIEBwYXJhbSBrZXkgVGhlIHNpbmdsZSBzdWIgcHJvcGVydHkgd2l0aGluIHRoZSBwYXRoIHRoYXQncyBtZWFudCB0byBiZSBkZWxldGVkLiAndGVzdCdcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIEFuIGV4cGVjdGVkIHJldHVybiBvYmplY3QgY291bGQgbG9vayBsaWtlIHRoaXM6IHsnZGF0YS5za2lsbHMuYWN0aXZlJzogeyctPVBpc3RvbHMnOiBudWxsfX0gYW5kIHdvdWxkXHJcbiAgICAgKiAgICAgICAgIHJlbW92ZSB0aGUgUGlzdG9scyBrZXkgZnJvbSB0aGUgJ2RhdGEuc2tpbGxzLmFjdGl2ZScgcGF0aCB3aXRoaW4gRW50aXR5LmRhdGEuZGF0YS5za2lsbHMuYWN0aXZlLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0RGVsZXRlRGF0YUVudHJ5KHBhdGg6IHN0cmluZywga2V5OiBzdHJpbmcpOiB7W3BhdGg6IHN0cmluZ106IHtba2V5OiBzdHJpbmddOiBudWxsfX0ge1xyXG4gICAgICAgIC8vIEVudGl0eS51cGRhdGUgdXRpbGl6ZXMgdGhlIG1lcmdlT2JqZWN0IGZ1bmN0aW9uIHdpdGhpbiBGb3VuZHJ5LlxyXG4gICAgICAgIC8vIFRoYXQgZnVuY3Rpb25zIGRvY3VtZW50YXRpb24gYWxsb3dzIHByb3BlcnR5IGRlbGV0aW9uIHVzaW5nIHRoZSAtPSBwcmVmaXggYmVmb3JlIHByb3BlcnR5IGtleS5cclxuICAgICAgICByZXR1cm4ge1twYXRoXToge1tgLT0ke2tleX1gXTogbnVsbH19O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWxwaGFiZXRpY2FsbHkgc29ydCBza2lsbHMgZWl0aGVyIGJ5IHRoZWlyIHRyYW5zbGF0ZWQgbGFiZWwuIFNob3VsZCBhIHNraWxsIG5vdCBoYXZlIG9uZSwgdXNlIHRoZSBuYW1lIGFzIGFcclxuICAgICAqIGZhbGxiYWNrLlxyXG4gICAgICpcclxuICAgICAqIFNvcnRpbmcgc2hvdWxkIGJlIGF3YXJlIG9mIFVURi04LCBob3dldmVyIHBsZWFzZSBibGFtZSBKYXZhU2NyaXB0IGlmIGl0J3Mgbm90LiA6KVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBza2lsbHNcclxuICAgICAqIEBwYXJhbSBhc2MgU2V0IHRvIHRydWUgZm9yIGFzY2VuZGluZyBzb3J0aW5nIG9yZGVyIGFuZCB0byBmYWxzZSBmb3IgZGVzY2VuZGluZyBvcmRlci5cclxuICAgICAqIEByZXR1cm4gU29ydGVkIFNraWxscyBnaXZlbiBieSB0aGUgc2tpbGxzIHBhcmFtZXRlclxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgc29ydFNraWxscyhza2lsbHM6IFNraWxscywgYXNjOiBib29sZWFuPXRydWUpOiBTa2lsbHMge1xyXG4gICAgICAgIC8vIEZpbHRlciBlbnRyaWVzIGluc3RlYWQgb2YgdmFsdWVzIHRvIGhhdmUgYSBzdG9yZSBvZiBpZHMgZm9yIGVhc3kgcmVidWlsZC5cclxuICAgICAgICBjb25zdCBzb3J0ZWRFbnRyaWVzID0gT2JqZWN0LmVudHJpZXMoc2tpbGxzKS5zb3J0KChbYUlkLCBhXSwgW2JJZCwgYl0pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29tcGFyYXRvckEgPSBhLmxhYmVsID8gZ2FtZS5pMThuLmxvY2FsaXplKGEubGFiZWwpIDogYS5uYW1lO1xyXG4gICAgICAgICAgICBjb25zdCBjb21wYXJhdG9yQiA9IGIubGFiZWwgPyBnYW1lLmkxOG4ubG9jYWxpemUoYi5sYWJlbCkgOiBiLm5hbWU7XHJcbiAgICAgICAgICAgIC8vIFVzZSBTdHJpbmcubG9jYWxlQ29tcGFyZSBpbnN0ZWFkIG9mIHRoZSA+IE9wZXJhdG9yIHRvIHN1cHBvcnQgb3RoZXIgYWxwaGFiZXRzLlxyXG4gICAgICAgICAgICBpZiAoYXNjKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBhcmF0b3JBLmxvY2FsZUNvbXBhcmUoY29tcGFyYXRvckIpID09PSAxID8gMSA6IC0xO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcGFyYXRvckEubG9jYWxlQ29tcGFyZShjb21wYXJhdG9yQikgPT09IDEgPyAxIDogLTE7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFJlYnVpbGQgdGhlIFNraWxscyB0eXBlIHVzaW5nIHRoZSBlYXJsaWVyIGVudHJpZXMuXHJcbiAgICAgICAgY29uc3Qgc29ydGVkQXNPYmplY3QgPSB7fTtcclxuICAgICAgICBmb3IgKGNvbnN0IFtpZCwgc2tpbGxdIG9mIHNvcnRlZEVudHJpZXMpIHtcclxuICAgICAgICAgICAgc29ydGVkQXNPYmplY3RbaWRdID0gc2tpbGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gc29ydGVkQXNPYmplY3Q7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgU1I1IH0gZnJvbSAnLi9jb25maWcnO1xyXG5pbXBvcnQgeyBNaWdyYXRvciB9IGZyb20gJy4vbWlncmF0b3IvTWlncmF0b3InO1xyXG5pbXBvcnQgeyByZWdpc3RlclN5c3RlbVNldHRpbmdzIH0gZnJvbSAnLi9zZXR0aW5ncyc7XHJcbmltcG9ydCB7IFNZU1RFTV9OQU1FIH0gZnJvbSAnLi9jb25zdGFudHMnO1xyXG5pbXBvcnQgeyBTUjVBY3RvciB9IGZyb20gJy4vYWN0b3IvU1I1QWN0b3InO1xyXG5pbXBvcnQgeyBTUjVBY3RvclNoZWV0IH0gZnJvbSAnLi9hY3Rvci9TUjVBY3RvclNoZWV0JztcclxuaW1wb3J0IHsgU1I1SXRlbSB9IGZyb20gJy4vaXRlbS9TUjVJdGVtJztcclxuaW1wb3J0IHsgU1I1SXRlbVNoZWV0IH0gZnJvbSAnLi9pdGVtL1NSNUl0ZW1TaGVldCc7XHJcbmltcG9ydCB7IFNoYWRvd3J1blJvbGxlciB9IGZyb20gJy4vcm9sbHMvU2hhZG93cnVuUm9sbGVyJztcclxuaW1wb3J0IHsgSGVscGVycyB9IGZyb20gJy4vaGVscGVycyc7XHJcbmltcG9ydCB7IEhhbmRsZWJhck1hbmFnZXIgfSBmcm9tICcuL2hhbmRsZWJhcnMvSGFuZGxlYmFyTWFuYWdlcic7XHJcbmltcG9ydCB7IG1lYXN1cmVEaXN0YW5jZSB9IGZyb20gJy4vY2FudmFzJztcclxuaW1wb3J0ICogYXMgY2hhdCBmcm9tICcuL2NoYXQnO1xyXG5pbXBvcnQgeyBjcmVhdGVJdGVtTWFjcm8sIHJvbGxJdGVtTWFjcm8gfSBmcm9tICcuL21hY3Jvcyc7XHJcblxyXG5pbXBvcnQgeyBPdmVyd2F0Y2hTY29yZVRyYWNrZXIgfSBmcm9tICcuL2FwcHMvZ210b29scy9PdmVyd2F0Y2hTY29yZVRyYWNrZXInO1xyXG5pbXBvcnQgeyBTUjVDb21iYXQgfSBmcm9tICcuL2NvbWJhdC9TUjVDb21iYXQnO1xyXG5pbXBvcnQgeyBJbXBvcnQgfSBmcm9tICcuL2ltcG9ydGVyL2FwcHMvaW1wb3J0LWZvcm0nO1xyXG5pbXBvcnQge0NoYW5nZWxvZ0FwcGxpY2F0aW9ufSBmcm9tIFwiLi9hcHBzL0NoYW5nZWxvZ0FwcGxpY2F0aW9uXCI7XHJcbmltcG9ydCB7RW52TW9kaWZpZXJzQXBwbGljYXRpb259IGZyb20gXCIuL2FwcHMvRW52TW9kaWZpZXJzQXBwbGljYXRpb25cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBIb29rc01hbmFnZXIge1xyXG4gICAgc3RhdGljIHJlZ2lzdGVySG9va3MoKSB7XHJcbiAgICAgICAgLy8gUmVnaXN0ZXIgeW91ciBoaWdoZXN0IGxldmVsIGhvb2sgY2FsbGJhY2tzIGhlcmUgZm9yIGEgcXVpY2sgb3ZlcnZpZXcgb2Ygd2hhdCdzIGhvb2tlZCBpbnRvLlxyXG5cclxuICAgICAgICBIb29rcy5vbmNlKCdpbml0JywgSG9va3NNYW5hZ2VyLmluaXQpO1xyXG5cclxuICAgICAgICBIb29rcy5vbignY2FudmFzSW5pdCcsIEhvb2tzTWFuYWdlci5jYW52YXNJbml0KTtcclxuICAgICAgICBIb29rcy5vbigncmVhZHknLCBIb29rc01hbmFnZXIucmVhZHkpO1xyXG4gICAgICAgIEhvb2tzLm9uKCdyZW5kZXJDaGF0TWVzc2FnZScsIEhvb2tzTWFuYWdlci5yZW5kZXJDaGF0TWVzc2FnZSk7XHJcbiAgICAgICAgSG9va3Mub24oJ2dldENoYXRMb2dFbnRyeUNvbnRleHQnLCBjaGF0LmFkZENoYXRNZXNzYWdlQ29udGV4dE9wdGlvbnMpO1xyXG4gICAgICAgIEhvb2tzLm9uKCdob3RiYXJEcm9wJywgSG9va3NNYW5hZ2VyLmhvdGJhckRyb3ApO1xyXG4gICAgICAgIEhvb2tzLm9uKCdyZW5kZXJTY2VuZUNvbnRyb2xzJywgSG9va3NNYW5hZ2VyLnJlbmRlclNjZW5lQ29udHJvbHMpO1xyXG4gICAgICAgIEhvb2tzLm9uKCdnZXRTY2VuZUNvbnRyb2xCdXR0b25zJywgSG9va3NNYW5hZ2VyLmdldFNjZW5lQ29udHJvbEJ1dHRvbnMpO1xyXG4gICAgICAgIEhvb2tzLm9uKCdnZXRDb21iYXRUcmFja2VyRW50cnlDb250ZXh0JywgU1I1Q29tYmF0LmFkZENvbWJhdFRyYWNrZXJDb250ZXh0T3B0aW9ucyk7XHJcbiAgICAgICAgSG9va3Mub24oJ3JlbmRlckl0ZW1EaXJlY3RvcnknLCBIb29rc01hbmFnZXIucmVuZGVySXRlbURpcmVjdG9yeSk7XHJcbiAgICAgICAgSG9va3Mub24oJ3JlbmRlclRva2VuSFVEJywgRW52TW9kaWZpZXJzQXBwbGljYXRpb24uYWRkVG9rZW5IVURGaWVsZHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBpbml0KCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBMb2FkaW5nIFNoYWRvd3J1biA1ZSBTeXN0ZW1cclxuX19fX19fX19fX19fX19fX19fX1xyXG4gX19fX19fX19fX18gX19fX18gXHJcbi8gIF9fX3wgX19fIFxcXFwgIF9fX3xcclxuXFxcXCBcXGAtLS58IHxfLyAvX19fIFxcXFwgXHJcbiBcXGAtLS4gXFxcXCAgICAvICAgIFxcXFwgXFxcXFxyXG4vXFxcXF9fLyAvIHxcXFxcIFxcXFwvXFxcXF9fLyAvXHJcblxcXFxfX19fL1xcXFxffCBcXFxcX1xcXFxfX19fLyBcclxuPT09PT09PT09PT09PT09PT09PVxyXG5gKTtcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIGEgc2hhZG93cnVuNWUgbmFtZXNwYWNlIHdpdGhpbiB0aGUgZ2FtZSBnbG9iYWxcclxuICAgICAgICBnYW1lWydzaGFkb3dydW41ZSddID0ge1xyXG4gICAgICAgICAgICBTUjVBY3RvcixcclxuICAgICAgICAgICAgU2hhZG93cnVuUm9sbGVyLFxyXG4gICAgICAgICAgICBTUjVJdGVtLFxyXG4gICAgICAgICAgICByb2xsSXRlbU1hY3JvLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIENPTkZJRy5TUjUgPSBTUjU7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIENPTkZJRy5BY3Rvci5lbnRpdHlDbGFzcyA9IFNSNUFjdG9yO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBDT05GSUcuSXRlbS5lbnRpdHlDbGFzcyA9IFNSNUl0ZW07XHJcbiAgICAgICAgQ09ORklHLkNvbWJhdC5lbnRpdHlDbGFzcyA9IFNSNUNvbWJhdDtcclxuXHJcbiAgICAgICAgcmVnaXN0ZXJTeXN0ZW1TZXR0aW5ncygpO1xyXG5cclxuICAgICAgICAvLyBSZWdpc3RlciBzaGVldCBhcHBsaWNhdGlvbiBjbGFzc2VzXHJcbiAgICAgICAgLy8gTk9URTogU2VlIGRuZDVlIGZvciBhIG11bHRpIGNsYXNzIGFwcHJvYWNoIGZvciBhbGwgYWN0b3IgdHlwZXMgdXNpbmcgdGhlIHR5cGVzIGFycmF5IGluIEFjdG9ycy5yZWdpc3RlclNoZWV0XHJcbiAgICAgICAgQWN0b3JzLnVucmVnaXN0ZXJTaGVldCgnY29yZScsIEFjdG9yU2hlZXQpO1xyXG4gICAgICAgIEFjdG9ycy5yZWdpc3RlclNoZWV0KFNZU1RFTV9OQU1FLCBTUjVBY3RvclNoZWV0LCB7XHJcbiAgICAgICAgICAgIGxhYmVsOiBcIlNSNS5TaGVldEFjdG9yXCIsXHJcbiAgICAgICAgICAgIG1ha2VEZWZhdWx0OiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgSXRlbXMudW5yZWdpc3RlclNoZWV0KCdjb3JlJywgSXRlbVNoZWV0KTtcclxuICAgICAgICBJdGVtcy5yZWdpc3RlclNoZWV0KFNZU1RFTV9OQU1FLCBTUjVJdGVtU2hlZXQsIHtcclxuICAgICAgICAgICAgbGFiZWw6IFwiU1I1LlNoZWV0SXRlbVwiLFxyXG4gICAgICAgICAgICBtYWtlRGVmYXVsdDogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBbJ3JlbmRlclNSNUFjdG9yU2hlZXQnLCAncmVuZGVyU1I1SXRlbVNoZWV0J10uZm9yRWFjaCgocykgPT4ge1xyXG4gICAgICAgICAgICBIb29rcy5vbihzLCAoYXBwLCBodG1sKSA9PiBIZWxwZXJzLnNldHVwQ3VzdG9tQ2hlY2tib3goYXBwLCBodG1sKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIEhhbmRsZWJhck1hbmFnZXIubG9hZFRlbXBsYXRlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBhc3luYyByZWFkeSgpIHtcclxuICAgICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcclxuICAgICAgICAgICAgYXdhaXQgTWlncmF0b3IuQmVnaW5NaWdyYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChDaGFuZ2Vsb2dBcHBsaWNhdGlvbi5zaG93QXBwbGljYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBDaGFuZ2Vsb2dBcHBsaWNhdGlvbigpLnJlbmRlcih0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRPRE8gbWFrZSBiYXNlZCBvbiBmb3VuZHJ5IHZlcnNpb25cclxuICAgICAgICBjb25zdCBkaWNlSWNvblNlbGVjdG9yID0gJyNjaGF0LWNvbnRyb2xzIC5yb2xsLXR5cGUtc2VsZWN0IC5mYS1kaWNlLWQyMCc7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgZGljZUljb25TZWxlY3RvciwgKCkgPT4gU2hhZG93cnVuUm9sbGVyLnByb21wdFJvbGwoKSk7XHJcbiAgICAgICAgY29uc3QgZGljZUljb25TZWxlY3Rvck5ldyA9ICcjY2hhdC1jb250cm9scyAuY2hhdC1jb250cm9sLWljb24gLmZhLWRpY2UtZDIwJztcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCBkaWNlSWNvblNlbGVjdG9yTmV3LCAoKSA9PiBTaGFkb3dydW5Sb2xsZXIucHJvbXB0Um9sbCgpKTtcclxuXHJcbiAgICAgICAgLy8gY29uc3QgdGFyZ2V0ID0gZ2FtZS5zY2VuZXMuZW50cmllc1swXTtcclxuICAgICAgICAvLyBjb25zb2xlLmVycm9yKCdzY2VuZScsIHRhcmdldCk7XHJcbiAgICAgICAgLy8gYXdhaXQgbmV3IEVudk1vZGlmaWVyc0FwcGxpY2F0aW9uKHRhcmdldCkucmVuZGVyKHRydWUpO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gY29uc3QgdG9rZW4gPSBjYW52YXMudG9rZW5zLnBsYWNlYWJsZXNbMF07XHJcbiAgICAgICAgLy8gY29uc29sZS5lcnJvcigndG9rZW4nLCB0b2tlbik7XHJcbiAgICAgICAgLy8gYXdhaXQgbmV3IEVudk1vZGlmaWVyc0FwcGxpY2F0aW9uKHRva2VuKS5yZW5kZXIodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNhbnZhc0luaXQoKSB7XHJcbiAgICAgICAgY2FudmFzLmdyaWQuZGlhZ29uYWxSdWxlID0gZ2FtZS5zZXR0aW5ncy5nZXQoU1lTVEVNX05BTUUsICdkaWFnb25hbE1vdmVtZW50Jyk7XHJcbiAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgLy8gU3F1YXJlR3JpZCBpc24ndCB0eXBlZC5cclxuICAgICAgICBTcXVhcmVHcmlkLnByb3RvdHlwZS5tZWFzdXJlRGlzdGFuY2VzID0gbWVhc3VyZURpc3RhbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBob3RiYXJEcm9wKGJhciwgZGF0YSwgc2xvdCkge1xyXG4gICAgICAgIGlmIChkYXRhLnR5cGUgIT09ICdJdGVtJykgcmV0dXJuO1xyXG5cclxuICAgICAgICBjcmVhdGVJdGVtTWFjcm8oZGF0YS5kYXRhLCBzbG90KTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHJlbmRlclNjZW5lQ29udHJvbHMoY29udHJvbHMsIGh0bWwpIHtcclxuICAgICAgICBodG1sLmZpbmQoJ1tkYXRhLXRvb2w9XCJvdmVyd2F0Y2gtc2NvcmUtdHJhY2tlclwiXScpLm9uKCdjbGljaycsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBuZXcgT3ZlcndhdGNoU2NvcmVUcmFja2VyKCkucmVuZGVyKHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRTY2VuZUNvbnRyb2xCdXR0b25zKGNvbnRyb2xzKSB7XHJcbiAgICAgICAgY29uc3QgdG9rZW5Db250cm9scyA9IGNvbnRyb2xzLmZpbmQoKGMpID0+IGMubmFtZSA9PT0gJ3Rva2VuJyk7XHJcblxyXG4gICAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xyXG4gICAgICAgICAgICB0b2tlbkNvbnRyb2xzLnRvb2xzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ292ZXJ3YXRjaC1zY29yZS10cmFja2VyJyxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiAnQ09OVFJPTFMuU1I1Lk92ZXJ3YXRjaFNjb3JlVHJhY2tlcicsXHJcbiAgICAgICAgICAgICAgICBpY29uOiAnZmFzIGZhLW5ldHdvcmstd2lyZWQnLFxyXG4gICAgICAgICAgICAgICAgYnV0dG9uOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdG9rZW5Db250cm9scy50b29scy5wdXNoKEVudk1vZGlmaWVyc0FwcGxpY2F0aW9uLmdldENvbnRyb2woKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHJlbmRlckNoYXRNZXNzYWdlKGFwcCwgaHRtbCkge1xyXG4gICAgICAgIGNoYXQuYWRkUm9sbExpc3RlbmVycyhhcHAsIGh0bWwpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByZW5kZXJJdGVtRGlyZWN0b3J5KGFwcDogQXBwbGljYXRpb24sIGh0bWw6IEpRdWVyeSkge1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9ICQoJzxidXR0b24+SW1wb3J0IENodW1tZXIgRGF0YTwvYnV0dG9uPicpO1xyXG4gICAgICAgIGh0bWwuZmluZCgnZm9vdGVyJykuYmVmb3JlKGJ1dHRvbik7XHJcbiAgICAgICAgYnV0dG9uLm9uKCdjbGljaycsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBuZXcgSW1wb3J0KCkucmVuZGVyKHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFdlYXBvbkltcG9ydGVyIH0gZnJvbSAnLi4vaW1wb3J0ZXIvV2VhcG9uSW1wb3J0ZXInO1xyXG5pbXBvcnQgeyBBcm1vckltcG9ydGVyIH0gZnJvbSAnLi4vaW1wb3J0ZXIvQXJtb3JJbXBvcnRlcic7XHJcbmltcG9ydCB7IERhdGFJbXBvcnRlciB9IGZyb20gJy4uL2ltcG9ydGVyL0RhdGFJbXBvcnRlcic7XHJcbmltcG9ydCB7IEFtbW9JbXBvcnRlciB9IGZyb20gJy4uL2ltcG9ydGVyL0FtbW9JbXBvcnRlcic7XHJcbmltcG9ydCB7IE1vZEltcG9ydGVyIH0gZnJvbSAnLi4vaW1wb3J0ZXIvTW9kSW1wb3J0ZXInO1xyXG5pbXBvcnQgeyBTcGVsbEltcG9ydGVyIH0gZnJvbSAnLi4vaW1wb3J0ZXIvU3BlbGxJbXBvcnRlcic7XHJcbmltcG9ydCB7IFF1YWxpdHlJbXBvcnRlciB9IGZyb20gJy4uL2ltcG9ydGVyL1F1YWxpdHlJbXBvcnRlcic7XHJcbmltcG9ydCB7IENvbXBsZXhGb3JtSW1wb3J0ZXIgfSBmcm9tICcuLi9pbXBvcnRlci9Db21wbGV4Rm9ybUltcG9ydGVyJztcclxuaW1wb3J0IHsgV2FyZUltcG9ydGVyIH0gZnJvbSAnLi4vaW1wb3J0ZXIvV2FyZUltcG9ydGVyJztcclxuaW1wb3J0IHsgQ3JpdHRlclBvd2VySW1wb3J0ZXIgfSBmcm9tICcuLi9pbXBvcnRlci9Dcml0dGVyUG93ZXJJbXBvcnRlcic7XHJcbmltcG9ydCB7IEltcG9ydEhlbHBlciwgSW1wb3J0TW9kZSB9IGZyb20gJy4uL2hlbHBlci9JbXBvcnRIZWxwZXInO1xyXG5pbXBvcnQge0RldmljZUltcG9ydGVyfSBmcm9tIFwiLi4vaW1wb3J0ZXIvRGV2aWNlSW1wb3J0ZXJcIjtcclxuaW1wb3J0IHtFcXVpcG1lbnRJbXBvcnRlcn0gZnJvbSBcIi4uL2ltcG9ydGVyL0VxdWlwbWVudEltcG9ydGVyXCI7XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIEltcG9ydCBleHRlbmRzIEFwcGxpY2F0aW9uIHtcclxuICAgIHByaXZhdGUgc3VwcG9ydGVkRGF0YUZpbGVzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBkYXRhRmlsZXM6IEZpbGVbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBsYW5nRGF0YUZpbGU6IEZpbGU7XHJcbiAgICBwcml2YXRlIHBhcnNlZEZpbGVzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBkaXNhYmxlSW1wb3J0QnV0dG9uOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIHByaXZhdGUgY3VycmVudFBhcnNlZEZpbGU6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLmNvbGxlY3REYXRhSW1wb3J0ZXJGaWxlU3VwcG9ydCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMoKSB7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHN1cGVyLmRlZmF1bHRPcHRpb25zO1xyXG4gICAgICAgIG9wdGlvbnMuaWQgPSAnY2h1bW1lci1kYXRhLWltcG9ydCc7XHJcbiAgICAgICAgb3B0aW9ucy5jbGFzc2VzID0gWydhcHAnLCAnd2luZG93LWFwcCcsICdmaWxlcGlja2VyJ107XHJcbiAgICAgICAgb3B0aW9ucy50aXRsZSA9ICdDaHVtbWVyL0RhdGEgSW1wb3J0JztcclxuICAgICAgICBvcHRpb25zLnRlbXBsYXRlID0gJ3N5c3RlbXMvc2hhZG93cnVuNWUvZGlzdC90ZW1wbGF0ZXMvYXBwcy9jb21wZW5kaXVtLWltcG9ydC5odG1sJztcclxuICAgICAgICBvcHRpb25zLndpZHRoID0gNjAwO1xyXG4gICAgICAgIG9wdGlvbnMuaGVpZ2h0ID0gJ2F1dG8nO1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGEob3B0aW9ucz86IGFueSk6IGFueSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHN1cGVyLmdldERhdGEob3B0aW9ucyk7XHJcblxyXG4gICAgICAgIGRhdGEuZGF0YUZpbGVzID0ge307XHJcbiAgICAgICAgdGhpcy5zdXBwb3J0ZWREYXRhRmlsZXMuZm9yRWFjaCgoc3VwcG9ydGVkRmlsZU5hbWU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtaXNzaW5nID0gIXRoaXMuZGF0YUZpbGVzLnNvbWUoKGRhdGFGaWxlKSA9PiBzdXBwb3J0ZWRGaWxlTmFtZSA9PT0gZGF0YUZpbGUubmFtZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IHRoaXMucGFyc2VkRmlsZXMuc29tZSgocGFyc2VkRmlsZU5hbWUpID0+IHN1cHBvcnRlZEZpbGVOYW1lID09PSBwYXJzZWRGaWxlTmFtZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnNpbmcgPSBzdXBwb3J0ZWRGaWxlTmFtZSA9PT0gdGhpcy5jdXJyZW50UGFyc2VkRmlsZTtcclxuXHJcbiAgICAgICAgICAgIGRhdGEuZGF0YUZpbGVzW3N1cHBvcnRlZEZpbGVOYW1lXSA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IHN1cHBvcnRlZEZpbGVOYW1lLFxyXG4gICAgICAgICAgICAgICAgbWlzc2luZyxcclxuICAgICAgICAgICAgICAgIHBhcnNlZCxcclxuICAgICAgICAgICAgICAgIHBhcnNpbmdcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBkYXRhLmxhbmdEYXRhRmlsZSA9IHRoaXMubGFuZ0RhdGFGaWxlID8gdGhpcy5sYW5nRGF0YUZpbGUubmFtZSA6ICcnO1xyXG4gICAgICAgIGRhdGEuZmluaXNoZWRPdmVyYWxsUGFyc2luZyA9IHRoaXMuc3VwcG9ydGVkRGF0YUZpbGVzLmxlbmd0aCA9PT0gdGhpcy5wYXJzZWRGaWxlcy5sZW5ndGg7XHJcbiAgICAgICAgZGF0YS5kaXNhYmxlSW1wb3J0QnV0dG9uID0gdGhpcy5kaXNhYmxlSW1wb3J0QnV0dG9uO1xyXG5cclxuICAgICAgICByZXR1cm4geyAuLi5kYXRhIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjb2xsZWN0RGF0YUltcG9ydGVyRmlsZVN1cHBvcnQoKSB7XHJcbiAgICAgICAgdGhpcy5zdXBwb3J0ZWREYXRhRmlsZXMgPSBbXTtcclxuICAgICAgICBJbXBvcnQuSW1wb3J0ZXJzLmZvckVhY2goaW1wb3J0ZXIgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zdXBwb3J0ZWREYXRhRmlsZXMuc29tZShzdXBwb3J0ZWQgPT4gaW1wb3J0ZXIuZmlsZXMuaW5jbHVkZXMoc3VwcG9ydGVkKSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnN1cHBvcnRlZERhdGFGaWxlcyA9IHRoaXMuc3VwcG9ydGVkRGF0YUZpbGVzLmNvbmNhdChpbXBvcnRlci5maWxlcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjbGVhclBhcnNpbmdTdGF0dXMoKSB7XHJcbiAgICAgICAgdGhpcy5wYXJzZWRGaWxlcyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIC8vT3JkZXIgaXMgaW1wb3J0YW50LCBleC4gc29tZSB3ZWFwb25zIG5lZWQgbW9kcyB0byBmdWxseSBpbXBvcnRcclxuICAgIHN0YXRpYyBJbXBvcnRlcnM6IERhdGFJbXBvcnRlcltdID0gW1xyXG4gICAgICAgIG5ldyBNb2RJbXBvcnRlcigpLFxyXG4gICAgICAgIG5ldyBXZWFwb25JbXBvcnRlcigpLFxyXG4gICAgICAgIG5ldyBBcm1vckltcG9ydGVyKCksXHJcbiAgICAgICAgbmV3IEFtbW9JbXBvcnRlcigpLFxyXG4gICAgICAgIG5ldyBTcGVsbEltcG9ydGVyKCksXHJcbiAgICAgICAgbmV3IENvbXBsZXhGb3JtSW1wb3J0ZXIoKSxcclxuICAgICAgICBuZXcgUXVhbGl0eUltcG9ydGVyKCksXHJcbiAgICAgICAgbmV3IFdhcmVJbXBvcnRlcigpLFxyXG4gICAgICAgIG5ldyBDcml0dGVyUG93ZXJJbXBvcnRlcigpLFxyXG4gICAgICAgIG5ldyBEZXZpY2VJbXBvcnRlcigpLFxyXG4gICAgICAgIG5ldyBFcXVpcG1lbnRJbXBvcnRlcigpXHJcbiAgICBdO1xyXG5cclxuICAgIGFzeW5jIHBhcnNlWE1MKHhtbFNvdXJjZSwgZmlsZU5hbWUpIHtcclxuICAgICAgICBsZXQganNvblNvdXJjZSA9IGF3YWl0IERhdGFJbXBvcnRlci54bWwyanNvbih4bWxTb3VyY2UpO1xyXG4gICAgICAgIEltcG9ydEhlbHBlci5TZXRNb2RlKEltcG9ydE1vZGUuWE1MKTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBkaSBvZiBJbXBvcnQuSW1wb3J0ZXJzKSB7XHJcbiAgICAgICAgICAgIGlmIChkaS5DYW5QYXJzZShqc29uU291cmNlKSkge1xyXG4gICAgICAgICAgICAgICAgZGkuRXh0cmFjdFRyYW5zbGF0aW9uKGZpbGVOYW1lKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGRpLlBhcnNlKGpzb25Tb3VyY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHBhcnNlWG1saTE4bih4bWxTb3VyY2UpIHtcclxuICAgICAgICBpZiAoIXhtbFNvdXJjZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBqc29uU291cmNlID0gYXdhaXQgRGF0YUltcG9ydGVyLnhtbDJqc29uKHhtbFNvdXJjZSk7XHJcblxyXG4gICAgICAgIGlmIChEYXRhSW1wb3J0ZXIuQ2FuUGFyc2VJMThuKGpzb25Tb3VyY2UpKSB7XHJcbiAgICAgICAgICAgIERhdGFJbXBvcnRlci5QYXJzZVRyYW5zbGF0aW9uKGpzb25Tb3VyY2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpc0RhdGFGaWxlID0gKGZpbGU6IEZpbGUpOiBib29sZWFuID0+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdXBwb3J0ZWREYXRhRmlsZXMuc29tZSgoc3VwcG9ydGVkKSA9PiBzdXBwb3J0ZWQgPT09IGZpbGUubmFtZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGlzTGFuZ0RhdGFGaWxlID0gKGZpbGU6IEZpbGUpOiBib29sZWFuID0+IHtcclxuICAgICAgICBjb25zdCBwYXR0ZXJuID0gL1thLXpBLVpdezJ9LVthLXpBLVpdezJ9X2RhdGFcXC54bWwvO1xyXG4gICAgICAgIHJldHVybiBmaWxlLm5hbWUubWF0Y2gocGF0dGVybikgIT09IG51bGw7XHJcbiAgICB9O1xyXG5cclxuICAgIGFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpIHtcclxuICAgICAgICBodG1sLmZpbmQoXCJidXR0b25bdHlwZT0nc3VibWl0J11cIikub24oJ2NsaWNrJywgYXN5bmMgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNsZWFyUGFyc2luZ1N0YXR1cygpO1xyXG4gICAgICAgICAgICB0aGlzLmRpc2FibGVJbXBvcnRCdXR0b24gPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXIoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxhbmdEYXRhRmlsZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHRoaXMubGFuZ0RhdGFGaWxlLnRleHQoKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGFyc2VYbWxpMThuKHRleHQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBVc2UgJ2ZvciBvZictbG9vcCB0byBhbGxvdyBhd2FpdCB0byBhY3R1YWxseSBwYXVzZS5cclxuICAgICAgICAgICAgLy8gZG9uJ3QgdXNlIC5mb3JFYWNoIGFzIGl0IHdvbid0IGF3YWl0IGZvciBhc3luYyBjYWxsYmFja3MuXHJcbiAgICAgICAgICAgIC8vIGl0ZXJhdGUgb3ZlciBzdXBwb3J0ZWREYXRhRmlsZXMgdG8gYWRoZXJlIHRvIEltcG9ydGVyIG9yZGVyXHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc3VwcG9ydGVkRmlsZSBvZiB0aGlzLnN1cHBvcnRlZERhdGFGaWxlcykge1xyXG4gICAgICAgICAgICAgICAgLy8gT25seSB0cnkgc3VwcG9ydGVkIGZpbGVzLlxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YUZpbGUgPSB0aGlzLmRhdGFGaWxlcy5maW5kKChkYXRhRmlsZSkgPT4gZGF0YUZpbGUubmFtZSA9PT0gc3VwcG9ydGVkRmlsZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YUZpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgZGF0YUZpbGUudGV4dCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgLy8gU2hvdyBzdGF0dXMgZm9yIGN1cnJlbnQgcGFyc2luZyBwcm9ncmVzc2lvbi5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYXJzZWRGaWxlID0gZGF0YUZpbGUubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlbmRlcigpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXJzZVhNTCh0ZXh0LCBkYXRhRmlsZS5uYW1lKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU3RvcmUgc3RhdHVzIHRvIHNob3cgcGFyc2luZyBwcm9ncmVzc2lvbi5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGFyc2VkRmlsZXMuc29tZSgocGFyc2VkRmlsZU5hbWUpID0+IHBhcnNlZEZpbGVOYW1lID09PSBkYXRhRmlsZS5uYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZEZpbGVzLnB1c2goZGF0YUZpbGUubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRpc2FibGVJbXBvcnRCdXR0b24gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGh0bWwuZmluZChcImlucHV0W3R5cGU9J2ZpbGUnXS5sYW5nRGF0YUZpbGVEcm9wXCIpLm9uKCdjaGFuZ2UnLCBhc3luYyAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgQXJyYXkuZnJvbShldmVudC50YXJnZXQuZmlsZXMpLmZvckVhY2goKGZpbGU6IEZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTGFuZ0RhdGFGaWxlKGZpbGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYW5nRGF0YUZpbGUgPSBmaWxlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaHRtbC5maW5kKFwiaW5wdXRbdHlwZT0nZmlsZSddLmZpbGVkYXRhZHJvcFwiKS5vbignY2hhbmdlJywgYXN5bmMgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIEFycmF5LmZyb20oZXZlbnQudGFyZ2V0LmZpbGVzKS5mb3JFYWNoKChmaWxlOiBGaWxlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0RhdGFGaWxlKGZpbGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQWxsb3cgdXNlciB0byBvdmVyd3JpdGUgYW4gYWxyZWFkeSBhZGRlZCBmaWxlLCB0aGV5IGhhdmUgdGhlaXIgcmVhc29ucy5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0lkeCA9IHRoaXMuZGF0YUZpbGVzLmZpbmRJbmRleCgoZGF0YUZpbGUpID0+IGRhdGFGaWxlLm5hbWUgPT09IGZpbGUubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nSWR4ID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFGaWxlcy5wdXNoKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YUZpbGVzW2V4aXN0aW5nSWR4XSA9IGZpbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGFGaWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVJbXBvcnRCdXR0b24gPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBDb25zdGFudHMgfSBmcm9tICcuLi9pbXBvcnRlci9Db25zdGFudHMnO1xyXG5pbXBvcnQgeyBYTUxTdHJhdGVneSB9IGZyb20gJy4vWE1MU3RyYXRlZ3knO1xyXG5pbXBvcnQgeyBKU09OU3RyYXRlZ3kgfSBmcm9tICcuL0pTT05TdHJhdGVneSc7XHJcbmltcG9ydCB7IEltcG9ydFN0cmF0ZWd5IH0gZnJvbSAnLi9JbXBvcnRTdHJhdGVneSc7XHJcblxyXG5leHBvcnQgZW51bSBJbXBvcnRNb2RlIHtcclxuICAgIFhNTCA9IDEsXHJcbiAgICBKU09OID0gMixcclxufVxyXG5leHBvcnQgZW51bSBMb29rdXBNb2RlIHtcclxuICAgIERpcmVjdG9yeSA9IDAsXHJcbiAgICBBY3RvciA9IDEsXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbiBpbXBvcnQgaGVscGVyIHRvIHN0YW5kYXJkaXplIGRhdGEgZXh0cmFjdGlvbi5cclxuICogTW9zdGx5IGNvbmNlaXZlZCB0byByZWR1Y2VkIHJlcXVpcmVkIHJlZmFjdG9yaW5nIGlmIENodW1tZXIgY2hhbmdlcyBkYXRhIGZpbGUgbGF5b3V0LlxyXG4gKiBBbHNvIGNvbnRhaW5zIGhlbHBlciBtZXRob2RzIHRvIHNhZmVseSBwYXJzZSB2YWx1ZXMgdG8gYXBwcm9wcmlhdGUgdHlwZXMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSW1wb3J0SGVscGVyIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQ0hBUl9LRVkgPSAnX1RFWFQnO1xyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIHNfU3RyYXRlZ3k6IEltcG9ydFN0cmF0ZWd5ID0gbmV3IFhNTFN0cmF0ZWd5KCk7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBTZXRNb2RlKG1vZGU6IEltcG9ydE1vZGUpIHtcclxuICAgICAgICBzd2l0Y2ggKG1vZGUpIHtcclxuICAgICAgICAgICAgY2FzZSBJbXBvcnRNb2RlLlhNTDpcclxuICAgICAgICAgICAgICAgIEltcG9ydEhlbHBlci5zX1N0cmF0ZWd5ID0gbmV3IFhNTFN0cmF0ZWd5KCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBJbXBvcnRNb2RlLkpTT046XHJcbiAgICAgICAgICAgICAgICBJbXBvcnRIZWxwZXIuc19TdHJhdGVneSA9IG5ldyBKU09OU3RyYXRlZ3koKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhlbHBlciBtZXRob2QgdG8gY3JlYXRlIGEgbmV3IGZvbGRlci5cclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBmb2xkZXIuXHJcbiAgICAgKiBAcGFyYW0gcGFyZW50IFRoZSBwYXJlbnQgZm9sZGVyLlxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8Rm9sZGVyPn0gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgZm9sZGVyIG9iamVjdCB3aGVuIHRoZSBmb2xkZXIgaXMgY3JlYXRlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBOZXdGb2xkZXIobmFtZTogc3RyaW5nLCBwYXJlbnQ6IEZvbGRlciB8IG51bGwgPSBudWxsKTogUHJvbWlzZTxGb2xkZXI+IHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgRm9sZGVyLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdJdGVtJyxcclxuICAgICAgICAgICAgcGFyZW50OiBwYXJlbnQgPT09IG51bGwgPyBudWxsIDogcGFyZW50LmlkLFxyXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGEgZm9sZGVyIGF0IGEgcGF0aCBpbiB0aGUgaXRlbXMgZGlyZWN0b3J5LlxyXG4gICAgICogQHBhcmFtIHBhdGggVGhlIGFic29sdXRlIHBhdGggb2YgdGhlIGZvbGRlci5cclxuICAgICAqIEBwYXJhbSBta2RpcnMgSWYgdHJ1ZSwgd2lsbCBtYWtlIGFsbCBmb2xkZXJzIGFsb25nIHRoZSBoaWVyYXJjaHkgaWYgdGhleSBkbyBub3QgZXhpc3QuXHJcbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCB3aWxsIHJlc29sdmUgd2l0aCB0aGUgZm91bmQgZm9sZGVyLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIEdldEZvbGRlckF0UGF0aChwYXRoOiBzdHJpbmcsIG1rZGlyczogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTxFbnRpdHk+IHtcclxuICAgICAgICBsZXQgaWR4ID0gMDtcclxuICAgICAgICBsZXQgY3VycixcclxuICAgICAgICAgICAgbGFzdCA9IG51bGw7XHJcbiAgICAgICAgbGV0IG5leHQgPSBwYXRoLnNwbGl0KCcvJyk7XHJcbiAgICAgICAgd2hpbGUgKGlkeCA8IG5leHQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgLy8gVE9ETzogZm91bmRyeS1wYy10eXBlIGRlZmluZXMgRm9sZGVyIHdpdGhvdXQgcGFyZW50IHByb3BlcnR5LCBidXQgaXQgZG9lcyBleGlzdC5cclxuICAgICAgICAgICAgY3VyciA9IGdhbWUuZm9sZGVycy5maW5kKChmb2xkZXIpID0+IGZvbGRlci5wYXJlbnQgPT09IGxhc3QgJiYgZm9sZGVyLm5hbWUgPT09IG5leHRbaWR4XSk7XHJcbiAgICAgICAgICAgIGlmIChjdXJyID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW1rZGlycykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgVW5hYmxlIHRvIGZpbmQgZm9sZGVyOiAke3BhdGh9YCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY3VyciA9IGF3YWl0IEltcG9ydEhlbHBlci5OZXdGb2xkZXIobmV4dFtpZHhdLCBsYXN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsYXN0ID0gY3VycjtcclxuICAgICAgICAgICAgaWR4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY3Vycik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYSB2YWx1ZSBmcm9tIHRoZSB0aGUgcHJvdmlkZWQganNvbkRhdGEsIG9wdGlvbmFsbHkgcmV0dXJuaW5nIGEgZGVmYXVsdCB2YWx1ZSBpZiBpdCBpcyBub3QgZm91bmRcclxuICAgICAqIG9yIGlzIHVuYWJsZSB0byBiZSBwYXJzZWQgdG8gYW4gaW50ZWdlci5cclxuICAgICAqIEBwYXJhbSBqc29uRGF0YSBUaGUgZGF0YSB0byBnZXQgdGhlIGtleWVkIHZhbHVlIGluLlxyXG4gICAgICogQHBhcmFtIGtleSBUaGUga2V5IHRvIGNoZWNrIGZvciB0aGUgdmFsdWUgdW5kZXIuXHJcbiAgICAgKiBAcGFyYW0gZmFsbGJhY2sgQW4gb3B0aW9uYWwgZGVmYXVsdCB2YWx1ZSB0byByZXR1cm4gaWYgdGhlIGtleSBpcyBub3QgZm91bmQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgSW50VmFsdWUoanNvbkRhdGE6IG9iamVjdCwga2V5OiBzdHJpbmcsIGZhbGxiYWNrOiBudW1iZXIgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiBJbXBvcnRIZWxwZXIuc19TdHJhdGVneS5pbnRWYWx1ZShqc29uRGF0YSwga2V5LCBmYWxsYmFjayk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYSB2YWx1ZSBmcm9tIHRoZSB0aGUgcHJvdmlkZWQganNvbkRhdGEsIG9wdGlvbmFsbHkgcmV0dXJuaW5nIGEgZGVmYXVsdCB2YWx1ZSBpZiBpdCBpcyBub3QgZm91bmQuXHJcbiAgICAgKiBAcGFyYW0ganNvbkRhdGEgVGhlIGRhdGEgdG8gZ2V0IHRoZSBrZXllZCB2YWx1ZSBpbi5cclxuICAgICAqIEBwYXJhbSBrZXkgVGhlIGtleSB0byBjaGVjayBmb3IgdGhlIHZhbHVlIHVuZGVyLlxyXG4gICAgICogQHBhcmFtIGZhbGxiYWNrIEFuIG9wdGlvbmFsIGRlZmF1bHQgdmFsdWUgdG8gcmV0dXJuIGlmIHRoZSBrZXkgaXMgbm90IGZvdW5kLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIFN0cmluZ1ZhbHVlKGpzb25EYXRhOiBvYmplY3QsIGtleTogc3RyaW5nIHwgbnVtYmVyLCBmYWxsYmFjazogc3RyaW5nIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gSW1wb3J0SGVscGVyLnNfU3RyYXRlZ3kuc3RyaW5nVmFsdWUoanNvbkRhdGEsIGtleSwgZmFsbGJhY2spO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGFuIG9iamVjdCBmcm9tIHRoZSB0aGUgcHJvdmlkZWQganNvbkRhdGEsIG9wdGlvbmFsbHkgcmV0dXJuaW5nIGEgZGVmYXVsdCB2YWx1ZSBpZiBpdCBpcyBub3QgZm91bmQuXHJcbiAgICAgKiBAcGFyYW0ganNvbkRhdGEgVGhlIGRhdGEgdG8gZ2V0IHRoZSBrZXllZCB2YWx1ZSBpbi5cclxuICAgICAqIEBwYXJhbSBrZXkgVGhlIGtleSB0byBjaGVjayBmb3IgdGhlIHZhbHVlIHVuZGVyLlxyXG4gICAgICogQHBhcmFtIGZhbGxiYWNrIEFuIG9wdGlvbmFsIGRlZmF1bHQgdmFsdWUgdG8gcmV0dXJuIGlmIHRoZSBrZXkgaXMgbm90IGZvdW5kLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIE9iamVjdFZhbHVlKGpzb25EYXRhOiBvYmplY3QsIGtleTogc3RyaW5nIHwgbnVtYmVyLCBmYWxsYmFjazogb2JqZWN0IHwgbnVsbCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCk6IG9iamVjdCB8IG51bGwge1xyXG4gICAgICAgIHJldHVybiBJbXBvcnRIZWxwZXIuc19TdHJhdGVneS5vYmplY3RWYWx1ZShqc29uRGF0YSwga2V5LCBmYWxsYmFjayk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9UT0RPXHJcbiAgICBwdWJsaWMgc3RhdGljIGZpbmRJdGVtKG5hbWVPckNtcDogc3RyaW5nIHwgSXRlbUNvbXBhcmVyKTogRW50aXR5IHtcclxuICAgICAgICBsZXQgcmVzdWx0OiBhbnkgfCBudWxsO1xyXG4gICAgICAgIGlmICh0eXBlb2YgbmFtZU9yQ21wID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBnYW1lLml0ZW1zLmZpbmQoKGl0ZW0pID0+IGl0ZW0ubmFtZSA9PSBuYW1lT3JDbXApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGdhbWUuaXRlbXMuZmluZChuYW1lT3JDbXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgVHJhbnNsYXRlQ2F0ZWdvcnkobmFtZSwganNvbkNhdGVnb3J5VHJhbnNsYXRpb25zPykge1xyXG4gICAgICAgIGlmIChqc29uQ2F0ZWdvcnlUcmFuc2xhdGlvbnMgJiYganNvbkNhdGVnb3J5VHJhbnNsYXRpb25zLmhhc093blByb3BlcnR5KG5hbWUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBqc29uQ2F0ZWdvcnlUcmFuc2xhdGlvbnNbbmFtZV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmFtZTtcclxuICAgIH1cclxuICAgIC8vVE9ET1xyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBNYWtlQ2F0ZWdvcnlGb2xkZXJzKFxyXG4gICAgICAgIGpzb25EYXRhOiBvYmplY3QsXHJcbiAgICAgICAgcGF0aDogc3RyaW5nLFxyXG4gICAgICAgIGpzb25DYXRlZ29yeVRyYW5zbGF0aW9ucz86IG9iamVjdCB8IHVuZGVmaW5lZCxcclxuICAgICk6IFByb21pc2U8eyBbbmFtZTogc3RyaW5nXTogRm9sZGVyIH0+IHtcclxuICAgICAgICBsZXQgZm9sZGVycyA9IHt9O1xyXG4gICAgICAgIGxldCBqc29uQ2F0ZWdvcmllcyA9IGpzb25EYXRhWydjYXRlZ29yaWVzJ11bJ2NhdGVnb3J5J107XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwganNvbkNhdGVnb3JpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGNhdGVnb3J5TmFtZSA9IGpzb25DYXRlZ29yaWVzW2ldW0ltcG9ydEhlbHBlci5DSEFSX0tFWV07XHJcbiAgICAgICAgICAgIC8vIHVzZSB1bnRyYW5zbGF0ZWQgY2F0ZWdvcnkgbmFtZSBmb3IgZWFzaWVyIG1hcHBpbmcgZHVyaW5nIERhdGFJbXBvcnRlci5QYXJzZSBpbXBsZW1lbnRhdGlvbnMuXHJcbiAgICAgICAgICAgIGxldCBvcmlnQ2F0ZWdvcnlOYW1lID0gY2F0ZWdvcnlOYW1lO1xyXG4gICAgICAgICAgICBjYXRlZ29yeU5hbWUgPSBJbXBvcnRIZWxwZXIuVHJhbnNsYXRlQ2F0ZWdvcnkoY2F0ZWdvcnlOYW1lLCBqc29uQ2F0ZWdvcnlUcmFuc2xhdGlvbnMpO1xyXG4gICAgICAgICAgICBmb2xkZXJzW29yaWdDYXRlZ29yeU5hbWUudG9Mb3dlckNhc2UoKV0gPSBhd2FpdCBJbXBvcnRIZWxwZXIuR2V0Rm9sZGVyQXRQYXRoKGAke0NvbnN0YW50cy5ST09UX0lNUE9SVF9GT0xERVJfTkFNRX0vJHtwYXRofS8ke2NhdGVnb3J5TmFtZX1gLCB0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmb2xkZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBFeHRyYWN0IHRoZSBjb3JyZWN0IDxjaHVtbWVyIGZpbGU9XCIke2RhdGFGaWxlTmFtZX0+Wy4uLl08L2NodW1tZXI+IGVsZW1lbnQgZnJvbSB4eC14eF9kYXRhLnhtbCB0cmFuc2xhdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGpzb25pMThuXHJcbiAgICAgKiBAcGFyYW0gZGF0YUZpbGVOYW1lIEV4cGVjdGVkIHRyYW5zbGF0aW9uIHRhcmdldCBmaWxlIG5hbWVcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBFeHRyYWN0RGF0YUZpbGVUcmFuc2xhdGlvbihqc29uaTE4biwgZGF0YUZpbGVOYW1lKTogb2JqZWN0IHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGpzb25pMThuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zbGF0aW9uID0ganNvbmkxOG5baV07XHJcbiAgICAgICAgICAgIGlmICh0cmFuc2xhdGlvbi4kLmZpbGUgPT09IGRhdGFGaWxlTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zbGF0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7fTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogRXh0cmFjdCBjYXRlZ29yaWVzIHRyYW5zbGF0aW9ucyB3aXRoaW4geHgteHhfZGF0YS54bWwgPGNodW1tZXIvPiB0cmFuc2xhdGlvbiBzdWJzZXQuXHJcbiAgICAgKlxyXG4gICAgICogIE5vdGU6IE5vdCBhbGwgZmlsZSB0cmFuc2xhdGlvbnMgcHJvdmlkZSBjYXRlZ29yaWVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBqc29uQ2h1bW1lcmkxOG4gVHJhbnNsYXRpb25zIGFzIGdpdmVuIGJ5IEV4dHJhY3REYXRhRmlsZVRyYW5zbGF0aW9uc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIEV4dHJhY3RDYXRlZ29yaWVzVHJhbnNsYXRpb24oanNvbkNodW1tZXJpMThuKSB7XHJcbiAgICAgICAgY29uc3QgY2F0ZWdvcnlUcmFuc2xhdGlvbnMgPSB7fTtcclxuICAgICAgICBpZiAoanNvbkNodW1tZXJpMThuICYmIGpzb25DaHVtbWVyaTE4bi5oYXNPd25Qcm9wZXJ0eSgnY2F0ZWdvcmllcycpKSB7XHJcbiAgICAgICAgICAgIGpzb25DaHVtbWVyaTE4bi5jYXRlZ29yaWVzLmNhdGVnb3J5LmZvckVhY2goKGNhdGVnb3J5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gY2F0ZWdvcnlbSW1wb3J0SGVscGVyLkNIQVJfS0VZXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zbGF0ZSA9IGNhdGVnb3J5LiQudHJhbnNsYXRlO1xyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnlUcmFuc2xhdGlvbnNbbmFtZV0gPSB0cmFuc2xhdGU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2F0ZWdvcnlUcmFuc2xhdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEV4dHJhY3QgaXRlbSB0eXBlIHRyYW5zbGF0aW9ucyB3aXRoaW4geHgteHhfZGF0YS54bWwgPGNodW1tZXIvPiB0cmFuc2xhdGlvbiBzdWJzZXQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGpzb25JdGVtc2kxOG4gVHJhbnNsYXRpb25zIGFzIGdpdmVuIGJ5IEV4dHJhY3REYXRhRmlsZVRyYW5zbGF0aW9uc1xyXG4gICAgICogQHBhcmFtIHR5cGVLZXkgVGhlIGl0ZW0gdHlwZSB0byB0cmFuc2xhdGUuIFRlbmRzIHRvIGJlIHBsdXJhbC5cclxuICAgICAqIEBwYXJhbSBsaXN0S2V5IFRoZSBpdGVtIHRvIHRyYW5zbGF0ZS4gVGVuZHMgdG8gYmUgc2luZ3VsYXIuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgRXh0cmFjdEl0ZW1UcmFuc2xhdGlvbihqc29uSXRlbXNpMThuLCB0eXBlS2V5LCBsaXN0S2V5KSB7XHJcbiAgICAgICAgY29uc3QgaXRlbVRyYW5zbGF0aW9uID0ge307XHJcbiAgICAgICAgaWYgKGpzb25JdGVtc2kxOG4gJiYganNvbkl0ZW1zaTE4blt0eXBlS2V5XSAmJiBqc29uSXRlbXNpMThuW3R5cGVLZXldW2xpc3RLZXldICYmIGpzb25JdGVtc2kxOG5bdHlwZUtleV1bbGlzdEtleV0ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBqc29uSXRlbXNpMThuW3R5cGVLZXldW2xpc3RLZXldLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBpdGVtLm5hbWVbSW1wb3J0SGVscGVyLkNIQVJfS0VZXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zbGF0ZSA9IGl0ZW0udHJhbnNsYXRlW0ltcG9ydEhlbHBlci5DSEFSX0tFWV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhbHRwYWdlID0gaXRlbS5hbHRwYWdlW0ltcG9ydEhlbHBlci5DSEFSX0tFWV07XHJcbiAgICAgICAgICAgICAgICBpdGVtVHJhbnNsYXRpb25bbmFtZV0gPSB7IHRyYW5zbGF0ZSwgYWx0cGFnZSB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBpdGVtVHJhbnNsYXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIE1hcE5hbWVUb1RyYW5zbGF0aW9uS2V5KHRyYW5zbGF0aW9uTWFwLCBuYW1lLCBrZXksIGZhbGxiYWNrVmFsdWUgPSAnJyk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKHRyYW5zbGF0aW9uTWFwICYmIHRyYW5zbGF0aW9uTWFwLmhhc093blByb3BlcnR5KG5hbWUpICYmIHRyYW5zbGF0aW9uTWFwW25hbWVdLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRyYW5zbGF0aW9uTWFwW25hbWVdW2tleV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsbGJhY2tWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIE1hcE5hbWVUb1RyYW5zbGF0aW9uKHRyYW5zbGF0aW9uTWFwLCBuYW1lKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gSW1wb3J0SGVscGVyLk1hcE5hbWVUb1RyYW5zbGF0aW9uS2V5KHRyYW5zbGF0aW9uTWFwLCBuYW1lLCAndHJhbnNsYXRlJywgbmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBNYXBOYW1lVG9QYWdlU291cmNlKHRyYW5zbGF0aW9uTWFwLCBuYW1lLCBmYWxsYmFjaz0nPycpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBJbXBvcnRIZWxwZXIuTWFwTmFtZVRvVHJhbnNsYXRpb25LZXkodHJhbnNsYXRpb25NYXAsIG5hbWUsICdhbHRwYWdlJywgZmFsbGJhY2spO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCB0eXBlIEl0ZW1Db21wYXJlciA9IChpdGVtOiBJdGVtKSA9PiBib29sZWFuO1xyXG4iLCJleHBvcnQgYWJzdHJhY3QgY2xhc3MgSW1wb3J0U3RyYXRlZ3kge1xyXG4gICAgcHVibGljIGFic3RyYWN0IGludFZhbHVlKGpzb25EYXRhOiBvYmplY3QsIGtleTogc3RyaW5nLCBmYWxsYmFjazogbnVtYmVyIHwgdW5kZWZpbmVkKTogbnVtYmVyO1xyXG4gICAgcHVibGljIGFic3RyYWN0IHN0cmluZ1ZhbHVlKGpzb25EYXRhOiBvYmplY3QsIGtleTogc3RyaW5nIHwgbnVtYmVyLCBmYWxsYmFjazogc3RyaW5nIHwgdW5kZWZpbmVkKTogc3RyaW5nO1xyXG4gICAgcHVibGljIGFic3RyYWN0IG9iamVjdFZhbHVlKGpzb25EYXRhOiBvYmplY3QsIGtleTogc3RyaW5nIHwgbnVtYmVyLCBmYWxsYmFjazogb2JqZWN0IHwgbnVsbCB8IHVuZGVmaW5lZCk6IG9iamVjdCB8IG51bGw7XHJcbn1cclxuZXhwb3J0IHR5cGUgSXRlbUNvbXBhcmVyID0gKGl0ZW06IEl0ZW0pID0+IGJvb2xlYW47XHJcbiIsImltcG9ydCB7IEltcG9ydFN0cmF0ZWd5IH0gZnJvbSAnLi9JbXBvcnRTdHJhdGVneSc7XHJcblxyXG5leHBvcnQgY2xhc3MgSlNPTlN0cmF0ZWd5IGV4dGVuZHMgSW1wb3J0U3RyYXRlZ3kge1xyXG4gICAgcHVibGljIGludFZhbHVlKGpzb25EYXRhOiBvYmplY3QsIGtleTogc3RyaW5nLCBmYWxsYmFjazogbnVtYmVyIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkKTogbnVtYmVyIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuaW1wbGVtZW50ZWQnKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RyaW5nVmFsdWUoanNvbkRhdGE6IG9iamVjdCwga2V5OiBzdHJpbmcgfCBudW1iZXIsIGZhbGxiYWNrOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQpOiBzdHJpbmcge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVW5pbXBsZW1lbnRlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvYmplY3RWYWx1ZShqc29uRGF0YTogb2JqZWN0LCBrZXk6IHN0cmluZyB8IG51bWJlciwgZmFsbGJhY2s6IG9iamVjdCB8IG51bGwgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQpOiBvYmplY3QgfCBudWxsIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuaW1wbGVtZW50ZWQnKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJbXBvcnRIZWxwZXIgfSBmcm9tICcuL0ltcG9ydEhlbHBlcic7XHJcbmltcG9ydCB7IEltcG9ydFN0cmF0ZWd5IH0gZnJvbSAnLi9JbXBvcnRTdHJhdGVneSc7XHJcblxyXG5leHBvcnQgY2xhc3MgWE1MU3RyYXRlZ3kgZXh0ZW5kcyBJbXBvcnRTdHJhdGVneSB7XHJcbiAgICBwdWJsaWMgaW50VmFsdWUoanNvbkRhdGE6IG9iamVjdCwga2V5OiBzdHJpbmcsIGZhbGxiYWNrOiBudW1iZXIgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQpOiBudW1iZXIge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUludChqc29uRGF0YVtrZXldW0ltcG9ydEhlbHBlci5DSEFSX0tFWV0pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgaWYgKGZhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxsYmFjaztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0cmluZ1ZhbHVlKGpzb25EYXRhOiBvYmplY3QsIGtleTogc3RyaW5nIHwgbnVtYmVyLCBmYWxsYmFjazogc3RyaW5nIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkKTogc3RyaW5nIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4ganNvbkRhdGFba2V5XVtJbXBvcnRIZWxwZXIuQ0hBUl9LRVldO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgaWYgKGZhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxsYmFjaztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9iamVjdFZhbHVlKGpzb25EYXRhOiBvYmplY3QsIGtleTogc3RyaW5nIHwgbnVtYmVyLCBmYWxsYmFjazogb2JqZWN0IHwgbnVsbCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCk6IG9iamVjdCB8IG51bGwge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBqc29uRGF0YVtrZXldO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgaWYgKGZhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxsYmFjaztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgRGF0YUltcG9ydGVyIH0gZnJvbSAnLi9EYXRhSW1wb3J0ZXInO1xyXG5pbXBvcnQgeyBJbXBvcnRIZWxwZXIgfSBmcm9tICcuLi9oZWxwZXIvSW1wb3J0SGVscGVyJztcclxuaW1wb3J0IHsgQ29uc3RhbnRzIH0gZnJvbSAnLi9Db25zdGFudHMnO1xyXG5pbXBvcnQgQW1tbyA9IFNoYWRvd3J1bi5BbW1vO1xyXG5pbXBvcnQgV2VhcG9uRGF0YSA9IFNoYWRvd3J1bi5XZWFwb25EYXRhO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFtbW9JbXBvcnRlciBleHRlbmRzIERhdGFJbXBvcnRlciB7XHJcbiAgICBwdWJsaWMgZmlsZXMgPSBbJ2dlYXIueG1sJ107XHJcblxyXG4gICAgQ2FuUGFyc2UoanNvbk9iamVjdDogb2JqZWN0KTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGpzb25PYmplY3QuaGFzT3duUHJvcGVydHkoJ2dlYXJzJykgJiYganNvbk9iamVjdFsnZ2VhcnMnXS5oYXNPd25Qcm9wZXJ0eSgnZ2VhcicpO1xyXG4gICAgfVxyXG5cclxuICAgIEdldERlZmF1bHREYXRhKCk6IEFtbW8ge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5hbWU6ICcnLFxyXG4gICAgICAgICAgICBfaWQ6ICcnLFxyXG4gICAgICAgICAgICBmb2xkZXI6ICcnLFxyXG4gICAgICAgICAgICBpbWc6ICdpY29ucy9zdmcvbXlzdGVyeS1tYW4uc3ZnJyxcclxuICAgICAgICAgICAgZmxhZ3M6IHt9LFxyXG4gICAgICAgICAgICB0eXBlOiAnYW1tbycsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYXQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogJycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdGVjaG5vbG9neToge1xyXG4gICAgICAgICAgICAgICAgICAgIHJhdGluZzogMSxcclxuICAgICAgICAgICAgICAgICAgICBhdmFpbGFiaWxpdHk6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvc3Q6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZXF1aXBwZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgY29uY2VhbDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbl9tb25pdG9yOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heDogMCxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHdpcmVsZXNzOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIGVsZW1lbnQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgYXA6IDAsXHJcbiAgICAgICAgICAgICAgICBkYW1hZ2U6IDAsXHJcbiAgICAgICAgICAgICAgICBkYW1hZ2VUeXBlOiAncGh5c2ljYWwnLFxyXG4gICAgICAgICAgICAgICAgYmxhc3Q6IHtcclxuICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcG9mZjogMCxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHBlcm1pc3Npb246IHtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IDIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBFeHRyYWN0VHJhbnNsYXRpb24oKSB7XHJcbiAgICAgICAgaWYgKCFEYXRhSW1wb3J0ZXIuanNvbmkxOG4pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGpzb25HZWFyaTE4biA9IEltcG9ydEhlbHBlci5FeHRyYWN0RGF0YUZpbGVUcmFuc2xhdGlvbihEYXRhSW1wb3J0ZXIuanNvbmkxOG4sIHRoaXMuZmlsZXNbMF0pO1xyXG4gICAgICAgIHRoaXMuY2F0ZWdvcnlUcmFuc2xhdGlvbnMgPSBJbXBvcnRIZWxwZXIuRXh0cmFjdENhdGVnb3JpZXNUcmFuc2xhdGlvbihqc29uR2VhcmkxOG4pO1xyXG4gICAgICAgIHRoaXMuZW50cnlUcmFuc2xhdGlvbnMgPSBJbXBvcnRIZWxwZXIuRXh0cmFjdEl0ZW1UcmFuc2xhdGlvbihqc29uR2VhcmkxOG4sICdnZWFycycsICdnZWFyJyk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgUGFyc2UoanNvbk9iamVjdDogb2JqZWN0KTogUHJvbWlzZTxFbnRpdHk+IHtcclxuICAgICAgICBsZXQgYW1tb0RhdGFzOiBBbW1vW10gPSBbXTtcclxuICAgICAgICBsZXQganNvbkFtbW9zID0ganNvbk9iamVjdFsnZ2VhcnMnXVsnZ2VhciddO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwganNvbkFtbW9zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBqc29uRGF0YSA9IGpzb25BbW1vc1tpXTtcclxuICAgICAgICAgICAgaWYgKERhdGFJbXBvcnRlci51bnN1cHBvcnRlZEVudHJ5KGpzb25EYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoanNvbkRhdGEsICdjYXRlZ29yeScsICcnKSAhPT0gJ0FtbXVuaXRpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGRhdGEgPSB0aGlzLkdldERlZmF1bHREYXRhKCk7XHJcbiAgICAgICAgICAgIGRhdGEubmFtZSA9IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ25hbWUnKTtcclxuICAgICAgICAgICAgZGF0YS5uYW1lID0gSW1wb3J0SGVscGVyLk1hcE5hbWVUb1RyYW5zbGF0aW9uKHRoaXMuZW50cnlUcmFuc2xhdGlvbnMsIGRhdGEubmFtZSk7XHJcblxyXG4gICAgICAgICAgICBkYXRhLmRhdGEuZGVzY3JpcHRpb24uc291cmNlID0gYCR7SW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGpzb25EYXRhLCAnc291cmNlJyl9ICR7SW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGpzb25EYXRhLCAncGFnZScpfWA7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS50ZWNobm9sb2d5LnJhdGluZyA9IDI7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS50ZWNobm9sb2d5LmF2YWlsYWJpbGl0eSA9IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ2F2YWlsJyk7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS50ZWNobm9sb2d5LmNvc3QgPSBJbXBvcnRIZWxwZXIuSW50VmFsdWUoanNvbkRhdGEsICdjb3N0JywgMCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgYm9udXNEYXRhID0gSW1wb3J0SGVscGVyLk9iamVjdFZhbHVlKGpzb25EYXRhLCAnd2VhcG9uYm9udXMnLCBudWxsKTtcclxuICAgICAgICAgICAgaWYgKGJvbnVzRGF0YSAhPT0gdW5kZWZpbmVkICYmIGJvbnVzRGF0YSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgZGF0YS5kYXRhLmFwID0gSW1wb3J0SGVscGVyLkludFZhbHVlKGJvbnVzRGF0YSwgJ2FwJywgMCk7XHJcbiAgICAgICAgICAgICAgICBkYXRhLmRhdGEuZGFtYWdlID0gSW1wb3J0SGVscGVyLkludFZhbHVlKGJvbnVzRGF0YSwgJ2RhbWFnZScsIDApO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBkYW1hZ2VUeXBlID0gSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGJvbnVzRGF0YSwgJ2RhbWFnZXR5cGUnLCAnJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGFtYWdlVHlwZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhbWFnZVR5cGUuaW5jbHVkZXMoJ1AnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdGEuZGFtYWdlVHlwZSA9ICdwaHlzaWNhbCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYW1hZ2VUeXBlLmluY2x1ZGVzKCdTJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5kYXRhLmRhbWFnZVR5cGUgPSAnc3R1bic7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYW1hZ2VUeXBlLmluY2x1ZGVzKCdNJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5kYXRhLmRhbWFnZVR5cGUgPSAnbWF0cml4JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBzaG91bGRMb29rRm9yV2VhcG9ucyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBsZXQgbmFtZUxvd2VyID0gZGF0YS5uYW1lLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIFsnZ3JlbmFkZScsICdyb2NrZXQnLCAnbWlzc2lsZSddLmZvckVhY2goKGNvbXBhcmUpID0+IHtcclxuICAgICAgICAgICAgICAgIHNob3VsZExvb2tGb3JXZWFwb25zID0gc2hvdWxkTG9va0ZvcldlYXBvbnMgfHwgbmFtZUxvd2VyLmluY2x1ZGVzKGNvbXBhcmUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gTk9URTogU2hvdWxkIGVpdGhlciB3ZWFwb25zIG9yIGdlYXIgbm90IGhhdmUgYmVlbiBpbXBvcnRlZCB3aXRoIHRyYW5zbGF0aW9uLCB0aGlzIHdpbGwgZmFpbC5cclxuICAgICAgICAgICAgaWYgKHNob3VsZExvb2tGb3JXZWFwb25zKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZm91bmRXZWFwb24gPSBJbXBvcnRIZWxwZXIuZmluZEl0ZW0oKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBGaWx0ZXIgZm9yIHdlYXBvbiB0eXBlIGR1ZSB0byBwb3NzaWJsZSBkb3VibGUgbmFtaW5nIGdpdmluZyBvdGhlciBpdGVtIHR5cGVzLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLnR5cGUgPT09ICd3ZWFwb24nICYmIGl0ZW0ubmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lTG93ZXI7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZm91bmRXZWFwb24gIT09IG51bGwgJiYgXCJhY3Rpb25cIiBpbiBmb3VuZFdlYXBvbi5kYXRhLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmb3VuZFdlYXBvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHdlYXBvbkRhdGEgPSBmb3VuZFdlYXBvbi5kYXRhLmRhdGEgYXMgV2VhcG9uRGF0YTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdGEuZGFtYWdlID0gd2VhcG9uRGF0YS5hY3Rpb24uZGFtYWdlLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5hcCA9d2VhcG9uRGF0YS5hY3Rpb24uZGFtYWdlLmFwLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBhbW1vIGRvZXNuJ3QgaGF2ZSBjb25jZWFsIHJhdGluZyBmcm9tIGxvb2tpbmcgYXQgdGhlIGRhdGFcclxuICAgICAgICAgICAgLy8gZGF0YS5kYXRhLnRlY2hub2xvZ3kuY29uY2VhbC5iYXNlID0gSW1wb3J0SGVscGVyLmludFZhbHVlKGpzb25EYXRhLCBcImNvbmNlYWxcIik7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS50ZWNobm9sb2d5LmNvbmNlYWwuYmFzZSA9IDA7XHJcblxyXG4gICAgICAgICAgICBhbW1vRGF0YXMucHVzaChkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYW1tb0RhdGFzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBmb2xkZXJOYW1lID0gJ01pc2MnO1xyXG4gICAgICAgICAgICBsZXQgYW1tbyA9IGFtbW9EYXRhc1tpXTtcclxuXHJcbiAgICAgICAgICAgIGxldCBzcGxpdE5hbWUgPSBhbW1vLm5hbWUuc3BsaXQoJzonKTtcclxuICAgICAgICAgICAgaWYgKHNwbGl0TmFtZS5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICBmb2xkZXJOYW1lID0gc3BsaXROYW1lWzBdLnRyaW0oKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGZvbGRlciA9IGF3YWl0IEltcG9ydEhlbHBlci5HZXRGb2xkZXJBdFBhdGgoYCR7Q29uc3RhbnRzLlJPT1RfSU1QT1JUX0ZPTERFUl9OQU1FfS9BbW1vLyR7Zm9sZGVyTmFtZX1gLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgIGFtbW8uZm9sZGVyID0gZm9sZGVyLmlkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IEl0ZW0uY3JlYXRlKGFtbW9EYXRhcyk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgRGF0YUltcG9ydGVyIH0gZnJvbSAnLi9EYXRhSW1wb3J0ZXInO1xyXG5pbXBvcnQgeyBJbXBvcnRIZWxwZXIgfSBmcm9tICcuLi9oZWxwZXIvSW1wb3J0SGVscGVyJztcclxuaW1wb3J0IEFybW9yID0gU2hhZG93cnVuLkFybW9yO1xyXG5pbXBvcnQgeyBBcm1vclBhcnNlckJhc2UgfSBmcm9tICcuLi9wYXJzZXIvYXJtb3IvQXJtb3JQYXJzZXJCYXNlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBBcm1vckltcG9ydGVyIGV4dGVuZHMgRGF0YUltcG9ydGVyIHtcclxuICAgIHB1YmxpYyBhcm1vclRyYW5zbGF0aW9uczogYW55O1xyXG4gICAgcHVibGljIGNhdGVnb3J5VHJhbnNsYXRpb25zOiBhbnk7XHJcbiAgICBwdWJsaWMgZmlsZXMgPSBbJ2FybW9yLnhtbCddO1xyXG5cclxuICAgIENhblBhcnNlKGpzb25PYmplY3Q6IG9iamVjdCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBqc29uT2JqZWN0Lmhhc093blByb3BlcnR5KCdhcm1vcnMnKSAmJiBqc29uT2JqZWN0Wydhcm1vcnMnXS5oYXNPd25Qcm9wZXJ0eSgnYXJtb3InKTtcclxuICAgIH1cclxuXHJcbiAgICBHZXREZWZhdWx0RGF0YSgpOiBBcm1vciB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmFtZTogJ1VubmFtZWQgQXJtb3InLFxyXG4gICAgICAgICAgICBfaWQ6ICcnLFxyXG4gICAgICAgICAgICBmb2xkZXI6ICcnLFxyXG4gICAgICAgICAgICBpbWc6ICdpY29ucy9zdmcvbXlzdGVyeS1tYW4uc3ZnJyxcclxuICAgICAgICAgICAgZmxhZ3M6IHt9LFxyXG4gICAgICAgICAgICB0eXBlOiAnYXJtb3InLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBjaGF0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRlY2hub2xvZ3k6IHtcclxuICAgICAgICAgICAgICAgICAgICByYXRpbmc6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgYXZhaWxhYmlsaXR5OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogMSxcclxuICAgICAgICAgICAgICAgICAgICBjb3N0OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGVxdWlwcGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbmNlYWw6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZDogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBjb25kaXRpb25fbW9uaXRvcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXg6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB3aXJlbGVzczogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGFybW9yOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9kOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBhY2lkOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbGQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlyZTogMCxcclxuICAgICAgICAgICAgICAgICAgICBlbGVjdHJpY2l0eTogMCxcclxuICAgICAgICAgICAgICAgICAgICByYWRpYXRpb246IDAsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBwZXJtaXNzaW9uOiB7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiAyLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgRXh0cmFjdFRyYW5zbGF0aW9uKCkge1xyXG4gICAgICAgIGlmICghRGF0YUltcG9ydGVyLmpzb25pMThuKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBqc29uQXJtb3JpMThuID0gSW1wb3J0SGVscGVyLkV4dHJhY3REYXRhRmlsZVRyYW5zbGF0aW9uKERhdGFJbXBvcnRlci5qc29uaTE4biwgdGhpcy5maWxlc1swXSk7XHJcbiAgICAgICAgdGhpcy5jYXRlZ29yeVRyYW5zbGF0aW9ucyA9IEltcG9ydEhlbHBlci5FeHRyYWN0Q2F0ZWdvcmllc1RyYW5zbGF0aW9uKGpzb25Bcm1vcmkxOG4pO1xyXG4gICAgICAgIHRoaXMuYXJtb3JUcmFuc2xhdGlvbnMgPSBJbXBvcnRIZWxwZXIuRXh0cmFjdEl0ZW1UcmFuc2xhdGlvbihqc29uQXJtb3JpMThuLCAnYXJtb3JzJywgJ2FybW9yJyk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgUGFyc2UoanNvbk9iamVjdDogb2JqZWN0KTogUHJvbWlzZTxFbnRpdHk+IHtcclxuICAgICAgICBjb25zdCBmb2xkZXJzID0gYXdhaXQgSW1wb3J0SGVscGVyLk1ha2VDYXRlZ29yeUZvbGRlcnMoanNvbk9iamVjdCwgJ0FybW9yJywgdGhpcy5jYXRlZ29yeVRyYW5zbGF0aW9ucyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhcnNlciA9IG5ldyBBcm1vclBhcnNlckJhc2UoKTtcclxuXHJcbiAgICAgICAgbGV0IGRhdGFzOiBBcm1vcltdID0gW107XHJcbiAgICAgICAgbGV0IGpzb25EYXRhcyA9IGpzb25PYmplY3RbJ2FybW9ycyddWydhcm1vciddO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwganNvbkRhdGFzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBqc29uRGF0YSA9IGpzb25EYXRhc1tpXTtcclxuICAgICAgICAgICAgaWYgKERhdGFJbXBvcnRlci51bnN1cHBvcnRlZEVudHJ5KGpzb25EYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBkYXRhID0gcGFyc2VyLlBhcnNlKGpzb25EYXRhLCB0aGlzLkdldERlZmF1bHREYXRhKCkpO1xyXG4gICAgICAgICAgICBjb25zdCBjYXRlZ29yeSA9IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ2NhdGVnb3J5JykudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgZGF0YS5uYW1lID0gSW1wb3J0SGVscGVyLk1hcE5hbWVUb1RyYW5zbGF0aW9uKHRoaXMuYXJtb3JUcmFuc2xhdGlvbnMsIGRhdGEubmFtZSk7XHJcbiAgICAgICAgICAgIGRhdGEuZm9sZGVyID0gZm9sZGVyc1tjYXRlZ29yeV0uaWQ7XHJcblxyXG4gICAgICAgICAgICBkYXRhcy5wdXNoKGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IEl0ZW0uY3JlYXRlKGRhdGFzKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBEYXRhSW1wb3J0ZXIgfSBmcm9tICcuL0RhdGFJbXBvcnRlcic7XHJcbmltcG9ydCB7IEltcG9ydEhlbHBlciB9IGZyb20gJy4uL2hlbHBlci9JbXBvcnRIZWxwZXInO1xyXG5pbXBvcnQgeyBDb25zdGFudHMgfSBmcm9tICcuL0NvbnN0YW50cyc7XHJcbmltcG9ydCB7IENvbXBsZXhGb3JtUGFyc2VyQmFzZSB9IGZyb20gJy4uL3BhcnNlci9jb21wbGV4LWZvcm0vQ29tcGxleEZvcm1QYXJzZXJCYXNlJztcclxuaW1wb3J0IENvbXBsZXhGb3JtID0gU2hhZG93cnVuLkNvbXBsZXhGb3JtO1xyXG5pbXBvcnQge0RlZmF1bHRWYWx1ZXN9IGZyb20gXCIuLi8uLi9kYXRhVGVtcGxhdGVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29tcGxleEZvcm1JbXBvcnRlciBleHRlbmRzIERhdGFJbXBvcnRlciB7XHJcbiAgICBwdWJsaWMgY2F0ZWdvcnlUcmFuc2xhdGlvbnM6IGFueTtcclxuICAgIHB1YmxpYyBuYW1lVHJhbnNsYXRpb25zOiBhbnk7XHJcbiAgICBwdWJsaWMgZmlsZXMgPSBbJ2NvbXBsZXhmb3Jtcy54bWwnXTtcclxuXHJcbiAgICBDYW5QYXJzZShqc29uT2JqZWN0OiBvYmplY3QpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4ganNvbk9iamVjdC5oYXNPd25Qcm9wZXJ0eSgnY29tcGxleGZvcm1zJykgJiYganNvbk9iamVjdFsnY29tcGxleGZvcm1zJ10uaGFzT3duUHJvcGVydHkoJ2NvbXBsZXhmb3JtJyk7XHJcbiAgICB9XHJcblxyXG4gICAgR2V0RGVmYXVsdERhdGEoKTogQ29tcGxleEZvcm0ge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdVbm5hbWVkIEZvcm0nLFxyXG4gICAgICAgICAgICBfaWQ6ICcnLFxyXG4gICAgICAgICAgICBmb2xkZXI6ICcnLFxyXG4gICAgICAgICAgICBpbWc6ICdpY29ucy9zdmcvbXlzdGVyeS1tYW4uc3ZnJyxcclxuICAgICAgICAgICAgZmxhZ3M6IHt9LFxyXG4gICAgICAgICAgICB0eXBlOiAnY29tcGxleF9mb3JtJyxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhdDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiAnJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhY3Rpb246IHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY29tcGxleCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTogJ3Jlc29uYW5jZScsXHJcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlMjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgc2tpbGw6ICdjb21waWxpbmcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNwZWM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vZDogMCxcclxuICAgICAgICAgICAgICAgICAgICBtb2RfZGVzY3JpcHRpb246ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhbWFnZTogRGVmYXVsdFZhbHVlcy5kYW1hZ2VEYXRhKCksXHJcbiAgICAgICAgICAgICAgICAgICAgbGltaXQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZDogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBleHRlbmRlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgb3Bwb3NlZDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZGVmZW5zZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBza2lsbDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYWx0X21vZDogMCxcclxuICAgICAgICAgICAgICAgICAgICBkaWNlX3Bvb2xfbW9kOiBbXSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0YXJnZXQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246ICcnLFxyXG4gICAgICAgICAgICAgICAgZmFkZTogMCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcGVybWlzc2lvbjoge1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogMixcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIEV4dHJhY3RUcmFuc2xhdGlvbigpIHtcclxuICAgICAgICBpZiAoIURhdGFJbXBvcnRlci5qc29uaTE4bikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDb21wbGV4Zm9ybXMgZG9uJ3QgcHJvdmlkZSBhIGNhdGVnb3J5IHRyYW5zbGF0aW9uLlxyXG4gICAgICAgIGxldCBqc29uSXRlbWkxOG4gPSBJbXBvcnRIZWxwZXIuRXh0cmFjdERhdGFGaWxlVHJhbnNsYXRpb24oRGF0YUltcG9ydGVyLmpzb25pMThuLCB0aGlzLmZpbGVzWzBdKTtcclxuICAgICAgICB0aGlzLm5hbWVUcmFuc2xhdGlvbnMgPSBJbXBvcnRIZWxwZXIuRXh0cmFjdEl0ZW1UcmFuc2xhdGlvbihqc29uSXRlbWkxOG4sICdjb21wbGV4Zm9ybXMnLCAnY29tcGxleGZvcm0nKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBQYXJzZShqc29uT2JqZWN0OiBvYmplY3QpOiBQcm9taXNlPEVudGl0eT4ge1xyXG4gICAgICAgIGNvbnN0IHBhcnNlciA9IG5ldyBDb21wbGV4Rm9ybVBhcnNlckJhc2UoKTtcclxuICAgICAgICBjb25zdCBmb2xkZXIgPSBhd2FpdCBJbXBvcnRIZWxwZXIuR2V0Rm9sZGVyQXRQYXRoKGAke0NvbnN0YW50cy5ST09UX0lNUE9SVF9GT0xERVJfTkFNRX0vQ29tcGxleCBGb3Jtc2AsIHRydWUpO1xyXG5cclxuICAgICAgICBsZXQgZGF0YXM6IENvbXBsZXhGb3JtW10gPSBbXTtcclxuICAgICAgICBsZXQganNvbkRhdGFzID0ganNvbk9iamVjdFsnY29tcGxleGZvcm1zJ11bJ2NvbXBsZXhmb3JtJ107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBqc29uRGF0YXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGpzb25EYXRhID0ganNvbkRhdGFzW2ldO1xyXG4gICAgICAgICAgICBpZiAoRGF0YUltcG9ydGVyLnVuc3VwcG9ydGVkRW50cnkoanNvbkRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGRhdGEgPSBwYXJzZXIuUGFyc2UoanNvbkRhdGEsIHRoaXMuR2V0RGVmYXVsdERhdGEoKSwgdGhpcy5uYW1lVHJhbnNsYXRpb25zKTtcclxuICAgICAgICAgICAgZGF0YS5mb2xkZXIgPSBmb2xkZXIuaWQ7XHJcblxyXG4gICAgICAgICAgICAvLyBUT0RPOiBGb2xsb3cgQ29tcGxleEZvcm1QYXJzZXJCYXNlIGFwcHJvYWNoLlxyXG4gICAgICAgICAgICBkYXRhLm5hbWUgPSBJbXBvcnRIZWxwZXIuTWFwTmFtZVRvVHJhbnNsYXRpb24odGhpcy5uYW1lVHJhbnNsYXRpb25zLCBkYXRhLm5hbWUpO1xyXG5cclxuICAgICAgICAgICAgZGF0YXMucHVzaChkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBhd2FpdCBJdGVtLmNyZWF0ZShkYXRhcyk7XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIENvbnN0YW50cyB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE1BUF9DQVRFR09SWV9UT19TS0lMTCA9IHtcclxuICAgICAgICAnQXNzYXVsdCBDYW5ub25zJzogJ2hlYXZ5X3dlYXBvbnMnLFxyXG4gICAgICAgICdBc3NhdWx0IFJpZmxlcyc6ICdhdXRvbWF0aWNzJyxcclxuICAgICAgICAnQmxhZGVzJzogJ2JsYWRlcycsXHJcbiAgICAgICAgJ0Jvd3MnOiAnYXJjaGVyeScsXHJcbiAgICAgICAgJ0NhcmJpbmVzJzogJ2F1dG9tYXRpY3MnLFxyXG4gICAgICAgICdDbHVicyc6ICdjbHVicycsXHJcbiAgICAgICAgJ0Nyb3NzYm93cyc6ICdhcmNoZXJ5JyxcclxuICAgICAgICAnRXhvdGljIE1lbGVlIFdlYXBvbnMnOiAnZXhvdGljX21lbGVlJyxcclxuICAgICAgICAnRXhvdGljIFJhbmdlZCBXZWFwb25zJzogJ2V4b3RpY19yYW5nZWQnLFxyXG4gICAgICAgICdGbGFtZXRocm93ZXJzJzogJ2V4b3RpY19yYW5nZWQnLFxyXG4gICAgICAgICdHcmVuYWRlIExhdW5jaGVycyc6ICdoZWF2eV93ZWFwb25zJyxcclxuICAgICAgICAnSGVhdnkgTWFjaGluZSBHdW5zJzogJ2hlYXZ5X3dlYXBvbnMnLFxyXG4gICAgICAgICdIZWF2eSBQaXN0b2xzJzogJ3Bpc3RvbHMnLFxyXG4gICAgICAgICdIb2xkb3V0cyc6ICdwaXN0b2xzJyxcclxuICAgICAgICAnTGFzZXIgV2VhcG9ucyc6ICdleG90aWNfcmFuZ2VkJyxcclxuICAgICAgICAnTGlnaHQgTWFjaGluZSBHdW5zJzogJ2hlYXZ5X3dlYXBvbnMnLFxyXG4gICAgICAgICdMaWdodCBQaXN0b2xzJzogJ3Bpc3RvbHMnLFxyXG4gICAgICAgICdNYWNoaW5lIFBpc3RvbHMnOiAnYXV0b21hdGljcycsXHJcbiAgICAgICAgJ01lZGl1bSBNYWNoaW5lIEd1bnMnOiAnYXV0b21hdGljcycsXHJcbiAgICAgICAgJ01pc3NpbGUgTGF1bmNoZXJzJzogJ2hlYXZ5X3dlYXBvbnMnLFxyXG4gICAgICAgICdTaG90Z3Vucyc6ICdsb25nYXJtcycsXHJcbiAgICAgICAgJ1NuaXBlciBSaWZsZXMnOiAnbG9uZ2FybXMnLFxyXG4gICAgICAgICdTcG9ydGluZyBSaWZsZXMnOiAnbG9uZ2FybXMnLFxyXG4gICAgICAgICdTdWJtYWNoaW5lIEd1bnMnOiAnYXV0b21hdGljcycsXHJcbiAgICAgICAgJ1Rhc2Vycyc6ICdwaXN0b2xzJyxcclxuICAgICAgICAnVW5hcm1lZCc6ICd1bmFybWVkX2NvbWJhdCcsXHJcbiAgICB9O1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBXRUFQT05fUkFOR0VTID0ge1xyXG4gICAgICAgICdUYXNlcnMnOiB7XHJcbiAgICAgICAgICAgIHNob3J0OiA1LFxyXG4gICAgICAgICAgICBtZWRpdW06IDEwLFxyXG4gICAgICAgICAgICBsb25nOiAxNSxcclxuICAgICAgICAgICAgZXh0cmVtZTogMjAsXHJcbiAgICAgICAgfSxcclxuICAgICAgICAnSG9sZG91dHMnOiB7XHJcbiAgICAgICAgICAgIHNob3J0OiA1LFxyXG4gICAgICAgICAgICBtZWRpdW06IDE1LFxyXG4gICAgICAgICAgICBsb25nOiAzMCxcclxuICAgICAgICAgICAgZXh0cmVtZTogNTAsXHJcbiAgICAgICAgfSxcclxuICAgICAgICAnTGlnaHQgUGlzdG9scyc6IHtcclxuICAgICAgICAgICAgc2hvcnQ6IDUsXHJcbiAgICAgICAgICAgIG1lZGl1bTogMTUsXHJcbiAgICAgICAgICAgIGxvbmc6IDMwLFxyXG4gICAgICAgICAgICBleHRyZW1lOiA1MCxcclxuICAgICAgICB9LFxyXG4gICAgICAgICdIZWF2eSBQaXN0b2xzJzoge1xyXG4gICAgICAgICAgICBzaG9ydDogNSxcclxuICAgICAgICAgICAgbWVkaXVtOiAyMCxcclxuICAgICAgICAgICAgbG9uZzogNDAsXHJcbiAgICAgICAgICAgIGV4dHJlbWU6IDYwLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ01hY2hpbmUgUGlzdG9scyc6IHtcclxuICAgICAgICAgICAgc2hvcnQ6IDUsXHJcbiAgICAgICAgICAgIG1lZGl1bTogMTUsXHJcbiAgICAgICAgICAgIGxvbmc6IDMwLFxyXG4gICAgICAgICAgICBleHRyZW1lOiA1MCxcclxuICAgICAgICB9LFxyXG4gICAgICAgICdTdWJtYWNoaW5lIEd1bnMnOiB7XHJcbiAgICAgICAgICAgIHNob3J0OiAxMCxcclxuICAgICAgICAgICAgbWVkaXVtOiA0MCxcclxuICAgICAgICAgICAgbG9uZzogODAsXHJcbiAgICAgICAgICAgIGV4dHJlbWU6IDE1MCxcclxuICAgICAgICB9LFxyXG4gICAgICAgICdBc3NhdWx0IFJpZmxlcyc6IHtcclxuICAgICAgICAgICAgc2hvcnQ6IDI1LFxyXG4gICAgICAgICAgICBtZWRpdW06IDE1MCxcclxuICAgICAgICAgICAgbG9uZzogMzUwLFxyXG4gICAgICAgICAgICBleHRyZW1lOiA1NTAsXHJcbiAgICAgICAgfSxcclxuICAgICAgICAnU2hvdGd1bnMnOiB7XHJcbiAgICAgICAgICAgIHNob3J0OiAxMCxcclxuICAgICAgICAgICAgbWVkaXVtOiA0MCxcclxuICAgICAgICAgICAgbG9uZzogODAsXHJcbiAgICAgICAgICAgIGV4dHJlbWU6IDE1MCxcclxuICAgICAgICB9LFxyXG4gICAgICAgICdTaG90Z3VucyAoc2x1ZyknOiB7XHJcbiAgICAgICAgICAgIHNob3J0OiAxMCxcclxuICAgICAgICAgICAgbWVkaXVtOiA0MCxcclxuICAgICAgICAgICAgbG9uZzogODAsXHJcbiAgICAgICAgICAgIGV4dHJlbWU6IDE1MCxcclxuICAgICAgICB9LFxyXG4gICAgICAgICdTaG90Z3VucyAoZmxlY2hldHRlKSc6IHtcclxuICAgICAgICAgICAgc2hvcnQ6IDE1LFxyXG4gICAgICAgICAgICBtZWRpdW06IDMwLFxyXG4gICAgICAgICAgICBsb25nOiA0NSxcclxuICAgICAgICAgICAgZXh0cmVtZTogNjAsXHJcbiAgICAgICAgfSxcclxuICAgICAgICAnU25pcGVyIFJpZmxlcyc6IHtcclxuICAgICAgICAgICAgc2hvcnQ6IDUwLFxyXG4gICAgICAgICAgICBtZWRpdW06IDM1MCxcclxuICAgICAgICAgICAgbG9uZzogODAwLFxyXG4gICAgICAgICAgICBleHRyZW1lOiAxNTAwLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ1Nwb3J0aW5nIFJpZmxlcyc6IHtcclxuICAgICAgICAgICAgc2hvcnQ6IDUwLFxyXG4gICAgICAgICAgICBtZWRpdW06IDI1MCxcclxuICAgICAgICAgICAgbG9uZzogNTAwLFxyXG4gICAgICAgICAgICBleHRyZW1lOiA3NTAsXHJcbiAgICAgICAgfSxcclxuICAgICAgICAnTGlnaHQgTWFjaGluZSBHdW5zJzoge1xyXG4gICAgICAgICAgICBzaG9ydDogMjUsXHJcbiAgICAgICAgICAgIG1lZGl1bTogMjAwLFxyXG4gICAgICAgICAgICBsb25nOiA0MDAsXHJcbiAgICAgICAgICAgIGV4dHJlbWU6IDgwMCxcclxuICAgICAgICB9LFxyXG4gICAgICAgICdNZWRpdW0vSGVhdnkgTWFjaGluZWd1bic6IHtcclxuICAgICAgICAgICAgc2hvcnQ6IDQwLFxyXG4gICAgICAgICAgICBtZWRpdW06IDI1MCxcclxuICAgICAgICAgICAgbG9uZzogNzUwLFxyXG4gICAgICAgICAgICBleHRyZW1lOiAxMjAwLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ0Fzc2F1bHQgQ2Fubm9ucyc6IHtcclxuICAgICAgICAgICAgc2hvcnQ6IDUwLFxyXG4gICAgICAgICAgICBtZWRpdW06IDMwMCxcclxuICAgICAgICAgICAgbG9uZzogNzUwLFxyXG4gICAgICAgICAgICBleHRyZW1lOiAxNTAwLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ0dyZW5hZGUgTGF1bmNoZXJzJzoge1xyXG4gICAgICAgICAgICBtaW46IDUsXHJcbiAgICAgICAgICAgIHNob3J0OiA1MCxcclxuICAgICAgICAgICAgbWVkaXVtOiAxMDAsXHJcbiAgICAgICAgICAgIGxvbmc6IDE1MCxcclxuICAgICAgICAgICAgZXh0cmVtZTogNTAwLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ01pc3NpbGUgTGF1bmNoZXJzJzoge1xyXG4gICAgICAgICAgICBtaW46IDIwLFxyXG4gICAgICAgICAgICBzaG9ydDogNzAsXHJcbiAgICAgICAgICAgIG1lZGl1bTogMTUwLFxyXG4gICAgICAgICAgICBsb25nOiA0NTAsXHJcbiAgICAgICAgICAgIGV4dHJlbWU6IDE1MDAsXHJcbiAgICAgICAgfSxcclxuICAgICAgICAnQm93cyc6IHtcclxuICAgICAgICAgICAgc2hvcnQ6IDEsXHJcbiAgICAgICAgICAgIG1lZGl1bTogMTAsXHJcbiAgICAgICAgICAgIGxvbmc6IDMwLFxyXG4gICAgICAgICAgICBleHRyZW1lOiA2MCxcclxuICAgICAgICAgICAgYXR0cmlidXRlOiAnc3RyZW5ndGgnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ0xpZ2h0IENyb3NzYm93cyc6IHtcclxuICAgICAgICAgICAgc2hvcnQ6IDYsXHJcbiAgICAgICAgICAgIG1lZGl1bTogMjQsXHJcbiAgICAgICAgICAgIGxvbmc6IDYwLFxyXG4gICAgICAgICAgICBleHRyZW1lOiAxMjAsXHJcbiAgICAgICAgfSxcclxuICAgICAgICAnTWVkaXVtIENyb3NzYm93cyc6IHtcclxuICAgICAgICAgICAgc2hvcnQ6IDksXHJcbiAgICAgICAgICAgIG1lZGl1bTogMzYsXHJcbiAgICAgICAgICAgIGxvbmc6IDkwLFxyXG4gICAgICAgICAgICBleHRyZW1lOiAxNTAsXHJcbiAgICAgICAgfSxcclxuICAgICAgICAnSGVhdnkgQ3Jvc3Nib3dzJzoge1xyXG4gICAgICAgICAgICBzaG9ydDogMTUsXHJcbiAgICAgICAgICAgIG1lZGl1bTogNDUsXHJcbiAgICAgICAgICAgIGxvbmc6IDEyMCxcclxuICAgICAgICAgICAgZXh0cmVtZTogMTgwLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ1Rocm93biBLbmlmZSc6IHtcclxuICAgICAgICAgICAgc2hvcnQ6IDEsXHJcbiAgICAgICAgICAgIG1lZGl1bTogMixcclxuICAgICAgICAgICAgbG9uZzogMyxcclxuICAgICAgICAgICAgZXh0cmVtZTogNSxcclxuICAgICAgICAgICAgYXR0cmlidXRlOiAnc3RyZW5ndGgnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ05ldCc6IHtcclxuICAgICAgICAgICAgc2hvcnQ6IDAuNSxcclxuICAgICAgICAgICAgbWVkaXVtOiAxLFxyXG4gICAgICAgICAgICBsb25nOiAxLjUsXHJcbiAgICAgICAgICAgIGV4dHJlbWU6IDIuNSxcclxuICAgICAgICAgICAgYXR0cmlidXRlOiAnc3RyZW5ndGgnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ1NodXJpa2VuJzoge1xyXG4gICAgICAgICAgICBzaG9ydDogMSxcclxuICAgICAgICAgICAgbWVkaXVtOiAyLFxyXG4gICAgICAgICAgICBsb25nOiA1LFxyXG4gICAgICAgICAgICBleHRyZW1lOiA3LFxyXG4gICAgICAgICAgICBhdHRyaWJ1dGU6ICdzdHJlbmd0aCcsXHJcbiAgICAgICAgfSxcclxuICAgICAgICAnU3RhbmRhcmQgR3JlbmFkZSc6IHtcclxuICAgICAgICAgICAgc2hvcnQ6IDIsXHJcbiAgICAgICAgICAgIG1lZGl1bTogNCxcclxuICAgICAgICAgICAgbG9uZzogNixcclxuICAgICAgICAgICAgZXh0cmVtZTogMTAsXHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZTogJ3N0cmVuZ3RoJyxcclxuICAgICAgICB9LFxyXG4gICAgICAgICdBZXJvZHluYW1pYyBHcmVuYWRlJzoge1xyXG4gICAgICAgICAgICBtaW46IDAsXHJcbiAgICAgICAgICAgIHNob3J0OiAyLFxyXG4gICAgICAgICAgICBtZWRpdW06IDQsXHJcbiAgICAgICAgICAgIGxvbmc6IDgsXHJcbiAgICAgICAgICAgIGV4dHJlbWU6IDE1LFxyXG4gICAgICAgICAgICBhdHRyaWJ1dGU6ICdzdHJlbmd0aCcsXHJcbiAgICAgICAgfSxcclxuICAgICAgICAnSGFycG9vbiBHdW4nOiB7XHJcbiAgICAgICAgICAgIHNob3J0OiA1LFxyXG4gICAgICAgICAgICBtZWRpdW06IDIwLFxyXG4gICAgICAgICAgICBsb25nOiA0MCxcclxuICAgICAgICAgICAgZXh0cmVtZTogNjAsXHJcbiAgICAgICAgfSxcclxuICAgICAgICAnSGFycG9vbiBHdW4gKFVuZGVyd2F0ZXIpJzoge1xyXG4gICAgICAgICAgICBzaG9ydDogNixcclxuICAgICAgICAgICAgbWVkaXVtOiAyNCxcclxuICAgICAgICAgICAgbG9uZzogNjAsXHJcbiAgICAgICAgICAgIGV4dHJlbWU6IDEyMCxcclxuICAgICAgICB9LFxyXG4gICAgICAgICdGbGFtZXRocm93ZXJzJzoge1xyXG4gICAgICAgICAgICBzaG9ydDogMTUsXHJcbiAgICAgICAgICAgIG1lZGl1bTogMjAsXHJcbiAgICAgICAgICAgIGxvbmc6IC0xLFxyXG4gICAgICAgICAgICBleHRyZW1lOiAtMSxcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFJPT1RfSU1QT1JUX0ZPTERFUl9OQU1FID0gJ1NSNWUnO1xyXG59XHJcbiIsImltcG9ydCB7IERhdGFJbXBvcnRlciB9IGZyb20gJy4vRGF0YUltcG9ydGVyJztcclxuaW1wb3J0IHsgSW1wb3J0SGVscGVyIH0gZnJvbSAnLi4vaGVscGVyL0ltcG9ydEhlbHBlcic7XHJcbmltcG9ydCBDcml0dGVyUG93ZXIgPSBTaGFkb3dydW4uQ3JpdHRlclBvd2VyO1xyXG5pbXBvcnQgeyBDcml0dGVyUG93ZXJQYXJzZXJCYXNlIH0gZnJvbSAnLi4vcGFyc2VyL2NyaXR0ZXItcG93ZXIvQ3JpdHRlclBvd2VyUGFyc2VyQmFzZSc7XHJcbmltcG9ydCB7IENvbnN0YW50cyB9IGZyb20gJy4vQ29uc3RhbnRzJztcclxuaW1wb3J0IHtEZWZhdWx0VmFsdWVzfSBmcm9tIFwiLi4vLi4vZGF0YVRlbXBsYXRlc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENyaXR0ZXJQb3dlckltcG9ydGVyIGV4dGVuZHMgRGF0YUltcG9ydGVyIHtcclxuICAgIHB1YmxpYyBjYXRlZ29yeVRyYW5zbGF0aW9uczogYW55O1xyXG4gICAgcHVibGljIGl0ZW1UcmFuc2xhdGlvbnM6IGFueTtcclxuICAgIHB1YmxpYyBmaWxlcyA9IFsnY3JpdHRlcnBvd2Vycy54bWwnXTtcclxuXHJcbiAgICBDYW5QYXJzZShqc29uT2JqZWN0OiBvYmplY3QpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4ganNvbk9iamVjdC5oYXNPd25Qcm9wZXJ0eSgncG93ZXJzJykgJiYganNvbk9iamVjdFsncG93ZXJzJ10uaGFzT3duUHJvcGVydHkoJ3Bvd2VyJyk7XHJcbiAgICB9XHJcblxyXG4gICAgR2V0RGVmYXVsdERhdGEoKTogQ3JpdHRlclBvd2VyIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuYW1lOiAnVW5uYW1lZCBJdGVtJyxcclxuICAgICAgICAgICAgX2lkOiAnJyxcclxuICAgICAgICAgICAgZm9sZGVyOiAnJyxcclxuICAgICAgICAgICAgaW1nOiAnaWNvbnMvc3ZnL215c3RlcnktbWFuLnN2ZycsXHJcbiAgICAgICAgICAgIGZsYWdzOiB7fSxcclxuICAgICAgICAgICAgdHlwZTogJ2NyaXR0ZXJfcG93ZXInLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBjaGF0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGFjdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNraWxsOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzcGVjOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBtb2Q6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9kX2Rlc2NyaXB0aW9uOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBkYW1hZ2U6IERlZmF1bHRWYWx1ZXMuZGFtYWdlRGF0YSh7dHlwZToge2Jhc2U6ICcnLCB2YWx1ZTogJyd9fSksXHJcbiAgICAgICAgICAgICAgICAgICAgbGltaXQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZDogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBleHRlbmRlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgb3Bwb3NlZDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlMjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraWxsOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhbHRfbW9kOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpY2VfcG9vbF9tb2Q6IFtdLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGFybW9yOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9kOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBhY2lkOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbGQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlyZTogMCxcclxuICAgICAgICAgICAgICAgICAgICBlbGVjdHJpY2l0eTogMCxcclxuICAgICAgICAgICAgICAgICAgICByYWRpYXRpb246IDAsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnk6ICcnLFxyXG4gICAgICAgICAgICAgICAgcG93ZXJUeXBlOiAnJyxcclxuICAgICAgICAgICAgICAgIHJhbmdlOiAnJyxcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAnJyxcclxuICAgICAgICAgICAgICAgIGthcm1hOiAwLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBwZXJtaXNzaW9uOiB7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiAyLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgRXh0cmFjdFRyYW5zbGF0aW9uKCkge1xyXG4gICAgICAgIGlmICghRGF0YUltcG9ydGVyLmpzb25pMThuKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBqc29uQ3JpdHRlclBvd2VyaTE4biA9IEltcG9ydEhlbHBlci5FeHRyYWN0RGF0YUZpbGVUcmFuc2xhdGlvbihEYXRhSW1wb3J0ZXIuanNvbmkxOG4sIHRoaXMuZmlsZXNbMF0pO1xyXG4gICAgICAgIHRoaXMuY2F0ZWdvcnlUcmFuc2xhdGlvbnMgPSBJbXBvcnRIZWxwZXIuRXh0cmFjdENhdGVnb3JpZXNUcmFuc2xhdGlvbihqc29uQ3JpdHRlclBvd2VyaTE4bik7XHJcbiAgICAgICAgdGhpcy5pdGVtVHJhbnNsYXRpb25zID0gSW1wb3J0SGVscGVyLkV4dHJhY3RJdGVtVHJhbnNsYXRpb24oanNvbkNyaXR0ZXJQb3dlcmkxOG4sICdwb3dlcnMnLCAncG93ZXInKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBQYXJzZShqc29uT2JqZWN0OiBvYmplY3QpOiBQcm9taXNlPEVudGl0eT4ge1xyXG4gICAgICBjb25zdCBwYXJzZXIgPSBuZXcgQ3JpdHRlclBvd2VyUGFyc2VyQmFzZSgpO1xyXG4gICAgICBjb25zdCBmb2xkZXIgPSBhd2FpdCBJbXBvcnRIZWxwZXIuR2V0Rm9sZGVyQXRQYXRoKGAke0NvbnN0YW50cy5ST09UX0lNUE9SVF9GT0xERVJfTkFNRX0vQ3JpdHRlciBQb3dlcnNgLCB0cnVlKTtcclxuXHJcbiAgICAgIGxldCBkYXRhczogQ3JpdHRlclBvd2VyW10gPSBbXTtcclxuICAgICAgbGV0IGpzb25EYXRhcyA9IGpzb25PYmplY3RbJ3Bvd2VycyddWydwb3dlciddO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGpzb25EYXRhcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgbGV0IGpzb25EYXRhID0ganNvbkRhdGFzW2ldO1xyXG5cclxuICAgICAgICAgIGxldCBkYXRhID0gcGFyc2VyLlBhcnNlKGpzb25EYXRhLCB0aGlzLkdldERlZmF1bHREYXRhKCksIHRoaXMuaXRlbVRyYW5zbGF0aW9ucyk7XHJcbiAgICAgICAgICBkYXRhLmZvbGRlciA9IGZvbGRlci5pZDtcclxuICAgICAgICAgIGRhdGEubmFtZSA9IEltcG9ydEhlbHBlci5NYXBOYW1lVG9UcmFuc2xhdGlvbih0aGlzLml0ZW1UcmFuc2xhdGlvbnMsIGRhdGEubmFtZSk7XHJcblxyXG4gICAgICAgICAgZGF0YXMucHVzaChkYXRhKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGF3YWl0IEl0ZW0uY3JlYXRlKGRhdGFzKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJbXBvcnRIZWxwZXIgfSBmcm9tICcuLi9oZWxwZXIvSW1wb3J0SGVscGVyJztcclxuXHJcbmNvbnN0IHhtbDJqcyA9IHJlcXVpcmUoJ3htbDJqcycpO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIERhdGFJbXBvcnRlciB7XHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgZmlsZXM6IHN0cmluZ1tdO1xyXG4gICAgcHVibGljIHN0YXRpYyBqc29uaTE4bjogYW55O1xyXG4gICAgcHVibGljIGNhdGVnb3J5VHJhbnNsYXRpb25zOiBhbnk7XHJcbiAgICBwdWJsaWMgZW50cnlUcmFuc2xhdGlvbnM6IGFueTtcclxuICAgIHB1YmxpYyBzdGF0aWMgdW5zdXBwb3J0ZWRCb29rczogc3RyaW5nW10gPSBbJzIwNTAnXTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBkZWZhdWx0IGRhdGEgZm9yIGNvbnN0cnVjdGluZyBhIFRJdGVtLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgR2V0RGVmYXVsdERhdGEoKTogYW55O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBqc29uT2JqZWN0IEpTT04gRGF0YSB3aXRoIGFsbCBkYXRhIHRyYW5zbGF0aW9ucyBmb3Igb25lIGxhbmd1YWdlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIENhblBhcnNlSTE4bihqc29uT2JqZWN0OiBhbnkpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4ganNvbk9iamVjdC5oYXNPd25Qcm9wZXJ0eSgnY2h1bW1lcicpICYmIGpzb25PYmplY3QuY2h1bW1lci5sZW5ndGggPiAwICYmIGpzb25PYmplY3QuY2h1bW1lclswXS4kLmhhc093blByb3BlcnR5KCdmaWxlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdG9yZXMgdHJhbnNsYXRpb25zIGFzIGEgd2hvbGUgZm9yIGFsbCBpbXBsZW1lbnRpbmcgY2xhc3NlcyB0byBleHRyYWN0IGZyb20gd2l0aG91dCByZXBhcnNpbmcuXHJcbiAgICAgKiBAcGFyYW0ganNvbk9iamVjdCBKU09OIERhdGEgd2l0aCBhbGwgZGF0YSB0cmFuc2xhdGlvbnMgZm9yIG9uZSBsYW5ndWFnZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBQYXJzZVRyYW5zbGF0aW9uKGpzb25PYmplY3Q6IG9iamVjdCkge1xyXG4gICAgICAgIGlmIChqc29uT2JqZWN0ICYmIGpzb25PYmplY3QuaGFzT3duUHJvcGVydHkoJ2NodW1tZXInKSkge1xyXG4gICAgICAgICAgICBEYXRhSW1wb3J0ZXIuanNvbmkxOG4gPSBqc29uT2JqZWN0WydjaHVtbWVyJ107XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbXBsZW1lbnRpbmcgY2xhc3NlcyBjYW4gdXNlIEV4dHJhY3RUcmFuc2xhdGlvbiB0byBvbmx5IGV4dHJhY3QgbmVlZGVkIHRyYW5zbGF0aW9ucy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFic3RyYWN0IEV4dHJhY3RUcmFuc2xhdGlvbihmaWxlTmFtZT86IHN0cmluZyk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBWYWxpZGF0ZSBpZiB0aGlzIGltcG9ydGVyIGlzIGNhcGFibGUgb2YgcGFyc2luZyB0aGUgcHJvdmlkZWQgSlNPTiBkYXRhLlxyXG4gICAgICogQHBhcmFtIGpzb25PYmplY3QgSlNPTiBkYXRhIHRvIGNoZWNrIGltcG9ydCBjYXBhYmlsaXR5IGZvci5cclxuICAgICAqIEByZXR1cm5zIGJvb2xlYW4gVHJ1ZSBpZiB0aGUgaW1wb3J0ZXIgaXMgY2FwYWJsZSBvZiBwYXJzaW5nIHRoZSBwcm92aWRlZCBYTUwgZGF0YS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFic3RyYWN0IENhblBhcnNlKGpzb25PYmplY3Q6IG9iamVjdCk6IGJvb2xlYW47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZSB0aGUgc3BlY2lmaWVkIGpzb25PYmplY3QgYW5kIHJldHVybiBJdGVtIHJlcHJlc2VudGF0aW9ucy5cclxuICAgICAqIEBwYXJhbSBqc29uT2JqZWN0IFRoZSBKU09OIGRhdGEgdG8gcGFyc2UuXHJcbiAgICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiBjcmVhdGVkIG9iamVjdHMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBQYXJzZShqc29uT2JqZWN0OiBvYmplY3QpOiBQcm9taXNlPEVudGl0eT47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZSBhbiBYTUwgc3RyaW5nIGludG8gYSBKU09OIG9iamVjdC5cclxuICAgICAqIEBwYXJhbSB4bWxTdHJpbmcgVGhlIHN0cmluZyB0byBwYXJzZSBhcyBYTUwuXHJcbiAgICAgKiBAcmV0dXJucyBBIGpzb24gb2JqZWN0IGNvbnZlcnRlZCBmcm9tIHRoZSBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgeG1sMmpzb24oeG1sU3RyaW5nOiBzdHJpbmcpOiBQcm9taXNlPG9iamVjdD4ge1xyXG4gICAgICAgIGNvbnN0IHBhcnNlciA9IHhtbDJqcy5QYXJzZXIoe1xyXG4gICAgICAgICAgICBleHBsaWNpdEFycmF5OiBmYWxzZSxcclxuICAgICAgICAgICAgZXhwbGljaXRDaGFya2V5OiB0cnVlLFxyXG4gICAgICAgICAgICBjaGFya2V5OiBJbXBvcnRIZWxwZXIuQ0hBUl9LRVksXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiAoYXdhaXQgcGFyc2VyLnBhcnNlU3RyaW5nUHJvbWlzZSh4bWxTdHJpbmcpKVsnY2h1bW1lciddO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgdW5zdXBwb3J0ZWRCb29rU291cmNlKGpzb25PYmplY3QpIHtcclxuICAgICAgICBpZiAoIWpzb25PYmplY3QuaGFzT3duUHJvcGVydHkoJ3NvdXJjZScpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgY29uc3Qgc291cmNlID0gSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGpzb25PYmplY3QsICdzb3VyY2UnLCAnJyk7XHJcbiAgICAgICAgcmV0dXJuIERhdGFJbXBvcnRlci51bnN1cHBvcnRlZEJvb2tzLmluY2x1ZGVzKHNvdXJjZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyB1bnN1cHBvcnRlZEVudHJ5KGpzb25PYmplY3QpIHtcclxuICAgICAgICBpZiAoRGF0YUltcG9ydGVyLnVuc3VwcG9ydGVkQm9va1NvdXJjZShqc29uT2JqZWN0KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQge0RhdGFJbXBvcnRlcn0gZnJvbSBcIi4vRGF0YUltcG9ydGVyXCI7XHJcbmltcG9ydCB7SW1wb3J0SGVscGVyfSBmcm9tIFwiLi4vaGVscGVyL0ltcG9ydEhlbHBlclwiO1xyXG5pbXBvcnQge0NvbnN0YW50c30gZnJvbSBcIi4vQ29uc3RhbnRzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRGV2aWNlSW1wb3J0ZXIgZXh0ZW5kcyBEYXRhSW1wb3J0ZXIge1xyXG4gICAgcHVibGljIGZpbGVzID0gWydnZWFyLnhtbCddO1xyXG5cclxuICAgIENhblBhcnNlKGpzb25PYmplY3Q6IG9iamVjdCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBqc29uT2JqZWN0Lmhhc093blByb3BlcnR5KCdnZWFycycpICYmIGpzb25PYmplY3RbJ2dlYXJzJ10uaGFzT3duUHJvcGVydHkoJ2dlYXInKTtcclxuICAgIH1cclxuXHJcbiAgICBHZXREZWZhdWx0RGF0YSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuYW1lOiAnJyxcclxuICAgICAgICAgICAgX2lkOiAnJyxcclxuICAgICAgICAgICAgZm9sZGVyOiAnJyxcclxuICAgICAgICAgICAgaW1nOiAnaWNvbnMvc3ZnL215c3RlcnktbWFuLnN2ZycsXHJcbiAgICAgICAgICAgIGZsYWdzOiB7fSxcclxuICAgICAgICAgICAgdHlwZTogJ2RldmljZScsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYXQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogJycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdGVjaG5vbG9neToge1xyXG4gICAgICAgICAgICAgICAgICAgIHJhdGluZzogMSxcclxuICAgICAgICAgICAgICAgICAgICBhdmFpbGFiaWxpdHk6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvc3Q6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZXF1aXBwZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgY29uY2VhbDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbl9tb25pdG9yOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heDogMCxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5OiAnY29tbWxpbmsnLFxyXG4gICAgICAgICAgICAgICAgXCJhdHRzXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICBcImF0dDFcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInZhbHVlXCI6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYXR0XCI6IFwiYXR0YWNrXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIFwiYXR0MlwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidmFsdWVcIjogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJhdHRcIjogXCJzbGVhemVcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgXCJhdHQzXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImF0dFwiOiBcImRhdGFfcHJvY2Vzc2luZ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBcImF0dDRcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInZhbHVlXCI6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYXR0XCI6IFwiZmlyZXdhbGxcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHBlcm1pc3Npb246IHtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IDIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBFeHRyYWN0VHJhbnNsYXRpb24oZmlsZU5hbWU/OiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAoIURhdGFJbXBvcnRlci5qc29uaTE4bikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQganNvbkdlYXJpMThuID0gSW1wb3J0SGVscGVyLkV4dHJhY3REYXRhRmlsZVRyYW5zbGF0aW9uKERhdGFJbXBvcnRlci5qc29uaTE4biwgdGhpcy5maWxlc1swXSk7XHJcbiAgICAgICAgdGhpcy5jYXRlZ29yeVRyYW5zbGF0aW9ucyA9IEltcG9ydEhlbHBlci5FeHRyYWN0Q2F0ZWdvcmllc1RyYW5zbGF0aW9uKGpzb25HZWFyaTE4bik7XHJcbiAgICAgICAgdGhpcy5lbnRyeVRyYW5zbGF0aW9ucyA9IEltcG9ydEhlbHBlci5FeHRyYWN0SXRlbVRyYW5zbGF0aW9uKGpzb25HZWFyaTE4biwgJ2dlYXJzJywgJ2dlYXInKTtcclxuICAgIH1cclxuXHJcbiAgICBQYXJzZUNvbW1saW5rRGV2aWNlcyhjb21tbGlua3MsIGZvbGRlcikge1xyXG4gICAgICAgIGNvbnN0IGVudHJpZXMgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBjb21tbGluayBvZiBjb21tbGlua3MpIHtcclxuICAgICAgICAgICAgaWYgKERhdGFJbXBvcnRlci51bnN1cHBvcnRlZEVudHJ5KGNvbW1saW5rKSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuR2V0RGVmYXVsdERhdGEoKTtcclxuXHJcbiAgICAgICAgICAgIGRhdGEubmFtZSA9IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShjb21tbGluaywgJ25hbWUnKTtcclxuICAgICAgICAgICAgZGF0YS5uYW1lID0gSW1wb3J0SGVscGVyLk1hcE5hbWVUb1RyYW5zbGF0aW9uKHRoaXMuZW50cnlUcmFuc2xhdGlvbnMsIGRhdGEubmFtZSk7XHJcblxyXG4gICAgICAgICAgICBkYXRhLmRhdGEuZGVzY3JpcHRpb24uc291cmNlID0gYCR7SW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGNvbW1saW5rLCAnc291cmNlJyl9ICR7SW1wb3J0SGVscGVyLk1hcE5hbWVUb1BhZ2VTb3VyY2UodGhpcy5lbnRyeVRyYW5zbGF0aW9ucywgSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGNvbW1saW5rLCAnbmFtZScpLCBJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoY29tbWxpbmssICdwYWdlJykpfWA7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS50ZWNobm9sb2d5LnJhdGluZyA9IEltcG9ydEhlbHBlci5JbnRWYWx1ZShjb21tbGluaywgJ2RldmljZXJhdGluZycsIDApO1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEudGVjaG5vbG9neS5hdmFpbGFiaWxpdHkgPSBJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoY29tbWxpbmssICdhdmFpbCcpO1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEudGVjaG5vbG9neS5jb3N0ID0gSW1wb3J0SGVscGVyLkludFZhbHVlKGNvbW1saW5rLCAnY29zdCcsIDApO1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEuYXR0cy5hdHQzLnZhbHVlID0gSW1wb3J0SGVscGVyLkludFZhbHVlKGNvbW1saW5rLCAnZGF0YXByb2Nlc3NpbmcnLCAwKTtcclxuICAgICAgICAgICAgZGF0YS5kYXRhLmF0dHMuYXR0NC52YWx1ZSA9IEltcG9ydEhlbHBlci5JbnRWYWx1ZShjb21tbGluaywgJ2ZpcmV3YWxsJywgMCk7XHJcblxyXG4gICAgICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICAgICAgZGF0YS5mb2xkZXIgPSBmb2xkZXIuaWQ7XHJcbiAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBlbnRyaWVzLnB1c2goZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZW50cmllcztcclxuICAgIH1cclxuXHJcbiAgICBQYXJzZUN5YmVyZGVja0RldmljZXMoY3liZXJkZWNrcywgZm9sZGVyKSB7XHJcbiAgICAgICAgY29uc3QgZW50cmllcyA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGN5YmVyZGVjayBvZiBjeWJlcmRlY2tzKSB7XHJcbiAgICAgICAgICAgIGlmIChEYXRhSW1wb3J0ZXIudW5zdXBwb3J0ZWRFbnRyeShjeWJlcmRlY2spKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuR2V0RGVmYXVsdERhdGEoKTtcclxuXHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS5jYXRlZ29yeSA9ICdjeWJlcmRlY2snO1xyXG4gICAgICAgICAgICBkYXRhLm5hbWUgPSBJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoY3liZXJkZWNrLCAnbmFtZScpO1xyXG4gICAgICAgICAgICBkYXRhLm5hbWUgPSBJbXBvcnRIZWxwZXIuTWFwTmFtZVRvVHJhbnNsYXRpb24odGhpcy5lbnRyeVRyYW5zbGF0aW9ucywgZGF0YS5uYW1lKTtcclxuXHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS5kZXNjcmlwdGlvbi5zb3VyY2UgPSBgJHtJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoY3liZXJkZWNrLCAnc291cmNlJyl9ICR7SW1wb3J0SGVscGVyLk1hcE5hbWVUb1BhZ2VTb3VyY2UodGhpcy5lbnRyeVRyYW5zbGF0aW9ucywgSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGN5YmVyZGVjaywgJ25hbWUnKSwgSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGN5YmVyZGVjaywgJ3BhZ2UnKSl9YDtcclxuICAgICAgICAgICAgZGF0YS5kYXRhLnRlY2hub2xvZ3kucmF0aW5nID0gSW1wb3J0SGVscGVyLkludFZhbHVlKGN5YmVyZGVjaywgJ2RldmljZXJhdGluZycsIDApO1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEudGVjaG5vbG9neS5hdmFpbGFiaWxpdHkgPSBJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoY3liZXJkZWNrLCAnYXZhaWwnKTtcclxuICAgICAgICAgICAgZGF0YS5kYXRhLnRlY2hub2xvZ3kuY29zdCA9IEltcG9ydEhlbHBlci5JbnRWYWx1ZShjeWJlcmRlY2ssICdjb3N0JywgMCk7XHJcblxyXG4gICAgICAgICAgICAvLyBTb21lIGN5YmVyZGVja3MgaGF2ZSBhIGZsZXhpYmxlIGF0dHJpYnV0ZSBvcmRlclxyXG4gICAgICAgICAgICAvLyBhdHRyaWJ1dGVhcnJheSBpcyBhICcsJyBzZXBhcmF0ZWQgbGlzdCBvZiB2YWx1ZXMuIFNpbmNlIGl0J3MgaGFja3ksIGJlIHZlcnkgdW5mb3JnaXZpbmcuXHJcbiAgICAgICAgICAgIGlmIChjeWJlcmRlY2suaGFzT3duUHJvcGVydHkoJ2F0dHJpYnV0ZWFycmF5JykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZU9yZGVyID0gSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGN5YmVyZGVjaywgJ2F0dHJpYnV0ZWFycmF5Jykuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGF0dDEgPSBOdW1iZXIoYXR0cmlidXRlT3JkZXJbMF0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYXR0MiA9IE51bWJlcihhdHRyaWJ1dGVPcmRlclsxXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhdHQzID0gTnVtYmVyKGF0dHJpYnV0ZU9yZGVyWzJdKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGF0dDQgPSBOdW1iZXIoYXR0cmlidXRlT3JkZXJbM10pO1xyXG4gICAgICAgICAgICAgICAgZGF0YS5kYXRhLmF0dHMuYXR0MS52YWx1ZSA9IGF0dDE7XHJcbiAgICAgICAgICAgICAgICBkYXRhLmRhdGEuYXR0cy5hdHQyLnZhbHVlID0gYXR0MjtcclxuICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5hdHRzLmF0dDMudmFsdWUgPSBhdHQzO1xyXG4gICAgICAgICAgICAgICAgZGF0YS5kYXRhLmF0dHMuYXR0NC52YWx1ZSA9IGF0dDQ7XHJcblxyXG4gICAgICAgICAgICAvLyBTb21lIGN5YmVyZGVja3MgaGF2ZSBhIGZpeGVkIGF0dHJpYnV0ZSBvcmRlclxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN5YmVyZGVjay5oYXNPd25Qcm9wZXJ0eSgnYXR0YWNrJykpIHtcclxuICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5hdHRzLmF0dDEudmFsdWUgPSBJbXBvcnRIZWxwZXIuSW50VmFsdWUoY3liZXJkZWNrLCAnYXR0YWNrJywgMCk7XHJcbiAgICAgICAgICAgICAgICBkYXRhLmRhdGEuYXR0cy5hdHQyLnZhbHVlID0gSW1wb3J0SGVscGVyLkludFZhbHVlKGN5YmVyZGVjaywgJ3NsZWF6ZScsIDApO1xyXG4gICAgICAgICAgICAgICAgZGF0YS5kYXRhLmF0dHMuYXR0My52YWx1ZSA9IEltcG9ydEhlbHBlci5JbnRWYWx1ZShjeWJlcmRlY2ssICdkYXRhcHJvY2Vzc2luZycsIDApO1xyXG4gICAgICAgICAgICAgICAgZGF0YS5kYXRhLmF0dHMuYXR0NC52YWx1ZSA9IEltcG9ydEhlbHBlci5JbnRWYWx1ZShjeWJlcmRlY2ssICdmaXJld2FsbCcsIDApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICAgICAgZGF0YS5mb2xkZXIgPSBmb2xkZXIuaWQ7XHJcbiAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBlbnRyaWVzLnB1c2goZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZW50cmllcztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBQYXJzZShqc29uT2JqZWN0OiBvYmplY3QpOiBQcm9taXNlPEVudGl0eT4ge1xyXG4gICAgICAgIGxldCBlbnRyaWVzID0gW107XHJcbiAgICAgICAgY29uc3QgY29tbWxpbmtzID0ganNvbk9iamVjdFsnZ2VhcnMnXVsnZ2VhciddLmZpbHRlcihnZWFyID0+IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShnZWFyLCAnY2F0ZWdvcnknLCAnJykgPT09ICdDb21tbGlua3MnKTtcclxuICAgICAgICBjb25zdCBjeWJlcmRlY2tzID0ganNvbk9iamVjdFsnZ2VhcnMnXVsnZ2VhciddLmZpbHRlcihnZWFyID0+IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShnZWFyLCAnY2F0ZWdvcnknLCAnJykgPT09ICdDeWJlcmRlY2tzJyk7XHJcblxyXG4gICAgICAgIGxldCBjb21tbGlua3NGb2xkZXIgPSBhd2FpdCBJbXBvcnRIZWxwZXIuR2V0Rm9sZGVyQXRQYXRoKGAke0NvbnN0YW50cy5ST09UX0lNUE9SVF9GT0xERVJfTkFNRX0vJHtnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5EZXZpY2VDYXRDb21tbGluaycpfWAsIHRydWUpO1xyXG4gICAgICAgIGxldCBjeWJlcmRlY2tzRm9sZGVyID0gYXdhaXQgSW1wb3J0SGVscGVyLkdldEZvbGRlckF0UGF0aChgJHtDb25zdGFudHMuUk9PVF9JTVBPUlRfRk9MREVSX05BTUV9LyR7Z2FtZS5pMThuLmxvY2FsaXplKCdTUjUuRGV2aWNlQ2F0Q3liZXJkZWNrJyl9YCwgdHJ1ZSk7XHJcblxyXG4gICAgICAgIGVudHJpZXMgPSBlbnRyaWVzLmNvbmNhdCh0aGlzLlBhcnNlQ29tbWxpbmtEZXZpY2VzKGNvbW1saW5rcywgY29tbWxpbmtzRm9sZGVyKSk7XHJcbiAgICAgICAgZW50cmllcyA9IGVudHJpZXMuY29uY2F0KHRoaXMuUGFyc2VDeWJlcmRlY2tEZXZpY2VzKGN5YmVyZGVja3MsIGN5YmVyZGVja3NGb2xkZXIpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IEl0ZW0uY3JlYXRlKGVudHJpZXMpXHJcbiAgICB9XHJcblxyXG4gICAgLyogTGlzdCBvZiB1bnN1cHBvcnRlZCBDb21tbGlua3MsIGR1ZSB0byBkeW5hbWljcyB2YWx1ZSBjYWxjdWxhdGlvbnMuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyB1bnN1cHBvcnRlZEVudHJ5KGpzb25EYXRhKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKERhdGFJbXBvcnRlci51bnN1cHBvcnRlZEVudHJ5KGpzb25EYXRhKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHVuc3VwcG9ydGVkSWRzID0gW1xyXG4gICAgICAgICAgICAnZDYzZWI4NDEtN2IxNS00NTM5LTkwMjYtYjkwYTQ5MjRhZWViJywgIC8vIER5bmFtaWMgcmF0aW5nIHZhbHVlLlxyXG4gICAgICAgIF07XHJcbiAgICAgICAgcmV0dXJuIHVuc3VwcG9ydGVkSWRzLmluY2x1ZGVzKEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ2lkJykpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtEYXRhSW1wb3J0ZXJ9IGZyb20gXCIuL0RhdGFJbXBvcnRlclwiO1xyXG5pbXBvcnQge0ltcG9ydEhlbHBlcn0gZnJvbSBcIi4uL2hlbHBlci9JbXBvcnRIZWxwZXJcIjtcclxuaW1wb3J0IHtDb25zdGFudHN9IGZyb20gXCIuL0NvbnN0YW50c1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEVxdWlwbWVudEltcG9ydGVyIGV4dGVuZHMgRGF0YUltcG9ydGVyIHtcclxuICAgIHB1YmxpYyBmaWxlcyA9IFsnZ2Vhci54bWwnXTtcclxuXHJcbiAgICBDYW5QYXJzZShqc29uT2JqZWN0OiBvYmplY3QpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4ganNvbk9iamVjdC5oYXNPd25Qcm9wZXJ0eSgnZ2VhcnMnKSAmJiBqc29uT2JqZWN0WydnZWFycyddLmhhc093blByb3BlcnR5KCdnZWFyJyk7XHJcbiAgICB9XHJcblxyXG4gICAgR2V0RGVmYXVsdERhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmFtZTogJycsXHJcbiAgICAgICAgICAgIF9pZDogJycsXHJcbiAgICAgICAgICAgIGZvbGRlcjogJycsXHJcbiAgICAgICAgICAgIGltZzogJ2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi5zdmcnLFxyXG4gICAgICAgICAgICBmbGFnczoge30sXHJcbiAgICAgICAgICAgIHR5cGU6ICdlcXVpcG1lbnQnLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBjaGF0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRlY2hub2xvZ3k6IHtcclxuICAgICAgICAgICAgICAgICAgICByYXRpbmc6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgYXZhaWxhYmlsaXR5OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogMSxcclxuICAgICAgICAgICAgICAgICAgICBjb3N0OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGVxdWlwcGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbmNlYWw6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZDogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBjb25kaXRpb25fbW9uaXRvcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXg6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcGVybWlzc2lvbjoge1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogMixcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIEV4dHJhY3RUcmFuc2xhdGlvbihmaWxlTmFtZT86IHN0cmluZykge1xyXG4gICAgICAgIGlmICghRGF0YUltcG9ydGVyLmpzb25pMThuKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBqc29uR2VhcmkxOG4gPSBJbXBvcnRIZWxwZXIuRXh0cmFjdERhdGFGaWxlVHJhbnNsYXRpb24oRGF0YUltcG9ydGVyLmpzb25pMThuLCB0aGlzLmZpbGVzWzBdKTtcclxuICAgICAgICB0aGlzLmNhdGVnb3J5VHJhbnNsYXRpb25zID0gSW1wb3J0SGVscGVyLkV4dHJhY3RDYXRlZ29yaWVzVHJhbnNsYXRpb24oanNvbkdlYXJpMThuKTtcclxuICAgICAgICB0aGlzLmVudHJ5VHJhbnNsYXRpb25zID0gSW1wb3J0SGVscGVyLkV4dHJhY3RJdGVtVHJhbnNsYXRpb24oanNvbkdlYXJpMThuLCAnZ2VhcnMnLCAnZ2VhcicpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIFBhcnNlRXF1aXBtZW50cyhlcXVpcG1lbnRzKSB7XHJcbiAgICAgICAgY29uc3QgZW50cmllcyA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGVxdWlwbWVudCBvZiBlcXVpcG1lbnRzKSB7XHJcbiAgICAgICAgICAgIGlmIChEYXRhSW1wb3J0ZXIudW5zdXBwb3J0ZWRFbnRyeShlcXVpcG1lbnQpKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gUmVwbGFjZSAvIGFzIGl0J3MgdXNlZCBhcyBhIHNlcGFyYXRvciBpbiBHZXRGb2xkZXJBdFBhdGguXHJcbiAgICAgICAgICAgIGNvbnN0IGNhdGVnb3J5ID0gSW1wb3J0SGVscGVyLlRyYW5zbGF0ZUNhdGVnb3J5KEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShlcXVpcG1lbnQsICdjYXRlZ29yeScpLCB0aGlzLmNhdGVnb3J5VHJhbnNsYXRpb25zKS5yZXBsYWNlKCcvJywgJyAnKTtcclxuICAgICAgICAgICAgbGV0IGNhdGVnb3J5Rm9sZGVyID0gYXdhaXQgSW1wb3J0SGVscGVyLkdldEZvbGRlckF0UGF0aChgJHtDb25zdGFudHMuUk9PVF9JTVBPUlRfRk9MREVSX05BTUV9LyR7Z2FtZS5pMThuLmxvY2FsaXplKCdTUjUuR2VhcicpfS8ke2NhdGVnb3J5fWAsIHRydWUpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuR2V0RGVmYXVsdERhdGEoKTtcclxuICAgICAgICAgICAgZGF0YS5uYW1lID0gSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGVxdWlwbWVudCwgJ25hbWUnKTtcclxuICAgICAgICAgICAgZGF0YS5uYW1lID0gSW1wb3J0SGVscGVyLk1hcE5hbWVUb1RyYW5zbGF0aW9uKHRoaXMuZW50cnlUcmFuc2xhdGlvbnMsIGRhdGEubmFtZSk7XHJcblxyXG4gICAgICAgICAgICBkYXRhLmRhdGEuZGVzY3JpcHRpb24uc291cmNlID0gYCR7SW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGVxdWlwbWVudCwgJ3NvdXJjZScpfSAke0ltcG9ydEhlbHBlci5NYXBOYW1lVG9QYWdlU291cmNlKHRoaXMuZW50cnlUcmFuc2xhdGlvbnMsIEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShlcXVpcG1lbnQsICduYW1lJyksIEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShlcXVpcG1lbnQsICdwYWdlJykpfWA7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS50ZWNobm9sb2d5LnJhdGluZyA9IEltcG9ydEhlbHBlci5JbnRWYWx1ZShlcXVpcG1lbnQsICdyYXRpbmcnLCAwKTtcclxuICAgICAgICAgICAgZGF0YS5kYXRhLnRlY2hub2xvZ3kuYXZhaWxhYmlsaXR5ID0gSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGVxdWlwbWVudCwgJ2F2YWlsJyk7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS50ZWNobm9sb2d5LmNvc3QgPSBJbXBvcnRIZWxwZXIuSW50VmFsdWUoZXF1aXBtZW50LCAnY29zdCcsIDApO1xyXG5cclxuICAgICAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGRhdGEuZm9sZGVyID0gY2F0ZWdvcnlGb2xkZXIuaWQ7XHJcbiAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBlbnRyaWVzLnB1c2goZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZW50cmllcztcclxuICAgIH1cclxuXHJcbiAgICBGaWx0ZXJKc29uT2JqZWN0cyhqc29uT2JqZWN0KSB7XHJcbiAgICAgICAgY29uc3QgdW5zdXBwb3J0ZWRDYXRlZ29yaWVzID0gW1xyXG4gICAgICAgICAgICAnQW1tdW5pdGlvbicsXHJcbiAgICAgICAgICAgICdDb21tbGlua3MnLFxyXG4gICAgICAgICAgICAnQ3liZXJkZWNrcycsXHJcbiAgICAgICAgICAgICdIYWNraW5nIFByb2dyYW1zJyxcclxuICAgICAgICAgICAgJ1JpZ2dlciBDb21tYW5kIENvbnNvbGVzJyxcclxuICAgICAgICAgICAgJ0N1c3RvbSdcclxuICAgICAgICBdXHJcblxyXG4gICAgICAgIHJldHVybiBqc29uT2JqZWN0WydnZWFycyddWydnZWFyJ10uZmlsdGVyKGdlYXIgPT4gIXVuc3VwcG9ydGVkQ2F0ZWdvcmllcy5pbmNsdWRlcyhJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoZ2VhciwgJ2NhdGVnb3J5JywgJycpKSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgUGFyc2UoanNvbk9iamVjdDogb2JqZWN0KTogUHJvbWlzZTxFbnRpdHk+IHtcclxuICAgICAgICBjb25zdCBlcXVpcG1lbnRzID0gdGhpcy5GaWx0ZXJKc29uT2JqZWN0cyhqc29uT2JqZWN0KTtcclxuXHJcbiAgICAgICAgY29uc3QgZW50cmllcyA9IGF3YWl0IHRoaXMuUGFyc2VFcXVpcG1lbnRzKGVxdWlwbWVudHMpO1xyXG5cclxuICAgICAgICByZXR1cm4gYXdhaXQgSXRlbS5jcmVhdGUoZW50cmllcyk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBEYXRhSW1wb3J0ZXIgfSBmcm9tICcuL0RhdGFJbXBvcnRlcic7XHJcbmltcG9ydCBNb2QgPSBTaGFkb3dydW4uTW9kaWZpY2F0aW9uO1xyXG5pbXBvcnQgeyBJbXBvcnRIZWxwZXIgfSBmcm9tICcuLi9oZWxwZXIvSW1wb3J0SGVscGVyJztcclxuaW1wb3J0IHsgQ29uc3RhbnRzIH0gZnJvbSAnLi9Db25zdGFudHMnO1xyXG5pbXBvcnQgeyBNb2RQYXJzZXJCYXNlIH0gZnJvbSAnLi4vcGFyc2VyL21vZC9Nb2RQYXJzZXJCYXNlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBNb2RJbXBvcnRlciBleHRlbmRzIERhdGFJbXBvcnRlciB7XHJcbiAgICBwdWJsaWMgY2F0ZWdvcnlUcmFuc2xhdGlvbnM6IGFueTtcclxuICAgIHB1YmxpYyBhY2Nlc3NvcnlUcmFuc2xhdGlvbnM6IGFueTtcclxuICAgIHB1YmxpYyBmaWxlcyA9IFsnd2VhcG9ucy54bWwnXTtcclxuXHJcbiAgICBDYW5QYXJzZShqc29uT2JqZWN0OiBvYmplY3QpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4ganNvbk9iamVjdC5oYXNPd25Qcm9wZXJ0eSgnYWNjZXNzb3JpZXMnKSAmJiBqc29uT2JqZWN0WydhY2Nlc3NvcmllcyddLmhhc093blByb3BlcnR5KCdhY2Nlc3NvcnknKTtcclxuICAgIH1cclxuXHJcbiAgICBHZXREZWZhdWx0RGF0YSgpOiBNb2Qge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5hbWU6ICcnLFxyXG4gICAgICAgICAgICBfaWQ6ICcnLFxyXG4gICAgICAgICAgICBmb2xkZXI6ICcnLFxyXG4gICAgICAgICAgICBpbWc6ICdpY29ucy9zdmcvbXlzdGVyeS1tYW4uc3ZnJyxcclxuICAgICAgICAgICAgZmxhZ3M6IHt9LFxyXG4gICAgICAgICAgICB0eXBlOiAnbW9kaWZpY2F0aW9uJyxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhdDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiAnJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0ZWNobm9sb2d5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmF0aW5nOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGF2YWlsYWJpbGl0eTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgY29zdDogMCxcclxuICAgICAgICAgICAgICAgICAgICBlcXVpcHBlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBjb25jZWFsOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2Q6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uX21vbml0b3I6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgd2lyZWxlc3M6IHRydWVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnJyxcclxuICAgICAgICAgICAgICAgIG1vdW50X3BvaW50OiAnJyxcclxuICAgICAgICAgICAgICAgIGRpY2VfcG9vbDogMCxcclxuICAgICAgICAgICAgICAgIGFjY3VyYWN5OiAwLFxyXG4gICAgICAgICAgICAgICAgcmM6IDAsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHBlcm1pc3Npb246IHtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IDIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBFeHRyYWN0VHJhbnNsYXRpb24oKSB7XHJcbiAgICAgICAgaWYgKCFEYXRhSW1wb3J0ZXIuanNvbmkxOG4pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGpzb25XZWFwb25zaTE4biA9IEltcG9ydEhlbHBlci5FeHRyYWN0RGF0YUZpbGVUcmFuc2xhdGlvbihEYXRhSW1wb3J0ZXIuanNvbmkxOG4sIHRoaXMuZmlsZXNbMF0pO1xyXG4gICAgICAgIC8vIFBhcnRzIG9mIHdlYXBvbiBhY2Nlc3NvcnkgdHJhbnNsYXRpb25zIGFyZSB3aXRoaW4gdGhlIGFwcGxpY2F0aW9uIHRyYW5zbGF0aW9uLiBDdXJyZW50bHkgb25seSBkYXRhIHRyYW5zbGF0aW9uIGlzIHVzZWQuXHJcbiAgICAgICAgdGhpcy5hY2Nlc3NvcnlUcmFuc2xhdGlvbnMgPSBJbXBvcnRIZWxwZXIuRXh0cmFjdEl0ZW1UcmFuc2xhdGlvbihqc29uV2VhcG9uc2kxOG4sICdhY2Nlc3NvcmllcycsICdhY2Nlc3NvcnknKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBQYXJzZShqc29uT2JqZWN0OiBvYmplY3QpOiBQcm9taXNlPEVudGl0eT4ge1xyXG4gICAgICAgIGNvbnN0IHBhcnNlciA9IG5ldyBNb2RQYXJzZXJCYXNlKCk7XHJcblxyXG4gICAgICAgIGxldCBkYXRhczogTW9kW10gPSBbXTtcclxuICAgICAgICBsZXQganNvbkRhdGFzID0ganNvbk9iamVjdFsnYWNjZXNzb3JpZXMnXVsnYWNjZXNzb3J5J107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBqc29uRGF0YXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGpzb25EYXRhID0ganNvbkRhdGFzW2ldO1xyXG5cclxuICAgICAgICAgICAgaWYgKERhdGFJbXBvcnRlci51bnN1cHBvcnRlZEVudHJ5KGpzb25EYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBkYXRhID0gcGFyc2VyLlBhcnNlKGpzb25EYXRhLCB0aGlzLkdldERlZmF1bHREYXRhKCkpO1xyXG4gICAgICAgICAgICAvLyBUT0RPOiBJbnRlZ3JhdGUgaW50byBNb2RQYXJzZXJCYXNlIGFwcHJvYWNoLlxyXG4gICAgICAgICAgICBkYXRhLm5hbWUgPSBJbXBvcnRIZWxwZXIuTWFwTmFtZVRvVHJhbnNsYXRpb24odGhpcy5hY2Nlc3NvcnlUcmFuc2xhdGlvbnMsIGRhdGEubmFtZSk7XHJcbiAgICAgICAgICAgIC8vVE9ETzogVGVzdCB0aGlzXHJcblxyXG4gICAgICAgICAgICBsZXQgZm9sZGVyTmFtZSA9IGRhdGEuZGF0YS5tb3VudF9wb2ludCAhPT0gdW5kZWZpbmVkID8gZGF0YS5kYXRhLm1vdW50X3BvaW50IDogJ090aGVyJztcclxuICAgICAgICAgICAgaWYgKGZvbGRlck5hbWUuaW5jbHVkZXMoJy8nKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNwbGl0TmFtZSA9IGZvbGRlck5hbWUuc3BsaXQoJy8nKTtcclxuICAgICAgICAgICAgICAgIGZvbGRlck5hbWUgPSBzcGxpdE5hbWVbMF07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBmb2xkZXIgPSBhd2FpdCBJbXBvcnRIZWxwZXIuR2V0Rm9sZGVyQXRQYXRoKGAke0NvbnN0YW50cy5ST09UX0lNUE9SVF9GT0xERVJfTkFNRX0vTW9kcy8ke2ZvbGRlck5hbWV9YCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGRhdGEuZm9sZGVyID0gZm9sZGVyLmlkO1xyXG5cclxuICAgICAgICAgICAgZGF0YXMucHVzaChkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBhd2FpdCBJdGVtLmNyZWF0ZShkYXRhcyk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgRGF0YUltcG9ydGVyIH0gZnJvbSAnLi9EYXRhSW1wb3J0ZXInO1xyXG5pbXBvcnQgeyBJbXBvcnRIZWxwZXIgfSBmcm9tICcuLi9oZWxwZXIvSW1wb3J0SGVscGVyJztcclxuaW1wb3J0IHsgUXVhbGl0eVBhcnNlckJhc2UgfSBmcm9tICcuLi9wYXJzZXIvcXVhbGl0eS9RdWFsaXR5UGFyc2VyQmFzZSc7XHJcbmltcG9ydCBRdWFsaXR5ID0gU2hhZG93cnVuLlF1YWxpdHk7XHJcbmltcG9ydCB7RGVmYXVsdFZhbHVlc30gZnJvbSBcIi4uLy4uL2RhdGFUZW1wbGF0ZXNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBRdWFsaXR5SW1wb3J0ZXIgZXh0ZW5kcyBEYXRhSW1wb3J0ZXIge1xyXG4gICAgcHVibGljIGNhdGVnb3J5VHJhbnNsYXRpb25zOiBhbnk7XHJcbiAgICBwdWJsaWMgaXRlbVRyYW5zbGF0aW9uczogYW55O1xyXG4gICAgcHVibGljIGZpbGVzID0gWydxdWFsaXRpZXMueG1sJ107XHJcblxyXG4gICAgQ2FuUGFyc2UoanNvbk9iamVjdDogb2JqZWN0KTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGpzb25PYmplY3QuaGFzT3duUHJvcGVydHkoJ3F1YWxpdGllcycpICYmIGpzb25PYmplY3RbJ3F1YWxpdGllcyddLmhhc093blByb3BlcnR5KCdxdWFsaXR5Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgR2V0RGVmYXVsdERhdGEoKTogUXVhbGl0eSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmFtZTogJ1VubmFtZWQgQXJtb3InLFxyXG4gICAgICAgICAgICBfaWQ6ICcnLFxyXG4gICAgICAgICAgICBmb2xkZXI6ICcnLFxyXG4gICAgICAgICAgICBpbWc6ICdpY29ucy9zdmcvbXlzdGVyeS1tYW4uc3ZnJyxcclxuICAgICAgICAgICAgZmxhZ3M6IHt9LFxyXG4gICAgICAgICAgICB0eXBlOiAncXVhbGl0eScsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYXQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogJycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYWN0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlMjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgc2tpbGw6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNwZWM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vZDogMCxcclxuICAgICAgICAgICAgICAgICAgICBtb2RfZGVzY3JpcHRpb246ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhbWFnZTogRGVmYXVsdFZhbHVlcy5kYW1hZ2VEYXRhKHt0eXBlOiB7YmFzZTogJycsIHZhbHVlOiAnJ319KSxcclxuICAgICAgICAgICAgICAgICAgICBsaW1pdDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTogMCxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGV4dGVuZGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBvcHBvc2VkOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGUyOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2tpbGw6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2Q6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGFsdF9tb2Q6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZGljZV9wb29sX21vZDogW10sXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJycsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHBlcm1pc3Npb246IHtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IDIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBFeHRyYWN0VHJhbnNsYXRpb24oKSB7XHJcbiAgICAgICAgaWYgKCFEYXRhSW1wb3J0ZXIuanNvbmkxOG4pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGpzb25RdWFsaXR5aTE4biA9IEltcG9ydEhlbHBlci5FeHRyYWN0RGF0YUZpbGVUcmFuc2xhdGlvbihEYXRhSW1wb3J0ZXIuanNvbmkxOG4sIHRoaXMuZmlsZXNbMF0pO1xyXG4gICAgICAgIHRoaXMuY2F0ZWdvcnlUcmFuc2xhdGlvbnMgPSBJbXBvcnRIZWxwZXIuRXh0cmFjdENhdGVnb3JpZXNUcmFuc2xhdGlvbihqc29uUXVhbGl0eWkxOG4pO1xyXG4gICAgICAgIHRoaXMuaXRlbVRyYW5zbGF0aW9ucyA9IEltcG9ydEhlbHBlci5FeHRyYWN0SXRlbVRyYW5zbGF0aW9uKGpzb25RdWFsaXR5aTE4biwgJ3F1YWxpdGllcycsICdxdWFsaXR5Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgUGFyc2UoanNvbk9iamVjdDogb2JqZWN0KTogUHJvbWlzZTxFbnRpdHk+IHtcclxuICAgICAgICBjb25zdCBqc29uTmFtZVRyYW5zbGF0aW9ucyA9IHt9O1xyXG4gICAgICAgIGNvbnN0IGZvbGRlcnMgPSBhd2FpdCBJbXBvcnRIZWxwZXIuTWFrZUNhdGVnb3J5Rm9sZGVycyhqc29uT2JqZWN0LCAnUXVhbGl0aWVzJywgdGhpcy5jYXRlZ29yeVRyYW5zbGF0aW9ucyk7XHJcbiAgICAgICAgY29uc29sZS5sb2coZm9sZGVycyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhcnNlciA9IG5ldyBRdWFsaXR5UGFyc2VyQmFzZSgpO1xyXG5cclxuICAgICAgICBsZXQgZGF0YXM6IFF1YWxpdHlbXSA9IFtdO1xyXG4gICAgICAgIGxldCBqc29uRGF0YXMgPSBqc29uT2JqZWN0WydxdWFsaXRpZXMnXVsncXVhbGl0eSddO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwganNvbkRhdGFzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBqc29uRGF0YSA9IGpzb25EYXRhc1tpXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChEYXRhSW1wb3J0ZXIudW5zdXBwb3J0ZWRFbnRyeShqc29uRGF0YSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgZGF0YSA9IHBhcnNlci5QYXJzZShqc29uRGF0YSwgdGhpcy5HZXREZWZhdWx0RGF0YSgpLCB0aGlzLml0ZW1UcmFuc2xhdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGNhdGVnb3J5ID0gSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGpzb25EYXRhLCAnY2F0ZWdvcnknKTtcclxuICAgICAgICAgICAgZGF0YS5mb2xkZXIgPSBmb2xkZXJzW2NhdGVnb3J5LnRvTG93ZXJDYXNlKCldLmlkO1xyXG4gICAgICAgICAgICBkYXRhLm5hbWUgPSBJbXBvcnRIZWxwZXIuTWFwTmFtZVRvVHJhbnNsYXRpb24odGhpcy5pdGVtVHJhbnNsYXRpb25zLCBkYXRhLm5hbWUpO1xyXG5cclxuICAgICAgICAgICAgZGF0YXMucHVzaChkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBhd2FpdCBJdGVtLmNyZWF0ZShkYXRhcyk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgRGF0YUltcG9ydGVyIH0gZnJvbSAnLi9EYXRhSW1wb3J0ZXInO1xyXG5pbXBvcnQgeyBJbXBvcnRIZWxwZXIgfSBmcm9tICcuLi9oZWxwZXIvSW1wb3J0SGVscGVyJztcclxuaW1wb3J0IFNwZWxsID0gU2hhZG93cnVuLlNwZWxsO1xyXG5pbXBvcnQgeyBTcGVsbFBhcnNlckJhc2UgfSBmcm9tICcuLi9wYXJzZXIvc3BlbGwvU3BlbGxQYXJzZXJCYXNlJztcclxuaW1wb3J0IHsgQ29tYmF0U3BlbGxQYXJzZXIgfSBmcm9tICcuLi9wYXJzZXIvc3BlbGwvQ29tYmF0U3BlbGxQYXJzZXInO1xyXG5pbXBvcnQgeyBNYW5pcHVsYXRpb25TcGVsbFBhcnNlciB9IGZyb20gJy4uL3BhcnNlci9zcGVsbC9NYW5pcHVsYXRpb25TcGVsbFBhcnNlcic7XHJcbmltcG9ydCB7IElsbHVzaW9uU3BlbGxQYXJzZXIgfSBmcm9tICcuLi9wYXJzZXIvc3BlbGwvSWxsdXNpb25TcGVsbFBhcnNlcic7XHJcbmltcG9ydCB7IERldGVjdGlvblNwZWxsSW1wb3J0ZXIgfSBmcm9tICcuLi9wYXJzZXIvc3BlbGwvRGV0ZWN0aW9uU3BlbGxJbXBvcnRlcic7XHJcbmltcG9ydCB7IFBhcnNlck1hcCB9IGZyb20gJy4uL3BhcnNlci9QYXJzZXJNYXAnO1xyXG5pbXBvcnQge0RlZmF1bHRWYWx1ZXN9IGZyb20gXCIuLi8uLi9kYXRhVGVtcGxhdGVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU3BlbGxJbXBvcnRlciBleHRlbmRzIERhdGFJbXBvcnRlciB7XHJcbiAgICBwdWJsaWMgY2F0ZWdvcnlUcmFuc2xhdGlvbnM6IGFueTtcclxuICAgIHB1YmxpYyBpdGVtVHJhbnNsYXRpb25zOiBhbnk7XHJcbiAgICBwdWJsaWMgZmlsZXMgPSBbJ3NwZWxscy54bWwnXTtcclxuXHJcbiAgICBDYW5QYXJzZShqc29uT2JqZWN0OiBvYmplY3QpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4ganNvbk9iamVjdC5oYXNPd25Qcm9wZXJ0eSgnc3BlbGxzJykgJiYganNvbk9iamVjdFsnc3BlbGxzJ10uaGFzT3duUHJvcGVydHkoJ3NwZWxsJyk7XHJcbiAgICB9XHJcblxyXG4gICAgR2V0RGVmYXVsdERhdGEoKTogU3BlbGwge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdVbm5hbWVkIEl0ZW0nLFxyXG4gICAgICAgICAgICBfaWQ6ICcnLFxyXG4gICAgICAgICAgICBmb2xkZXI6ICcnLFxyXG4gICAgICAgICAgICBpbWc6ICdpY29ucy9zdmcvbXlzdGVyeS1tYW4uc3ZnJyxcclxuICAgICAgICAgICAgZmxhZ3M6IHt9LFxyXG4gICAgICAgICAgICB0eXBlOiAnc3BlbGwnLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBjaGF0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGFjdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd2YXJpZXMnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6ICdtYWdpYycsXHJcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlMjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgc2tpbGw6ICdzcGVsbGNhc3RpbmcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNwZWM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vZDogMCxcclxuICAgICAgICAgICAgICAgICAgICBtb2RfZGVzY3JpcHRpb246ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhbWFnZTogRGVmYXVsdFZhbHVlcy5kYW1hZ2VEYXRhKHt0eXBlOiB7YmFzZTogJycsIHZhbHVlOiAnJ319KSxcclxuICAgICAgICAgICAgICAgICAgICBsaW1pdDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTogMCxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGV4dGVuZGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBvcHBvc2VkOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGUyOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2tpbGw6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2Q6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGFsdF9tb2Q6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZGljZV9wb29sX21vZDogW10sXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZHJhaW46IDAsXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogJycsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnJyxcclxuICAgICAgICAgICAgICAgIHJhbmdlOiAnJyxcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAnJyxcclxuICAgICAgICAgICAgICAgIGNvbWJhdDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRldGVjdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhc3NpdmU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4dGVuZGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBpbGx1c2lvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbnNlOiAnJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBtYW5pcHVsYXRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICBkYW1hZ2luZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVudGFsOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBlbnZpcm9ubWVudGFsOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBwaHlzaWNhbDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBwZXJtaXNzaW9uOiB7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiAyLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgRXh0cmFjdFRyYW5zbGF0aW9uKCkge1xyXG4gICAgICAgIGlmICghRGF0YUltcG9ydGVyLmpzb25pMThuKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBqc29uU3BlbGxpMThuID0gSW1wb3J0SGVscGVyLkV4dHJhY3REYXRhRmlsZVRyYW5zbGF0aW9uKERhdGFJbXBvcnRlci5qc29uaTE4biwgdGhpcy5maWxlc1swXSk7XHJcbiAgICAgICAgdGhpcy5jYXRlZ29yeVRyYW5zbGF0aW9ucyA9IEltcG9ydEhlbHBlci5FeHRyYWN0Q2F0ZWdvcmllc1RyYW5zbGF0aW9uKGpzb25TcGVsbGkxOG4pO1xyXG4gICAgICAgIHRoaXMuaXRlbVRyYW5zbGF0aW9ucyA9IEltcG9ydEhlbHBlci5FeHRyYWN0SXRlbVRyYW5zbGF0aW9uKGpzb25TcGVsbGkxOG4sICdzcGVsbHMnLCAnc3BlbGwnKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBQYXJzZShqc29uT2JqZWN0OiBvYmplY3QpOiBQcm9taXNlPEVudGl0eT4ge1xyXG4gICAgICAgIGNvbnN0IGZvbGRlcnMgPSBhd2FpdCBJbXBvcnRIZWxwZXIuTWFrZUNhdGVnb3J5Rm9sZGVycyhqc29uT2JqZWN0LCAnU3BlbGxzJywgdGhpcy5jYXRlZ29yeVRyYW5zbGF0aW9ucyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhcnNlciA9IG5ldyBQYXJzZXJNYXA8U3BlbGw+KCdjYXRlZ29yeScsIFtcclxuICAgICAgICAgICAgeyBrZXk6ICdDb21iYXQnLCB2YWx1ZTogbmV3IENvbWJhdFNwZWxsUGFyc2VyKCkgfSxcclxuICAgICAgICAgICAgeyBrZXk6ICdNYW5pcHVsYXRpb24nLCB2YWx1ZTogbmV3IE1hbmlwdWxhdGlvblNwZWxsUGFyc2VyKCkgfSxcclxuICAgICAgICAgICAgeyBrZXk6ICdJbGx1c2lvbicsIHZhbHVlOiBuZXcgSWxsdXNpb25TcGVsbFBhcnNlcigpIH0sXHJcbiAgICAgICAgICAgIHsga2V5OiAnRGV0ZWN0aW9uJywgdmFsdWU6IG5ldyBEZXRlY3Rpb25TcGVsbEltcG9ydGVyKCkgfSxcclxuICAgICAgICAgICAgeyBrZXk6ICdIZWFsdGgnLCB2YWx1ZTogbmV3IFNwZWxsUGFyc2VyQmFzZSgpIH0sXHJcbiAgICAgICAgICAgIHsga2V5OiAnRW5jaGFudG1lbnRzJywgdmFsdWU6IG5ldyBTcGVsbFBhcnNlckJhc2UoKSB9LFxyXG4gICAgICAgICAgICB7IGtleTogJ1JpdHVhbHMnLCB2YWx1ZTogbmV3IFNwZWxsUGFyc2VyQmFzZSgpIH0sXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgICAgIGxldCBkYXRhczogU3BlbGxbXSA9IFtdO1xyXG4gICAgICAgIGxldCBqc29uRGF0YXMgPSBqc29uT2JqZWN0WydzcGVsbHMnXVsnc3BlbGwnXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGpzb25EYXRhcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQganNvbkRhdGEgPSBqc29uRGF0YXNbaV07XHJcbiAgICAgICAgICAgIGlmIChEYXRhSW1wb3J0ZXIudW5zdXBwb3J0ZWRFbnRyeShqc29uRGF0YSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgZGF0YSA9IHBhcnNlci5QYXJzZShqc29uRGF0YSwgdGhpcy5HZXREZWZhdWx0RGF0YSgpLCB0aGlzLml0ZW1UcmFuc2xhdGlvbnMpO1xyXG4gICAgICAgICAgICBkYXRhLmZvbGRlciA9IGZvbGRlcnNbZGF0YS5kYXRhLmNhdGVnb3J5XS5pZDtcclxuICAgICAgICAgICAgZGF0YXMucHVzaChkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBhd2FpdCBJdGVtLmNyZWF0ZShkYXRhcyk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgRGF0YUltcG9ydGVyIH0gZnJvbSAnLi9EYXRhSW1wb3J0ZXInO1xyXG5pbXBvcnQgeyBJbXBvcnRIZWxwZXIgfSBmcm9tICcuLi9oZWxwZXIvSW1wb3J0SGVscGVyJztcclxuaW1wb3J0IHsgQ3liZXJ3YXJlUGFyc2VyIH0gZnJvbSAnLi4vcGFyc2VyL3dhcmUvQ3liZXJ3YXJlUGFyc2VyJztcclxuaW1wb3J0IFdhcmUgPSBTaGFkb3dydW4uV2FyZTtcclxuaW1wb3J0IEN5YmVyd2FyZSA9IFNoYWRvd3J1bi5DeWJlcndhcmU7XHJcbmltcG9ydCB7RGVmYXVsdFZhbHVlc30gZnJvbSBcIi4uLy4uL2RhdGFUZW1wbGF0ZXNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBXYXJlSW1wb3J0ZXIgZXh0ZW5kcyBEYXRhSW1wb3J0ZXIge1xyXG4gICAgcHVibGljIGNhdGVnb3J5VHJhbnNsYXRpb25zOiBhbnk7XHJcbiAgICBwdWJsaWMgaXRlbVRyYW5zbGF0aW9uczogYW55O1xyXG4gICAgcHVibGljIGZpbGVzID0gWydjeWJlcndhcmUueG1sJywgJ2Jpb3dhcmUueG1sJ107XHJcblxyXG4gICAgQ2FuUGFyc2UoanNvbk9iamVjdDogb2JqZWN0KTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGpzb25PYmplY3QuaGFzT3duUHJvcGVydHkoJ2N5YmVyd2FyZXMnKSAmJiBqc29uT2JqZWN0WydjeWJlcndhcmVzJ10uaGFzT3duUHJvcGVydHkoJ2N5YmVyd2FyZScpIHx8XHJcbiAgICAgICAgICAgICAgIGpzb25PYmplY3QuaGFzT3duUHJvcGVydHkoJ2Jpb3dhcmVzJykgJiYganNvbk9iamVjdFsnYmlvd2FyZXMnXS5oYXNPd25Qcm9wZXJ0eSgnYmlvd2FyZScpO1xyXG4gICAgfVxyXG5cclxuICAgIEdldERlZmF1bHRDeWJlcndhcmVEYXRhKCk6IEN5YmVyd2FyZSB7XHJcbiAgICAgICAgLy9AdHMtaWdub3JlIC8vIEJpby9DeWJlcndhcmUgY29uZmxpY3RzIG9uICd0eXBlJy4uLlxyXG4gICAgICAgIHJldHVybiB7Li4udGhpcy5HZXREZWZhdWx0RGF0YSgpLCB0eXBlOiAnY3liZXJ3YXJlJ307XHJcbiAgICB9XHJcblxyXG4gICAgR2V0RGVmYXVsdEJpb3dhcmVEYXRhKCk6IEN5YmVyd2FyZSB7XHJcbiAgICAgICAgLy9AdHMtaWdub3JlIC8vIEJpby9DeWJlcndhcmUgY29uZmxpY3RzIG9uICd0eXBlJy4uLlxyXG4gICAgICAgIHJldHVybiB7Li4udGhpcy5HZXREZWZhdWx0RGF0YSgpLCB0eXBlOiAnYmlvd2FyZSd9O1xyXG4gICAgfVxyXG5cclxuICAgIEdldERlZmF1bHREYXRhKCk6IFdhcmUge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdVbm5hbWVkIEZvcm0nLFxyXG4gICAgICAgICAgICB0eXBlOiAnY3liZXJ3YXJlJyxcclxuICAgICAgICAgICAgX2lkOiAnJyxcclxuICAgICAgICAgICAgZm9sZGVyOiAnJyxcclxuICAgICAgICAgICAgaW1nOiAnaWNvbnMvc3ZnL215c3RlcnktbWFuLnN2ZycsXHJcbiAgICAgICAgICAgIGZsYWdzOiB7fSxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhdDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiAnJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0ZWNobm9sb2d5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmF0aW5nOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGF2YWlsYWJpbGl0eTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgY29zdDogMCxcclxuICAgICAgICAgICAgICAgICAgICBlcXVpcHBlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBjb25jZWFsOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2Q6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uX21vbml0b3I6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgd2lyZWxlc3M6IHRydWVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhcm1vcjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgYWNpZDogMCxcclxuICAgICAgICAgICAgICAgICAgICBjb2xkOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpcmU6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlY3RyaWNpdHk6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgcmFkaWF0aW9uOiAwLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGFjdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNraWxsOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzcGVjOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBtb2Q6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9kX2Rlc2NyaXB0aW9uOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBkYW1hZ2U6IERlZmF1bHRWYWx1ZXMuZGFtYWdlRGF0YSh7dHlwZToge2Jhc2U6ICcnLCB2YWx1ZTogJyd9fSksXHJcbiAgICAgICAgICAgICAgICAgICAgbGltaXQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZDogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBleHRlbmRlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgb3Bwb3NlZDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlMjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraWxsOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhbHRfbW9kOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpY2VfcG9vbF9tb2Q6IFtdLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGdyYWRlOiAnc3RhbmRhcmQnLFxyXG4gICAgICAgICAgICAgICAgZXNzZW5jZTogMCxcclxuICAgICAgICAgICAgICAgIGNhcGFjaXR5OiAwLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBwZXJtaXNzaW9uOiB7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiAyLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBFeHRyYWN0VHJhbnNsYXRpb24oZmlsZU5hbWUpIHtcclxuICAgICAgICBpZiAoIURhdGFJbXBvcnRlci5qc29uaTE4bikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQganNvbkl0ZW1pMThuID0gSW1wb3J0SGVscGVyLkV4dHJhY3REYXRhRmlsZVRyYW5zbGF0aW9uKERhdGFJbXBvcnRlci5qc29uaTE4biwgZmlsZU5hbWUpO1xyXG4gICAgICAgICAvLyBUT0RPOiBNb3ZlIEV4dHJhY3RUcmFuc2xhdGlvbiBwaGFzZSBiZWZvcmUgdGhlIHBhcnNpbmcgcGhhc2UgYW5kIGluaXRpYXRlIGl0IHdpdGggdGhlIGZpbGVuYW1lIHRvIHBhcnNlLlxyXG4gICAgICAgICAgICBpZiAodGhpcy5maWxlcy5sZW5ndGggIT09IDIpIGNvbnNvbGUuZXJyb3IoJ0xhemlseSBoYWNrZWQgY29kZSB3aWxsIGZhaWwgZm9yIG1vcmUgb3IgbGVzcyB0aGFuIHR3byBmaWxlcy4nKTtcclxuXHJcbiAgICAgICAgdGhpcy5jYXRlZ29yeVRyYW5zbGF0aW9ucyA9IEltcG9ydEhlbHBlci5FeHRyYWN0Q2F0ZWdvcmllc1RyYW5zbGF0aW9uKGpzb25JdGVtaTE4bik7XHJcblxyXG4gICAgICAgIGNvbnN0IHt0eXBlS2V5LCBsaXN0S2V5fSA9IGZpbGVOYW1lID09PSAnY3liZXJ3YXJlLnhtbCcgP1xyXG4gICAgICAgICAgICAgICAge3R5cGVLZXk6ICdjeWJlcndhcmVzJywgbGlzdEtleTogJ2N5YmVyd2FyZSd9IDpcclxuICAgICAgICAgICAgICAgIHt0eXBlS2V5OiAnYmlvd2FyZXMnLCBsaXN0S2V5OiAnYmlvd2FyZSd9O1xyXG5cclxuICAgICAgICB0aGlzLml0ZW1UcmFuc2xhdGlvbnMgPSBJbXBvcnRIZWxwZXIuRXh0cmFjdEl0ZW1UcmFuc2xhdGlvbihqc29uSXRlbWkxOG4sIHR5cGVLZXksIGxpc3RLZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIFBhcnNlKGpzb25PYmplY3Q6IG9iamVjdCk6IFByb21pc2U8RW50aXR5PiB7XHJcbiAgICAgICAgY29uc3QgY3liZXJQYXJzZXIgPSBuZXcgQ3liZXJ3YXJlUGFyc2VyKCk7XHJcblxyXG4gICAgICAgIGxldCBrZXkgPSBqc29uT2JqZWN0Lmhhc093blByb3BlcnR5KCdjeWJlcndhcmVzJykgPyAnQ3liZXJ3YXJlJyA6ICdCaW93YXJlJztcclxuICAgICAgICBjb25zdCBmb2xkZXJzID0gYXdhaXQgSW1wb3J0SGVscGVyLk1ha2VDYXRlZ29yeUZvbGRlcnMoanNvbk9iamVjdCwga2V5KTtcclxuXHJcbiAgICAgICAga2V5ID0ga2V5LnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgbGV0IGRhdGFzOiBXYXJlW10gPSBbXTtcclxuICAgICAgICBsZXQganNvbkRhdGFzID0ganNvbk9iamVjdFtrZXkgKyAncyddW2tleV07XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBqc29uRGF0YXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGpzb25EYXRhID0ganNvbkRhdGFzW2ldO1xyXG5cclxuICAgICAgICAgICAgaWYgKERhdGFJbXBvcnRlci51bnN1cHBvcnRlZEVudHJ5KGpzb25EYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHREYXRhID0ga2V5ID09PSAnY3liZXJ3YXJlJyA/IHRoaXMuR2V0RGVmYXVsdEN5YmVyd2FyZURhdGEoKSA6IHRoaXMuR2V0RGVmYXVsdEJpb3dhcmVEYXRhKCk7XHJcbiAgICAgICAgICAgIGxldCBkYXRhID0gY3liZXJQYXJzZXIuUGFyc2UoanNvbkRhdGEsIGRlZmF1bHREYXRhLCB0aGlzLml0ZW1UcmFuc2xhdGlvbnMpO1xyXG4gICAgICAgICAgICBjb25zdCBjYXRlZ29yeSA9IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ2NhdGVnb3J5Jyk7XHJcblxyXG4gICAgICAgICAgICAvLyBUT0RPOiBEb2VzIHRoaXMgdHlwZSBtaXh0dXJlIGNhdXNlIGxhdGVyIGlzc3Vlcz8gV2lsbCBpdCBjYXJyeSBvdmVyP1xyXG4gICAgICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICAgICAgZGF0YS5mb2xkZXIgPSBmb2xkZXJzW2NhdGVnb3J5LnRvTG93ZXJDYXNlKCldLmlkO1xyXG5cclxuICAgICAgICAgICAgLy8gLy8gVE9ETzogRm9sbG93IENvbXBsZXhGb3JtUGFyc2VyQmFzZSBhcHByb2FjaC5cclxuICAgICAgICAgICAgLy8gZGF0YS5uYW1lID0gSW1wb3J0SGVscGVyLk1hcE5hbWVUb1RyYW5zbGF0aW9uKHRoaXMuaXRlbVRyYW5zbGF0aW9ucywgZGF0YS5uYW1lKTtcclxuXHJcbiAgICAgICAgICAgIGRhdGFzLnB1c2goZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYXdhaXQgSXRlbS5jcmVhdGUoZGF0YXMpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IERhdGFJbXBvcnRlciB9IGZyb20gJy4vRGF0YUltcG9ydGVyJztcclxuaW1wb3J0IHsgSW1wb3J0SGVscGVyIH0gZnJvbSAnLi4vaGVscGVyL0ltcG9ydEhlbHBlcic7XHJcbmltcG9ydCB7IENvbnN0YW50cyB9IGZyb20gJy4vQ29uc3RhbnRzJztcclxuaW1wb3J0IHsgUmFuZ2VkUGFyc2VyIH0gZnJvbSAnLi4vcGFyc2VyL3dlYXBvbi9SYW5nZWRQYXJzZXInO1xyXG5pbXBvcnQgeyBNZWxlZVBhcnNlciB9IGZyb20gJy4uL3BhcnNlci93ZWFwb24vTWVsZWVQYXJzZXInO1xyXG5pbXBvcnQgeyBUaHJvd25QYXJzZXIgfSBmcm9tICcuLi9wYXJzZXIvd2VhcG9uL1Rocm93blBhcnNlcic7XHJcbmltcG9ydCB7IFBhcnNlck1hcCB9IGZyb20gJy4uL3BhcnNlci9QYXJzZXJNYXAnO1xyXG5pbXBvcnQgV2VhcG9uID0gU2hhZG93cnVuLldlYXBvbjtcclxuaW1wb3J0IHsgV2VhcG9uUGFyc2VyQmFzZSB9IGZyb20gJy4uL3BhcnNlci93ZWFwb24vV2VhcG9uUGFyc2VyQmFzZSc7XHJcbmltcG9ydCB7RGVmYXVsdFZhbHVlc30gZnJvbSBcIi4uLy4uL2RhdGFUZW1wbGF0ZXNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBXZWFwb25JbXBvcnRlciBleHRlbmRzIERhdGFJbXBvcnRlciB7XHJcbiAgICBwdWJsaWMgY2F0ZWdvcnlUcmFuc2xhdGlvbnM6IGFueTtcclxuICAgIHB1YmxpYyBpdGVtVHJhbnNsYXRpb25zOiBhbnk7XHJcbiAgICBwdWJsaWMgZmlsZXMgPSBbJ3dlYXBvbnMueG1sJ107XHJcblxyXG4gICAgQ2FuUGFyc2UoanNvbk9iamVjdDogb2JqZWN0KTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGpzb25PYmplY3QuaGFzT3duUHJvcGVydHkoJ3dlYXBvbnMnKSAmJiBqc29uT2JqZWN0Wyd3ZWFwb25zJ10uaGFzT3duUHJvcGVydHkoJ3dlYXBvbicpO1xyXG4gICAgfVxyXG5cclxuICAgIEdldERlZmF1bHREYXRhKCk6IFdlYXBvbiB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmFtZTogJ1VubmFtZWQgSXRlbScsXHJcbiAgICAgICAgICAgIF9pZDogJycsXHJcbiAgICAgICAgICAgIGZvbGRlcjogJycsXHJcbiAgICAgICAgICAgIGltZzogJ2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi5zdmcnLFxyXG4gICAgICAgICAgICBmbGFnczoge30sXHJcbiAgICAgICAgICAgIHR5cGU6ICd3ZWFwb24nLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBjaGF0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGFjdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd2YXJpZXMnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6ICdhZ2lsaXR5JyxcclxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGUyOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBza2lsbDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgc3BlYzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9kOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vZF9kZXNjcmlwdGlvbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgZGFtYWdlOiBEZWZhdWx0VmFsdWVzLmRhbWFnZURhdGEoKSxcclxuICAgICAgICAgICAgICAgICAgICBsaW1pdDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTogMCxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGV4dGVuZGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBvcHBvc2VkOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkZWZlbnNlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlMjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraWxsOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhbHRfbW9kOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpY2VfcG9vbF9tb2Q6IFtdLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRlY2hub2xvZ3k6IHtcclxuICAgICAgICAgICAgICAgICAgICByYXRpbmc6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgYXZhaWxhYmlsaXR5OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogMSxcclxuICAgICAgICAgICAgICAgICAgICBjb3N0OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGVxdWlwcGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbmNlYWw6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZDogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBjb25kaXRpb25fbW9uaXRvcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXg6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB3aXJlbGVzczogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGFtbW86IHtcclxuICAgICAgICAgICAgICAgICAgICBzcGFyZV9jbGlwczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmFuZ2U6IHtcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2VzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZWRpdW06IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvbmc6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJlbWU6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICByYzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG1vZGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpbmdsZV9zaG90OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VtaV9hdXRvOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVyc3RfZmlyZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGxfYXV0bzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBtZWxlZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlYWNoOiAwLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRocm93bjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG9ydDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVkaXVtOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb25nOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRyZW1lOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYmxhc3Q6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkcm9wb2ZmOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnk6ICdyYW5nZScsXHJcbiAgICAgICAgICAgICAgICBzdWJjYXRlZ29yeTogJycsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHBlcm1pc3Npb246IHtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IDIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBFeHRyYWN0VHJhbnNsYXRpb24oKSB7XHJcbiAgICAgICAgaWYgKCFEYXRhSW1wb3J0ZXIuanNvbmkxOG4pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGpzb25XZWFwb25pMThuID0gSW1wb3J0SGVscGVyLkV4dHJhY3REYXRhRmlsZVRyYW5zbGF0aW9uKERhdGFJbXBvcnRlci5qc29uaTE4biwgdGhpcy5maWxlc1swXSk7XHJcbiAgICAgICAgdGhpcy5jYXRlZ29yeVRyYW5zbGF0aW9ucyA9IEltcG9ydEhlbHBlci5FeHRyYWN0Q2F0ZWdvcmllc1RyYW5zbGF0aW9uKGpzb25XZWFwb25pMThuKTtcclxuICAgICAgICB0aGlzLml0ZW1UcmFuc2xhdGlvbnMgPSBJbXBvcnRIZWxwZXIuRXh0cmFjdEl0ZW1UcmFuc2xhdGlvbihqc29uV2VhcG9uaTE4biwgJ3dlYXBvbnMnLCAnd2VhcG9uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgUGFyc2UoanNvbk9iamVjdDogb2JqZWN0KTogUHJvbWlzZTxFbnRpdHk+IHtcclxuICAgICAgICBjb25zdCBmb2xkZXJzID0gYXdhaXQgSW1wb3J0SGVscGVyLk1ha2VDYXRlZ29yeUZvbGRlcnMoanNvbk9iamVjdCwgJ1dlYXBvbnMnLCB0aGlzLmNhdGVnb3J5VHJhbnNsYXRpb25zKTtcclxuXHJcbiAgICAgICAgZm9sZGVyc1snZ2VhciddID0gYXdhaXQgSW1wb3J0SGVscGVyLkdldEZvbGRlckF0UGF0aChgJHtDb25zdGFudHMuUk9PVF9JTVBPUlRfRk9MREVSX05BTUV9L1dlYXBvbnMvR2VhcmAsIHRydWUpO1xyXG4gICAgICAgIGZvbGRlcnNbJ3F1YWxpdHknXSA9IGF3YWl0IEltcG9ydEhlbHBlci5HZXRGb2xkZXJBdFBhdGgoYCR7Q29uc3RhbnRzLlJPT1RfSU1QT1JUX0ZPTERFUl9OQU1FfS9XZWFwb25zL1F1YWxpdHlgLCB0cnVlKTtcclxuXHJcbiAgICAgICAgY29uc3QgcGFyc2VyID0gbmV3IFBhcnNlck1hcDxXZWFwb24+KFdlYXBvblBhcnNlckJhc2UuR2V0V2VhcG9uVHlwZSwgW1xyXG4gICAgICAgICAgICB7IGtleTogJ3JhbmdlJywgdmFsdWU6IG5ldyBSYW5nZWRQYXJzZXIoKSB9LFxyXG4gICAgICAgICAgICB7IGtleTogJ21lbGVlJywgdmFsdWU6IG5ldyBNZWxlZVBhcnNlcigpIH0sXHJcbiAgICAgICAgICAgIHsga2V5OiAndGhyb3duJywgdmFsdWU6IG5ldyBUaHJvd25QYXJzZXIoKSB9LFxyXG4gICAgICAgIF0pO1xyXG5cclxuICAgICAgICBsZXQgZGF0YXM6IFdlYXBvbltdID0gW107XHJcbiAgICAgICAgbGV0IGpzb25EYXRhcyA9IGpzb25PYmplY3RbJ3dlYXBvbnMnXVsnd2VhcG9uJ107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBqc29uRGF0YXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGpzb25EYXRhID0ganNvbkRhdGFzW2ldO1xyXG5cclxuICAgICAgICAgICAgaWYgKERhdGFJbXBvcnRlci51bnN1cHBvcnRlZEVudHJ5KGpzb25EYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBkYXRhID0gcGFyc2VyLlBhcnNlKGpzb25EYXRhLCB0aGlzLkdldERlZmF1bHREYXRhKCksIHRoaXMuaXRlbVRyYW5zbGF0aW9ucyk7XHJcbiAgICAgICAgICAgIGRhdGEuZm9sZGVyID0gZm9sZGVyc1tkYXRhLmRhdGEuc3ViY2F0ZWdvcnldLmlkO1xyXG5cclxuICAgICAgICAgICAgZGF0YXMucHVzaChkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBhd2FpdCBJdGVtLmNyZWF0ZShkYXRhcyk7XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGFic3RyYWN0IGNsYXNzIFBhcnNlcjxUUmVzdWx0PiB7XHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgUGFyc2UoanNvbkRhdGE6IG9iamVjdCwgZGF0YTogVFJlc3VsdCwganNvblRyYW5zbGF0aW9uPzogb2JqZWN0KTogVFJlc3VsdDtcclxufVxyXG4iLCJpbXBvcnQgeyBQYXJzZXIgfSBmcm9tICcuL1BhcnNlcic7XHJcbmltcG9ydCB7IEltcG9ydEhlbHBlciB9IGZyb20gJy4uL2hlbHBlci9JbXBvcnRIZWxwZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBhcnNlck1hcDxUUmVzdWx0PiBleHRlbmRzIFBhcnNlcjxUUmVzdWx0PiB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IG1fQnJhbmNoS2V5OiBzdHJpbmcgfCBCcmFuY2hGdW5jPFRSZXN1bHQ+O1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBtX01hcDogTWFwPHN0cmluZywgUGFyc2VyPFRSZXN1bHQ+PjtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoYnJhbmNoS2V5OiBzdHJpbmcgfCBCcmFuY2hGdW5jPFRSZXN1bHQ+LCBlbGVtZW50czogQ0FyZzxUUmVzdWx0PltdKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5tX0JyYW5jaEtleSA9IGJyYW5jaEtleTtcclxuXHJcbiAgICAgICAgdGhpcy5tX01hcCA9IG5ldyBNYXAoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IHsga2V5LCB2YWx1ZSB9IG9mIGVsZW1lbnRzKSB7XHJcbiAgICAgICAgICAgIHRoaXMubV9NYXAuc2V0KGtleSwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgUGFyc2UoanNvbkRhdGE6IG9iamVjdCwgZGF0YTogVFJlc3VsdCwganNvblRyYW5zbGF0aW9uPzogb2JqZWN0KTogVFJlc3VsdCB7XHJcbiAgICAgICAgbGV0IGtleTtcclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMubV9CcmFuY2hLZXkgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAga2V5ID0gdGhpcy5tX0JyYW5jaEtleShqc29uRGF0YSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAga2V5ID0gdGhpcy5tX0JyYW5jaEtleTtcclxuICAgICAgICAgICAga2V5ID0gSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGpzb25EYXRhLCBrZXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcGFyc2VyID0gdGhpcy5tX01hcC5nZXQoa2V5KTtcclxuICAgICAgICBpZiAocGFyc2VyID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGBDb3VsZCBub3QgZmluZCBtYXBwZWQgcGFyc2VyIGZvciBjYXRlZ29yeSAke2tleX0uYCk7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcGFyc2VyLlBhcnNlKGpzb25EYXRhLCBkYXRhLCBqc29uVHJhbnNsYXRpb24pO1xyXG4gICAgfVxyXG59XHJcblxyXG50eXBlIENBcmc8VFJlc3VsdD4gPSB7XHJcbiAgICBrZXk6IHN0cmluZztcclxuICAgIHZhbHVlOiBQYXJzZXI8VFJlc3VsdD47XHJcbn07XHJcbnR5cGUgQnJhbmNoRnVuYzxUUmVzdWx0PiA9IChUUmVzdWx0KSA9PiBzdHJpbmc7XHJcbiIsImltcG9ydCBBcm1vciA9IFNoYWRvd3J1bi5Bcm1vcjtcclxuaW1wb3J0IHsgSW1wb3J0SGVscGVyIH0gZnJvbSAnLi4vLi4vaGVscGVyL0ltcG9ydEhlbHBlcic7XHJcbmltcG9ydCB7IFRlY2hub2xvZ3lJdGVtUGFyc2VyQmFzZSB9IGZyb20gJy4uL2l0ZW0vVGVjaG5vbG9neUl0ZW1QYXJzZXJCYXNlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBBcm1vclBhcnNlckJhc2UgZXh0ZW5kcyBUZWNobm9sb2d5SXRlbVBhcnNlckJhc2U8QXJtb3I+IHtcclxuICAgIFBhcnNlKGpzb25EYXRhOiBvYmplY3QsIGRhdGE6IFNoYWRvd3J1bi5Bcm1vcik6IFNoYWRvd3J1bi5Bcm1vciB7XHJcbiAgICAgICAgZGF0YSA9IHN1cGVyLlBhcnNlKGpzb25EYXRhLCBkYXRhKTtcclxuXHJcbiAgICAgICAgZGF0YS5kYXRhLmFybW9yLnZhbHVlID0gSW1wb3J0SGVscGVyLkludFZhbHVlKGpzb25EYXRhLCAnYXJtb3InLCAwKTtcclxuICAgICAgICBkYXRhLmRhdGEuYXJtb3IubW9kID0gSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGpzb25EYXRhLCAnYXJtb3InKS5pbmNsdWRlcygnKycpO1xyXG5cclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgQ29tcGxleEZvcm0gPSBTaGFkb3dydW4uQ29tcGxleEZvcm07XHJcbmltcG9ydCB7IEltcG9ydEhlbHBlciB9IGZyb20gJy4uLy4uL2hlbHBlci9JbXBvcnRIZWxwZXInO1xyXG5pbXBvcnQgeyBJdGVtUGFyc2VyQmFzZSB9IGZyb20gJy4uL2l0ZW0vSXRlbVBhcnNlckJhc2UnO1xyXG5pbXBvcnQgQ29tcGxleEZvcm1UYXJnZXQgPSBTaGFkb3dydW4uQ29tcGxleEZvcm1UYXJnZXQ7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29tcGxleEZvcm1QYXJzZXJCYXNlIGV4dGVuZHMgSXRlbVBhcnNlckJhc2U8Q29tcGxleEZvcm0+IHtcclxuICAgIFBhcnNlKGpzb25EYXRhOiBvYmplY3QsIGRhdGE6IFNoYWRvd3J1bi5Db21wbGV4Rm9ybSwganNvblRyYW5zbGF0aW9uPzogb2JqZWN0KTogU2hhZG93cnVuLkNvbXBsZXhGb3JtIHtcclxuICAgICAgICBkYXRhLm5hbWUgPSBJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoanNvbkRhdGEsICduYW1lJyk7XHJcblxyXG4gICAgICAgIGRhdGEuZGF0YS5kZXNjcmlwdGlvbi5zb3VyY2UgPSBgJHtJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoanNvbkRhdGEsICdzb3VyY2UnKX0gJHtJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoanNvbkRhdGEsICdwYWdlJyl9YDtcclxuXHJcbiAgICAgICAgbGV0IGZhZGUgPSBJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoanNvbkRhdGEsICdmdicpO1xyXG4gICAgICAgIGlmIChmYWRlLmluY2x1ZGVzKCcrJykgfHwgZmFkZS5pbmNsdWRlcygnLScpKSB7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS5mYWRlID0gcGFyc2VJbnQoZmFkZS5zdWJzdHJpbmcoMSwgZmFkZS5sZW5ndGgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBkdXJhdGlvbiA9IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ2R1cmF0aW9uJyk7XHJcbiAgICAgICAgaWYgKGR1cmF0aW9uID09PSAnSScpIHtcclxuICAgICAgICAgICAgZGF0YS5kYXRhLmR1cmF0aW9uID0gJ2luc3RhbnQnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZHVyYXRpb24gPT09ICdTJykge1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEuZHVyYXRpb24gPSAnc3VzdGFpbmVkJztcclxuICAgICAgICB9IGVsc2UgaWYgKGR1cmF0aW9uID09PSAnUCcpIHtcclxuICAgICAgICAgICAgZGF0YS5kYXRhLmR1cmF0aW9uID0gJ3Blcm1hbmVudCc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdGFyZ2V0ID0gSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGpzb25EYXRhLCAndGFyZ2V0Jyk7XHJcbiAgICAgICAgc3dpdGNoICh0YXJnZXQpIHtcclxuICAgICAgICAgICAgY2FzZSAnRGV2aWNlJzpcclxuICAgICAgICAgICAgY2FzZSAnRmlsZSc6XHJcbiAgICAgICAgICAgIGNhc2UgJ0hvc3QnOlxyXG4gICAgICAgICAgICBjYXNlICdQZXJzb25hJzpcclxuICAgICAgICAgICAgY2FzZSAnU2VsZic6XHJcbiAgICAgICAgICAgIGNhc2UgJ1Nwcml0ZSc6XHJcbiAgICAgICAgICAgICAgICBkYXRhLmRhdGEudGFyZ2V0ID0gdGFyZ2V0LnRvTG93ZXJDYXNlKCkgYXMgQ29tcGxleEZvcm1UYXJnZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGRhdGEuZGF0YS50YXJnZXQgPSAnb3RoZXInO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoanNvblRyYW5zbGF0aW9uKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9yaWdOYW1lID0gSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGpzb25EYXRhLCAnbmFtZScpO1xyXG4gICAgICAgICAgICBkYXRhLm5hbWUgPSBJbXBvcnRIZWxwZXIuTWFwTmFtZVRvVHJhbnNsYXRpb24oanNvblRyYW5zbGF0aW9uLCBvcmlnTmFtZSk7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS5kZXNjcmlwdGlvbi5zb3VyY2UgPSBgJHtJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoanNvbkRhdGEsICdzb3VyY2UnKX0gJHtJbXBvcnRIZWxwZXIuTWFwTmFtZVRvUGFnZVNvdXJjZShqc29uVHJhbnNsYXRpb24sIG9yaWdOYW1lKX1gO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSW1wb3J0SGVscGVyIH0gZnJvbSAnLi4vLi4vaGVscGVyL0ltcG9ydEhlbHBlcic7XHJcbmltcG9ydCBDcml0dGVyUG93ZXIgPSBTaGFkb3dydW4uQ3JpdHRlclBvd2VyO1xyXG5pbXBvcnQgQ3JpdHRlclBvd2VyQ2F0ZWdvcnkgPSBTaGFkb3dydW4uQ3JpdHRlclBvd2VyQ2F0ZWdvcnk7XHJcbmltcG9ydCB7IEl0ZW1QYXJzZXJCYXNlIH0gZnJvbSAnLi4vaXRlbS9JdGVtUGFyc2VyQmFzZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgQ3JpdHRlclBvd2VyUGFyc2VyQmFzZSBleHRlbmRzIEl0ZW1QYXJzZXJCYXNlPENyaXR0ZXJQb3dlcj4ge1xyXG4gICAgcHVibGljIFBhcnNlKGpzb25EYXRhOiBvYmplY3QsIGRhdGE6IENyaXR0ZXJQb3dlciwganNvblRyYW5zbGF0aW9uPzogb2JqZWN0KTogQ3JpdHRlclBvd2VyIHtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coanNvbkRhdGEpO1xyXG5cclxuICAgICAgICBkYXRhLm5hbWUgPSBJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoanNvbkRhdGEsICduYW1lJyk7XHJcblxyXG4gICAgICAgIGRhdGEuZGF0YS5kZXNjcmlwdGlvbi5zb3VyY2UgPSBgJHtJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoanNvbkRhdGEsICdzb3VyY2UnKX0gJHtJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoanNvbkRhdGEsICdwYWdlJyl9YDtcclxuICAgICAgICBkYXRhLmRhdGEuY2F0ZWdvcnkgPSBJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoanNvbkRhdGEsICdjYXRlZ29yeScpLnRvTG93ZXJDYXNlKCkgYXMgQ3JpdHRlclBvd2VyQ2F0ZWdvcnk7XHJcblxyXG4gICAgICAgIGxldCBkdXJhdGlvbiA9IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ2R1cmF0aW9uJyk7XHJcbiAgICAgICAgaWYgKGR1cmF0aW9uID09PSAnQWx3YXlzJykge1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEuZHVyYXRpb24gPSAnYWx3YXlzJztcclxuICAgICAgICB9IGVsc2UgaWYgKGR1cmF0aW9uID09PSAnSW5zdGFudCcpIHtcclxuICAgICAgICAgICAgZGF0YS5kYXRhLmR1cmF0aW9uID0gJ2luc3RhbnQnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZHVyYXRpb24gPT09ICdTdXN0YWluZWQnKSB7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS5kdXJhdGlvbiA9ICdzdXN0YWluZWQnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZHVyYXRpb24gPT09ICdQZXJtYW5lbnQnKSB7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS5kdXJhdGlvbiA9ICdwZXJtYW5lbnQnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmR1cmF0aW9uID0gJ3NwZWNpYWwnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHJhbmdlID0gSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGpzb25EYXRhLCAncmFuZ2UnKTtcclxuICAgICAgICBpZiAocmFuZ2UgPT09ICdUJykge1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEucmFuZ2UgPSAndG91Y2gnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocmFuZ2UgPT09ICdMT1MnKSB7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS5yYW5nZSA9ICdsb3MnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocmFuZ2UgPT09ICdMT1MgKEEpJykge1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEucmFuZ2UgPSAnbG9zX2EnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocmFuZ2UgPT09ICdTZWxmJykge1xyXG4gICAgICAgICAgIGRhdGEuZGF0YS5yYW5nZSA9ICdzZWxmJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZGF0YS5kYXRhLnJhbmdlID0gJ3NwZWNpYWwnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHR5cGUgPSBJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoanNvbkRhdGEsICd0eXBlJyk7XHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICdQJykge1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEucG93ZXJUeXBlID0gJ3BoeXNpY2FsJztcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdNJykge1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEucG93ZXJUeXBlID0gJ21hbmEnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGpzb25UcmFuc2xhdGlvbikge1xyXG4gICAgICAgICAgICBjb25zdCBvcmlnTmFtZSA9IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ25hbWUnKTtcclxuICAgICAgICAgICAgZGF0YS5uYW1lID0gSW1wb3J0SGVscGVyLk1hcE5hbWVUb1RyYW5zbGF0aW9uKGpzb25UcmFuc2xhdGlvbiwgb3JpZ05hbWUpO1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEuZGVzY3JpcHRpb24uc291cmNlID0gYCR7SW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGpzb25EYXRhLCAnc291cmNlJyl9ICR7SW1wb3J0SGVscGVyLk1hcE5hbWVUb1BhZ2VTb3VyY2UoanNvblRyYW5zbGF0aW9uLCBvcmlnTmFtZSl9YDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFBhcnNlciB9IGZyb20gJy4uL1BhcnNlcic7XHJcbmltcG9ydCB7IEltcG9ydEhlbHBlciB9IGZyb20gJy4uLy4uL2hlbHBlci9JbXBvcnRIZWxwZXInO1xyXG5pbXBvcnQgU1I1SXRlbVR5cGUgPSBTaGFkb3dydW4uU1I1SXRlbVR5cGU7XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgSXRlbVBhcnNlckJhc2U8VFJlc3VsdCBleHRlbmRzIFNSNUl0ZW1UeXBlPiBleHRlbmRzIFBhcnNlcjxUUmVzdWx0PiB7XHJcbiAgICBQYXJzZShqc29uRGF0YTogb2JqZWN0LCBkYXRhOiBUUmVzdWx0LCBqc29uVHJhbnNsYXRpb24/OiBvYmplY3QpOiBUUmVzdWx0IHtcclxuICAgICAgICBkYXRhLm5hbWUgPSBJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoanNvbkRhdGEsICduYW1lJyk7XHJcblxyXG4gICAgICAgIGRhdGEuZGF0YS5kZXNjcmlwdGlvbi5zb3VyY2UgPSBgJHtJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoanNvbkRhdGEsICdzb3VyY2UnKX0gJHtJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoanNvbkRhdGEsICdwYWdlJyl9YDtcclxuXHJcbiAgICAgICAgaWYgKGpzb25UcmFuc2xhdGlvbikge1xyXG4gICAgICAgICAgICBjb25zdCBvcmlnTmFtZSA9IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ25hbWUnKTtcclxuICAgICAgICAgICAgZGF0YS5uYW1lID0gSW1wb3J0SGVscGVyLk1hcE5hbWVUb1RyYW5zbGF0aW9uKGpzb25UcmFuc2xhdGlvbiwgb3JpZ05hbWUpO1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEuZGVzY3JpcHRpb24uc291cmNlID0gYCR7SW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGpzb25EYXRhLCAnc291cmNlJyl9ICR7SW1wb3J0SGVscGVyLk1hcE5hbWVUb1BhZ2VTb3VyY2UoanNvblRyYW5zbGF0aW9uLCBvcmlnTmFtZSl9YDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBTUjVJdGVtVHlwZSA9IFNoYWRvd3J1bi5TUjVJdGVtVHlwZTtcclxuaW1wb3J0IHsgSXRlbVBhcnNlckJhc2UgfSBmcm9tICcuL0l0ZW1QYXJzZXJCYXNlJztcclxuaW1wb3J0IHsgSW1wb3J0SGVscGVyIH0gZnJvbSAnLi4vLi4vaGVscGVyL0ltcG9ydEhlbHBlcic7XHJcbmltcG9ydCBUZWNobm9sb2d5ID0gU2hhZG93cnVuLlRlY2hub2xvZ3k7XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVGVjaG5vbG9neUl0ZW1QYXJzZXJCYXNlPFRSZXN1bHQgZXh0ZW5kcyBUZWNobm9sb2d5ICYgU1I1SXRlbVR5cGU+IGV4dGVuZHMgSXRlbVBhcnNlckJhc2U8VFJlc3VsdD4ge1xyXG4gICAgUGFyc2UoanNvbkRhdGE6IG9iamVjdCwgZGF0YTogVFJlc3VsdCwganNvblRyYW5zbGF0aW9uPzogb2JqZWN0KTogVFJlc3VsdCB7XHJcbiAgICAgICAgZGF0YSA9IHN1cGVyLlBhcnNlKGpzb25EYXRhLCBkYXRhLCBqc29uVHJhbnNsYXRpb24pO1xyXG5cclxuICAgICAgICBkYXRhLmRhdGEudGVjaG5vbG9neS5hdmFpbGFiaWxpdHkgPSBJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoanNvbkRhdGEsICdhdmFpbCcsICcwJyk7XHJcbiAgICAgICAgZGF0YS5kYXRhLnRlY2hub2xvZ3kuY29zdCA9IEltcG9ydEhlbHBlci5JbnRWYWx1ZShqc29uRGF0YSwgJ2Nvc3QnLCAwKTtcclxuICAgICAgICBkYXRhLmRhdGEudGVjaG5vbG9neS5yYXRpbmcgPSBJbXBvcnRIZWxwZXIuSW50VmFsdWUoanNvbkRhdGEsICdyYXRpbmcnLCAwKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IE1vZCA9IFNoYWRvd3J1bi5Nb2RpZmljYXRpb247XHJcbmltcG9ydCB7IEltcG9ydEhlbHBlciB9IGZyb20gJy4uLy4uL2hlbHBlci9JbXBvcnRIZWxwZXInO1xyXG5pbXBvcnQgTW91bnRUeXBlID0gU2hhZG93cnVuLk1vdW50VHlwZTtcclxuaW1wb3J0IHsgVGVjaG5vbG9neUl0ZW1QYXJzZXJCYXNlIH0gZnJvbSAnLi4vaXRlbS9UZWNobm9sb2d5SXRlbVBhcnNlckJhc2UnO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1vZFBhcnNlckJhc2UgZXh0ZW5kcyBUZWNobm9sb2d5SXRlbVBhcnNlckJhc2U8TW9kPiB7XHJcbiAgICBQYXJzZShqc29uRGF0YTogb2JqZWN0LCBkYXRhOiBNb2QpOiBNb2Qge1xyXG4gICAgICAgIGRhdGEgPSBzdXBlci5QYXJzZShqc29uRGF0YSwgZGF0YSk7XHJcblxyXG4gICAgICAgIGRhdGEuZGF0YS50eXBlID0gJ3dlYXBvbic7XHJcblxyXG4gICAgICAgIGRhdGEuZGF0YS5tb3VudF9wb2ludCA9IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ21vdW50JykgYXMgTW91bnRUeXBlO1xyXG5cclxuICAgICAgICBkYXRhLmRhdGEucmMgPSBJbXBvcnRIZWxwZXIuSW50VmFsdWUoanNvbkRhdGEsICdyYycsIDApO1xyXG4gICAgICAgIGRhdGEuZGF0YS5hY2N1cmFjeSA9IEltcG9ydEhlbHBlci5JbnRWYWx1ZShqc29uRGF0YSwgJ2FjY3VyYWN5JywgMCk7XHJcblxyXG4gICAgICAgIGRhdGEuZGF0YS50ZWNobm9sb2d5LmNvbmNlYWwuYmFzZSA9IEltcG9ydEhlbHBlci5JbnRWYWx1ZShqc29uRGF0YSwgJ2NvbmNlYWwnLCAwKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSW1wb3J0SGVscGVyIH0gZnJvbSAnLi4vLi4vaGVscGVyL0ltcG9ydEhlbHBlcic7XHJcbmltcG9ydCBRdWFsaXR5ID0gU2hhZG93cnVuLlF1YWxpdHk7XHJcbmltcG9ydCB7IEl0ZW1QYXJzZXJCYXNlIH0gZnJvbSAnLi4vaXRlbS9JdGVtUGFyc2VyQmFzZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgUXVhbGl0eVBhcnNlckJhc2UgZXh0ZW5kcyBJdGVtUGFyc2VyQmFzZTxRdWFsaXR5PiB7XHJcbiAgICBwdWJsaWMgUGFyc2UoanNvbkRhdGE6IG9iamVjdCwgZGF0YTogUXVhbGl0eSwganNvblRyYW5zbGF0aW9uPyk6IFF1YWxpdHkge1xyXG4gICAgICAgIGRhdGEubmFtZSA9IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ25hbWUnKTtcclxuXHJcbiAgICAgICAgZGF0YS5kYXRhLmRlc2NyaXB0aW9uLnNvdXJjZSA9IGAke0ltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ3NvdXJjZScpfSAke0ltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ3BhZ2UnKX1gO1xyXG5cclxuICAgICAgICBkYXRhLmRhdGEudHlwZSA9IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ2NhdGVnb3J5JykgPT09ICdQb3NpdGl2ZScgPyAncG9zaXRpdmUnIDogJ25lZ2F0aXZlJztcclxuXHJcbiAgICAgICAgaWYgKGpzb25UcmFuc2xhdGlvbikge1xyXG4gICAgICAgICAgICBjb25zdCBvcmlnTmFtZSA9IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ25hbWUnKTtcclxuICAgICAgICAgICAgZGF0YS5uYW1lID0gSW1wb3J0SGVscGVyLk1hcE5hbWVUb1RyYW5zbGF0aW9uKGpzb25UcmFuc2xhdGlvbiwgb3JpZ05hbWUpO1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEuZGVzY3JpcHRpb24uc291cmNlID0gYCR7SW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGpzb25EYXRhLCAnc291cmNlJyl9ICR7SW1wb3J0SGVscGVyLk1hcE5hbWVUb1BhZ2VTb3VyY2UoanNvblRyYW5zbGF0aW9uLCBvcmlnTmFtZSl9YDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFNwZWxsUGFyc2VyQmFzZSB9IGZyb20gJy4vU3BlbGxQYXJzZXJCYXNlJztcclxuaW1wb3J0IHsgSW1wb3J0SGVscGVyIH0gZnJvbSAnLi4vLi4vaGVscGVyL0ltcG9ydEhlbHBlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29tYmF0U3BlbGxQYXJzZXIgZXh0ZW5kcyBTcGVsbFBhcnNlckJhc2Uge1xyXG4gICAgUGFyc2UoanNvbkRhdGE6IG9iamVjdCwgZGF0YTogU2hhZG93cnVuLlNwZWxsLCBqc29uVHJhbnNsYXRpb24/OiBvYmplY3QpOiBTaGFkb3dydW4uU3BlbGwge1xyXG4gICAgICAgIGRhdGEgPSBzdXBlci5QYXJzZShqc29uRGF0YSwgZGF0YSwganNvblRyYW5zbGF0aW9uKTtcclxuXHJcbiAgICAgICAgbGV0IGRlc2NyaXB0b3IgPSBJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoanNvbkRhdGEsICdkZXNjcmlwdG9yJyk7XHJcbiAgICAgICAgLy8gQSBmZXcgc3BlbGxzIGhhdmUgYSBtaXNzaW5nIGRlc2NyaXB0b3IgaW5zdGVhZCBvZiBhbiBlbXB0eSBzdHJpbmcuXHJcbiAgICAgICAgLy8gVGhlIGZpZWxkIGlzIDxkZXNjcmlwdG9yIC8+IHJhdGhlciB0aGFuIDxkZXNjcmlwdG9yPjwvZGVzY3JpcHRvcj5cclxuICAgICAgICAvLyB3aGljaCBnZXRzIGltcG9ydGVkIGFzIHVuZGVmaW5lZCByYXRoZXIgdGhhbiBlbXB0eSBzdHJpbmcgKHNpZ2gpXHJcbiAgICAgICAgLy8gUmF0aGVyIHRoYW4gcmVmYWN0b3Igb3VyIEltcG9ydEhlbHBlciB3ZSdsbCBoYW5kbGUgaXQgaW4gaGVyZS5cclxuICAgICAgICBpZiAoZGVzY3JpcHRvciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGRlc2NyaXB0b3IgPSAnJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRhdGEuZGF0YS5jb21iYXQudHlwZSA9IGRlc2NyaXB0b3IuaW5jbHVkZXMoJ0luZGlyZWN0JykgPyAnaW5kaXJlY3QnIDogJ2RpcmVjdCc7XHJcbiAgICAgICAgaWYgKGRhdGEuZGF0YS5jb21iYXQudHlwZSA9PT0gJ2RpcmVjdCcpIHtcclxuICAgICAgICAgICAgZGF0YS5kYXRhLmFjdGlvbi5vcHBvc2VkLnR5cGUgPSAnZGVmZW5zZSc7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZGF0YS5kYXRhLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3BoeXNpY2FsJzpcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdGEuYWN0aW9uLm9wcG9zZWQuYXR0cmlidXRlID0gJ2JvZHknO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbWFuYSc6XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5kYXRhLmFjdGlvbi5vcHBvc2VkLmF0dHJpYnV0ZSA9ICd3aWxscG93ZXInO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YS5kYXRhLmNvbWJhdC50eXBlID09PSAnaW5kaXJlY3QnKSB7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS5hY3Rpb24ub3Bwb3NlZC50eXBlID0gJ2RlZmVuc2UnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgU3BlbGxQYXJzZXJCYXNlIH0gZnJvbSAnLi9TcGVsbFBhcnNlckJhc2UnO1xyXG5pbXBvcnQgeyBJbXBvcnRIZWxwZXIgfSBmcm9tICcuLi8uLi9oZWxwZXIvSW1wb3J0SGVscGVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBEZXRlY3Rpb25TcGVsbEltcG9ydGVyIGV4dGVuZHMgU3BlbGxQYXJzZXJCYXNlIHtcclxuICAgIFBhcnNlKGpzb25EYXRhOiBvYmplY3QsIGRhdGE6IFNoYWRvd3J1bi5TcGVsbCwganNvblRyYW5zbGF0aW9uPzogb2JqZWN0KTogU2hhZG93cnVuLlNwZWxsIHtcclxuICAgICAgICBkYXRhID0gc3VwZXIuUGFyc2UoanNvbkRhdGEsIGRhdGEsIGpzb25UcmFuc2xhdGlvbik7XHJcblxyXG4gICAgICAgIGxldCBkZXNjcmlwdG9yID0gSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGpzb25EYXRhLCAnZGVzY3JpcHRvcicpO1xyXG4gICAgICAgIC8vIEEgZmV3IHNwZWxscyBoYXZlIGEgbWlzc2luZyBkZXNjcmlwdG9yIGluc3RlYWQgb2YgYW4gZW1wdHkgc3RyaW5nLlxyXG4gICAgICAgIC8vIFRoZSBmaWVsZCBpcyA8ZGVzY3JpcHRvciAvPiByYXRoZXIgdGhhbiA8ZGVzY3JpcHRvcj48L2Rlc2NyaXB0b3I+XHJcbiAgICAgICAgLy8gd2hpY2ggZ2V0cyBpbXBvcnRlZCBhcyB1bmRlZmluZWQgcmF0aGVyIHRoYW4gZW1wdHkgc3RyaW5nIChzaWdoKVxyXG4gICAgICAgIC8vIFJhdGhlciB0aGFuIHJlZmFjdG9yIG91ciBJbXBvcnRIZWxwZXIgd2UnbGwgaGFuZGxlIGl0IGluIGhlcmUuXHJcbiAgICAgICAgaWYgKGRlc2NyaXB0b3IgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBkZXNjcmlwdG9yID0gJyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkYXRhLmRhdGEuZGV0ZWN0aW9uLnBhc3NpdmUgPSBkZXNjcmlwdG9yLmluY2x1ZGVzKCdQYXNzaXZlJyk7XHJcbiAgICAgICAgaWYgKCFkYXRhLmRhdGEuZGV0ZWN0aW9uLnBhc3NpdmUpIHtcclxuICAgICAgICAgICAgZGF0YS5kYXRhLmFjdGlvbi5vcHBvc2VkLnR5cGUgPSAnY3VzdG9tJztcclxuICAgICAgICAgICAgZGF0YS5kYXRhLmFjdGlvbi5vcHBvc2VkLmF0dHJpYnV0ZSA9ICd3aWxscG93ZXInO1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEuYWN0aW9uLm9wcG9zZWQuYXR0cmlidXRlMiA9ICdsb2dpYyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkYXRhLmRhdGEuZGV0ZWN0aW9uLmV4dGVuZGVkID0gZGVzY3JpcHRvci5pbmNsdWRlcygnRXh0ZW5kZWQnKTtcclxuXHJcbiAgICAgICAgaWYgKGRlc2NyaXB0b3IuaW5jbHVkZXMoJ1BzeWNoaWMnKSkge1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEuZGV0ZWN0aW9uLnR5cGUgPSAncHN5Y2hpYyc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkZXNjcmlwdG9yLmluY2x1ZGVzKCdEaXJlY3Rpb25hbCcpKSB7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS5kZXRlY3Rpb24udHlwZSA9ICdkaXJlY3Rpb25hbCc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkZXNjcmlwdG9yLmluY2x1ZGVzKCdBcmVhJykpIHtcclxuICAgICAgICAgICAgZGF0YS5kYXRhLmRldGVjdGlvbi50eXBlID0gJ2FyZWEnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgU3BlbGxQYXJzZXJCYXNlIH0gZnJvbSAnLi9TcGVsbFBhcnNlckJhc2UnO1xyXG5pbXBvcnQgeyBJbXBvcnRIZWxwZXIgfSBmcm9tICcuLi8uLi9oZWxwZXIvSW1wb3J0SGVscGVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBJbGx1c2lvblNwZWxsUGFyc2VyIGV4dGVuZHMgU3BlbGxQYXJzZXJCYXNlIHtcclxuICAgIFBhcnNlKGpzb25EYXRhOiBvYmplY3QsIGRhdGE6IFNoYWRvd3J1bi5TcGVsbCwganNvblRyYW5zbGF0aW9uPzogb2JqZWN0KTogU2hhZG93cnVuLlNwZWxsIHtcclxuICAgICAgICBkYXRhID0gc3VwZXIuUGFyc2UoanNvbkRhdGEsIGRhdGEsIGpzb25UcmFuc2xhdGlvbik7XHJcblxyXG4gICAgICAgIGxldCBkZXNjcmlwdG9yID0gSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGpzb25EYXRhLCAnZGVzY3JpcHRvcicpO1xyXG4gICAgICAgIC8vIEEgZmV3IHNwZWxscyBoYXZlIGEgbWlzc2luZyBkZXNjcmlwdG9yIGluc3RlYWQgb2YgYW4gZW1wdHkgc3RyaW5nLlxyXG4gICAgICAgIC8vIFRoZSBmaWVsZCBpcyA8ZGVzY3JpcHRvciAvPiByYXRoZXIgdGhhbiA8ZGVzY3JpcHRvcj48L2Rlc2NyaXB0b3I+XHJcbiAgICAgICAgLy8gd2hpY2ggZ2V0cyBpbXBvcnRlZCBhcyB1bmRlZmluZWQgcmF0aGVyIHRoYW4gZW1wdHkgc3RyaW5nIChzaWdoKVxyXG4gICAgICAgIC8vIFJhdGhlciB0aGFuIHJlZmFjdG9yIG91ciBJbXBvcnRIZWxwZXIgd2UnbGwgaGFuZGxlIGl0IGluIGhlcmUuXHJcbiAgICAgICAgaWYgKGRlc2NyaXB0b3IgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBkZXNjcmlwdG9yID0gJyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGF0YS5kYXRhLnR5cGUgPT09ICdtYW5hJykge1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEuYWN0aW9uLm9wcG9zZWQudHlwZSA9ICdjdXN0b20nO1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEuYWN0aW9uLm9wcG9zZWQuYXR0cmlidXRlID0gJ2xvZ2ljJztcclxuICAgICAgICAgICAgZGF0YS5kYXRhLmFjdGlvbi5vcHBvc2VkLmF0dHJpYnV0ZTIgPSAnd2lsbHBvd2VyJztcclxuICAgICAgICB9IGVsc2UgaWYgKGRhdGEuZGF0YS50eXBlID09PSAncGh5c2ljYWwnKSB7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS5hY3Rpb24ub3Bwb3NlZC50eXBlID0gJ2N1c3RvbSc7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS5hY3Rpb24ub3Bwb3NlZC5hdHRyaWJ1dGUgPSAnaW50dWl0aW9uJztcclxuICAgICAgICAgICAgZGF0YS5kYXRhLmFjdGlvbi5vcHBvc2VkLmF0dHJpYnV0ZTIgPSAnbG9naWMnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgU3BlbGxQYXJzZXJCYXNlIH0gZnJvbSAnLi9TcGVsbFBhcnNlckJhc2UnO1xyXG5pbXBvcnQgeyBJbXBvcnRIZWxwZXIgfSBmcm9tICcuLi8uLi9oZWxwZXIvSW1wb3J0SGVscGVyJztcclxuaW1wb3J0IFNwZWxsID0gU2hhZG93cnVuLlNwZWxsO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1hbmlwdWxhdGlvblNwZWxsUGFyc2VyIGV4dGVuZHMgU3BlbGxQYXJzZXJCYXNlIHtcclxuICAgIFBhcnNlKGpzb25EYXRhOiBvYmplY3QsIGRhdGE6IFNwZWxsLCBqc29uVHJhbnNsYXRpb24/OiBvYmplY3QpOiBTcGVsbCB7XHJcbiAgICAgICAgZGF0YSA9IHN1cGVyLlBhcnNlKGpzb25EYXRhLCBkYXRhLCBqc29uVHJhbnNsYXRpb24pO1xyXG5cclxuICAgICAgICBsZXQgZGVzY3JpcHRvciA9IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ2Rlc2NyaXB0b3InKTtcclxuICAgICAgICAvLyBBIGZldyBzcGVsbHMgaGF2ZSBhIG1pc3NpbmcgZGVzY3JpcHRvciBpbnN0ZWFkIG9mIGFuIGVtcHR5IHN0cmluZy5cclxuICAgICAgICAvLyBUaGUgZmllbGQgaXMgPGRlc2NyaXB0b3IgLz4gcmF0aGVyIHRoYW4gPGRlc2NyaXB0b3I+PC9kZXNjcmlwdG9yPlxyXG4gICAgICAgIC8vIHdoaWNoIGdldHMgaW1wb3J0ZWQgYXMgdW5kZWZpbmVkIHJhdGhlciB0aGFuIGVtcHR5IHN0cmluZyAoc2lnaClcclxuICAgICAgICAvLyBSYXRoZXIgdGhhbiByZWZhY3RvciBvdXIgSW1wb3J0SGVscGVyIHdlJ2xsIGhhbmRsZSBpdCBpbiBoZXJlLlxyXG4gICAgICAgIGlmIChkZXNjcmlwdG9yID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZGVzY3JpcHRvciA9ICcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGF0YS5kYXRhLm1hbmlwdWxhdGlvbi5lbnZpcm9ubWVudGFsID0gZGVzY3JpcHRvci5pbmNsdWRlcygnRW52aXJvbm1lbnRhbCcpO1xyXG4gICAgICAgIC8vIEdlbmVyYWxseSBubyByZXNpc3RhbmNlIHJvbGwuXHJcblxyXG4gICAgICAgIGRhdGEuZGF0YS5tYW5pcHVsYXRpb24ubWVudGFsID0gZGVzY3JpcHRvci5pbmNsdWRlcygnTWVudGFsJyk7XHJcbiAgICAgICAgaWYgKGRhdGEuZGF0YS5tYW5pcHVsYXRpb24ubWVudGFsKSB7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS5hY3Rpb24ub3Bwb3NlZC50eXBlID0gJ2N1c3RvbSc7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS5hY3Rpb24ub3Bwb3NlZC5hdHRyaWJ1dGUgPSAnbG9naWMnO1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEuYWN0aW9uLm9wcG9zZWQuYXR0cmlidXRlMiA9ICd3aWxscG93ZXInO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGF0YS5kYXRhLm1hbmlwdWxhdGlvbi5waHlzaWNhbCA9IGRlc2NyaXB0b3IuaW5jbHVkZXMoJ1BoeXNpY2FsJyk7XHJcbiAgICAgICAgaWYgKGRhdGEuZGF0YS5tYW5pcHVsYXRpb24ucGh5c2ljYWwpIHtcclxuICAgICAgICAgICAgZGF0YS5kYXRhLmFjdGlvbi5vcHBvc2VkLnR5cGUgPSAnY3VzdG9tJztcclxuICAgICAgICAgICAgZGF0YS5kYXRhLmFjdGlvbi5vcHBvc2VkLmF0dHJpYnV0ZSA9ICdib2R5JztcclxuICAgICAgICAgICAgZGF0YS5kYXRhLmFjdGlvbi5vcHBvc2VkLmF0dHJpYnV0ZTIgPSAnc3RyZW5ndGgnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkYXRhLmRhdGEubWFuaXB1bGF0aW9uLmRhbWFnaW5nID0gZGVzY3JpcHRvci5pbmNsdWRlcygnRGFtYWdpbmcnKTtcclxuICAgICAgICBpZiAoZGF0YS5kYXRhLm1hbmlwdWxhdGlvbi5kYW1hZ2luZykge1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEuYWN0aW9uLm9wcG9zZWQudHlwZSA9ICdzb2FrJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEltcG9ydEhlbHBlciB9IGZyb20gJy4uLy4uL2hlbHBlci9JbXBvcnRIZWxwZXInO1xyXG5pbXBvcnQgU3BlbGwgPSBTaGFkb3dydW4uU3BlbGw7XHJcbmltcG9ydCBTcGVsbENhdGVvZ3J5ID0gU2hhZG93cnVuLlNwZWxsQ2F0ZW9ncnk7XHJcbmltcG9ydCB7IEl0ZW1QYXJzZXJCYXNlIH0gZnJvbSAnLi4vaXRlbS9JdGVtUGFyc2VyQmFzZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgU3BlbGxQYXJzZXJCYXNlIGV4dGVuZHMgSXRlbVBhcnNlckJhc2U8U3BlbGw+IHtcclxuICAgIHB1YmxpYyBQYXJzZShqc29uRGF0YTogb2JqZWN0LCBkYXRhOiBTcGVsbCwganNvblRyYW5zbGF0aW9uPzogb2JqZWN0KTogU3BlbGwge1xyXG4gICAgICAgIGRhdGEubmFtZSA9IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ25hbWUnKTtcclxuXHJcbiAgICAgICAgZGF0YS5kYXRhLmRlc2NyaXB0aW9uLnNvdXJjZSA9IGAke0ltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ3NvdXJjZScpfSAke0ltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ3BhZ2UnKX1gO1xyXG4gICAgICAgIGRhdGEuZGF0YS5jYXRlZ29yeSA9IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ2NhdGVnb3J5JykudG9Mb3dlckNhc2UoKSBhcyBTcGVsbENhdGVvZ3J5O1xyXG5cclxuICAgICAgICBsZXQgZGFtYWdlID0gSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGpzb25EYXRhLCAnZGFtYWdlJyk7XHJcbiAgICAgICAgaWYgKGRhbWFnZSA9PT0gJ1AnKSB7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS5hY3Rpb24uZGFtYWdlLnR5cGUuYmFzZSA9ICdwaHlzaWNhbCc7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS5hY3Rpb24uZGFtYWdlLnR5cGUudmFsdWUgPSAncGh5c2ljYWwnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGFtYWdlID09PSAnUycpIHtcclxuICAgICAgICAgICAgZGF0YS5kYXRhLmFjdGlvbi5kYW1hZ2UudHlwZS5iYXNlID0gJ3N0dW4nO1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEuYWN0aW9uLmRhbWFnZS50eXBlLnZhbHVlID0gJ3N0dW4nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGR1cmF0aW9uID0gSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGpzb25EYXRhLCAnZHVyYXRpb24nKTtcclxuICAgICAgICBpZiAoZHVyYXRpb24gPT09ICdJJykge1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEuZHVyYXRpb24gPSAnaW5zdGFudCc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkdXJhdGlvbiA9PT0gJ1MnKSB7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS5kdXJhdGlvbiA9ICdzdXN0YWluZWQnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZHVyYXRpb24gPT09ICdQJykge1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEuZHVyYXRpb24gPSAncGVybWFuZW50JztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBkcmFpbiA9IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ2R2Jyk7XHJcbiAgICAgICAgaWYgKGRyYWluLmluY2x1ZGVzKCcrJykgfHwgZHJhaW4uaW5jbHVkZXMoJy0nKSkge1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEuZHJhaW4gPSBwYXJzZUludChkcmFpbi5zdWJzdHJpbmcoMSwgZHJhaW4ubGVuZ3RoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcmFuZ2UgPSBJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoanNvbkRhdGEsICdyYW5nZScpO1xyXG4gICAgICAgIGlmIChyYW5nZSA9PT0gJ1QnKSB7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS5yYW5nZSA9ICd0b3VjaCc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChyYW5nZSA9PT0gJ0xPUycpIHtcclxuICAgICAgICAgICAgZGF0YS5kYXRhLnJhbmdlID0gJ2xvcyc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChyYW5nZSA9PT0gJ0xPUyAoQSknKSB7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS5yYW5nZSA9ICdsb3NfYSc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdHlwZSA9IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ3R5cGUnKTtcclxuICAgICAgICBpZiAodHlwZSA9PT0gJ1AnKSB7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS50eXBlID0gJ3BoeXNpY2FsJztcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdNJykge1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEudHlwZSA9ICdtYW5hJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChqc29uVHJhbnNsYXRpb24pIHtcclxuICAgICAgICAgICAgY29uc3Qgb3JpZ05hbWUgPSBJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoanNvbkRhdGEsICduYW1lJyk7XHJcbiAgICAgICAgICAgIGRhdGEubmFtZSA9IEltcG9ydEhlbHBlci5NYXBOYW1lVG9UcmFuc2xhdGlvbihqc29uVHJhbnNsYXRpb24sIG9yaWdOYW1lKTtcclxuICAgICAgICAgICAgZGF0YS5kYXRhLmRlc2NyaXB0aW9uLnNvdXJjZSA9IGAke0ltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ3NvdXJjZScpfSAke0ltcG9ydEhlbHBlci5NYXBOYW1lVG9QYWdlU291cmNlKGpzb25UcmFuc2xhdGlvbiwgb3JpZ05hbWUpfWA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJbXBvcnRIZWxwZXIgfSBmcm9tICcuLi8uLi9oZWxwZXIvSW1wb3J0SGVscGVyJztcclxuaW1wb3J0IHsgVGVjaG5vbG9neUl0ZW1QYXJzZXJCYXNlIH0gZnJvbSAnLi4vaXRlbS9UZWNobm9sb2d5SXRlbVBhcnNlckJhc2UnO1xyXG5pbXBvcnQgQ3liZXJ3YXJlID0gU2hhZG93cnVuLkN5YmVyd2FyZTtcclxuaW1wb3J0IFdhcmUgPSBTaGFkb3dydW4uV2FyZTtcclxuXHJcbmV4cG9ydCBjbGFzcyBDeWJlcndhcmVQYXJzZXIgZXh0ZW5kcyBUZWNobm9sb2d5SXRlbVBhcnNlckJhc2U8V2FyZT4ge1xyXG4gICAgUGFyc2UoanNvbkRhdGE6IG9iamVjdCwgZGF0YTogV2FyZSwganNvblRyYW5zbGF0aW9uPzogb2JqZWN0KTogV2FyZSB7XHJcbiAgICAgICAgZGF0YSA9IHN1cGVyLlBhcnNlKGpzb25EYXRhLCBkYXRhLCBqc29uVHJhbnNsYXRpb24pO1xyXG5cclxuICAgICAgICBjb25zdCBlc3NlbmNlID0gSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGpzb25EYXRhLCAnZXNzJywgJzAnKS5tYXRjaCgvWzAtOV1cXC4/WzAtOV0qL2cpO1xyXG4gICAgICAgIGlmIChlc3NlbmNlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS5lc3NlbmNlID0gcGFyc2VGbG9hdChlc3NlbmNlWzBdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGNhcGFjaXR5ID0gSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGpzb25EYXRhLCAnY2FwYWNpdHknLCAnMCcpLm1hdGNoKC9bMC05XSsvZyk7XHJcbiAgICAgICAgaWYgKGNhcGFjaXR5ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS5jYXBhY2l0eSA9IHBhcnNlSW50KGNhcGFjaXR5WzBdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEltcG9ydEhlbHBlciB9IGZyb20gJy4uLy4uL2hlbHBlci9JbXBvcnRIZWxwZXInO1xyXG5pbXBvcnQgeyBXZWFwb25QYXJzZXJCYXNlIH0gZnJvbSAnLi9XZWFwb25QYXJzZXJCYXNlJztcclxuaW1wb3J0IEFjdG9yQXR0cmlidXRlID0gU2hhZG93cnVuLkFjdG9yQXR0cmlidXRlO1xyXG5pbXBvcnQgRGFtYWdlRGF0YSA9IFNoYWRvd3J1bi5EYW1hZ2VEYXRhO1xyXG5pbXBvcnQgRGFtYWdlVHlwZSA9IFNoYWRvd3J1bi5EYW1hZ2VUeXBlO1xyXG5pbXBvcnQgV2VhcG9uID0gU2hhZG93cnVuLldlYXBvbjtcclxuaW1wb3J0IHtEZWZhdWx0VmFsdWVzfSBmcm9tIFwiLi4vLi4vLi4vZGF0YVRlbXBsYXRlc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1lbGVlUGFyc2VyIGV4dGVuZHMgV2VhcG9uUGFyc2VyQmFzZSB7XHJcbiAgICBHZXREYW1hZ2UoanNvbkRhdGE6IG9iamVjdCk6IERhbWFnZURhdGEge1xyXG4gICAgICAgIGxldCBqc29uRGFtYWdlID0gSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGpzb25EYXRhLCAnZGFtYWdlJyk7XHJcbiAgICAgICAgbGV0IGRhbWFnZUNvZGU6IGFueSA9IGpzb25EYW1hZ2UubWF0Y2goLyhTVFIpKFsrLV0/KShbMS05XSopXFwpKFtQU10pL2cpPy5bMF07XHJcblxyXG4gICAgICAgIGlmIChkYW1hZ2VDb2RlID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIERlZmF1bHRWYWx1ZXMuZGFtYWdlRGF0YSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGRhbWFnZUJhc2UgPSAwO1xyXG4gICAgICAgIGxldCBkYW1hZ2VBcCA9IEltcG9ydEhlbHBlci5JbnRWYWx1ZShqc29uRGF0YSwgJ2FwJywgMCk7XHJcblxyXG4gICAgICAgIGxldCBzcGxpdERhbWFnZUNvZGUgPSBkYW1hZ2VDb2RlLnNwbGl0KCcpJyk7XHJcbiAgICAgICAgbGV0IGRhbWFnZVR5cGUgPSBzcGxpdERhbWFnZUNvZGVbMV0uaW5jbHVkZXMoJ1AnKSA/ICdwaHlzaWNhbCcgOiAnc3R1bic7XHJcblxyXG4gICAgICAgIGxldCBzcGxpdEJhc2VDb2RlID0gZGFtYWdlQ29kZS5pbmNsdWRlcygnKycpID8gc3BsaXREYW1hZ2VDb2RlWzBdLnNwbGl0KCcrJykgOiBzcGxpdERhbWFnZUNvZGVbMF0uc3BsaXQoJy0nKTtcclxuICAgICAgICBpZiAoc3BsaXREYW1hZ2VDb2RlWzBdLmluY2x1ZGVzKCcrJykgfHwgc3BsaXREYW1hZ2VDb2RlWzBdLmluY2x1ZGVzKCctJykpIHtcclxuICAgICAgICAgICAgZGFtYWdlQmFzZSA9IHBhcnNlSW50KHNwbGl0QmFzZUNvZGVbMV0sIDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgZGFtYWdlQXR0cmlidXRlID0gZGFtYWdlQ29kZS5pbmNsdWRlcygnU1RSJykgPyAnc3RyZW5ndGgnIDogJyc7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhcnRpYWxEYW1hZ2VEYXRhID0ge1xyXG4gICAgICAgICAgICB0eXBlOiB7XHJcbiAgICAgICAgICAgICAgICBiYXNlOiBkYW1hZ2VUeXBlIGFzIERhbWFnZVR5cGUsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogZGFtYWdlVHlwZSBhcyBEYW1hZ2VUeXBlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBiYXNlOiBkYW1hZ2VCYXNlLFxyXG4gICAgICAgICAgICB2YWx1ZTogZGFtYWdlQmFzZSxcclxuICAgICAgICAgICAgYXA6IHtcclxuICAgICAgICAgICAgICAgIGJhc2U6IGRhbWFnZUFwLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGRhbWFnZUFwLFxyXG4gICAgICAgICAgICAgICAgbW9kOiBbXSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYXR0cmlidXRlOiBkYW1hZ2VBdHRyaWJ1dGUgYXMgQWN0b3JBdHRyaWJ1dGUsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBEZWZhdWx0VmFsdWVzLmRhbWFnZURhdGEocGFydGlhbERhbWFnZURhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIFBhcnNlKGpzb25EYXRhOiBvYmplY3QsIGRhdGE6IFdlYXBvbiwganNvblRyYW5zbGF0aW9uPzogb2JqZWN0KTogV2VhcG9uIHtcclxuICAgICAgICBkYXRhID0gc3VwZXIuUGFyc2UoanNvbkRhdGEsIGRhdGEsIGpzb25UcmFuc2xhdGlvbik7XHJcblxyXG4gICAgICAgIGRhdGEuZGF0YS5tZWxlZS5yZWFjaCA9IEltcG9ydEhlbHBlci5JbnRWYWx1ZShqc29uRGF0YSwgJ3JlYWNoJyk7XHJcblxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEltcG9ydEhlbHBlciB9IGZyb20gJy4uLy4uL2hlbHBlci9JbXBvcnRIZWxwZXInO1xyXG5pbXBvcnQgeyBXZWFwb25QYXJzZXJCYXNlIH0gZnJvbSAnLi9XZWFwb25QYXJzZXJCYXNlJztcclxuaW1wb3J0IHsgQ29uc3RhbnRzIH0gZnJvbSAnLi4vLi4vaW1wb3J0ZXIvQ29uc3RhbnRzJztcclxuaW1wb3J0IERhbWFnZURhdGEgPSBTaGFkb3dydW4uRGFtYWdlRGF0YTtcclxuaW1wb3J0IERhbWFnZVR5cGUgPSBTaGFkb3dydW4uRGFtYWdlVHlwZTtcclxuaW1wb3J0IFdlYXBvbiA9IFNoYWRvd3J1bi5XZWFwb247XHJcbmltcG9ydCB7RGVmYXVsdFZhbHVlc30gZnJvbSBcIi4uLy4uLy4uL2RhdGFUZW1wbGF0ZXNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBSYW5nZWRQYXJzZXIgZXh0ZW5kcyBXZWFwb25QYXJzZXJCYXNlIHtcclxuICAgIHB1YmxpYyBHZXREYW1hZ2UoanNvbkRhdGE6IG9iamVjdCk6IERhbWFnZURhdGEge1xyXG4gICAgICAgIGxldCBqc29uRGFtYWdlID0gSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGpzb25EYXRhLCAnZGFtYWdlJyk7XHJcbiAgICAgICAgbGV0IGRhbWFnZUNvZGUgPSBqc29uRGFtYWdlLm1hdGNoKC9bMC05XStbUFNdL2cpPy5bMF07XHJcblxyXG4gICAgICAgIGlmIChkYW1hZ2VDb2RlID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIERlZmF1bHRWYWx1ZXMuZGFtYWdlRGF0YSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGRhbWFnZVR5cGUgPSBkYW1hZ2VDb2RlLmluY2x1ZGVzKCdQJykgPyAncGh5c2ljYWwnIDogJ3N0dW4nO1xyXG4gICAgICAgIGxldCBkYW1hZ2VBbW91bnQgPSBwYXJzZUludChkYW1hZ2VDb2RlLnJlcGxhY2UoZGFtYWdlVHlwZVswXS50b1VwcGVyQ2FzZSgpLCAnJykpO1xyXG4gICAgICAgIGxldCBkYW1hZ2VBcCA9IEltcG9ydEhlbHBlci5JbnRWYWx1ZShqc29uRGF0YSwgJ2FwJywgMCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhcnRpYWxEYW1hZ2VEYXRhID0ge1xyXG4gICAgICAgICAgICB0eXBlOiB7XHJcbiAgICAgICAgICAgICAgICBiYXNlOiBkYW1hZ2VUeXBlIGFzIERhbWFnZVR5cGUsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogZGFtYWdlVHlwZSBhcyBEYW1hZ2VUeXBlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBiYXNlOiBkYW1hZ2VBbW91bnQsXHJcbiAgICAgICAgICAgIHZhbHVlOiBkYW1hZ2VBbW91bnQsXHJcbiAgICAgICAgICAgIGFwOiB7XHJcbiAgICAgICAgICAgICAgICBiYXNlOiBkYW1hZ2VBcCxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBkYW1hZ2VBcCxcclxuICAgICAgICAgICAgICAgIG1vZDogW11cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gRGVmYXVsdFZhbHVlcy5kYW1hZ2VEYXRhKHBhcnRpYWxEYW1hZ2VEYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgR2V0QW1tbyh3ZWFwb25Kc29uOiBvYmplY3QpIHtcclxuICAgICAgICBsZXQganNvbkFtbW8gPSBJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUod2VhcG9uSnNvbiwgJ2FtbW8nKTtcclxuICAgICAgICBsZXQgbWF0Y2ggPSBqc29uQW1tby5tYXRjaCgvKFswLTldKykvZyk/LlswXTtcclxuICAgICAgICByZXR1cm4gbWF0Y2ggIT09IHVuZGVmaW5lZCA/IHBhcnNlSW50KG1hdGNoKSA6IDA7XHJcbiAgICB9XHJcblxyXG4gICAgUGFyc2UoanNvbkRhdGE6IG9iamVjdCwgZGF0YTogV2VhcG9uLCBqc29uVHJhbnNsYXRpb24/OiBvYmplY3QpOiBXZWFwb24ge1xyXG4gICAgICAgIGRhdGEgPSBzdXBlci5QYXJzZShqc29uRGF0YSwgZGF0YSwganNvblRyYW5zbGF0aW9uKTtcclxuXHJcbiAgICAgICAgZGF0YS5kYXRhLnJhbmdlLnJjLmJhc2UgPSBJbXBvcnRIZWxwZXIuSW50VmFsdWUoanNvbkRhdGEsICdyYycpO1xyXG4gICAgICAgIGRhdGEuZGF0YS5yYW5nZS5yYy52YWx1ZSA9IEltcG9ydEhlbHBlci5JbnRWYWx1ZShqc29uRGF0YSwgJ3JjJyk7XHJcblxyXG4gICAgICAgIGlmIChqc29uRGF0YS5oYXNPd25Qcm9wZXJ0eSgncmFuZ2UnKSkge1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEucmFuZ2UucmFuZ2VzID0gQ29uc3RhbnRzLldFQVBPTl9SQU5HRVNbSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGpzb25EYXRhLCAncmFuZ2UnKV07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZGF0YS5kYXRhLnJhbmdlLnJhbmdlcyA9IENvbnN0YW50cy5XRUFQT05fUkFOR0VTW0ltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ2NhdGVnb3J5JyldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGF0YS5kYXRhLmFtbW8uY3VycmVudC52YWx1ZSA9IHRoaXMuR2V0QW1tbyhqc29uRGF0YSk7XHJcbiAgICAgICAgZGF0YS5kYXRhLmFtbW8uY3VycmVudC5tYXggPSB0aGlzLkdldEFtbW8oanNvbkRhdGEpO1xyXG5cclxuICAgICAgICBkYXRhLmRhdGEucmFuZ2UubW9kZXMuc2luZ2xlX3Nob3QgPSBJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUoanNvbkRhdGEsICdtb2RlJykuaW5jbHVkZXMoJ1NTJyk7XHJcbiAgICAgICAgZGF0YS5kYXRhLnJhbmdlLm1vZGVzLnNlbWlfYXV0byA9IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ21vZGUnKS5pbmNsdWRlcygnU0EnKTtcclxuICAgICAgICBkYXRhLmRhdGEucmFuZ2UubW9kZXMuYnVyc3RfZmlyZSA9IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ21vZGUnKS5pbmNsdWRlcygnQkYnKTtcclxuICAgICAgICBkYXRhLmRhdGEucmFuZ2UubW9kZXMuZnVsbF9hdXRvID0gSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGpzb25EYXRhLCAnbW9kZScpLmluY2x1ZGVzKCdGQScpO1xyXG5cclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJbXBvcnRIZWxwZXIgfSBmcm9tICcuLi8uLi9oZWxwZXIvSW1wb3J0SGVscGVyJztcclxuaW1wb3J0IHsgV2VhcG9uUGFyc2VyQmFzZSB9IGZyb20gJy4vV2VhcG9uUGFyc2VyQmFzZSc7XHJcbmltcG9ydCB7IENvbnN0YW50cyB9IGZyb20gJy4uLy4uL2ltcG9ydGVyL0NvbnN0YW50cyc7XHJcbmltcG9ydCBCbGFzdERhdGEgPSBTaGFkb3dydW4uQmxhc3REYXRhO1xyXG5pbXBvcnQgQWN0b3JBdHRyaWJ1dGUgPSBTaGFkb3dydW4uQWN0b3JBdHRyaWJ1dGU7XHJcbmltcG9ydCBEYW1hZ2VEYXRhID0gU2hhZG93cnVuLkRhbWFnZURhdGE7XHJcbmltcG9ydCBEYW1hZ2VUeXBlID0gU2hhZG93cnVuLkRhbWFnZVR5cGU7XHJcbmltcG9ydCBXZWFwb24gPSBTaGFkb3dydW4uV2VhcG9uO1xyXG5pbXBvcnQge0RlZmF1bHRWYWx1ZXN9IGZyb20gXCIuLi8uLi8uLi9kYXRhVGVtcGxhdGVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVGhyb3duUGFyc2VyIGV4dGVuZHMgV2VhcG9uUGFyc2VyQmFzZSB7XHJcbiAgICBwdWJsaWMgR2V0RGFtYWdlKGpzb25EYXRhOiBvYmplY3QpOiBEYW1hZ2VEYXRhIHtcclxuICAgICAgICBsZXQganNvbkRhbWFnZSA9IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ2RhbWFnZScpO1xyXG5cclxuICAgICAgICBsZXQgZGFtYWdlQW1vdW50ID0gMDtcclxuICAgICAgICBsZXQgZGFtYWdlVHlwZSA9ICdwaHlzaWNhbCc7XHJcbiAgICAgICAgbGV0IGRhbWFnZUF0dHJpYnV0ZSA9ICcnO1xyXG5cclxuICAgICAgICAvL1NUUiBzY2FsaW5nIHdlYXBvbnMgbGlrZSB0aGUgYm9vbWVyYW5nXHJcbiAgICAgICAgaWYgKGpzb25EYW1hZ2UuaW5jbHVkZXMoJ1NUUicpKSB7XHJcbiAgICAgICAgICAgIGRhbWFnZUF0dHJpYnV0ZSA9ICdzdHJlbmd0aCc7XHJcblxyXG4gICAgICAgICAgICBsZXQgZGFtYWdlTWF0Y2ggPSBqc29uRGFtYWdlLm1hdGNoKC8oKFNUUikoWystXSlbMC05XVxcKVtQU10pL2cpPy5bMF07XHJcbiAgICAgICAgICAgIGlmIChkYW1hZ2VNYXRjaCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYW1vdW50TWF0Y2ggPSBkYW1hZ2VNYXRjaC5tYXRjaCgvLT9bMC05XSsvZyk/LlswXTtcclxuICAgICAgICAgICAgICAgIGRhbWFnZUFtb3VudCA9IGFtb3VudE1hdGNoICE9PSB1bmRlZmluZWQgPyBwYXJzZUludChhbW91bnRNYXRjaCkgOiAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IGRhbWFnZU1hdGNoID0ganNvbkRhbWFnZS5tYXRjaCgvKFswLTldK1tQU10pL2cpPy5bMF07XHJcblxyXG4gICAgICAgICAgICBpZiAoZGFtYWdlTWF0Y2ggIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGFtb3VudE1hdGNoID0gZGFtYWdlTWF0Y2gubWF0Y2goL1swLTldKy9nKT8uWzBdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFtb3VudE1hdGNoICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBkYW1hZ2VBbW91bnQgPSBwYXJzZUludChhbW91bnRNYXRjaCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0aWFsRGFtYWdlRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U6ICdwaHlzaWNhbCcgYXMgRGFtYWdlVHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdwaHlzaWNhbCcgYXMgRGFtYWdlVHlwZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBEZWZhdWx0VmFsdWVzLmRhbWFnZURhdGEocGFydGlhbERhbWFnZURhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhbWFnZVR5cGUgPSBqc29uRGFtYWdlLmluY2x1ZGVzKCdQJykgPyAncGh5c2ljYWwnIDogJ3N0dW4nO1xyXG5cclxuICAgICAgICBsZXQgZGFtYWdlQXAgPSBJbXBvcnRIZWxwZXIuSW50VmFsdWUoanNvbkRhdGEsICdhcCcsIDApO1xyXG5cclxuICAgICAgICBjb25zdCBwYXJ0aWFsRGFtYWdlRGF0YSA9IHtcclxuICAgICAgICAgICAgdHlwZToge1xyXG4gICAgICAgICAgICAgICAgYmFzZTogZGFtYWdlVHlwZSBhcyBEYW1hZ2VUeXBlLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGRhbWFnZVR5cGUgYXMgRGFtYWdlVHlwZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYmFzZTogZGFtYWdlQW1vdW50LFxyXG4gICAgICAgICAgICB2YWx1ZTogZGFtYWdlQW1vdW50LFxyXG4gICAgICAgICAgICBhcDoge1xyXG4gICAgICAgICAgICAgICAgYmFzZTogZGFtYWdlQXAsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogZGFtYWdlQXAsXHJcbiAgICAgICAgICAgICAgICBtb2Q6IFtdLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhdHRyaWJ1dGU6IGRhbWFnZUF0dHJpYnV0ZSBhcyBBY3RvckF0dHJpYnV0ZSxcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIERlZmF1bHRWYWx1ZXMuZGFtYWdlRGF0YShwYXJ0aWFsRGFtYWdlRGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIEdldEJsYXN0KGpzb25EYXRhOiBvYmplY3QsIGRhdGE6IFdlYXBvbik6IEJsYXN0RGF0YSB7XHJcbiAgICAgICAgbGV0IGJsYXN0RGF0YTogQmxhc3REYXRhID0ge1xyXG4gICAgICAgICAgICByYWRpdXM6IDAsXHJcbiAgICAgICAgICAgIGRyb3BvZmY6IDAsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGV0IGJsYXN0Q29kZSA9IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ2RhbWFnZScpO1xyXG5cclxuICAgICAgICBsZXQgcmFkaXVzTWF0Y2ggPSBibGFzdENvZGUubWF0Y2goLyhbMC05XSttKS8pPy5bMF07XHJcbiAgICAgICAgaWYgKHJhZGl1c01hdGNoICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmFkaXVzTWF0Y2ggPSByYWRpdXNNYXRjaC5tYXRjaCgvWzAtOV0rLyk/LlswXTtcclxuICAgICAgICAgICAgaWYgKHJhZGl1c01hdGNoICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGJsYXN0RGF0YS5yYWRpdXMgPSBwYXJzZUludChyYWRpdXNNYXRjaCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBkcm9wb2ZmTWF0Y2ggPSBibGFzdENvZGUubWF0Y2goLygtWzAtOV0rXFwvbSkvKT8uWzBdO1xyXG4gICAgICAgIGlmIChkcm9wb2ZmTWF0Y2ggIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBkcm9wb2ZmTWF0Y2ggPSBkcm9wb2ZmTWF0Y2gubWF0Y2goLy1bMC05XSsvKT8uWzBdO1xyXG4gICAgICAgICAgICBpZiAoZHJvcG9mZk1hdGNoICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGJsYXN0RGF0YS5kcm9wb2ZmID0gcGFyc2VJbnQoZHJvcG9mZk1hdGNoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGJsYXN0RGF0YS5kcm9wb2ZmICYmICFibGFzdERhdGEucmFkaXVzKSB7XHJcbiAgICAgICAgICAgIGJsYXN0RGF0YS5yYWRpdXMgPSAtKGRhdGEuZGF0YS5hY3Rpb24uZGFtYWdlLmJhc2UgLyBibGFzdERhdGEuZHJvcG9mZik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYmxhc3REYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIFBhcnNlKGpzb25EYXRhOiBvYmplY3QsIGRhdGE6IFdlYXBvbiwganNvblRyYW5zbGF0aW9uPzogb2JqZWN0KTogV2VhcG9uIHtcclxuICAgICAgICBkYXRhID0gc3VwZXIuUGFyc2UoanNvbkRhdGEsIGRhdGEsIGpzb25UcmFuc2xhdGlvbik7XHJcblxyXG4gICAgICAgIGlmIChqc29uRGF0YS5oYXNPd25Qcm9wZXJ0eSgncmFuZ2UnKSkge1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEudGhyb3duLnJhbmdlcyA9IENvbnN0YW50cy5XRUFQT05fUkFOR0VTW0ltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ3JhbmdlJyldO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRhdGEuZGF0YS50aHJvd24ucmFuZ2VzID0gQ29uc3RhbnRzLldFQVBPTl9SQU5HRVNbSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKGpzb25EYXRhLCAnY2F0ZWdvcnknKV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkYXRhLmRhdGEudGhyb3duLmJsYXN0ID0gdGhpcy5HZXRCbGFzdChqc29uRGF0YSwgZGF0YSk7XHJcblxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEltcG9ydEhlbHBlciB9IGZyb20gJy4uLy4uL2hlbHBlci9JbXBvcnRIZWxwZXInO1xyXG5pbXBvcnQgeyBDb25zdGFudHMgfSBmcm9tICcuLi8uLi9pbXBvcnRlci9Db25zdGFudHMnO1xyXG5pbXBvcnQgRGFtYWdlRGF0YSA9IFNoYWRvd3J1bi5EYW1hZ2VEYXRhO1xyXG5pbXBvcnQgV2VhcG9uID0gU2hhZG93cnVuLldlYXBvbjtcclxuaW1wb3J0IFdlYXBvbkNhdGVnb3J5ID0gU2hhZG93cnVuLldlYXBvbkNhdGVnb3J5O1xyXG5pbXBvcnQgU2tpbGxOYW1lID0gU2hhZG93cnVuLlNraWxsTmFtZTtcclxuaW1wb3J0IHsgVGVjaG5vbG9neUl0ZW1QYXJzZXJCYXNlIH0gZnJvbSAnLi4vaXRlbS9UZWNobm9sb2d5SXRlbVBhcnNlckJhc2UnO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFdlYXBvblBhcnNlckJhc2UgZXh0ZW5kcyBUZWNobm9sb2d5SXRlbVBhcnNlckJhc2U8V2VhcG9uPiB7XHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgR2V0RGFtYWdlKGpzb25EYXRhOiBvYmplY3QpOiBEYW1hZ2VEYXRhO1xyXG5cclxuICAgIHByb3RlY3RlZCBHZXRTa2lsbCh3ZWFwb25Kc29uOiBvYmplY3QpOiBTa2lsbE5hbWUge1xyXG4gICAgICAgIGlmICh3ZWFwb25Kc29uLmhhc093blByb3BlcnR5KCd1c2Vza2lsbCcpKSB7XHJcbiAgICAgICAgICAgIGxldCBqc29uU2tpbGwgPSBJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUod2VhcG9uSnNvbiwgJ3VzZXNraWxsJyk7XHJcbiAgICAgICAgICAgIGlmIChDb25zdGFudHMuTUFQX0NBVEVHT1JZX1RPX1NLSUxMLmhhc093blByb3BlcnR5KGpzb25Ta2lsbCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBDb25zdGFudHMuTUFQX0NBVEVHT1JZX1RPX1NLSUxMW2pzb25Ta2lsbF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGpzb25Ta2lsbC5yZXBsYWNlKC9bXFxzXFwtXS9nLCAnXycpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IGNhdGVnb3J5ID0gSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKHdlYXBvbkpzb24sICdjYXRlZ29yeScpO1xyXG4gICAgICAgICAgICBpZiAoQ29uc3RhbnRzLk1BUF9DQVRFR09SWV9UT19TS0lMTC5oYXNPd25Qcm9wZXJ0eShjYXRlZ29yeSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBDb25zdGFudHMuTUFQX0NBVEVHT1JZX1RPX1NLSUxMW2NhdGVnb3J5XTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IHR5cGUgPSBJbXBvcnRIZWxwZXIuU3RyaW5nVmFsdWUod2VhcG9uSnNvbiwgJ3R5cGUnKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHlwZSA9PT0gJ3JhbmdlZCcgPyAnZXhvdGljX3JhbmdlJyA6ICdleG90aWNfbWVsZWUnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIEdldFdlYXBvblR5cGUod2VhcG9uSnNvbjogb2JqZWN0KTogV2VhcG9uQ2F0ZWdvcnkge1xyXG4gICAgICAgIGxldCB0eXBlID0gSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKHdlYXBvbkpzb24sICd0eXBlJyk7XHJcbiAgICAgICAgLy9tZWxlZSBpcyB0aGUgbGVhc3Qgc3BlY2lmaWMsIGFsbCBtZWxlZSBlbnRyaWVzIGFyZSBhY2N1cmF0ZVxyXG4gICAgICAgIGlmICh0eXBlID09PSAnTWVsZWUnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnbWVsZWUnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHNraWxsIHRha2VzIHByaW9yaXRpZXMgb3ZlciBjYXRlZ29yeVxyXG4gICAgICAgICAgICBpZiAod2VhcG9uSnNvbi5oYXNPd25Qcm9wZXJ0eSgndXNlc2tpbGwnKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNraWxsID0gSW1wb3J0SGVscGVyLlN0cmluZ1ZhbHVlKHdlYXBvbkpzb24sICd1c2Vza2lsbCcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNraWxsID09PSAnVGhyb3dpbmcgV2VhcG9ucycpIHJldHVybiAndGhyb3duJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gY2F0ZWdvcnkgaXMgdGhlIGZhbGxiYWNrXHJcbiAgICAgICAgICAgIGxldCBjYXRlZ29yeSA9IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZSh3ZWFwb25Kc29uLCAnY2F0ZWdvcnknKTtcclxuICAgICAgICAgICAgaWYgKGNhdGVnb3J5ID09PSAnVGhyb3dpbmcgV2VhcG9ucycpIHJldHVybiAndGhyb3duJztcclxuICAgICAgICAgICAgLy8gcmFuZ2VkIGlzIGV2ZXJ5dGhpbmcgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gJ3JhbmdlJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIFBhcnNlKGpzb25EYXRhOiBvYmplY3QsIGRhdGE6IFdlYXBvbiwganNvblRyYW5zbGF0aW9uPzogb2JqZWN0KTogV2VhcG9uIHtcclxuICAgICAgICBkYXRhID0gc3VwZXIuUGFyc2UoanNvbkRhdGEsIGRhdGEsIGpzb25UcmFuc2xhdGlvbik7XHJcblxyXG4gICAgICAgIGxldCBjYXRlZ29yeSA9IEltcG9ydEhlbHBlci5TdHJpbmdWYWx1ZShqc29uRGF0YSwgJ2NhdGVnb3J5Jyk7XHJcbiAgICAgICAgLy8gQSBzaW5nbGUgaXRlbSBkb2VzIG5vdCBtZWV0IG5vcm1hbCBydWxlcywgdGhhbmtzIENodW1tZXIhXHJcbiAgICAgICAgLy8gVE9ETzogQ2hlY2sgdGhlc2UgcnVsZXMgYWZ0ZXIgbG9jYWxpemF0aW9uIHVzaW5nIGEgZ2VuZXJpYywgbm9uLWVuZ2xpc2ggYXBwcm9hY2guXHJcbiAgICAgICAgaWYgKGNhdGVnb3J5ID09PSAnSG9sZC1vdXRzJykge1xyXG4gICAgICAgICAgICBjYXRlZ29yeSA9ICdIb2xkb3V0cyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkYXRhLmRhdGEuY2F0ZWdvcnkgPSBXZWFwb25QYXJzZXJCYXNlLkdldFdlYXBvblR5cGUoanNvbkRhdGEpO1xyXG4gICAgICAgIGRhdGEuZGF0YS5zdWJjYXRlZ29yeSA9IGNhdGVnb3J5LnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICAgIGRhdGEuZGF0YS5hY3Rpb24uc2tpbGwgPSB0aGlzLkdldFNraWxsKGpzb25EYXRhKTtcclxuICAgICAgICBkYXRhLmRhdGEuYWN0aW9uLmRhbWFnZSA9IHRoaXMuR2V0RGFtYWdlKGpzb25EYXRhKTtcclxuXHJcbiAgICAgICAgZGF0YS5kYXRhLmFjdGlvbi5saW1pdC52YWx1ZSA9IEltcG9ydEhlbHBlci5JbnRWYWx1ZShqc29uRGF0YSwgJ2FjY3VyYWN5Jyk7XHJcbiAgICAgICAgZGF0YS5kYXRhLmFjdGlvbi5saW1pdC5iYXNlID0gSW1wb3J0SGVscGVyLkludFZhbHVlKGpzb25EYXRhLCAnYWNjdXJhY3knKTtcclxuXHJcbiAgICAgICAgZGF0YS5kYXRhLnRlY2hub2xvZ3kuY29uY2VhbC5iYXNlID0gSW1wb3J0SGVscGVyLkludFZhbHVlKGpzb25EYXRhLCAnY29uY2VhbCcpO1xyXG5cclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBIZWxwZXJzIH0gZnJvbSAnLi4vaGVscGVycyc7XHJcbmltcG9ydCBEZXZpY2VEYXRhID0gU2hhZG93cnVuLkRldmljZURhdGE7XHJcbmltcG9ydCB7IFNSNUl0ZW0gfSBmcm9tICcuL1NSNUl0ZW0nO1xyXG5pbXBvcnQgQW1tb0RhdGEgPSBTaGFkb3dydW4uQW1tb0RhdGE7XHJcblxyXG5leHBvcnQgY29uc3QgQ2hhdERhdGEgPSB7XHJcbiAgICBhY3Rpb246IChkYXRhLCBsYWJlbHMsIHByb3BzKSA9PiB7XHJcbiAgICAgICAgaWYgKGRhdGEuYWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxhYmVsU3RyaW5nTGlzdDogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICAgICAgaWYgKGRhdGEuYWN0aW9uLnNraWxsKSB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbFN0cmluZ0xpc3QucHVzaChIZWxwZXJzLmxhYmVsKGRhdGEuYWN0aW9uLnNraWxsKSk7XHJcbiAgICAgICAgICAgICAgICBsYWJlbFN0cmluZ0xpc3QucHVzaChIZWxwZXJzLmxhYmVsKGRhdGEuYWN0aW9uLmF0dHJpYnV0ZSkpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEuYWN0aW9uLmF0dHJpYnV0ZTIpIHtcclxuICAgICAgICAgICAgICAgIGxhYmVsU3RyaW5nTGlzdC5wdXNoKEhlbHBlcnMubGFiZWwoZGF0YS5hY3Rpb24uYXR0cmlidXRlKSk7XHJcbiAgICAgICAgICAgICAgICBsYWJlbFN0cmluZ0xpc3QucHVzaChIZWxwZXJzLmxhYmVsKGRhdGEuYWN0aW9uLmF0dHJpYnV0ZTIpKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLmFjdGlvbi5hdHRyaWJ1dGUpIHtcclxuICAgICAgICAgICAgICAgIGxhYmVsU3RyaW5nTGlzdC5wdXNoKEhlbHBlcnMubGFiZWwoZGF0YS5hY3Rpb24uYXR0cmlidXRlKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRhdGEuYWN0aW9uLm1vZCkge1xyXG4gICAgICAgICAgICAgICAgbGFiZWxTdHJpbmdMaXN0LnB1c2goYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdTUjUuSXRlbU1vZCcpfSAoJHtkYXRhLmFjdGlvbi5tb2R9KWApO1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyB3aGVuIGFsbCBtb2RzIGFyZSBtb2RsaXN0c1xyXG4gICAgICAgICAgICAgICAgLy8gT2JqZWN0LmVudHJpZXMoZGF0YS5hY3Rpb24ubW9kKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgbGFiZWxTdHJpbmdMaXN0LnB1c2goYCR7Z2FtZS5pMThuLmxvY2FsaXplKGtleSl9ICgke3ZhbHVlfSlgKVxyXG4gICAgICAgICAgICAgICAgLy8gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobGFiZWxTdHJpbmdMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgbGFiZWxzLnJvbGwgPSBsYWJlbFN0cmluZ0xpc3Quam9pbignICsgJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChkYXRhLmFjdGlvbi5vcHBvc2VkLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgb3Bwb3NlZCB9ID0gZGF0YS5hY3Rpb247XHJcbiAgICAgICAgICAgICAgICBpZiAob3Bwb3NlZC50eXBlICE9PSAnY3VzdG9tJykgbGFiZWxzLm9wcG9zZWRSb2xsID0gYHZzLiAke0hlbHBlcnMubGFiZWwob3Bwb3NlZC50eXBlKX1gO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAob3Bwb3NlZC5za2lsbCkgbGFiZWxzLm9wcG9zZWRSb2xsID0gYHZzLiAke0hlbHBlcnMubGFiZWwob3Bwb3NlZC5za2lsbCl9KyR7SGVscGVycy5sYWJlbChvcHBvc2VkLmF0dHJpYnV0ZSl9YDtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9wcG9zZWQuYXR0cmlidXRlMikgbGFiZWxzLm9wcG9zZWRSb2xsID0gYHZzLiAke0hlbHBlcnMubGFiZWwob3Bwb3NlZC5hdHRyaWJ1dGUpfSske0hlbHBlcnMubGFiZWwob3Bwb3NlZC5hdHRyaWJ1dGUyKX1gO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAob3Bwb3NlZC5hdHRyaWJ1dGUpIGxhYmVscy5vcHBvc2VkUm9sbCA9IGB2cy4gJHtIZWxwZXJzLmxhYmVsKG9wcG9zZWQuYXR0cmlidXRlKX1gO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBzZXR1cCBhY3Rpb24gcHJvcHNcclxuICAgICAgICAgICAgLy8gZ28gaW4gb3JkZXIgb2YgXCJMaW1pdC9BY2N1cmFjeVwiIFwiRGFtYWdlXCIgXCJBUFwiXHJcbiAgICAgICAgICAgIC8vIGRvbid0IGFkZCBhY3Rpb24gdHlwZSBpZiBzZXQgdG8gJ3Zhcmllcycgb3IgJ25vbmUnIGFzIHRoYXQncyBwcmV0dHkgbXVjaCB1c2VsZXNzIGluZm9cclxuICAgICAgICAgICAgaWYgKGRhdGEuYWN0aW9uLnR5cGUgIT09ICcnICYmIGRhdGEuYWN0aW9uLnR5cGUgIT09ICd2YXJpZXMnICYmIGRhdGEuYWN0aW9uLnR5cGUgIT09ICdub25lJykge1xyXG4gICAgICAgICAgICAgICAgcHJvcHMucHVzaChgJHtIZWxwZXJzLmxhYmVsKGRhdGEuYWN0aW9uLnR5cGUpfSBBY3Rpb25gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGF0YS5hY3Rpb24ubGltaXQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgbGltaXQgfSA9IGRhdGEuYWN0aW9uO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlID0gbGltaXQuYXR0cmlidXRlID8gYCR7Z2FtZS5pMThuLmxvY2FsaXplKENPTkZJRy5TUjUubGltaXRzW2xpbWl0LmF0dHJpYnV0ZV0pfWAgOiAnJztcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbWl0VmFsID0gbGltaXQudmFsdWUgPyBsaW1pdC52YWx1ZSA6ICcnO1xyXG4gICAgICAgICAgICAgICAgbGV0IGxpbWl0U3RyID0gJyc7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGltaXRTdHIgKz0gYXR0cmlidXRlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGxpbWl0VmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW1pdFN0ciArPSAnICsgJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbGltaXRTdHIgKz0gbGltaXRWYWw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGxpbWl0U3RyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcHMucHVzaChgTGltaXQgJHtsaW1pdFN0cn1gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGF0YS5hY3Rpb24uZGFtYWdlLnR5cGUudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgZGFtYWdlIH0gPSBkYXRhLmFjdGlvbjtcclxuICAgICAgICAgICAgICAgIGxldCBkYW1hZ2VTdHJpbmcgPSAnJztcclxuICAgICAgICAgICAgICAgIGxldCBlbGVtZW50U3RyaW5nID0gJyc7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGUgPSBkYW1hZ2UuYXR0cmlidXRlID8gYCR7Z2FtZS5pMThuLmxvY2FsaXplKENPTkZJRy5TUjUuYXR0cmlidXRlc1tkYW1hZ2UuYXR0cmlidXRlXSl9ICsgYCA6ICcnO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhbWFnZS52YWx1ZSB8fCBhdHRyaWJ1dGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlID0gZGFtYWdlLnR5cGUudmFsdWUgPyBkYW1hZ2UudHlwZS52YWx1ZS50b1VwcGVyQ2FzZSgpLmNoYXJBdCgwKSA6ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhbWFnZVN0cmluZyA9IGBEViAke2F0dHJpYnV0ZX0ke2RhbWFnZS52YWx1ZX0ke3R5cGV9YDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChkYW1hZ2UuZWxlbWVudC52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHdlIGhhdmUgYSBkYW1hZ2UgdmFsdWUgYW5kIGFyZSBlbGVjdHJpYywgZm9sbG93IHRoZSBjb252ZW50aW9uIG9mIChlKSBhZnRlclxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYW1hZ2UudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhbWFnZS5lbGVtZW50LnZhbHVlID09PSAnZWxlY3RyaWNpdHknKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYW1hZ2VTdHJpbmcgKz0gJyAoZSknO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudFN0cmluZyA9IEhlbHBlcnMubGFiZWwoZGFtYWdlLmVsZW1lbnQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudFN0cmluZyA9IEhlbHBlcnMubGFiZWwoZGFtYWdlLmVsZW1lbnQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChkYW1hZ2VTdHJpbmcpIHByb3BzLnB1c2goZGFtYWdlU3RyaW5nKTtcclxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50U3RyaW5nKSBwcm9wcy5wdXNoKGVsZW1lbnRTdHJpbmcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhbWFnZS5hcCAmJiBkYW1hZ2UuYXAudmFsdWUpIHByb3BzLnB1c2goYEFQICR7ZGFtYWdlLmFwLnZhbHVlfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHNpbjogKGRhdGEsIGxhYmVscywgcHJvcHMpID0+IHtcclxuICAgICAgICBwcm9wcy5wdXNoKGBSYXRpbmcgJHtkYXRhLnRlY2hub2xvZ3kucmF0aW5nfWApO1xyXG4gICAgICAgIGRhdGEubGljZW5zZXMuZm9yRWFjaCgobGljZW5zZSkgPT4ge1xyXG4gICAgICAgICAgICBwcm9wcy5wdXNoKGAke2xpY2Vuc2UubmFtZX0gUiR7bGljZW5zZS5ydGd9YCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGNvbnRhY3Q6IChkYXRhLCBsYWJlbHMsIHByb3BzKSA9PiB7XHJcbiAgICAgICAgcHJvcHMucHVzaChkYXRhLnR5cGUpO1xyXG4gICAgICAgIHByb3BzLnB1c2goYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdTUjUuQ29ubmVjdGlvbicpfSAke2RhdGEuY29ubmVjdGlvbn1gKTtcclxuICAgICAgICBwcm9wcy5wdXNoKGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkxveWFsdHknKX0gJHtkYXRhLmxveWFsdHl9YCk7XHJcbiAgICAgICAgaWYgKGRhdGEuYmxhY2ttYWlsKSB7XHJcbiAgICAgICAgICAgIHByb3BzLnB1c2goYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdTUjUuQmxhY2ttYWlsJyl9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkYXRhLmZhbWlseSkge1xyXG4gICAgICAgICAgICBwcm9wcy5wdXNoKGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkZhbWlseScpKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGxpZmVzdHlsZTogKGRhdGEsIGxhYmVscywgcHJvcHMpID0+IHtcclxuICAgICAgICBwcm9wcy5wdXNoKEhlbHBlcnMubGFiZWwoZGF0YS50eXBlKSk7XHJcbiAgICAgICAgaWYgKGRhdGEuY29zdCkgcHJvcHMucHVzaChgwqUke2RhdGEuY29zdH1gKTtcclxuICAgICAgICBpZiAoZGF0YS5jb21mb3J0cykgcHJvcHMucHVzaChgQ29tZm9ydHMgJHtkYXRhLmNvbWZvcnRzfWApO1xyXG4gICAgICAgIGlmIChkYXRhLnNlY3VyaXR5KSBwcm9wcy5wdXNoKGBTZWN1cml0eSAke2RhdGEuc2VjdXJpdHl9YCk7XHJcbiAgICAgICAgaWYgKGRhdGEubmVpZ2hib3Job29kKSBwcm9wcy5wdXNoKGBOZWlnaGJvcmhvb2QgJHtkYXRhLm5laWdoYm9yaG9vZH1gKTtcclxuICAgICAgICBpZiAoZGF0YS5ndWVzdHMpIHByb3BzLnB1c2goYEd1ZXN0cyAke2RhdGEuZ3Vlc3RzfWApO1xyXG4gICAgfSxcclxuXHJcbiAgICBhZGVwdF9wb3dlcjogKGRhdGEsIGxhYmVscywgcHJvcHMpID0+IHtcclxuICAgICAgICBDaGF0RGF0YS5hY3Rpb24oZGF0YSwgbGFiZWxzLCBwcm9wcyk7XHJcbiAgICAgICAgcHJvcHMucHVzaChgUFAgJHtkYXRhLnBwfWApO1xyXG4gICAgICAgIHByb3BzLnB1c2goSGVscGVycy5sYWJlbChkYXRhLnR5cGUpKTtcclxuICAgIH0sXHJcblxyXG4gICAgYXJtb3I6IChkYXRhLCBsYWJlbHMsIHByb3BzKSA9PiB7XHJcbiAgICAgICAgaWYgKGRhdGEuYXJtb3IpIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEuYXJtb3IudmFsdWUpIHByb3BzLnB1c2goYEFybW9yICR7ZGF0YS5hcm1vci5tb2QgPyAnKycgOiAnJ30ke2RhdGEuYXJtb3IudmFsdWV9YCk7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmFybW9yLmFjaWQpIHByb3BzLnB1c2goYEFjaWQgJHtkYXRhLmFybW9yLmFjaWR9YCk7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmFybW9yLmNvbGQpIHByb3BzLnB1c2goYENvbGQgJHtkYXRhLmFybW9yLmNvbGR9YCk7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmFybW9yLmZpcmUpIHByb3BzLnB1c2goYEZpcmUgJHtkYXRhLmFybW9yLmZpcmV9YCk7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmFybW9yLmVsZWN0cmljaXR5KSBwcm9wcy5wdXNoKGBFbGVjdHJpY2l0eSAke2RhdGEuYXJtb3IuZWxlY3RyaWNpdHl9YCk7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmFybW9yLnJhZGlhdGlvbikgcHJvcHMucHVzaChgUmFkaWF0aW9uICR7ZGF0YS5hcm1vci5yYWRpYXRpb259YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBhbW1vOiAoZGF0YSwgbGFiZWxzLCBwcm9wcykgPT4ge1xyXG4gICAgICAgIGlmIChkYXRhLmRhbWFnZVR5cGUpIHByb3BzLnB1c2goYCR7Z2FtZS5pMThuLmxvY2FsaXplKFwiU1I1LkRhbWFnZVR5cGVcIil9ICR7ZGF0YS5kYW1hZ2VUeXBlfWApO1xyXG4gICAgICAgIGlmIChkYXRhLmRhbWFnZSkgcHJvcHMucHVzaChgJHtnYW1lLmkxOG4ubG9jYWxpemUoXCJTUjUuRGFtYWdlVmFsdWVcIil9ICR7ZGF0YS5kYW1hZ2V9YCk7XHJcbiAgICAgICAgaWYgKGRhdGEuZWxlbWVudCkgcHJvcHMucHVzaChgJHtnYW1lLmkxOG4ubG9jYWxpemUoXCJTUjUuRWxlbWVudFwiKX0gJHtkYXRhLmVsZW1lbnR9YCk7XHJcbiAgICAgICAgaWYgKGRhdGEuYXApIHByb3BzLnB1c2goYCR7Z2FtZS5pMThuLmxvY2FsaXplKFwiU1I1LkFQXCIpfSAke2RhdGEuYXB9YCk7XHJcbiAgICAgICAgaWYgKGRhdGEuYmxhc3QucmFkaXVzKSBwcm9wcy5wdXNoKGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkJsYXN0UmFkaXVzJyl9ICR7ZGF0YS5ibGFzdC5yYWRpdXN9bWApO1xyXG4gICAgICAgIGlmIChkYXRhLmJsYXN0LmRyb3BvZmYpIHByb3BzLnB1c2goYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdTUjUuRHJvcG9mZicpfSAke2RhdGEuYmxhc3QuZHJvcG9mZn0vbWApO1xyXG4gICAgfSxcclxuXHJcbiAgICBwcm9ncmFtOiAoZGF0YSwgbGFiZWxzLCBwcm9wcykgPT4ge1xyXG4gICAgICAgIHByb3BzLnB1c2goZ2FtZS5pMThuLmxvY2FsaXplKENPTkZJRy5TUjUucHJvZ3JhbVR5cGVzW2RhdGEudHlwZV0pKTtcclxuICAgIH0sXHJcblxyXG4gICAgY29tcGxleF9mb3JtOiAoZGF0YSwgbGFiZWxzLCBwcm9wcykgPT4ge1xyXG4gICAgICAgIENoYXREYXRhLmFjdGlvbihkYXRhLCBsYWJlbHMsIHByb3BzKTtcclxuICAgICAgICBwcm9wcy5wdXNoKEhlbHBlcnMubGFiZWwoZGF0YS50YXJnZXQpLCBIZWxwZXJzLmxhYmVsKGRhdGEuZHVyYXRpb24pKTtcclxuICAgICAgICBjb25zdCB7IGZhZGUgfSA9IGRhdGE7XHJcbiAgICAgICAgaWYgKGZhZGUgPiAwKSBwcm9wcy5wdXNoKGBGYWRlIEwrJHtmYWRlfWApO1xyXG4gICAgICAgIGVsc2UgaWYgKGZhZGUgPCAwKSBwcm9wcy5wdXNoKGBGYWRlIEwke2ZhZGV9YCk7XHJcbiAgICAgICAgZWxzZSBwcm9wcy5wdXNoKCdGYWRlIEwnKTtcclxuICAgIH0sXHJcblxyXG4gICAgY3liZXJ3YXJlOiAoZGF0YSwgbGFiZWxzLCBwcm9wcykgPT4ge1xyXG4gICAgICAgIENoYXREYXRhLmFjdGlvbihkYXRhLCBsYWJlbHMsIHByb3BzKTtcclxuICAgICAgICBDaGF0RGF0YS5hcm1vcihkYXRhLCBsYWJlbHMsIHByb3BzKTtcclxuICAgICAgICBpZiAoZGF0YS5lc3NlbmNlKSBwcm9wcy5wdXNoKGBFc3MgJHtkYXRhLmVzc2VuY2V9YCk7XHJcbiAgICB9LFxyXG5cclxuICAgIGJpb3dhcmU6IChkYXRhLCBsYWJlbHMsIHByb3BzKSA9PiB7XHJcbiAgICAgICAgQ2hhdERhdGEuYWN0aW9uKGRhdGEsIGxhYmVscywgcHJvcHMpO1xyXG4gICAgICAgIENoYXREYXRhLmFybW9yKGRhdGEsIGxhYmVscywgcHJvcHMpO1xyXG4gICAgICAgIGlmIChkYXRhLmVzc2VuY2UpIHByb3BzLnB1c2goYEVzcyAke2RhdGEuZXNzZW5jZX1gKTtcclxuICAgIH0sXHJcblxyXG4gICAgZGV2aWNlOiAoZGF0YTogRGV2aWNlRGF0YSwgbGFiZWxzLCBwcm9wcykgPT4ge1xyXG4gICAgICAgIGlmIChkYXRhLnRlY2hub2xvZ3kgJiYgZGF0YS50ZWNobm9sb2d5LnJhdGluZykgcHJvcHMucHVzaChgUmF0aW5nICR7ZGF0YS50ZWNobm9sb2d5LnJhdGluZ31gKTtcclxuICAgICAgICBpZiAoZGF0YS5jYXRlZ29yeSA9PT0gJ2N5YmVyZGVjaycpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBhdHROIG9mIE9iamVjdC52YWx1ZXMoZGF0YS5hdHRzKSkge1xyXG4gICAgICAgICAgICAgICAgcHJvcHMucHVzaChgJHtIZWxwZXJzLmxhYmVsKGF0dE4uYXR0KX0gJHthdHROLnZhbHVlfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBlcXVpcG1lbnQ6IChkYXRhLCBsYWJlbHMsIHByb3BzKSA9PiB7XHJcbiAgICAgICAgaWYgKGRhdGEudGVjaG5vbG9neSAmJiBkYXRhLnRlY2hub2xvZ3kucmF0aW5nKSBwcm9wcy5wdXNoKGBSYXRpbmcgJHtkYXRhLnRlY2hub2xvZ3kucmF0aW5nfWApO1xyXG4gICAgfSxcclxuXHJcbiAgICBxdWFsaXR5OiAoZGF0YSwgbGFiZWxzLCBwcm9wcykgPT4ge1xyXG4gICAgICAgIENoYXREYXRhLmFjdGlvbihkYXRhLCBsYWJlbHMsIHByb3BzKTtcclxuICAgICAgICBwcm9wcy5wdXNoKEhlbHBlcnMubGFiZWwoZGF0YS50eXBlKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNwcml0ZV9wb3dlcjogKGRhdGEsIGxhYmVscywgcHJvcHMpID0+IHtcclxuICAgICAgICAvLyBhZGQgYWN0aW9uIGRhdGFcclxuICAgICAgICBDaGF0RGF0YS5hY3Rpb24oZGF0YSwgbGFiZWxzLCBwcm9wcyk7XHJcbiAgICB9LFxyXG5cclxuICAgIGNyaXR0ZXJfcG93ZXI6IChkYXRhLCBsYWJlbHMsIHByb3BzKSA9PiB7XHJcbiAgICAgICAgLy8gcG93ZXIgdHlwZVxyXG4gICAgICAgIHByb3BzLnB1c2goZ2FtZS5pMThuLmxvY2FsaXplKENPTkZJRy5TUjUuY3JpdHRlclBvd2VyLnR5cGVzW2RhdGEucG93ZXJUeXBlXSkpO1xyXG4gICAgICAgIC8vIGR1cmF0aW9uXHJcbiAgICAgICAgcHJvcHMucHVzaChnYW1lLmkxOG4ubG9jYWxpemUoQ09ORklHLlNSNS5jcml0dGVyUG93ZXIuZHVyYXRpb25zW2RhdGEuZHVyYXRpb25dKSk7XHJcbiAgICAgICAgLy8gcmFuZ2VcclxuICAgICAgICBwcm9wcy5wdXNoKGdhbWUuaTE4bi5sb2NhbGl6ZShDT05GSUcuU1I1LmNyaXR0ZXJQb3dlci5yYW5nZXNbZGF0YS5yYW5nZV0pKTtcclxuXHJcbiAgICAgICAgLy8gYWRkIGFjdGlvbiBkYXRhXHJcbiAgICAgICAgQ2hhdERhdGEuYWN0aW9uKGRhdGEsIGxhYmVscywgcHJvcHMpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBhZGQgcHJvcGVydGllcyBmb3Igc3BlbGwgZGF0YSwgZm9sbG93IG9yZGVyIGluIGJvb2tcclxuICAgIHNwZWxsOiAoZGF0YSwgbGFiZWxzLCBwcm9wcykgPT4ge1xyXG4gICAgICAgIC8vIGZpcnN0IGNhdGVnb3J5IGFuZCB0eXBlXHJcbiAgICAgICAgcHJvcHMucHVzaChIZWxwZXJzLmxhYmVsKGRhdGEuY2F0ZWdvcnkpLCBIZWxwZXJzLmxhYmVsKGRhdGEudHlwZSkpO1xyXG5cclxuICAgICAgICAvLyBhZGQgc3VidHlwZSB0YWdzXHJcbiAgICAgICAgaWYgKGRhdGEuY2F0ZWdvcnkgPT09ICdjb21iYXQnKSB7XHJcbiAgICAgICAgICAgIHByb3BzLnB1c2goSGVscGVycy5sYWJlbChkYXRhLmNvbWJhdC50eXBlKSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhLmNhdGVnb3J5ID09PSAnaGVhbHRoJykge1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YS5jYXRlZ29yeSA9PT0gJ2lsbHVzaW9uJykge1xyXG4gICAgICAgICAgICBwcm9wcy5wdXNoKGRhdGEuaWxsdXNpb24udHlwZSk7XHJcbiAgICAgICAgICAgIHByb3BzLnB1c2goZGF0YS5pbGx1c2lvbi5zZW5zZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhLmNhdGVnb3J5ID09PSAnbWFuaXB1bGF0aW9uJykge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5tYW5pcHVsYXRpb24uZGFtYWdpbmcpIHByb3BzLnB1c2goJ0RhbWFnaW5nJyk7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLm1hbmlwdWxhdGlvbi5tZW50YWwpIHByb3BzLnB1c2goJ01lbnRhbCcpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5tYW5pcHVsYXRpb24uZW52aXJvbm1lbnRhbCkgcHJvcHMucHVzaCgnRW52aXJvbm1lbnRhbCcpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5tYW5pcHVsYXRpb24ucGh5c2ljYWwpIHByb3BzLnB1c2goJ1BoeXNpY2FsJyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhLmNhdGVnb3J5ID09PSAnZGV0ZWN0aW9uJykge1xyXG4gICAgICAgICAgICBwcm9wcy5wdXNoKGRhdGEuaWxsdXNpb24udHlwZSk7XHJcbiAgICAgICAgICAgIHByb3BzLnB1c2goZGF0YS5pbGx1c2lvbi5wYXNzaXZlID8gJ1Bhc3NpdmUnIDogJ0FjdGl2ZScpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5pbGx1c2lvbi5leHRlbmRlZCkgcHJvcHMucHVzaCgnRXh0ZW5kZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gYWRkIHJhbmdlXHJcbiAgICAgICAgcHJvcHMucHVzaChIZWxwZXJzLmxhYmVsKGRhdGEucmFuZ2UpKTtcclxuXHJcbiAgICAgICAgLy8gYWRkIGFjdGlvbiBkYXRhXHJcbiAgICAgICAgQ2hhdERhdGEuYWN0aW9uKGRhdGEsIGxhYmVscywgcHJvcHMpO1xyXG5cclxuICAgICAgICAvLyBhZGQgZHVyYXRpb24gZGF0YVxyXG4gICAgICAgIHByb3BzLnB1c2goSGVscGVycy5sYWJlbChkYXRhLmR1cmF0aW9uKSk7XHJcblxyXG4gICAgICAgIC8vIGFkZCBkcmFpbiBkYXRhXHJcbiAgICAgICAgY29uc3QgeyBkcmFpbiB9ID0gZGF0YTtcclxuICAgICAgICBpZiAoZHJhaW4gPiAwKSBwcm9wcy5wdXNoKGBEcmFpbiBGKyR7ZHJhaW59YCk7XHJcbiAgICAgICAgZWxzZSBpZiAoZHJhaW4gPCAwKSBwcm9wcy5wdXNoKGBEcmFpbiBGJHtkcmFpbn1gKTtcclxuICAgICAgICBlbHNlIHByb3BzLnB1c2goJ0RyYWluIEYnKTtcclxuXHJcbiAgICAgICAgbGFiZWxzLnJvbGwgPSAnQ2FzdCc7XHJcbiAgICB9LFxyXG5cclxuICAgIHdlYXBvbjogKGRhdGEsIGxhYmVscywgcHJvcHMsIGl0ZW06IFNSNUl0ZW0pID0+IHtcclxuICAgICAgICBDaGF0RGF0YS5hY3Rpb24oZGF0YSwgbGFiZWxzLCBwcm9wcyk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBwcm9wID0gcHJvcHNbaV07XHJcbiAgICAgICAgICAgIGlmIChwcm9wLmluY2x1ZGVzKCdMaW1pdCcpKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9wc1tpXSA9IHByb3AucmVwbGFjZSgnTGltaXQnLCAnQWNjdXJhY3knKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZXF1aXBwZWRBbW1vID0gaXRlbS5nZXRFcXVpcHBlZEFtbW8oKTtcclxuICAgICAgICBpZiAoZXF1aXBwZWRBbW1vICYmIGRhdGEuYW1tbyAmJiBkYXRhLmFtbW8uY3VycmVudD8ubWF4KSB7XHJcbiAgICAgICAgICAgIGlmIChlcXVpcHBlZEFtbW8pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFtbW9EYXRhID0gZXF1aXBwZWRBbW1vLmRhdGEuZGF0YSBhcyBBbW1vRGF0YTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgY3VycmVudCwgc3BhcmVfY2xpcHMgfSA9IGRhdGEuYW1tbztcclxuICAgICAgICAgICAgICAgIGlmIChlcXVpcHBlZEFtbW8ubmFtZSkgcHJvcHMucHVzaChgJHtlcXVpcHBlZEFtbW8ubmFtZX0gKCR7Y3VycmVudC52YWx1ZX0vJHtjdXJyZW50Lm1heH0pYCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYW1tb0RhdGEuYmxhc3QucmFkaXVzKSBwcm9wcy5wdXNoKGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkJsYXN0UmFkaXVzJyl9ICR7YW1tb0RhdGEuYmxhc3QucmFkaXVzfW1gKTtcclxuICAgICAgICAgICAgICAgIGlmIChhbW1vRGF0YS5ibGFzdC5kcm9wb2ZmKSBwcm9wcy5wdXNoKGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkRyb3BvZmYnKX0gJGFtbW9EYXRhLmJsYXN0LmRyb3BvZmZ9L21gKTtcclxuICAgICAgICAgICAgICAgIGlmIChzcGFyZV9jbGlwcyAmJiBzcGFyZV9jbGlwcy5tYXgpIHByb3BzLnB1c2goYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdTUjUuU3BhcmVDbGlwcycpfSAoJHtzcGFyZV9jbGlwcy52YWx1ZX0vJHtzcGFyZV9jbGlwcy5tYXh9KWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGF0YS50ZWNobm9sb2d5Py5jb25jZWFsPy52YWx1ZSkge1xyXG4gICAgICAgICAgICBwcm9wcy5wdXNoKGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkNvbmNlYWwnKX0gJHtkYXRhLnRlY2hub2xvZ3kuY29uY2VhbC52YWx1ZX1gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkYXRhLmNhdGVnb3J5ID09PSAncmFuZ2UnKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnJhbmdlLnJjKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmNTdHJpbmcgPSBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5SZWNvaWxDb21wZW5zYXRpb24nKX0gJHtkYXRhLnJhbmdlLnJjLnZhbHVlfWA7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbT8uYWN0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICByY1N0cmluZyArPSBgICgke2dhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LlRvdGFsJyl9ICR7aXRlbS5hY3Rvci5nZXRSZWNvaWxDb21wZW5zYXRpb24oKX0pYDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHByb3BzLnB1c2gocmNTdHJpbmcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnJhbmdlLm1vZGVzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdNb2Rlczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgbW9kZXMgfSA9IGRhdGEucmFuZ2U7XHJcbiAgICAgICAgICAgICAgICBpZiAobW9kZXMuc2luZ2xlX3Nob3QpIG5ld01vZGVzLnB1c2goJ1NSNS5XZWFwb25Nb2RlU2luZ2xlU2hvdFNob3J0Jyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobW9kZXMuc2VtaV9hdXRvKSBuZXdNb2Rlcy5wdXNoKCdTUjUuV2VhcG9uTW9kZVNlbWlBdXRvU2hvcnQnKTtcclxuICAgICAgICAgICAgICAgIGlmIChtb2Rlcy5idXJzdF9maXJlKSBuZXdNb2Rlcy5wdXNoKCdTUjUuV2VhcG9uTW9kZUJ1cnN0RmlyZVNob3J0Jyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobW9kZXMuZnVsbF9hdXRvKSBuZXdNb2Rlcy5wdXNoKCdTUjUuV2VhcG9uTW9kZUZ1bGxBdXRvU2hvcnQnKTtcclxuICAgICAgICAgICAgICAgIHByb3BzLnB1c2gobmV3TW9kZXMubWFwKChtKSA9PiBnYW1lLmkxOG4ubG9jYWxpemUobSkpLmpvaW4oJy8nKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRhdGEucmFuZ2UucmFuZ2VzKSBwcm9wcy5wdXNoKEFycmF5LmZyb20oT2JqZWN0LnZhbHVlcyhkYXRhLnJhbmdlLnJhbmdlcykpLmpvaW4oJy8nKSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhLmNhdGVnb3J5ID09PSAnbWVsZWUnKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLm1lbGVlLnJlYWNoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZWFjaFN0cmluZyA9IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LlJlYWNoJyl9ICR7ZGF0YS5tZWxlZS5yZWFjaH1gO1xyXG4gICAgICAgICAgICAgICAgLy8gZmluZCBhY2N1cmFjeSBpbiBwcm9wcyBhbmQgaW5zZXJ0IG91cnNlbHZlcyBhZnRlciBpdFxyXG4gICAgICAgICAgICAgICAgY29uc3QgYWNjSW5kZXggPSBwcm9wcy5maW5kSW5kZXgoKHApID0+IHAuaW5jbHVkZXMoJ0FjY3VyYWN5JykpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjY0luZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9wcy5zcGxpY2UoYWNjSW5kZXggKyAxLCAwLCByZWFjaFN0cmluZyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3BzLnB1c2gocmVhY2hTdHJpbmcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhLmNhdGVnb3J5ID09PSAndGhyb3duJykge1xyXG4gICAgICAgICAgICBjb25zdCB7IGJsYXN0IH0gPSBkYXRhLnRocm93bjtcclxuICAgICAgICAgICAgaWYgKGJsYXN0Py5yYWRpdXMpIHByb3BzLnB1c2goYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdTUjUuQmxhc3RSYWRpdXMnKX0gJHtibGFzdC5yYWRpdXN9bWApO1xyXG4gICAgICAgICAgICBpZiAoYmxhc3Q/LmRyb3BvZmYpIHByb3BzLnB1c2goYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdTUjUuRHJvcG9mZicpfSAke2JsYXN0LmRyb3BvZmZ9L21gKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkYXRhLnRocm93bi5yYW5nZXMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG11bHQgPSBkYXRhLnRocm93bi5yYW5nZXMuYXR0cmlidXRlICYmIGl0ZW0/LmFjdG9yID8gaXRlbS5hY3Rvci5kYXRhLmRhdGEuYXR0cmlidXRlc1tkYXRhLnRocm93bi5yYW5nZXMuYXR0cmlidXRlXS52YWx1ZSA6IDE7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByYW5nZXMgPSBbZGF0YS50aHJvd24ucmFuZ2VzLnNob3J0LCBkYXRhLnRocm93bi5yYW5nZXMubWVkaXVtLCBkYXRhLnRocm93bi5yYW5nZXMubG9uZywgZGF0YS50aHJvd24ucmFuZ2VzLmV4dHJlbWVdO1xyXG4gICAgICAgICAgICAgICAgcHJvcHMucHVzaChyYW5nZXMubWFwKCh2KSA9PiB2ICogbXVsdCkuam9pbignLycpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZXF1aXBwZWRNb2RzID0gaXRlbS5nZXRFcXVpcHBlZE1vZHMoKTtcclxuICAgICAgICBpZiAoZXF1aXBwZWRNb2RzKSB7XHJcbiAgICAgICAgICAgIGVxdWlwcGVkTW9kcy5mb3JFYWNoKChtb2QpID0+IHtcclxuICAgICAgICAgICAgICAgIHByb3BzLnB1c2goYCR7bW9kLm5hbWV9YCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbn07XHJcbiIsIi8qKlxyXG4gKiBIYW5kbGUgYWxsIHRoaW5ncyByZWxhdGVkIHRvIHRoZSBhY3Rpb24gdGVtcGxhdGUgKHRlbXBsYXRlLmpzb24pXHJcbiAqL1xyXG5pbXBvcnQge1NSNUFjdG9yfSBmcm9tIFwiLi4vYWN0b3IvU1I1QWN0b3JcIjtcclxuaW1wb3J0IERhbWFnZURhdGEgPSBTaGFkb3dydW4uRGFtYWdlRGF0YTtcclxuaW1wb3J0IHtIZWxwZXJzfSBmcm9tIFwiLi4vaGVscGVyc1wiO1xyXG5pbXBvcnQgRm9ybXVsYU9wZXJhdG9yID0gU2hhZG93cnVuLkZvcm11bGFPcGVyYXRvcjtcclxuXHJcbmV4cG9ydCBjbGFzcyBJdGVtQWN0aW9uIHtcclxuICAgIHN0YXRpYyBjYWxjRGFtYWdlKGRhbWFnZTogRGFtYWdlRGF0YSwgYWN0b3I6IFNSNUFjdG9yKTogRGFtYWdlRGF0YSB7XHJcbiAgICAgICAgLy8gQXZvaWQgbWFuaXB1bGF0aW9uIG9uIG9yaWdpbmFsIGRhdGEsIHdoaWNoIG1pZ2h0IGNvbWUgZnJvbSBkYXRhYmFzZSB2YWx1ZXMuXHJcbiAgICAgICAgZGFtYWdlID0gZHVwbGljYXRlKGRhbWFnZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IGFjdG9yLmZpbmRBdHRyaWJ1dGUoZGFtYWdlLmF0dHJpYnV0ZSk7XHJcblxyXG4gICAgICAgIGlmICghYXR0cmlidXRlKSByZXR1cm4gZGFtYWdlO1xyXG5cclxuICAgICAgICBkYW1hZ2UuYmFzZSA9IEl0ZW1BY3Rpb24uX2FwcGx5Rm9ybXVsYU9wZXJhdG9yVG9WYWx1ZXMoZGFtYWdlLmJhc2UsIGF0dHJpYnV0ZS52YWx1ZSwgZGFtYWdlLmJhc2VfZm9ybXVsYV9vcGVyYXRvcik7XHJcblxyXG4gICAgICAgIC8vIFJhdGhlciByZWR1Y2UgZGFtYWdlIHRvIHRoZSBuZXh0IGZ1bGwgZGVjaW1hbC5cclxuICAgICAgICBkYW1hZ2UuYmFzZSA9IEhlbHBlcnMuYXBwbHlWYWx1ZVJhbmdlKE1hdGguZmxvb3IoZGFtYWdlLmJhc2UpLCB7bWluOiAwfSk7XHJcbiAgICAgICAgZGFtYWdlLnZhbHVlID0gZGFtYWdlLmJhc2U7XHJcblxyXG4gICAgICAgIHJldHVybiBkYW1hZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIENhbGN1bGF0ZSB0aGUgcmVzdWx0IG9mIG9wZXJhdGluZyBvbiB0d28gdmFsdWVzIHdpdGggYmFzaWMgZm9ybXVsYSBvcGVyYXRvcnMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGJhc2UgVGhlIGJhc2ljIHZhbHVlIG9wZXJhdGVkIG9wb24uXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIGRvaW5nIHRoZSBvcGVyYXRpb24gd2l0aC4gSWYgb3JkZXIgaXMgaW1wb3J0YW50LCB0aGlzIHZhbHVlIHdpbGwgYmUgYWZ0ZXIgdGhlIG9wZXJhdG9yLlxyXG4gICAgICogQHBhcmFtIG9wZXJhdG9yIEEgZm9ybXVsYSBvcGVyYXRvciAoYmFzaWMpIHRvIGJlIHVzZWQgd2l0aGluIGEgc2ltcGxlIGNhbGN1bGF0aW9uLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgX2FwcGx5Rm9ybXVsYU9wZXJhdG9yVG9WYWx1ZXMoYmFzZTogbnVtYmVyLCB2YWx1ZTogbnVtYmVyLCBvcGVyYXRvcjpGb3JtdWxhT3BlcmF0b3IpOiBudW1iZXIge1xyXG4gICAgICAgIHN3aXRjaCAob3BlcmF0b3IpIHtcclxuICAgICAgICAgICAgY2FzZSBcImFkZFwiOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJhc2UgKyB2YWx1ZTtcclxuICAgICAgICAgICAgY2FzZSBcInN1YnRyYWN0XCI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZSAtIHZhbHVlO1xyXG4gICAgICAgICAgICBjYXNlIFwibXVsdGlwbHlcIjpcclxuICAgICAgICAgICAgICAgIHJldHVybiBiYXNlICogdmFsdWU7XHJcbiAgICAgICAgICAgIGNhc2UgXCJkaXZpZGVcIjpcclxuICAgICAgICAgICAgICAgIHJldHVybiBiYXNlIC8gdmFsdWU7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBVbnN1cHBvcnRlZCBiYXNlIGRhbWFnZSBmb3JtdWxhIG9wZXJhdG9yOiAnJHtvcGVyYXRvcn0nIHVzZWQuIEZhbGxpbmcgYmFjayB0byAnYWRkJy5gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBiYXNlICsgdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtIZWxwZXJzfSBmcm9tICcuLi9oZWxwZXJzJztcclxuaW1wb3J0IHtTUjVBY3Rvcn0gZnJvbSAnLi4vYWN0b3IvU1I1QWN0b3InO1xyXG5pbXBvcnQge0FjdGlvblRlc3REYXRhLCBTaGFkb3dydW5JdGVtRGlhbG9nfSBmcm9tICcuLi9hcHBzL2RpYWxvZ3MvU2hhZG93cnVuSXRlbURpYWxvZyc7XHJcbmltcG9ydCB7Q2hhdERhdGF9IGZyb20gJy4vQ2hhdERhdGEnO1xyXG5pbXBvcnQge1NoYWRvd3J1blJvbGwsIFNoYWRvd3J1blJvbGxlciwgVGVzdH0gZnJvbSAnLi4vcm9sbHMvU2hhZG93cnVuUm9sbGVyJztcclxuaW1wb3J0IHtjcmVhdGVJdGVtQ2hhdE1lc3NhZ2V9IGZyb20gJy4uL2NoYXQnO1xyXG5pbXBvcnQge0RFRkFVTFRfUk9MTF9OQU1FLCBGTEFHUywgU1lTVEVNX05BTUV9IGZyb20gJy4uL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7U1I1SXRlbURhdGFXcmFwcGVyfSBmcm9tICcuL1NSNUl0ZW1EYXRhV3JhcHBlcic7XHJcbmltcG9ydCB7UGFydHNMaXN0fSBmcm9tICcuLi9wYXJ0cy9QYXJ0c0xpc3QnO1xyXG5pbXBvcnQgTW9kTGlzdCA9IFNoYWRvd3J1bi5Nb2RMaXN0O1xyXG5pbXBvcnQgQXR0YWNrRGF0YSA9IFNoYWRvd3J1bi5BdHRhY2tEYXRhO1xyXG5pbXBvcnQgQXR0cmlidXRlRmllbGQgPSBTaGFkb3dydW4uQXR0cmlidXRlRmllbGQ7XHJcbmltcG9ydCBTa2lsbEZpZWxkID0gU2hhZG93cnVuLlNraWxsRmllbGQ7XHJcbmltcG9ydCBMaW1pdEZpZWxkID0gU2hhZG93cnVuLkxpbWl0RmllbGQ7XHJcbmltcG9ydCBGaXJlTW9kZURhdGEgPSBTaGFkb3dydW4uRmlyZU1vZGVEYXRhO1xyXG5pbXBvcnQgU3BlbGxGb3JjZURhdGEgPSBTaGFkb3dydW4uU3BlbGxGb3JjZURhdGE7XHJcbmltcG9ydCBDb21wbGV4Rm9ybUxldmVsRGF0YSA9IFNoYWRvd3J1bi5Db21wbGV4Rm9ybUxldmVsRGF0YTtcclxuaW1wb3J0IEZpcmVSYW5nZURhdGEgPSBTaGFkb3dydW4uRmlyZVJhbmdlRGF0YTtcclxuaW1wb3J0IEJsYXN0RGF0YSA9IFNoYWRvd3J1bi5CbGFzdERhdGE7XHJcbmltcG9ydCBDb25kaXRpb25EYXRhID0gU2hhZG93cnVuLkNvbmRpdGlvbkRhdGE7XHJcbmltcG9ydCBTUjVJdGVtVHlwZSA9IFNoYWRvd3J1bi5TUjVJdGVtVHlwZTtcclxuaW1wb3J0IEFjdGlvblJvbGxEYXRhID0gU2hhZG93cnVuLkFjdGlvblJvbGxEYXRhO1xyXG5pbXBvcnQgRGFtYWdlRGF0YSA9IFNoYWRvd3J1bi5EYW1hZ2VEYXRhO1xyXG5pbXBvcnQgRGVmZW5zZVJvbGxPcHRpb25zID0gU2hhZG93cnVuLkRlZmVuc2VSb2xsT3B0aW9ucztcclxuaW1wb3J0IFNwZWxsRGVmZW5zZU9wdGlvbnMgPSBTaGFkb3dydW4uU3BlbGxEZWZlbnNlT3B0aW9ucztcclxuaW1wb3J0IFNwZWxsRGF0YSA9IFNoYWRvd3J1bi5TcGVsbERhdGE7XHJcbmltcG9ydCBXZWFwb25EYXRhID0gU2hhZG93cnVuLldlYXBvbkRhdGE7XHJcbmltcG9ydCBBbW1vRGF0YSA9IFNoYWRvd3J1bi5BbW1vRGF0YTtcclxuaW1wb3J0IFRlY2hub2xvZ3lQYXJ0RGF0YSA9IFNoYWRvd3J1bi5UZWNobm9sb2d5UGFydERhdGE7XHJcbmltcG9ydCBTaW4gPSBTaGFkb3dydW4uU2luO1xyXG5pbXBvcnQgV2VhcG9uID0gU2hhZG93cnVuLldlYXBvbjtcclxuaW1wb3J0IEFtbW8gPSBTaGFkb3dydW4uQW1tbztcclxuaW1wb3J0IFRlY2hub2xvZ3lEYXRhID0gU2hhZG93cnVuLlRlY2hub2xvZ3lEYXRhO1xyXG5pbXBvcnQgUmFuZ2VXZWFwb25EYXRhID0gU2hhZG93cnVuLlJhbmdlV2VhcG9uRGF0YTtcclxuaW1wb3J0IFNwZWxsUmFuZ2UgPSBTaGFkb3dydW4uU3BlbGxSYW5nZTtcclxuaW1wb3J0IENyaXR0ZXJQb3dlclJhbmdlID0gU2hhZG93cnVuLkNyaXR0ZXJQb3dlclJhbmdlO1xyXG5pbXBvcnQgQWRlcHRQb3dlciA9IFNoYWRvd3J1bi5BZGVwdFBvd2VyO1xyXG5pbXBvcnQgTW9kaWZpY2F0aW9uID0gU2hhZG93cnVuLk1vZGlmaWNhdGlvbjtcclxuaW1wb3J0IEFjdGlvbiA9IFNoYWRvd3J1bi5BY3Rpb247XHJcbmltcG9ydCBBcm1vciA9IFNoYWRvd3J1bi5Bcm1vcjtcclxuaW1wb3J0IENvbXBsZXhGb3JtID0gU2hhZG93cnVuLkNvbXBsZXhGb3JtO1xyXG5pbXBvcnQgQ29udGFjdCA9IFNoYWRvd3J1bi5Db250YWN0O1xyXG5pbXBvcnQgQ3JpdHRlclBvd2VyID0gU2hhZG93cnVuLkNyaXR0ZXJQb3dlcjtcclxuaW1wb3J0IEN5YmVyd2FyZSA9IFNoYWRvd3J1bi5DeWJlcndhcmU7XHJcbmltcG9ydCBEZXZpY2UgPSBTaGFkb3dydW4uRGV2aWNlO1xyXG5pbXBvcnQgRXF1aXBtZW50ID0gU2hhZG93cnVuLkVxdWlwbWVudDtcclxuaW1wb3J0IExpZmVzdHlsZSA9IFNoYWRvd3J1bi5MaWZlc3R5bGU7XHJcbmltcG9ydCBQcm9ncmFtID0gU2hhZG93cnVuLlByb2dyYW07XHJcbmltcG9ydCBRdWFsaXR5ID0gU2hhZG93cnVuLlF1YWxpdHk7XHJcbmltcG9ydCBTcGVsbCA9IFNoYWRvd3J1bi5TcGVsbDtcclxuaW1wb3J0IFNwcml0ZVBvd2VyID0gU2hhZG93cnVuLlNwcml0ZVBvd2VyO1xyXG5pbXBvcnQge0l0ZW1BY3Rpb259IGZyb20gXCIuL0l0ZW1BY3Rpb25cIjtcclxuaW1wb3J0IHtTa2lsbEZsb3d9IGZyb20gXCIuLi9hY3Rvci9Ta2lsbEZsb3dcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTUjVJdGVtIGV4dGVuZHMgSXRlbSB7XHJcbiAgICAvLyBOT1RFOiBJbiBjb250cmFzdCB0byBTUjVBY3RvciB3ZSBjYW4gb25seSB0eXBlIEl0ZW0uZGF0YSBhcyB0aGUgdHlwaW5nIHN0cnVjdHVyZSBmb3IgSXRlbURhdGEgZG9lc24ndCBoYXZlXHJcbiAgICAvLyAgICAgICBtb25vbGl0aGljIEl0ZW0uZGF0YS5kYXRhIHR5cGluZyAoU1I1QWN0b3JEYXRhKSBidXQgb25seSBvbmUgZm9yIGVhY2ggSXRlbSB0eXBlLiBUaGVyZWZvcmUgd2UgY2FuJ3RcclxuICAgIC8vICAgICAgIGRvIGV4dGVuZHMgSXRlbTxTUjVJdGVtRGF0YT4gYXMgd2UgY2FuIHdpdGggdGhlIFNSNUFjdG9yIGNsYXNzLlxyXG4gICAgZGF0YTogU1I1SXRlbVR5cGU7XHJcbiAgICBpdGVtczogU1I1SXRlbVtdO1xyXG5cclxuICAgIGxhYmVsczoge30gPSB7fTtcclxuXHJcblxyXG4gICAgZ2V0IGFjdG9yKCk6IFNSNUFjdG9yIHtcclxuICAgICAgICByZXR1cm4gc3VwZXIuYWN0b3IgYXMgU1I1QWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXQgd3JhcHBlcigpOiBTUjVJdGVtRGF0YVdyYXBwZXIge1xyXG4gICAgICAgIC8vIHdlIG5lZWQgdG8gY2FzdCBoZXJlIHRvIHVua25vd24gZmlyc3QgdG8gbWFrZSB0cyBoYXBweVxyXG4gICAgICAgIHJldHVybiBuZXcgU1I1SXRlbURhdGFXcmFwcGVyKCh0aGlzLmRhdGEgYXMgdW5rbm93bikgYXMgU1I1SXRlbVR5cGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZsYWcgRnVuY3Rpb25zXHJcbiAgICBnZXRMYXN0RmlyZU1vZGUoKTogRmlyZU1vZGVEYXRhIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRGbGFnKFNZU1RFTV9OQU1FLCBGTEFHUy5MYXN0RmlyZU1vZGUpIHx8IHsgdmFsdWU6IDAgfTtcclxuICAgIH1cclxuICAgIGFzeW5jIHNldExhc3RGaXJlTW9kZShmaXJlTW9kZTogRmlyZU1vZGVEYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0RmxhZyhTWVNURU1fTkFNRSwgRkxBR1MuTGFzdEZpcmVNb2RlLCBmaXJlTW9kZSk7XHJcbiAgICB9XHJcbiAgICBnZXRMYXN0U3BlbGxGb3JjZSgpOiBTcGVsbEZvcmNlRGF0YSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmxhZyhTWVNURU1fTkFNRSwgRkxBR1MuTGFzdFNwZWxsRm9yY2UpIHx8IHsgdmFsdWU6IDAgfTtcclxuICAgIH1cclxuICAgIGFzeW5jIHNldExhc3RTcGVsbEZvcmNlKGZvcmNlOiBTcGVsbEZvcmNlRGF0YSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNldEZsYWcoU1lTVEVNX05BTUUsIEZMQUdTLkxhc3RTcGVsbEZvcmNlLCBmb3JjZSk7XHJcbiAgICB9XHJcbiAgICBnZXRMYXN0Q29tcGxleEZvcm1MZXZlbCgpOiBDb21wbGV4Rm9ybUxldmVsRGF0YSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmxhZyhTWVNURU1fTkFNRSwgRkxBR1MuTGFzdENvbXBsZXhGb3JtTGV2ZWwpIHx8IHsgdmFsdWU6IDAgfTtcclxuICAgIH1cclxuICAgIGFzeW5jIHNldExhc3RDb21wbGV4Rm9ybUxldmVsKGxldmVsOiBDb21wbGV4Rm9ybUxldmVsRGF0YSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNldEZsYWcoU1lTVEVNX05BTUUsIEZMQUdTLkxhc3RDb21wbGV4Rm9ybUxldmVsLCBsZXZlbCk7XHJcbiAgICB9XHJcbiAgICBnZXRMYXN0RmlyZVJhbmdlTW9kKCk6IEZpcmVSYW5nZURhdGEge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEZsYWcoU1lTVEVNX05BTUUsIEZMQUdTLkxhc3RGaXJlUmFuZ2UpIHx8IHsgdmFsdWU6IDAgfTtcclxuICAgIH1cclxuICAgIGFzeW5jIHNldExhc3RGaXJlUmFuZ2VNb2QoZW52aXJvbm1lbnRhbE1vZDogRmlyZVJhbmdlRGF0YSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNldEZsYWcoU1lTVEVNX05BTUUsIEZMQUdTLkxhc3RGaXJlUmFuZ2UsIGVudmlyb25tZW50YWxNb2QpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIGFuIEFycmF5IG9mIHRoZSBFbWJlZGRlZCBJdGVtIERhdGFcclxuICAgICAqIFRPRE8gcHJvcGVybHkgdHlwZSB0aGlzXHJcbiAgICAgKi9cclxuICAgIGdldEVtYmVkZGVkSXRlbXMoKTogYW55W10ge1xyXG4gICAgICAgIGxldCBpdGVtcyA9IHRoaXMuZ2V0RmxhZyhTWVNURU1fTkFNRSwgRkxBR1MuRW1iZWRkZWRJdGVtcyk7XHJcblxyXG4gICAgICAgIGl0ZW1zID0gaXRlbXMgPyBpdGVtcyA6IFtdO1xyXG5cclxuICAgICAgICAvLyBtb3ZlZCB0aGlzIFwiaG90Zml4XCIgdG8gaGVyZSBzbyB0aGF0IGV2ZXJ5d2hlcmUgdGhhdCBhY2Nlc3NlcyB0aGUgZmxhZyBqdXN0IGdldHMgYW4gYXJyYXkgLS0gU2hhd25cclxuICAgICAgICBpZiAoaXRlbXMgJiYgIUFycmF5LmlzQXJyYXkoaXRlbXMpKSB7XHJcbiAgICAgICAgICAgIGl0ZW1zID0gSGVscGVycy5jb252ZXJ0SW5kZXhlZE9iamVjdFRvQXJyYXkoaXRlbXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTWFudWFsbHkgbWFwIHdyb25nbHkgY29udmVydGVkIGFycmF5IGZpZWxkcy4uLlxyXG4gICAgICAgIGl0ZW1zID0gaXRlbXMubWFwKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXRlbS5lZmZlY3RzICYmICFBcnJheS5pc0FycmF5KGl0ZW0uZWZmZWN0cykpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uZWZmZWN0cyA9IEhlbHBlcnMuY29udmVydEluZGV4ZWRPYmplY3RUb0FycmF5KGl0ZW0uZWZmZWN0cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBpdGVtcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgZW1iZWRkZWQgaXRlbSBkYXRhXHJcbiAgICAgKiBAcGFyYW0gaXRlbXNcclxuICAgICAqL1xyXG4gICAgYXN5bmMgc2V0RW1iZWRkZWRJdGVtcyhpdGVtczogYW55W10pIHtcclxuICAgICAgICAvLyBjbGVhciB0aGUgZmxhZyBmaXJzdCB0byByZW1vdmUgdGhlIHByZXZpb3VzIGl0ZW1zIC0gaWYgd2UgZG9uJ3QgZG8gdGhpcyB0aGVuIGl0IGRvZXNuJ3QgYWN0dWFsbHkgXCJkZWxldGVcIiBhbnkgaXRlbXNcclxuICAgICAgICAvLyBhd2FpdCB0aGlzLnVuc2V0RmxhZyhTWVNURU1fTkFNRSwgJ2VtYmVkZGVkSXRlbXMnKTtcclxuICAgICAgICBhd2FpdCB0aGlzLnNldEZsYWcoU1lTVEVNX05BTUUsIEZMQUdTLkVtYmVkZGVkSXRlbXMsIGl0ZW1zKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBjbGVhckVtYmVkZGVkSXRlbXMoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy51bnNldEZsYWcoU1lTVEVNX05BTUUsIEZMQUdTLkVtYmVkZGVkSXRlbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBPdmVyd3JpdGUgdG8gYWxsb3cgZm9yIG9wdGlvbnMgcGFyYW0gdG8gYmUgc2tpcHBlZC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgdXBkYXRlKGRhdGEsIG9wdGlvbnM/KTogUHJvbWlzZTx0aGlzPiB7XHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLnVwZGF0ZShkYXRhLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaGFzT3Bwb3NlZFJvbGwoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgYWN0aW9uID0gdGhpcy5nZXRBY3Rpb24oKTtcclxuICAgICAgICBpZiAoIWFjdGlvbikgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHJldHVybiAhIWFjdGlvbi5vcHBvc2VkLnR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGhhc1JvbGwoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgYWN0aW9uID0gdGhpcy5nZXRBY3Rpb24oKTtcclxuICAgICAgICByZXR1cm4gISEoYWN0aW9uICYmIGFjdGlvbi50eXBlICE9PSAnJyAmJiAoYWN0aW9uLnNraWxsIHx8IGFjdGlvbi5hdHRyaWJ1dGUgfHwgYWN0aW9uLmF0dHJpYnV0ZTIgfHwgYWN0aW9uLmRpY2VfcG9vbF9tb2QpKTtcclxuICAgIH1cclxuICAgIGdldCBoYXNUZW1wbGF0ZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc0FyZWFPZkVmZmVjdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUFJFUEFSRSBEQVRBIENBTk5PVCBQVUxMIEZST00gdGhpcy5hY3RvciBhdCBBTExcclxuICAgICAqIC0gYXMgb2YgZm91bmRyeSB2MC43LjQsIGFjdG9yIGRhdGEgaXNuJ3QgcHJlcGFyZWQgYnkgdGhlIHRpbWUgd2UgcHJlcGFyZSBpdGVtc1xyXG4gICAgICogLSB0aGlzIGNhdXNlZCBpc3N1ZXMgd2l0aCBBY3Rpb25zIHRoYXQgaGF2ZSBhIExpbWl0IG9yIERhbWFnZSBhdHRyaWJ1dGUgYW5kIHNvIHRob3NlIHdlcmUgbW92ZWRcclxuICAgICAqL1xyXG4gICAgcHJlcGFyZURhdGEoKSB7XHJcbiAgICAgICAgc3VwZXIucHJlcGFyZURhdGEoKTtcclxuXHJcbiAgICAgICAgLy8gRGVzY3JpcHRpb24gbGFiZWxzIG1pZ2h0IGhhdmUgY2hhbmdlZCBzaW5jZSBsYXN0IGRhdGEgcHJlcC5cclxuICAgICAgICB0aGlzLmxhYmVscyA9IHt9O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5kYXRhLnR5cGUgPT09ICdzaW4nKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5kYXRhLmRhdGEubGljZW5zZXMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAvL0B0cy1pZ25vcmUgLy8gdGFNaUY6IFRoaXMgc2VlbXMgdG8gYmUgYSBoYWNreSBzb2x1dGlvbiB0byBzb21lIGludGVybmFsIG9yIEZvdW5kcnkgaXNzdWUgd2l0aCByZWFkaW5nXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICBhIG9iamVjdC9IYXNoTWFwIHdoZW4gYW4gYXJyYXkvaXRlcmFibGUgd2FzIGV4cGVjdGVkXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEuZGF0YS5saWNlbnNlcyA9IE9iamVjdC52YWx1ZXModGhpcy5kYXRhLmRhdGEubGljZW5zZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGVxdWlwcGVkTW9kcyA9IHRoaXMuZ2V0RXF1aXBwZWRNb2RzKCk7XHJcbiAgICAgICAgY29uc3QgZXF1aXBwZWRBbW1vID0gdGhpcy5nZXRFcXVpcHBlZEFtbW8oKTtcclxuXHJcbiAgICAgICAgY29uc3QgdGVjaG5vbG9neSA9IHRoaXMuZ2V0VGVjaG5vbG9neSgpO1xyXG4gICAgICAgIGlmICh0ZWNobm9sb2d5KSB7XHJcbiAgICAgICAgICAgIC8vIHRhTWlGOiBUaGlzIG1pZ3JhdGlvbiBjb2RlIGNvdWxkIGJlIG5lZWRlZCBmb3IgaXRlbXMgaW1wb3J0ZWQgZnJvbSBhbiBvbGRlciBjb21wZW5kaXVtP1xyXG4gICAgICAgICAgICBpZiAodGVjaG5vbG9neS5jb25kaXRpb25fbW9uaXRvciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0ZWNobm9sb2d5LmNvbmRpdGlvbl9tb25pdG9yID0geyB2YWx1ZTogMCwgbWF4OiAwLCBsYWJlbDogJycgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBSYXRpbmcgbWlnaHQgYmUgYSBzdHJpbmcuXHJcbiAgICAgICAgICAgIGNvbnN0IHJhdGluZyA9IHR5cGVvZiB0ZWNobm9sb2d5LnJhdGluZyA9PT0gJ3N0cmluZycgPyAwIDogdGVjaG5vbG9neS5yYXRpbmc7XHJcbiAgICAgICAgICAgIHRlY2hub2xvZ3kuY29uZGl0aW9uX21vbml0b3IubWF4ID0gOCArIE1hdGguY2VpbChyYXRpbmcgLyAyKTtcclxuXHJcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBjb25jZWFsIGRhdGEuXHJcbiAgICAgICAgICAgIGlmICghdGVjaG5vbG9neS5jb25jZWFsKSB0ZWNobm9sb2d5LmNvbmNlYWwgPSB7YmFzZTogMCwgdmFsdWU6IDAsIG1vZDogW119O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY29uY2VhbFBhcnRzID0gbmV3IFBhcnRzTGlzdDxudW1iZXI+KCk7XHJcbiAgICAgICAgICAgIGVxdWlwcGVkTW9kcy5mb3JFYWNoKChtb2QpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRlY2hub2xvZ3kgPSBtb2QuZ2V0VGVjaG5vbG9neSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0ZWNobm9sb2d5ICYmIHRlY2hub2xvZ3kuY29uY2VhbC52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbmNlYWxQYXJ0cy5hZGRVbmlxdWVQYXJ0KG1vZC5uYW1lLCB0ZWNobm9sb2d5LmNvbmNlYWwudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRlY2hub2xvZ3kuY29uY2VhbC5tb2QgPSBjb25jZWFsUGFydHMubGlzdDtcclxuICAgICAgICAgICAgdGVjaG5vbG9neS5jb25jZWFsLnZhbHVlID0gSGVscGVycy5jYWxjVG90YWwodGVjaG5vbG9neS5jb25jZWFsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMuZ2V0QWN0aW9uKCk7XHJcbiAgICAgICAgaWYgKGFjdGlvbikge1xyXG4gICAgICAgICAgICBhY3Rpb24uYWx0X21vZCA9IDA7XHJcbiAgICAgICAgICAgIGFjdGlvbi5saW1pdC5tb2QgPSBbXTtcclxuICAgICAgICAgICAgYWN0aW9uLmRhbWFnZS5tb2QgPSBbXTtcclxuICAgICAgICAgICAgYWN0aW9uLmRhbWFnZS5hcC5tb2QgPSBbXTtcclxuICAgICAgICAgICAgYWN0aW9uLmRpY2VfcG9vbF9tb2QgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgLy8gRHVlIHRvIGZhdWx0eSB0ZW1wbGF0ZSB2YWx1ZSBpdGVtcyB3aXRob3V0IGEgc2V0IG9wZXJhdG9yIHdpbGwgaGF2ZSBhIG9wZXJhdG9yIGxpdGVyYWwgaW5zdGVhZCBzaW5jZSAwLjcuMTAuXHJcbiAgICAgICAgICAgIGlmIChhY3Rpb24uZGFtYWdlLmJhc2VfZm9ybXVsYV9vcGVyYXRvciA9PT0gJysnKSB7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb24uZGFtYWdlLmJhc2VfZm9ybXVsYV9vcGVyYXRvciA9ICdhZGQnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBoYW5kbGUgb3ZlcnJpZGVzIGZyb20gbW9kc1xyXG4gICAgICAgICAgICBjb25zdCBsaW1pdFBhcnRzID0gbmV3IFBhcnRzTGlzdChhY3Rpb24ubGltaXQubW9kKTtcclxuICAgICAgICAgICAgY29uc3QgZHBQYXJ0cyA9IG5ldyBQYXJ0c0xpc3QoYWN0aW9uLmRpY2VfcG9vbF9tb2QpO1xyXG4gICAgICAgICAgICBlcXVpcHBlZE1vZHMuZm9yRWFjaCgobW9kKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RpZmljYXRpb24gPSBtb2QuYXNNb2RpZmljYXRpb25EYXRhKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW1vZGlmaWNhdGlvbikgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChtb2RpZmljYXRpb24uZGF0YS5hY2N1cmFjeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbWl0UGFydHMuYWRkVW5pcXVlUGFydChtb2QubmFtZSwgbW9kaWZpY2F0aW9uLmRhdGEuYWNjdXJhY3kpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1vZGlmaWNhdGlvbi5kYXRhLmRpY2VfcG9vbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRwUGFydHMuYWRkVW5pcXVlUGFydChtb2QubmFtZSwgbW9kaWZpY2F0aW9uLmRhdGEuZGljZV9wb29sKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIGlmIChlcXVpcHBlZEFtbW8pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFtbW9EYXRhID0gZXF1aXBwZWRBbW1vLmRhdGEuZGF0YSBhcyBBbW1vRGF0YTtcclxuICAgICAgICAgICAgICAgIC8vIGFkZCBtb2RzIHRvIGRhbWFnZSBmcm9tIGFtbW9cclxuICAgICAgICAgICAgICAgIGFjdGlvbi5kYW1hZ2UubW9kID0gUGFydHNMaXN0LkFkZFVuaXF1ZVBhcnQoYWN0aW9uLmRhbWFnZS5tb2QsIGVxdWlwcGVkQW1tby5uYW1lLCBhbW1vRGF0YS5kYW1hZ2UpO1xyXG4gICAgICAgICAgICAgICAgLy8gYWRkIG1vZHMgdG8gYXAgZnJvbSBhbW1vXHJcbiAgICAgICAgICAgICAgICBhY3Rpb24uZGFtYWdlLmFwLm1vZCA9IFBhcnRzTGlzdC5BZGRVbmlxdWVQYXJ0KGFjdGlvbi5kYW1hZ2UuYXAubW9kLCBlcXVpcHBlZEFtbW8ubmFtZSwgYW1tb0RhdGEuYXApO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIG92ZXJyaWRlIGVsZW1lbnRcclxuICAgICAgICAgICAgICAgIGlmIChhbW1vRGF0YS5lbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uLmRhbWFnZS5lbGVtZW50LnZhbHVlID0gYW1tb0RhdGEuZWxlbWVudDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uLmRhbWFnZS5lbGVtZW50LnZhbHVlID0gYWN0aW9uLmRhbWFnZS5lbGVtZW50LmJhc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gb3ZlcnJpZGUgZGFtYWdlIHR5cGVcclxuICAgICAgICAgICAgICAgIGlmIChhbW1vRGF0YS5kYW1hZ2VUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uLmRhbWFnZS50eXBlLnZhbHVlID0gYW1tb0RhdGEuZGFtYWdlVHlwZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uLmRhbWFnZS50eXBlLnZhbHVlID0gYWN0aW9uLmRhbWFnZS50eXBlLmJhc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzZXQgdmFsdWUgaWYgd2UgZG9uJ3QgaGF2ZSBpdGVtIG92ZXJyaWRlc1xyXG4gICAgICAgICAgICAgICAgYWN0aW9uLmRhbWFnZS5lbGVtZW50LnZhbHVlID0gYWN0aW9uLmRhbWFnZS5lbGVtZW50LmJhc2U7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb24uZGFtYWdlLnR5cGUudmFsdWUgPSBhY3Rpb24uZGFtYWdlLnR5cGUuYmFzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gb25jZSBhbGwgZGFtYWdlIG1vZHMgaGF2ZSBiZWVuIGFjY291bnRlZCBmb3IsIHN1bSBiYXNlIGFuZCBtb2QgdG8gdmFsdWVcclxuICAgICAgICAgICAgYWN0aW9uLmRhbWFnZS52YWx1ZSA9IEhlbHBlcnMuY2FsY1RvdGFsKGFjdGlvbi5kYW1hZ2UpO1xyXG4gICAgICAgICAgICBhY3Rpb24uZGFtYWdlLmFwLnZhbHVlID0gSGVscGVycy5jYWxjVG90YWwoYWN0aW9uLmRhbWFnZS5hcCk7XHJcblxyXG4gICAgICAgICAgICBhY3Rpb24ubGltaXQudmFsdWUgPSBIZWxwZXJzLmNhbGNUb3RhbChhY3Rpb24ubGltaXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcmFuZ2UgPSB0aGlzLmdldFdlYXBvblJhbmdlKCk7XHJcbiAgICAgICAgaWYgKHJhbmdlKSB7XHJcbiAgICAgICAgICAgIGlmIChyYW5nZS5yYykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmFuZ2VQYXJ0cyA9IG5ldyBQYXJ0c0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIGVxdWlwcGVkTW9kcy5mb3JFYWNoKChtb2QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvL0B0cy1pZ25vcmUgLy8gVHlwZVNjcmlwdCBkb2Vzbid0IGxpa2UgdGhpcy5kYXRhLmRhdGEgSXRlbS5EYXRhPERhdGFUeXBlPiBwb3NzaWJseSBiZWluZyBhbGwgdGhlIHRoaW5ncy5cclxuICAgICAgICAgICAgICAgICAgICBpZiAobW9kLmRhdGEuZGF0YS5yYykgcmFuZ2VQYXJ0cy5hZGRVbmlxdWVQYXJ0KG1vZC5uYW1lLCBtb2QuZGF0YS5kYXRhLnJjKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgb3ZlcnJpZGVzIGZyb20gYW1tb1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvL0B0cy1pZ25vcmUgLy8gVHlwZVNjcmlwdCBkb2Vzbid0IGxpa2UgdGhpcy5kYXRhLmRhdGEgSXRlbS5EYXRhPERhdGFUeXBlPiBwb3NzaWJseSBiZWluZyBhbGwgdGhlIHRoaW5ncy5cclxuICAgICAgICAgICAgICAgIHJhbmdlLnJjLm1vZCA9IHJhbmdlUGFydHMubGlzdDtcclxuICAgICAgICAgICAgICAgIC8vQHRzLWlnbm9yZSAvLyBUeXBlU2NyaXB0IGRvZXNuJ3QgbGlrZSB0aGlzLmRhdGEuZGF0YSBJdGVtLkRhdGE8RGF0YVR5cGU+IHBvc3NpYmx5IGJlaW5nIGFsbCB0aGUgdGhpbmdzLlxyXG4gICAgICAgICAgICAgICAgaWYgKHJhbmdlLnJjKSByYW5nZS5yYy52YWx1ZSA9IEhlbHBlcnMuY2FsY1RvdGFsKHJhbmdlLnJjKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYWRlcHRQb3dlciA9IHRoaXMuYXNBZGVwdFBvd2VyRGF0YSgpO1xyXG4gICAgICAgIGlmIChhZGVwdFBvd2VyKSB7XHJcbiAgICAgICAgICAgIGFkZXB0UG93ZXIuZGF0YS50eXBlID0gYWRlcHRQb3dlci5kYXRhLmFjdGlvbi50eXBlID8gJ2FjdGl2ZScgOiAncGFzc2l2ZSc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHBvc3RJdGVtQ2FyZCgpIHtcclxuICAgICAgICBjb25zdCB0ZXN0cyA9ICB0aGlzLmdldEFjdGlvblRlc3RzKCk7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3IsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmdldENoYXREYXRhKCksXHJcbiAgICAgICAgICAgIGl0ZW06IHRoaXMsXHJcbiAgICAgICAgICAgIHByZXZpZXdUZW1wbGF0ZTogdGhpcy5oYXNUZW1wbGF0ZSxcclxuICAgICAgICAgICAgdGVzdHNcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBhd2FpdCBjcmVhdGVJdGVtQ2hhdE1lc3NhZ2Uob3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgY2FzdEFjdGlvbihldmVudD8pIHtcclxuICAgICAgICBpZiAoIXRoaXMuYWN0b3IpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgZG9udFJvbGxUZXN0ID0gZXZlbnQ/LnNoaWZ0S2V5IHx8ICF0aGlzLmhhc1JvbGw7XHJcbiAgICAgICAgaWYgKGRvbnRSb2xsVGVzdCkgcmV0dXJuIGF3YWl0IHRoaXMucG9zdEl0ZW1DYXJkKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGRpYWxvZyA9IGF3YWl0IFNoYWRvd3J1bkl0ZW1EaWFsb2cuY3JlYXRlKHRoaXMsIGV2ZW50KTtcclxuICAgICAgICAvLyBTb21lIGl0ZW1zIG1pZ2h0IG5vdCBoYXZlIGFuIGFkZGl0aW9uYWwgZGlhbG9nLlxyXG4gICAgICAgIGlmICghZGlhbG9nKSByZXR1cm4gYXdhaXQgdGhpcy5yb2xsVGVzdChldmVudCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFjdGlvblRlc3REYXRhID0gYXdhaXQgZGlhbG9nLnNlbGVjdCgpO1xyXG4gICAgICAgIGlmIChkaWFsb2cuY2FuY2VsZWQpIHJldHVybjtcclxuXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucm9sbFRlc3QoZXZlbnQsIGFjdGlvblRlc3REYXRhKTtcclxufVxyXG5cclxuICAgIGdldENoYXREYXRhKGh0bWxPcHRpb25zPykge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBkdXBsaWNhdGUodGhpcy5kYXRhLmRhdGEpO1xyXG4gICAgICAgIGNvbnN0IHsgbGFiZWxzIH0gPSB0aGlzO1xyXG4gICAgICAgIC8vQHRzLWlnbm9yZSAvLyBUaGlzIGlzIGEgaGFja3kgbW9ua2V5IHBhdGNoIHNvbHV0aW9uIHRvIGFkZCBhIHByb3BlcnR5IHRvIHRoZSBpdGVtIGRhdGFcclxuICAgICAgICAvLyAgICAgICAgICAgICAgdGhhdCdzIG5vdCBhY3R1YWxseSBkZWZpbmVkIGluIGFueSBTUjVJdGVtIHR5cGluZy5cclxuICAgICAgICBpZiAoIWRhdGEuZGVzY3JpcHRpb24pIGRhdGEuZGVzY3JpcHRpb24gPSB7fTtcclxuICAgICAgICAvLyBUZXh0RWRpdG9yLmVucmljaEhUTUwgd2lsbCByZXR1cm4gbnVsbCBhcyBhIHN0cmluZywgbWFraW5nIGxhdGVyIGhhbmRsaW5nIGRpZmZpY3VsdC5cclxuICAgICAgICBpZiAoIWRhdGEuZGVzY3JpcHRpb24udmFsdWUpIGRhdGEuZGVzY3JpcHRpb24udmFsdWUgPSAnJztcclxuXHJcbiAgICAgICAgZGF0YS5kZXNjcmlwdGlvbi52YWx1ZSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChkYXRhLmRlc2NyaXB0aW9uLnZhbHVlLCBodG1sT3B0aW9ucyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHByb3BzID0gW107XHJcbiAgICAgICAgY29uc3QgZnVuYyA9IENoYXREYXRhW3RoaXMuZGF0YS50eXBlXTtcclxuICAgICAgICBpZiAoZnVuYykgZnVuYyhkdXBsaWNhdGUoZGF0YSksIGxhYmVscywgcHJvcHMsIHRoaXMpO1xyXG5cclxuICAgICAgICAvL0B0cy1pZ25vcmUgLy8gVGhpcyBpcyBhIGhhY2t5IG1vbmtleSBwYXRjaCBzb2x1dGlvbiB0byBhZGQgYSBwcm9wZXJ0eSB0byB0aGUgaXRlbSBkYXRhXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgIHRoYXQncyBub3QgYWN0dWFsbHkgZGVmaW5lZCBpbiBhbnkgU1I1SXRlbSB0eXBpbmcuXHJcbiAgICAgICAgZGF0YS5wcm9wZXJ0aWVzID0gcHJvcHMuZmlsdGVyKChwKSA9PiAhIXApO1xyXG5cclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBY3Rpb25UZXN0TmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IHRlc3ROYW1lID0gdGhpcy5nZXRSb2xsTmFtZSgpO1xyXG4gICAgICAgIHJldHVybiB0ZXN0TmFtZSA/IHRlc3ROYW1lIDogIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkFjdGlvbicpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldE9wcG9zZWRUZXN0TmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCBuYW1lID0gJyc7XHJcbiAgICAgICAgY29uc3QgYWN0aW9uID0gdGhpcy5nZXRBY3Rpb24oKTtcclxuICAgICAgICBpZiAoYWN0aW9uICYmIGFjdGlvbi5vcHBvc2VkLnR5cGUpIHtcclxuICAgICAgICAgICAgY29uc3QgeyBvcHBvc2VkIH0gPSBhY3Rpb247XHJcbiAgICAgICAgICAgIGlmIChvcHBvc2VkLnR5cGUgIT09ICdjdXN0b20nKSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lID0gYCR7SGVscGVycy5sYWJlbChvcHBvc2VkLnR5cGUpfWA7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3Bwb3NlZC5za2lsbCkge1xyXG4gICAgICAgICAgICAgICAgbmFtZSA9IGAke0hlbHBlcnMubGFiZWwob3Bwb3NlZC5za2lsbCl9KyR7SGVscGVycy5sYWJlbChvcHBvc2VkLmF0dHJpYnV0ZSl9YDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChvcHBvc2VkLmF0dHJpYnV0ZTIpIHtcclxuICAgICAgICAgICAgICAgIG5hbWUgPSBgJHtIZWxwZXJzLmxhYmVsKG9wcG9zZWQuYXR0cmlidXRlKX0rJHtIZWxwZXJzLmxhYmVsKG9wcG9zZWQuYXR0cmlidXRlMil9YDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChvcHBvc2VkLmF0dHJpYnV0ZSkge1xyXG4gICAgICAgICAgICAgICAgbmFtZSA9IGAke0hlbHBlcnMubGFiZWwob3Bwb3NlZC5hdHRyaWJ1dGUpfWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG1vZCA9IHRoaXMuZ2V0T3Bwb3NlZFRlc3RNb2RpZmllcigpO1xyXG4gICAgICAgIGlmIChtb2QpIG5hbWUgKz0gYCAke21vZH1gO1xyXG4gICAgICAgIHJldHVybiBuYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIGdldE9wcG9zZWRUZXN0TW9kKCk6IFBhcnRzTGlzdDxudW1iZXI+IHtcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IG5ldyBQYXJ0c0xpc3Q8bnVtYmVyPigpO1xyXG4gICAgICAgIGlmICh0aGlzLmhhc0RlZmVuc2VUZXN0KCkpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNBcmVhT2ZFZmZlY3QoKSkge1xyXG4gICAgICAgICAgICAgICAgcGFydHMuYWRkVW5pcXVlUGFydCgnU1I1LkFvZScsIC0yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1JhbmdlZFdlYXBvbigpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJlTW9kZURhdGEgPSB0aGlzLmdldExhc3RGaXJlTW9kZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpcmVNb2RlRGF0YT8uZGVmZW5zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaXJlTW9kZURhdGEuZGVmZW5zZSAhPT0gJ1NSNS5EdWNrT3JDb3ZlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlyZU1vZGUgPSArZmlyZU1vZGVEYXRhLmRlZmVuc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRzLmFkZFVuaXF1ZVBhcnQoJ1NSNS5GaXJlTW9kZScsIGZpcmVNb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBhcnRzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldE9wcG9zZWRUZXN0TW9kaWZpZXIoKTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCB0ZXN0TW9kID0gdGhpcy5nZXRPcHBvc2VkVGVzdE1vZCgpO1xyXG4gICAgICAgIGNvbnN0IHRvdGFsID0gdGVzdE1vZC50b3RhbDtcclxuICAgICAgICBpZiAodG90YWwpIHJldHVybiBgKCR7dG90YWx9KWA7XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUmFuZ2VkV2VhcG9uKCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpcmVNb2RlRGF0YSA9IHRoaXMuZ2V0TGFzdEZpcmVNb2RlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlyZU1vZGVEYXRhPy5kZWZlbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpcmVNb2RlRGF0YS5kZWZlbnNlID09PSAnU1I1LkR1Y2tPckNvdmVyJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuRHVja09yQ292ZXInKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG5cclxuICAgICBnZXRCbGFzdERhdGEoYWN0aW9uVGVzdERhdGE/OiBBY3Rpb25UZXN0RGF0YSk6IEJsYXN0RGF0YSB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNTcGVsbCgpICYmIHRoaXMuaXNBcmVhT2ZFZmZlY3QoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhLmRhdGEgYXMgU3BlbGxEYXRhO1xyXG5cclxuICAgICAgICAgICAgLy8gQnkgZGVmYXVsdCBzcGVsbCBkaXN0YW5jZSBpcyBlcXVhbCB0byBpdCdzIEZvcmNlLlxyXG4gICAgICAgICAgICBsZXQgZGlzdGFuY2UgPSB0aGlzLmdldExhc3RTcGVsbEZvcmNlKCkudmFsdWU7XHJcblxyXG4gICAgICAgICAgICAvLyBFeGNlcHQgZm9yIHByZWRlZmluZWQgdXNlciB0ZXN0IHNlbGVjdGlvbi5cclxuICAgICAgICAgICAgaWYgKGFjdGlvblRlc3REYXRhPy5zcGVsbCkge1xyXG4gICAgICAgICAgICAgICAgZGlzdGFuY2UgPSBhY3Rpb25UZXN0RGF0YS5zcGVsbC5mb3JjZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gRXh0ZW5kZWQgc3BlbGxzIGhhdmUgYSBsb25nZXIgcmFuZ2UuXHJcbiAgICAgICAgICAgIC8vIFRPRE86IGRhdGEuZXh0ZW5kZWQgaXMgbm90IGRlZmluZWQgaW4gdHlwaW5nLiBJdCBvbmx5IGV4aXN0cyB1bmRlciBkYXRhLmRldGVjdGlvbiBvciBkYXRhLmFjdGlvblxyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGlmIChkYXRhLmV4dGVuZGVkKSBkaXN0YW5jZSAqPSAxMDtcclxuICAgICAgICAgICAgY29uc3QgZHJvcG9mZiA9IDA7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcmFkaXVzOiBkaXN0YW5jZSxcclxuICAgICAgICAgICAgICAgIGRyb3BvZmZcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNHcmVuYWRlKCkpIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YS5kYXRhIGFzIFdlYXBvbkRhdGE7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGRhdGEudGhyb3duLmJsYXN0LnJhZGl1cztcclxuICAgICAgICAgICAgY29uc3QgZHJvcG9mZiA9IGRhdGEudGhyb3duLmJsYXN0LmRyb3BvZmY7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcmFkaXVzOiBkaXN0YW5jZSxcclxuICAgICAgICAgICAgICAgIGRyb3BvZmZcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaGFzRXhwbG9zaXZlQW1tbygpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFtbW8gPSB0aGlzLmdldEVxdWlwcGVkQW1tbygpO1xyXG4gICAgICAgICAgICBjb25zdCBhbW1vRGF0YSA9IGFtbW8uZGF0YSBhcyBBbW1vO1xyXG4gICAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGFtbW9EYXRhLmRhdGEuYmxhc3QucmFkaXVzO1xyXG4gICAgICAgICAgICBjb25zdCBkcm9wb2ZmID0gYW1tb0RhdGEuZGF0YS5ibGFzdC5kcm9wb2ZmO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJhZGl1czogZGlzdGFuY2UsXHJcbiAgICAgICAgICAgICAgICBkcm9wb2ZmXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldEVxdWlwcGVkQW1tbygpOiBTUjVJdGVtIHtcclxuICAgICAgICBjb25zdCBlcXVpcHBlZEFtbW9zID0gKHRoaXMuaXRlbXMgfHwgW10pLmZpbHRlcigoaXRlbSkgPT5cclxuICAgICAgICAgICAgaXRlbS5pc0FtbW8oKSAmJlxyXG4gICAgICAgICAgICBpdGVtLmlzRXF1aXBwZWQoKSk7XHJcblxyXG4gICAgICAgIC8vIENhc3QgVHlwaW5nIGlzbid0IGEgbWlzdGFrZSwgc28gbG9uZyBhcyBpc0FtbW8gaXMgZmlsdGVyZWQuXHJcbiAgICAgICAgcmV0dXJuIGVxdWlwcGVkQW1tb3NbMF07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RXF1aXBwZWRNb2RzKCk6IFNSNUl0ZW1bXSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLml0ZW1zIHx8IFtdKS5maWx0ZXIoKGl0ZW0pID0+XHJcbiAgICAgICAgICAgIGl0ZW0uaXNXZWFwb25Nb2RpZmljYXRpb24oKSAmJlxyXG4gICAgICAgICAgICBpdGVtLmlzRXF1aXBwZWQoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFzRXhwbG9zaXZlQW1tbygpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBhbW1vID0gdGhpcy5nZXRFcXVpcHBlZEFtbW8oKTtcclxuICAgICAgICBpZiAoIWFtbW8pIHJldHVybiBmYWxzZTtcclxuICAgICAgICBjb25zdCBkYXRhID0gYW1tby5kYXRhLmRhdGEgYXMgQW1tb0RhdGE7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEuYmxhc3QucmFkaXVzID4gMDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBlcXVpcFdlYXBvbk1vZChpaWQpIHtcclxuICAgICAgICBjb25zdCBtb2QgPSB0aGlzLmdldE93bmVkSXRlbShpaWQpO1xyXG4gICAgICAgIGlmIChtb2QpIHtcclxuICAgICAgICAgICAgY29uc3QgZHVwRGF0YSA9IGR1cGxpY2F0ZShtb2QuZGF0YSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBkdXBEYXRhLmRhdGEgYXMgVGVjaG5vbG9neVBhcnREYXRhO1xyXG4gICAgICAgICAgICBkYXRhLnRlY2hub2xvZ3kuZXF1aXBwZWQgPSAhZGF0YS50ZWNobm9sb2d5LmVxdWlwcGVkO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZU93bmVkSXRlbShkdXBEYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaGFzQW1tbygpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyLmhhc0FtbW8oKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyB1c2VBbW1vKGZpcmVNb2RlKSB7XHJcbiAgICAgICAgY29uc3Qgd2VhcG9uID0gZHVwbGljYXRlKHRoaXMuYXNXZWFwb25EYXRhKCkpO1xyXG4gICAgICAgIGlmICh3ZWFwb24pIHtcclxuICAgICAgICAgICAgY29uc3QgeyBhbW1vIH0gPSB3ZWFwb24uZGF0YTtcclxuICAgICAgICAgICAgYW1tby5jdXJyZW50LnZhbHVlID0gTWF0aC5tYXgoMCwgYW1tby5jdXJyZW50LnZhbHVlIC0gZmlyZU1vZGUpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHdlYXBvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHJlbG9hZEFtbW8oKSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGR1cGxpY2F0ZSh0aGlzLmFzV2VhcG9uRGF0YSgpKTtcclxuXHJcbiAgICAgICAgaWYgKCFkYXRhKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IHsgYW1tbyB9ID0gZGF0YS5kYXRhO1xyXG4gICAgICAgIGNvbnN0IGRpZmYgPSBhbW1vLmN1cnJlbnQubWF4IC0gYW1tby5jdXJyZW50LnZhbHVlO1xyXG4gICAgICAgIGFtbW8uY3VycmVudC52YWx1ZSA9IGFtbW8uY3VycmVudC5tYXg7XHJcblxyXG4gICAgICAgIGlmIChhbW1vLnNwYXJlX2NsaXBzKSB7XHJcbiAgICAgICAgICAgIGFtbW8uc3BhcmVfY2xpcHMudmFsdWUgPSBNYXRoLm1heCgwLCBhbW1vLnNwYXJlX2NsaXBzLnZhbHVlIC0gMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZShkYXRhKTtcclxuXHJcbiAgICAgICAgY29uc3QgbmV3QW1tdW5pdGlvbiA9ICh0aGlzLml0ZW1zIHx8IFtdKVxyXG4gICAgICAgICAgICAuZmlsdGVyKChpKSA9PiBpLmRhdGEudHlwZSA9PT0gJ2FtbW8nKVxyXG4gICAgICAgICAgICAucmVkdWNlKChhY2M6IEVudGl0eS5EYXRhW10sIGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFtbW9EYXRhID0gaXRlbS5hc0FtbW9EYXRhKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGFtbW9EYXRhICYmIGFtbW9EYXRhLmRhdGEudGVjaG5vbG9neS5lcXVpcHBlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgdGVjaG5vbG9neSB9ID0gYW1tb0RhdGEuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBxdHkgPSB0eXBlb2YgdGVjaG5vbG9neS5xdWFudGl0eSA9PT0gJ3N0cmluZycgPyAwIDogdGVjaG5vbG9neS5xdWFudGl0eTtcclxuICAgICAgICAgICAgICAgICAgICB0ZWNobm9sb2d5LnF1YW50aXR5ID0gTWF0aC5tYXgoMCwgcXR5IC0gZGlmZik7XHJcbiAgICAgICAgICAgICAgICAgICAgYWNjLnB1c2goaXRlbS5kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XHJcbiAgICAgICAgICAgIH0sIFtdKTtcclxuXHJcbiAgICAgICAgaWYgKG5ld0FtbXVuaXRpb24gJiYgbmV3QW1tdW5pdGlvbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVPd25lZEl0ZW0obmV3QW1tdW5pdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGVxdWlwQW1tbyhpaWQpIHtcclxuICAgICAgICAvLyBvbmx5IGFsbG93IGFtbW8gdGhhdCB3YXMganVzdCBjbGlja2VkIHRvIGJlIGVxdWlwcGVkXHJcbiAgICAgICAgY29uc3QgYW1tbyA9IHRoaXMuaXRlbXNcclxuICAgICAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbS50eXBlID09PSAnYW1tbycpXHJcbiAgICAgICAgICAgIC5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG93bmVkSXRlbSA9IHRoaXMuZ2V0T3duZWRJdGVtKGl0ZW0uX2lkKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFtbW9EYXRhID0gb3duZWRJdGVtPy5hc0FtbW9EYXRhKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG93bmVkSXRlbSAmJiBhbW1vRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFtbW9EYXRhLmRhdGEudGVjaG5vbG9neS5lcXVpcHBlZCA9IGlpZCA9PT0gaXRlbS5faWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG93bmVkSXRlbS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZU93bmVkSXRlbShhbW1vKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBhZGROZXdMaWNlbnNlKCkge1xyXG4gICAgICAgIGNvbnN0IHNpbiA9IGR1cGxpY2F0ZSh0aGlzLmFzU2luRGF0YSgpKTtcclxuICAgICAgICBpZiAoIXNpbikgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyBOT1RFOiBUaGlzIG1pZ2h0IGJlIHJlbGF0ZWQgdG8gRm91bmRyeSBkYXRhIHNlcmlhbGl6YXRpb24gc29tZXRpbWVzIHJldHVybmluZyBhcnJheXMgYXMgb3JkZXJlZCBIYXNoTWFwcy4uLlxyXG4gICAgICAgIGlmICh0eXBlb2Ygc2luLmRhdGEubGljZW5zZXMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgc2luLmRhdGEubGljZW5zZXMgPSBPYmplY3QudmFsdWVzKHNpbi5kYXRhLmxpY2Vuc2VzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNpbi5kYXRhLmxpY2Vuc2VzLnB1c2goe1xyXG4gICAgICAgICAgICBuYW1lOiAnJyxcclxuICAgICAgICAgICAgcnRnOiAnJyxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICcnLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZShzaW4pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFJvbGxQYXJ0c0xpc3QoKTogTW9kTGlzdDxudW1iZXI+IHtcclxuICAgICAgICAvLyB3ZSBvbmx5IGhhdmUgYSByb2xsIGlmIHdlIGhhdmUgYW4gYWN0aW9uIG9yIGFuIGFjdG9yXHJcbiAgICAgICAgY29uc3QgYWN0aW9uID0gdGhpcy5nZXRBY3Rpb24oKTtcclxuICAgICAgICBpZiAoIWFjdGlvbiB8fCAhdGhpcy5hY3RvcikgcmV0dXJuIFtdO1xyXG5cclxuICAgICAgICBjb25zdCBwYXJ0cyA9IG5ldyBQYXJ0c0xpc3QoZHVwbGljYXRlKHRoaXMuZ2V0TW9kaWZpZXJMaXN0KCkpKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yLmZpbmRBY3RpdmVTa2lsbCh0aGlzLmdldEFjdGlvblNraWxsKCkpO1xyXG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IHRoaXMuYWN0b3IuZmluZEF0dHJpYnV0ZSh0aGlzLmdldEFjdGlvbkF0dHJpYnV0ZSgpKTtcclxuICAgICAgICBjb25zdCBhdHRyaWJ1dGUyID0gdGhpcy5hY3Rvci5maW5kQXR0cmlidXRlKHRoaXMuZ2V0QWN0aW9uQXR0cmlidXRlMigpKTtcclxuXHJcbiAgICAgICAgaWYgKGF0dHJpYnV0ZSAmJiBhdHRyaWJ1dGUubGFiZWwpIHBhcnRzLmFkZFBhcnQoYXR0cmlidXRlLmxhYmVsLCBhdHRyaWJ1dGUudmFsdWUpO1xyXG5cclxuICAgICAgICAvLyBpZiB3ZSBoYXZlIGEgdmFsaWQgc2tpbGwsIGRvbid0IGxvb2sgZm9yIGEgc2Vjb25kIGF0dHJpYnV0ZVxyXG4gICAgICAgIGlmIChza2lsbCkge1xyXG4gICAgICAgICAgICBwYXJ0cy5hZGRVbmlxdWVQYXJ0KHNraWxsLmxhYmVsIHx8IHNraWxsLm5hbWUsIHNraWxsLnZhbHVlKTtcclxuICAgICAgICAgICAgU2tpbGxGbG93LmhhbmRsZURlZmF1bHRpbmcoc2tpbGwsIHBhcnRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYXR0cmlidXRlMiAmJiBhdHRyaWJ1dGUyLmxhYmVsKSB7XHJcbiAgICAgICAgICAgIHBhcnRzLmFkZFBhcnQoYXR0cmlidXRlMi5sYWJlbCwgYXR0cmlidXRlMi52YWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzcGVjID0gdGhpcy5nZXRBY3Rpb25TcGVjaWFsaXphdGlvbigpO1xyXG4gICAgICAgIGlmIChzcGVjKSBwYXJ0cy5hZGRVbmlxdWVQYXJ0KHNwZWMsIDIpO1xyXG5cclxuICAgICAgICAvL0B0cy1pZ25vcmUgcGFyc2VJbnQgZG9lcyBhbGxvdyBmb3IgbnVtYmVyIHR5cGUgcGFyYW1ldGVyLlxyXG4gICAgICAgIGNvbnN0IG1vZCA9IHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmFjdGlvbi5tb2QgfHwgMCk7XHJcbiAgICAgICAgaWYgKG1vZCkgcGFydHMuYWRkVW5pcXVlUGFydCgnU1I1Lkl0ZW1Nb2QnLCBtb2QpO1xyXG5cclxuICAgICAgICBjb25zdCBhdHRzOiAoQXR0cmlidXRlRmllbGQgfCBTa2lsbEZpZWxkKVtdIHwgYm9vbGVhbiA9IFtdO1xyXG4gICAgICAgIGlmIChhdHRyaWJ1dGUgIT09IHVuZGVmaW5lZCkgYXR0cy5wdXNoKGF0dHJpYnV0ZSk7XHJcbiAgICAgICAgaWYgKGF0dHJpYnV0ZTIgIT09IHVuZGVmaW5lZCkgYXR0cy5wdXNoKGF0dHJpYnV0ZTIpO1xyXG4gICAgICAgIGlmIChza2lsbCAhPT0gdW5kZWZpbmVkKSBhdHRzLnB1c2goc2tpbGwpO1xyXG4gICAgICAgIC8vIGFkZCBnbG9iYWwgcGFydHMgZnJvbSBhY3RvclxyXG4gICAgICAgIHRoaXMuYWN0b3IuX2FkZEdsb2JhbFBhcnRzKHBhcnRzKTtcclxuICAgICAgICB0aGlzLmFjdG9yLl9hZGRNYXRyaXhQYXJ0cyhwYXJ0cywgYXR0cyk7XHJcbiAgICAgICAgdGhpcy5fYWRkV2VhcG9uUGFydHMocGFydHMpO1xyXG5cclxuICAgICAgICByZXR1cm4gcGFydHMubGlzdDtcclxuICAgIH1cclxuXHJcbiAgICBjYWxjdWxhdGVSZWNvaWwoKSB7XHJcbiAgICAgICAgY29uc3QgbGFzdEZpcmVNb2RlID0gdGhpcy5nZXRMYXN0RmlyZU1vZGUoKTtcclxuICAgICAgICBpZiAoIWxhc3RGaXJlTW9kZSkgcmV0dXJuIDA7XHJcbiAgICAgICAgaWYgKGxhc3RGaXJlTW9kZS52YWx1ZSA9PT0gMjApIHJldHVybiAwO1xyXG4gICAgICAgIHJldHVybiBNYXRoLm1pbih0aGlzLmdldFJlY29pbENvbXBlbnNhdGlvbih0cnVlKSAtICh0aGlzLmdldExhc3RGaXJlTW9kZSgpPy52YWx1ZSB8fCAwKSwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgX2FkZFdlYXBvblBhcnRzKHBhcnRzOiBQYXJ0c0xpc3Q8bnVtYmVyPikge1xyXG4gICAgICAgIGlmICh0aGlzLmlzUmFuZ2VkV2VhcG9uKCkpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVjb2lsID0gdGhpcy5jYWxjdWxhdGVSZWNvaWwoKTtcclxuICAgICAgICAgICAgaWYgKHJlY29pbCkgcGFydHMuYWRkVW5pcXVlUGFydCgnU1I1LlJlY29pbCcsIHJlY29pbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlzU2luKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndyYXBwZXIuaXNTaW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBhc1NpbkRhdGEoKTogU2luIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAodGhpcy5pc1NpbigpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEgYXMgU2luO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpc0xpZmVzdHlsZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyLmlzTGlmZXN0eWxlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXNMaWZlc3R5bGVEYXRhKCk6IExpZmVzdHlsZSB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNMaWZlc3R5bGUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhIGFzIExpZmVzdHlsZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaXNBbW1vKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndyYXBwZXIuaXNBbW1vKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXNBbW1vRGF0YSgpOiBBbW1vIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAodGhpcy5pc0FtbW8oKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhIGFzIEFtbW87XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlzTW9kaWZpY2F0aW9uKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndyYXBwZXIuaXNNb2RpZmljYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBhc01vZGlmaWNhdGlvbkRhdGEoKTogTW9kaWZpY2F0aW9uIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAodGhpcy5pc01vZGlmaWNhdGlvbigpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEgYXMgTW9kaWZpY2F0aW9uO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpc1dlYXBvbk1vZGlmaWNhdGlvbigpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyLmlzV2VhcG9uTW9kaWZpY2F0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNBcm1vck1vZGlmaWNhdGlvbigpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyLmlzQXJtb3JNb2RpZmljYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBpc1Byb2dyYW0oKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcHBlci5pc1Byb2dyYW0oKTtcclxuICAgIH1cclxuXHJcbiAgICBhc1Byb2dyYW1EYXRhKCk6IFByb2dyYW0gfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGlmICh0aGlzLmlzUHJvZ3JhbSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEgYXMgUHJvZ3JhbTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaXNRdWFsaXR5KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndyYXBwZXIuaXNRdWFsaXR5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXNRdWFsaXR5RGF0YSgpOiBRdWFsaXR5IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAodGhpcy5pc1F1YWxpdHkoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhIGFzIFF1YWxpdHk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlzQWRlcHRQb3dlcigpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnR5cGUgPT09ICdhZGVwdF9wb3dlcic7XHJcbiAgICB9XHJcblxyXG4gICAgYXNBZGVwdFBvd2VyRGF0YSgpOiBBZGVwdFBvd2VyfHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNBZGVwdFBvd2VyKCkpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEgYXMgQWRlcHRQb3dlcjtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByZW1vdmVMaWNlbnNlKGluZGV4KSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGR1cGxpY2F0ZSh0aGlzLmFzU2luRGF0YSgpKTtcclxuICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICBkYXRhLmRhdGEubGljZW5zZXMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlzQWN0aW9uKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndyYXBwZXIuaXNBY3Rpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBhc0FjdGlvbkRhdGEoKTogQWN0aW9uIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAodGhpcy5pc0FjdGlvbigpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEgYXMgQWN0aW9uO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIGFzeW5jIHJvbGxPcHBvc2VkVGVzdCh0YXJnZXQ6IFNSNUFjdG9yLCBhdHRhY2s6IEF0dGFja0RhdGEsIGV2ZW50KTogIFByb21pc2U8U2hhZG93cnVuUm9sbCB8IHVuZGVmaW5lZD4ge1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGV2ZW50LFxyXG4gICAgICAgICAgICBmaXJlTW9kZURlZmVuc2U6IDAsXHJcbiAgICAgICAgICAgIGNvdmVyOiBmYWxzZSxcclxuICAgICAgICAgICAgYXR0YWNrXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgcGFydHMgPSB0aGlzLmdldE9wcG9zZWRUZXN0TW9kKCk7XHJcbiAgICAgICAgY29uc3QgYWN0aW9uID0gdGhpcy5nZXRBY3Rpb24oKTtcclxuICAgICAgICBpZiAoIWFjdGlvbikgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCB7IG9wcG9zZWQgfSA9IGFjdGlvbjtcclxuXHJcbiAgICAgICAgaWYgKG9wcG9zZWQudHlwZSA9PT0gJ2RlZmVuc2UnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnJvbGxEZWZlbnNlKHRhcmdldCwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgIH0gZWxzZSBpZiAob3Bwb3NlZC50eXBlID09PSAnc29haycpIHtcclxuICAgICAgICAgICAgb3B0aW9uc1snZGFtYWdlJ10gPSBhdHRhY2s/LmRhbWFnZTtcclxuICAgICAgICAgICAgb3B0aW9uc1snYXR0YWNrZXJIaXRzJ10gPSBhdHRhY2s/LmhpdHM7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0YXJnZXQucm9sbFNvYWsob3B0aW9ucywgcGFydHMubGlzdCk7XHJcblxyXG4gICAgICAgIH0gZWxzZSBpZiAob3Bwb3NlZC50eXBlID09PSAnYXJtb3InKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXQucm9sbEFybW9yKG9wdGlvbnMpO1xyXG5cclxuICAgICAgICB9IGVsc2UgaWYgKG9wcG9zZWQuc2tpbGwgJiYgb3Bwb3NlZC5hdHRyaWJ1dGUpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSB0YXJnZXQuZ2V0U2tpbGwob3Bwb3NlZC5za2lsbCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXNraWxsKSB7XHJcbiAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZShcIlNSNS5FcnJvcnMuTWlzc2luZ1NraWxsXCIpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5yb2xsU2tpbGwoc2tpbGwsIHtcclxuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6IG9wcG9zZWQuYXR0cmlidXRlLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfSBlbHNlIGlmIChvcHBvc2VkLmF0dHJpYnV0ZSAmJiBvcHBvc2VkLmF0dHJpYnV0ZTIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5yb2xsVHdvQXR0cmlidXRlcyhbb3Bwb3NlZC5hdHRyaWJ1dGUsIG9wcG9zZWQuYXR0cmlidXRlMl0sIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICB9IGVsc2UgaWYgKG9wcG9zZWQuYXR0cmlidXRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXQucm9sbFNpbmdsZUF0dHJpYnV0ZShvcHBvc2VkLmF0dHJpYnV0ZSwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByb2xsVGVzdFR5cGUodHlwZTogc3RyaW5nLCBhdHRhY2s6IEF0dGFja0RhdGEsIGV2ZW50LCB0YXJnZXQ6IFNSNUFjdG9yKSB7XHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICdvcHBvc2VkJykge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJvbGxPcHBvc2VkVGVzdCh0YXJnZXQsIGF0dGFjaywgZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZSA9PT0gJ2FjdGlvbicpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jYXN0QWN0aW9uKGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSb2xscyBhIHRlc3QgdXNpbmcgdGhlIGxhdGVzdCBzdG9yZWQgZGF0YSBvbiB0aGUgaXRlbSAoZm9yY2UsIGZpcmVNb2RlLCBsZXZlbClcclxuICAgICAqIEBwYXJhbSBldmVudCAtIG1vdXNlIGV2ZW50XHJcbiAgICAgKiBAcGFyYW0gYWN0aW9uVGVzdERhdGFcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gYW55IGFkZGl0aW9uYWwgcm9sbCBvcHRpb25zIHRvIHBhc3MgYWxvbmcgLSBub3RlIHRoYXQgY3VycmVudGx5IHRoZSBJdGVtIHdpbGwgb3ZlcndyaXRlIC0tIFdJUFxyXG4gICAgICovXHJcbiAgICBhc3luYyByb2xsVGVzdChldmVudCwgYWN0aW9uVGVzdERhdGE/OiBBY3Rpb25UZXN0RGF0YSk6IFByb21pc2U8U2hhZG93cnVuUm9sbCB8IHVuZGVmaW5lZD4ge1xyXG5cclxuICAgICAgICBjb25zdCByb2xsID0gYXdhaXQgU2hhZG93cnVuUm9sbGVyLml0ZW1Sb2xsKGV2ZW50LCB0aGlzLCBhY3Rpb25UZXN0RGF0YSk7XHJcbiAgICAgICAgaWYgKCFyb2xsKSByZXR1cm47XHJcblxyXG4gICAgICAgIGF3YWl0IFNoYWRvd3J1blJvbGxlci5yZXN1bHRpbmdJdGVtUm9sbHMoZXZlbnQsIHRoaXMsIGFjdGlvblRlc3REYXRhKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJvbGw7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldEl0ZW1Gcm9tTWVzc2FnZShodG1sKTogU1I1SXRlbSB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgY29uc3QgY2FyZCA9IGh0bWwuZmluZCgnLmNoYXQtY2FyZCcpO1xyXG4gICAgICAgIGxldCBhY3RvcjtcclxuICAgICAgICBjb25zdCB0b2tlbktleSA9IGNhcmQuZGF0YSgndG9rZW5JZCcpO1xyXG4gICAgICAgIGlmICh0b2tlbktleSkge1xyXG4gICAgICAgICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSB0b2tlbktleS5zcGxpdCgnLicpO1xyXG4gICAgICAgICAgICBsZXQgdG9rZW47XHJcbiAgICAgICAgICAgIGlmIChzY2VuZUlkID09PSBjYW52YXM/LnNjZW5lLl9pZCkgdG9rZW4gPSBjYW52YXMudG9rZW5zLmdldCh0b2tlbklkKTtcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzY2VuZTogU2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNjZW5lKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0b2tlbkRhdGEgPSBzY2VuZS5kYXRhLnRva2Vucy5maW5kKCh0KSA9PiB0LmlkID09PSBOdW1iZXIodG9rZW5JZCkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRva2VuRGF0YSkgdG9rZW4gPSBuZXcgVG9rZW4odG9rZW5EYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIXRva2VuKSByZXR1cm47XHJcbiAgICAgICAgICAgIGFjdG9yID0gQWN0b3IuZnJvbVRva2VuKHRva2VuKTtcclxuICAgICAgICB9IGVsc2UgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoY2FyZC5kYXRhKCdhY3RvcklkJykpO1xyXG5cclxuICAgICAgICBpZiAoIWFjdG9yKSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgaXRlbUlkID0gY2FyZC5kYXRhKCdpdGVtSWQnKTtcclxuICAgICAgICByZXR1cm4gYWN0b3IuZ2V0T3duZWRJdGVtKGl0ZW1JZCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFRhcmdldHMoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjaGFyYWN0ZXIgfSA9IGdhbWUudXNlcjtcclxuICAgICAgICBjb25zdCB7IGNvbnRyb2xsZWQgfSA9IGNhbnZhcy50b2tlbnM7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0cyA9IGNvbnRyb2xsZWQucmVkdWNlKChhcnIsIHQpID0+ICh0LmFjdG9yID8gYXJyLmNvbmNhdChbdC5hY3Rvcl0pIDogYXJyKSwgW10pO1xyXG4gICAgICAgIGlmIChjaGFyYWN0ZXIgJiYgY29udHJvbGxlZC5sZW5ndGggPT09IDApIHRhcmdldHMucHVzaChjaGFyYWN0ZXIpO1xyXG4gICAgICAgIGlmICghdGFyZ2V0cy5sZW5ndGgpIHRocm93IG5ldyBFcnJvcihgWW91IG11c3QgZGVzaWduYXRlIGEgc3BlY2lmaWMgVG9rZW4gYXMgdGhlIHJvbGwgdGFyZ2V0YCk7XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldHM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWN0aW9uVGVzdHMoKTogVGVzdFtdIHtcclxuICAgICAgICBpZiAoIXRoaXMuaGFzUm9sbCkgcmV0dXJuIFtdXHJcblxyXG4gICAgICAgIHJldHVybiBbe1xyXG4gICAgICAgICAgICBsYWJlbDogdGhpcy5nZXRBY3Rpb25UZXN0TmFtZSgpLFxyXG4gICAgICAgICAgICB0eXBlOiAnYWN0aW9uJyxcclxuICAgICAgICB9XTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRPcHBvc2VkVGVzdHMoKTogVGVzdFtdIHtcclxuICAgICAgICBpZiAoIXRoaXMuaGFzT3Bwb3NlZFJvbGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW3tcclxuICAgICAgICAgICAgbGFiZWw6IHRoaXMuZ2V0T3Bwb3NlZFRlc3ROYW1lKCksXHJcbiAgICAgICAgICAgIHR5cGU6ICdvcHBvc2VkJyxcclxuICAgICAgICB9XTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhbiBpdGVtIGluIHRoaXMgaXRlbVxyXG4gICAgICogQHBhcmFtIGl0ZW1EYXRhXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBhc3luYyBjcmVhdGVPd25lZEl0ZW0oaXRlbURhdGEsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShpdGVtRGF0YSkpIGl0ZW1EYXRhID0gW2l0ZW1EYXRhXTtcclxuICAgICAgICAvLyB3ZWFwb25zIGFjY2VwdCBpdGVtc1xyXG4gICAgICAgIGlmICh0aGlzLnR5cGUgPT09ICd3ZWFwb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRJdGVtcyA9IGR1cGxpY2F0ZSh0aGlzLmdldEVtYmVkZGVkSXRlbXMoKSk7XHJcblxyXG4gICAgICAgICAgICBpdGVtRGF0YS5mb3JFYWNoKChvZ0l0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBkdXBsaWNhdGUob2dJdGVtKTtcclxuICAgICAgICAgICAgICAgIGl0ZW0uX2lkID0gcmFuZG9tSUQoMTYpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2FtbW8nIHx8IGl0ZW0udHlwZSA9PT0gJ21vZGlmaWNhdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbT8uZGF0YT8udGVjaG5vbG9neT8uZXF1aXBwZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5kYXRhLnRlY2hub2xvZ3kuZXF1aXBwZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXRFbWJlZGRlZEl0ZW1zKGN1cnJlbnRJdGVtcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGF3YWl0IHRoaXMucHJlcGFyZUVtYmVkZGVkRW50aXRpZXMoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLnByZXBhcmVEYXRhKCk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXIoZmFsc2UpO1xyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFByZXBhcmUgZW1iZWRkZWRJdGVtc1xyXG4gICAgICovXHJcbiAgICBwcmVwYXJlRW1iZWRkZWRFbnRpdGllcygpIHtcclxuICAgICAgICBzdXBlci5wcmVwYXJlRW1iZWRkZWRFbnRpdGllcygpO1xyXG4gICAgICAgIGxldCBpdGVtcyA9IHRoaXMuZ2V0RW1iZWRkZWRJdGVtcygpO1xyXG5cclxuICAgICAgICAvLyBUZW1wbGF0ZXMgYW5kIGZ1cnRoZXIgbG9naWMgbmVlZCBhIGl0ZW1zIEhhc2hNYXAsIHlldCB0aGUgZmxhZyBwcm92aWRlcyBhbiBhcnJheS5cclxuICAgICAgICBpZiAoaXRlbXMpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gKHRoaXMuaXRlbXMgfHwgW10pLnJlZHVjZSgob2JqZWN0LCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3RbaS5pZF0gPSBpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgfSwge30pO1xyXG5cclxuICAgICAgICAgICAgLy8gTWVyZ2UgcG9zc2libGUgY2hhbmdlcyAvIG5ldyBpdGVtcyBmcm9tIHRoZSBmbGFnIGludG8gdGhlIGN1cnJlbnQgaXRlbSBpbnN0YW5jZS5cclxuICAgICAgICAgICAgdGhpcy5pdGVtcyA9IGl0ZW1zLm1hcCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uX2lkIGluIGV4aXN0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEl0ZW0gPSBleGlzdGluZ1tpdGVtLl9pZF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFBhdGNoIC5kYXRhIGlzbid0IHJlYWxseSBhbnltb3JlIGJ1dCBkbyBpdCBmb3IgY29uc2lzdGVuY3kuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUGF0Y2ggLl9kYXRhIGlzIG5lZWRlZCBmb3IgSXRlbS5wcmVwYXJlRGF0YSB0byB3b3JrLCBhcyBpdCdzIHNpbXBseSBkdXBsaWNhdGluZyBfZGF0YSBvdmVyIGRhdGEuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIG9sZCBpdGVtIGRhdGEgd2lsbCBiZSB1c2VkIGZvciB2YWx1ZSBwcmVwYXJhdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbS5kYXRhID0gaXRlbTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbS5fZGF0YSA9IGl0ZW07XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW0ucHJlcGFyZURhdGEoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudEl0ZW07XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBkaXJ0eSB0aGluZ3MgZG9uZSBoZXJlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJdGVtLmNyZWF0ZU93bmVkKGl0ZW0sIHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0T3duZWRJdGVtKGl0ZW1JZCk6IFNSNUl0ZW0gfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5pdGVtcztcclxuICAgICAgICBpZiAoIWl0ZW1zKSByZXR1cm47XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1zLmZpbmQoKGkpID0+IGkuX2lkID09PSBpdGVtSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHVwZGF0ZU93bmVkSXRlbShjaGFuZ2VzKSB7XHJcbiAgICAgICAgY29uc3QgaXRlbXMgPSBkdXBsaWNhdGUodGhpcy5nZXRFbWJlZGRlZEl0ZW1zKCkpO1xyXG4gICAgICAgIGlmICghaXRlbXMpIHJldHVybjtcclxuICAgICAgICBjaGFuZ2VzID0gQXJyYXkuaXNBcnJheShjaGFuZ2VzKSA/IGNoYW5nZXMgOiBbY2hhbmdlc107XHJcbiAgICAgICAgaWYgKCFjaGFuZ2VzIHx8IGNoYW5nZXMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcbiAgICAgICAgY2hhbmdlcy5mb3JFYWNoKChpdGVtQ2hhbmdlcykgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGl0ZW1zLmZpbmRJbmRleCgoaSkgPT4gaS5faWQgPT09IGl0ZW1DaGFuZ2VzLl9pZCk7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHJldHVybjtcclxuICAgICAgICAgICAgY29uc3QgaXRlbSA9IGl0ZW1zW2luZGV4XTtcclxuICAgICAgICAgICAgaWYgKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGl0ZW1DaGFuZ2VzID0gZXhwYW5kT2JqZWN0KGl0ZW1DaGFuZ2VzKTtcclxuICAgICAgICAgICAgICAgIG1lcmdlT2JqZWN0KGl0ZW0sIGl0ZW1DaGFuZ2VzKTtcclxuICAgICAgICAgICAgICAgIGl0ZW1zW2luZGV4XSA9IGl0ZW07XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLml0ZW1zW2luZGV4XS5kYXRhID0gaXRlbXNbaW5kZXhdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGF3YWl0IHRoaXMuc2V0RW1iZWRkZWRJdGVtcyhpdGVtcyk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5wcmVwYXJlRW1iZWRkZWRFbnRpdGllcygpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMucHJlcGFyZURhdGEoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLnJlbmRlcihmYWxzZSk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdXBkYXRlRW1iZWRkZWRFbnRpdHkoZW1iZWRkZWROYW1lOiBzdHJpbmcsIHVwZGF0ZURhdGE6IG9iamVjdCB8IG9iamVjdFtdLCBvcHRpb25zPzogb2JqZWN0KSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVPd25lZEl0ZW0odXBkYXRlRGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgYW4gb3duZWQgaXRlbVxyXG4gICAgICogQHBhcmFtIGRlbGV0ZWRcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPGJvb2xlYW4+fVxyXG4gICAgICovXHJcbiAgICBhc3luYyBkZWxldGVPd25lZEl0ZW0oZGVsZXRlZCkge1xyXG4gICAgICAgIGNvbnN0IGl0ZW1zID0gZHVwbGljYXRlKHRoaXMuZ2V0RW1iZWRkZWRJdGVtcygpKTtcclxuICAgICAgICBpZiAoIWl0ZW1zKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGlkeCA9IGl0ZW1zLmZpbmRJbmRleCgoaSkgPT4gaS5faWQgPT09IGRlbGV0ZWQgfHwgTnVtYmVyKGkuX2lkKSA9PT0gZGVsZXRlZCk7XHJcbiAgICAgICAgaWYgKGlkeCA9PT0gLTEpIHRocm93IG5ldyBFcnJvcihgU2hhZG93cnVuNWUgfCBDb3VsZG4ndCBmaW5kIG93bmVkIGl0ZW0gJHtkZWxldGVkfWApO1xyXG4gICAgICAgIGl0ZW1zLnNwbGljZShpZHgsIDEpO1xyXG4gICAgICAgIC8vIHdlIG5lZWQgdG8gY2xlYXIgdGhlIGl0ZW1zIHdoZW4gb25lIGlzIGRlbGV0ZWQgb3IgaXQgd29uJ3QgYWN0dWFsbHkgYmUgZGVsZXRlZFxyXG4gICAgICAgIGF3YWl0IHRoaXMuY2xlYXJFbWJlZGRlZEl0ZW1zKCk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zZXRFbWJlZGRlZEl0ZW1zKGl0ZW1zKTtcclxuICAgICAgICBhd2FpdCB0aGlzLnByZXBhcmVFbWJlZGRlZEVudGl0aWVzKCk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5wcmVwYXJlRGF0YSgpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMucmVuZGVyKGZhbHNlKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBvcGVuUGRmU291cmNlKCkge1xyXG4gICAgICAgIC8vIENoZWNrIGZvciBQREZvdW5kcnkgbW9kdWxlIGhvb2s6IGh0dHBzOi8vZ2l0aHViLmNvbS9EanBob2VuaXg3MTkvUERGb3VuZHJ5XHJcbiAgICAgICAgaWYgKCF1aVsnUERGb3VuZHJ5J10pIHtcclxuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LkRJQUxPRy5NaXNzaW5nTW9kdWxlQ29udGVudCcpKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc291cmNlID0gdGhpcy5nZXRCb29rU291cmNlKCk7XHJcbiAgICAgICAgaWYgKHNvdXJjZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LlNvdXJjZUZpZWxkRW1wdHlFcnJvcicpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVE9ETyBvcGVuIFBERiB0byBjb3JyZWN0IGxvY2F0aW9uXHJcbiAgICAgICAgLy8gcGFyc2UgaG93ZXZlciB5b3UgbmVlZCwgYWxsIFwiYnV0dG9uc1wiIHdpbGwgbGVhZCB0byB0aGlzIGZ1bmN0aW9uXHJcbiAgICAgICAgY29uc3QgW2NvZGUsIHBhZ2VdID0gc291cmNlLnNwbGl0KCcgJyk7XHJcblxyXG4gICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgIHVpLlBERm91bmRyeS5vcGVuUERGQnlDb2RlKGNvZGUsIHsgcGFnZTogcGFyc2VJbnQocGFnZSkgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2NhbkRlYWxEYW1hZ2UoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgLy8gTk9URTogRG91YmxlIG5lZ2F0aW9uIHRvIGZvcmNlIGJvb2xlYW4gY29tcGFyaXNvbiBjYXN0aW5nLlxyXG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMuZ2V0QWN0aW9uKCk7XHJcbiAgICAgICAgaWYgKCFhY3Rpb24pIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4gISFhY3Rpb24uZGFtYWdlLnR5cGUuYmFzZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBY3Rpb24oKTogQWN0aW9uUm9sbERhdGF8dW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyLmdldEFjdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEV4dGVuZGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMuZ2V0QWN0aW9uKCk7XHJcbiAgICAgICAgaWYgKCFhY3Rpb24pIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4gYWN0aW9uLmV4dGVuZGVkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRlY2hub2xvZ3koKTogVGVjaG5vbG9neURhdGF8dW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyLmdldFRlY2hub2xvZ3koKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSYW5nZSgpOiBDcml0dGVyUG93ZXJSYW5nZXxTcGVsbFJhbmdlfFJhbmdlV2VhcG9uRGF0YXx1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndyYXBwZXIuZ2V0UmFuZ2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRXZWFwb25SYW5nZSgpOiBSYW5nZVdlYXBvbkRhdGF8dW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAodGhpcy5pc1JhbmdlZFdlYXBvbigpKVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRSYW5nZSgpIGFzIFJhbmdlV2VhcG9uRGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBdHRhY2tEYXRhKGhpdHM6IG51bWJlciwgYWN0aW9uVGVzdERhdGE/OiBBY3Rpb25UZXN0RGF0YSk6IEF0dGFja0RhdGEgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGlmICghdGhpcy5fY2FuRGVhbERhbWFnZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMuZ2V0QWN0aW9uKCk7XHJcbiAgICAgICAgaWYgKCFhY3Rpb24pIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgZGFtYWdlID0gSXRlbUFjdGlvbi5jYWxjRGFtYWdlKGFjdGlvbi5kYW1hZ2UsIHRoaXMuYWN0b3IpO1xyXG5cclxuICAgICAgICBjb25zdCBkYXRhOiBBdHRhY2tEYXRhID0ge1xyXG4gICAgICAgICAgICBoaXRzLFxyXG4gICAgICAgICAgICBkYW1hZ2UsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gTW9kaWZ5IGFjdGlvbiBkYW1hZ2UgYnkgc3BlbGwgZGFtYWdlLlxyXG4gICAgICAgIGlmICh0aGlzLmlzQ29tYmF0U3BlbGwoKSAmJiBhY3Rpb25UZXN0RGF0YT8uc3BlbGwpIHtcclxuICAgICAgICAgICAgY29uc3QgZm9yY2UgPSBhY3Rpb25UZXN0RGF0YS5zcGVsbC5mb3JjZTtcclxuICAgICAgICAgICAgY29uc3QgZGFtYWdlUGFydHMgPSBuZXcgUGFydHNMaXN0KGRhdGEuZGFtYWdlLm1vZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwZWxsRGFtYWdlID0gdGhpcy5nZXRTcGVsbERhbWFnZShmb3JjZSwgaGl0cyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoc3BlbGxEYW1hZ2UpIHtcclxuICAgICAgICAgICAgICAgIGRhdGEuZm9yY2UgPSBmb3JjZTtcclxuICAgICAgICAgICAgICAgIGRhdGEuZGFtYWdlLmJhc2UgPSBzcGVsbERhbWFnZS5iYXNlO1xyXG4gICAgICAgICAgICAgICAgZGF0YS5kYW1hZ2UudmFsdWUgPSBzcGVsbERhbWFnZS5iYXNlICsgZGFtYWdlUGFydHMudG90YWw7XHJcbiAgICAgICAgICAgICAgICBkYXRhLmRhbWFnZS5hcC52YWx1ZSA9IC1zcGVsbERhbWFnZS5hcC52YWx1ZSArIGRhbWFnZVBhcnRzLnRvdGFsO1xyXG4gICAgICAgICAgICAgICAgZGF0YS5kYW1hZ2UuYXAuYmFzZSA9IC1zcGVsbERhbWFnZS5hcC52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNDb21wbGV4Rm9ybSgpICYmIGFjdGlvblRlc3REYXRhPy5jb21wbGV4Rm9ybSkge1xyXG4gICAgICAgICAgICBkYXRhLmxldmVsID0gYWN0aW9uVGVzdERhdGEuY29tcGxleEZvcm0ubGV2ZWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5pc01lbGVlV2VhcG9uKCkpIHtcclxuICAgICAgICAgICAgZGF0YS5yZWFjaCA9IHRoaXMuZ2V0UmVhY2goKTtcclxuICAgICAgICAgICAgZGF0YS5hY2N1cmFjeSA9IHRoaXMuZ2V0QWN0aW9uTGltaXQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzUmFuZ2VkV2VhcG9uKCkpIHtcclxuICAgICAgICAgICAgZGF0YS5maXJlTW9kZSA9IGFjdGlvblRlc3REYXRhPy5yYW5nZWRXZWFwb24/LmZpcmVNb2RlO1xyXG4gICAgICAgICAgICBkYXRhLmFjY3VyYWN5ID0gdGhpcy5nZXRBY3Rpb25MaW1pdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYmxhc3REYXRhID0gdGhpcy5nZXRCbGFzdERhdGEoYWN0aW9uVGVzdERhdGEpO1xyXG4gICAgICAgIGlmIChibGFzdERhdGEpIGRhdGEuYmxhc3QgPSBibGFzdERhdGE7XHJcblxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFJvbGxOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNSYW5nZWRXZWFwb24oKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuUmFuZ2VXZWFwb25BdHRhY2snKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaXNNZWxlZVdlYXBvbigpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5NZWxlZVdlYXBvbkF0dGFjaycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5pc0NvbWJhdFNwZWxsKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LlNwZWxsQXR0YWNrJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmlzU3BlbGwoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuU3BlbGxDYXN0Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmhhc1JvbGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubmFtZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIERFRkFVTFRfUk9MTF9OQU1FO1xyXG4gICAgfVxyXG5cclxuICAgIGdldExpbWl0KCk6IExpbWl0RmllbGQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmUgLy8gVE9ETzogVGhpcyBzaG91bGQgdXNlIHRoaXMuZ2V0QWN0aW9uKCkuIEhvd2V2ZXIgYWN0aW9uLmxpbWl0IGRvZXNuJ3QgY29udGFpbiBsYWJlbCBmaWVsZC5cclxuICAgICAgICBjb25zdCBsaW1pdCA9IGR1cGxpY2F0ZSh0aGlzLmRhdGEuZGF0YS5hY3Rpb24/LmxpbWl0KTtcclxuICAgICAgICBpZiAoIWxpbWl0KSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIC8vIGdvIHRocm91Z2ggYW5kIHNldCB0aGUgbGFiZWwgY29ycmVjdGx5XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0YS50eXBlID09PSAnd2VhcG9uJykge1xyXG4gICAgICAgICAgICBsaW1pdC5sYWJlbCA9ICdTUjUuQWNjdXJhY3knO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobGltaXQ/LmF0dHJpYnV0ZSkge1xyXG4gICAgICAgICAgICBsaW1pdC5sYWJlbCA9IENPTkZJRy5TUjUubGltaXRzW2xpbWl0LmF0dHJpYnV0ZV07XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzU3BlbGwoKSkge1xyXG4gICAgICAgICAgICBsaW1pdC52YWx1ZSA9IHRoaXMuZ2V0TGFzdFNwZWxsRm9yY2UoKS52YWx1ZTtcclxuICAgICAgICAgICAgbGltaXQubGFiZWwgPSAnU1I1LkZvcmNlJztcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNDb21wbGV4Rm9ybSgpKSB7XHJcbiAgICAgICAgICAgIGxpbWl0LnZhbHVlID0gdGhpcy5nZXRMYXN0Q29tcGxleEZvcm1MZXZlbCgpLnZhbHVlO1xyXG4gICAgICAgICAgICBsaW1pdC5sYWJlbCA9ICdTUjUuTGV2ZWwnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxpbWl0LmxhYmVsID0gJ1NSNS5MaW1pdCc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBhZGp1c3QgbGltaXQgdmFsdWUgZm9yIGFjdG9yIGRhdGFcclxuICAgICAgICBpZiAobGltaXQuYXR0cmlidXRlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGF0dCA9IHRoaXMuYWN0b3IuZmluZExpbWl0KGxpbWl0LmF0dHJpYnV0ZSk7XHJcbiAgICAgICAgICAgIGlmIChhdHQpIHtcclxuICAgICAgICAgICAgICAgIGxpbWl0Lm1vZCA9IFBhcnRzTGlzdC5BZGRVbmlxdWVQYXJ0KGxpbWl0Lm1vZCwgYXR0LmxhYmVsLCBhdHQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgSGVscGVycy5jYWxjVG90YWwobGltaXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbGltaXQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPdmVycmlkZSBzZXRGbGFnIHRvIHJlbW92ZSB0aGUgJ1NSNS4nIGZyb20ga2V5cyBpbiBtb2RsaXN0cywgb3RoZXJ3aXNlIGl0IGhhbmRsZXMgdGhlbSBhcyBlbWJlZGRlZCBrZXlzXHJcbiAgICAgKiBAcGFyYW0gc2NvcGVcclxuICAgICAqIEBwYXJhbSBrZXlcclxuICAgICAqIEBwYXJhbSB2YWx1ZVxyXG4gICAgICovXHJcbiAgICBzZXRGbGFnKHNjb3BlOiBzdHJpbmcsIGtleTogc3RyaW5nLCB2YWx1ZTogYW55KTogUHJvbWlzZTxFbnRpdHk+IHtcclxuICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IEhlbHBlcnMub25TZXRGbGFnKHZhbHVlKTtcclxuICAgICAgICByZXR1cm4gc3VwZXIuc2V0RmxhZyhzY29wZSwga2V5LCBuZXdWYWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPdmVycmlkZSBnZXRGbGFnIHRvIGFkZCBiYWNrIHRoZSAnU1I1Licga2V5cyBjb3JyZWN0bHkgdG8gYmUgaGFuZGxlZFxyXG4gICAgICogQHBhcmFtIHNjb3BlXHJcbiAgICAgKiBAcGFyYW0ga2V5XHJcbiAgICAgKi9cclxuICAgIGdldEZsYWcoc2NvcGU6IHN0cmluZywga2V5OiBzdHJpbmcpOiBhbnkge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBzdXBlci5nZXRGbGFnKHNjb3BlLCBrZXkpO1xyXG4gICAgICAgIHJldHVybiBIZWxwZXJzLm9uR2V0RmxhZyhkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFBhc3N0aHJvdWdoIGZ1bmN0aW9uc1xyXG4gICAgICovXHJcbiAgICBpc0FyZWFPZkVmZmVjdCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyLmlzQXJlYU9mRWZmZWN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNBcm1vcigpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyLmlzQXJtb3IoKTtcclxuICAgIH1cclxuXHJcbiAgICBhc0FybW9yRGF0YSgpOiBBcm1vciB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNBcm1vcigpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEgYXMgQXJtb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGhhc0FybW9yQmFzZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyLmhhc0FybW9yQmFzZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGhhc0FybW9yQWNjZXNzb3J5KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndyYXBwZXIuaGFzQXJtb3JBY2Nlc3NvcnkoKTtcclxuICAgIH1cclxuXHJcbiAgICBoYXNBcm1vcigpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyLmhhc0FybW9yKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNHcmVuYWRlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndyYXBwZXIuaXNHcmVuYWRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNXZWFwb24oKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcHBlci5pc1dlYXBvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzV2VhcG9uRGF0YSgpOiBXZWFwb24gfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGlmICh0aGlzLndyYXBwZXIuaXNXZWFwb24oKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhIGFzIFdlYXBvbjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaXNDeWJlcndhcmUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcHBlci5pc0N5YmVyd2FyZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzQ3liZXJ3YXJlRGF0YSgpOiBDeWJlcndhcmUgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGlmICh0aGlzLmlzQ3liZXJ3YXJlKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YSBhcyBDeWJlcndhcmU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlzQ29tYmF0U3BlbGwoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcHBlci5pc0NvbWJhdFNwZWxsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNEaXJlY3RDb21iYXRTcGVsbCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyLmlzRGlyZWN0Q29tYmF0U3BlbGwoKTtcclxuICAgIH1cclxuXHJcbiAgICBpc0luZGlyZWN0Q29tYmF0U3BlbGwoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcHBlci5pc0luZGlyZWN0Q29tYmF0U3BlbGwoKTtcclxuICAgIH1cclxuXHJcbiAgICBpc01hbmFTcGVsbCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyLmlzTWFuYVNwZWxsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNQaHlzaWNhbFNwZWxsKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndyYXBwZXIuaXNQaHlzaWNhbFNwZWxsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNSYW5nZWRXZWFwb24oKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcHBlci5pc1JhbmdlZFdlYXBvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzU3BlbGwoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcHBlci5pc1NwZWxsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXNTcGVsbERhdGEoKTogU3BlbGwgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGlmICh0aGlzLmlzU3BlbGwoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhIGFzIFNwZWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpc1Nwcml0ZVBvd2VyKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndyYXBwZXIuaXNTcHJpdGVQb3dlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzU3ByaXRlUG93ZXJEYXRhKCk6IFNwcml0ZVBvd2VyIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAodGhpcy5pc1Nwcml0ZVBvd2VyKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YSBhcyBTcHJpdGVQb3dlcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaXNCaW93YXJlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndyYXBwZXIuaXNCaW93YXJlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNDb21wbGV4Rm9ybSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyLmlzQ29tcGxleEZvcm0oKTtcclxuICAgIH1cclxuXHJcbiAgICBhc0NvbXBsZXhGb3JtRGF0YSgpOiBDb21wbGV4Rm9ybSB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNDb21wbGV4Rm9ybSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEgYXMgQ29tcGxleEZvcm07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlzQ29udGFjdCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyLmlzQ29udGFjdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzQ29udGFjdERhdGEoKTogQ29udGFjdCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNDb250YWN0KCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YSBhcyBDb250YWN0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpc0NyaXR0ZXJQb3dlcigpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyLmlzQ3JpdHRlclBvd2VyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXNDcml0dGVyUG93ZXJEYXRhKCk6IENyaXR0ZXJQb3dlciB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNDcml0dGVyUG93ZXIoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhIGFzIENyaXR0ZXJQb3dlcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaXNNZWxlZVdlYXBvbigpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyLmlzTWVsZWVXZWFwb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBpc0RldmljZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyLmlzRGV2aWNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXNEZXZpY2VEYXRhKCk6IERldmljZSB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEZXZpY2UoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhIGFzIERldmljZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaXNFcXVpcG1lbnQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcHBlci5pc0VxdWlwbWVudCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzRXF1aXBtZW50RGF0YSgpOiBFcXVpcG1lbnQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRXF1aXBtZW50KCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YSBhcyBFcXVpcG1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlzRXF1aXBwZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcHBlci5pc0VxdWlwcGVkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNDeWJlcmRlY2soKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcHBlci5pc0N5YmVyZGVjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEJvb2tTb3VyY2UoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyLmdldEJvb2tTb3VyY2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb25kaXRpb25Nb25pdG9yKCk6IENvbmRpdGlvbkRhdGEge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndyYXBwZXIuZ2V0Q29uZGl0aW9uTW9uaXRvcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFJhdGluZygpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndyYXBwZXIuZ2V0UmF0aW5nKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QXJtb3JWYWx1ZSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndyYXBwZXIuZ2V0QXJtb3JWYWx1ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFybW9yRWxlbWVudHMoKTogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcHBlci5nZXRBcm1vckVsZW1lbnRzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RXNzZW5jZUxvc3MoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyLmdldEVzc2VuY2VMb3NzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QVNERigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyLmdldEFTREYoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBY3Rpb25Ta2lsbCgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndyYXBwZXIuZ2V0QWN0aW9uU2tpbGwoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBY3Rpb25BdHRyaWJ1dGUoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyLmdldEFjdGlvbkF0dHJpYnV0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFjdGlvbkF0dHJpYnV0ZTIoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyLmdldEFjdGlvbkF0dHJpYnV0ZTIoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBY3Rpb25MaW1pdCgpOiBudW1iZXIgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGxldCBsaW1pdCA9IHRoaXMud3JhcHBlci5nZXRBY3Rpb25MaW1pdCgpO1xyXG4gICAgICAgIC8vIGdldCB0aGUgbGltaXQgbW9kaWZpZXJzIGZyb20gdGhlIGFjdG9yIGlmIHdlIGhhdmUgdGhlbVxyXG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMud3JhcHBlci5nZXRBY3Rpb24oKTtcclxuICAgICAgICBpZiAoYWN0aW9uPy5saW1pdC5hdHRyaWJ1dGUgJiYgbGltaXQgJiYgdGhpcy5hY3Rvcikge1xyXG4gICAgICAgICAgICBjb25zdCB7IGF0dHJpYnV0ZSB9ID0gYWN0aW9uLmxpbWl0O1xyXG4gICAgICAgICAgICBjb25zdCBhdHQgPSB0aGlzLmFjdG9yLmZpbmRBdHRyaWJ1dGUoYXR0cmlidXRlKTtcclxuICAgICAgICAgICAgaWYgKGF0dCkge1xyXG4gICAgICAgICAgICAgICAgbGltaXQgKz0gYXR0LnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBsaW1pdDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRNb2RpZmllckxpc3QoKTogTW9kTGlzdDxudW1iZXI+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyLmdldE1vZGlmaWVyTGlzdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFjdGlvblNwZWNpYWxpemF0aW9uKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcHBlci5nZXRBY3Rpb25TcGVjaWFsaXphdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERyYWluKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcHBlci5nZXREcmFpbigpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEZhZGUoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyLmdldEZhZGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSZWNvaWxDb21wZW5zYXRpb24oaW5jbHVkZUFjdG9yOiBib29sZWFuID0gdHJ1ZSk6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IHJjID0gdGhpcy53cmFwcGVyLmdldFJlY29pbENvbXBlbnNhdGlvbigpO1xyXG4gICAgICAgIGlmIChpbmNsdWRlQWN0b3IgJiYgdGhpcy5hY3Rvcikge1xyXG4gICAgICAgICAgICByYyArPSB0aGlzLmFjdG9yLmdldFJlY29pbENvbXBlbnNhdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UmVhY2goKTogbnVtYmVyIHtcclxuICAgICAgICBpZiAodGhpcy5pc01lbGVlV2VhcG9uKCkpIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YS5kYXRhIGFzIFdlYXBvbkRhdGE7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhLm1lbGVlLnJlYWNoID8/IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENvbmRpdGlvbigpOiBDb25kaXRpb25EYXRhfHVuZGVmaW5lZCB7XHJcbiAgICAgICAgY29uc3QgdGVjaG5vbG9neSA9IHRoaXMuZ2V0VGVjaG5vbG9neSgpO1xyXG4gICAgICAgIGlmICh0ZWNobm9sb2d5ICYmIFwiY29uZGl0aW9uX21vbml0b3JcIiBpbiB0ZWNobm9sb2d5KVxyXG4gICAgICAgICAgICByZXR1cm4gdGVjaG5vbG9neS5jb25kaXRpb25fbW9uaXRvcjtcclxuICAgIH1cclxuXHJcbiAgICBoYXNEZWZlbnNlVGVzdCgpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoIXRoaXMuaGFzT3Bwb3NlZFJvbGwpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBjb25zdCBhY3Rpb24gPSB0aGlzLmdldEFjdGlvbigpO1xyXG4gICAgICAgIGlmICghYWN0aW9uKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIGFjdGlvbi5vcHBvc2VkLnR5cGUgPT09ICdkZWZlbnNlJztcclxuICAgIH1cclxuXHJcbiAgICAvKiogVXNlIHRoaXMgbWV0aG9kIHRvIGdldCB0aGUgYmFzZSBkYW1hZ2Ugb2Ygc3BlbGwsIGJlZm9yZSBhbnkgb3Bwb3NpbmcgYWN0aW9uXHJcbiAgICAgKlxyXG4gICAgICogTk9URTogVGhpcyB3aWxsIE5PVCBnaXZlIHlvdSBtb2RpZmllZCBkYW1hZ2UgZm9yIGRpcmVjdCBjb21iYXQgc3BlbGxzXHJcbiAgICAgKi9cclxuICAgIGdldFNwZWxsRGFtYWdlKGZvcmNlOiBudW1iZXIsIGhpdHM6IG51bWJlcik6IERhbWFnZURhdGF8dW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNDb21iYXRTcGVsbCgpKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMuZ2V0QWN0aW9uKCk7XHJcbiAgICAgICAgaWYgKCFhY3Rpb24pIHJldHVybjtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNEaXJlY3RDb21iYXRTcGVsbCgpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhbWFnZSA9IGhpdHM7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gSGVscGVycy5jcmVhdGVEYW1hZ2VEYXRhKGRhbWFnZSwgYWN0aW9uLmRhbWFnZS50eXBlLnZhbHVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNJbmRpcmVjdENvbWJhdFNwZWxsKCkpIHtcclxuICAgICAgICAgICAgY29uc3QgZGFtYWdlID0gZm9yY2U7XHJcbiAgICAgICAgICAgIGNvbnN0IGFwID0gLWZvcmNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEhlbHBlcnMuY3JlYXRlRGFtYWdlRGF0YShkYW1hZ2UsIGFjdGlvbi5kYW1hZ2UudHlwZS52YWx1ZSwgLWFwKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBUT0RPOiBNb3ZlIGludG8gYSBydWxlIHNlY3Rpb24uXHJcbiAgICBhc3luYyByb2xsRGVmZW5zZSh0YXJnZXQ6IFNSNUFjdG9yLCBvcHRpb25zOiBEZWZlbnNlUm9sbE9wdGlvbnMpOiBQcm9taXNlPFNoYWRvd3J1blJvbGwgfCB1bmRlZmluZWQ+IHtcclxuICAgICAgICAvLyBUT0RPOiBNYXliZSBtb3ZlIGludG8gZGVmZW5zZSBtZXRob2RzIGFuZCBnaXZlIHRoZSBhY3RvciBhY2Nlc3MgdG8gdGhlIGl0ZW0uXHJcbiAgICAgICAgY29uc3Qgb3Bwb3NlZFBhcnRzID0gdGhpcy5nZXRPcHBvc2VkVGVzdE1vZCgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pc1dlYXBvbigpKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMuY292ZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5hdHRhY2s/LmZpcmVNb2RlPy5kZWZlbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLmZpcmVNb2RlRGVmZW5zZSA9ICtvcHRpb25zLmF0dGFjay5maXJlTW9kZS5kZWZlbnNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGFyZ2V0LnJvbGxBdHRhY2tEZWZlbnNlKG9wdGlvbnMsIG9wcG9zZWRQYXJ0cy5saXN0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzRGlyZWN0Q29tYmF0U3BlbGwoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGFyZ2V0LnJvbGxEaXJlY3RTcGVsbERlZmVuc2UodGhpcywgb3B0aW9ucyBhcyBTcGVsbERlZmVuc2VPcHRpb25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzSW5kaXJlY3RDb21iYXRTcGVsbCgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0YXJnZXQucm9sbEluZGlyZWN0U3BlbGxEZWZlbnNlKHRoaXMsIG9wdGlvbnMgYXMgU3BlbGxEZWZlbnNlT3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiBTaG91bGQgZW52aXJvbm1lbnRhbCBtb2RpZmllcnMgYXBwbHkgYW4gYWN0aW9uIGJ5IHRoaXMgaXRlbT9cclxuICAgICAqL1xyXG4gICAgYXBwbHlFbnZpcm9ubWVudGFsTW9kaWZpZXJzKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICh0aGlzLmlzUmFuZ2VkV2VhcG9uKCkpIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLmlzTWVsZWVXZWFwb24oKSkgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbmRpcmVjdENvbWJhdFNwZWxsKCkpIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgRGF0YVdyYXBwZXIgfSBmcm9tICcuLi9kYXRhV3JhcHBlcnMvRGF0YVdyYXBwZXInO1xyXG5pbXBvcnQgU1I1SXRlbVR5cGUgPSBTaGFkb3dydW4uU1I1SXRlbVR5cGU7XHJcbmltcG9ydCBDb25kaXRpb25EYXRhID0gU2hhZG93cnVuLkNvbmRpdGlvbkRhdGE7XHJcbmltcG9ydCBNb2RMaXN0ID0gU2hhZG93cnVuLk1vZExpc3Q7XHJcbmltcG9ydCBTUjVJdGVtRGF0YVBhcnRpYWwgPSBTaGFkb3dydW4uU1I1SXRlbURhdGFQYXJ0aWFsO1xyXG5pbXBvcnQgQWN0aW9uUm9sbERhdGEgPSBTaGFkb3dydW4uQWN0aW9uUm9sbERhdGE7XHJcbmltcG9ydCBTcGVsbERhdGEgPSBTaGFkb3dydW4uU3BlbGxEYXRhO1xyXG5pbXBvcnQgU2luRGF0YSA9IFNoYWRvd3J1bi5TaW5EYXRhO1xyXG5pbXBvcnQgU2luID0gU2hhZG93cnVuLlNpbjtcclxuaW1wb3J0IFNSNUl0ZW1EYXRhID0gU2hhZG93cnVuLlNSNUl0ZW1EYXRhO1xyXG5pbXBvcnQgQWN0aW9uUGFydERhdGEgPSBTaGFkb3dydW4uQWN0aW9uUGFydERhdGE7XHJcbmltcG9ydCBXZWFwb24gPSBTaGFkb3dydW4uV2VhcG9uO1xyXG5pbXBvcnQgTW9kaWZpY2F0aW9uID0gU2hhZG93cnVuLk1vZGlmaWNhdGlvbjtcclxuaW1wb3J0IFRlY2hub2xvZ3lEYXRhID0gU2hhZG93cnVuLlRlY2hub2xvZ3lEYXRhO1xyXG5pbXBvcnQgQ3JpdHRlclBvd2VyUmFuZ2UgPSBTaGFkb3dydW4uQ3JpdHRlclBvd2VyUmFuZ2U7XHJcbmltcG9ydCBTcGVsbFJhbmdlID0gU2hhZG93cnVuLlNwZWxsUmFuZ2U7XHJcbmltcG9ydCBSYW5nZVdlYXBvbkRhdGEgPSBTaGFkb3dydW4uUmFuZ2VXZWFwb25EYXRhO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNSNUl0ZW1EYXRhV3JhcHBlciBleHRlbmRzIERhdGFXcmFwcGVyPFNSNUl0ZW1UeXBlPiB7XHJcbiAgICBnZXRUeXBlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEudHlwZTtcclxuICAgIH1cclxuICAgIGdldERhdGEoKTogU1I1SXRlbURhdGFQYXJ0aWFsIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuZGF0YS5kYXRhIGFzIHVua25vd24pIGFzIFNSNUl0ZW1EYXRhUGFydGlhbDtcclxuICAgIH1cclxuXHJcbiAgICBpc0FyZWFPZkVmZmVjdCgpOiBib29sZWFuIHtcclxuICAgICAgICAvLyBUT0RPIGZpZ3VyZSBvdXQgaG93IHRvIGRldGVjdCBleHBsb3NpdmUgYW1tb1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzR3JlbmFkZSgpIHx8ICh0aGlzLmlzU3BlbGwoKSAmJiB0aGlzLmdldERhdGEoKS5yYW5nZSA9PT0gJ2xvc19hJyk7IC8vfHwgdGhpcy5oYXNFeHBsb3NpdmVBbW1vKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFNob3VsZCBvbmx5IGJlIHVzZWQgdG8gY2hlY2sgZm9yIGFjdHVhbCBhcm1vciBpdGVtIHR5cGUuXHJcbiAgICAgKiBOT1RFOiBTaG91bGQgeW91IG9ubHkgY2FyZSBhYm91dCBhIHBvc3NpYmxlIGFybW9yIHZhbHVlIHVzZSBjb3VsZEhhdmVBcm1vciBpbnN0ZWFkLlxyXG4gICAgICovXHJcbiAgICBpc0FybW9yKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEudHlwZSA9PT0gJ2FybW9yJztcclxuICAgIH1cclxuXHJcbiAgICAvKiogV2lsbCBnaXZlIGFuIGluZGljYXRvciBpZiBhbiBpdGVtIHByb3ZpZGVzIGFuIGFybW9yIHZhbHVlLCB3aXRob3V0IGxvY2tpbmcgaW50byBvbmx5IHRoZSBBcm1vciBpdGVtIHR5cGUuXHJcbiAgICAgKiBOT1RFOiBTaG91bGQgeW91IG9ubHkgY2FyZSBhYm91dCB0aGUgYXJtb3IgaXRlbSB0eXBlIHVzZSBpc0FybW9yIGluc3RlYWQuXHJcbiAgICAgKi9cclxuICAgIGNvdWxkSGF2ZUFybW9yKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IGFybW9yID0gdGhpcy5nZXREYXRhKCkuYXJtb3I7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNBcm1vcigpIHx8IGFybW9yICE9PSB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgaGFzQXJtb3JCYXNlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhhc0FybW9yKCkgJiYgIXRoaXMuZ2V0RGF0YSgpLmFybW9yPy5tb2Q7XHJcbiAgICB9XHJcblxyXG4gICAgaGFzQXJtb3JBY2Nlc3NvcnkoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzQXJtb3IoKSAmJiAodGhpcy5nZXREYXRhKCkuYXJtb3I/Lm1vZCA/PyBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFzQXJtb3IoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXJtb3JWYWx1ZSgpID4gMDtcclxuICAgIH1cclxuXHJcbiAgICBpc0dyZW5hZGUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNUaHJvd25XZWFwb24oKSAmJiAodGhpcy5nZXREYXRhKCkudGhyb3duPy5ibGFzdC5yYWRpdXMgPz8gMCkgPiAwO1xyXG4gICAgfVxyXG5cclxuICAgIGlzVGhyb3duV2VhcG9uKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzV2VhcG9uKCkgJiYgdGhpcy5nZXREYXRhKCkuY2F0ZWdvcnkgPT09ICd0aHJvd24nO1xyXG4gICAgfVxyXG5cclxuICAgIGlzV2VhcG9uKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEudHlwZSA9PT0gJ3dlYXBvbic7XHJcbiAgICB9XHJcblxyXG4gICAgaXNNb2RpZmljYXRpb24oKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS50eXBlID09PSAnbW9kaWZpY2F0aW9uJztcclxuICAgIH1cclxuXHJcbiAgICBpc1dlYXBvbk1vZGlmaWNhdGlvbigpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNNb2RpZmljYXRpb24oKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGNvbnN0IG1vZGlmaWNhdGlvbiA9IHRoaXMuZGF0YSBhcyBNb2RpZmljYXRpb247XHJcbiAgICAgICAgcmV0dXJuIG1vZGlmaWNhdGlvbi5kYXRhLnR5cGUgPT09ICd3ZWFwb24nO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQXJtb3JNb2RpZmljYXRpb24oKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzTW9kaWZpY2F0aW9uKCkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBjb25zdCBtb2RpZmljYXRpb24gPSB0aGlzLmRhdGEgYXMgTW9kaWZpY2F0aW9uO1xyXG4gICAgICAgIHJldHVybiBtb2RpZmljYXRpb24uZGF0YS50eXBlID09PSAnYXJtb3InO1xyXG4gICAgfVxyXG5cclxuICAgIGlzUHJvZ3JhbSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnR5cGUgPT09ICdwcm9ncmFtJztcclxuICAgIH1cclxuXHJcbiAgICBpc1F1YWxpdHkoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS50eXBlID09PSAncXVhbGl0eSc7XHJcbiAgICB9XHJcblxyXG4gICAgaXNBbW1vKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEudHlwZSA9PT0gJ2FtbW8nO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQ3liZXJ3YXJlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEudHlwZSA9PT0gJ2N5YmVyd2FyZSc7XHJcbiAgICB9XHJcblxyXG4gICAgaXNCaW93YXJlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEudHlwZSA9PT0gJ2Jpb3dhcmUnO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQm9keXdhcmUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNDeWJlcndhcmUoKSB8fCB0aGlzLmlzQmlvd2FyZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQ29tYmF0U3BlbGwoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNTcGVsbCgpICYmIHRoaXMuZ2V0RGF0YSgpLmNhdGVnb3J5ID09PSAnY29tYmF0JztcclxuICAgIH1cclxuXHJcbiAgICBpc0RpcmVjdENvbWJhdFNwZWxsKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICghdGhpcy5pc0NvbWJhdFNwZWxsKCkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXREYXRhKCk/LmNvbWJhdD8udHlwZSA9PT0gJ2RpcmVjdCc7XHJcbiAgICB9XHJcblxyXG4gICAgaXNJbmRpcmVjdENvbWJhdFNwZWxsKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICghdGhpcy5pc0NvbWJhdFNwZWxsKCkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXREYXRhKCk/LmNvbWJhdD8udHlwZSA9PT0gJ2luZGlyZWN0JztcclxuICAgIH1cclxuXHJcbiAgICBpc01hbmFTcGVsbCgpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNTcGVsbCgpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8gQ2FzdCBhcyBwYXJ0aWFsIHNwZWxsZGF0YSBkdWUgdG8gY29uZmxpY3RpbmcgLnR5cGUgYmV0d2VlbiBkaWZmZXJpbmcgaXRlbSB0eXBlcy5cclxuICAgICAgICBjb25zdCBzcGVsbERhdGEgPSB0aGlzLmdldERhdGEoKSBhcyBQYXJ0aWFsPFNwZWxsRGF0YT47XHJcbiAgICAgICAgcmV0dXJuIHNwZWxsRGF0YS50eXBlID09PSAnbWFuYSc7XHJcbiAgICB9XHJcblxyXG4gICAgaXNQaHlzaWNhbFNwZWxsKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICghdGhpcy5pc1NwZWxsKCkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAvLyBDYXN0IGFzIHBhcnRpYWwgc3BlbGxkYXRhIGR1ZSB0byBjb25mbGljdGluZyAudHlwZSBiZXR3ZWVuIGRpZmZlcmluZyBpdGVtIHR5cGVzLlxyXG4gICAgICAgIGNvbnN0IHNwZWxsRGF0YSA9IHRoaXMuZ2V0RGF0YSgpIGFzIFBhcnRpYWw8U3BlbGxEYXRhPjtcclxuICAgICAgICByZXR1cm4gc3BlbGxEYXRhLnR5cGUgPT09ICdwaHlzaWNhbCc7XHJcbiAgICB9XHJcblxyXG4gICAgaXNSYW5nZWRXZWFwb24oKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNXZWFwb24oKSAmJiB0aGlzLmdldERhdGEoKS5jYXRlZ29yeSA9PT0gJ3JhbmdlJztcclxuICAgIH1cclxuXHJcbiAgICBpc1NwZWxsKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEudHlwZSA9PT0gJ3NwZWxsJztcclxuICAgIH1cclxuXHJcbiAgICBpc1Nwcml0ZVBvd2VyKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEudHlwZSA9PT0gJ3Nwcml0ZV9wb3dlcic7XHJcbiAgICB9XHJcblxyXG4gICAgaXNDb21wbGV4Rm9ybSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnR5cGUgPT09ICdjb21wbGV4X2Zvcm0nO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQ29udGFjdCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnR5cGUgPT09ICdjb250YWN0JztcclxuICAgIH1cclxuXHJcbiAgICBpc0NyaXR0ZXJQb3dlcigpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnR5cGUgPT09ICdjcml0dGVyX3Bvd2VyJztcclxuICAgIH1cclxuXHJcbiAgICBpc01lbGVlV2VhcG9uKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEudHlwZSA9PT0gJ3dlYXBvbicgJiYgdGhpcy5nZXREYXRhKCkuY2F0ZWdvcnkgPT09ICdtZWxlZSc7XHJcbiAgICB9XHJcblxyXG4gICAgaXNEZXZpY2UoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS50eXBlID09PSAnZGV2aWNlJztcclxuICAgIH1cclxuXHJcbiAgICBpc0VxdWlwbWVudCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnR5cGUgPT09ICdlcXVpcG1lbnQnO1xyXG4gICAgfVxyXG5cclxuICAgIGlzRXF1aXBwZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RGF0YSgpLnRlY2hub2xvZ3k/LmVxdWlwcGVkIHx8IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQ3liZXJkZWNrKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzRGV2aWNlKCkgJiYgdGhpcy5nZXREYXRhKCkuY2F0ZWdvcnkgPT09ICdjeWJlcmRlY2snO1xyXG4gICAgfVxyXG5cclxuICAgIGlzU2luKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEudHlwZSA9PT0gJ3Npbic7XHJcbiAgICB9XHJcblxyXG4gICAgaXNMaWZlc3R5bGUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS50eXBlID09PSAnbGlmZXN0eWxlJztcclxuICAgIH1cclxuXHJcbiAgICBnZXRJZCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuX2lkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEJvb2tTb3VyY2UoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXREYXRhKCkuZGVzY3JpcHRpb24/LnNvdXJjZSA/PyAnJztcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb25kaXRpb25Nb25pdG9yKCk6IENvbmRpdGlvbkRhdGEge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldERhdGEoKS50ZWNobm9sb2d5Py5jb25kaXRpb25fbW9uaXRvciA/PyB7IHZhbHVlOiAwLCBtYXg6IDAsIGxhYmVsOiAnJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGdldFJhdGluZygpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldERhdGEoKS50ZWNobm9sb2d5Py5yYXRpbmcgfHwgMDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBcm1vclZhbHVlKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RGF0YSgpPy5hcm1vcj8udmFsdWUgPz8gMDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBcm1vckVsZW1lbnRzKCk6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0ge1xyXG4gICAgICAgIC8vIFRPRE8gY2xlYW4gdGhpcyB1cFxyXG4gICAgICAgIGNvbnN0IHsgZmlyZSwgZWxlY3RyaWNpdHksIGNvbGQsIGFjaWQgfSA9IHRoaXMuZ2V0RGF0YSgpLmFybW9yIHx8IHt9O1xyXG4gICAgICAgIHJldHVybiB7IGZpcmU6IGZpcmUgPz8gMCwgZWxlY3RyaWNpdHk6IGVsZWN0cmljaXR5ID8/IDAsIGNvbGQ6IGNvbGQgPz8gMCwgYWNpZDogYWNpZCA/PyAwIH07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEubmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRFc3NlbmNlTG9zcygpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldERhdGEoKT8uZXNzZW5jZSA/PyAwO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFtbW8oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RGF0YSgpLmFtbW87XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QVNERigpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNEZXZpY2UoKSkgcmV0dXJuIHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgLy8gbWF0cml4IGF0dHJpYnV0ZXMgYXJlIHNldCB1cCBhcyBhbiBvYmplY3RcclxuICAgICAgICBjb25zdCBtYXRyaXggPSB7XHJcbiAgICAgICAgICAgIGF0dGFjazoge1xyXG4gICAgICAgICAgICAgICAgdmFsdWU6IDAsXHJcbiAgICAgICAgICAgICAgICBkZXZpY2VfYXR0OiAnJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2xlYXplOiB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogMCxcclxuICAgICAgICAgICAgICAgIGRldmljZV9hdHQ6ICcnLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkYXRhX3Byb2Nlc3Npbmc6IHtcclxuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLmdldFJhdGluZygpLFxyXG4gICAgICAgICAgICAgICAgZGV2aWNlX2F0dDogJycsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZpcmV3YWxsOiB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5nZXRSYXRpbmcoKSxcclxuICAgICAgICAgICAgICAgIGRldmljZV9hdHQ6ICcnLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzQ3liZXJkZWNrKCkpIHtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIHtcclxuICAgICAgICAgICAgICogICAgIGF0dE46IHtcclxuICAgICAgICAgICAgICogICAgICAgICB2YWx1ZTogbnVtYmVyLFxyXG4gICAgICAgICAgICAgKiAgICAgICAgIGF0dDogc3RyaW5nICh0aGUgQVNERiBhdHRyaWJ1dGUpXHJcbiAgICAgICAgICAgICAqICAgICB9XHJcbiAgICAgICAgICAgICAqIH1cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGNvbnN0IGF0dHM6IHsgW2tleTogc3RyaW5nXTogeyB2YWx1ZTogbnVtYmVyOyBhdHQ6IHN0cmluZyB9IH0gfCB1bmRlZmluZWQgPSB0aGlzLmdldERhdGEoKS5hdHRzO1xyXG4gICAgICAgICAgICBpZiAoYXR0cykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgW2tleSwgYXR0XSBvZiBPYmplY3QuZW50cmllcyhhdHRzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeFthdHQuYXR0XS52YWx1ZSA9IGF0dC52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBtYXRyaXhbYXR0LmF0dF0uZGV2aWNlX2F0dCA9IGtleTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG1hdHJpeDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRRdWFudGl0eSgpOiBudW1iZXIgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldERhdGEoKT8udGVjaG5vbG9neT8ucXVhbnRpdHkgfHwgMTtcclxuICAgIH1cclxuXHJcbiAgICBpc0FjdGlvbigpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnR5cGUgPT09ICdhY3Rpb24nO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFjdGlvbigpOiBBY3Rpb25Sb2xsRGF0YXx1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldERhdGEoKS5hY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWN0aW9uRGljZVBvb2xNb2QoKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXREYXRhKCkuYWN0aW9uPy5tb2Q7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TGltaXRBdHRyaWJ1dGUoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXREYXRhKCkuYWN0aW9uPy5saW1pdD8uYXR0cmlidXRlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFjdGlvblNraWxsKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RGF0YSgpLmFjdGlvbj8uc2tpbGw7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWN0aW9uQXR0cmlidXRlKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RGF0YSgpLmFjdGlvbj8uYXR0cmlidXRlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFjdGlvbkF0dHJpYnV0ZTIoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXREYXRhKCkuYWN0aW9uPy5hdHRyaWJ1dGUyO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFjdGlvbkxpbWl0KCk6IG51bWJlciB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RGF0YSgpLmFjdGlvbj8ubGltaXQ/LnZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldE1vZGlmaWVyTGlzdCgpOiBNb2RMaXN0PG51bWJlcj4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldERhdGEoKS5hY3Rpb24/LmRpY2VfcG9vbF9tb2QgfHwgW107XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWN0aW9uU3BlY2lhbGl6YXRpb24oKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAodGhpcy5nZXREYXRhKCkuYWN0aW9uPy5zcGVjKSByZXR1cm4gJ1NSNS5TcGVjaWFsaXphdGlvbic7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBnZXREcmFpbigpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldERhdGEoKS5kcmFpbiB8fCAwO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEZhZGUoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXREYXRhKCkuZmFkZSB8fCAwO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFJlY29pbENvbXBlbnNhdGlvbigpOiBudW1iZXIge1xyXG4gICAgICAgIGlmICghdGhpcy5pc1JhbmdlZFdlYXBvbigpKSByZXR1cm4gMDtcclxuICAgICAgICBjb25zdCBiYXNlID0gdGhpcy5nZXREYXRhKCk/LnJhbmdlPy5yYy52YWx1ZSA/PyAnMCc7XHJcbiAgICAgICAgcmV0dXJuIE51bWJlcihiYXNlKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSZWFjaCgpOiBudW1iZXIge1xyXG4gICAgICAgIGlmICh0aGlzLmlzTWVsZWVXZWFwb24oKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXREYXRhKCkubWVsZWU/LnJlYWNoID8/IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRlY2hub2xvZ3koKTogVGVjaG5vbG9neURhdGF8dW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAoXCJ0ZWNobm9sb2d5XCIgaW4gdGhpcy5kYXRhLmRhdGEpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEuZGF0YS50ZWNobm9sb2d5O1xyXG4gICAgfVxyXG5cclxuICAgIGdldFJhbmdlKCk6IENyaXR0ZXJQb3dlclJhbmdlfFNwZWxsUmFuZ2V8UmFuZ2VXZWFwb25EYXRhfHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKCEoXCJyYW5nZVwiIGluIHRoaXMuZGF0YS5kYXRhKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5kYXRhLnR5cGUgPT09ICdjcml0dGVyX3Bvd2VyJylcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5kYXRhLnJhbmdlIGFzIENyaXR0ZXJQb3dlclJhbmdlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5kYXRhLnR5cGUgPT09ICdzcGVsbCcpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEuZGF0YS5yYW5nZSBhcyBTcGVsbFJhbmdlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5kYXRhLnR5cGUgPT09ICd3ZWFwb24nKVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmRhdGEucmFuZ2UgYXMgUmFuZ2VXZWFwb25EYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGhhc0RlZmVuc2VUZXN0KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldERhdGEoKS5hY3Rpb24/Lm9wcG9zZWQ/LnR5cGUgPT09ICdkZWZlbnNlJztcclxuICAgIH1cclxuXHJcbiAgICBoYXNBbW1vKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IGFtbW8gPSB0aGlzLmdldEFtbW8oKTtcclxuICAgICAgICByZXR1cm4gISFhbW1vXHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSGVscGVycyB9IGZyb20gJy4uL2hlbHBlcnMnO1xyXG5pbXBvcnQgeyBTUjVJdGVtIH0gZnJvbSAnLi9TUjVJdGVtJztcclxuaW1wb3J0IFNSNUFjdG9yU2hlZXREYXRhID0gU2hhZG93cnVuLlNSNUFjdG9yU2hlZXREYXRhO1xyXG5cclxuLyoqXHJcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU1I1SXRlbVNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0PHt9LCBTUjVJdGVtPiB7XHJcbiAgICBwcml2YXRlIF9zaG93bkRlc2M6IGFueVtdO1xyXG4gICAgcHJpdmF0ZSBfc2Nyb2xsOiBzdHJpbmc7XHJcbiAgICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XHJcbiAgICAgICAgc3VwZXIoLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fc2hvd25EZXNjID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RW1iZWRkZWRJdGVtcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pdGVtLml0ZW1zIHx8IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIFNpbXBsZSBJdGVtIFNoZWV0XHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zKCkge1xyXG4gICAgICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xyXG4gICAgICAgICAgICBjbGFzc2VzOiBbJ3NyNScsICdzaGVldCcsICdpdGVtJ10sXHJcbiAgICAgICAgICAgIHdpZHRoOiA2NTAsXHJcbiAgICAgICAgICAgIGhlaWdodDogNDUwLFxyXG4gICAgICAgICAgICB0YWJzOiBbeyBuYXZTZWxlY3RvcjogJy50YWJzJywgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0Ym9keScgfV0sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHRlbXBsYXRlKCkge1xyXG4gICAgICAgIGNvbnN0IHBhdGggPSAnc3lzdGVtcy9zaGFkb3dydW41ZS9kaXN0L3RlbXBsYXRlcy9pdGVtLyc7XHJcbiAgICAgICAgcmV0dXJuIGAke3BhdGh9JHt0aGlzLml0ZW0uZGF0YS50eXBlfS5odG1sYDtcclxuICAgIH1cclxuXHJcbiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHJlcGFyZSBkYXRhIGZvciByZW5kZXJpbmcgdGhlIEl0ZW0gc2hlZXRcclxuICAgICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXHJcbiAgICAgKi9cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHN1cGVyLmdldERhdGEoKTtcclxuICAgICAgICBjb25zdCBpdGVtRGF0YSA9IGRhdGEuZGF0YTtcclxuXHJcbiAgICAgICAgaWYgKGl0ZW1EYXRhLmFjdGlvbikge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBhY3Rpb24gfSA9IGl0ZW1EYXRhO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGlvbi5tb2QgPT09IDApIGRlbGV0ZSBhY3Rpb24ubW9kO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGlvbi5saW1pdCA9PT0gMCkgZGVsZXRlIGFjdGlvbi5saW1pdDtcclxuICAgICAgICAgICAgICAgIGlmIChhY3Rpb24uZGFtYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGlvbi5kYW1hZ2UubW9kID09PSAwKSBkZWxldGUgYWN0aW9uLmRhbWFnZS5tb2Q7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGlvbi5kYW1hZ2UuYXAubW9kID09PSAwKSBkZWxldGUgYWN0aW9uLmRhbWFnZS5hcC5tb2Q7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoYWN0aW9uLmxpbWl0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGlvbi5saW1pdC5tb2QgPT09IDApIGRlbGV0ZSBhY3Rpb24ubGltaXQubW9kO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaXRlbURhdGEudGVjaG5vbG9neSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGVjaCA9IGl0ZW1EYXRhLnRlY2hub2xvZ3k7XHJcbiAgICAgICAgICAgICAgICBpZiAodGVjaC5yYXRpbmcgPT09IDApIGRlbGV0ZSB0ZWNoLnJhdGluZztcclxuICAgICAgICAgICAgICAgIGlmICh0ZWNoLnF1YW50aXR5ID09PSAwKSBkZWxldGUgdGVjaC5xdWFudGl0eTtcclxuICAgICAgICAgICAgICAgIGlmICh0ZWNoLmNvc3QgPT09IDApIGRlbGV0ZSB0ZWNoLmNvc3Q7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkYXRhWydjb25maWcnXSA9IENPTkZJRy5TUjU7XHJcbiAgICAgICAgY29uc3QgaXRlbXMgPSB0aGlzLmdldEVtYmVkZGVkSXRlbXMoKTtcclxuICAgICAgICBjb25zdCBbYW1tdW5pdGlvbiwgd2VhcG9uTW9kcywgYXJtb3JNb2RzXSA9IGl0ZW1zLnJlZHVjZShcclxuICAgICAgICAgICAgKHBhcnRzOiBbSXRlbS5EYXRhW10sIEl0ZW0uRGF0YVtdLCBJdGVtLkRhdGFbXV0sIGl0ZW06IFNSNUl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdhbW1vJykgcGFydHNbMF0ucHVzaChpdGVtLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ21vZGlmaWNhdGlvbicgJiYgXCJ0eXBlXCIgaW4gaXRlbS5kYXRhLmRhdGEgJiYgaXRlbS5kYXRhLmRhdGEudHlwZSA9PT0gJ3dlYXBvbicpIHBhcnRzWzFdLnB1c2goaXRlbS5kYXRhKTtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtb2RpZmljYXRpb24nICYmIFwidHlwZVwiIGluIGl0ZW0uZGF0YS5kYXRhICYmIGl0ZW0uZGF0YS5kYXRhLnR5cGUgPT09ICdhcm1vcicpIHBhcnRzWzJdLnB1c2goaXRlbS5kYXRhKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0cztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgW1tdLCBbXSwgW11dLFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZGF0YVsnYW1tdW5pdGlvbiddID0gYW1tdW5pdGlvbjtcclxuICAgICAgICBkYXRhWyd3ZWFwb25Nb2RzJ10gPSB3ZWFwb25Nb2RzO1xyXG4gICAgICAgIGRhdGFbJ2FybW9yTW9kcyddID0gYXJtb3JNb2RzO1xyXG4gICAgICAgIC8vIFRPRE8gc2V0IHRvIHRoZSBwcm9wZXIgYm9vbGVhbiBmb3IgaWYgdGhlIHNvdXJjZSBQREYgY2FuIGJlIGFjY2Vzc2VkXHJcbiAgICAgICAgLy8gSSdtIHRoaW5raW5nIG1heWJlIGNoZWNrIGZvciB0aGUgbW9kIGJlaW5nIGluc3RhbGxlZD9cclxuICAgICAgICBkYXRhWydoYXNTb3VyY2VQZGZBdmFpbGFibGUnXSA9IHRydWU7XHJcbiAgICAgICAgZGF0YVsnYWN0aXZlU2tpbGxzJ10gPSB0aGlzLl9nZXRBY3RpdmVTa2lsbHNGb3JTZWxlY3QoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldEFjdGl2ZVNraWxsc0ZvclNlbGVjdCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXRlbS5hY3RvcikgcmV0dXJuIENPTkZJRy5TUjUuYWN0aXZlU2tpbGxzO1xyXG4gICAgICAgIGNvbnN0IGFjdGl2ZVNraWxscyA9IEhlbHBlcnMuc29ydFNraWxscyh0aGlzLml0ZW0uYWN0b3IuZ2V0QWN0aXZlU2tpbGxzKCkpO1xyXG5cclxuICAgICAgICBjb25zdCBhY3RpdmVTa2lsbHNGb3JTZWxlY3QgPSB7fTtcclxuICAgICAgICBmb3IgKGNvbnN0IFtpZCwgc2tpbGxdIG9mIE9iamVjdC5lbnRyaWVzKGFjdGl2ZVNraWxscykpIHtcclxuICAgICAgICAgICAgLy8gTGVnYWN5IHNraWxscyBoYXZlIG5vIG5hbWUsIGJ1dCB0aGVpciBuYW1lIGlzIHRoZWlyIGlkIVxyXG4gICAgICAgICAgICAvLyBDdXN0b20gc2tpbGxzIGhhdmUgYSBuYW1lIGFuZCB0aGVpciBpZCBpcyByYW5kb20uXHJcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IHNraWxsLm5hbWUgfHwgaWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gc2tpbGwubGFiZWwgfHwgc2tpbGwubmFtZTtcclxuICAgICAgICAgICAgYWN0aXZlU2tpbGxzRm9yU2VsZWN0W2tleV0gPSBsYWJlbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBhY3RpdmVTa2lsbHNGb3JTZWxlY3Q7XHJcbiAgICB9XHJcblxyXG4gICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxyXG4gICAgICogQHBhcmFtIGh0bWwgLSAgVGhlIHByZXBhcmVkIEhUTUwgb2JqZWN0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIERPTVxyXG4gICAgICovXHJcbiAgICBhY3RpdmF0ZUxpc3RlbmVycyhodG1sKSB7XHJcbiAgICAgICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbCk7XHJcbiAgICAgICAgaWYgKHRoaXMuaXRlbS50eXBlID09PSAnd2VhcG9uJykge1xyXG4gICAgICAgICAgICAvL0B0cy1pZ25vcmUgLy8gVE9ETzogU29tZWhvdyBKcXVlcnkgZG9lc24ndCBoYXZlIGRyYWcvZHJvcCBpbiB0eXBpbmdcclxuICAgICAgICAgICAgdGhpcy5mb3JtLm9uZHJhZ292ZXIgPSAoZXZlbnQpID0+IHRoaXMuX29uRHJhZ092ZXIoZXZlbnQpO1xyXG4gICAgICAgICAgICAvL0B0cy1pZ25vcmUgLy8gVE9ETzogU29tZWhvdyBKcXVlcnkgZG9lc24ndCBoYXZlIGRyYWcvZHJvcCBpbiB0eXBpbmdcclxuICAgICAgICAgICAgdGhpcy5mb3JtLm9uZHJvcCA9IChldmVudCkgPT4gdGhpcy5fb25Ecm9wKGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaHRtbC5maW5kKCcuYWRkLW5ldy1hbW1vJykuY2xpY2sodGhpcy5fb25BZGROZXdBbW1vLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGh0bWwuZmluZCgnLmFtbW8tZXF1aXAnKS5jbGljayh0aGlzLl9vbkFtbW9FcXVpcC5iaW5kKHRoaXMpKTtcclxuICAgICAgICBodG1sLmZpbmQoJy5hbW1vLWRlbGV0ZScpLmNsaWNrKHRoaXMuX29uQW1tb1JlbW92ZS5iaW5kKHRoaXMpKTtcclxuICAgICAgICBodG1sLmZpbmQoJy5hbW1vLXJlbG9hZCcpLmNsaWNrKHRoaXMuX29uQW1tb1JlbG9hZC5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgaHRtbC5maW5kKCcuZWRpdC1pdGVtJykuY2xpY2sodGhpcy5fb25FZGl0SXRlbS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgaHRtbC5maW5kKCcuYWRkLW5ldy1tb2QnKS5jbGljayh0aGlzLl9vbkFkZFdlYXBvbk1vZC5iaW5kKHRoaXMpKTtcclxuICAgICAgICBodG1sLmZpbmQoJy5tb2QtZXF1aXAnKS5jbGljayh0aGlzLl9vbldlYXBvbk1vZEVxdWlwLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGh0bWwuZmluZCgnLm1vZC1kZWxldGUnKS5jbGljayh0aGlzLl9vbldlYXBvbk1vZFJlbW92ZS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgaHRtbC5maW5kKCcuYWRkLW5ldy1saWNlbnNlJykuY2xpY2sodGhpcy5fb25BZGRMaWNlbnNlLmJpbmQodGhpcykpO1xyXG4gICAgICAgIGh0bWwuZmluZCgnLmxpY2Vuc2UtZGVsZXRlJykub24oJ2NsaWNrJywgdGhpcy5fb25SZW1vdmVMaWNlbnNlLmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICBodG1sLmZpbmQoJy5vcGVuLXNvdXJjZS1wZGYnKS5vbignY2xpY2snLCB0aGlzLl9vbk9wZW5Tb3VyY2VQZGYuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgIGh0bWwuZmluZCgnLmhhcy1kZXNjJykuY2xpY2soKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5saXN0LWl0ZW0nKTtcclxuICAgICAgICAgICAgY29uc3QgaWlkID0gJChpdGVtKS5kYXRhKCkuaXRlbTtcclxuICAgICAgICAgICAgY29uc3QgZmllbGQgPSBpdGVtLm5leHQoKTtcclxuICAgICAgICAgICAgZmllbGQudG9nZ2xlKCk7XHJcbiAgICAgICAgICAgIGlmIChpaWQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChmaWVsZC5pcygnOnZpc2libGUnKSkgdGhpcy5fc2hvd25EZXNjLnB1c2goaWlkKTtcclxuICAgICAgICAgICAgICAgIGVsc2UgdGhpcy5fc2hvd25EZXNjID0gdGhpcy5fc2hvd25EZXNjLmZpbHRlcigodmFsKSA9PiB2YWwgIT09IGlpZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaHRtbC5maW5kKCcuaGlkZGVuJykuaGlkZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbkRyYWdPdmVyKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgX29uRHJvcChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgbGV0IGRhdGE7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKSk7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgIT09ICdJdGVtJykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NoYWRvd3J1bjVlIHwgQ2FuIG9ubHkgZHJvcCBJdGVtcycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTaGFkb3dydW41ZSB8IGRyb3AgZXJyb3InKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGl0ZW07XHJcbiAgICAgICAgLy8gQ2FzZSAxIC0gRGF0YSBleHBsaWNpdGx5IHByb3ZpZGVkXHJcbiAgICAgICAgaWYgKGRhdGEuZGF0YSkge1xyXG4gICAgICAgICAgICAvLyBUT0RPIHRlc3RcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXRlbS5pc093bmVkICYmIGRhdGEuYWN0b3JJZCA9PT0gdGhpcy5pdGVtLmFjdG9yPy5faWQgJiYgZGF0YS5kYXRhLl9pZCA9PT0gdGhpcy5pdGVtLl9pZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NoYWRvd3J1bjVlIHwgQ2FudCBkcm9wIGl0ZW0gb24gaXRzZWxmJyk7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdBcmUgeW91IHRyeWluZyB0byBicmVhayB0aGUgZ2FtZT8/Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaXRlbSA9IGRhdGE7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhLnBhY2spIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgIC8vIENhc2UgMiAtIEZyb20gYSBDb21wZW5kaXVtIFBhY2tcclxuICAgICAgICAgICAgLy8gVE9ETyB0ZXN0XHJcbiAgICAgICAgICAgIGl0ZW0gPSBhd2FpdCB0aGlzLl9nZXRJdGVtRnJvbUNvbGxlY3Rpb24oZGF0YS5wYWNrLCBkYXRhLmlkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBDYXNlIDMgLSBGcm9tIGEgV29ybGQgRW50aXR5XHJcbiAgICAgICAgICAgIGl0ZW0gPSBnYW1lLml0ZW1zLmdldChkYXRhLmlkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaXRlbS5jcmVhdGVPd25lZEl0ZW0oaXRlbS5kYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0SXRlbUZyb21Db2xsZWN0aW9uKGNvbGxlY3Rpb24sIGl0ZW1JZCkge1xyXG4gICAgICAgIGNvbnN0IHBhY2sgPSBnYW1lLnBhY2tzLmZpbmQoKHApID0+IHAuY29sbGVjdGlvbiA9PT0gY29sbGVjdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIHBhY2suZ2V0RW50aXR5KGl0ZW1JZCk7XHJcbiAgICB9XHJcblxyXG4gICAgX2V2ZW50SWQoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHJldHVybiBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5saXN0LWl0ZW0nKS5kYXRhc2V0Lml0ZW1JZDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBfb25PcGVuU291cmNlUGRmKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLml0ZW0ub3BlblBkZlNvdXJjZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIF9vbkVkaXRJdGVtKGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuaXRlbS5nZXRPd25lZEl0ZW0odGhpcy5fZXZlbnRJZChldmVudCkpO1xyXG4gICAgICAgIGlmIChpdGVtKSB7XHJcbiAgICAgICAgICAgIGl0ZW0uc2hlZXQucmVuZGVyKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBfb25BZGRMaWNlbnNlKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLml0ZW0uYWRkTmV3TGljZW5zZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIF9vblJlbW92ZUxpY2Vuc2UoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmluZGV4O1xyXG4gICAgICAgIGlmIChpbmRleCA+PSAwKSBhd2FpdCB0aGlzLml0ZW0ucmVtb3ZlTGljZW5zZShpbmRleCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgX29uV2VhcG9uTW9kUmVtb3ZlKGV2ZW50KSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5fb25Pd25lZEl0ZW1SZW1vdmUoZXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIF9vbldlYXBvbk1vZEVxdWlwKGV2ZW50KSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5pdGVtLmVxdWlwV2VhcG9uTW9kKHRoaXMuX2V2ZW50SWQoZXZlbnQpKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBfb25BZGRXZWFwb25Nb2QoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGNvbnN0IHR5cGUgPSAnbW9kaWZpY2F0aW9uJztcclxuICAgICAgICBjb25zdCBpdGVtRGF0YSA9IHtcclxuICAgICAgICAgICAgbmFtZTogYE5ldyAke0hlbHBlcnMubGFiZWwodHlwZSl9YCxcclxuICAgICAgICAgICAgdHlwZTogdHlwZSxcclxuICAgICAgICAgICAgZGF0YTogZHVwbGljYXRlKGdhbWUuc3lzdGVtLm1vZGVsLkl0ZW0ubW9kaWZpY2F0aW9uKSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGl0ZW1EYXRhLmRhdGEudHlwZSA9ICd3ZWFwb24nO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBjb25zdCBpdGVtID0gSXRlbS5jcmVhdGVPd25lZChpdGVtRGF0YSwgdGhpcy5pdGVtKTtcclxuICAgICAgICBhd2FpdCB0aGlzLml0ZW0uY3JlYXRlT3duZWRJdGVtKGl0ZW0uZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgX29uQW1tb1JlbG9hZChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnJlbG9hZEFtbW8oKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBfb25BbW1vUmVtb3ZlKGV2ZW50KSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5fb25Pd25lZEl0ZW1SZW1vdmUoZXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIF9vbkFtbW9FcXVpcChldmVudCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS5lcXVpcEFtbW8odGhpcy5fZXZlbnRJZChldmVudCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIF9vbkFkZE5ld0FtbW8oZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGNvbnN0IHR5cGUgPSAnYW1tbyc7XHJcbiAgICAgICAgY29uc3QgaXRlbURhdGEgPSB7XHJcbiAgICAgICAgICAgIG5hbWU6IGBOZXcgJHtIZWxwZXJzLmxhYmVsKHR5cGUpfWAsXHJcbiAgICAgICAgICAgIHR5cGU6IHR5cGUsXHJcbiAgICAgICAgICAgIGRhdGE6IGR1cGxpY2F0ZShnYW1lLnN5c3RlbS5tb2RlbC5JdGVtLmFtbW8pLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGNvbnN0IGl0ZW0gPSBJdGVtLmNyZWF0ZU93bmVkKGl0ZW1EYXRhLCB0aGlzLml0ZW0pO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS5jcmVhdGVPd25lZEl0ZW0oaXRlbS5kYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBfb25Pd25lZEl0ZW1SZW1vdmUoZXZlbnQpIHtcclxuICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgY29uc3QgdXNlckNvbnNlbnRlZCA9IGF3YWl0IEhlbHBlcnMuY29uZmlybURlbGV0aW9uKCk7XHJcbiAgICAgICAgaWYgKCF1c2VyQ29uc2VudGVkKSByZXR1cm47XHJcblxyXG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS5kZWxldGVPd25lZEl0ZW0odGhpcy5fZXZlbnRJZChldmVudCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX2ZpbmRBY3RpdmVMaXN0KCkge1xyXG4gICAgICAgIHJldHVybiAkKHRoaXMuZWxlbWVudCkuZmluZCgnLnRhYi5hY3RpdmUgLnNjcm9sbC1hcmVhJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFRoaXMgaXMgbmVlZGVkIHRvIGNpcmN1bXZlbnQgQXBwbGljYXRpb24uY2xvc2Ugc2V0dGluZyBjbG9zZWQgc3RhdGUgZWFybHksIGR1ZSB0byBpdCdzIGFzeW5jIGFuaW1hdGlvblxyXG4gICAgICogLSBUaGUgbGVuZ3RoIG9mIHRoZSBjbG9zaW5nIGFuaW1hdGlvbiBjYW4ndCBiZSBsb25nZXIgdGhlbiBhbnkgYXdhaXQgdGltZSBpbiB0aGUgY2xvc2luZyBjeWNsZVxyXG4gICAgICogLSBGb3JtQXBwbGljYXRpb24uX29uU3VibWl0IHdpbGwgb3RoZXJ3aXNlIHNldCAuX3N0YXRlIHRvIFJFTkRFUkVEIGV2ZW4gaWYgdGhlIEFwcGxpY2F0aW9uIHdpbmRvdyBoYXMgY2xvc2VkIGFscmVhZHlcclxuICAgICAqIC0gU3Vic2VxdWVudCByZW5kZXIgY2FsbHMgdGhlbiB3aWxsIHNob3cgdGhlIHdpbmRvdyBhZ2FpbiwgZHVlIHRvIGl0J3Mgc3RhdGVcclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGZpeFN0YWxlUmVuZGVyZWRTdGF0ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5fc3RhdGUgPT09IEFwcGxpY2F0aW9uLlJFTkRFUl9TVEFURVMuUkVOREVSRUQgJiYgdWkud2luZG93c1t0aGlzLmFwcElkXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgU1I1SXRlbVNoZWV0IGFwcCBmb3IgJHt0aGlzLmVudGl0eS5uYW1lfSBpcyBzZXQgYXMgUkVOREVSRUQgYnV0IGhhcyBubyB3aW5kb3cgcmVnaXN0ZXJlZC4gRml4aW5nIGFwcCBpbnRlcm5hbCByZW5kZXIgc3RhdGUuIFRoaXMgaXMgYSBrbm93biBidWcuYCk7XHJcbiAgICAgICAgICAgIC8vIEhvdGZpeGluZyBpbnN0ZWFkIG9mIHRoaXMuY2xvc2UoKSBzaW5jZSBGb3JtQXBwbGljYXRpb24uY2xvc2UoKSBleHBlY3RzIGZvcm0gZWxlbWVudHMsIHdoaWNoIGRvbid0IGV4aXN0IGFueW1vcmUuXHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXRlID0gQXBwbGljYXRpb24uUkVOREVSX1NUQVRFUy5DTE9TRUQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgYXN5bmMgX3JlbmRlcihmb3JjZSA9IGZhbHNlLCBvcHRpb25zID0ge30pIHtcclxuICAgICAgICAvLyBOT1RFOiBUaGlzIGlzIGZvciBhIHRpbWluZyBidWcuIFNlZSBmdW5jdGlvbiBkb2MgZm9yIGNvZGUgcmVtb3ZhbC4gR29vZCBsdWNrLCB0aGVyZSBiZSBkcmFnb25zIGhlcmUuIC0gdGFNXHJcbiAgICAgICAgdGhpcy5maXhTdGFsZVJlbmRlcmVkU3RhdGUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2F2ZVNjcm9sbFBvc2l0aW9ucygpO1xyXG4gICAgICAgIGF3YWl0IHN1cGVyLl9yZW5kZXIoZm9yY2UsIG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuX3Jlc3RvcmVTY3JvbGxQb3NpdGlvbnMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIF9yZXN0b3JlU2Nyb2xsUG9zaXRpb25zKCkge1xyXG4gICAgICAgIGNvbnN0IGFjdGl2ZUxpc3QgPSB0aGlzLl9maW5kQWN0aXZlTGlzdCgpO1xyXG4gICAgICAgIGlmIChhY3RpdmVMaXN0Lmxlbmd0aCAmJiB0aGlzLl9zY3JvbGwgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBhY3RpdmVMaXN0LnByb3AoJ3Njcm9sbFRvcCcsIHRoaXMuX3Njcm9sbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX3NhdmVTY3JvbGxQb3NpdGlvbnMoKSB7XHJcbiAgICAgICAgY29uc3QgYWN0aXZlTGlzdCA9IHRoaXMuX2ZpbmRBY3RpdmVMaXN0KCk7XHJcbiAgICAgICAgaWYgKGFjdGl2ZUxpc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbCA9IGFjdGl2ZUxpc3QucHJvcCgnc2Nyb2xsVG9wJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGUgYSBNYWNybyBmcm9tIGFuIEl0ZW0gZHJvcC5cclxuICogR2V0IGFuIGV4aXN0aW5nIGl0ZW0gbWFjcm8gaWYgb25lIGV4aXN0cywgb3RoZXJ3aXNlIGNyZWF0ZSBhIG5ldyBvbmUuXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBpdGVtICAgICBUaGUgaXRlbSBkYXRhXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBzbG90ICAgICBUaGUgaG90YmFyIHNsb3QgdG8gdXNlXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlfVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUl0ZW1NYWNybyhpdGVtLCBzbG90KSB7XHJcbiAgICBjb25zdCBjb21tYW5kID0gYGdhbWUuc2hhZG93cnVuNWUucm9sbEl0ZW1NYWNybyhcIiR7aXRlbS5uYW1lfVwiKTtgO1xyXG4gICAgbGV0IG1hY3JvID0gZ2FtZS5tYWNyb3MuZW50aXRpZXMuZmluZCgobSkgPT4gbS5uYW1lID09PSBpdGVtLm5hbWUpO1xyXG4gICAgaWYgKCFtYWNybykge1xyXG4gICAgICAgIG1hY3JvID0gKGF3YWl0IE1hY3JvLmNyZWF0ZShcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJ3NjcmlwdCcsXHJcbiAgICAgICAgICAgICAgICBpbWc6IGl0ZW0uaW1nLFxyXG4gICAgICAgICAgICAgICAgY29tbWFuZDogY29tbWFuZCxcclxuICAgICAgICAgICAgICAgIGZsYWdzOiB7ICdzaGFkb3dydW41ZS5pdGVtTWFjcm8nOiB0cnVlIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheVNoZWV0OiBmYWxzZSB9LFxyXG4gICAgICAgICkpIGFzIE1hY3JvO1xyXG4gICAgfVxyXG4gICAgaWYgKG1hY3JvKSBnYW1lLnVzZXIuYXNzaWduSG90YmFyTWFjcm8obWFjcm8sIHNsb3QpO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGEgTWFjcm8gZnJvbSBhbiBJdGVtIGRyb3AuXHJcbiAqIEdldCBhbiBleGlzdGluZyBpdGVtIG1hY3JvIGlmIG9uZSBleGlzdHMsIG90aGVyd2lzZSBjcmVhdGUgYSBuZXcgb25lLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gaXRlbU5hbWVcclxuICogQHJldHVybiB7UHJvbWlzZX1cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByb2xsSXRlbU1hY3JvKGl0ZW1OYW1lKSB7XHJcbiAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpO1xyXG4gICAgbGV0IGFjdG9yO1xyXG4gICAgaWYgKHNwZWFrZXIudG9rZW4pIGFjdG9yID0gZ2FtZS5hY3RvcnMudG9rZW5zW3NwZWFrZXIudG9rZW5dO1xyXG4gICAgaWYgKCFhY3RvcikgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoc3BlYWtlci5hY3Rvcik7XHJcbiAgICBjb25zdCBpdGVtID0gYWN0b3IgPyBhY3Rvci5pdGVtcy5maW5kKChpKSA9PiBpLm5hbWUgPT09IGl0ZW1OYW1lKSA6IG51bGw7XHJcbiAgICBpZiAoIWl0ZW0pIHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMud2FybihgWW91ciBjb250cm9sbGVkIEFjdG9yIGRvZXMgbm90IGhhdmUgYW4gaXRlbSBuYW1lZCAke2l0ZW1OYW1lfWApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBpdGVtLmNhc3RBY3Rpb24oKTtcclxufSIsImltcG9ydCB7IEhhbmRsZWJhck1hbmFnZXIgfSBmcm9tICcuL2hhbmRsZWJhcnMvSGFuZGxlYmFyTWFuYWdlcic7XHJcbmltcG9ydCB7SG9va3NNYW5hZ2VyfSBmcm9tIFwiLi9ob29rc1wiO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogIEZvdW5kcnkgVlRUIEluaXRpYWxpemF0aW9uICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcblxyXG5Ib29rc01hbmFnZXIucmVnaXN0ZXJIb29rcygpO1xyXG5IYW5kbGViYXJNYW5hZ2VyLnJlZ2lzdGVySGVscGVycygpOyIsImltcG9ydCB7IFZlcnNpb25NaWdyYXRpb24gfSBmcm9tICcuL1ZlcnNpb25NaWdyYXRpb24nO1xyXG5pbXBvcnQgeyBMZWdhY3lNaWdyYXRpb24gfSBmcm9tICcuL3ZlcnNpb25zL0xlZ2FjeU1pZ3JhdGlvbic7XHJcbmltcG9ydCB7IFZlcnNpb24wXzZfNSB9IGZyb20gJy4vdmVyc2lvbnMvVmVyc2lvbjBfNl81JztcclxuaW1wb3J0IHsgVmVyc2lvbjBfNl8xMCB9IGZyb20gJy4vdmVyc2lvbnMvVmVyc2lvbjBfNl8xMCc7XHJcbmltcG9ydCB7VmVyc2lvbjBfN18yfSBmcm9tIFwiLi92ZXJzaW9ucy9WZXJzaW9uMF83XzJcIjtcclxuXHJcbnR5cGUgVmVyc2lvbkRlZmluaXRpb24gPSB7XHJcbiAgICB2ZXJzaW9uTnVtYmVyOiBzdHJpbmc7XHJcbiAgICBtaWdyYXRpb246IFZlcnNpb25NaWdyYXRpb247XHJcbn07XHJcbmV4cG9ydCBjbGFzcyBNaWdyYXRvciB7XHJcbiAgICAvLyBNYXAgb2YgYWxsIHZlcnNpb24gbWlncmF0aW9ucyB0byB0aGVpciB0YXJnZXQgdmVyc2lvbiBudW1iZXJzLlxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgc19WZXJzaW9uczogVmVyc2lvbkRlZmluaXRpb25bXSA9IFtcclxuICAgICAgICB7IHZlcnNpb25OdW1iZXI6IExlZ2FjeU1pZ3JhdGlvbi5UYXJnZXRWZXJzaW9uLCBtaWdyYXRpb246IG5ldyBMZWdhY3lNaWdyYXRpb24oKSB9LFxyXG4gICAgICAgIHsgdmVyc2lvbk51bWJlcjogVmVyc2lvbjBfNl81LlRhcmdldFZlcnNpb24sIG1pZ3JhdGlvbjogbmV3IFZlcnNpb24wXzZfNSgpIH0sXHJcbiAgICAgICAgeyB2ZXJzaW9uTnVtYmVyOiBWZXJzaW9uMF82XzEwLlRhcmdldFZlcnNpb24sIG1pZ3JhdGlvbjogbmV3IFZlcnNpb24wXzZfMTAoKSB9LFxyXG4gICAgICAgIHsgdmVyc2lvbk51bWJlcjogVmVyc2lvbjBfN18yLlRhcmdldFZlcnNpb24sIG1pZ3JhdGlvbjogbmV3IFZlcnNpb24wXzdfMigpIH0sXHJcbiAgICBdO1xyXG5cclxuICAgIC8vVE9ETzogQ2FsbCBvbiBJbml0KClcclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgQmVnaW5NaWdyYXRpb24oKSB7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRWZXJzaW9uID0gZ2FtZS5zZXR0aW5ncy5nZXQoVmVyc2lvbk1pZ3JhdGlvbi5NT0RVTEVfTkFNRSwgVmVyc2lvbk1pZ3JhdGlvbi5LRVlfREFUQV9WRVJTSU9OKTtcclxuICAgICAgICBpZiAoY3VycmVudFZlcnNpb24gPT09IHVuZGVmaW5lZCB8fCBjdXJyZW50VmVyc2lvbiA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjdXJyZW50VmVyc2lvbiA9IFZlcnNpb25NaWdyYXRpb24uTk9fVkVSU0lPTjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG1pZ3JhdGlvbnMgPSBNaWdyYXRvci5zX1ZlcnNpb25zLmZpbHRlcigoeyB2ZXJzaW9uTnVtYmVyIH0pID0+IHtcclxuICAgICAgICAgICAgLy8gaWYgdmVyc2lvbk5VbWJlciBpcyBncmVhdGVyIHRoYW4gY3VycmVudFZlcnNpb24sIHdlIG5lZWQgdG8gYXBwbHkgdGhpcyBtaWdyYXRpb25cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZVZlcnNpb24odmVyc2lvbk51bWJlciwgY3VycmVudFZlcnNpb24pID09PSAxO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBObyBtaWdyYXRpb25zIGFyZSByZXF1aXJlZCwgZXhpdC5cclxuICAgICAgICBpZiAobWlncmF0aW9ucy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbG9jYWxpemVkV2FybmluZ1RpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuTUlHUkFUSU9OLldhcm5pbmdUaXRsZScpO1xyXG4gICAgICAgIGNvbnN0IGxvY2FsaXplZFdhcm5pbmdIZWFkZXIgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5NSUdSQVRJT04uV2FybmluZ0hlYWRlcicpO1xyXG4gICAgICAgIGNvbnN0IGxvY2FsaXplZFdhcm5pbmdSZXF1aXJlZCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1Lk1JR1JBVElPTi5XYXJuaW5nUmVxdWlyZWQnKTtcclxuICAgICAgICBjb25zdCBsb2NhbGl6ZWRXYXJuaW5nRGVzY3JpcHRpb24gPSBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5NSUdSQVRJT04uV2FybmluZ0Rlc2NyaXB0aW9uJyk7XHJcbiAgICAgICAgY29uc3QgbG9jYWxpemVkV2FybmluZ0JhY2t1cCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1Lk1JR1JBVElPTi5XYXJuaW5nQmFja3VwJyk7XHJcbiAgICAgICAgY29uc3QgbG9jYWxpemVkV2FybmluZ0JlZ2luID0gZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuTUlHUkFUSU9OLkJlZ2luTWlncmF0aW9uJyk7XHJcblxyXG4gICAgICAgIGNvbnN0IGQgPSBuZXcgRGlhbG9nKHtcclxuICAgICAgICAgICAgdGl0bGU6IGxvY2FsaXplZFdhcm5pbmdUaXRsZSxcclxuICAgICAgICAgICAgY29udGVudDpcclxuICAgICAgICAgICAgICAgIGA8aDIgc3R5bGU9XCJjb2xvcjogcmVkOyB0ZXh0LWFsaWduOiBjZW50ZXJcIj4ke2xvY2FsaXplZFdhcm5pbmdIZWFkZXJ9PC9oMj5gICtcclxuICAgICAgICAgICAgICAgIGA8cCBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlclwiPjxpPiR7bG9jYWxpemVkV2FybmluZ1JlcXVpcmVkfTwvaT48L3A+YCArXHJcbiAgICAgICAgICAgICAgICBgPHA+JHtsb2NhbGl6ZWRXYXJuaW5nRGVzY3JpcHRpb259PC9wPmAgK1xyXG4gICAgICAgICAgICAgICAgYDxoMyBzdHlsZT1cImNvbG9yOiByZWRcIj4ke2xvY2FsaXplZFdhcm5pbmdCYWNrdXB9PC9oMz5gLFxyXG4gICAgICAgICAgICBidXR0b25zOiB7XHJcbiAgICAgICAgICAgICAgICBvazoge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBsb2NhbGl6ZWRXYXJuaW5nQmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMubWlncmF0ZShtaWdyYXRpb25zKSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6ICdvaycsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZC5yZW5kZXIodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgbWlncmF0ZShtaWdyYXRpb25zOiBWZXJzaW9uRGVmaW5pdGlvbltdKSB7XHJcbiAgICAgICAgLy8gd2Ugd2FudCB0byBhcHBseSBtaWdyYXRpb25zIGluIGFzY2VuZGluZyBvcmRlciB1bnRpbCB3ZSdyZSB1cCB0byB0aGUgbGF0ZXN0XHJcbiAgICAgICAgbWlncmF0aW9ucy5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBhcmVWZXJzaW9uKGEudmVyc2lvbk51bWJlciwgYi52ZXJzaW9uTnVtYmVyKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5taWdyYXRlV29ybGQoZ2FtZSwgbWlncmF0aW9ucyk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5taWdyYXRlQ29tcGVuZGl1bShnYW1lLCBtaWdyYXRpb25zKTtcclxuXHJcbiAgICAgICAgY29uc3QgbG9jYWxpemVkV2FybmluZ1RpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuTUlHUkFUSU9OLlN1Y2Nlc3NUaXRsZScpO1xyXG4gICAgICAgIGNvbnN0IGxvY2FsaXplZFdhcm5pbmdIZWFkZXIgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5NSUdSQVRJT04uU3VjY2Vzc0hlYWRlcicpO1xyXG4gICAgICAgIGNvbnN0IGxvY2FsaXplZFN1Y2Nlc3NEZXNjcmlwdGlvbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1Lk1JR1JBVElPTi5TdWNjZXNzRGVzY3JpcHRpb24nKTtcclxuICAgICAgICBjb25zdCBsb2NhbGl6ZWRTdWNjZXNzUGFja3NJbmZvID0gZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuTUlHUkFUSU9OLlN1Y2Nlc3NQYWNrc0luZm8nKTtcclxuICAgICAgICBjb25zdCBsb2NhbGl6ZWRTdWNjZXNzQ29uZmlybSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1Lk1JR1JBVElPTi5TdWNjZXNzQ29uZmlybScpO1xyXG4gICAgICAgIGNvbnN0IHBhY2tzRGlhbG9nID0gbmV3IERpYWxvZyh7XHJcbiAgICAgICAgICAgIHRpdGxlOiBsb2NhbGl6ZWRXYXJuaW5nVGl0bGUsXHJcbiAgICAgICAgICAgIGNvbnRlbnQ6XHJcbiAgICAgICAgICAgICAgICBgPGgyIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBjb2xvcjogZ3JlZW5cIj4ke2xvY2FsaXplZFdhcm5pbmdIZWFkZXJ9PC9oMj5gICtcclxuICAgICAgICAgICAgICAgIGA8cD4ke2xvY2FsaXplZFN1Y2Nlc3NEZXNjcmlwdGlvbn08L3A+YCArXHJcbiAgICAgICAgICAgICAgICBgPHAgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXJcIj48aT4ke2xvY2FsaXplZFN1Y2Nlc3NQYWNrc0luZm99PC9pPjwvcD5gLFxyXG4gICAgICAgICAgICBidXR0b25zOiB7XHJcbiAgICAgICAgICAgICAgICBvazoge1xyXG4gICAgICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1jaGVja1wiPjwvaT4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBsb2NhbGl6ZWRTdWNjZXNzQ29uZmlybSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6ICdvaycsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGFja3NEaWFsb2cucmVuZGVyKHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWlncmF0ZSBhbGwgd29ybGQgb2JqZWN0c1xyXG4gICAgICogQHBhcmFtIGdhbWVcclxuICAgICAqIEBwYXJhbSBtaWdyYXRpb25zXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGFzeW5jIG1pZ3JhdGVXb3JsZChnYW1lOiBHYW1lLCBtaWdyYXRpb25zOiBWZXJzaW9uRGVmaW5pdGlvbltdKSB7XHJcbiAgICAgICAgLy8gUnVuIHRoZSBtaWdyYXRpb25zIGluIG9yZGVyXHJcbiAgICAgICAgZm9yIChjb25zdCB7IG1pZ3JhdGlvbiB9IG9mIG1pZ3JhdGlvbnMpIHtcclxuICAgICAgICAgICAgYXdhaXQgbWlncmF0aW9uLk1pZ3JhdGUoZ2FtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSXRlcmF0ZSBvdmVyIGFsbCB3b3JsZCBjb21wZW5kaXVtIHBhY2tzXHJcbiAgICAgKiBAcGFyYW0gZ2FtZSBHYW1lIHRoYXQgd2lsbCBiZSBtaWdyYXRlZFxyXG4gICAgICogQHBhcmFtIG1pZ3JhdGlvbnMgSW5zdGFuY2VzIG9mIHRoZSB2ZXJzaW9uIG1pZ3JhdGlvblxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyBhc3luYyBtaWdyYXRlQ29tcGVuZGl1bShnYW1lOiBHYW1lLCBtaWdyYXRpb25zOiBWZXJzaW9uRGVmaW5pdGlvbltdKSB7XHJcbiAgICAgICAgLy8gTWlncmF0ZSBXb3JsZCBDb21wZW5kaXVtIFBhY2tzXHJcbiAgICAgICAgY29uc3QgcGFja3MgPSBnYW1lLnBhY2tzLmZpbHRlcigocGFjaykgPT4gcGFjay5tZXRhZGF0YS5wYWNrYWdlID09PSAnd29ybGQnICYmIFsnQWN0b3InLCAnSXRlbScsICdTY2VuZSddLmluY2x1ZGVzKHBhY2subWV0YWRhdGEuZW50aXR5KSk7XHJcblxyXG4gICAgICAgIC8vIFJ1biB0aGUgbWlncmF0aW9ucyBpbiBvcmRlciBvbiBlYWNoIHBhY2suXHJcbiAgICAgICAgZm9yIChjb25zdCBwYWNrIG9mIHBhY2tzKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgeyBtaWdyYXRpb24gfSBvZiBtaWdyYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBtaWdyYXRpb24uTWlncmF0ZUNvbXBlbmRpdW1QYWNrKHBhY2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGZvdW5kIGF0OiBodHRwczovL2hlbGxvYWNtLmNvbS90aGUtamF2YXNjcmlwdC1mdW5jdGlvbi10by1jb21wYXJlLXZlcnNpb24tbnVtYmVyLXN0cmluZ3MvXHJcbiAgICAvLyB1cGRhdGVkIGZvciB0eXBlc2NyaXB0XHJcbiAgICAvKipcclxuICAgICAqIGNvbXBhcmUgdHdvIHZlcnNpb24gbnVtYmVycywgcmV0dXJucyAxIGlmIHYxID4gdjIsIC0xIGlmIHYxIDwgdjIsIDAgaWYgZXF1YWxcclxuICAgICAqIEBwYXJhbSB2MVxyXG4gICAgICogQHBhcmFtIHYyXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgY29tcGFyZVZlcnNpb24odjE6IHN0cmluZywgdjI6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHMxID0gdjEuc3BsaXQoJy4nKS5tYXAoKHMpID0+IHBhcnNlSW50KHMsIDEwKSk7XHJcbiAgICAgICAgY29uc3QgczIgPSB2Mi5zcGxpdCgnLicpLm1hcCgocykgPT4gcGFyc2VJbnQocywgMTApKTtcclxuICAgICAgICBjb25zdCBrID0gTWF0aC5taW4odjEubGVuZ3RoLCB2Mi5sZW5ndGgpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgazsgKytpKSB7XHJcbiAgICAgICAgICAgIGlmIChzMVtpXSA+IHMyW2ldKSByZXR1cm4gMTtcclxuICAgICAgICAgICAgaWYgKHMxW2ldIDwgczJbaV0pIHJldHVybiAtMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHYxLmxlbmd0aCA9PT0gdjIubGVuZ3RoID8gMCA6IHYxLmxlbmd0aCA8IHYyLmxlbmd0aCA/IC0xIDogMTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBTUjVBY3RvciB9IGZyb20gJy4uL2FjdG9yL1NSNUFjdG9yJztcclxuXHJcbi8qKlxyXG4gKiBDb252ZXJ0cyBhIGdhbWUncyBkYXRhIG1vZGVsIGZyb20gc291cmNlIHZlcnNpb24gdG8gYSB0YXJnZXQgdmVyc2lvbi5cclxuICogRXh0ZW5kaW5nIGNsYXNzZXMgYXJlIG9ubHkgcmVxdWlyZWQgdG8gaGFuZGxlIGl0ZW1zLCBhY3RvcnMsIGFuZCBzY2VuZXMsXHJcbiAqICBvdGhlciBtZXRob2RzIGFyZSBpbXBsZW1lbnRhYmxlIHB1cmVseSBmb3IgY29udmVuaWVuY2UgYW5kIGF0b21pY2l0eS5cclxuICovXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBWZXJzaW9uTWlncmF0aW9uIHtcclxuICAgIHN0YXRpYyByZWFkb25seSBNT0RVTEVfTkFNRSA9ICdzaGFkb3dydW41ZSc7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgS0VZX0RBVEFfVkVSU0lPTiA9ICdzeXN0ZW1NaWdyYXRpb25WZXJzaW9uJztcclxuICAgIHN0YXRpYyByZWFkb25seSBOT19WRVJTSU9OID0gJzAnO1xyXG5cclxuICAgIHByaXZhdGUgbV9BYm9ydDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBtX0Fib3J0UmVhc29uOiBzdHJpbmc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYWxsb3dlZCB2ZXJzaW9uIHRoaXMgbWlncmF0b3Igc2hvdWxkIGJlIGFibGUgdG8gb3BlcmF0ZSBvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFic3RyYWN0IGdldCBTb3VyY2VWZXJzaW9uKCk6IHN0cmluZztcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHJlc3VsdGluZyB2ZXJzaW9uIHRoaXMgbWlncmF0b3Igd2lsbCBwcm9kdWNlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0IFRhcmdldFZlcnNpb24oKTogc3RyaW5nO1xyXG5cclxuICAgIHB1YmxpYyBnZXQgU291cmNlVmVyc2lvbkZyaWVuZGx5TmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBgdiR7dGhpcy5Tb3VyY2VWZXJzaW9ufWA7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0IFRhcmdldFZlcnNpb25GcmllbmRseU5hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gYHYke3RoaXMuVGFyZ2V0VmVyc2lvbn1gO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmxhZyB0aGUgbWlncmF0aW9uIHRvIGJlIGFib3J0ZWQuXHJcbiAgICAgKiBAcGFyYW0gcmVhc29uIFRoZSByZWFzb24gdGhhdCB0aGUgbWlncmF0aW9uIG11c3QgYmUgYWJvcnRlZCwgdG8gYmUgZGlzcGxheWVkXHJcbiAgICAgKiAgdG8gdGhlIHVzZXIgYW5kIHJldHVybmVkIGZyb20gdGhlIG1pZ3JhdGlvbiBjYWxsLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgYWJvcnQocmVhc29uOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm1fQWJvcnQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubV9BYm9ydFJlYXNvbiA9IHJlYXNvbjtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihgRGF0YSBtaWdyYXRpb24gaGFzIGJlZW4gYWJvcnRlZDogJHtyZWFzb259YCwgeyBwZXJtYW5lbnQ6IHRydWUgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCZWdpbiBtaWdyYXRpb24gZm9yIHRoZSBzcGVjaWZpZWQgZ2FtZS5cclxuICAgICAqIEBwYXJhbSBnYW1lIFRoZSB3b3JsZCB0aGF0IHNob3VsZCBiZSBtaWdyYXRlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIE1pZ3JhdGUoZ2FtZTogR2FtZSkge1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmUgVE9ETyBVbmlnbm9yZSB3aGVuIEZvdW5kcnkgVHlwZXMgdXBkYXRlc1xyXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ1NSNS5NSUdSQVRJT04uQmVnaW5Ob3RpZmljYXRpb24nKX0gJHt0aGlzLlNvdXJjZVZlcnNpb25GcmllbmRseU5hbWV9IC0+ICR7dGhpcy5UYXJnZXRWZXJzaW9uRnJpZW5kbHlOYW1lfS5gKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlIFRPRE8gVW5pZ25vcmUgd2hlbiBGb3VuZHJ5IFR5cGVzIHVwZGF0ZXNcclxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdTUjUuTUlHUkFUSU9OLkRvTm90Q2xvc2VOb3RpZmljYXRpb24nKSwge1xyXG4gICAgICAgICAgICBwZXJtYW5lbnQ6IHRydWUsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIE1hcCBvZiBlbnRpdGllcyB0byB1cGRhdGUsIHN0b3JlIHVudGlsIGxhdGVyIHRvIHJlZHVjZSBjaGFuY2Ugb2YgcGFydGlhbCB1cGRhdGVzXHJcbiAgICAgICAgLy8gd2hpY2ggbWF5IHJlc3VsdCBpbiBpbXBvc3NpYmxlIGdhbWUgc3RhdGVzLlxyXG4gICAgICAgIGNvbnN0IGVudGl0eVVwZGF0ZXM6IE1hcDxFbnRpdHksIEVudGl0eVVwZGF0ZT4gPSBuZXcgTWFwPEVudGl0eSwgRW50aXR5VXBkYXRlPigpO1xyXG5cclxuICAgICAgICAvLyBNaWdyYXRlIFdvcmxkIEl0ZW1zXHJcbiAgICAgICAgYXdhaXQgdGhpcy5QcmVNaWdyYXRlSXRlbURhdGEoZ2FtZSwgZW50aXR5VXBkYXRlcyk7XHJcbiAgICAgICAgaWYgKHRoaXMubV9BYm9ydCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QodGhpcy5tX0Fib3J0UmVhc29uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYXdhaXQgdGhpcy5JdGVyYXRlSXRlbXMoZ2FtZSwgZW50aXR5VXBkYXRlcyk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5Qb3N0TWlncmF0ZUl0ZW1EYXRhKGdhbWUsIGVudGl0eVVwZGF0ZXMpO1xyXG4gICAgICAgIGlmICh0aGlzLm1fQWJvcnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHRoaXMubV9BYm9ydFJlYXNvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBNaWdyYXRlIFdvcmxkIEFjdG9yc1xyXG4gICAgICAgIGF3YWl0IHRoaXMuUHJlTWlncmF0ZUFjdG9yRGF0YShnYW1lLCBlbnRpdHlVcGRhdGVzKTtcclxuICAgICAgICBpZiAodGhpcy5tX0Fib3J0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh0aGlzLm1fQWJvcnRSZWFzb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhd2FpdCB0aGlzLkl0ZXJhdGVBY3RvcnMoZ2FtZSwgZW50aXR5VXBkYXRlcyk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5Qb3N0TWlncmF0ZUFjdG9yRGF0YShnYW1lLCBlbnRpdHlVcGRhdGVzKTtcclxuICAgICAgICBpZiAodGhpcy5tX0Fib3J0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh0aGlzLm1fQWJvcnRSZWFzb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTWlncmF0ZSBBY3RvciBUb2tlbnNcclxuICAgICAgICBhd2FpdCB0aGlzLlByZU1pZ3JhdGVTY2VuZURhdGEoZ2FtZSwgZW50aXR5VXBkYXRlcyk7XHJcbiAgICAgICAgaWYgKHRoaXMubV9BYm9ydCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QodGhpcy5tX0Fib3J0UmVhc29uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYXdhaXQgdGhpcy5JdGVyYXRlU2NlbmVzKGdhbWUsIGVudGl0eVVwZGF0ZXMpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuUG9zdE1pZ3JhdGVTY2VuZURhdGEoZ2FtZSwgZW50aXR5VXBkYXRlcyk7XHJcbiAgICAgICAgaWYgKHRoaXMubV9BYm9ydCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QodGhpcy5tX0Fib3J0UmVhc29uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFwcGx5IHRoZSB1cGRhdGVzLCB0aGlzIHNob3VsZCAqYWx3YXlzKiB3b3JrLCBub3cgdGhhdCBwYXJzaW5nIGlzIGNvbXBsZXRlLlxyXG4gICAgICAgIGF3YWl0IHRoaXMuQXBwbHkoZW50aXR5VXBkYXRlcyk7XHJcblxyXG4gICAgICAgIGF3YWl0IGdhbWUuc2V0dGluZ3Muc2V0KFZlcnNpb25NaWdyYXRpb24uTU9EVUxFX05BTUUsIFZlcnNpb25NaWdyYXRpb24uS0VZX0RBVEFfVkVSU0lPTiwgdGhpcy5UYXJnZXRWZXJzaW9uKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlIFRPRE8gVW5pZ25vcmUgd2hlbiBGb3VuZHJ5IFR5cGVzIHVwZGF0ZXNcclxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdTUjUuTUlHUkFUSU9OLlN1Y2Nlc3NOb3RpZmljYXRpb24nKX0gJHt0aGlzLlRhcmdldFZlcnNpb259LmAsIHsgcGVybWFuZW50OiB0cnVlIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXBwbGllcyB0aGUgc3BlY2lmaWVkIG1hcHBpbmcgb2YgZW50aXRpZXMsIGl0ZXJhdGl2ZWx5IHVwZGF0aW5nIGVhY2guXHJcbiAgICAgKiBAcGFyYW0gZW50aXR5VXBkYXRlcyBBIG1hcHBpbmcgb2YgZW50aXR5IHVwZGF0ZURhdGEgcGFpcnMuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBhc3luYyBBcHBseShlbnRpdHlVcGRhdGVzOiBNYXA8RW50aXR5LCBFbnRpdHlVcGRhdGU+KSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBbZW50aXR5LCB7IHVwZGF0ZURhdGEsIGVtYmVkZGVkSXRlbXMgfV0gb2YgZW50aXR5VXBkYXRlcykge1xyXG4gICAgICAgICAgICBpZiAoZW1iZWRkZWRJdGVtcyAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWN0b3IgPSBlbnRpdHkgYXMgU1I1QWN0b3I7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBhY3Rvci51cGRhdGVPd25lZEl0ZW0oZW1iZWRkZWRJdGVtcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXdhaXQgZW50aXR5LnVwZGF0ZSh1cGRhdGVEYXRhLCB7IGVuZm9yY2VUeXBlczogZmFsc2UgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSXRlcmF0ZSB0aHJvdWdoIGFsbCBzY2VuZXMgYW5kIG1pZ3JhdGUgZWFjaCBpZiBuZWVkZWQuXHJcbiAgICAgKiBAcGFyYW0gZ2FtZVxyXG4gICAgICogQHBhcmFtIGVudGl0eVVwZGF0ZXNcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGFzeW5jIEl0ZXJhdGVTY2VuZXMoZ2FtZTogR2FtZSwgZW50aXR5VXBkYXRlczogTWFwPEVudGl0eSwgRW50aXR5VXBkYXRlPikge1xyXG4gICAgICAgIC8vQHRzLWlnbm9yZSAgLy8gVHlwZVNjcmlwdCBleHBlY3RzIGVudHJpZXMgKENvbGxlY3Rpb24uZW50cmllcykgdG8gYmUgYSBjYWxsLCB5ZXQgaXQncyBhIGdldCBwcm9wZXJ0eS5cclxuICAgICAgICBmb3IgKGNvbnN0IHNjZW5lIG9mIGdhbWUuc2NlbmVzLmVudHJpZXMpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmICghKGF3YWl0IHRoaXMuU2hvdWxkTWlncmF0ZVNjZW5lRGF0YShzY2VuZSkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNjZW5lLl9pZCA9PT0gJ01Bd1NGaGxYUmlwaXhPV3cnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NjZW5lIFByZS1VcGRhdGUnKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzY2VuZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYE1pZ3JhdGluZyBTY2VuZSBlbnRpdHkgJHtzY2VuZS5uYW1lfWApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IGF3YWl0IHRoaXMuTWlncmF0ZVNjZW5lRGF0YShkdXBsaWNhdGUoc2NlbmUuZGF0YSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBoYXNUb2tlblVwZGF0ZXMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGEudG9rZW5zID0gYXdhaXQgUHJvbWlzZS5hbGwoXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgICAgIHNjZW5lLmRhdGEudG9rZW5zLm1hcChhc3luYyAodG9rZW4pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzT2JqZWN0RW1wdHkodG9rZW4uYWN0b3JEYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRva2VuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdG9rZW5EYXRhVXBkYXRlID0gYXdhaXQgdGhpcy5NaWdyYXRlQWN0b3JEYXRhKHRva2VuLmFjdG9yRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNPYmplY3RFbXB0eSh0b2tlbkRhdGFVcGRhdGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNUb2tlblVwZGF0ZXMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5EYXRhVXBkYXRlWydfaWQnXSA9IHRva2VuLl9pZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdUb2tlbiA9IGR1cGxpY2F0ZSh0b2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUb2tlbi5hY3RvckRhdGEgPSBhd2FpdCBtZXJnZU9iamVjdCh0b2tlbi5hY3RvckRhdGEsIHRva2VuRGF0YVVwZGF0ZSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZm9yY2VUeXBlczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wbGFjZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG5ld1Rva2VuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdUb2tlbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0b2tlbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGlmIChzY2VuZS5faWQgPT09ICdNQXdTRmhsWFJpcGl4T1d3Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTY2VuZSBQcmUtVXBkYXRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coc2NlbmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpc09iamVjdEVtcHR5KHVwZGF0ZURhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZXhwYW5kT2JqZWN0KHVwZGF0ZURhdGEpO1xyXG4gICAgICAgICAgICAgICAgZW50aXR5VXBkYXRlcy5zZXQoc2NlbmUsIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVEYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYmVkZGVkSXRlbXM6IG51bGwsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSXRlcmF0ZSB0aHJvdWdoIGFsbCBpdGVtcyBhbmQgbWlncmF0ZSBlYWNoIGlmIG5lZWRlZC5cclxuICAgICAqIEBwYXJhbSBnYW1lIFRoZSBnYW1lIHRvIGJlIHVwZGF0ZWQuXHJcbiAgICAgKiBAcGFyYW0gZW50aXR5VXBkYXRlcyBUaGUgY3VycmVudCBtYXAgb2YgZW50aXR5IHVwZGF0ZXMuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBhc3luYyBJdGVyYXRlSXRlbXMoZ2FtZTogR2FtZSwgZW50aXR5VXBkYXRlczogTWFwPEVudGl0eSwgRW50aXR5VXBkYXRlPikge1xyXG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBnYW1lLml0ZW1zLmVudGl0aWVzKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShhd2FpdCB0aGlzLlNob3VsZE1pZ3JhdGVJdGVtRGF0YShpdGVtLmRhdGEpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpbmcgSXRlbTogJHtpdGVtLm5hbWV9YCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0gYXdhaXQgdGhpcy5NaWdyYXRlSXRlbURhdGEoaXRlbS5kYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNPYmplY3RFbXB0eSh1cGRhdGVEYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGV4cGFuZE9iamVjdCh1cGRhdGVEYXRhKTtcclxuICAgICAgICAgICAgICAgIGVudGl0eVVwZGF0ZXMuc2V0KGl0ZW0sIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVEYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYmVkZGVkSXRlbXM6IG51bGwsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSXRlcmF0ZSB0aHJvdWdoIGFsbCBhY3RvcnMgYW5kIG1pZ3JhdGUgZWFjaCBpZiBuZWVkZWQuXHJcbiAgICAgKiBAcGFyYW0gZ2FtZSBUaGUgZ2FtZSB0byBiZSB1cGRhdGVkLlxyXG4gICAgICogQHBhcmFtIGVudGl0eVVwZGF0ZXMgVGhlIGN1cnJlbnQgbWFwIG9mIGVudGl0eSB1cGRhdGVzLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgYXN5bmMgSXRlcmF0ZUFjdG9ycyhnYW1lOiBHYW1lLCBlbnRpdHlVcGRhdGVzOiBNYXA8RW50aXR5LCBFbnRpdHlVcGRhdGU+KSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBhY3RvciBvZiBnYW1lLmFjdG9ycy5lbnRpdGllcykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5TaG91bGRNaWdyYXRlQWN0b3JEYXRhKGFjdG9yLmRhdGEpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpbmcgQWN0b3IgJHthY3Rvci5uYW1lfWApO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYWN0b3IpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IGF3YWl0IHRoaXMuTWlncmF0ZUFjdG9yRGF0YShkdXBsaWNhdGUoYWN0b3IuZGF0YSkpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codXBkYXRlRGF0YSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaXRlbXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGlmICh1cGRhdGVEYXRhLml0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMgPSB1cGRhdGVEYXRhLml0ZW1zO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB1cGRhdGVEYXRhLml0ZW1zO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGV4cGFuZE9iamVjdCh1cGRhdGVEYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICBlbnRpdHlVcGRhdGVzLnNldChhY3Rvciwge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZURhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgZW1iZWRkZWRJdGVtczogaXRlbXMsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEl0ZXJhdGUgb3ZlciBhbiBhY3RvcidzIGl0ZW1zLCB1cGRhdGluZyB0aG9zZSB0aGF0IG5lZWQgdXBkYXRpbmcuXHJcbiAgICAgKiBAcGFyYW0gYWN0b3JEYXRhIFRoZSBhY3RvciB0byBpdGVyYXRlIG92ZXJcclxuICAgICAqIEBwYXJhbSB1cGRhdGVEYXRhIFRoZSBleGlzdGluZyB1cGRhdGUgZGF0YSB0byBtZXJnZSBpbnRvXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBhc3luYyBJdGVyYXRlQWN0b3JJdGVtcyhhY3RvckRhdGE6IEFjdG9yLkRhdGEsIHVwZGF0ZURhdGEpIHtcclxuICAgICAgICBsZXQgaGFzSXRlbVVwZGF0ZXMgPSBmYWxzZTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgaWYgKGFjdG9yRGF0YS5pdGVtcyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgUHJvbWlzZS5hbGwoXHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICBhY3RvckRhdGEuaXRlbXMubWFwKGFzeW5jIChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGl0ZW1VcGRhdGUgPSBhd2FpdCB0aGlzLk1pZ3JhdGVJdGVtRGF0YShpdGVtKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc09iamVjdEVtcHR5KGl0ZW1VcGRhdGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0l0ZW1VcGRhdGVzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVVwZGF0ZVsnX2lkJ10gPSBpdGVtLl9pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IG1lcmdlT2JqZWN0KGl0ZW0sIGl0ZW1VcGRhdGUsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZm9yY2VUeXBlczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnBsYWNlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGlmIChoYXNJdGVtVXBkYXRlcykge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YS5pdGVtcyA9IGl0ZW1zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdXBkYXRlRGF0YTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIGEgc2NlbmUgcmVxdWlyZXMgdXBkYXRlcy5cclxuICAgICAqIEBwYXJhbSBzY2VuZSBUaGUgc2NlbmUgdG8gY2hlY2suXHJcbiAgICAgKiBAcmV0dXJuIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRydWUgb3IgZmFsc2UuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBhc3luYyBTaG91bGRNaWdyYXRlU2NlbmVEYXRhKHNjZW5lOiBTY2VuZSk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogTWlncmF0ZSB0aGUgc3BlY2lmaWVkIHNjZW5lJ3MgZGF0YS5cclxuICAgICAqIEBwYXJhbSBzY2VuZSBUaGUgc2NlbmUgdG8gbWlncmF0ZS5cclxuICAgICAqIEByZXR1cm4gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgdXBkYXRlIGRhdGEuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBhc3luYyBNaWdyYXRlU2NlbmVEYXRhKHNjZW5lOiBhbnkpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIHJldHVybiB7fTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogRG8gc29tZXRoaW5nIHJpZ2h0IGJlZm9yZSBzY2VuZSBkYXRhIGlzIG1pZ3JhdGVkLlxyXG4gICAgICogQHBhcmFtIGdhbWUgVGhlIGdhbWUgdG8gYmUgdXBkYXRlZC5cclxuICAgICAqIEBwYXJhbSBlbnRpdHlVcGRhdGVzIFRoZSBjdXJyZW50IG1hcCBvZiBlbnRpdHkgdXBkYXRlcy5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGFzeW5jIFByZU1pZ3JhdGVTY2VuZURhdGEoZ2FtZTogR2FtZSwgZW50aXR5VXBkYXRlczogTWFwPEVudGl0eSwgRW50aXR5VXBkYXRlPik6IFByb21pc2U8dm9pZD4ge31cclxuICAgIC8qKlxyXG4gICAgICogRG8gc29tZXRoaW5nIHJpZ2h0IGJlZm9yZSBzY2VuZSBkYXRhIGlzIG1pZ3JhdGVkLlxyXG4gICAgICogQHBhcmFtIGdhbWUgVGhlIGdhbWUgdG8gYmUgdXBkYXRlZC5cclxuICAgICAqIEBwYXJhbSBlbnRpdHlVcGRhdGVzIFRoZSBjdXJyZW50IG1hcCBvZiBlbnRpdHkgdXBkYXRlcy5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGFzeW5jIFBvc3RNaWdyYXRlU2NlbmVEYXRhKGdhbWU6IEdhbWUsIGVudGl0eVVwZGF0ZXM6IE1hcDxFbnRpdHksIEVudGl0eVVwZGF0ZT4pOiBQcm9taXNlPHZvaWQ+IHt9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiBhbiBpdGVtIHJlcXVpcmVzIHVwZGF0ZXMuXHJcbiAgICAgKiBAcGFyYW0gaXRlbSBUaGUgaXRlbSB0byBjaGVjay5cclxuICAgICAqIEByZXR1cm4gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdHJ1ZSBvciBmYWxzZS5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGFzeW5jIFNob3VsZE1pZ3JhdGVJdGVtRGF0YShpdGVtOiBFbnRpdHkuRGF0YSk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogTWlncmF0ZSB0aGUgc3BlY2lmaWVkIGl0ZW0ncyBkYXRhLlxyXG4gICAgICogQHBhcmFtIGl0ZW0gVGhlIGl0ZW0gdG8gbWlncmF0ZS5cclxuICAgICAqIEByZXR1cm4gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgdXBkYXRlIGRhdGEuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBhc3luYyBNaWdyYXRlSXRlbURhdGEoaXRlbTogRW50aXR5LkRhdGEpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIHJldHVybiB7fTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogRG8gc29tZXRoaW5nIHJpZ2h0IGJlZm9yZSBpdGVtIGRhdGEgaXMgbWlncmF0ZWQuXHJcbiAgICAgKiBAcGFyYW0gZ2FtZSBUaGUgZ2FtZSB0byBiZSB1cGRhdGVkLlxyXG4gICAgICogQHBhcmFtIGVudGl0eVVwZGF0ZXMgVGhlIGN1cnJlbnQgbWFwIG9mIGVudGl0eSB1cGRhdGVzLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgYXN5bmMgUHJlTWlncmF0ZUl0ZW1EYXRhKGdhbWU6IEdhbWUsIGVudGl0eVVwZGF0ZXM6IE1hcDxFbnRpdHksIEVudGl0eVVwZGF0ZT4pOiBQcm9taXNlPHZvaWQ+IHt9XHJcbiAgICAvKipcclxuICAgICAqIERvIHNvbWV0aGluZyByaWdodCBiZWZvcmUgaXRlbSBkYXRhIGlzIG1pZ3JhdGVkLlxyXG4gICAgICogQHBhcmFtIGdhbWUgVGhlIGdhbWUgdG8gYmUgdXBkYXRlZC5cclxuICAgICAqIEBwYXJhbSBlbnRpdHlVcGRhdGVzIFRoZSBjdXJyZW50IG1hcCBvZiBlbnRpdHkgdXBkYXRlcy5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGFzeW5jIFBvc3RNaWdyYXRlSXRlbURhdGEoZ2FtZTogR2FtZSwgZW50aXR5VXBkYXRlczogTWFwPEVudGl0eSwgRW50aXR5VXBkYXRlPik6IFByb21pc2U8dm9pZD4ge31cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIGFuIGFjdG9yIHJlcXVpcmVzIHVwZGF0ZXMuXHJcbiAgICAgKiBAcGFyYW0gYWN0b3IgVGhlIGFjdG9yIHRvIGNoZWNrLlxyXG4gICAgICogQHJldHVybiBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0cnVlIG9yIGZhbHNlLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgYXN5bmMgU2hvdWxkTWlncmF0ZUFjdG9yRGF0YShhY3RvcjogQWN0b3IuRGF0YSk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogTWlncmF0ZSB0aGUgc3BlY2lmaWVkIGFjdG9yJ3MgZGF0YS5cclxuICAgICAqIEBwYXJhbSBhY3RvciBUaGUgYWN0b3IgdG8gbWlncmF0ZS5cclxuICAgICAqIEByZXR1cm4gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgdXBkYXRlIGRhdGEuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBhc3luYyBNaWdyYXRlQWN0b3JEYXRhKGFjdG9yOiBBY3Rvci5EYXRhKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICByZXR1cm4ge307XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIERvIHNvbWV0aGluZyByaWdodCBiZWZvcmUgYWN0b3IgZGF0YSBpcyBtaWdyYXRlZC5cclxuICAgICAqIEBwYXJhbSBnYW1lIFRoZSBnYW1lIHRvIGJlIHVwZGF0ZWQuXHJcbiAgICAgKiBAcGFyYW0gZW50aXR5VXBkYXRlcyBUaGUgY3VycmVudCBtYXAgb2YgZW50aXR5IHVwZGF0ZXMuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBhc3luYyBQcmVNaWdyYXRlQWN0b3JEYXRhKGdhbWU6IEdhbWUsIGVudGl0eVVwZGF0ZXM6IE1hcDxFbnRpdHksIEVudGl0eVVwZGF0ZT4pOiBQcm9taXNlPHZvaWQ+IHt9XHJcbiAgICAvKipcclxuICAgICAqIERvIHNvbWV0aGluZyByaWdodCBhZnRlciBhY3RvciBkYXRhIGlzIG1pZ3JhdGVkLlxyXG4gICAgICogQHBhcmFtIGdhbWUgVGhlIGdhbWUgdG8gYmUgdXBkYXRlZC5cclxuICAgICAqIEBwYXJhbSBlbnRpdHlVcGRhdGVzIFRoZSBjdXJyZW50IG1hcCBvZiBlbnRpdHkgdXBkYXRlcy5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGFzeW5jIFBvc3RNaWdyYXRlQWN0b3JEYXRhKGdhbWU6IEdhbWUsIGVudGl0eVVwZGF0ZXM6IE1hcDxFbnRpdHksIEVudGl0eVVwZGF0ZT4pOiBQcm9taXNlPHZvaWQ+IHt9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNaWdyYXRlIGEgY29tcGVuZGl1bSBwYWNrXHJcbiAgICAgKiBAcGFyYW0gcGFja1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgTWlncmF0ZUNvbXBlbmRpdW1QYWNrKHBhY2s6IENvbXBlbmRpdW0pIHtcclxuICAgICAgICBjb25zdCBlbnRpdHkgPSBwYWNrLm1ldGFkYXRhLmVudGl0eTtcclxuICAgICAgICBpZiAoIVsnQWN0b3InLCAnSXRlbScsICdTY2VuZSddLmluY2x1ZGVzKGVudGl0eSkpIHJldHVybjtcclxuXHJcbiAgICAgICAgLy8gQmVnaW4gYnkgcmVxdWVzdGluZyBzZXJ2ZXItc2lkZSBkYXRhIG1vZGVsIG1pZ3JhdGlvbiBhbmQgZ2V0IHRoZSBtaWdyYXRlZCBjb250ZW50XHJcbiAgICAgICAgYXdhaXQgcGFjay5taWdyYXRlKHt9KTtcclxuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgcGFjay5nZXRDb250ZW50KCk7XHJcblxyXG4gICAgICAgIC8vIEl0ZXJhdGUgb3ZlciBjb21wZW5kaXVtIGVudHJpZXMgLSBhcHBseWluZyBmaW5lLXR1bmVkIG1pZ3JhdGlvbiBmdW5jdGlvbnNcclxuICAgICAgICBmb3IgKGxldCBlbnQgb2YgY29udGVudCkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHVwZGF0ZURhdGE6IGFueSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW50aXR5ID09PSAnSXRlbScpIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVEYXRhID0gYXdhaXQgdGhpcy5NaWdyYXRlSXRlbURhdGEoZW50LmRhdGEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNPYmplY3RFbXB0eSh1cGRhdGVEYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGFuZE9iamVjdCh1cGRhdGVEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydfaWQnXSA9IGVudC5faWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcGFjay51cGRhdGVFbnRpdHkodXBkYXRlRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogVW5jb21tZW50IHdoZW4gZm91bmRyeSBhbGxvd3MgZW1iZWRkZWRzIHRvIGJlIHVwZGF0ZWQgaW4gcGFja3NcclxuICAgICAgICAgICAgICAgICAgICAvLyB9IGVsc2UgaWYgKGVudGl0eSA9PT0gJ0FjdG9yJykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB1cGRhdGVEYXRhID0gYXdhaXQgdGhpcy5NaWdyYXRlQWN0b3JEYXRhKGVudC5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBpZiAoaXNPYmplY3RFbXB0eSh1cGRhdGVEYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB1cGRhdGVEYXRhWydfaWQnXSA9IGVudC5faWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGF3YWl0IHBhY2sudXBkYXRlRW50aXR5KHVwZGF0ZURhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbnRpdHkgPT09ICdTY2VuZScpIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVEYXRhID0gYXdhaXQgdGhpcy5NaWdyYXRlU2NlbmVEYXRhKGVudC5kYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzT2JqZWN0RW1wdHkodXBkYXRlRGF0YSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBleHBhbmRPYmplY3QodXBkYXRlRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnX2lkJ10gPSBlbnQuX2lkO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHBhY2sudXBkYXRlRW50aXR5KHVwZGF0ZURhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZyhgTWlncmF0ZWQgYWxsICR7ZW50aXR5fSBlbnRpdGllcyBmcm9tIENvbXBlbmRpdW0gJHtwYWNrLmNvbGxlY3Rpb259YCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbnR5cGUgRW50aXR5VXBkYXRlID0ge1xyXG4gICAgdXBkYXRlRGF0YTogYW55O1xyXG4gICAgZW1iZWRkZWRJdGVtczogbnVsbCB8IGFueVtdO1xyXG59O1xyXG4iLCJpbXBvcnQgeyBWZXJzaW9uTWlncmF0aW9uIH0gZnJvbSAnLi4vVmVyc2lvbk1pZ3JhdGlvbic7XHJcblxyXG4vKipcclxuICogTWlncmF0ZXMgdGhlIGRhdGEgbW9kZWwgZm9yIExlZ2FjeSBtaWdyYXRpb25zIHByaW9yIHRvIDAuNi40XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTGVnYWN5TWlncmF0aW9uIGV4dGVuZHMgVmVyc2lvbk1pZ3JhdGlvbiB7XHJcbiAgICBnZXQgU291cmNlVmVyc2lvbigpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiAnMCc7XHJcbiAgICB9XHJcbiAgICBnZXQgVGFyZ2V0VmVyc2lvbigpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBMZWdhY3lNaWdyYXRpb24uVGFyZ2V0VmVyc2lvbjtcclxuICAgIH1cclxuICAgIHN0YXRpYyBnZXQgVGFyZ2V0VmVyc2lvbigpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiAnMC42LjQnO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBhc3luYyBNaWdyYXRlQWN0b3JEYXRhKGFjdG9yRGF0YTogQWN0b3IuRGF0YSk6IFByb21pc2U8YW55PiB7XHJcbiAgICAgICAgbGV0IHVwZGF0ZURhdGE6IGFueSA9IHt9O1xyXG4gICAgICAgIExlZ2FjeU1pZ3JhdGlvbi5taWdyYXRlQWN0b3JPdmVyZmxvdyhhY3RvckRhdGEsIHVwZGF0ZURhdGEpO1xyXG4gICAgICAgIExlZ2FjeU1pZ3JhdGlvbi5taWdyYXRlQWN0b3JTa2lsbHMoYWN0b3JEYXRhLCB1cGRhdGVEYXRhKTtcclxuXHJcbiAgICAgICAgdXBkYXRlRGF0YSA9IGF3YWl0IHRoaXMuSXRlcmF0ZUFjdG9ySXRlbXMoYWN0b3JEYXRhLCB1cGRhdGVEYXRhKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHVwZGF0ZURhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGFzeW5jIE1pZ3JhdGVJdGVtRGF0YShpdGVtOiBFbnRpdHkuRGF0YSk6IFByb21pc2U8YW55PiB7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9O1xyXG4gICAgICAgIExlZ2FjeU1pZ3JhdGlvbi5taWdyYXRlRGFtYWdlVHlwZUFuZEVsZW1lbnQoaXRlbSwgdXBkYXRlRGF0YSk7XHJcbiAgICAgICAgTGVnYWN5TWlncmF0aW9uLm1pZ3JhdGVJdGVtc0FkZEFjdGlvbnMoaXRlbSwgdXBkYXRlRGF0YSk7XHJcbiAgICAgICAgTGVnYWN5TWlncmF0aW9uLm1pZ3JhdGVBY3Rvck92ZXJmbG93KGl0ZW0sIHVwZGF0ZURhdGEpO1xyXG4gICAgICAgIExlZ2FjeU1pZ3JhdGlvbi5taWdyYXRlSXRlbXNBZGRDYXBhY2l0eShpdGVtLCB1cGRhdGVEYXRhKTtcclxuICAgICAgICBMZWdhY3lNaWdyYXRpb24ubWlncmF0ZUl0ZW1zQW1tbyhpdGVtLCB1cGRhdGVEYXRhKTtcclxuICAgICAgICBMZWdhY3lNaWdyYXRpb24ubWlncmF0ZUl0ZW1zQ29uY2VhbChpdGVtLCB1cGRhdGVEYXRhKTtcclxuICAgICAgICByZXR1cm4gdXBkYXRlRGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgYXN5bmMgTWlncmF0ZVNjZW5lRGF0YShzY2VuZTogYW55KTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICByZXR1cm4ge307XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGFzeW5jIFNob3VsZE1pZ3JhdGVBY3RvckRhdGEoYWN0b3JEYXRhOiBBY3Rvci5EYXRhKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGFzeW5jIFNob3VsZE1pZ3JhdGVJdGVtRGF0YShpdGVtOiBFbnRpdHkuRGF0YSk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBhc3luYyBTaG91bGRNaWdyYXRlU2NlbmVEYXRhKHNjZW5lOiBTY2VuZSk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICByZXR1cm4gc2NlbmUuZGF0YS50b2tlbnM/Lmxlbmd0aCA+IDA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNaWdyYXRlIGFjdG9yIG92ZXJmbG93IGZyb20gYW4gaW50ZWdlciB0byBhbiBvYmplY3RcclxuICAgICAqIC0gaXQgd2Fzbid0IGV2ZW4gZGlzcGxheWVkIGJlZm9yZSBzbyB3ZSBrbm93IGl0IGlzIDBcclxuICAgICAqIEBwYXJhbSBhY3RvckRhdGFcclxuICAgICAqIEBwYXJhbSB1cGRhdGVEYXRhXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIG1pZ3JhdGVBY3Rvck92ZXJmbG93KGFjdG9yRGF0YSwgdXBkYXRlRGF0YSkge1xyXG4gICAgICAgIGlmIChnZXRQcm9wZXJ0eShhY3RvckRhdGEuZGF0YSwgJ3RyYWNrLnBoeXNpY2FsLm92ZXJmbG93JykgPT09IDApIHtcclxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS50cmFjay5waHlzaWNhbC5vdmVyZmxvdy52YWx1ZSddID0gMDtcclxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS50cmFjay5waHlzaWNhbC5vdmVyZmxvdy5tYXgnXSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWlncmF0ZSBhY3RvciBza2lsbHMgc3BlY2lhbGl6YXRpb25zIHRvIGJlIGEgbGlzdCBpbnN0ZWFkIG9mIHN0cmluZ1xyXG4gICAgICogQHBhcmFtIGFjdG9yRGF0YVxyXG4gICAgICogQHBhcmFtIHVwZGF0ZURhdGFcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgbWlncmF0ZUFjdG9yU2tpbGxzKGFjdG9yRGF0YSwgdXBkYXRlRGF0YSkge1xyXG4gICAgICAgIGlmICghYWN0b3JEYXRhLmRhdGE/LnNraWxscz8uYWN0aXZlKSByZXR1cm47XHJcbiAgICAgICAgY29uc3Qgc3BsaXRSZWdleCA9IC9bLFxcL3wuXSsvO1xyXG5cclxuICAgICAgICBjb25zdCByZWR1Y2VyID0gKHJ1bm5pbmcsIFtrZXksIHZhbF0pID0+IHtcclxuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbC5zcGVjcykgJiYgdmFsLnNwZWNzKSB7XHJcbiAgICAgICAgICAgICAgICBydW5uaW5nW2tleV0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3BlY3M6IHZhbC5zcGVjcy5zcGxpdChzcGxpdFJlZ2V4KS5maWx0ZXIoKHMpID0+IHMgIT09ICcnKSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJ1bm5pbmc7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKGFjdG9yRGF0YS5kYXRhLnNraWxscykge1xyXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLnNraWxscy5hY3RpdmUnXSA9IE9iamVjdC5lbnRyaWVzKGFjdG9yRGF0YS5kYXRhLnNraWxscy5hY3RpdmUpLnJlZHVjZShyZWR1Y2VyLCB7fSk7XHJcbiAgICAgICAgICAgIGlmIChhY3RvckRhdGEuZGF0YS5za2lsbHMua25vd2xlZGdlKSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLnNraWxscy5rbm93bGVkZ2Uuc3RyZWV0LnZhbHVlJ10gPSBPYmplY3QuZW50cmllcyhhY3RvckRhdGEuZGF0YS5za2lsbHM/Lmtub3dsZWRnZT8uc3RyZWV0Py52YWx1ZSkucmVkdWNlKHJlZHVjZXIsIHt9KTtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuc2tpbGxzLmtub3dsZWRnZS5wcm9mZXNzaW9uYWwudmFsdWUnXSA9IE9iamVjdC5lbnRyaWVzKGFjdG9yRGF0YS5kYXRhLnNraWxscz8ua25vd2xlZGdlPy5wcm9mZXNzaW9uYWw/LnZhbHVlKS5yZWR1Y2UocmVkdWNlciwge30pO1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5za2lsbHMua25vd2xlZGdlLmFjYWRlbWljLnZhbHVlJ10gPSBPYmplY3QuZW50cmllcyhhY3RvckRhdGEuZGF0YS5za2lsbHM/Lmtub3dsZWRnZT8uYWNhZGVtaWM/LnZhbHVlKS5yZWR1Y2UocmVkdWNlciwge30pO1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5za2lsbHMua25vd2xlZGdlLmludGVyZXN0cy52YWx1ZSddID0gT2JqZWN0LmVudHJpZXMoYWN0b3JEYXRhLmRhdGEuc2tpbGxzPy5rbm93bGVkZ2U/LmludGVyZXN0cz8udmFsdWUpLnJlZHVjZShyZWR1Y2VyLCB7fSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGFjdG9yRGF0YS5kYXRhLnNraWxscy5sYW5ndWFnZSkge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5za2lsbHMubGFuZ3VhZ2UudmFsdWUnXSA9IE9iamVjdC5lbnRyaWVzKGFjdG9yRGF0YS5kYXRhLnNraWxscz8ubGFuZ3VhZ2U/LnZhbHVlKS5yZWR1Y2UocmVkdWNlciwge30pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpdGVtXHJcbiAgICAgKiBAcGFyYW0gdXBkYXRlRGF0YVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyBtaWdyYXRlRGFtYWdlVHlwZUFuZEVsZW1lbnQoaXRlbSwgdXBkYXRlRGF0YSkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdNaWdyYXRpbmcgRGFtYWdlIGFuZCBFbGVtZW50cycpO1xyXG4gICAgICAgIGlmIChpdGVtLmRhdGEuYWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGlvbiA9IGl0ZW0uZGF0YS5hY3Rpb247XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYWN0aW9uLmRhbWFnZS50eXBlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5hY3Rpb24uZGFtYWdlLnR5cGUuYmFzZSddID0gaXRlbS5kYXRhLmFjdGlvbi5kYW1hZ2UudHlwZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGFjdGlvbi5kYW1hZ2UuZWxlbWVudCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuYWN0aW9uLmRhbWFnZS5lbGVtZW50LmJhc2UnXSA9IGl0ZW0uZGF0YS5hY3Rpb24uZGFtYWdlLmVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNaWdyYXRlIGFtbW8gZnJvbSByYW5nZWQgd2VhcG9ucyBvbmx5IHRvIGFsbCB3ZWFwb25zXHJcbiAgICAgKiBAcGFyYW0gaXRlbVxyXG4gICAgICogQHBhcmFtIHVwZGF0ZURhdGFcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgbWlncmF0ZUl0ZW1zQW1tbyhpdGVtLCB1cGRhdGVEYXRhKSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ01pZ3JhdGluZyBBbW1vJyk7XHJcbiAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3dlYXBvbicgJiYgaXRlbS5kYXRhLmFtbW8gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBsZXQgY3VycmVudEFtbW8gPSB7IHZhbHVlOiAwLCBtYXg6IDAgfTtcclxuICAgICAgICAgICAgaWYgKGl0ZW0uZGF0YS5jYXRlZ29yeSA9PT0gJ3JhbmdlJyAmJiBpdGVtLmRhdGEucmFuZ2UgJiYgaXRlbS5kYXRhLnJhbmdlLmFtbW8pIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvcHkgb3ZlciBhbW1vIGNvdW50XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvbGRBbW1vID0gaXRlbS5kYXRhLnJhbmdlLmFtbW87XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50QW1tby52YWx1ZSA9IG9sZEFtbW8udmFsdWU7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50QW1tby5tYXggPSBvbGRBbW1vLm1heDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmFtbW8nXSA9IHtcclxuICAgICAgICAgICAgICAgIHNwYXJlX2NsaXBzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4OiAwLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGN1cnJlbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY3VycmVudEFtbW8udmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4OiBjdXJyZW50QW1tby5tYXgsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1pZ3JhdGUgY29uY2VhbCBuYW1lXHJcbiAgICAgKiBAcGFyYW0gaXRlbVxyXG4gICAgICogQHBhcmFtIHVwZGF0ZURhdGFcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgbWlncmF0ZUl0ZW1zQ29uY2VhbChpdGVtLCB1cGRhdGVEYXRhKSB7XHJcbiAgICAgICAgaWYgKGl0ZW0uZGF0YS50ZWNobm9sb2d5Py5jb25jZWFsYWJpbGl0eSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEudGVjaG5vbG9neS5jb25jZWFsJ10gPSB7XHJcbiAgICAgICAgICAgICAgICBiYXNlOiBpdGVtLmRhdGEudGVjaG5vbG9neS5jb25jZWFsYWJpbGl0eSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgY2FwYWNpdHkgdG8gaXRlbXNcclxuICAgICAqIEBwYXJhbSBpdGVtXHJcbiAgICAgKiBAcGFyYW0gdXBkYXRlRGF0YVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyBtaWdyYXRlSXRlbXNBZGRDYXBhY2l0eShpdGVtLCB1cGRhdGVEYXRhKSB7XHJcbiAgICAgICAgaWYgKFsnY3liZXJ3YXJlJ10uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xyXG4gICAgICAgICAgICBpZiAoaXRlbS5kYXRhLmNhcGFjaXR5ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGEuZGF0YS5jYXBhY2l0eSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYWN0aW9ucyB0byBuZWVkZWQgaXRlbXNcclxuICAgICAqIEBwYXJhbSBpdGVtXHJcbiAgICAgKiBAcGFyYW0gdXBkYXRlRGF0YVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyBtaWdyYXRlSXRlbXNBZGRBY3Rpb25zKGl0ZW0sIHVwZGF0ZURhdGEpIHtcclxuICAgICAgICBpZiAoWydxdWFsaXR5JywgJ2N5YmVyd2FyZSddLmluY2x1ZGVzKGl0ZW0udHlwZSkpIHtcclxuICAgICAgICAgICAgaWYgKGl0ZW0uZGF0YS5hY3Rpb24gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNraWxsOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzcGVjOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBtb2Q6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgbGltaXQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBleHRlbmRlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZGFtYWdlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG9wcG9zZWQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBza2lsbDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgaWYgKCF1cGRhdGVEYXRhLmRhdGEpIHVwZGF0ZURhdGEuZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YS5kYXRhLmFjdGlvbiA9IGFjdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBWZXJzaW9uTWlncmF0aW9uIH0gZnJvbSAnLi4vVmVyc2lvbk1pZ3JhdGlvbic7XHJcbmltcG9ydCBTUjVBY3RvclR5cGUgPSBTaGFkb3dydW4uU1I1QWN0b3JUeXBlO1xyXG5cclxuLyoqXHJcbiAqIEFkZCBkZWZhdWx0IHZhbHVlIG9mIHdpbGxwb3dlciB0byB0aGUgZnVsbF9kZWZlbnNlX2F0dHJpYnV0ZSBmaWVsZFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFZlcnNpb24wXzZfMTAgZXh0ZW5kcyBWZXJzaW9uTWlncmF0aW9uIHtcclxuICAgIGdldCBTb3VyY2VWZXJzaW9uKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuICcwLjYuOSc7XHJcbiAgICB9XHJcbiAgICBnZXQgVGFyZ2V0VmVyc2lvbigpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBWZXJzaW9uMF82XzEwLlRhcmdldFZlcnNpb247XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZ2V0IFRhcmdldFZlcnNpb24oKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJzAuNi4xMCc7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGFzeW5jIE1pZ3JhdGVBY3RvckRhdGEoYWN0b3JEYXRhOiBTUjVBY3RvclR5cGUpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIGlmIChhY3RvckRhdGEuZGF0YT8uYXR0cmlidXRlcz8uZWRnZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4ge307XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGVkZ2U6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTogYWN0b3JEYXRhLmRhdGEuYXR0cmlidXRlcy5lZGdlLm1heCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGFjdG9yRGF0YS5kYXRhLmF0dHJpYnV0ZXMuZWRnZS5tYXgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXM6IGFjdG9yRGF0YS5kYXRhLmF0dHJpYnV0ZXMuZWRnZS52YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBhc3luYyBTaG91bGRNaWdyYXRlQWN0b3JEYXRhKGFjdG9yRGF0YTogU1I1QWN0b3JUeXBlKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgcmV0dXJuIGFjdG9yRGF0YS5kYXRhLmF0dHJpYnV0ZXMuZWRnZT8udXNlcyA9PT0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBhc3luYyBTaG91bGRNaWdyYXRlU2NlbmVEYXRhKHNjZW5lOiBTY2VuZSk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICByZXR1cm4gc2NlbmUuZGF0YS50b2tlbnM/Lmxlbmd0aCA+IDA7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgVmVyc2lvbk1pZ3JhdGlvbiB9IGZyb20gJy4uL1ZlcnNpb25NaWdyYXRpb24nO1xyXG5cclxuLyoqXHJcbiAqIEFkZCBkZWZhdWx0IHZhbHVlIG9mIHdpbGxwb3dlciB0byB0aGUgZnVsbF9kZWZlbnNlX2F0dHJpYnV0ZSBmaWVsZFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFZlcnNpb24wXzZfNSBleHRlbmRzIFZlcnNpb25NaWdyYXRpb24ge1xyXG4gICAgZ2V0IFNvdXJjZVZlcnNpb24oKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJzAuNi40JztcclxuICAgIH1cclxuICAgIGdldCBUYXJnZXRWZXJzaW9uKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFZlcnNpb24wXzZfNS5UYXJnZXRWZXJzaW9uO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGdldCBUYXJnZXRWZXJzaW9uKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuICcwLjYuNSc7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGFzeW5jIE1pZ3JhdGVBY3RvckRhdGEoYWN0b3JEYXRhOiBBY3Rvci5EYXRhKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBsZXQgdXBkYXRlRGF0YTogYW55ID0ge307XHJcbiAgICAgICAgaWYgKHVwZGF0ZURhdGEuZGF0YSA9PT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLmRhdGEgPSB7fTtcclxuICAgICAgICB1cGRhdGVEYXRhLmRhdGEuZnVsbF9kZWZlbnNlX2F0dHJpYnV0ZSA9ICd3aWxscG93ZXInO1xyXG4gICAgICAgIHJldHVybiB1cGRhdGVEYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBhc3luYyBTaG91bGRNaWdyYXRlQWN0b3JEYXRhKGFjdG9yRGF0YTogYW55KTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgcmV0dXJuIGFjdG9yRGF0YS5kYXRhLmZ1bGxfZGVmZW5zZV9hdHRyaWJ1dGUgPT09IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgYXN5bmMgU2hvdWxkTWlncmF0ZVNjZW5lRGF0YShzY2VuZTogU2NlbmUpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgcmV0dXJuIHNjZW5lLmRhdGEudG9rZW5zPy5sZW5ndGggPiAwO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vIFRPRE86IEhvdyB0byB0cmlnZ2VyIHRlc3QgbWlncmF0aW9uLlxyXG4vLyBUT0RPOiBIb3cgdG8gdGVzdCBtaWdyYXRpb24gcmVzdWx0cz9cclxuXHJcblxyXG5pbXBvcnQge1ZlcnNpb25NaWdyYXRpb259IGZyb20gXCIuLi9WZXJzaW9uTWlncmF0aW9uXCI7XHJcbmltcG9ydCB7U1I1fSBmcm9tIFwiLi4vLi4vY29uZmlnXCI7XHJcbmltcG9ydCBTUjVBY3RvckJhc2UgPSBTaGFkb3dydW4uU1I1QWN0b3JCYXNlO1xyXG5cclxuLyoqIE5QQyAvIEdydW50IGZlYXR1cmUgc2V0XHJcbiAqIC0gQWRkIG5wYyBjaGFyYWN0ZXIgZGF0YS5cclxuICogLSBBZGQgdHJhY2sgZGlzYWJsZWQgZmVhdHVyZVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFZlcnNpb24wXzdfMiBleHRlbmRzIFZlcnNpb25NaWdyYXRpb24ge1xyXG4gICAgZ2V0IFNvdXJjZVZlcnNpb24oKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJzAuNy4xJztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgVGFyZ2V0VmVyc2lvbigpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBWZXJzaW9uMF83XzIuVGFyZ2V0VmVyc2lvbjtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0IFRhcmdldFZlcnNpb24oKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJzAuNy4yJztcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgTm9OUENEYXRhRm9yQ2hhcmFjdGVyKGFjdG9yRGF0YTogU1I1QWN0b3JCYXNlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgLy8gVXNlIGluIG9wZXJhdG9yIHNpbmNlIFR5cGVTY3JpcHQgY2FuIGhhbmRsZSB0aGF0IGZvciB1bmlvbiB0eXBlcyBpbnN0ZWFkIG9mIHByb3BlcnR5IHVzYWdlLlxyXG4gICAgICAgIHJldHVybiBhY3RvckRhdGEudHlwZSA9PT0gJ2NoYXJhY3RlcicgJiYgKFxyXG4gICAgICAgICAgICAhKFwiaXNfbnBjXCIgaW4gYWN0b3JEYXRhPy5kYXRhKSB8fFxyXG4gICAgICAgICAgICAhKFwibnBjXCIgaW4gYWN0b3JEYXRhPy5kYXRhKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIFVuc3VwcG9ydGVkTWV0YXR5cGUoYWN0b3JEYXRhOiBTUjVBY3RvckJhc2UpOiBib29sZWFuIHtcclxuICAgICAgICAvLyBUT0RPOiBDaGVjayBvbiBDaGFyYWN0ZXJBY3RvckRhdGEubWV0YXR5cGUgdHlwaW5nIChzZWUgdHMtaWdub3JlKVxyXG4gICAgICAgIC8vQHRzLWlnbm9yZSAvLyBpbi1vcGVyYXRvciBkb2Vzbid0IHdvcmsgaGVyZSwgYXMgdGhlIHVuZGVybHlpbmcgdHlwaW5nIGZvciBtZXRhdHlwZSB3aWxsIHJlc3VsdCBpbiBzdHJpbmcgfCBudW1iZXIgfCB1bmRlZmluZWRcclxuICAgICAgICBjb25zdCB0eXBlID0gYWN0b3JEYXRhLmRhdGEubWV0YXR5cGU/LnRvTG93ZXJDYXNlKCkgPz8gJyc7XHJcbiAgICAgICAgcmV0dXJuIGFjdG9yRGF0YS50eXBlID09PSAnY2hhcmFjdGVyJyAmJlxyXG4gICAgICAgICAgICBTUjUuY2hhcmFjdGVyLnR5cGVzLmhhc093blByb3BlcnR5KHR5cGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBhc3luYyBNaWdyYXRlQWN0b3JEYXRhKGFjdG9yRGF0YTogU1I1QWN0b3JCYXNlKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBjb25zdCB1cGRhdGVEYXRhOiB7XHJcbiAgICAgICAgICAgIGRhdGE/OiBvYmplY3QsXHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM/OiBvYmplY3RcclxuICAgICAgICB9ID0ge307XHJcblxyXG4gICAgICAgIGlmIChWZXJzaW9uMF83XzIuVW5zdXBwb3J0ZWRNZXRhdHlwZShhY3RvckRhdGEpKSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IENoZWNrIG9uIENoYXJhY3RlckFjdG9yRGF0YS5tZXRhdHlwZSB0eXBpbmcgKHNlZSB0cy1pZ25vcmUpXHJcbiAgICAgICAgICAgIC8vQHRzLWlnbm9yZSAvLyBpbi1vcGVyYXRvciBkb2Vzbid0IHdvcmsgaGVyZSwgYXMgdGhlIHVuZGVybHlpbmcgdHlwaW5nIGZvciBtZXRhdHlwZSB3aWxsIHJlc3VsdCBpbiBzdHJpbmcgfCBudW1iZXIgfCB1bmRlZmluZWRcclxuICAgICAgICAgICAgY29uc3QgdHlwZSA9IGFjdG9yRGF0YS5kYXRhLm1ldGF0eXBlPy50b0xvd2VyQ2FzZSgpID8/ICcnO1xyXG4gICAgICAgICAgICAvLyBUT0RPOiBXaGF0IHRvIGRvIHdpdGggY3VzdG9tIG1ldGF0eXBlcz9cclxuICAgICAgICAgICAgY29uc3QgbWV0YXR5cGVEYXRhID0ge21ldGF0eXBlOiBTUjUuY2hhcmFjdGVyLnR5cGVzLmhhc093blByb3BlcnR5KHR5cGUpID8gdHlwZSA6ICdodW1hbid9O1xyXG4gICAgICAgICAgICB1cGRhdGVEYXRhLmRhdGEgPSB7Li4udXBkYXRlRGF0YS5kYXRhLCAuLi5tZXRhdHlwZURhdGF9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKFZlcnNpb24wXzdfMi5Ob05QQ0RhdGFGb3JDaGFyYWN0ZXIoYWN0b3JEYXRhKSkge1xyXG4gICAgICAgICAgICB1cGRhdGVEYXRhLmRhdGEgPSB1cGRhdGVEYXRhLmRhdGEgPyB1cGRhdGVEYXRhLmRhdGEgOiB7fTtcclxuICAgICAgICAgICAgY29uc3QgbnBjRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIGlzX25wYzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBucGM6IHtcclxuICAgICAgICAgICAgICAgICAgICBpc19ncnVudDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZmVzc2lvbmFsX3JhdGluZzogMFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVwZGF0ZURhdGEuZGF0YSA9IHsuLi51cGRhdGVEYXRhLmRhdGEsIC4uLm5wY0RhdGF9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHVwZGF0ZURhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGFzeW5jIFNob3VsZE1pZ3JhdGVBY3RvckRhdGEoYWN0b3JEYXRhOiBTUjVBY3RvckJhc2UpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICByZXR1cm4gVmVyc2lvbjBfN18yLlVuc3VwcG9ydGVkTWV0YXR5cGUoYWN0b3JEYXRhKSB8fCBWZXJzaW9uMF83XzIuTm9OUENEYXRhRm9yQ2hhcmFjdGVyKGFjdG9yRGF0YSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgTW9kTGlzdCA9IFNoYWRvd3J1bi5Nb2RMaXN0O1xyXG5pbXBvcnQgTW9kTGlzdEVudHJ5ID0gU2hhZG93cnVuLk1vZExpc3RFbnRyeTtcclxuXHJcbmV4cG9ydCBjbGFzcyBQYXJ0c0xpc3Q8VFR5cGU+IHtcclxuICAgIGdldCBsaXN0KCk6IE1vZExpc3Q8VFR5cGU+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbGlzdC5zbGljZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBsZW5ndGgoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbGlzdC5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHRvdGFsKCk6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IHRvdGFsID0gMDtcclxuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgdGhpcy5fbGlzdCkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHBhcnQudmFsdWUgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbCArPSBwYXJ0LnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0b3RhbDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaXNFbXB0eSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sZW5ndGggPT09IDA7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UGFydFZhbHVlKG5hbWU6IHN0cmluZyk6IFRUeXBlIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbGlzdC5maW5kKChwYXJ0KSA9PiBwYXJ0Lm5hbWUgPT09IG5hbWUpPy52YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhcigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9saXN0Lmxlbmd0aCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfbGlzdDogTW9kTGlzdDxUVHlwZT47XHJcblxyXG4gICAgY29uc3RydWN0b3IocGFydHM/OiBNb2RMaXN0PFRUeXBlPikge1xyXG4gICAgICAgIGxldCBhY3R1YWxQYXJ0cyA9IFtdIGFzIE1vZExpc3Q8VFR5cGU+O1xyXG4gICAgICAgIGlmIChwYXJ0cykge1xyXG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwYXJ0cykpIHtcclxuICAgICAgICAgICAgICAgIGFjdHVhbFBhcnRzID0gcGFydHM7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHBhcnRzID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBbbmFtZSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHBhcnRzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGl0J3MgYSBudW1iZXIsIHdlIGFyZSBkZWFsaW5nIHdpdGggYW4gYXJyYXkgYXMgYW4gb2JqZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4oTnVtYmVyKG5hbWUpKSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3R1YWxQYXJ0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAodmFsdWUgYXMgTW9kTGlzdEVudHJ5PFRUeXBlPikubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogKHZhbHVlIGFzIE1vZExpc3RFbnRyeTxUVHlwZT4pLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3R1YWxQYXJ0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBhcyBNb2RMaXN0RW50cnk8VFR5cGU+KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9saXN0ID0gYWN0dWFsUGFydHM7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkUGFydChuYW1lOiBzdHJpbmcsIHZhbHVlOiBUVHlwZSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX2xpc3QucHVzaCh7XHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZFVuaXF1ZVBhcnQobmFtZTogc3RyaW5nLCB2YWx1ZT86IFRUeXBlLCBvdmVyd3JpdGUgPSB0cnVlKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLl9saXN0LmZpbmRJbmRleCgocGFydCkgPT4gcGFydC5uYW1lID09PSBuYW1lKTtcclxuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICAvLyBpZiB3ZSBleGlzdCBhbmQgc2hvdWxkJ3ZlIG92ZXJ3cml0ZSwgcmV0dXJuXHJcbiAgICAgICAgICAgIGlmICghb3ZlcndyaXRlKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9saXN0LnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgIC8vIGlmIHdlIGFyZSBwYXNzZWQgdW5kZWZpbmVkLCByZW1vdmUgdGhlIHZhbHVlXHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsKSByZXR1cm47XHJcbiAgICAgICAgICAgIC8vIHJlY3Vyc2l2ZWx5IGdvIHRocm91Z2ggdW50aWwgd2Ugbm8gbG9uZ2VyIGhhdmUgYSBwYXJ0IG9mIHRoaXMgbmFtZVxyXG4gICAgICAgICAgICB0aGlzLmFkZFVuaXF1ZVBhcnQobmFtZSwgdmFsdWUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5hZGRQYXJ0KG5hbWUsIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlUGFydChuYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuX2xpc3QuZmluZEluZGV4KChwYXJ0KSA9PiBwYXJ0Lm5hbWUgPT09IG5hbWUpO1xyXG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2xpc3Quc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRNZXNzYWdlT3V0cHV0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxpc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIEFkZFVuaXF1ZVBhcnQ8VFR5cGU+KGxpc3Q6IE1vZExpc3Q8VFR5cGU+LCBuYW1lOiBzdHJpbmcsIHZhbHVlOiBUVHlwZSwgb3ZlcndyaXRlID0gdHJ1ZSk6IE1vZExpc3Q8VFR5cGU+IHtcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IG5ldyBQYXJ0c0xpc3QobGlzdCk7XHJcbiAgICAgICAgcGFydHMuYWRkVW5pcXVlUGFydChuYW1lLCB2YWx1ZSwgb3ZlcndyaXRlKTtcclxuICAgICAgICByZXR1cm4gcGFydHMuX2xpc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIFRvdGFsKGxpc3Q6IE1vZExpc3Q8bnVtYmVyPikge1xyXG4gICAgICAgIGNvbnN0IHBhcnRzID0gbmV3IFBhcnRzTGlzdChsaXN0KTtcclxuICAgICAgICByZXR1cm4gcGFydHMudG90YWw7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IE1vZExpc3QgPSBTaGFkb3dydW4uTW9kTGlzdDtcclxuaW1wb3J0IFJvbGxFdmVudCA9IFNoYWRvd3J1bi5Sb2xsRXZlbnQ7XHJcbmltcG9ydCBCYXNlVmFsdWVQYWlyID0gU2hhZG93cnVuLkJhc2VWYWx1ZVBhaXI7XHJcbmltcG9ydCBMYWJlbEZpZWxkID0gU2hhZG93cnVuLkxhYmVsRmllbGQ7XHJcbmltcG9ydCBBdHRhY2tEYXRhID0gU2hhZG93cnVuLkF0dGFja0RhdGE7XHJcbmltcG9ydCBEYW1hZ2VEYXRhID0gU2hhZG93cnVuLkRhbWFnZURhdGE7XHJcbmltcG9ydCB7IEhlbHBlcnMgfSBmcm9tICcuLi9oZWxwZXJzJztcclxuaW1wb3J0IHsgU1I1QWN0b3IgfSBmcm9tICcuLi9hY3Rvci9TUjVBY3Rvcic7XHJcbmltcG9ydCB7IFNSNUl0ZW0gfSBmcm9tICcuLi9pdGVtL1NSNUl0ZW0nO1xyXG5pbXBvcnQge1xyXG4gICAgY3JlYXRlUm9sbENoYXRNZXNzYWdlLCBjcmVhdGVUYXJnZXRDaGF0TWVzc2FnZSwgUm9sbFRhcmdldENoYXRNZXNzYWdlLFxyXG4gICAgVGFyZ2V0Q2hhdE1lc3NhZ2VPcHRpb25zXHJcbn0gZnJvbSAnLi4vY2hhdCc7XHJcbmltcG9ydCB7Q09SRV9GTEFHUywgQ09SRV9OQU1FLCBERUZBVUxUX1JPTExfTkFNRSwgRkxBR1MsIFNSLCBTWVNURU1fTkFNRX0gZnJvbSAnLi4vY29uc3RhbnRzJztcclxuaW1wb3J0IHsgUGFydHNMaXN0IH0gZnJvbSAnLi4vcGFydHMvUGFydHNMaXN0JztcclxuaW1wb3J0IHtBY3Rpb25UZXN0RGF0YX0gZnJvbSBcIi4uL2FwcHMvZGlhbG9ncy9TaGFkb3dydW5JdGVtRGlhbG9nXCI7XHJcbmltcG9ydCBCbGFzdERhdGEgPSBTaGFkb3dydW4uQmxhc3REYXRhO1xyXG5pbXBvcnQgRmlyZU1vZGVEYXRhID0gU2hhZG93cnVuLkZpcmVNb2RlRGF0YTtcclxuaW1wb3J0IERyYWluRGF0YSA9IFNoYWRvd3J1bi5EcmFpbkRhdGE7XHJcbmltcG9ydCB7U2hhZG93cnVuVGVzdERpYWxvZ30gZnJvbSBcIi4uL2FwcHMvZGlhbG9ncy9TaGFkb3dydW5UZXN0RGlhbG9nXCI7XHJcbmltcG9ydCBNb2RpZmllZERhbWFnZURhdGEgPSBTaGFkb3dydW4uTW9kaWZpZWREYW1hZ2VEYXRhO1xyXG5pbXBvcnQgTGltaXRGaWVsZCA9IFNoYWRvd3J1bi5MaW1pdEZpZWxkO1xyXG5pbXBvcnQgQ29tYmF0RGF0YSA9IFNoYWRvd3J1bi5Db21iYXREYXRhO1xyXG5cclxuLy8gaXRlbSwgYWN0b3IsIGRpY2VQb29sLCBhdHRhY2ssIGRlZmVuc2UsIHNwZWxsLCBmb3JtXHJcbmV4cG9ydCB0eXBlIFRlc3QgPSAge1xyXG4gICAgbGFiZWw6IHN0cmluZztcclxuICAgIHR5cGU6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUZXN0RGlhbG9nRGF0YSB7XHJcbiAgICBwYXJ0czogUGFydHNMaXN0PG51bWJlcj5cclxuICAgIGxpbWl0OiBudW1iZXJcclxuICAgIHdvdW5kczogYm9vbGVhblxyXG4gICAgZXh0ZW5kZWQ6IGJvb2xlYW5cclxuICAgIHJvbGxNb2RlOiBrZXlvZiB0eXBlb2YgQ09ORklHLkRpY2Uucm9sbE1vZGVzO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUm9sbFByb3BzIHtcclxuICAgIHBhcnRzPzogTW9kTGlzdDxudW1iZXI+LFxyXG4gICAgbGltaXQ/OiBhbnksXHJcbiAgICBleHBsb2RlU2l4ZXM/OiBib29sZWFuXHJcbn1cclxuXHJcbi8vIFRPRE86IFNlcGFyYXRlIGludG8gJ3JvbGwgZGF0YScgYW5kICd0ZW1wbGF0ZSBkYXRhJywgd2hpY2ggb25seSBwYXNzZXMgdGhyb3VnaCBidXQgaXNuJ3QgdXNlZC5cclxuZXhwb3J0IGludGVyZmFjZSBCYXNpY1JvbGxQcm9wcyB7XHJcbiAgICBwYXJ0cz86IE1vZExpc3Q8bnVtYmVyPjtcclxuICAgIGxpbWl0PzogTGltaXRGaWVsZDtcclxuICAgIGV4cGxvZGVTaXhlcz86IGJvb2xlYW47XHJcbiAgICB0aXRsZT86IHN0cmluZztcclxuICAgIGFjdG9yPzogU1I1QWN0b3I7XHJcbiAgICB0YXJnZXQ/OiBUb2tlbjtcclxuICAgIGl0ZW0/OiBTUjVJdGVtO1xyXG4gICAgLy8gUGVyc29uYWwgYXR0YWNrXHJcbiAgICBhdHRhY2s/OiBBdHRhY2tEYXRhXHJcbiAgICAvLyBJbmNvbWluZyBhdHRhY2sgZm9yIGEgZGVmZW5zZSB0ZXN0XHJcbiAgICBpbmNvbWluZ0F0dGFjaz86IEF0dGFja0RhdGE7XHJcbiAgICBkYW1hZ2U/OiBNb2RpZmllZERhbWFnZURhdGE7XHJcbiAgICB0ZXN0cz86IFRlc3RbXTtcclxuICAgIGRlc2NyaXB0aW9uPzogb2JqZWN0O1xyXG4gICAgcHJldmlld1RlbXBsYXRlPzogYm9vbGVhbjtcclxuICAgIGhpZGVSb2xsTWVzc2FnZT86IGJvb2xlYW47XHJcbiAgICByb2xsTW9kZT86IGtleW9mIHR5cGVvZiBDT05GSUcuRGljZS5yb2xsTW9kZXM7XHJcbiAgICBjb21iYXQ/OiBDb21iYXREYXRhXHJcbn1cclxuXHJcbi8qKiBQcm92aWRlIGEgY2xlYXIgaW50ZXJmYWNlIG9mIHdoaWNoIHZhbHVlIGFyZSBndWFyYW50ZWVkIHRvIGJlIGRlZmluZWQuXHJcbiAgICAgKi9cclxuZXhwb3J0IGludGVyZmFjZSBCYXNpY1JvbGxQcm9wc0RlZmF1bHRlZCBleHRlbmRzIEJhc2ljUm9sbFByb3BzIHtcclxuICAgIHRpdGxlOiBzdHJpbmdcclxuICAgIHBhcnRzOiBNb2RMaXN0PG51bWJlcj5cclxuICAgIGV4cGxvZGVTaXhlczogYm9vbGVhblxyXG4gICAgaGlkZVJvbGxNZXNzYWdlOiBib29sZWFuXHJcbiAgICBwcmV2aWV3VGVtcGxhdGU6IGJvb2xlYW5cclxuICAgIHJvbGxNb2RlOiBrZXlvZiB0eXBlb2YgQ09ORklHLkRpY2Uucm9sbE1vZGVzXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUm9sbERpYWxvZ09wdGlvbnMge1xyXG4gICAgZW52aXJvbm1lbnRhbD86IG51bWJlclxyXG4gICAgcG9vbD86IGJvb2xlYW5cclxuICAgIGV4dGVuZGVkPzogYm9vbGVhblxyXG4gICAgbGltaXQ/OiBib29sZWFuXHJcbiAgICB3b3VuZHM/OiBib29sZWFuXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQWR2YW5jZWRSb2xsUHJvcHMgZXh0ZW5kcyBCYXNpY1JvbGxQcm9wcyB7XHJcbiAgICBldmVudD86IFJvbGxFdmVudDtcclxuICAgIGV4dGVuZGVkPzogYm9vbGVhbjtcclxuICAgIHdvdW5kcz86IGJvb2xlYW47XHJcbiAgICBhZnRlcj86IChyb2xsOiBSb2xsIHwgdW5kZWZpbmVkKSA9PiB2b2lkO1xyXG4gICAgYXR0YWNrPzogQXR0YWNrRGF0YTtcclxuICAgIGZpcmVNb2RlPzogRmlyZU1vZGVEYXRhXHJcbiAgICBjb21iYXQ/OiBDb21iYXREYXRhXHJcbn1cclxuXHJcbi8qKiBQcm92aWRlIGEgY2xlYXIgaW50ZXJmYWNlIG9mIHdoaWNoIHZhbHVlIGFyZSBndWFyYW50ZWVkIHRvIGJlIGRlZmluZWQuXHJcbiAgICAgKi9cclxuZXhwb3J0IGludGVyZmFjZSBBZHZhbmNlZFJvbGxQcm9wc0RlZmF1bHRlZCBleHRlbmRzIEFkdmFuY2VkUm9sbFByb3BzIHtcclxuICAgIHBhcnRzOiBNb2RMaXN0PG51bWJlcj5cclxuICAgIHdvdW5kczogYm9vbGVhblxyXG59XHJcblxyXG50eXBlIFNoYWRvd3J1blJvbGxEYXRhID0ge1xyXG4gICAgbGltaXQ6IG51bWJlclxyXG4gICAgdGhyZXNob2xkOiBudW1iZXJcclxuICAgIHBhcnRzOiBNb2RMaXN0PG51bWJlcj5cclxuICAgIGV4cGxvZGVTaXhlczogYm9vbGVhblxyXG59XHJcbmV4cG9ydCBjbGFzcyBTaGFkb3dydW5Sb2xsIGV4dGVuZHMgUm9sbCB7XHJcbiAgICBkYXRhOiBTaGFkb3dydW5Sb2xsRGF0YVxyXG4gICAgLy8gYWRkIGNsYXNzIFJvbGwgdG8gdGhlIGpzb24gc28gZGljZS1zby1uaWNlIHdvcmtzXHJcbiAgICB0b0pTT04oKTogYW55IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gc3VwZXIudG9KU09OKCk7XHJcbiAgICAgICAgZGF0YS5jbGFzcyA9ICdSb2xsJztcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc2lkZXMoKTogbnVtYmVyW10ge1xyXG4gICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgIC8vIDAuNy54IGZvdW5kcnlWVFRcclxuICAgICAgICBpZiAodGhpcy50ZXJtcykge1xyXG4gICAgICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGVybXNbMF0ucmVzdWx0cy5tYXAocmVzdWx0ID0+IHJlc3VsdC5yZXN1bHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgLy8gMC42LnggZm91bmRyeVZUVFxyXG4gICAgICAgIHJldHVybiB0aGlzLnBhcnRzWzBdLnJvbGxzLm1hcChyb2xsID0+IHJvbGwucm9sbCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGxpbWl0KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5saW1pdDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdGhyZXNob2xkKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS50aHJlc2hvbGQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHBhcnRzKCk6IE1vZExpc3Q8bnVtYmVyPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5wYXJ0cztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZXhwbG9kZVNpeGVzKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuZXhwbG9kZVNpeGVzO1xyXG4gICAgfVxyXG5cclxuICAgIGNvdW50KHNpZGU6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IHRoaXMuc2lkZXM7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdHMucmVkdWNlKChjb3VudGVkLCByZXN1bHQpID0+IHJlc3VsdCA9PT0gc2lkZSA/IGNvdW50ZWQgKyAxIDogY291bnRlZCwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGhpdHMoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50b3RhbDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcG9vbCgpOiBudW1iZXIge1xyXG4gICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgIC8vIDAuNy54IGZvdW5kcnlWVFRcclxuICAgICAgICBpZiAodGhpcy50ZXJtcykge1xyXG4gICAgICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGljZVswXS5udW1iZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICAvLyAwLjYueCBmb3VuZHJ5VlRUXHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFydHNbMF0ucm9sbHMubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBnbGl0Y2hlZCgpOiBib29sZWFuIHtcclxuICAgICAgICBsZXQgZ2xpdGNoZWQgPSAwO1xyXG4gICAgICAgIFNSLmRpZS5nbGl0Y2guZm9yRWFjaChkaWUgPT4gZ2xpdGNoZWQgKz0gdGhpcy5jb3VudChkaWUpKTtcclxuICAgICAgICByZXR1cm4gZ2xpdGNoZWQgPiBNYXRoLmZsb29yKHRoaXMucG9vbCAvIDIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU2hhZG93cnVuUm9sbGVyIHtcclxuICAgIHN0YXRpYyBhc3luYyBpdGVtUm9sbChldmVudCwgaXRlbTogU1I1SXRlbSwgYWN0aW9uVGVzdERhdGE/OiBBY3Rpb25UZXN0RGF0YSk6IFByb21pc2U8U2hhZG93cnVuUm9sbCB8IHVuZGVmaW5lZD4ge1xyXG4gICAgICAgIC8vIENyZWF0ZSBjb21tb24gZGF0YSBmb3IgYWxsIGl0ZW0gdHlwZXMuXHJcbiAgICAgICAgY29uc3QgdGl0bGUgPSBpdGVtLmdldFJvbGxOYW1lKCk7XHJcbiAgICAgICAgY29uc3QgYWN0b3IgPSBpdGVtLmFjdG9yO1xyXG4gICAgICAgIGNvbnN0IGF0dGFjayA9ICBpdGVtLmdldEF0dGFja0RhdGEoMCwgYWN0aW9uVGVzdERhdGEpO1xyXG4gICAgICAgIGNvbnN0IHBhcnRzID0gaXRlbS5nZXRSb2xsUGFydHNMaXN0KCk7XHJcbiAgICAgICAgY29uc3QgbGltaXQgPSBpdGVtLmdldExpbWl0KCk7XHJcbiAgICAgICAgY29uc3QgZXh0ZW5kZWQgPSBpdGVtLmdldEV4dGVuZGVkKCk7XHJcbiAgICAgICAgY29uc3QgcHJldmlld1RlbXBsYXRlID0gaXRlbS5oYXNUZW1wbGF0ZTtcclxuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGl0ZW0uZ2V0Q2hhdERhdGEoKTtcclxuICAgICAgICBjb25zdCB0ZXN0cyA9IGl0ZW0uZ2V0T3Bwb3NlZFRlc3RzKCk7XHJcbiAgICAgICAgY29uc3QgbW9kaWZpZXJzID0gYXdhaXQgYWN0b3IuZ2V0TW9kaWZpZXJzKCk7XHJcblxyXG4gICAgICAgIC8vIFByZXBhcmUgdGhlIHJvbGwgYW5kIGRpYWxvZy5cclxuICAgICAgICBjb25zdCBhZHZhbmNlZFJvbGxQcm9wcyA9IHtcclxuICAgICAgICAgICAgaGlkZVJvbGxNZXNzYWdlOiB0cnVlLFxyXG4gICAgICAgICAgICBldmVudDogZXZlbnQsXHJcbiAgICAgICAgICAgIGFjdG9yLFxyXG4gICAgICAgICAgICBwYXJ0cyxcclxuICAgICAgICAgICAgbGltaXQsXHJcbiAgICAgICAgICAgIGV4dGVuZGVkLFxyXG4gICAgICAgICAgICB0ZXN0c1xyXG4gICAgICAgIH0gYXMgQWR2YW5jZWRSb2xsUHJvcHM7XHJcblxyXG5cclxuICAgICAgICAvLyBSZXNldCBkaWFsb2cgb3B0aW9ucyB0byBkZWZhdWx0IHZhbHVlcyBhbmQgc2V0IGVhY2ggYWNjb3JkaW5nIHRvIGl0ZW0gdHlwZXMuXHJcbiAgICAgICAgY29uc3QgYWR2YW5jZWREaWFsb2dPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBlbnZpcm9ubWVudGFsOiAwLFxyXG4gICAgICAgIH0gYXMgUm9sbERpYWxvZ09wdGlvbnM7XHJcbiAgICAgICAgaWYgKGl0ZW0uYXBwbHlFbnZpcm9ubWVudGFsTW9kaWZpZXJzKCkpIHtcclxuICAgICAgICAgICAgYWR2YW5jZWREaWFsb2dPcHRpb25zLmVudmlyb25tZW50YWwgPSBtb2RpZmllcnMuZW52aXJvbm1lbnRhbC50b3RhbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHJvbGwgPSBhd2FpdCBTaGFkb3dydW5Sb2xsZXIuYWR2YW5jZWRSb2xsKGFkdmFuY2VkUm9sbFByb3BzLCBhZHZhbmNlZERpYWxvZ09wdGlvbnMpO1xyXG5cclxuICAgICAgICBpZiAoIXJvbGwpIHJldHVybjtcclxuXHJcbiAgICAgICAgaWYgKGF0dGFjaykge1xyXG4gICAgICAgICAgICBhdHRhY2suaGl0cyA9IHJvbGwuaGl0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRPRE86IFNlcGFyYXRpb24gb2YgY29uY2VybnMuICdSb2xsZXInIHNob3VsZCBvbmx5IHJvbGwgYW5kIHByZXBhcmUgdG8gcm9sbC5cclxuICAgICAgICAvLyAgICAgICBSdWxlcyBzaG91bGQgYmUgaGFuZGxlZCBlbHNld2hlcmUuIEF0dGFjayBIYW5kbGVyPyBSYW5nZWQsIE1lbGVlLCBEaXJlY3RTcGVsbCwgSW5kaXJlY3RTcGVsbC4uLlxyXG4gICAgICAgIGlmIChhdHRhY2sgJiYgaXRlbS5pc0NvbWJhdFNwZWxsKCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgc3BlbGxBdHRhY2sgPSBpdGVtLmdldEF0dGFja0RhdGEocm9sbC5oaXRzLCBhY3Rpb25UZXN0RGF0YSk7XHJcbiAgICAgICAgICAgIGlmIChzcGVsbEF0dGFjaykgYXR0YWNrLmRhbWFnZSA9IHNwZWxsQXR0YWNrLmRhbWFnZTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAvLyBIYW5kbGUgdXNlciB0YXJnZXRpbmcgZm9yIGZvciB0YXJnZXRlZCBtZXNzYWdlcyBhbmQgZGlzcGxheS5cclxuICAgICAgICBjb25zdCB0YXJnZXRzOiBUb2tlbltdID0gSGVscGVycy5nZXRVc2VyVGFyZ2V0cygpO1xyXG4gICAgICAgIC8vIEFsbG93IGZvciBkaXJlY3QgZGVmZW5zZSB3aXRob3V0IHRva2VuIHNlbGVjdGlvbiBmb3IgT05FIHRva2VuIHRhcmdldGVkLlxyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHRhcmdldHMubGVuZ3RoID09PSAxID8gdGFyZ2V0c1swXSA6IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgY29uc3Qgcm9sbENoYXRPcHRpb25zID0ge3RpdGxlLCByb2xsLCBhY3RvciwgaXRlbSwgYXR0YWNrLCBwcmV2aWV3VGVtcGxhdGUsIHRhcmdldHMsIHRhcmdldCwgZGVzY3JpcHRpb24sIHRlc3RzfTtcclxuICAgICAgICBhd2FpdCBjcmVhdGVSb2xsQ2hhdE1lc3NhZ2Uocm9sbENoYXRPcHRpb25zKTtcclxuXHJcbiAgICAgICAgaWYgKHRlc3RzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldENoYXRPcHRpb25zID0ge2FjdG9yLCBpdGVtLCB0ZXN0cywgcm9sbCwgYXR0YWNrfVxyXG4gICAgICAgICAgICBhd2FpdCBTaGFkb3dydW5Sb2xsZXIudGFyZ2V0c0NoYXRNZXNzYWdlcyh0YXJnZXRzLCB0YXJnZXRDaGF0T3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcm9sbDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYXN5bmMgcmVzdWx0aW5nSXRlbVJvbGxzKGV2ZW50LCBpdGVtOiBTUjVJdGVtLCBhY3Rpb25UZXN0RGF0YT8gOiBBY3Rpb25UZXN0RGF0YSkge1xyXG4gICAgICAgIC8vIENhc3QgcmVzdWx0aW5nIHRlc3RzIGZyb20gYWJvdmUgU3VjY2VzcyBUZXN0IGRlcGVuZGluZyBvbiBpdGVtIHR5cGUuXHJcbiAgICAgICAgaWYgKGl0ZW0uaXNDb21wbGV4Rm9ybSgpICYmIGFjdGlvblRlc3REYXRhPy5jb21wbGV4Rm9ybSkge1xyXG4gICAgICAgICAgICBjb25zdCBsZXZlbCA9IGFjdGlvblRlc3REYXRhLmNvbXBsZXhGb3JtLmxldmVsO1xyXG4gICAgICAgICAgICBjb25zdCBmYWRlID0gaXRlbS5nZXRGYWRlKCkgKyBsZXZlbDtcclxuICAgICAgICAgICAgY29uc3QgbWluRmFkZSA9IDI7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsRmFkZSA9IE1hdGgubWF4KGZhZGUsIG1pbkZhZGUpO1xyXG4gICAgICAgICAgICBhd2FpdCBpdGVtLmFjdG9yLnJvbGxGYWRlKHsgZXZlbnQgfSwgdG90YWxGYWRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaXRlbS5pc1NwZWxsKCkpIHtcclxuICAgICAgICAgICAgLy8gaWYgKGl0ZW0uaXNDb21iYXRTcGVsbCgpICYmIHJvbGwpIHtcclxuICAgICAgICAgICAgLy8gICAgIC8vIFRPRE86IGlzQ29tYmF0U3BlbGwgYW5kIHJvbGwgZG9lcyBzb21ldGhpbmcgYnV0IGlzbid0IGhhbmRsZWQuXHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgaWYgKGFjdGlvblRlc3REYXRhPy5zcGVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZm9yY2UgPSBhY3Rpb25UZXN0RGF0YS5zcGVsbC5mb3JjZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlY2tsZXNzID0gYWN0aW9uVGVzdERhdGEuc3BlbGwucmVja2xlc3M7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkcmFpbiA9IGl0ZW0uZ2V0RHJhaW4oKSArIGZvcmNlICsgKHJlY2tsZXNzID8gMyA6IDApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWluRHJhaW4gPSAyO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdG90YWxEcmFpbiA9IE1hdGgubWF4KGRyYWluLCBtaW5EcmFpbik7XHJcblxyXG4gICAgICAgICAgICAgICAgYXdhaXQgaXRlbS5hY3Rvci5yb2xsRHJhaW4oeyBldmVudCB9LCB0b3RhbERyYWluKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChpdGVtLmlzV2VhcG9uKCkpIHtcclxuICAgICAgICAgICAgaWYgKGl0ZW0uaGFzQW1tbygpICYmIGFjdGlvblRlc3REYXRhPy5yYW5nZWRXZWFwb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpcmVNb2RlID0gYWN0aW9uVGVzdERhdGEucmFuZ2VkV2VhcG9uLmZpcmVNb2RlLnZhbHVlIHx8IDE7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBpdGVtLnVzZUFtbW8oZmlyZU1vZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBzaGFkb3dydW5Gb3JtdWxhKHtcclxuICAgICAgICBwYXJ0czogcGFydHNQcm9wcyxcclxuICAgICAgICBsaW1pdCxcclxuICAgICAgICBleHBsb2RlLFxyXG4gICAgfToge1xyXG4gICAgICAgIHBhcnRzOiBNb2RMaXN0PG51bWJlcj47XHJcbiAgICAgICAgbGltaXQ/OiBCYXNlVmFsdWVQYWlyPG51bWJlcj4gJiBMYWJlbEZpZWxkO1xyXG4gICAgICAgIGV4cGxvZGU/OiBib29sZWFuO1xyXG4gICAgfSk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgcGFydHMgPSBuZXcgUGFydHNMaXN0KHBhcnRzUHJvcHMpO1xyXG4gICAgICAgIGNvbnN0IGNvdW50ID0gcGFydHMudG90YWw7XHJcbiAgICAgICAgaWYgKGNvdW50IDw9IDApIHtcclxuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1LlJvbGxPbmVEaWUnKSk7XHJcbiAgICAgICAgICAgIHJldHVybiAnMGQ2Y3M+PTUnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgZm9ybXVsYSA9IGAke2NvdW50fWQ2YDtcclxuICAgICAgICBpZiAoZXhwbG9kZSkge1xyXG4gICAgICAgICAgICBmb3JtdWxhICs9ICd4Nic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsaW1pdD8udmFsdWUpIHtcclxuICAgICAgICAgICAgZm9ybXVsYSArPSBga2gke2xpbWl0LnZhbHVlfWA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvcm11bGEgKz0gJ2NzPj01JztcclxuICAgICAgICByZXR1cm4gZm9ybXVsYTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcm9sbChwcm9wczogUm9sbFByb3BzKTogU2hhZG93cnVuUm9sbHx1bmRlZmluZWQge1xyXG4gICAgICAgIGNvbnN0IHBhcnRzID0gbmV3IFBhcnRzTGlzdChwcm9wcy5wYXJ0cyk7XHJcblxyXG4gICAgICAgIC8vIFByZXBhcmUgU1IgU3VjY2VzcyBUZXN0IHdpdGggZm91bmRyeSBmb3JtdWxhLlxyXG4gICAgICAgIGNvbnN0IGZvcm11bGFPcHRpb25zID0geyBwYXJ0czogcGFydHMubGlzdCwgbGltaXQ6IHByb3BzLmxpbWl0LCBleHBsb2RlOiBwcm9wcy5leHBsb2RlU2l4ZXMgfTtcclxuICAgICAgICBjb25zdCBmb3JtdWxhID0gdGhpcy5zaGFkb3dydW5Gb3JtdWxhKGZvcm11bGFPcHRpb25zKTtcclxuICAgICAgICBpZiAoIWZvcm11bGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgU3VjY2VzcyBUZXN0LlxyXG4gICAgICAgIGNvbnN0IHJvbGxEYXRhID0ge3BhcnRzOiBwYXJ0cy5saXN0LCBsaW1pdDogcHJvcHMubGltaXQsIGV4cGxvZGVTaXhlczogcHJvcHMuZXhwbG9kZVNpeGVzfTtcclxuICAgICAgICBjb25zdCByb2xsID0gbmV3IFNoYWRvd3J1blJvbGwoZm9ybXVsYSwgcm9sbERhdGEpO1xyXG5cclxuICAgICAgICAvLyBSZXR1cm4gcm9sbCByZWZlcmVuY2UgaW5zdGVhZCByb2xsKCkgcmV0dXJuIHRvIGF2b2lkIHR5cGluZyBpc3N1ZXMuXHJcbiAgICAgICAgcm9sbC5yb2xsKCk7XHJcblxyXG4gICAgICAgIHJldHVybiByb2xsO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBhc3luYyBiYXNpY1JvbGwoYmFzaWNQcm9wczogQmFzaWNSb2xsUHJvcHMpOiBQcm9taXNlPFNoYWRvd3J1blJvbGwgfCB1bmRlZmluZWQ+IHtcclxuICAgICAgICBjb25zdCBwcm9wcyA9IFNoYWRvd3J1blJvbGxlci5iYXNpY1JvbGxQcm9wc0RlZmF1bHRzKGJhc2ljUHJvcHMpO1xyXG5cclxuICAgICAgICBjb25zdCByb2xsID0gYXdhaXQgU2hhZG93cnVuUm9sbGVyLnJvbGwoe3BhcnRzOiBwcm9wcy5wYXJ0cywgbGltaXQ6IHByb3BzLmxpbWl0LCBleHBsb2RlU2l4ZXM6IHByb3BzLmV4cGxvZGVTaXhlc30pO1xyXG4gICAgICAgIGlmICghcm9sbCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBpZiAoIXByb3BzLmhpZGVSb2xsTWVzc2FnZSkge1xyXG4gICAgICAgICAgICBhd2FpdCBTaGFkb3dydW5Sb2xsZXIucm9sbENoYXRNZXNzYWdlKHJvbGwsIHByb3BzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByb2xsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBQcm92aWRlIGEgY2xlYXIgaW50ZXJmYWNlIG9mIHdoaWNoIHZhbHVlIGFyZSBndWFyYW50ZWVkIHRvIGJlIGRlZmluZWQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBiYXNpY1JvbGxQcm9wc0RlZmF1bHRzKHByb3BzOiBCYXNpY1JvbGxQcm9wcyk6IEJhc2ljUm9sbFByb3BzRGVmYXVsdGVkIHtcclxuICAgICAgICBwcm9wcy50aXRsZSA9IHByb3BzLnRpdGxlID8/IERFRkFVTFRfUk9MTF9OQU1FO1xyXG4gICAgICAgIHByb3BzLnBhcnRzID0gcHJvcHMucGFydHMgPz8gW107XHJcbiAgICAgICAgcHJvcHMuZXhwbG9kZVNpeGVzID0gcHJvcHMuZXhwbG9kZVNpeGVzID8/IGZhbHNlO1xyXG4gICAgICAgIHByb3BzLmhpZGVSb2xsTWVzc2FnZSA9IHByb3BzLmhpZGVSb2xsTWVzc2FnZSA/PyBmYWxzZTtcclxuICAgICAgICBwcm9wcy5yb2xsTW9kZSA9IHByb3BzLnJvbGxNb2RlID8/IENPTkZJRy5EaWNlLnJvbGxNb2Rlcy5yb2xsO1xyXG4gICAgICAgIHByb3BzLnByZXZpZXdUZW1wbGF0ZSA9IHByb3BzLnByZXZpZXdUZW1wbGF0ZSA/PyBmYWxzZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHsuLi5wcm9wc30gYXMgQmFzaWNSb2xsUHJvcHNEZWZhdWx0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFByb3ZpZGUgYSBjbGVhciBpbnRlcmZhY2Ugb2Ygd2hpY2ggdmFsdWUgYXJlIGd1YXJhbnRlZWQgdG8gYmUgZGVmaW5lZC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFkdmFuY2VkUm9sbFByb3BzRGVmYXVsdHMocHJvcHM6IEFkdmFuY2VkUm9sbFByb3BzKTogQWR2YW5jZWRSb2xsUHJvcHNEZWZhdWx0ZWQge1xyXG4gICAgICAgIHByb3BzLnBhcnRzID0gcHJvcHMucGFydHMgPz8gW107XHJcbiAgICAgICAgcHJvcHMud291bmRzID0gcHJvcHMud291bmRzID8/IHRydWU7XHJcblxyXG4gICAgICAgIHJldHVybiB7Li4ucHJvcHN9IGFzIEFkdmFuY2VkUm9sbFByb3BzRGVmYXVsdGVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHJvbXB0IGEgcm9sbCBmb3IgdGhlIHVzZXJcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHByb21wdFJvbGwoKTogUHJvbWlzZTxTaGFkb3dydW5Sb2xsIHwgdW5kZWZpbmVkPiB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBnYW1lLnVzZXIuZ2V0RmxhZyhTWVNURU1fTkFNRSwgRkxBR1MuTGFzdFJvbGxQcm9tcHRWYWx1ZSkgfHwgMDtcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IFt7IG5hbWU6ICdTUjUuTGFzdFJvbGwnLCB2YWx1ZSB9XTtcclxuICAgICAgICBjb25zdCBhZHZhbmNlZFJvbGxQcm9wcyA9IHsgcGFydHMsIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoXCJTUjUuVGVzdFwiKX0gYXMgQWR2YW5jZWRSb2xsUHJvcHM7XHJcbiAgICAgICAgY29uc3QgZGlhbG9nT3B0aW9ucyA9IHsgcG9vbDogdHJ1ZSB9XHJcbiAgICAgICAgcmV0dXJuIFNoYWRvd3J1blJvbGxlci5hZHZhbmNlZFJvbGwoYWR2YW5jZWRSb2xsUHJvcHMsIGRpYWxvZ09wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RhcnQgYW4gYWR2YW5jZWQgcm9sbFxyXG4gICAgICogLSBQcm9tcHRzIHRoZSB1c2VyIGZvciBtb2RpZmllcnNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzeW5jIGFkdmFuY2VkUm9sbChhZHZhbmNlZFByb3BzOiBBZHZhbmNlZFJvbGxQcm9wcywgZGlhbG9nT3B0aW9ucz86IFJvbGxEaWFsb2dPcHRpb25zKTogUHJvbWlzZTxTaGFkb3dydW5Sb2xsIHwgdW5kZWZpbmVkPiB7XHJcbiAgICAgICAgLy8gUmVtb3ZlIGFmdGVyIHJvbGwgY2FsbGJhY2sgYXMgdG8gbm90IG1vdmUgaXQgZnVydGhlciBpbnRvIG90aGVyIGZ1bmN0aW9uIGNhbGxzLlxyXG4gICAgICAgIGNvbnN0IHthZnRlcn0gPSBhZHZhbmNlZFByb3BzO1xyXG5cclxuICAgICAgICBjb25zdCBwcm9wcyA9IFNoYWRvd3J1blJvbGxlci5hZHZhbmNlZFJvbGxQcm9wc0RlZmF1bHRzKGFkdmFuY2VkUHJvcHMpO1xyXG5cclxuICAgICAgICAvLyByZW1vdmUgbGltaXRzIGlmIGdhbWUgc2V0dGluZ3MgaXMgc2V0XHJcbiAgICAgICAgaWYgKCFnYW1lLnNldHRpbmdzLmdldChTWVNURU1fTkFNRSwgRkxBR1MuQXBwbHlMaW1pdHMpKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBwcm9wcy5saW1pdDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBTaGFkb3dydW5Sb2xsZXIuX2Vycm9yT25JbnZhbGlkTGltaXQocHJvcHMubGltaXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQXNrIHVzZXIgZm9yIGFkZGl0aW9uYWwsIGdlbmVyYWwgc3VjY2VzcyB0ZXN0IHJvbGUgbW9kaWZpZXJzLlxyXG4gICAgICAgIGNvbnN0IHRlc3REaWFsb2dPcHRpb25zID0ge1xyXG4gICAgICAgICAgICB0aXRsZTogcHJvcHMudGl0bGUsXHJcbiAgICAgICAgICAgIGRpYWxvZ09wdGlvbnMsXHJcbiAgICAgICAgICAgIGV4dGVuZGVkOiBwcm9wcy5leHRlbmRlZCxcclxuICAgICAgICAgICAgbGltaXQ6IHByb3BzLmxpbWl0LFxyXG4gICAgICAgICAgICB3b3VuZHM6IHByb3BzLndvdW5kcyxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCB0ZXN0RGlhbG9nID0gYXdhaXQgU2hhZG93cnVuVGVzdERpYWxvZy5jcmVhdGUocHJvcHMuYWN0b3IsIHRlc3REaWFsb2dPcHRpb25zLCBwcm9wcy5wYXJ0cyk7XHJcbiAgICAgICAgY29uc3QgdGVzdERhdGEgPSBhd2FpdCB0ZXN0RGlhbG9nLnNlbGVjdCgpO1xyXG5cclxuICAgICAgICBpZiAodGVzdERpYWxvZy5jYW5jZWxlZCkgcmV0dXJuO1xyXG5cclxuXHJcbiAgICAgICAgLy8gUHJlcGFyZSBUZXN0IFJvbGwuXHJcbiAgICAgICAgY29uc3QgYmFzaWNSb2xsUHJvcHMgPSB7Li4ucHJvcHN9IGFzIEJhc2ljUm9sbFByb3BzRGVmYXVsdGVkO1xyXG4gICAgICAgIC8vIGJhc2ljUm9sbFByb3BzLndvdW5kcyA9IHRlc3REYXRhLndvdW5kcztcclxuICAgICAgICAvLyBiYXNpY1JvbGxQcm9wcy5kaWFsb2dPcHRpb25zID0gdGVzdERhdGEuZGlhbG9nT3B0aW9ucztcclxuICAgICAgICBiYXNpY1JvbGxQcm9wcy5yb2xsTW9kZSA9IHRlc3REYXRhLnJvbGxNb2RlO1xyXG4gICAgICAgIC8vIFRPRE86IFRoaXMgaXMgbmVlZGVkIGEgaG90Zml4Li4uIGJhc2ljUm9sbCBpcyB1c2VkIHNlY29uZENoYW5jZSBhbmQgcHVzaFRoZUxpbWl0IGNoYXQgYWN0aW9ucy5cclxuICAgICAgICAvLyAgICAgICBJZiB0aG9zZSBhcmUgaGFuZGxlZCBieSBhZHZhbmNlZFJvbGwgKHdpdGhvdXQgYSBkaWFsb2cpIGJhc2ljUm9sbCBtZXNzYWdlIGNyZWF0aW9uIGNhbiBiZSByZW1vdmVkXHJcbiAgICAgICAgLy8gICAgICAgYW5kIHRoaXMgbGluZSBhcyB3ZWxsLi4uXHJcbiAgICAgICAgYmFzaWNSb2xsUHJvcHMuaGlkZVJvbGxNZXNzYWdlID0gdHJ1ZTtcclxuXHJcblxyXG4gICAgICAgIGlmICh0ZXN0RGlhbG9nLnNlbGVjdGVkQnV0dG9uID09PSAnZWRnZScgJiYgcHJvcHMuYWN0b3IpIHtcclxuICAgICAgICAgICAgYXdhaXQgU2hhZG93cnVuUm9sbGVyLmhhbmRsZUV4cGxvZGluZ1NpeGVzKHByb3BzLmFjdG9yLCBiYXNpY1JvbGxQcm9wcywgdGVzdERhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQnVpbGQgYmFzaWMgcm9sbCBwYXJ0cyBhcyB0aGUgTEFTVCBzdGVwLCB0byBhdm9pZCBtaXNzaW5nIGFueSBwYXJ0cy5cclxuICAgICAgICBiYXNpY1JvbGxQcm9wcy5wYXJ0cyA9IHRlc3REYXRhLnBhcnRzLmxpc3Q7XHJcblxyXG4gICAgICAgIC8vIEV4ZWN1dGUgVGVzdCByb2xsLi4uXHJcbiAgICAgICAgY29uc3Qgcm9sbCA9IGF3YWl0IHRoaXMuYmFzaWNSb2xsKGJhc2ljUm9sbFByb3BzKTtcclxuICAgICAgICBpZiAoIXJvbGwpIHJldHVybjtcclxuXHJcblxyXG4gICAgICAgIGlmICghcHJvcHMuaGlkZVJvbGxNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IFNoYWRvd3J1blJvbGxlci5yb2xsQ2hhdE1lc3NhZ2Uocm9sbCwgYmFzaWNSb2xsUHJvcHMpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGlmICh0ZXN0RGF0YS5leHRlbmRlZCkge1xyXG4gICAgICAgICAgICBTaGFkb3dydW5Sb2xsZXIuaGFuZGxlRXh0ZW5kZWRSb2xsKHByb3BzLCB0ZXN0RGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gQ2FsbCBhbnkgcHJvdmlkZWQgY2FsbGJhY2tzIHRvIGJlIGV4ZWN1dGVkIGFmdGVyIHRoaXMgcm9sbC5cclxuICAgICAgICBpZiAoYWZ0ZXIpIGF3YWl0IGFmdGVyKHJvbGwpO1xyXG5cclxuICAgICAgICByZXR1cm4gcm9sbDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYXN5bmMgcm9sbENoYXRNZXNzYWdlKHJvbGw6IFNoYWRvd3J1blJvbGwsIHByb3BzOiBCYXNpY1JvbGxQcm9wc0RlZmF1bHRlZCkge1xyXG4gICAgICAgIGNvbnN0IHthY3RvciwgdGFyZ2V0LCBpdGVtLCByb2xsTW9kZSwgZGVzY3JpcHRpb24sIHRpdGxlLCBwcmV2aWV3VGVtcGxhdGUsIGF0dGFjaywgaW5jb21pbmdBdHRhY2ssIGRhbWFnZSwgdGVzdHMsIGNvbWJhdH0gPSBwcm9wcztcclxuICAgICAgICBjb25zdCByb2xsQ2hhdE1lc3NhZ2VPcHRpb25zID0ge3JvbGwsIGFjdG9yLCB0YXJnZXQsIGl0ZW0sIHJvbGxNb2RlLCBkZXNjcmlwdGlvbiwgdGl0bGUsIHByZXZpZXdUZW1wbGF0ZSwgYXR0YWNrLCBpbmNvbWluZ0F0dGFjaywgZGFtYWdlLCB0ZXN0cywgY29tYmF0fTtcclxuICAgICAgICBhd2FpdCBjcmVhdGVSb2xsQ2hhdE1lc3NhZ2Uocm9sbENoYXRNZXNzYWdlT3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFNlbmQgYSBtZXNzYWdlIHRvIHRoZSBzcGVjaWZpYyB0YXJnZXRlZCBwbGF5ZXIgZ2l2ZW4uXHJcbiAgICAgKlxyXG4gICAgICogVXNlIHRhcmdldHNDaGF0TWVzc2FnZXMgZm9yIGEgc2ltcGxlIHdheSB0byBzZW5kIHRvIGFsbCBhY3RpdmUgcGxheWVyIHRhcmdldHMuXHJcbiAgICAgKlxyXG4gICAgICogU2hvdWxkIGEgdGFyZ2V0IGhhdmUgbXVsdGlwbGUgdXNlciBvd25lcnMsIGVhY2ggd2lsbCBnZXQgYSBtZXNzYWdlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBvcHRpb25zXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyB0YXJnZXRDaGF0TWVzc2FnZShvcHRpb25zOiBSb2xsVGFyZ2V0Q2hhdE1lc3NhZ2UpIHtcclxuICAgICAgICBpZiAoIWdhbWUuc2V0dGluZ3MuZ2V0KFNZU1RFTV9OQU1FLCBGTEFHUy5XaGlzcGVyT3Bwb3NlZFRlc3RzVG9UYXJnZXRlZFBsYXllcnMpKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IHJvbGxNb2RlID0gb3B0aW9ucy5yb2xsTW9kZSA/PyBnYW1lLnNldHRpbmdzLmdldChDT1JFX05BTUUsIENPUkVfRkxBR1MuUm9sbE1vZGUpO1xyXG4gICAgICAgIGlmIChyb2xsTW9kZSA9PT0gJ3JvbGwnKSByZXR1cm47XHJcblxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmUgLy8gVG9rZW4uYWN0b3IgaXMgb2YgdHlwZSBBY3RvciBpbnN0ZWFkIG9mIFNSNUFjdG9yXHJcbiAgICAgICAgY29uc3QgdXNlcnMgPSBvcHRpb25zLnRhcmdldC5hY3Rvci5nZXRBY3RpdmVQbGF5ZXJPd25lcnMoKTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCB1c2VyIG9mIHVzZXJzKSB7XHJcbiAgICAgICAgICAgIGlmICh1c2VyLmlzR00pIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBpZiAodXNlciA9PT0gZ2FtZS51c2VyKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldENoYXRNZXNzYWdlID0ge1xyXG4gICAgICAgICAgICAgICAgYWN0b3I6IG9wdGlvbnMuYWN0b3IsIHRhcmdldDogb3B0aW9ucy50YXJnZXQsIHRhcmdldHM6IFtvcHRpb25zLnRhcmdldF0sIGl0ZW06IG9wdGlvbnMuaXRlbSxcclxuICAgICAgICAgICAgICAgIHRlc3RzOiBvcHRpb25zLnRlc3RzLCB3aGlzcGVyVG86IHVzZXIsIGF0dGFjazogb3B0aW9ucy5hdHRhY2tcclxuICAgICAgICAgICAgfSBhcyBUYXJnZXRDaGF0TWVzc2FnZU9wdGlvbnM7XHJcbiAgICAgICAgICAgIGF3YWl0IGNyZWF0ZVRhcmdldENoYXRNZXNzYWdlKHRhcmdldENoYXRNZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFNlbmQgbWVzc2FnZXMgdG8gQUxMIHRhcmdldHMsIG5vIG1hdHRlciBpZiBzcGVjaWZpY2FsbHkgdGFyZ2V0ZWQgaW4gYSBhY3Rpb24gZGlhbG9nLlxyXG4gICAgICpcclxuICAgICAqIFRoaXMgY2FuIGNhdXNlIGZvciBtdWx0aXBsZSB0YXJnZXQgd2hpc3BlcnMgdG8gaGFwcGVuLCBldmVuIGlmIHRoZSBhY3RpdmUgcGxheWVyIG9ubHkgc2VsZWN0ZWQgb25lXHJcbiAgICAgKiBkdXJpbmcsIGZvciBleGFtcGxlLCB0aGUgcmFuZ2VkIHdlYXBvbiBkaWFsb2cgKHdoaWNoIGdpdmVzIGEgc2VsZWN0aW9uIGFuZCByZXR1cm5zIG9uZSlcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG9wdGlvbnNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzeW5jIHRhcmdldHNDaGF0TWVzc2FnZXModGFyZ2V0czogVG9rZW5bXSwgb3B0aW9uczogUm9sbFRhcmdldENoYXRNZXNzYWdlKSB7XHJcbiAgICAgICAgaWYgKCFnYW1lLnNldHRpbmdzLmdldChTWVNURU1fTkFNRSwgRkxBR1MuV2hpc3Blck9wcG9zZWRUZXN0c1RvVGFyZ2V0ZWRQbGF5ZXJzKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICB0YXJnZXRzLmZvckVhY2godGFyZ2V0ID0+IHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSAvLyBUb2tlbi5hY3RvciBpcyBvZiB0eXBlIEFjdG9yIGluc3RlYWQgb2YgU1I1QWN0b3JcclxuICAgICAgICAgICAgaWYgKCF0YXJnZXQuYWN0b3IuaGFzQWN0aXZlUGxheWVyT3duZXIoKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgb3B0aW9ucyA9IHsuLi5vcHRpb25zLCB0YXJnZXR9O1xyXG4gICAgICAgICAgICBTaGFkb3dydW5Sb2xsZXIudGFyZ2V0Q2hhdE1lc3NhZ2Uob3B0aW9ucyk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgX2Vycm9yT25JbnZhbGlkTGltaXQobGltaXQ/OiBMaW1pdEZpZWxkKSB7XHJcbiAgICAgICAgaWYgKGxpbWl0ICYmIGxpbWl0LnZhbHVlIDwgMCkge1xyXG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnU1I1Lldhcm5pbmdzLk5lZ2F0aXZlTGltaXRWYWx1ZScpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGhhbmRsZUV4dGVuZGVkUm9sbChhZHZhbmNlZFByb3BzOiBBZHZhbmNlZFJvbGxQcm9wc0RlZmF1bHRlZCwgdGVzdERhdGE6IFRlc3REaWFsb2dEYXRhKSB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudEV4dGVuZGVkID0gdGVzdERhdGEucGFydHMuZ2V0UGFydFZhbHVlKCdTUjUuRXh0ZW5kZWQnKSA/PyAwO1xyXG4gICAgICAgIHRlc3REYXRhLnBhcnRzLmFkZFVuaXF1ZVBhcnQoJ1NSNS5FeHRlbmRlZCcsIGN1cnJlbnRFeHRlbmRlZCAtIDEpO1xyXG5cclxuICAgICAgICAvLyBQcmVwYXJlIHRoZSBuZXh0LCBleHRlbmRlZCB0ZXN0IHJvbGwuXHJcbiAgICAgICAgYWR2YW5jZWRQcm9wcy5wYXJ0cyA9IHRlc3REYXRhLnBhcnRzLmxpc3Q7XHJcbiAgICAgICAgYWR2YW5jZWRQcm9wcy5leHRlbmRlZCA9IHRydWU7XHJcbiAgICAgICAgY29uc3QgZGVsYXlJbk1zID0gNDAwO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5hZHZhbmNlZFJvbGwoYWR2YW5jZWRQcm9wcyksIGRlbGF5SW5Ncyk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFzeW5jIGhhbmRsZUV4cGxvZGluZ1NpeGVzKGFjdG9yOiBTUjVBY3RvciwgYmFzaWNQcm9wczogQmFzaWNSb2xsUHJvcHMsIHRlc3REYXRhOiBUZXN0RGlhbG9nRGF0YSkge1xyXG4gICAgICAgIGJhc2ljUHJvcHMuZXhwbG9kZVNpeGVzID0gdHJ1ZTtcclxuICAgICAgICBkZWxldGUgYmFzaWNQcm9wcy5saW1pdDtcclxuICAgICAgICB0ZXN0RGF0YS5wYXJ0cy5hZGRVbmlxdWVQYXJ0KCdTUjUuUHVzaFRoZUxpbWl0JywgYWN0b3IuZ2V0RWRnZSgpLnZhbHVlKTtcclxuXHJcbiAgICAgICAgYXdhaXQgYWN0b3IudXNlRWRnZSgpO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vIGdhbWUgc2V0dGluZ3MgZm9yIHNoYWRvd3J1biA1ZVxyXG5cclxuaW1wb3J0IHsgVmVyc2lvbk1pZ3JhdGlvbiB9IGZyb20gJy4vbWlncmF0b3IvVmVyc2lvbk1pZ3JhdGlvbic7XHJcbmltcG9ydCB7IEZMQUdTLCBTWVNURU1fTkFNRSB9IGZyb20gJy4vY29uc3RhbnRzJztcclxuXHJcbmV4cG9ydCBjb25zdCByZWdpc3RlclN5c3RlbVNldHRpbmdzID0gKCkgPT4ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZWdpc3RlciBkaWFnb25hbCBtb3ZlbWVudCBydWxlIHNldHRpbmdcclxuICAgICAqL1xyXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcihTWVNURU1fTkFNRSwgJ2RpYWdvbmFsTW92ZW1lbnQnLCB7XHJcbiAgICAgICAgbmFtZTogJ1NFVFRJTkdTLkRpYWdvbmFsTW92ZW1lbnROYW1lJyxcclxuICAgICAgICBoaW50OiAnU0VUVElOR1MuRGlhZ29uYWxNb3ZlbWVudERlc2NyaXB0aW9uJyxcclxuICAgICAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgICAgICBjb25maWc6IHRydWUsXHJcbiAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgIGRlZmF1bHQ6ICcxLTItMScsXHJcbiAgICAgICAgY2hvaWNlczoge1xyXG4gICAgICAgICAgICAnMS0xLTEnOiAnU0VUVElOR1MuSWdub3JlRGlhZ29uYWwnLFxyXG4gICAgICAgICAgICAnMS0yLTEnOiAnU0VUVElOR1MuRXN0aW1hdGVEaWFnb25hbCcsXHJcbiAgICAgICAgICAgICdFVUNMJzogJ1NFVFRJTkdTLkV1Y2xpZGVhbicsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbkNoYW5nZTogKHJ1bGUpID0+IChjYW52YXMuZ3JpZC5kaWFnb25hbFJ1bGUgPSBydWxlKSxcclxuICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVmYXVsdCBsaW1pdCBiZWhhdmlvclxyXG4gICAgICovXHJcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKFNZU1RFTV9OQU1FLCAnYXBwbHlMaW1pdHMnLCB7XHJcbiAgICAgICAgbmFtZTogJ1NFVFRJTkdTLkFwcGx5TGltaXRzTmFtZScsXHJcbiAgICAgICAgaGludDogJ1NFVFRJTkdTLkFwcGx5TGltaXRzRGVzY3JpcHRpb24nLFxyXG4gICAgICAgIHNjb3BlOiAnd29ybGQnLFxyXG4gICAgICAgIGNvbmZpZzogdHJ1ZSxcclxuICAgICAgICB0eXBlOiBCb29sZWFuLFxyXG4gICAgICAgIGRlZmF1bHQ6IHRydWUsXHJcbiAgICB9KTtcclxuXHJcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKFNZU1RFTV9OQU1FLCAnZGlzcGxheURlZmF1bHRSb2xsQ2FyZCcsIHtcclxuICAgICAgICBuYW1lOiAnU0VUVElOR1MuRGlzcGxheURlZmF1bHRSb2xsQ2FyZE5hbWUnLFxyXG4gICAgICAgIGhpbnQ6ICdTRVRUSU5HUy5EaXNwbGF5RGVmYXVsdFJvbGxDYXJkRGVzY3JpcHRpb24nLFxyXG4gICAgICAgIHNjb3BlOiAndXNlcicsXHJcbiAgICAgICAgY29uZmlnOiB0cnVlLFxyXG4gICAgICAgIHR5cGU6IEJvb2xlYW4sXHJcbiAgICAgICAgZGVmYXVsdDogZmFsc2UsXHJcbiAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRyYWNrIHN5c3RlbSB2ZXJzaW9uIHVwb24gd2hpY2ggYSBtaWdyYXRpb24gd2FzIGxhc3QgYXBwbGllZFxyXG4gICAgICovXHJcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKFNZU1RFTV9OQU1FLCBWZXJzaW9uTWlncmF0aW9uLktFWV9EQVRBX1ZFUlNJT04sIHtcclxuICAgICAgICBuYW1lOiAnU3lzdGVtIERhdGEgVmVyc2lvbi4nLFxyXG4gICAgICAgIHNjb3BlOiAnd29ybGQnLFxyXG4gICAgICAgIGNvbmZpZzogZmFsc2UsXHJcbiAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgIGRlZmF1bHQ6ICcwJyxcclxuICAgIH0pO1xyXG5cclxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoU1lTVEVNX05BTUUsIEZMQUdTLlNob3dHbGl0Y2hBbmltYXRpb24sIHtcclxuICAgICAgICBuYW1lOiAnU0VUVElOR1MuU2hvd0dsaXRjaEFuaW1hdGlvbk5hbWUnLFxyXG4gICAgICAgIGhpbnQ6ICdTRVRUSU5HUy5TaG93R2xpdGNoQW5pbWF0aW9uRGVzY3JpcHRpb24nLFxyXG4gICAgICAgIHNjb3BlOiAndXNlcicsXHJcbiAgICAgICAgY29uZmlnOiB0cnVlLFxyXG4gICAgICAgIHR5cGU6IEJvb2xlYW4sXHJcbiAgICAgICAgZGVmYXVsdDogdHJ1ZSxcclxuICAgIH0pO1xyXG5cclxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoU1lTVEVNX05BTUUsIEZMQUdTLlNob3dUb2tlbk5hbWVGb3JDaGF0T3V0cHV0LCB7XHJcbiAgICAgICAgbmFtZTogJ1NFVFRJTkdTLlNob3dUb2tlbk5hbWVGb3JDaGF0T3V0cHV0TmFtZScsXHJcbiAgICAgICAgaGludDogJ1NFVFRJTkdTLlNob3dUb2tlbk5hbWVGb3JDaGF0T3V0cHV0RGVzY3JpcHRpb24nLFxyXG4gICAgICAgIHNjb3BlOiAnd29ybGQnLFxyXG4gICAgICAgIGNvbmZpZzogdHJ1ZSxcclxuICAgICAgICB0eXBlOiBCb29sZWFuLFxyXG4gICAgICAgIGRlZmF1bHQ6IHRydWUsXHJcbiAgICB9KTtcclxuXHJcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKFNZU1RFTV9OQU1FLCBGTEFHUy5XaGlzcGVyT3Bwb3NlZFRlc3RzVG9UYXJnZXRlZFBsYXllcnMsIHtcclxuICAgICAgICBuYW1lOiAnU0VUVElOR1MuV2hpc3Blck9wcG9zZWRUZXN0c1RvVGFyZ2V0ZWRQbGF5ZXJzJyxcclxuICAgICAgICBoaW50OiAnU0VUVElOR1MuV2hpc3Blck9wcG9zZWRUZXN0c1RvVGFyZ2V0ZWRQbGF5ZXJzRGVzY3JpcHRpb24nLFxyXG4gICAgICAgIHNjb3BlOiAnd29ybGQnLFxyXG4gICAgICAgIGNvbmZpZzogdHJ1ZSxcclxuICAgICAgICB0eXBlOiBCb29sZWFuLFxyXG4gICAgICAgIGRlZmF1bHQ6IHRydWUsXHJcbiAgICB9KTtcclxuXHJcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKFNZU1RFTV9OQU1FLCBGTEFHUy5Pbmx5QWxsb3dSb2xsT25EZWZhdWx0YWJsZVNraWxscywge1xyXG4gICAgICAgICBuYW1lOiAnU0VUVElOR1MuT25seUFsbG93Um9sbE9uRGVmYXVsdGFibGVTa2lsbHMnLFxyXG4gICAgICAgIGhpbnQ6ICdTRVRUSU5HUy5Pbmx5QWxsb3dSb2xsT25EZWZhdWx0YWJsZVNraWxsc0Rlc2NyaXB0aW9uJyxcclxuICAgICAgICBzY29wZTogJ3dvcmxkJyxcclxuICAgICAgICBjb25maWc6IHRydWUsXHJcbiAgICAgICAgdHlwZTogQm9vbGVhbixcclxuICAgICAgICBkZWZhdWx0OiB0cnVlLFxyXG4gICAgfSk7XHJcblxyXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcihTWVNURU1fTkFNRSwgRkxBR1MuU2hvd1NraWxsc1dpdGhEZXRhaWxzLCB7XHJcbiAgICAgICAgIG5hbWU6ICdTRVRUSU5HUy5TaG93U2tpbGxzV2l0aERldGFpbHMnLFxyXG4gICAgICAgIGhpbnQ6ICdTRVRUSU5HUy5TaG93U2tpbGxzV2l0aERldGFpbHNEZXNjcmlwdGlvbicsXHJcbiAgICAgICAgc2NvcGU6ICd1c2VyJyxcclxuICAgICAgICBjb25maWc6IHRydWUsXHJcbiAgICAgICAgdHlwZTogQm9vbGVhbixcclxuICAgICAgICBkZWZhdWx0OiB0cnVlLFxyXG4gICAgfSk7XHJcblxyXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcihTWVNURU1fTkFNRSwgRkxBR1MuT25seUF1dG9Sb2xsTlBDSW5Db21iYXQsIHtcclxuICAgICAgICAgbmFtZTogJ1NFVFRJTkdTLk9ubHlBdXRvUm9sbE5QQ0luQ29tYmF0JyxcclxuICAgICAgICBoaW50OiAnU0VUVElOR1MuT25seUF1dG9Sb2xsTlBDSW5Db21iYXREZXNjcmlwdGlvbicsXHJcbiAgICAgICAgc2NvcGU6ICd3b3JsZCcsXHJcbiAgICAgICAgY29uZmlnOiB0cnVlLFxyXG4gICAgICAgIHR5cGU6IEJvb2xlYW4sXHJcbiAgICAgICAgZGVmYXVsdDogdHJ1ZSxcclxuICAgIH0pO1xyXG59O1xyXG4iLCJpbXBvcnQge1NSfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29tYmF0UnVsZXMge1xyXG4gICAgc3RhdGljIGluaU9yZGVyQ2FuRG9Bbm90aGVyUGFzcyhzY29yZXM6IG51bWJlcltdKTogYm9vbGVhbiB7XHJcbiAgICAgICAgZm9yIChjb25zdCBzY29yZSBvZiBzY29yZXMpIHtcclxuICAgICAgICAgICAgaWYgKENvbWJhdFJ1bGVzLmluaVNjb3JlQ2FuRG9Bbm90aGVyUGFzcyhzY29yZSkpIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIHRoZXJlIGlzIGFub3RoZXIgaW5pdGlhdGl2ZSBwYXNzIHBvc3NpYmxlIHdpdGggdGhlIGdpdmVuIHNjb3JlLlxyXG4gICAgICogQHBhcmFtIHNjb3JlXHJcbiAgICAgKiBAcmV0dXJuIHRydWUgbWVhbnMgYW5vdGhlciBpbml0aWF0aXZlIHBhc3MgaXMgcG9zc2libGVcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGluaVNjb3JlQ2FuRG9Bbm90aGVyUGFzcyhzY29yZTogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIENvbWJhdFJ1bGVzLnJlZHVjZUluaVJlc3VsdEFmdGVyUGFzcyhzY29yZSkgPiAwO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWR1Y2UgdGhlIGdpdmVuIGluaXRpYXRpdmUgc2NvcmUgYWNjb3JkaW5nIHRvIEBQREYgU1I1IzE1OVxyXG4gICAgICogQHBhcmFtIHNjb3JlIFRoaXMgZ2l2ZW4gc2NvcmUgY2FuJ3QgYmUgcmVkdWNlZCB1bmRlciB6ZXJvLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgcmVkdWNlSW5pUmVzdWx0QWZ0ZXJQYXNzKHNjb3JlOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiBNYXRoLm1heChzY29yZSArIFNSLmNvbWJhdC5JTklfUkVTVUxUX01PRF9BRlRFUl9JTklfUEFTUywgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWR1Y2UgdGhlIGluaXRpYXRpdmUgc2NvcmUgYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IGluaXRpYXRpdmUgcGFzcyBAUERGIFNSNSMxNjAuXHJcbiAgICAgKiBAcGFyYW0gc2NvcmVcclxuICAgICAqIEBwYXJhbSBwYXNzIFRoZSBjdXJyZW50IGluaXRpYXRpdmUgcGFzcy4gRWFjaCBjb21iYXQgcm91bmQgc3RhcnRzIGF0IHRoZSBpbml0aWF0aXZlIHBhc3Mgb2YgMS5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIHJlZHVjZUluaU9uTGF0ZVNwYXduKHNjb3JlOiBudW1iZXIsIHBhc3M6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgLy8gQXNzdXJlIHZhbGlkIHNjb3JlIHJhbmdlcy5cclxuICAgICAgICAvLyBTaGlmdCBpbml0aWF0aXZlIHBhc3MgdmFsdWUgcmFuZ2UgZnJvbSBtaW4gMSB0byBtaW4gMCBmb3IgbXVsdGlwbGljYXRpb24uXHJcbiAgICAgICAgcGFzcyA9IE1hdGgubWF4KHBhc3MgLSAxLCAwKTtcclxuICAgICAgICBzY29yZSA9IE1hdGgubWF4KHNjb3JlLCAwKTtcclxuXHJcbiAgICAgICAgLy8gUmVkdWNlIHRoZSBuZXcgc2NvcmUgYWNjb3JkaW5nIHRvLiBOT1RFOiBNb2RpZmllciBpcyBuZWdhdGl2ZVxyXG4gICAgICAgIGNvbnN0IHJlZHVjZWRTY29yZSA9IHNjb3JlICsgcGFzcyAqIFNSLmNvbWJhdC5JTklfUkVTVUxUX01PRF9BRlRFUl9JTklfUEFTUztcclxuICAgICAgICByZXR1cm4gTWF0aC5tYXgocmVkdWNlZFNjb3JlLCAwKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7RkxBR1MsIFNSLCBTWVNURU1fTkFNRX0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xyXG5pbXBvcnQgU2l0dWF0aW9uTW9kaWZpZXJzID0gU2hhZG93cnVuLlNpdHVhdGlvbk1vZGlmaWVycztcclxuaW1wb3J0IEVudmlyb25tZW50YWxNb2RpZmllcnMgPSBTaGFkb3dydW4uRW52aXJvbm1lbnRhbE1vZGlmaWVycztcclxuaW1wb3J0IEVudmlyb25tZW50YWxNb2RpZmllckxldmVscyA9IFNoYWRvd3J1bi5FbnZpcm9ubWVudGFsTW9kaWZpZXJMZXZlbHM7XHJcbmltcG9ydCBFbnZpcm9ubWVudGFsTW9kaWZpZXJDYXRlZ29yaWVzID0gU2hhZG93cnVuLkVudmlyb25tZW50YWxNb2RpZmllckNhdGVnb3JpZXM7XHJcblxyXG5leHBvcnQgY2xhc3MgTW9kaWZpZXJzIHtcclxuICAgIGRhdGE6IFNpdHVhdGlvbk1vZGlmaWVycztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhOiBTaXR1YXRpb25Nb2RpZmllcnMpIHtcclxuICAgICAgICAvLyBGYWlsIGdyYWNlZnVsbHkgZm9yIG5vIG1vZGlmaWVycyBnaXZlbi5cclxuICAgICAgICAvLyBUaGlzIGNhbiBoYXBwZW4gYXMgRm91bmRyeSByZXR1cm5zIGVtcHR5IG9iamVjdHMgZm9yIG5vIGZsYWdzIHNldC5cclxuICAgICAgICBpZiAodHlwZW9mIGRhdGEgIT09ICdvYmplY3QnIHx8ICFkYXRhLmVudmlyb25tZW50YWwpIHtcclxuICAgICAgICAgICAgZGF0YSA9IE1vZGlmaWVycy5nZXREZWZhdWx0TW9kaWZpZXJzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBEdXBsaWNhdGUgZGF0YSB0byBhdm9pZCBjcm9zcyB0YWxrIGJldHdlZW4gZGlmZmVyZW50IGVudGl0aWVzIG92ZXIgZGlmZmVyZW50IE1vZGlmaWVyIGluc3RhbmNlcy5cclxuICAgICAgICB0aGlzLmRhdGEgPSBkdXBsaWNhdGUoZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGhhc0FjdGl2ZUVudmlyb25tZW50YWwoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuZW52aXJvbm1lbnRhbC5hY3RpdmUpLmxlbmd0aCA+IDA7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG1vZGlmaWVycygpOiBTaXR1YXRpb25Nb2RpZmllcnMge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IG1vZGlmaWVycyhtb2RpZmllcnM6IFNpdHVhdGlvbk1vZGlmaWVycykge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IG1vZGlmaWVycztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZW52aXJvbm1lbnRhbCgpOiBFbnZpcm9ubWVudGFsTW9kaWZpZXJzIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmVudmlyb25tZW50YWw7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGVudmlyb25tZW50YWwobW9kaWZpZXJzOiBFbnZpcm9ubWVudGFsTW9kaWZpZXJzKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhLmVudmlyb25tZW50YWwgPSBtb2RpZmllcnM7XHJcbiAgICB9XHJcblxyXG4gICAgX21hdGNoaW5nQWN0aXZlRW52aXJvbm1lbnRhbChjYXRlZ29yeToga2V5b2YgRW52aXJvbm1lbnRhbE1vZGlmaWVyQ2F0ZWdvcmllcywgbGV2ZWw6IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVudmlyb25tZW50YWwuYWN0aXZlW2NhdGVnb3J5XSA9PT0gbGV2ZWw7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldEVudmlyb25tZW50YWxDYXRlZ29yeUFjdGl2ZShjYXRlZ29yeToga2V5b2YgRW52aXJvbm1lbnRhbE1vZGlmaWVyQ2F0ZWdvcmllcywgbGV2ZWw6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuZW52aXJvbm1lbnRhbC5hY3RpdmVbY2F0ZWdvcnldID0gbGV2ZWw7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldEVudmlyb25tZW50YWxDYXRlZ29yeUluYWN0aXZlKGNhdGVnb3J5OiBrZXlvZiBFbnZpcm9ubWVudGFsTW9kaWZpZXJDYXRlZ29yaWVzKSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuZW52aXJvbm1lbnRhbC5hY3RpdmVbY2F0ZWdvcnldO1xyXG4gICAgfVxyXG5cclxuICAgIF9kaXNhYmxlRW52aXJvbm1lbnRhbE92ZXJ3cml0ZSgpIHtcclxuICAgICAgICB0aGlzLl9zZXRFbnZpcm9ubWVudGFsQ2F0ZWdvcnlJbmFjdGl2ZSgndmFsdWUnKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogQWN0aWF2dGUgYSBlbnZpcm9ubWVudGFsIG1vZGlmaWVyIGNhdGVnb3J5ICh3aW5kKSB3aXRoIGEgdmFsdWUgYW5kIHJlY2FsY3VsYXRlIHRoZSB0b3RhbCBtb2RpZmllclxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjYXRlZ29yeVxyXG4gICAgICogQHBhcmFtIGxldmVsXHJcbiAgICAgKi9cclxuICAgIGFjdGl2YXRlRW52aXJvbm1lbnRhbENhdGVnb3J5KGNhdGVnb3J5OiBrZXlvZiBFbnZpcm9ubWVudGFsTW9kaWZpZXJDYXRlZ29yaWVzLCBsZXZlbDogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9lbnZpcm9ubWVudGFsQ2F0ZWdvcnlJc092ZXJ3cml0ZShjYXRlZ29yeSkpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGlzYWJsZUVudmlyb25tZW50YWxPdmVyd3JpdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3NldEVudmlyb25tZW50YWxDYXRlZ29yeUFjdGl2ZShjYXRlZ29yeSwgbGV2ZWwpO1xyXG4gICAgICAgIHRoaXMuY2FsY0Vudmlyb25tZW50YWxUb3RhbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZUVudmlyb25tZW50YWxDYXRlZ29yeShjYXRlZ29yeToga2V5b2YgRW52aXJvbm1lbnRhbE1vZGlmaWVyQ2F0ZWdvcmllcywgbGV2ZWw6IG51bWJlcikge1xyXG4gICAgICAgIGlmICh0aGlzLl9tYXRjaGluZ0FjdGl2ZUVudmlyb25tZW50YWwoY2F0ZWdvcnksIGxldmVsKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zZXRFbnZpcm9ubWVudGFsQ2F0ZWdvcnlJbmFjdGl2ZShjYXRlZ29yeSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9lbnZpcm9ubWVudGFsQ2F0ZWdvcnlJc092ZXJ3cml0ZShjYXRlZ29yeSkpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2V0RW52aXJvbm1lbnRhbE92ZXJ3cml0ZUFjdGl2ZShsZXZlbCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fc2V0RW52aXJvbm1lbnRhbENhdGVnb3J5QWN0aXZlKGNhdGVnb3J5LCBsZXZlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZW1vdmUgYSBsaW5nZXJpbmcgb3ZlcndyaXRlIGlmIGFueXRoaW5nIGlzIHNldCBhY3RpdmUuXHJcbiAgICAgICAgaWYgKCF0aGlzLl9lbnZpcm9ubWVudGFsQ2F0ZWdvcnlJc092ZXJ3cml0ZShjYXRlZ29yeSkpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2V0RW52aXJvbm1lbnRhbE92ZXJ3cml0ZUluYWN0aXZlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNhbGNFbnZpcm9ubWVudGFsVG90YWwoKTtcclxuICAgIH1cclxuXHJcbiAgICBjYWxjRW52aXJvbm1lbnRhbFRvdGFsKCkge1xyXG4gICAgICAgIC8vIE1hbnVhbCBzZWxlY3Rpb24gd2lsbCBvdmVyd3JpdGUgYWxsIGVsc2UuLi5cclxuICAgICAgICBpZiAodGhpcy5oYXNBY3RpdmVFbnZpcm9ubWVudGFsT3ZlcndyaXRlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vZGlmaWVyID0gdGhpcy5fYWN0aXZlRW52aXJvbm1lbnRhbE92ZXJ3cml0ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChtb2RpZmllciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdBbiBhY3RpdmUgb3ZlcndyaXRlIG1vZGlmaWVyIHdhcyByZXR1cm5lZCBhcyB1bmRlZmluZWQnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fcmVzZXRFbnZpcm9ubWVudGFsKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3NldEVudmlyb25tZW50YWxPdmVyd3JpdGVBY3RpdmUobW9kaWZpZXIpO1xyXG4gICAgICAgICAgICB0aGlzLl9zZXRFbnZpcm9ubWVudGFsVG90YWwobW9kaWZpZXIpO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBDYWxjdWxhdGlvbiBiYXNlZCBvbiBhY3RpdmUgbW9kaWZpZXIgY2F0ZWdvcmllcywgZXhjbHVkaW5nIG1hbnVhbCBvdmVyd3JpdGUuXHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUNhdGVnb3JpZXMgPSBPYmplY3QuZW50cmllcyh0aGlzLmVudmlyb25tZW50YWwuYWN0aXZlKS5maWx0ZXIoKFtjYXRlZ29yeSwgbGV2ZWxdKSA9PiBjYXRlZ29yeSAhPT0gJ3ZhbHVlJyk7XHJcbiAgICAgICAgICAgIC8vIFNob3VsZCBhbiBhY3RpdmUgY2F0ZWdvcnkgbWlzcyBhIGxldmVsIHNldCwgaWdub3JlIGFuZCBmYWlsIGdyYWNlZnVsbHkuXHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUxldmVscyA9IGFjdGl2ZUNhdGVnb3JpZXMubWFwKChbY2F0ZWdvcnksIGxldmVsXSkgPT4gbGV2ZWwgPyBsZXZlbCA6IDApO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY291bnQgPSB0aGlzLl9jb3VudEFjdGl2ZU1vZGlmaWVyTGV2ZWxzKGFjdGl2ZUxldmVscyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb2RpZmllcnMgPSBNb2RpZmllcnMuZ2V0RW52aXJvbm1lbnRhbE1vZGlmaWVyTGV2ZWxzKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoY291bnQuZXh0cmVtZSA+IDAgfHwgY291bnQuaGVhdnkgPj0gMikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0RW52aXJvbm1lbnRhbFRvdGFsKG1vZGlmaWVycy5leHRyZW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjb3VudC5oZWF2eSA9PT0gMSB8fCBjb3VudC5tb2RlcmF0ZSA+PSAyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRFbnZpcm9ubWVudGFsVG90YWwobW9kaWZpZXJzLmhlYXZ5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjb3VudC5tb2RlcmF0ZSA9PT0gMSB8fCBjb3VudC5saWdodCA+PSAyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRFbnZpcm9ubWVudGFsVG90YWwobW9kaWZpZXJzLm1vZGVyYXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjb3VudC5saWdodCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0RW52aXJvbm1lbnRhbFRvdGFsKG1vZGlmaWVycy5saWdodCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRFbnZpcm9ubWVudGFsVG90YWwobW9kaWZpZXJzLmdvb2QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBhc3luYyBjbGVhck9uRW50aXR5KGVudGl0eTogRW50aXR5KTogUHJvbWlzZTxNb2RpZmllcnM+IHtcclxuICAgICAgICBhd2FpdCBlbnRpdHkudW5zZXRGbGFnKFNZU1RFTV9OQU1FLCBGTEFHUy5Nb2RpZmllcik7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNb2RpZmllcnMoTW9kaWZpZXJzLmdldERlZmF1bHRNb2RpZmllcnMoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFzeW5jIGNsZWFyRW52aXJvbm1lbnRhbE9uRW50aXR5KGVudGl0eTogRW50aXR5KTogUHJvbWlzZTxNb2RpZmllcnM+IHtcclxuICAgICAgICBjb25zdCBtb2RpZmllcnMgPSBhd2FpdCBNb2RpZmllcnMuZ2V0TW9kaWZpZXJzRnJvbUVudGl0eShlbnRpdHkpO1xyXG5cclxuICAgICAgICBtb2RpZmllcnMuZGF0YS5lbnZpcm9ubWVudGFsID0gTW9kaWZpZXJzLmdldERlZmF1bHRFbnZpcm9ubWVudGFsTW9kaWZpZXJzKCk7XHJcblxyXG4gICAgICAgIGF3YWl0IE1vZGlmaWVycy5zZXRNb2RpZmllcnNPbkVudGl0eShlbnRpdHksIG1vZGlmaWVycy5kYXRhKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1vZGlmaWVycztcclxuICAgIH1cclxuXHJcbiAgICBfZW52aXJvbm1lbnRhbENhdGVnb3J5SXNPdmVyd3JpdGUoY2F0ZWdvcnk6IGtleW9mIEVudmlyb25tZW50YWxNb2RpZmllckNhdGVnb3JpZXMpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gY2F0ZWdvcnkgPT09ICd2YWx1ZSc7XHJcbiAgICB9XHJcblxyXG4gICAgX3Jlc2V0RW52aXJvbm1lbnRhbCgpIHtcclxuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmVudmlyb25tZW50YWwuYWN0aXZlKS5mb3JFYWNoKGNhdGVnb3J5ID0+IGRlbGV0ZSB0aGlzLmVudmlyb25tZW50YWwuYWN0aXZlW2NhdGVnb3J5XSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldEVudmlyb25tZW50YWxPdmVyd3JpdGVBY3RpdmUodmFsdWU6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuX3Jlc2V0RW52aXJvbm1lbnRhbCgpO1xyXG4gICAgICAgIHRoaXMuX3NldEVudmlyb25tZW50YWxDYXRlZ29yeUFjdGl2ZSgndmFsdWUnLCB2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldEVudmlyb25tZW50YWxPdmVyd3JpdGVJbmFjdGl2ZSgpIHtcclxuICAgICAgICB0aGlzLl9zZXRFbnZpcm9ubWVudGFsQ2F0ZWdvcnlJbmFjdGl2ZSgndmFsdWUnKTtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0RW52aXJvbm1lbnRhbFRvdGFsKHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmVudmlyb25tZW50YWwudG90YWwgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgX2FjdGl2ZUVudmlyb25tZW50YWxPdmVyd3JpdGUoKTogbnVtYmVyfHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubW9kaWZpZXJzLmVudmlyb25tZW50YWwuYWN0aXZlLnZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBoYXNBY3RpdmVFbnZpcm9ubWVudGFsT3ZlcndyaXRlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVudmlyb25tZW50YWwuYWN0aXZlLnZhbHVlICE9PSB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIENvdW50IHRoZSBhbW91bnQgZWFjaCBsZXZlbCAobW9kaWZpZXIgdmFsdWUpIGFwcGVhcnMgaW4gdGhlIGFycmF5IG9mIG1vZGlmaWVyc1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB2YWx1ZXMgQWN0aXZlIGVudmlyb25tZW50YWwgbW9kaWZpZXJzXHJcbiAgICAgKi9cclxuICAgIF9jb3VudEFjdGl2ZU1vZGlmaWVyTGV2ZWxzKHZhbHVlczogTnVtYmVyW10pIHtcclxuICAgICAgICBjb25zdCBtb2RpZmllcnMgPSBNb2RpZmllcnMuZ2V0RW52aXJvbm1lbnRhbE1vZGlmaWVyTGV2ZWxzKCk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGxpZ2h0OiB2YWx1ZXMucmVkdWNlKChjb3VudDogbnVtYmVyLCB2YWx1ZTogbnVtYmVyKSA9PiAodmFsdWUgPT09IG1vZGlmaWVycy5saWdodCA/IGNvdW50ICsgMSA6IGNvdW50KSwgMCksXHJcbiAgICAgICAgICAgIG1vZGVyYXRlOiB2YWx1ZXMucmVkdWNlKChjb3VudDogbnVtYmVyLCB2YWx1ZTogbnVtYmVyKSA9PiAodmFsdWUgPT09IG1vZGlmaWVycy5tb2RlcmF0ZSA/IGNvdW50ICsgMSA6IGNvdW50KSwgMCksXHJcbiAgICAgICAgICAgIGhlYXZ5OiB2YWx1ZXMucmVkdWNlKChjb3VudDogbnVtYmVyLCB2YWx1ZTogbnVtYmVyKSA9PiAodmFsdWUgPT09IG1vZGlmaWVycy5oZWF2eSA/IGNvdW50ICsgMSA6IGNvdW50KSwgMCksXHJcbiAgICAgICAgICAgIGV4dHJlbWU6IHZhbHVlcy5yZWR1Y2UoKGNvdW50OiBudW1iZXIsIHZhbHVlOiBudW1iZXIpID0+ICh2YWx1ZSA9PT0gbW9kaWZpZXJzLmV4dHJlbWUgPyBjb3VudCArIDEgOiBjb3VudCksIDApXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXREZWZhdWx0RW52aXJvbm1lbnRhbE1vZGlmaWVycygpOiBFbnZpcm9ubWVudGFsTW9kaWZpZXJzICB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdG90YWw6IDAsXHJcbiAgICAgICAgICAgIGFjdGl2ZToge31cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldERlZmF1bHRNb2RpZmllcnMoKTogU2l0dWF0aW9uTW9kaWZpZXJzIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBlbnZpcm9ubWVudGFsOiBNb2RpZmllcnMuZ2V0RGVmYXVsdEVudmlyb25tZW50YWxNb2RpZmllcnMoKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0RW52aXJvbm1lbnRhbE1vZGlmaWVyTGV2ZWxzKCk6IEVudmlyb25tZW50YWxNb2RpZmllckxldmVscyB7XHJcbiAgICAgICAgcmV0dXJuIFNSLmNvbWJhdC5lbnZpcm9ubWVudGFsLmxldmVscztcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYXN5bmMgZ2V0TW9kaWZpZXJzRnJvbUVudGl0eShlbnRpdHk6IEVudGl0eSk6IFByb21pc2U8TW9kaWZpZXJzPiB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGVudGl0eS5nZXRGbGFnKFNZU1RFTV9OQU1FLCBGTEFHUy5Nb2RpZmllcik7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgTW9kaWZpZXJzKGRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBhc3luYyBzZXRNb2RpZmllcnNPbkVudGl0eShlbnRpdHk6IEVudGl0eSwgbW9kaWZpZXJzOiBTaXR1YXRpb25Nb2RpZmllcnMpIHtcclxuICAgICAgICAvLyBUT0RPOiBBc2sgbGVhZ3VlIGFib3V0IHVuc2V0RmxhZyBiZWhhdm9pci4uLlxyXG4gICAgICAgIC8vIE5PVEU6IENoZWNrIGlmIEpTT04gc3RyaW5naWZpZXIgd29ya3Mgb3Igbm90LlxyXG4gICAgICAgIGF3YWl0IGVudGl0eS51bnNldEZsYWcoU1lTVEVNX05BTUUsIEZMQUdTLk1vZGlmaWVyKTtcclxuICAgICAgICBhd2FpdCBlbnRpdHkuc2V0RmxhZyhTWVNURU1fTkFNRSwgRkxBR1MuTW9kaWZpZXIsIG1vZGlmaWVycyk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBTUjVJdGVtIH0gZnJvbSAnLi9pdGVtL1NSNUl0ZW0nO1xyXG5cclxuZXhwb3J0IHR5cGUgU2hhZG93cnVuVGVtcGxhdGVEYXRhID0ge1xyXG4gICAgdDogc3RyaW5nO1xyXG4gICAgdXNlcjogVXNlciB8IHN0cmluZztcclxuICAgIGRpc3RhbmNlOiBudW1iZXI7XHJcbiAgICB4OiBudW1iZXI7XHJcbiAgICB5OiBudW1iZXI7XHJcbiAgICBmaWxsQ29sb3I6IHN0cmluZztcclxuICAgIGRpcmVjdGlvbjogbnVtYmVyO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgLy8gQHRzLWlnbm9yZVxyXG5jbGFzcyBUZW1wbGF0ZSBleHRlbmRzIE1lYXN1cmVkVGVtcGxhdGUge1xyXG4gICAgZGF0YTogU2hhZG93cnVuVGVtcGxhdGVEYXRhO1xyXG4gICAgeDogbnVtYmVyO1xyXG4gICAgeTogbnVtYmVyO1xyXG4gICAgaXRlbT86IFNSNUl0ZW07XHJcbiAgICBvbkNvbXBsZXRlPzogKCkgPT4gdm9pZDtcclxuXHJcbiAgICBzdGF0aWMgZnJvbUl0ZW0oaXRlbTogU1I1SXRlbSwgb25Db21wbGV0ZT86ICgpID0+IHZvaWQpOiBUZW1wbGF0ZSB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgY29uc3QgdGVtcGxhdGVTaGFwZSA9ICdjaXJjbGUnO1xyXG5cclxuICAgICAgICBjb25zdCB0ZW1wbGF0ZURhdGEgPSB7XHJcbiAgICAgICAgICAgIHQ6IHRlbXBsYXRlU2hhcGUsXHJcbiAgICAgICAgICAgIHVzZXI6IGdhbWUudXNlci5faWQsXHJcbiAgICAgICAgICAgIGRpcmVjdGlvbjogMCxcclxuICAgICAgICAgICAgeDogMCxcclxuICAgICAgICAgICAgeTogMCxcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBmaWxsQ29sb3I6IGdhbWUudXNlci5jb2xvcixcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IGJsYXN0ID0gaXRlbS5nZXRCbGFzdERhdGEoKTtcclxuICAgICAgICB0ZW1wbGF0ZURhdGFbJ2Rpc3RhbmNlJ10gPSBibGFzdD8ucmFkaXVzO1xyXG4gICAgICAgIHRlbXBsYXRlRGF0YVsnZHJvcG9mZiddID0gYmxhc3Q/LmRyb3BvZmY7XHJcblxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IG5ldyB0aGlzKHRlbXBsYXRlRGF0YSk7XHJcbiAgICAgICAgdGVtcGxhdGUuaXRlbSA9IGl0ZW07XHJcbiAgICAgICAgdGVtcGxhdGUub25Db21wbGV0ZSA9IG9uQ29tcGxldGU7XHJcbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdQcmV2aWV3KCkge1xyXG4gICAgICAgIGNvbnN0IGluaXRpYWxMYXllciA9IGNhbnZhcy5hY3RpdmVMYXllcjtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIHRoaXMubGF5ZXIuYWN0aXZhdGUoKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgdGhpcy5sYXllci5wcmV2aWV3LmFkZENoaWxkKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuYWN0aXZhdGVQcmV2aWV3TGlzdGVuZXJzKGluaXRpYWxMYXllcik7XHJcbiAgICB9XHJcblxyXG4gICAgYWN0aXZhdGVQcmV2aWV3TGlzdGVuZXJzKGluaXRpYWxMYXllcjogQ2FudmFzTGF5ZXIpIHtcclxuICAgICAgICBjb25zdCBoYW5kbGVycyA9IHt9O1xyXG4gICAgICAgIGxldCBtb3ZlVGltZSA9IDA7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBwbGFjZW1lbnQgKG1vdXNlLW1vdmUpXHJcbiAgICAgICAgaGFuZGxlcnNbJ21tJ10gPSAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIGxldCBub3cgPSBEYXRlLm5vdygpOyAvLyBBcHBseSBhIDIwbXMgdGhyb3R0bGVcclxuICAgICAgICAgICAgaWYgKG5vdyAtIG1vdmVUaW1lIDw9IDIwKSByZXR1cm47XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbnRlciA9IGV2ZW50LmRhdGEuZ2V0TG9jYWxQb3NpdGlvbih0aGlzLmxheWVyKTtcclxuICAgICAgICAgICAgY29uc3Qgc25hcHBlZCA9IGNhbnZhcy5ncmlkLmdldFNuYXBwZWRQb3NpdGlvbihjZW50ZXIueCwgY2VudGVyLnksIDIpO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGEueCA9IHNuYXBwZWQueDtcclxuICAgICAgICAgICAgdGhpcy5kYXRhLnkgPSBzbmFwcGVkLnk7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgIG1vdmVUaW1lID0gbm93O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIENhbmNlbCB0aGUgd29ya2Zsb3cgKHJpZ2h0LWNsaWNrKVxyXG4gICAgICAgIGhhbmRsZXJzWydyYyddID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmxheWVyLnByZXZpZXcucmVtb3ZlQ2hpbGRyZW4oKTtcclxuICAgICAgICAgICAgY2FudmFzLnN0YWdlLm9mZignbW91c2Vtb3ZlJywgaGFuZGxlcnNbJ21tJ10pO1xyXG4gICAgICAgICAgICBjYW52YXMuc3RhZ2Uub2ZmKCdtb3VzZWRvd24nLCBoYW5kbGVyc1snbGMnXSk7XHJcbiAgICAgICAgICAgIGNhbnZhcy5hcHAudmlldy5vbmNvbnRleHRtZW51ID0gbnVsbDtcclxuICAgICAgICAgICAgY2FudmFzLmFwcC52aWV3Lm9ud2hlZWwgPSBudWxsO1xyXG4gICAgICAgICAgICBpbml0aWFsTGF5ZXIuYWN0aXZhdGUoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9uQ29tcGxldGUpIHRoaXMub25Db21wbGV0ZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIENvbmZpcm0gdGhlIHdvcmtmbG93IChsZWZ0LWNsaWNrKVxyXG4gICAgICAgIGhhbmRsZXJzWydsYyddID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGhhbmRsZXJzWydyYyddKGV2ZW50KTtcclxuXHJcbiAgICAgICAgICAgIC8vIENvbmZpcm0gZmluYWwgc25hcHBlZCBwb3NpdGlvblxyXG4gICAgICAgICAgICBjb25zdCBkZXN0aW5hdGlvbiA9IGNhbnZhcy5ncmlkLmdldFNuYXBwZWRQb3NpdGlvbih0aGlzLngsIHRoaXMueSwgMik7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YS54ID0gZGVzdGluYXRpb24ueDtcclxuICAgICAgICAgICAgdGhpcy5kYXRhLnkgPSBkZXN0aW5hdGlvbi55O1xyXG5cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSB0ZW1wbGF0ZVxyXG4gICAgICAgICAgICBjYW52YXMuc2NlbmUuY3JlYXRlRW1iZWRkZWRFbnRpdHkoJ01lYXN1cmVkVGVtcGxhdGUnLCB0aGlzLmRhdGEpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFJvdGF0ZSB0aGUgdGVtcGxhdGUgYnkgMyBkZWdyZWUgaW5jcmVtZW50cyAobW91c2Utd2hlZWwpXHJcbiAgICAgICAgaGFuZGxlcnNbJ213J10gPSAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmN0cmxLZXkpIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIEF2b2lkIHpvb21pbmcgdGhlIGJyb3dzZXIgd2luZG93XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICBsZXQgZGVsdGEgPSBjYW52YXMuZ3JpZC50eXBlID4gQ09OU1QuR1JJRF9UWVBFUy5TUVVBUkUgPyAzMCA6IDE1O1xyXG4gICAgICAgICAgICBsZXQgc25hcCA9IGV2ZW50LnNoaWZ0S2V5ID8gZGVsdGEgOiA1O1xyXG4gICAgICAgICAgICB0aGlzLmRhdGEuZGlyZWN0aW9uICs9IHNuYXAgKiBNYXRoLnNpZ24oZXZlbnQuZGVsdGFZKTtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBBY3RpdmF0ZSBsaXN0ZW5lcnNcclxuICAgICAgICBjYW52YXMuc3RhZ2Uub24oJ21vdXNlbW92ZScsIGhhbmRsZXJzWydtbSddKTtcclxuICAgICAgICBjYW52YXMuc3RhZ2Uub24oJ21vdXNlZG93bicsIGhhbmRsZXJzWydsYyddKTtcclxuICAgICAgICBjYW52YXMuYXBwLnZpZXcub25jb250ZXh0bWVudSA9IGhhbmRsZXJzWydyYyddO1xyXG4gICAgICAgIGNhbnZhcy5hcHAudmlldy5vbndoZWVsID0gaGFuZGxlcnNbJ213J107XHJcbiAgICB9XHJcbn1cclxuIl19"}